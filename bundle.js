var Yp=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),o=0,p=0;p<e;p++)for(var f=t[p],b=0;b<n;b++)u[o++]=f(r[b]);return u}};var Ou={compose:function(t){return function(r){return function(e){return t(r(e))}}}},Ru=function(t){return t.compose};var xt=function(t){return t.identity},wt={identity:function(t){return t},Semigroupoid0:function(){return Ou}};var de=!0;var rc=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},Tr=function(t){return function(r){return function(e){return t(e)(r)}}},h=function(t){return function(r){return t}};var ao=function(t){return function(r){return r(t)}};var t_=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var j=function(){function t(){}return t.value=new t,t}();var d=function(t){return t.map},Xe=function(t){return function(r){return function(e){return d(t)(e)(r)}}},it=function(t){return d(t)(h(void 0))},B=function(t){return function(r){return function(e){return d(t)(h(e))(r)}}},ii=function(t){return function(r){return d(t)(h(r))}};var We={map:Ru(Ou)},Sr={map:t_};var oo={apply:Yp,Functor0:function(){return Sr}},Zt=function(t){return t.apply};var At=function(t){return function(r){return function(e){return Zt(t)(d(t.Functor0())(h(xt(wt)))(r))(e)}}};var _=function(t){return t.pure};var Jn=function(t){return function(r){return function(e){if(r)return e;if(!r)return _(t)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[r.constructor.name,e.constructor.name])}}},io=function(t){return function(r){return function(e){return Zt(t.Apply0())(_(t)(r))(e)}}};var fo={pure:function(t){return[t]},Apply0:function(){return oo}};var e_=function(t){return function(r){return t+r}},n_=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Jr=function(t){return t.reflectSymbol};var we=function(t){return function(r){return r[t]}},Gn=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var a_={append:function(t){return function(r){return void 0}}},jn={append:e_};var Ar={append:n_};var z=function(t){return t.append};var st=function(t){return t.alt};var Kb=String.fromCharCode(65535),Qb=String.fromCharCode(0),Yb=Number.POSITIVE_INFINITY,td=Number.NEGATIVE_INFINITY;var o_=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var i_=o_;var f_=o_;var c_=function(t){return function(r){return t===r}};var l_=c_;var p_=c_;var mu={eq:p_};var co={eq:l_};var Mt=function(t){return t.eq};var Tt=function(){function t(){}return t.value=new t,t}(),Lt=function(){function t(){}return t.value=new t,t}(),It=function(){function t(){}return t.value=new t,t}();var __=function(t){return function(r){return t-r|0}};var s_=function(t){return function(r){return t+r|0}},v_=function(t){return function(r){return t*r|0}},m_=function(t){return function(r){return t+r}},D_=function(t){return function(r){return t*r}};var lo={add:m_,zero:0,mul:D_,one:1},Ze={add:s_,zero:0,mul:v_,one:1};var Qe=function(t){return t.mul};var Ur=function(t){return t.add};var nc={sub:__,Semiring0:function(){return Ze}};var fe=function(){return{compare:f_(Tt.value)(It.value)(Lt.value),Eq0:function(){return mu}}}();var Te=function(){return{compare:i_(Tt.value)(It.value)(Lt.value),Eq0:function(){return co}}}();var Ft=function(t){return t.compare};var Ye=function(t){return t.top};var Nu={top:2147483647,bottom:-2147483648,Ord0:function(){return Te}};var sn=function(t){return t.bottom};var d_=function(t){return t.toString()},A_=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var k_=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,o=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+o})+'"'};var y_=function(t){return function(r){return[t].concat(r)}},ci=function(t){return function(r){return r.join(t)}};var Se={show:k_},g_={showRecordFields:function(t){return function(r){return[]}}},C_=function(t){return t.showRecordFields},h_=function(){return function(){return function(t){return{show:function(r){var e=C_(t)(j.value)(r);return e.length===0?"{}":ci(" ")(["{",ci(", ")(e),"}"])}}}}};var _o={show:A_},tn={show:d_};var at=function(t){return t.show};var ac=function(t){return function(r){return function(e){return{showRecordFields:function(n){return function(u){var o=C_(r)(j.value)(u),p=Jr(t)(j.value),f=we(p)(u);return y_(ci(": ")([p,at(e)(f)]))(o)}}}}}};var L=function(){function t(){}return t.value=new t,t}(),C=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var er=function(t){return function(r){return function(e){if(e instanceof L)return t;if(e instanceof C)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var pa=er(!1)(h(!0));var dr={map:function(t){return function(r){return r instanceof C?new C(t(r.value0)):L.value}}};var ke=function(t){return er(t)(xt(wt))},Ie=function(){return function(t){if(t instanceof C)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Bu={apply:function(t){return function(r){if(t instanceof C)return d(dr)(t.value0)(r);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return dr}},Le={bind:function(t){return function(r){if(t instanceof C)return r(t.value0);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return Bu}};var Xr=function(){return{pure:C.create,Apply0:function(){return Bu}}}();var dd={alt:function(t){return function(r){return t instanceof L?r:t}},Functor0:function(){return dr}},E_=function(){return{empty:L.value,Alt0:function(){return dd}}}();var F_=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=u-1;o>=0;o--)n=t(e[o])(n);return n}}},$_=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=0;o<u;o++)n=t(n)(e[o]);return n}}};var x_=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var Kt=function(t){return t.discard};var pi={bind:x_,Apply0:function(){return oo}},P=function(t){return t.bind},mn=function(t){return Tr(P(t))},_i=function(t){return function(r){return function(e){return function(n){return mn(t)(r)(e(n))}}}},si=function(t){return function(r){return function(e){return function(n){return P(t)(r(n))(e)}}}};var Qt={discard:function(t){return P(t)}};var Uu=function(t){return function(r){return P(t)(r)(xt(wt))}};var y=function(t){return t.empty};var _t=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ft=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var ic=function(t){return er(new _t(t))(ft.create)};var _a={map:function(t){return function(r){if(r instanceof _t)return new _t(r.value0);if(r instanceof ft)return new ft(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[r.constructor.name])}}};var rn=function(t){return function(r){return function(e){if(e instanceof _t)return t(e.value0);if(e instanceof ft)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},fc=function(){return rn(h(L.value))(C.create)}();var hd=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var I_={defer:function(t){return function(r){return t(void 0)(r)}}},sa=function(t){return t.defer},cc=function(t){return function(r){var e=hd("go","Control.Lazy",function(){return sa(t)(function(u){return r(e(25))})}),n=e(25);return n}};var L_=function(t){return function(r){return t&&r}},P_=function(t){return function(r){return t||r}},O_=function(t){return!t};var en=function(t){return t.not};var ma=function(t){return t.ff};var Wu=function(t){return t.disj},ye={ff:!1,tt:!0,implies:function(t){return function(r){return Wu(ye)(en(ye)(t))(r)}},conj:L_,disj:P_,not:O_};var R_=function(t){return Math.min(Math.abs(t),2147483647)},H_=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},N_=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var B_={Ring0:function(){return nc}};var so=function(t){return t.mod};var vi={degree:R_,div:H_,mod:N_,CommutativeRing0:function(){return B_}};var Zu={mempty:void 0,Semigroup0:function(){return a_}},qu={mempty:"",Semigroup0:function(){return jn}};var Ut=function(t){return t.mempty};var q=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Kr=function(t){return t.value1};var zu={map:function(t){return function(r){return new q(r.value0,t(r.value1))}}};var bo=function(t){return t};var Hd=function(t){return{append:function(r){return function(e){return Wu(t)(r)(e)}}}};var sc=function(t){return{mempty:ma(t),Semigroup0:function(){return Hd(t)}}};var J=function(t){return t};var Sn=function(){return J};var Pr=Sn;var yi=function(){return function(){return function(){return function(){return function(t){return Sn()}}}}};var fr=function(t){return t.foldr};var da=function(t){return function(r){return fr(t)(st(r.Alt0()))(y(r))}},gr=function(t){return function(r){return function(e){return fr(t)(function(){var n=st(r.Alt0());return function(u){return n(e(u))}}())(y(r))}}},qe=function(t){return function(r){return function(e){return fr(r)(function(){var n=At(t.Apply0());return function(u){return n(e(u))}}())(_(t)(void 0))}}},Gr=function(t){return function(r){return Tr(qe(t)(r))}},gi=function(t){return function(r){return qe(t)(r)(xt(wt))}},cr=function(t){return t.foldl};var Kn=function(t){return function(r){return function(e){return function(n){var u=function(o){return function(p){return o.init?{init:!1,acc:p}:{init:!1,acc:z(r.Semigroup0())(o.acc)(z(r.Semigroup0())(e)(p))}}};return cr(t)(u)({init:!0,acc:Ut(r)})(n).acc}}}};var jr={foldr:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof C)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof C)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof L)return Ut(t);if(e instanceof C)return r(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[r.constructor.name,e.constructor.name])}}}};var q_=function(t){return function(r){return function(e){return fr(t)(function(n){return function(u){return z(r.Semigroup0())(e(n))(u)}})(Ut(r))}}},mt={foldr:F_,foldl:$_,foldMap:function(t){return q_(mt)(t)}};var Or=function(t){return t.foldMap};var bu=function(t){return function(r){return yi()()()()(bo)(Or(t)(sc(r)))}};var me={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},Ci=function(t){return t.dimap},Oe=function(t){return function(r){return Ci(t)(r)(xt(wt))}};var z_=function(t){return function(){return t}},V_=function(t){return function(r){return function(){return r(t())()}}};var nn=function(t){return function(r){return function(e){return P(t.Bind1())(r)(function(n){return P(t.Bind1())(e)(function(u){return _(t.Applicative0())(n(u))})})}}};var J_=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Aa={Applicative0:function(){return Qr},Bind1:function(){return Au}},Au={bind:V_,Apply0:function(){return dc(0)}},Qr={pure:z_,Apply0:function(){return dc(0)}},G_=J_("functorEffect","Effect",function(){return{map:io(Qr)}}),dc=J_("applyEffect","Effect",function(){return{apply:nn(Aa),Functor0:function(){return G_(0)}}}),R=G_(20),mr=dc(23);var qd=function(t){return t},yo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),go=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zd=function(t){return t},hi=Sn(),i=zd;var E=function(){return yo.create}();var Z=function(){return go.create}(),Dr=function(){var t=d(We)(d(R)(h(!0)));return function(r){return qd(t(r))}}(),ct=function(t){return t.attr};function j_(t){return()=>t.slice()}function X_(t){return r=>e=>()=>{e[t]=r}}function K_(t){return()=>t.slice()}var Ac=J;var Y_=function(t){return function(r){return function(){return t(r())}}},ts=function(t){return function(){return t}},rs=function(t){return function(r){return function(){return r(t())()}}};function kc(t){return function(r){return function(){for(;t();)r()}}}function Cr(t){return function(){return{value:t}}}var lr=function(t){return function(){return t.value}},es=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Rr=function(t){return function(r){return function(){return r.value=t}}};var Fn=function(t){return t};var $n={map:function(t){return function(r){return t(r)}}};var ns={apply:function(t){return function(r){return t(r)}},Functor0:function(){return $n}},Gd={bind:function(t){return function(r){return r(t)}},Apply0:function(){return ns}},jd={pure:Fn,Apply0:function(){return ns}},yr={Applicative0:function(){return jd},Bind1:function(){return Gd}};var us=function(t){return function(){return{value:t}}};var xn=function(t){return function(){return t.value}},as=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},ka=function(t){return function(r){return function(){r.value=t}}};var ku=us,Kd=as,yc=function(t){return Kd(function(r){var e=t(r);return{state:e,value:e}})},gc=function(t){return function(r){return it(R)(yc(t)(r))}};var te=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Yr=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dn=function(t){return t.tailRecM};var os={tailRecM:function(t){return function(r){var e=function(n){if(n instanceof Yr)return n.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 113, column 30 - line 113, column 44): "+[n.constructor.name])};return function(){var u=mn(Au)(ku)(t(r))();return function(){for(;!function(){var p=xn(u)();if(p instanceof te){var f=t(p.value0)();return ka(f)(u)(),!1}if(p instanceof Yr)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 104, column 22 - line 109, column 28): "+[p.constructor.name])}(););return{}}(),d(R)(e)(xn(u))()}}},Monad0:function(){return Aa}};var rA=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},eA=es,Wr=function(t){return eA(function(r){var e=t(r);return{state:e,value:e}})},ur={map:Y_},ho={Applicative0:function(){return De},Bind1:function(){return Qn}},Qn={bind:rs,Apply0:function(){return Cc(0)}},De={pure:ts,Apply0:function(){return Cc(0)}},Cc=rA("applyST","Control.Monad.ST.Internal",function(){return{apply:nn(ho),Functor0:function(){return ur}}}),fs=Cc(46),hc={tailRecM:function(t){return function(r){var e=function(u){return u instanceof te},n=function(u){if(u instanceof Yr)return u.value0;throw new Error("Failed pattern match at Control.Monad.ST.Internal (line 69, column 32 - line 69, column 46): "+[u.constructor.name])};return P(Qn)(mn(Qn)(Cr)(t(r)))(function(u){return Kt(Qt)(Qn)(kc(d(ur)(e)(lr(u)))(P(Qn)(lr(u))(function(o){if(o instanceof te)return P(Qn)(t(o.value0))(function(p){return it(ur)(Rr(p)(u))});if(o instanceof Yr)return _(De)(void 0);throw new Error("Failed pattern match at Control.Monad.ST.Internal (line 61, column 18 - line 65, column 28): "+[o.constructor.name])})))(function(){return d(ur)(n)(lr(u))})})}},Monad0:function(){return ho}};var cs={liftST:xt(wt),Monad0:function(){return ho}};var Q=function(t){return t.liftST};var nA=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},uA=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},Sc=typeof Array.prototype.fill=="function"?nA:uA,aA=function(){function t(u,o){this.head=u,this.tail=o}var r={};function e(u){return function(o){return new t(u,o)}}function n(u){for(var o=[],p=0,f=u;f!==r;)o[p++]=f.head,f=f.tail;return o}return function(u){return function(o){return n(u(e)(r)(o))}}}(),Mn=function(t){return t.length};var ls=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},ps=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var o=e(n[u]);if(r(o))return o}return t}}}},_s=function(t){return function(r){return function(e){return function(n){for(var u=0,o=n.length;u<o;u++)if(e(n[u]))return t(u);return r}}}};var ss=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var To=function(t){return function(r){return r.filter(t)}},Ti=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var o=r[u];t(o)?e.push(o):n.push(o)}return{yes:e,no:n}}};var oA=function(){function t(r,e,n,u,o,p){var f,b,m,k,g,D,a;for(f=o+(p-o>>1),f-o>1&&t(r,e,u,n,o,f),p-f>1&&t(r,e,u,n,f,p),b=o,m=f,k=o;b<f&&m<p;)g=u[b],D=u[m],a=e(r(g)(D)),a>0?(n[k++]=D,++m):(n[k++]=g,++b);for(;b<f;)n[k++]=u[b++];for(;m<p;)n[k++]=u[m++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var vs=function(t){return function(r){return t[r]}};function wn(){return[]}var Ec=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var Si=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},In=function(t){return function(){return t}};function ms(t){return function(){return t.slice()}}var Ei=ms,Fc=ms,fA=function(){function t(r,e,n,u,o,p){var f,b,m,k,g,D,a;for(f=o+(p-o>>1),f-o>1&&t(r,e,u,n,o,f),p-f>1&&t(r,e,u,n,f,p),b=o,m=f,k=o;b<f&&m<p;)g=u[b],D=u[m],a=e(r(g)(D)),a>0?(n[k++]=D,++m):(n[k++]=g,++b);for(;b<f;)n[k++]=u[b++];for(;m<p;)n[k++]=u[m++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var As=function(t){return function(r){return function(){var n=Fc(r)();return t(n)(),In(n)()}}};var an=function(t){return Ec([t])};var pA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var _A=function(t){return function(){var e=lr(t.value1)();return Wr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var $i=function(t){return d(ur)(pA.create(t))(Cr(0))},xi=function(t){return function(r){return function(){for(var n=Cr(!1)();d(ur)(en(ye))(lr(n))();)(function(){var o=_A(t)();if(o instanceof C)return r(o.value0)();if(o instanceof L)return it(ur)(Rr(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[o.constructor.name])})();return{}}}};var ys=function(){function t(u){return[u]}function r(u){return function(o){return[u,o]}}function e(u){return function(o){return function(p){return[u,o,p]}}}function n(u){return function(o){return u.concat(o)}}return function(u){return function(o){return function(p){return function(f){return function(b){function m(k,g){switch(g-k){case 0:return p([]);case 1:return o(t)(f(b[k]));case 2:return u(o(r)(f(b[k])))(f(b[k+1]));case 3:return u(u(o(e)(f(b[k])))(f(b[k+1])))(f(b[k+2]));default:var D=k+Math.floor((g-k)/4)*2;return u(o(n)(m(k,D)))(m(D,g))}}return m(0,b.length)}}}}}}();var Ee=function(t){return t.traverse};var Ms=function(t){return function(r){return Ee(t)(r)(xt(wt))}},tu={traverse:function(t){return ys(Zt(t.Apply0()))(d(t.Apply0().Functor0()))(_(t))},sequence:function(t){return Ms(tu)(t)},Functor0:function(){return Sr},Foldable1:function(){return mt}};var Os=function(){return vs};var Ri=function(t){return function(r){return As(an(r))(t)()}},Rs=function(t){return[t]};var ju=function(){return ls(C.create)(L.value)}(),Hc=function(t){return ju(t)(Mn(t)-1|0)};var Hi=function(){return ps(L.value)(pa)}();var Nc=function(){return _s(C.create)(L.value)}();var Bc=function(t){return function(r){return d(dr)(Os()(r))(Nc(t)(r))}};var Hs=function(){return ss(C.create)(L.value)}(),Ni=function(t){return function(r){return function(e){return e.length===0?[]:er(e)(function(n){return Ie()(Hs(n)(e))})(Nc(t(r))(e))}}};var Eo=function(t){return function(r){return z(Ar)([t])(r)}};var ik=Tr(P(pi)),Uc=function(t){return ik(function(){var r=er([])(Rs);return function(e){return r(t(e))}}())};var Ns=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var ru=function(t){return t.mapWithIndex};var ha={mapWithIndex:Ns,Functor0:function(){return Sr}};var Pn=function(t){return t.foldrWithIndex};var on=function(t){return t.foldlWithIndex};var eu=function(t){return t.foldMapWithIndex};var On=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Ui=function(t){return function(r){return new On(r,y(t))}};var hr=function(){function t(){}return t.value=new t,t}(),yt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Wi=function(t){return t},yk=function(t){return new yt(t.value0,t.value1)};var gk=function(t){var r=function(e){return function(n){var u=e,o=!1,p;function f(b,m){if(m instanceof yt&&m.value1 instanceof yt&&m.value1.value1 instanceof yt){u=new yt(m,b),n=m.value1.value1.value1;return}var k=function(D){return D instanceof yt&&D.value1 instanceof yt&&D.value1.value1 instanceof hr?new yt(t(D.value0),new yt(t(D.value1.value0),hr.value)):D instanceof yt&&D.value1 instanceof hr?new yt(t(D.value0),hr.value):hr.value},g=function(D){return function(a){var T=D,ut=!1,Pt;function Ht(Nt,Be){if(Nt instanceof yt&&Nt.value0 instanceof yt&&Nt.value0.value1 instanceof yt&&Nt.value0.value1.value1 instanceof yt){T=Nt.value1,a=new yt(t(Nt.value0.value0),new yt(t(Nt.value0.value1.value0),new yt(t(Nt.value0.value1.value1.value0),Be)));return}return ut=!0,Be}for(;!ut;)Pt=Ht(T,a);return Pt}};return o=!0,g(b)(k(m))}for(;!o;)p=f(u,n);return p}};return r(hr.value)},Zc={map:gk};var fn={foldr:function(t){return function(r){var e=function(){var u=function(o){return function(p){var f=o,b=!1,m;function k(g,D){if(D instanceof hr)return b=!0,g;if(D instanceof yt){f=new yt(D.value0,g),p=D.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[g.constructor.name,D.constructor.name])}for(;!b;)m=k(f,p);return m}};return u(hr.value)}(),n=cr(fn)(Tr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,o=!1,p;function f(b,m){if(m instanceof hr)return o=!0,b;if(m instanceof yt){u=t(b)(m.value0),n=m.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[m.constructor.name])}for(;!o;)p=f(u,n);return p}};return r},foldMap:function(t){return function(r){return cr(fn)(function(e){var n=z(t.Semigroup0())(e);return function(u){return n(r(u))}})(Ut(t))}}};var Fo={append:function(t){return function(r){return fr(fn)(yt.create)(r)(t)}}};var qc={append:function(t){return function(r){return new On(t.value0,z(Fo)(t.value1)(yk(r)))}}};var Ws={alt:z(Fo),Functor0:function(){return Zc}},zc=function(){return{empty:hr.value,Alt0:function(){return Ws}}}();var Gs=function(t){return t()};var js=function(t){throw new Error(t)};var Xs=function(){return js};var Uk=Gs,An=function(t){return Uk(function(){return Xs()(t)})};var lt=function(){function t(){}return t.value=new t,t}(),gt=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),zt=function(){function t(r,e,n,u,o,p,f){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p,this.value6=f}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return function(f){return new t(r,e,n,u,o,p,f)}}}}}}},t}(),Cu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),nu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),hu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Rn=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Tu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),qi=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Ys=function(t){return function(r){return new gt(lt.value,t,r,lt.value)}};var Ea=function(t){return function(r){var e=Ft(t),n=function(u){var o=!1,p;function f(b){if(b instanceof lt)return o=!0,L.value;if(b instanceof gt){var m=e(r)(b.value1);if(m instanceof It)return o=!0,new C(b.value2);if(m instanceof Tt){u=b.value0;return}u=b.value3;return}if(b instanceof zt){var k=e(r)(b.value1);if(k instanceof It)return o=!0,new C(b.value2);var g=e(r)(b.value4);if(g instanceof It)return o=!0,new C(b.value5);if(k instanceof Tt){u=b.value0;return}if(g instanceof Lt){u=b.value6;return}u=b.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[b.constructor.name])}for(;!o;)p=f(u);return p};return n}};var Hr=function(t){return function(r){return function(e){var n=t,u=r,o=!1,p;function f(b,m,k){if(m instanceof hr)return o=!0,k;if(m instanceof yt){if(m.value0 instanceof Cu){n=b,u=m.value1,e=new gt(k,m.value0.value0,m.value0.value1,m.value0.value2);return}if(m.value0 instanceof nu){n=b,u=m.value1,e=new gt(m.value0.value0,m.value0.value1,m.value0.value2,k);return}if(m.value0 instanceof hu){n=b,u=m.value1,e=new zt(k,m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5);return}if(m.value0 instanceof Rn){n=b,u=m.value1,e=new zt(m.value0.value0,m.value0.value1,m.value0.value2,k,m.value0.value3,m.value0.value4,m.value0.value5);return}if(m.value0 instanceof Tu){n=b,u=m.value1,e=new zt(m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5,k);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[m.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[m.constructor.name,k.constructor.name])}for(;!o;)p=f(n,u,e);return p}}},Vi=function(t){return function(r){return function(e){var n=function(p){return function(f){var b=p,m=!1,k;function g(D,a){if(D instanceof hr)return m=!0,new gt(a.value0,a.value1,a.value2,a.value3);if(D instanceof yt){if(D.value0 instanceof Cu)return m=!0,Hr(t)(D.value1)(new zt(a.value0,a.value1,a.value2,a.value3,D.value0.value0,D.value0.value1,D.value0.value2));if(D.value0 instanceof nu)return m=!0,Hr(t)(D.value1)(new zt(D.value0.value0,D.value0.value1,D.value0.value2,a.value0,a.value1,a.value2,a.value3));if(D.value0 instanceof hu){b=D.value1,f=new qi(new gt(a.value0,a.value1,a.value2,a.value3),D.value0.value0,D.value0.value1,new gt(D.value0.value2,D.value0.value3,D.value0.value4,D.value0.value5));return}if(D.value0 instanceof Rn){b=D.value1,f=new qi(new gt(D.value0.value0,D.value0.value1,D.value0.value2,a.value0),a.value1,a.value2,new gt(a.value3,D.value0.value3,D.value0.value4,D.value0.value5));return}if(D.value0 instanceof Tu){b=D.value1,f=new qi(new gt(D.value0.value0,D.value0.value1,D.value0.value2,D.value0.value3),D.value0.value4,D.value0.value5,new gt(a.value0,a.value1,a.value2,a.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[D.value0.constructor.name,a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[D.constructor.name,a.constructor.name])}for(;!m;)k=g(b,f);return k}},u=Ft(t),o=function(p){return function(f){var b=p,m=!1,k;function g(D,a){if(a instanceof lt)return m=!0,n(D)(new qi(lt.value,r,e,lt.value));if(a instanceof gt){var T=u(r)(a.value1);if(T instanceof It)return m=!0,Hr(t)(D)(new gt(a.value0,r,e,a.value3));if(T instanceof Tt){b=new yt(new Cu(a.value1,a.value2,a.value3),D),f=a.value0;return}b=new yt(new nu(a.value0,a.value1,a.value2),D),f=a.value3;return}if(a instanceof zt){var ut=u(r)(a.value1);if(ut instanceof It)return m=!0,Hr(t)(D)(new zt(a.value0,r,e,a.value3,a.value4,a.value5,a.value6));var Pt=u(r)(a.value4);if(Pt instanceof It)return m=!0,Hr(t)(D)(new zt(a.value0,a.value1,a.value2,a.value3,r,e,a.value6));if(ut instanceof Tt){b=new yt(new hu(a.value1,a.value2,a.value3,a.value4,a.value5,a.value6),D),f=a.value0;return}if(ut instanceof Lt&&Pt instanceof Tt){b=new yt(new Rn(a.value0,a.value1,a.value2,a.value4,a.value5,a.value6),D),f=a.value3;return}b=new yt(new Tu(a.value0,a.value1,a.value2,a.value3,a.value4,a.value5),D),f=a.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[D.constructor.name,a.constructor.name])}for(;!m;)k=g(b,f);return k}};return o(hr.value)}}},Gk=function(t){return function(r){var e=function(f){return function(b){var m=f,k=!1,g;function D(a,T){if(a instanceof hr)return k=!0,T;if(a instanceof yt){if(a.value0 instanceof Cu&&a.value0.value2 instanceof lt&&T instanceof lt)return k=!0,Hr(t)(a.value1)(new gt(lt.value,a.value0.value0,a.value0.value1,lt.value));if(a.value0 instanceof nu&&a.value0.value0 instanceof lt&&T instanceof lt)return k=!0,Hr(t)(a.value1)(new gt(lt.value,a.value0.value1,a.value0.value2,lt.value));if(a.value0 instanceof Cu&&a.value0.value2 instanceof gt){m=a.value1,b=new zt(T,a.value0.value0,a.value0.value1,a.value0.value2.value0,a.value0.value2.value1,a.value0.value2.value2,a.value0.value2.value3);return}if(a.value0 instanceof nu&&a.value0.value0 instanceof gt){m=a.value1,b=new zt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3,a.value0.value1,a.value0.value2,T);return}return a.value0 instanceof Cu&&a.value0.value2 instanceof zt?(k=!0,Hr(t)(a.value1)(new gt(new gt(T,a.value0.value0,a.value0.value1,a.value0.value2.value0),a.value0.value2.value1,a.value0.value2.value2,new gt(a.value0.value2.value3,a.value0.value2.value4,a.value0.value2.value5,a.value0.value2.value6)))):a.value0 instanceof nu&&a.value0.value0 instanceof zt?(k=!0,Hr(t)(a.value1)(new gt(new gt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3),a.value0.value0.value4,a.value0.value0.value5,new gt(a.value0.value0.value6,a.value0.value1,a.value0.value2,T)))):a.value0 instanceof hu&&a.value0.value2 instanceof lt&&a.value0.value5 instanceof lt&&T instanceof lt?(k=!0,Hr(t)(a.value1)(new zt(lt.value,a.value0.value0,a.value0.value1,lt.value,a.value0.value3,a.value0.value4,lt.value))):a.value0 instanceof Rn&&a.value0.value0 instanceof lt&&a.value0.value5 instanceof lt&&T instanceof lt?(k=!0,Hr(t)(a.value1)(new zt(lt.value,a.value0.value1,a.value0.value2,lt.value,a.value0.value3,a.value0.value4,lt.value))):a.value0 instanceof Tu&&a.value0.value0 instanceof lt&&a.value0.value3 instanceof lt&&T instanceof lt?(k=!0,Hr(t)(a.value1)(new zt(lt.value,a.value0.value1,a.value0.value2,lt.value,a.value0.value4,a.value0.value5,lt.value))):a.value0 instanceof hu&&a.value0.value2 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(new zt(T,a.value0.value0,a.value0.value1,a.value0.value2.value0,a.value0.value2.value1,a.value0.value2.value2,a.value0.value2.value3),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value0 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(new zt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3,a.value0.value1,a.value0.value2,T),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value5 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(a.value0.value0,a.value0.value1,a.value0.value2,new zt(T,a.value0.value3,a.value0.value4,a.value0.value5.value0,a.value0.value5.value1,a.value0.value5.value2,a.value0.value5.value3)))):a.value0 instanceof Tu&&a.value0.value3 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(a.value0.value0,a.value0.value1,a.value0.value2,new zt(a.value0.value3.value0,a.value0.value3.value1,a.value0.value3.value2,a.value0.value3.value3,a.value0.value4,a.value0.value5,T)))):a.value0 instanceof hu&&a.value0.value2 instanceof zt?(k=!0,Hr(t)(a.value1)(new zt(new gt(T,a.value0.value0,a.value0.value1,a.value0.value2.value0),a.value0.value2.value1,a.value0.value2.value2,new gt(a.value0.value2.value3,a.value0.value2.value4,a.value0.value2.value5,a.value0.value2.value6),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value0 instanceof zt?(k=!0,Hr(t)(a.value1)(new zt(new gt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3),a.value0.value0.value4,a.value0.value0.value5,new gt(a.value0.value0.value6,a.value0.value1,a.value0.value2,T),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value5 instanceof zt?(k=!0,Hr(t)(a.value1)(new zt(a.value0.value0,a.value0.value1,a.value0.value2,new gt(T,a.value0.value3,a.value0.value4,a.value0.value5.value0),a.value0.value5.value1,a.value0.value5.value2,new gt(a.value0.value5.value3,a.value0.value5.value4,a.value0.value5.value5,a.value0.value5.value6)))):a.value0 instanceof Tu&&a.value0.value3 instanceof zt?(k=!0,Hr(t)(a.value1)(new zt(a.value0.value0,a.value0.value1,a.value0.value2,new gt(a.value0.value3.value0,a.value0.value3.value1,a.value0.value3.value2,a.value0.value3.value3),a.value0.value3.value4,a.value0.value3.value5,new gt(a.value0.value3.value6,a.value0.value4,a.value0.value5,T)))):(k=!0,An("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[a.constructor.name])}for(;!k;)g=D(m,b);return g}},n=function(f){return function(b){var m=f,k=!1,g;function D(a,T){if(T instanceof gt&&T.value0 instanceof lt&&T.value3 instanceof lt)return k=!0,e(a)(lt.value);if(T instanceof gt){m=new yt(new nu(T.value0,T.value1,T.value2),a),b=T.value3;return}if(T instanceof zt&&T.value0 instanceof lt&&T.value3 instanceof lt&&T.value6 instanceof lt)return k=!0,e(new yt(new nu(lt.value,T.value1,T.value2),a))(lt.value);if(T instanceof zt){m=new yt(new Tu(T.value0,T.value1,T.value2,T.value3,T.value4,T.value5),a),b=T.value6;return}return k=!0,An("The impossible happened in partial function `removeMaxNode`.")}for(;!k;)g=D(m,b);return g}},u=function(f){var b=!1,m;function k(g){if(g instanceof gt&&g.value3 instanceof lt)return b=!0,{key:g.value1,value:g.value2};if(g instanceof gt){f=g.value3;return}if(g instanceof zt&&g.value6 instanceof lt)return b=!0,{key:g.value4,value:g.value5};if(g instanceof zt){f=g.value6;return}return b=!0,An("The impossible happened in partial function `maxNode`.")}for(;!b;)m=k(f);return m},o=Ft(t),p=function(f){return function(b){var m=f,k=!1,g;function D(a,T){if(T instanceof lt)return k=!0,L.value;if(T instanceof gt){var ut=o(r)(T.value1);if(T.value3 instanceof lt&&ut instanceof It)return k=!0,new C(new q(T.value2,e(a)(lt.value)));if(ut instanceof It){var Pt=u(T.value0);return k=!0,new C(new q(T.value2,n(new yt(new Cu(Pt.key,Pt.value,T.value3),a))(T.value0)))}if(ut instanceof Tt){m=new yt(new Cu(T.value1,T.value2,T.value3),a),b=T.value0;return}m=new yt(new nu(T.value0,T.value1,T.value2),a),b=T.value3;return}if(T instanceof zt){var Ht=function(){return T.value0 instanceof lt&&T.value3 instanceof lt&&T.value6 instanceof lt}(),ut=o(r)(T.value4),Nt=o(r)(T.value1);if(Ht&&Nt instanceof It)return k=!0,new C(new q(T.value2,Hr(t)(a)(new gt(lt.value,T.value4,T.value5,lt.value))));if(Ht&&ut instanceof It)return k=!0,new C(new q(T.value5,Hr(t)(a)(new gt(lt.value,T.value1,T.value2,lt.value))));if(Nt instanceof It){var Pt=u(T.value0);return k=!0,new C(new q(T.value2,n(new yt(new hu(Pt.key,Pt.value,T.value3,T.value4,T.value5,T.value6),a))(T.value0)))}if(ut instanceof It){var Pt=u(T.value3);return k=!0,new C(new q(T.value5,n(new yt(new Rn(T.value0,T.value1,T.value2,Pt.key,Pt.value,T.value6),a))(T.value3)))}if(Nt instanceof Tt){m=new yt(new hu(T.value1,T.value2,T.value3,T.value4,T.value5,T.value6),a),b=T.value0;return}if(Nt instanceof Lt&&ut instanceof Tt){m=new yt(new Rn(T.value0,T.value1,T.value2,T.value4,T.value5,T.value6),a),b=T.value3;return}m=new yt(new Tu(T.value0,T.value1,T.value2,T.value3,T.value4,T.value5),a),b=T.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[T.constructor.name])}for(;!k;)g=D(m,b);return g}};return p(hr.value)}},ge={foldr:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return fr(ge)(t)(t(e.value2)(fr(ge)(t)(r)(e.value3)))(e.value0);if(e instanceof zt)return fr(ge)(t)(t(e.value2)(fr(ge)(t)(t(e.value5)(fr(ge)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return cr(ge)(t)(t(cr(ge)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof zt)return cr(ge)(t)(t(cr(ge)(t)(t(cr(ge)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof lt)return Ut(t);if(e instanceof gt)return z(t.Semigroup0())(Or(ge)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(Or(ge)(t)(r)(e.value3)));if(e instanceof zt)return z(t.Semigroup0())(Or(ge)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(z(t.Semigroup0())(Or(ge)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value5))(Or(ge)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[e.constructor.name])}}}},re={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return Pn(re)(t)(t(e.value1)(e.value2)(Pn(re)(t)(r)(e.value3)))(e.value0);if(e instanceof zt)return Pn(re)(t)(t(e.value1)(e.value2)(Pn(re)(t)(t(e.value4)(e.value5)(Pn(re)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return on(re)(t)(t(e.value1)(on(re)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof zt)return on(re)(t)(t(e.value4)(on(re)(t)(t(e.value1)(on(re)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){return function(r){return function(e){if(e instanceof lt)return Ut(t);if(e instanceof gt)return z(t.Semigroup0())(eu(re)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(eu(re)(t)(r)(e.value3)));if(e instanceof zt)return z(t.Semigroup0())(eu(re)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(z(t.Semigroup0())(eu(re)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value4)(e.value5))(eu(re)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[e.constructor.name])}}},Foldable0:function(){return ge}},tv=function(){return Pn(re)(function(t){return function(r){return function(e){return new yt(t,e)}}})(hr.value)}();var Hn=function(){return lt.value}();var Xc=function(t){return function(r){return function(e){return er(e)(Kr)(Gk(t)(r)(e))}}};var Nn=function(t){return function(r){return function(e){return function(n){var u=r(Ea(t)(e)(n));if(u instanceof L)return Xc(t)(e)(n);if(u instanceof C)return Vi(t)(e)(u.value0)(n);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[u.constructor.name])}}}};var jk=function(t){return function(r){return function(e){return function(n){var u=function(o){return function(p){return function(f){return Nn(t)(function(){var b=er(f)(r(f));return function(m){return C.create(b(m))}}())(o)(p)}}};return on(re)(u)(n)(e)}}}};var rv=function(t){return jk(t)(h)};var ev={compact:function(t){return function(){var e=wn(),n=$i(function(u){return ju(t)(u)})();return xi(n)(function(){var u=it(ur);return function(o){return u(function(p){if(p instanceof L)return _(De)(0);if(p instanceof C)return an(p.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[p.constructor.name])}(o))}}())(),In(e)()}()},separate:function(t){return function(){var e=wn(),n=wn(),u=$i(function(o){return ju(t)(o)})();return xi(u)(function(){var o=it(ur);return function(p){return o(function(f){if(f instanceof _t)return an(f.value0)(e);if(f instanceof ft)return an(f.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[f.constructor.name])}(p))}}())(),Zt(fs)(d(ur)(function(o){return function(p){return{left:o,right:p}}})(In(e)))(In(n))()}()}};var Ku=function(t){return t.compact};var nv={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof _t)return{left:z(Ar)(e.left)([u.value0]),right:e.right};if(u instanceof ft)return{right:z(Ar)(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return cr(mt)(r)({left:[],right:[]})},partition:Ti,filterMap:Uc,filter:To,Compactable0:function(){return ev},Functor1:function(){return Sr}};var Fe=function(t){return t.filterMap};var uv=function(t){return t.filter};var ey=function(t){return function(r){return function(e){return rv(t)(r)(e)}}};var Kc=function(t){return tv(t)};var ov=function(t){return Ys(t)(void 0)};var Qc=function(t){return{append:ey(t)}};var iv={foldMap:function(t){return function(r){var e=Or(fn)(t)(r);return function(n){return e(Kc(n))}}},foldl:function(t){return function(r){var e=cr(fn)(t)(r);return function(n){return e(Kc(n))}}},foldr:function(t){return function(r){var e=fr(fn)(t)(r);return function(n){return e(Kc(n))}}}};var ny=Hn;var fv=function(t){return{mempty:ny,Semigroup0:function(){return Qc(t)}}};var cv=function(t){return function(r){return function(e){return Xc(t)(r)(e)}}};function lv(t){return function(r){return function(){return setTimeout(r,t)}}}function pv(t){return function(){clearTimeout(t)}}var _v=lv;var oy={eq:function(t){return function(r){return t===r}}},Gi={compare:function(t){return function(r){return Ft(Te)(t)(r)}},Eq0:function(){return oy}};var sv=pv;var Qu=function(t){return t.keepLatest};var Su=function(t){return t.fold};var Yu=function(t){return function(r){return function(e){return function(n){return Fe(t.Filterable1())(Kr)(Su(t)(function(u){return function(o){return d(zu)(_(Xr))(r(u)(o.value0))}})(e)(new q(n,L.value)))}}}};var ji=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Xi=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ki=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),U={map:function(t){return function(r){return function(e,n,u,o){return r(e,n,u,function(p){return o(t(p))})}}}},uu={apply:function(t){return function(r){return function(e,n,u,o){return u(function(p){return t(e,n,u,function(f){return u(function(b){return r(e,n,u,function(m){return o(f(m))})})})})}}},Functor0:function(){return U}},cn={bind:function(t){return function(r){return function(e,n,u,o){return u(function(p){return t(e,n,u,function(f){var b=r(f);return u(function(m){return b(e,n,u,function(k){return o(k)})})})})}}},Apply0:function(){return uu}};var s={pure:function(t){return function(r,e,n,u){return u(t)}},Apply0:function(){return uu}},fy={Applicative0:function(){return s},Bind1:function(){return cn}};var Yc=function(t){var r=function(e){var n=!1,u;function o(p){var f=p(void 0);if(f instanceof ji){e=f.value0;return}if(f instanceof Xi){e=f.value0;return}if(f instanceof Ki)return n=!0,d(ur)(te.create)(f.value0);if(f instanceof Qi)return n=!0,_(De)(new Yr(f.value0));throw new Error("Failed pattern match at Hyrule.Zora (line 144, column 15 - line 148, column 30): "+[f.constructor.name])}for(;!n;)u=o(e);return u};return Dn(hc)(r)(function(e){return t(function(n,u){return new Xi(n,u)},Ki.create,ji.create,Qi.create)})},W=function(t){var r=function(e){var n=!1,u;function o(p){var f=p(void 0);if(f instanceof ji){e=f.value0;return}if(f instanceof Xi)return n=!0,d(R)(te.create)(f.value1);if(f instanceof Ki)return n=!0,d(R)(te.create)(Ac(f.value0));if(f instanceof Qi)return n=!0,_(Qr)(new Yr(f.value0));throw new Error("Failed pattern match at Hyrule.Zora (line 131, column 15 - line 135, column 30): "+[f.constructor.name])}for(;!n;)u=o(e);return u};return Dn(os)(r)(function(e){return t(function(n,u){return new Xi(n,u)},Ki.create,ji.create,Qi.create)})},ra=function(t){return function(r,e,n,u){return e(d(ur)(function(o){return function(p){return u(o)}})(t))}},G={liftST:ra,Monad0:function(){return fy}};var Yi=function(t){return function(r){return function(e,n,u,o){return e(function(p){return o(Ut(t))},d(R)(function(p){return function(f){return o(p)}})(r))}}};function tl(t){return function(r){return t===r}}var rl=tl;var _y=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},sy=function(t){return t};var vv=function(t){return Ci(me)(d(We)(ra))(function(){var r=d(U)(Yc);return function(e){return Yc(r(e))}}())(t)},mv=function(t){return Ci(me)(d(We)(Yi(Zu)))(function(){var r=d(U)(W);return function(e){return W(r(e))}}())(t)},vy=function(t){return function(r){return function(e){return function(n){return function(u){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(o){return P(t.Monad0().Bind1())(e(function(p){return Q(t)(it(ur)(Rr(new C(p))(o)))}))(function(p){return P(t.Monad0().Bind1())(n(function(f){return P(t.Monad0().Bind1())(Q(t)(lr(o)))(qe(r)(jr)(function(b){return u(f(b))}))}))(function(f){return _(r)(At(r.Apply0())(p)(f))})})})}}}}},ar={map:function(t){return function(r){return function(e){return r(function(n){return e(t(n))})}}}};var my=function(t){return function(r){return function(e){return function(n){return function(u){return P(t.Monad0().Bind1())(Q(t)(Cr(n)))(function(o){return e(function(p){return P(t.Monad0().Bind1())(Q(t)(Wr(r(p))(o)))(u)})})}}}}},Mo=function(t){return function(r){return function(e){return function(n){return e(function(u){var o=r(u);if(o instanceof C)return n(o.value0);if(o instanceof L)return _(t)(void 0);throw new Error("Failed pattern match at FRP.Event (line 189, column 13 - line 191, column 27): "+[o.constructor.name])})}}}},el=function(t){return function(r){return Mo(t)(function(e){var n=r(e);if(n)return new C(e);if(!n)return L.value;throw new Error("Failed pattern match at FRP.Event (line 117, column 13 - line 119, column 25): "+[n.constructor.name])})}},wo=function(t){return{compact:Mo(t)(xt(wt)),separate:function(r){return{left:Mo(t)(function(e){if(e instanceof _t)return new C(e.value0);if(e instanceof ft)return L.value;throw new Error("Failed pattern match at FRP.Event (line 100, column 13 - line 102, column 33): "+[e.constructor.name])})(r),right:Mo(t)(function(e){if(e instanceof ft)return new C(e.value0);if(e instanceof _t)return L.value;throw new Error("Failed pattern match at FRP.Event (line 107, column 13 - line 109, column 32): "+[e.constructor.name])})(r)}}}},kn=function(t){return{filter:el(t),filterMap:Mo(t),partition:function(r){return function(e){return{yes:el(t)(r)(e),no:el(t)(function(){var n=en(ye);return function(u){return n(r(u))}}())(e)}}},partitionMap:function(r){return function(e){return{left:Fe(kn(t))(function(){var n=rn(C.create)(h(L.value));return function(u){return n(r(u))}}())(e),right:Fe(kn(t))(function(n){return fc(r(n))})(e)}}},Compactable0:function(){return wo(t)},Functor1:function(){return ar}}},Dy=function(t){return function(r){return function(e){return function(n){return function(u){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(o){return P(t.Monad0().Bind1())(Q(t)(wn))(function(p){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(f){return P(t.Monad0().Bind1())(Q(t)(wn))(function(b){return P(t.Monad0().Bind1())(Q(t)(Cr(!0)))(function(m){return P(t.Monad0().Bind1())(e(function(k){return P(t.Monad0().Bind1())(Q(t)(lr(m)))(function(g){return g?Q(t)(it(ur)(an(k)(p))):P(t.Monad0().Bind1())(Q(t)(Rr(new C(k))(o)))(function(){return P(t.Monad0().Bind1())(Q(t)(lr(f)))(qe(r)(jr)(function(D){return u(D(k))}))})})}))(function(k){return P(t.Monad0().Bind1())(n(function(g){return P(t.Monad0().Bind1())(Q(t)(lr(m)))(function(D){return D?Q(t)(it(ur)(an(g)(b))):P(t.Monad0().Bind1())(Q(t)(Rr(new C(g))(f)))(function(){return P(t.Monad0().Bind1())(Q(t)(lr(o)))(qe(r)(jr)(function(a){return u(g(a))}))})})}))(function(g){return P(t.Monad0().Bind1())(Q(t)(Rr(!1)(m)))(function(){return P(t.Monad0().Bind1())(Q(t)(Ei(p)))(function(D){return P(t.Monad0().Bind1())(Q(t)(Ei(b)))(function(a){return Kt(Qt)(t.Monad0().Bind1())(function(){return D.length===0?it(r.Apply0().Functor0())(Q(t)(Rr(Hc(a))(f))):Gr(r)(mt)(D)(function(T){return P(t.Monad0().Bind1())(Q(t)(Rr(new C(T))(o)))(function(){return Gr(r)(mt)(a)(function(ut){return P(t.Monad0().Bind1())(Q(t)(Rr(new C(ut))(f)))(function(){return u(ut(T))})})})})}())(function(){return P(t.Monad0().Bind1())(Q(t)(Si(0)(Mn(D))([])(p)))(function(){return P(t.Monad0().Bind1())(Q(t)(Si(0)(Mn(a))([])(b)))(function(){return _(r)(At(r.Apply0())(k)(g))})})})})})})})})})})})})})}}}}},Zr=function(t){return function(r){return r}(tf(277).subscribe)(t)},pe=function(t){return function(r){return r}(tf(300).makeEvent)(t)},$a=function(t){return function(r){return Kt(Qt)(t.Monad0().Bind1())(_(t.Monad0().Applicative0())(void 0))(function(){return function(e){return e(t)(r)}(tf(316).create)})}},tf=_y("backdoor","FRP.Event",function(){return{makeEvent:sy,create:function(){var t=function(r){return function(e){return P(r.Monad0().Bind1())(Q(r)(Cr([])))(function(n){return _(r.Monad0().Applicative0())({event:function(u){return P(e.Monad0().Bind1())(Q(e)(Wr(function(o){return z(Ar)(o)([u])})(n)))(function(){return _(e.Monad0().Applicative0())(P(e.Monad0().Bind1())(Q(e)(Wr(Ni(rl)(u))(n)))(function(){return _(e.Monad0().Applicative0())(void 0)}))})},push:function(u){return P(e.Monad0().Bind1())(Q(e)(lr(n)))(qe(e.Monad0().Applicative0())(mt)(function(o){return o(u)}))}})})}};return t}(),subscribe:function(){var t=function(r){return function(e){return r(e)}};return t}(),bus:function(){var t=function(r){return function(e){return pe(function(n){return P(r.Monad0().Bind1())($a(r)(r))(function(u){return Kt(Qt)(r.Monad0().Bind1())(n(e(u.push)(u.event)))(function(){return _(r.Monad0().Applicative0())(_(r.Monad0().Applicative0())(void 0))})})})}};return t}(),memoize:function(){var t=function(r){return function(e){return function(n){return pe(function(u){return P(r.Monad0().Bind1())($a(r)(r))(function(o){return Kt(Qt)(r.Monad0().Bind1())(u(n(o.event)))(function(){return Zr(e)(o.push)})})})}}};return t}(),hot:function(){var t=function(r){return function(e){return P(r.Monad0().Bind1())($a(r)(r))(function(n){return P(r.Monad0().Bind1())(Zr(e)(n.push))(function(u){return _(r.Monad0().Applicative0())({event:n.event,unsubscribe:u})})})}};return t}(),mailboxed:function(){var t=function(r){return function(e){return function(n){return function(u){return pe(function(o){return P(e.Monad0().Bind1())(Q(e)(Cr(Hn)))(function(p){return Kt(Qt)(e.Monad0().Bind1())(o(u(function(f){return pe(function(b){return Kt(Qt)(e.Monad0().Bind1())(it(e.Monad0().Bind1().Apply0().Functor0())(Q(e)(Wr(Nn(r)(function(m){if(m instanceof L)return new C([b]);if(m instanceof C)return new C(z(Ar)(m.value0)([b]));throw new Error("Failed pattern match at FRP.Event (line 484, column 21 - line 486, column 55): "+[m.constructor.name])})(f))(p))))(function(){return _(e.Monad0().Applicative0())(it(e.Monad0().Bind1().Apply0().Functor0())(Q(e)(Wr(Nn(r)(function(m){if(m instanceof L)return L.value;if(m instanceof C)return new C(Ni(rl)(b)(m.value0));throw new Error("Failed pattern match at FRP.Event (line 493, column 21 - line 495, column 69): "+[m.constructor.name])})(f))(p))))})})})))(function(){return P(e.Monad0().Bind1())(Zr(n)(function(f){return P(e.Monad0().Bind1())(Q(e)(lr(p)))(function(b){var m=Ea(r)(f.address)(b);if(m instanceof L)return _(e.Monad0().Applicative0())(void 0);if(m instanceof C)return Gr(e.Monad0().Applicative0())(mt)(m.value0)(function(k){return k(f.payload)});throw new Error("Failed pattern match at FRP.Event (line 502, column 13 - line 504, column 49): "+[m.constructor.name])})}))(function(f){return _(e.Monad0().Applicative0())(Kt(Qt)(e.Monad0().Bind1())(it(e.Monad0().Bind1().Apply0().Functor0())(Q(e)(Rr(Hn)(p))))(function(){return f}))})})})})}}}};return t}(),delay:function(){var t=function(r){return function(e){return pe(function(n){return function(){var o=ku(Ut(fv(Gi)))(),p=Zr(e)(function(f){return function(){var m=ku(L.value)(),k=_v(r)(function(){n(f)();var D=xn(m)();return er(_(Qr)(void 0))(function(a){return gc(cv(Gi)(a))(o)})(D)()})();return ka(new C(k))(m)(),gc(z(Qc(Gi))(ov(k)))(o)()}})();return function(){var b=xn(o)();return Gr(Qr)(iv)(b)(sv)(),p()}}})}};return t}()}}),Dv=tf(417),nl=function(t){return function(r){return function(e){return e(t)}(Dv.bus)(r)}};var bv=function(t){return function(r){return function(e){return e(t)}(Dv.memoize)(r)}},by=function(t){return function(r){return function(e){return function(n){return P(r.Bind1())($a(t)(t))(function(u){var o=e(u.event);return P(r.Bind1())(Zr(o.input)(u.push))(function(p){return P(r.Bind1())(Zr(o.output)(n))(function(f){return _(r.Applicative0())(At(r.Bind1().Apply0())(p)(f))})})})}}}},dy=function(t){return function(r){return function(e){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(n){return P(t.Monad0().Bind1())(r(function(u){return Kt(Qt)(t.Monad0().Bind1())(P(t.Monad0().Bind1())(Q(t)(lr(n)))(gi(t.Monad0().Applicative0())(jr)))(function(){return P(t.Monad0().Bind1())(Zr(u)(e))(function(o){return Q(t)(it(ur)(Rr(new C(o))(n)))})})}))(function(u){return _(t.Monad0().Applicative0())(Kt(Qt)(t.Monad0().Bind1())(P(t.Monad0().Bind1())(Q(t)(lr(n)))(gi(t.Monad0().Applicative0())(jr)))(function(){return u}))})})}}},Ay=function(t){return{apply:function(r){return function(e){return Dy(t)(t.Monad0().Applicative0())(r)(d(ar)(ao)(e))}},Functor0:function(){return ar}}};var Y=function(t){return{pure:function(r){return function(e){return ii(t.Monad0().Bind1().Apply0().Functor0())(_(t.Monad0().Applicative0())(void 0))(e(r))}},Apply0:function(){return Ay(t)}}};var Yt=function(t){return{alt:function(r){return function(e){return function(n){return Zt(t.Apply0())(d(t.Apply0().Functor0())(function(u){return function(o){return At(t.Apply0())(u)(o)}})(r(n)))(e(n))}}},Functor0:function(){return ar}}};var A=function(t){return{empty:function(r){return _(t)(_(t)(void 0))},Alt0:function(){return Yt(t)}}},ky=function(t){return{Applicative0:function(){return Y(t)},Plus1:function(){return A(t.Monad0().Applicative0())}}},Ce=function(t){return{fold:my(t),keepLatest:dy(t),sampleOn:vy(t)(t.Monad0().Applicative0()),fix:by(t)(t.Monad0()),Alternative0:function(){return ky(t)},Filterable1:function(){return kn(t.Monad0().Applicative0())}}};var ul=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var rf=function(t){return function(){return function(){return function(r){return function(e){return function(n){return Gn(Jr(t)(r))(e)(n)}}}}}},il=function(t){return function(){return function(r){return function(e){return we(Jr(t)(r))(e)}}}};var ef={vb:function(t){return function(r){return function(e){return function(n){return _(t.Monad0().Applicative0())(new q({},{}))}}}}},Av=function(t){return t.vb},hy={vbus:function(){var t=function(){return function(e){return function(n){return function(u){return function(o){return pe(function(p){return P(e.Monad0().Bind1())(Av(n)(e)(j.value)(j.value)(j.value))(function(f){return Kt(Qt)(e.Monad0().Bind1())(p(o(f.value0)(f.value1)))(function(){return _(e.Monad0().Applicative0())(_(e.Monad0().Applicative0())(void 0))})})})}}}}},r=function(){return function(e){return function(n){return t()(e)(n)}}};return r}()},cl=function(){return function(t){return function(r){return function(e){return function(n){return n()(t)(r)}(hy.vbus)(e)}}}};var xa=function(t){return function(){return function(){return function(r){return function(){return function(){return{vb:function(e){return function(n){return function(u){return function(o){return P(e.Monad0().Bind1())(Av(r)(e)(j.value)(u)(o))(function(p){return P(e.Monad0().Bind1())($a(e)(e))(function(f){return _(e.Monad0().Applicative0())(new q(rf(t)()()(j.value)(f.push)(p.value0),rf(t)()()(j.value)(f.event)(p.value1)))})})}}}}}}}}}}};var Eu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ll=function(){function t(){}return t.value=new t,t}();var Io=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Lo=function(){function t(){}return t.value=new t,t}(),uf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),af=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),of=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ma=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),S=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var wa={eq:function(t){return function(r){return t instanceof Eu&&r instanceof Eu?t.value0===r.value0:t instanceof ll&&r instanceof ll}}};var M=function(t){return new of(t)};var kv=function(t){return new af(t)};var yv=t=>r=>r[t];var Bn=function(t){return t.reflectType};var Cv=function(t){return Bn(t)};var Ia=Sr;var ff=function(){return function(t){return t}};var pl=function(){return function(){return function(){return function(){return function(){return function(t){var r=Cv(t);return function(e){return yv(r(e))}}}}}}};var hv=[];var _l=function(){return function(){return function(t){return function(r){return Eo(t)(r)}}}};function Tv(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var Fu={};function vl(t){return t()}function Sv(t){return function(r){return function(e){return function(n){var u=e;function o(f){return function(b){return r(b)(f)(n[f])}}for(var p in n)hasOwnProperty.call(n,p)&&(u=t(u)(o(p)));return u}}}}function cf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var wy=Object.keys||cf(function(t){return function(){return t}});function ml(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var Dl=function(t){return function(r){return function(){return delete r[t],r}}};var By=cf(function(t){return function(r){return r}});var Uy=Tv;var Ev=function(t){return function(r){return vl(function(){var n=Uy(r)();return t(n)(),n})}};var La=function(t){return function(r){return Ev(ml(t)(r))}};var Fv=Sv(ao),Wy=function(t){return function(r){return Fv(function(e){return function(n){return function(u){return z(t.Semigroup0())(e)(r(n)(u))}}})(Ut(t))}},$v={foldl:function(t){return Fv(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return fr(mt)(t)(r)(By(e))}}},foldMap:function(t){return function(r){return Wy(t)(h(r))}}};var bl=function(t){return Ev(Dl(t))};var xv=function(){function t(){}return t.value=new t,t}(),Al=function(){function t(){}return t.value=new t,t}(),Zy=function(){function t(){}return t.value=new t,t}();var Mv=function(t){return function(r){return function(e){var n=function(u){var o=function(p){return function(f){return new q(f+1|0,new q(p,f))}};return Yu(Ce(t))(o)(u)(0)};return new af(Qu(Ce(t))(bv(t)(n(e))(function(u){return d(ar)(function(o){return st(Yt(t.Monad0().Applicative0()))(_(Y(t))(new Io(r(o.value0))))(d(ar)(h(Lo.value))(uv(kn(t.Monad0().Applicative0()))(function(){var p=Mt(co)(o.value1+1|0);return function(f){return p(Kr(f))}}())(u)))})(u)})))}}};var Un=function(t){return function(r){return function(e){return function(n){return function(u){var o=function(p){return p(n)(u)};return function(p){if(p instanceof of)return gr(mt)(A(t))(Un(t)(r)(e)(n)(u))(p.value0);if(p instanceof Ma)return Qu(Ce(r))(d(ar)(Un(t)(r)(e)(n)(u))(p.value0));if(p instanceof S)return o(e.toElt(p.value0));if(p instanceof af)return pe(function(f){return P(r.Monad0().Bind1())(Q(r)(Cr(Fu)))(function(b){return P(r.Monad0().Bind1())(Zr(p.value0)(function(m){return P(r.Monad0().Bind1())(e.ids(u))(function(k){return P(r.Monad0().Bind1())(Q(r)(Cr(_(t)(void 0))))(function(g){return P(r.Monad0().Bind1())(e.ids(u))(function(D){return P(r.Monad0().Bind1())(Q(r)(Cr(_(t)(void 0))))(function(a){return P(r.Monad0().Bind1())(Q(r)(Cr([])))(function(T){return P(r.Monad0().Bind1())(Q(r)(Cr(_(t)(void 0))))(function(ut){return P(r.Monad0().Bind1())(d(t.Apply0().Functor0())(Eu.create)(e.ids(u)))(function(Pt){return P(r.Monad0().Bind1())(Q(r)(Cr(xv.value)))(function(Ht){return P(r.Monad0().Bind1())(Zr(m)(function(Nt){return P(r.Monad0().Bind1())(Q(r)(lr(Ht)))(function(Be){return Nt instanceof uf&&Be instanceof Al?P(r.Monad0().Bind1())(Q(r)(lr(T)))(qe(t)(mt)(function(){var se=e.doLogic(Nt.value0)(u);return function(ot){return f(se(ot))}}())):Nt instanceof Lo&&Be instanceof Al?Kt(Qt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Rr(Zy.value)(Ht))))(function(){var se=At(t.Apply0())(At(t.Apply0())(At(t.Apply0())(At(t.Apply0())(P(r.Monad0().Bind1())(Q(r)(lr(T)))(qe(t)(mt)(function(ot){return Gr(t)(jr)(n.parent)(function(ae){return f(e.disconnectElement(u)({id:ot,parent:ae,scope:Pt}))})})))(Uu(r.Monad0().Bind1())(Q(r)(lr(g)))))(Uu(r.Monad0().Bind1())(Q(r)(lr(a)))))(it(t.Apply0().Functor0())(Q(r)(Wr(bl(k))(b)))))(it(t.Apply0().Functor0())(Q(r)(Wr(bl(D))(b))));return At(t.Apply0())(it(t.Apply0().Functor0())(Q(r)(Rr(se)(ut))))(se)}):Nt instanceof Io&&Be instanceof xv?Kt(Qt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Rr(Al.value)(Ht))))(function(){return P(r.Monad0().Bind1())(Zr(Un(t)(r)(e)(function(){var se={};for(var ot in n)({}).hasOwnProperty.call(n,ot)&&(se[ot]=n[ot]);return se.scope=Pt,se.raiseId=function(ae){return it(t.Apply0().Functor0())(Q(r)(Wr(z(Ar)([ae]))(T)))},se}())(u)(Nt.value0))(f))(function(se){return Kt(Qt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Wr(La(D)(se))(b))))(function(){return it(t.Apply0().Functor0())(Q(r)(Rr(se)(a)))})})}):_(t)(void 0)})}))(function(Nt){return Kt(Qt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Rr(Nt)(g))))(function(){return Kt(Qt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Wr(La(k)(Nt))(b))))(function(){return Uu(r.Monad0().Bind1())(Q(r)(lr(ut)))})})})})})})})})})})})}))(function(m){return _(t)(Kt(Qt)(r.Monad0().Bind1())(P(r.Monad0().Bind1())(Q(r)(lr(b)))(cr($v)(At(t.Apply0()))(_(t)(void 0))))(function(){return m}))})})});throw new Error("Failed pattern match at Bolson.Control (line 531, column 17 - line 615, column 20): "+[p.constructor.name])}}}}}},qy=function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(o){return function(p){var f=function(b){return function(m){return pe(function(k){return P(t.Monad0().Bind1())(Q(t)(j_(d(Sr)(h(""))(ff()(o)))))(function(g){var D=da(mt)(A(t.Monad0().Applicative0()))(ru(ha)(function(a){return cc(I_)(function(T){return function(ut){return ut instanceof S?function(Pt){return Pt(function(){var Ht={};for(var Nt in b)({}).hasOwnProperty.call(b,Nt)&&(Ht[Nt]=b[Nt]);return Ht.parent=L.value,Ht.scope=e(b.scope),Ht.raiseId=function(Be){return Q(t)(X_(a)(Be)(g))},Ht}())(m)}(u.toElt(ut.value0)):T(u.wrapElt(ut))}})})(ff()(o)));return P(t.Monad0().Bind1())(Zr(D)(k))(function(a){return P(t.Monad0().Bind1())(Q(t)(Cr(_(t.Monad0().Applicative0())(void 0))))(function(T){return P(t.Monad0().Bind1())(d(t.Monad0().Bind1().Apply0().Functor0())(J)(Q(t)(K_(g))))(function(ut){var Pt=d(Ia)(function(Nt){return function(Be){return new S(u.fromEltO1(function(se){return function(ot){return pe(function(ae){return Kt(Qt)(t.Monad0().Bind1())(se.raiseId(Nt))(function(){return Kt(Qt)(t.Monad0().Bind1())(Gr(t.Monad0().Applicative0())(jr)(se.parent)(function(eo){return ae(u.giveNewParent(ot)({id:Nt,parent:eo,scope:se.scope})(Be))}))(function(){return _(t.Monad0().Applicative0())(_(t.Monad0().Applicative0())(void 0))})})})}}))}})(ut),Ht=Un(t.Monad0().Applicative0())(t)(n)(b)(m)(p(Pt)(J));return P(t.Monad0().Bind1())(Zr(Ht)(k))(function(Nt){return Kt(Qt)(t.Monad0().Bind1())(it(t.Monad0().Bind1().Apply0().Functor0())(Q(t)(Rr(Nt)(T))))(function(){return _(t.Monad0().Applicative0())(Kt(Qt)(t.Monad0().Bind1())(a)(function(){return Kt(Qt)(t.Monad0().Bind1())(Jn(t.Monad0().Applicative0())(!r)(Gr(t.Monad0().Applicative0())(mt)(ff()(ut))(function(Be){return k(u.deleteFromCache(m)({id:Be}))})))(function(){return Uu(t.Monad0().Bind1())(Q(t)(lr(T)))})}))})})})})})})})}};return new S(u.fromEltO2(f))}}}}}}}};var wv=function(){return function(t){return function(r){return function(e){return function(n){return function(u){return qy()(t)(!1)(xt(wt))(r)(e)(n)(u)}}}}}};function Pv(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function Ov(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}var Rv=Ou;var Hv=function(){return function(){return function(t){return function(r){return function(e){return function(n){return Ov(Jr(t)(r))(e)(n)}}}}}};var Nv=wt,Bv=function(t){return function(r){return t(Pv(r))}};var rg=function(t){return t},eg=function(t){return t.mappingWithIndex};var ng=function(t){return t.mapping};var lf={mapRecordWithIndexBuilder:function(t){return function(r){return xt(Nv)}}},Uv=function(t){return t.mapRecordWithIndexBuilder},Pa=function(t){return function(r){return function(e){return function(){return function(){return{mapRecordWithIndexBuilder:function(n){return function(u){return Ru(Rv)(Hv()()(t)(j.value)(eg(r)(u)(j.value)))(Uv(e)(j.value)(u))}}}}}}}};var Wv=function(){return function(t){return{hmap:function(){var r=Uv(t)(j.value);return function(e){return Bv(r(rg(e)))}}()}}};var Zv=function(t){return t.hmap},Oa=function(t){return{mappingWithIndex:function(r){return function(e){return ng(t)(r)}}}};var ug=function(){function t(){}return t.value=new t,t}();var Ra={mapping:function(t){return d(We)(W)}},qv=function(){return new uf(0)}();var gl=function(){return Lo.value}(),ea=function(){return Io.create}();var ag=function(t){return Zv(t)(ug.value)},pf=function(){return function(){return function(t){return function(r){return function(e){return function(n){return new Ma(cl()(G)(r)(e)(Oe(me)(ag(Wv()(t)))(n)))}}}}}};var $u=function(t){return nl(G)(Oe(me)(d(We)(W))(t))};var Ha=function(t){return new Ma($u(t))};var og=function(t){return t.makeText},ig=function(t){return function(r){return function(e){return d(ar)(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},fg=function(t){return function(r){return function(e){return d(ar)(function(n){return function(u){if(u.value instanceof yo)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof go)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 88, column 26 - line 90, column 45): "+[u.value.constructor.name])}(hi(n))})(e)}}},cg=function(t){return t.makeElement},lg=function(t){return t.attributeParent},Je=function(t){var r=function(e){return function(n){return pe(function(u){return P(cn)(n.ids)(function(o){return Kt(Qt)(cn)(e.raiseId(o))(function(){return d(U)(At(uu)(u(n.deleteFromCache({id:o}))))(Zr(da(mt)(A(s))([_(Y(G))(og(n)({id:o,parent:e.parent,scope:e.scope})),ig(n)(o)(t)]))(u))})})})}};return new S(r)},jt=function(t){return Je(_(Y(G))(t))},_f=function(t){return function(r){return function(e){return t(y(A(s)))([Mv(G)(r)(e)])}}};var zv=function(t){return{doLogic:function(r){return function(e){return function(n){return e.sendToPos({id:n,pos:r})}}},ids:function(){var r=Pr(t);return function(e){return function(n){return n.ids}(r(e))}}(),disconnectElement:function(r){return function(e){return r.disconnectElement({id:e.id,scope:e.scope,parent:e.parent,scopeEq:Mt(wa)})}},toElt:function(r){return r}}};var Na=function(t){return function(r){return t(y(A(s)))([kv(r)])}};var pg=Un(s)(G)(zv());var w=function(t){return function(r){return function(e){var n=function(u){return function(o){return pe(function(p){return P(cn)(o.ids)(function(f){return Kt(Qt)(cn)(u.raiseId(f))(function(){return d(U)(function(b){return At(uu)(p(o.deleteFromCache({id:f})))(b)})(Zr(st(Yt(s))(da(mt)(A(s))(z(Ar)([_(Y(G))(cg(o)({id:f,parent:u.parent,scope:u.scope,tag:t})),fg(o)(f)(r)])(er([])(function(b){return[_(Y(G))(lg(o)({id:f,parent:b,pos:u.pos}))]})(u.parent))))(pg({parent:new C(f),scope:u.scope,raiseId:function(b){return _(s)(void 0)},pos:L.value})(o)(e)))(p))})})})}};return n}}};var Vv=function(){return function(t){return function(r){return wv()(G)(zv())({fromEltO1:Sn(),fromEltO2:Sn(),toElt:Sn(),wrapElt:function(){var e=w("div")(y(A(s)));return function(n){return S.create(e(n))}}(),giveNewParent:function(e){return function(n){return function(u){return Pr()(e).giveNewParent(n)}}},deleteFromCache:function(){var e=Pr();return function(n){return function(u){return u.deleteFromCache}(e(n))}}()})(t)(Oe(me)(d(Ia)(function(e){return e(void 0)}))(Sn()(r)))}}};var Nr=function(){function t(){}return t.value=new t,t}();var qr={attr:function(t){return function(r){return i({key:"href",value:E(r)})}}};var br=function(){function t(){}return t.value=new t,t}();var Ba={attr:function(t){return function(r){return i({key:"click",value:Z(h(B(R)(r)(!0)))})}}};var Er={attr:function(t){return function(r){return i({key:"click",value:Z(r)})}}};var be=function(){function t(){}return t.value=new t,t}();var Ua={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Jv={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Gv={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Cl={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var sf={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var jv={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Ro=function(t){return function(r){return new S(w("a")(t)(M(r)))}};var pn=function(t){return function(r){return new S(w("div")(t)(M(r)))}},or=pn(y(A(s)));var Zn=function(t){return function(r){return new S(w("span")(t)(M(r)))}},hl=Zn(y(A(s)));var na=function(){function t(){}return t.value=new t,t}();var Kv={attr:function(t){return function(r){return i({key:"type",value:E(r)})}}};var mf={attr:function(t){return function(r){return i({key:"type",value:E(r)})}}};var he=function(t){return function(r){return new S(w("button")(t)(M(r)))}},Sl=he(y(A(s)));var Qv=function(t){return function(r){return new S(w("code")(t)(M(r)))}},wr=Qv(y(A(s)));var Yv=function(t){return function(r){return new S(w("i")(t)(M(r)))}},El=Yv(y(A(s)));var iu=function(t){return function(r){return new S(w("input")(t)(M(r)))}};var tm=function(t){return function(r){return new S(w("li")(t)(M(r)))}},Fl=tm(y(A(s)));var rm=function(t){return function(r){return new S(w("pre")(t)(M(r)))}},Ir=rm(y(A(s)));var em=function(t){return function(r){return new S(w("ul")(t)(M(r)))}},$l=em(y(A(s)));var bf=function(){function t(){}return t.value=new t,t}(),Wa=function(){function t(){}return t.value=new t,t}(),Za=function(){function t(){}return t.value=new t,t}(),qa=function(){function t(){}return t.value=new t,t}(),za=function(){function t(){}return t.value=new t,t}(),Va=function(){function t(){}return t.value=new t,t}(),Ja=function(){function t(){}return t.value=new t,t}(),Ga=function(){function t(){}return t.value=new t,t}(),ja=function(){function t(){}return t.value=new t,t}(),Xa=function(){function t(){}return t.value=new t,t}(),nm=function(t){return t==="Intro"?_(Xr)(bf.value):t==="HelloWorld"?_(Xr)(Wa.value):t==="SimpleComponent"?_(Xr)(Za.value):t==="PURSX1"?_(Xr)(qa.value):t==="PURSX2"?_(Xr)(za.value):t==="Events"?_(Xr)(Va.value):t==="Effects"?_(Xr)(Ja.value):t==="Events2"?_(Xr)(Ga.value):t==="Portals"?_(Xr)(ja.value):t==="SSR"?_(Xr)(Xa.value):y(E_)};function xl(){window.scrollTo(0,0)}var _e=xl;var Dg=function(t){return t};var Br={pursxToElement:function(t){return function(r){return function(e){return{cache:Fu,element:function(n){return function(u){return y(A(s))}}}}}}},Ml=function(t){return t.pursxToElement},ee=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(o){var p=Ml(t)(n)(j.value)(o);return{cache:La(Bn(r)(j.value))(!0)(p.cache),element:function(f){return function(b){return st(Yt(s))(d(ar)(Oe(me)(hi)(function(m){if(m.value instanceof yo)return b.setProp({id:Bn(r)(j.value)+("@!%"+n),key:m.key,value:m.value.value0});if(m.value instanceof go)return b.setCb({id:Bn(r)(j.value)+("@!%"+n),key:m.key,value:m.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4191, column 38 - line 4201, column 24): "+[m.value.constructor.name])}))(il(e)()(j.value)(o)))(p.element(f)(b))}}}}}}}}}}};var pr=Dg,wl=function(t){return function(r){return function(){return function(){return function(e){return function(n){return function(u){return function(o){var p=function(f){return function(b){return pe(function(m){return P(cn)(b.ids)(function(k){return P(cn)(b.ids)(function(g){return Kt(Qt)(cn)(f.raiseId(k))(function(){var D=Ml(e)(g)(j.value)(o);return d(U)(At(uu)(m(b.deleteFromCache({id:k}))))(Zr(st(Yt(s))(_(Y(G))(b.makePursx({id:k,parent:f.parent,cache:D.cache,pxScope:g,scope:f.scope,html:Bn(t)(u),verb:Bn(r)(n)})))(D.element(f)(b)))(m))})})})})}};return new S(p)}}}}}}}},zr=function(t){return function(){return function(){return function(r){return wl(t)({reflectType:function(){return"~"}})()()(r)(j.value)}}}},um=function(t){return function(){return function(r){return function(e){return zr(t)()()(r)(e)({})}}}},bg=Un(s)(G)({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Pr();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:Mt(wa)})}},toElt:function(t){return t}}),_r=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(o){var p=il(e)()(j.value)(o),f=Ml(t)(n)(j.value)(o);return{cache:La(Bn(r)(j.value))(!1)(f.cache),element:function(b){return function(m){return st(Yt(s))(bg({parent:new C(Bn(r)(j.value)+("@!%"+n)),scope:b.scope,raiseId:function(k){return _(s)(void 0)},pos:b.pos})(m)(p))(f.element(b)(m))}}}}}}}}}}};var Il=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody1
  ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  )`,Ll=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Pl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher_, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (AnEvent, bus, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 :: Domable _ _
            p0 = index (Proxy :: _ 0) v

            p1 :: Domable _ _
            p1 = index (Proxy :: _ 1) v

            ev :: Boolean -> AnEvent _ Boolean
            ev = fold (const not) event

            flips :: Boolean -> Domable _ _
            flips = switcher_ D.span (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], flips false ]
            ]
  )
`,Ol=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,Rl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (dyn_, text_)
import Deku.Core (Nut, bussed, insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (AnEvent, bus, keepLatest, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody
  ( bussed \\pushAction actionEvent -> do
      let
        accumulateTextAndEmitOnSubmit :: AnEvent _ String
        accumulateTextAndEmitOnSubmit = compact
          ( mapAccum
              ( \\a b -> case a of
                  AddTodo -> b /\\ Just b
                  ChangeText s -> s /\\ Nothing
              )
              actionEvent
              ""
          )

        top :: Nut
        top =
          D.div_
            [ D.input
                ( oneOf
                    [ textInput $ pure (pushAction <<< ChangeText)
                    , keyUp $ pure \\evt -> do
                        when (code evt == "Enter") $ do
                          pushAction AddTodo
                    ]
                )
                []
            , D.button
                (click $ pure $ pushAction AddTodo)
                [ text_ "Add" ]
            ]
      D.div_
        [ top
        , dyn_ D.div $
            map
              ( \\txt -> keepLatest $ bus \\p' e' ->
                  ( pure $ insert_ $ D.div_
                      [ text_ txt
                      , D.button
                          (click $ pure (p' sendToTop))
                          [ text_ "Prioritize" ]
                      , D.button
                          (click $ pure (p' remove))
                          [ text_ "Delete" ]
                      ]
                  ) <|> e'
              )
              accumulateTextAndEmitOnSubmit
        ]
  )
`,Hl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.Core (vbussed)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (AnEvent, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody
  ( vbussed (Proxy :: _ UIEvents) \\push event -> do
      let
        countUp :: AnEvent _ Int
        countUp = fold
          (const (1 + _))
          (pure unit <|> event.buttonClicked)
          (-1)
      D.div_
        [ D.button
            (click_ (pure push.buttonClicked))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show <$> countUp
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,Nl=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.Core (bus)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (AnEvent, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure Initial <|> _)
      \\event -> do
        let
          split :: { left :: AnEvent _ Unit, right :: AnEvent _ String }
          split = separate $ compact $
            map
              ( case _ of
                  Loading -> Just $ Left unit
                  Result s -> Just $ Right s
                  _ -> Nothing
              )
              event
          { left: loading, right: result } = split
        D.div_
          [ D.div_
              [ D.button (pure (D.OnClick := clickCb push))
                  [ text
                      ( pure clickText
                          <|> (loading $> "Loading...")
                          <|> (result $> clickText)
                      )
                  ]
              ]
          , D.div
              ( (pure (D.Style := "display: none;")) <|>
                  ( compact
                      ( mapAccum
                          ( \\_ b -> (b && false) /\\
                              if b then Just unit else Nothing
                          )
                          result
                          true
                      ) $> (D.Style := "display: block;")
                  )
              )
              [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
          ]
  )
`,Bl=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBodyA)
import Effect (Effect)

main :: Effect Unit
main = runInBodyA
  ( [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,Ul=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (pure push.buttonClicked))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (pure unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Wl=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,Zl=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function am(t){return t.target}function Vr(t){return function(){return t.preventDefault()}}function om(t,r,e){return t==null?r:e(t)}function ql(t){return t}var Ka=er(null)(ql),ne=function(t){return om(t,L.value,C.create)};var kf=function(t){return ne(am(t))};var yg=function(){return j.value}(),fm=function(t){return zr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(yg)({code:pr(Ir([wr([jt(Bl)])])),result:pr(or([Sl([jt("I do nothing")]),$l(d(Sr)(function(){var r=_(fo);return function(e){return Fl(r(jt(e)))}}())(["A","B","C"])),or([Ro(_(Y(G))(ct(qr)(Nr.value)("https://example.com")))([jt("foo ")]),El([jt(" bar ")]),Zn(_(Y(G))(ct(Ua)(be.value)("font-weight: 800;")))([jt(" baz")])]),or([or([or([iu(_(Y(G))(ct(mf)(na.value)("range")))([])])])])])),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(qa.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"pursx1/")])})};function cm(t,r,e,n,u){return function(o,p){var f=t.newXHR(),b=t.fixupUrl(u.url,f);if(f.open(u.method||"GET",b,!0,u.username,u.password),u.headers)try{for(var m=0,k;(k=u.headers[m])!=null;m++)f.setRequestHeader(k.field,k.value)}catch(D){o(D)}var g=function(D){return function(){o(new Error(D))}};return f.onerror=g(e),f.ontimeout=g(r),f.onload=function(){p({status:f.status,statusText:f.statusText,headers:f.getAllResponseHeaders().split(`\r
`).filter(function(D){return D.length>0}).map(function(D){var a=D.indexOf(":");return n(D.substring(0,a))(D.substring(a+2))}),body:f.response})},f.responseType=u.responseType,f.withCredentials=u.withCredentials,f.timeout=u.timeout,f.send(u.content),function(D,a,T){try{f.abort()}catch(ut){return a(ut)}return T()}}}var yf="application/json",lm="application/x-www-form-urlencoded";var _m=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Vl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bm=function(t){return t instanceof zl?new C(lm):t instanceof Vl?new C(yf):L.value};var gf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Cf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),dm=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Am=function(t){if(t instanceof gf)return Pr()(t.value0);if(t instanceof Cf)return Pr()(t.value0);if(t instanceof dm)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var Jl=function(t){if(t instanceof gf)return"Accept";if(t instanceof Cf)return"Content-Type";if(t instanceof dm)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var Gl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Xl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ho=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Kl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),km=function(t){if(t instanceof Gl)return"arraybuffer";if(t instanceof jl)return"blob";if(t instanceof Xl)return"document";if(t instanceof Ho||t instanceof Kl)return"text";if(t instanceof hf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},ym=function(t){return t instanceof Ho?new C(yf):L.value};var gm=function(){return new Ho(xt(wt))}(),Cm=function(){return new hf(xt(wt))}();var Tm=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function Qa(t){return new Error(t)}function No(t){return t.message}function Bo(t){return function(){throw t}}var hn=function(t){return t.throwError};var pu=function(t){return t.catchError};var Sf=function(t){return function(r){return pu(t)(d(t.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(ft.create)(r))(function(){var e=_(t.MonadThrow0().Monad0().Applicative0());return function(n){return e(_t.create(n))}}())}};var zn=function(t){return t.state};var Ya=function(t){return function(r){return zn(t)(function(e){var n=r(e);return new q(n,n)})}};var _n=function(t){return t.liftEffect};var Ql=function(t){return t};var Yl=function(t){return t};var Mf=function(t){return function(r){return t(r)}},Em=function(t){return{map:function(r){return Mf(d(t)(d(_a)(r)))}}};var tp=function(t){return{Applicative0:function(){return oa(t)},Bind1:function(){return rp(t)}}},rp=function(t){return{bind:function(r){return function(e){return P(t.Bind1())(r)(rn(function(){var n=_(t.Applicative0());return function(u){return n(_t.create(u))}}())(function(n){var u=e(n);return u}))}},Apply0:function(){return Fm(t)}}},Fm=function(t){return{apply:nn(tp(t)),Functor0:function(){return Em(t.Bind1().Apply0().Functor0())}}},oa=function(t){return{pure:function(){var r=_(t.Applicative0());return function(e){return Ql(r(ft.create(e)))}}(),Apply0:function(){return Fm(t)}}};var $m=function(t){return{throwError:function(){var r=_(t.Applicative0());return function(e){return Ql(r(_t.create(e)))}}(),Monad0:function(){return tp(t)}}};var ep=function(t){return function(r){return{alt:function(e){return function(n){return P(r.Bind1())(e)(function(u){if(u instanceof ft)return _(r.Applicative0())(new ft(u.value0));if(u instanceof _t)return P(r.Bind1())(n)(function(o){if(o instanceof ft)return _(r.Applicative0())(new ft(o.value0));if(o instanceof _t)return _(r.Applicative0())(new _t(z(t)(u.value0)(o.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[o.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[u.constructor.name])})}},Functor0:function(){return Em(r.Bind1().Apply0().Functor0())}}}};var xm=function(){var t=Pr();return function(r){return t(Yl(r))}}();function np(t){return JSON.stringify(t)}function up(t){return function(r){return JSON.stringify(r,null,t)}}var Mm=Fu;function Im(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var Lm=function(t){return Im(_t.create,ft.create,t)};var If=function(t){return function(r){return function(e){return e.replace(t,r)}}};var ap=function(t){return function(r){return r.join(t)}};function Hg(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}var Rm=function(r,e,n){try{return e(Hg(encodeURIComponent(n)).replace(/%20/g,"+"))}catch(u){return r(u)}};var Lf=function(){return ul(Rm)(h(L.value))(C.create)}();var Ug=function(t){return t};var Hm=function(){var t=function(n){if(n.value1 instanceof L)return Lf(n.value0);if(n.value1 instanceof C)return Zt(Bu)(d(dr)(function(u){return function(o){return u+("="+o)}})(Lf(n.value0)))(Lf(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=d(dr)(ap("&")),e=Ee(tu)(Xr)(t);return function(n){return r(e(Ug(n)))}}();var Zg=function(){function t(){}return t.value=new t,t}(),Jo=function(){function t(){}return t.value=new t,t}(),qg=function(){function t(){}return t.value=new t,t}(),Nm=function(){function t(){}return t.value=new t,t}(),Bm=function(){function t(){}return t.value=new t,t}(),Um=function(){function t(){}return t.value=new t,t}(),zg=function(){function t(){}return t.value=new t,t}(),Vg=function(){function t(){}return t.value=new t,t}(),Jg=function(){function t(){}return t.value=new t,t}(),Gg=function(){function t(){}return t.value=new t,t}(),jg=function(){function t(){}return t.value=new t,t}(),Xg=function(){function t(){}return t.value=new t,t}(),Kg=function(){function t(){}return t.value=new t,t}(),Qg=function(){function t(){}return t.value=new t,t}(),Yg=function(){function t(){}return t.value=new t,t}(),Wm=function(){function t(){}return t.value=new t,t}();var tC=function(t){return t},rC={show:function(t){if(t instanceof Zg)return"OPTIONS";if(t instanceof Jo)return"GET";if(t instanceof qg)return"HEAD";if(t instanceof Nm)return"POST";if(t instanceof Bm)return"PUT";if(t instanceof Um)return"DELETE";if(t instanceof zg)return"TRACE";if(t instanceof Vg)return"CONNECT";if(t instanceof Jg)return"PROPFIND";if(t instanceof Gg)return"PROPPATCH";if(t instanceof jg)return"MKCOL";if(t instanceof Xg)return"COPY";if(t instanceof Kg)return"MOVE";if(t instanceof Qg)return"LOCK";if(t instanceof Yg)return"UNLOCK";if(t instanceof Wm)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Zm=rn(at(rC))(tC);var Vm=function(){var t=Ui(zc);return function(r){return Wi(t(r))}}();var Jm=function(t){return t.value0};var Ne=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",o="Async",p="Bind",f="Bracket",b="Fork",m="Sequential",k="Map",g="Apply",D="Alt",a="Cons",T="Resume",ut="Release",Pt="Finalizer",Ht="Finalized",Nt="Forked",Be="Fiber",se="Thunk";function ot(nt,rr,$r,ir){this.tag=nt,this._1=rr,this._2=$r,this._3=ir}function ae(nt){var rr=function($r,ir,Dt){return new ot(nt,$r,ir,Dt)};return rr.tag=nt,rr}function eo(nt){return new ot(r,void 0)}function Rb(nt){try{nt()}catch(rr){setTimeout(function(){throw rr},0)}}function Hb(nt,rr,$r){try{return rr($r())}catch(ir){return nt(ir)}}function Nb(nt,rr,$r){try{return rr($r)()}catch(ir){return $r(nt(ir))(),eo}}var ni=function(){var nt=1024,rr=0,$r=0,ir=new Array(nt),Dt=!1;function K(){var nr;for(Dt=!0;rr!==0;)rr--,nr=ir[$r],ir[$r]=void 0,$r=($r+1)%nt,nr();Dt=!1}return{isDraining:function(){return Dt},enqueue:function(nr){var Bt,Fr;rr===nt&&(Fr=Dt,K(),Dt=Fr),ir[($r+rr)%nt]=nr,rr++,Dt||K()}}}();function Bb(nt){var rr={},$r=0,ir=0;return{register:function(Dt){var K=$r++;Dt.onComplete({rethrow:!0,handler:function(nr){return function(){ir--,delete rr[K]}}})(),rr[K]=Dt,ir++},isEmpty:function(){return ir===0},killAll:function(Dt,K){return function(){if(ir===0)return K();var nr=0,Bt={};function Fr(sr){Bt[sr]=rr[sr].kill(Dt,function(Lr){return function(){delete Bt[sr],nr--,nt.isLeft(Lr)&&nt.fromLeft(Lr)&&setTimeout(function(){throw nt.fromLeft(Lr)},0),nr===0&&K()}})()}for(var oe in rr)rr.hasOwnProperty(oe)&&(nr++,Fr(oe));return rr={},$r=0,ir=0,function(sr){return new ot(u,function(){for(var Lr in Bt)Bt.hasOwnProperty(Lr)&&Bt[Lr]()})}}}}}var fa=0,xe=1,ui=2,ai=3,oi=4,Ue=5,no=6;function tc(nt,rr,$r){var ir=0,Dt=fa,K=$r,nr=null,Bt=null,Fr=null,oe=null,sr=null,Lr=0,Pu=0,je=null,su=!0;function vu(bt){for(var dt,Vt,tr;;)switch(dt=null,Vt=null,tr=null,Dt){case ui:Dt=xe;try{K=Fr(K),oe===null?Fr=null:(Fr=oe._1,oe=oe._2)}catch(ve){Dt=Ue,nr=nt.left(ve),K=null}break;case ai:nt.isLeft(K)?(Dt=Ue,nr=K,K=null):Fr===null?Dt=Ue:(Dt=ui,K=nt.fromRight(K));break;case xe:switch(K.tag){case p:Fr&&(oe=new ot(a,Fr,oe)),Fr=K._2,Dt=xe,K=K._1;break;case r:Fr===null?(Dt=Ue,K=nt.right(K._1)):(Dt=ui,K=K._1);break;case u:Dt=ai,K=Hb(nt.left,nt.right,K._1);break;case o:Dt=oi,K=Nb(nt.left,K._1,function(ve){return function(){ir===bt&&(ir++,ni.enqueue(function(){ir===bt+1&&(Dt=ai,K=ve,vu(ir))}))}});return;case e:Dt=Ue,nr=nt.left(K._1),K=null;break;case n:Fr===null?sr=new ot(a,K,sr,Bt):sr=new ot(a,K,new ot(a,new ot(T,Fr,oe),sr,Bt),Bt),Fr=null,oe=null,Dt=xe,K=K._1;break;case f:Lr++,Fr===null?sr=new ot(a,K,sr,Bt):sr=new ot(a,K,new ot(a,new ot(T,Fr,oe),sr,Bt),Bt),Fr=null,oe=null,Dt=xe,K=K._1;break;case b:Dt=ai,dt=tc(nt,rr,K._2),rr&&rr.register(dt),K._1&&dt.run(),K=nt.right(dt);break;case m:Dt=xe,K=Wb(nt,rr,K._1);break}break;case Ue:if(Fr=null,oe=null,sr===null)Dt=no,K=Bt||nr||K;else switch(dt=sr._3,tr=sr._1,sr=sr._2,tr.tag){case n:Bt&&Bt!==dt&&Lr===0?Dt=Ue:nr&&(Dt=xe,K=tr._2(nt.fromLeft(nr)),nr=null);break;case T:Bt&&Bt!==dt&&Lr===0||nr?Dt=Ue:(Fr=tr._1,oe=tr._2,Dt=ui,K=nt.fromRight(K));break;case f:Lr--,nr===null&&(Vt=nt.fromRight(K),sr=new ot(a,new ot(ut,tr._2,Vt),sr,dt),(Bt===dt||Lr>0)&&(Dt=xe,K=tr._3(Vt)));break;case ut:sr=new ot(a,new ot(Ht,K,nr),sr,Bt),Dt=xe,Bt&&Bt!==dt&&Lr===0?K=tr._1.killed(nt.fromLeft(Bt))(tr._2):nr?K=tr._1.failed(nt.fromLeft(nr))(tr._2):K=tr._1.completed(nt.fromRight(K))(tr._2),nr=null,Lr++;break;case Pt:Lr++,sr=new ot(a,new ot(Ht,K,nr),sr,Bt),Dt=xe,K=tr._1;break;case Ht:Lr--,Dt=Ue,K=tr._1,nr=tr._2;break}break;case no:for(var Mr in je)je.hasOwnProperty(Mr)&&(su=su&&je[Mr].rethrow,Rb(je[Mr].handler(K)));je=null,Bt&&nr?setTimeout(function(){throw nt.fromLeft(nr)},0):nt.isLeft(K)&&su&&setTimeout(function(){if(su)throw nt.fromLeft(K)},0);return;case fa:Dt=xe;break;case oi:return}}function xr(bt){return function(){if(Dt===no)return su=su&&bt.rethrow,bt.handler(K)(),function(){};var dt=Pu++;return je=je||{},je[dt]=bt,function(){je!==null&&delete je[dt]}}}function Ct(bt,dt){return function(){if(Dt===no)return dt(nt.right(void 0))(),function(){};var Vt=xr({rethrow:!1,handler:function(){return dt(nt.right(void 0))}})();switch(Dt){case fa:Bt=nt.left(bt),Dt=no,K=Bt,vu(ir);break;case oi:Bt===null&&(Bt=nt.left(bt)),Lr===0&&(Dt===oi&&(sr=new ot(a,new ot(Pt,K(bt)),sr,Bt)),Dt=Ue,K=null,nr=null,vu(++ir));break;default:Bt===null&&(Bt=nt.left(bt)),Lr===0&&(Dt=Ue,K=null,nr=null)}return Vt}}function Wt(bt){return function(){var dt=xr({rethrow:!1,handler:bt})();return Dt===fa&&vu(ir),dt}}return{kill:Ct,join:Wt,onComplete:xr,isSuspended:function(){return Dt===fa},run:function(){Dt===fa&&(ni.isDraining()?vu(ir):ni.enqueue(function(){vu(ir)}))}}}function Ub(nt,rr,$r,ir){var Dt=0,K={},nr=0,Bt={},Fr=new Error("[ParAff] Early exit"),oe=null,sr=t;function Lr(xr,Ct,Wt){var bt=Ct,dt=null,Vt=null,tr=0,Mr={},ve,uo;t:for(;;)switch(ve=null,bt.tag){case Nt:if(bt._3===t&&(ve=K[bt._1],Mr[tr++]=ve.kill(xr,function(Zb){return function(){tr--,tr===0&&Wt(Zb)()}})),dt===null)break t;bt=dt._2,Vt===null?dt=null:(dt=Vt._1,Vt=Vt._2);break;case k:bt=bt._2;break;case g:case D:dt&&(Vt=new ot(a,dt,Vt)),dt=bt,bt=bt._1;break}if(tr===0)Wt(nt.right(void 0))();else for(uo=0,ve=tr;uo<ve;uo++)Mr[uo]=Mr[uo]();return Mr}function Pu(xr,Ct,Wt){var bt,dt,Vt,tr,Mr,ve;nt.isLeft(xr)?(bt=xr,dt=null):(dt=xr,bt=null);t:for(;;){if(Vt=null,tr=null,Mr=null,ve=null,oe!==null)return;if(Ct===null){ir(bt||dt)();return}if(Ct._3!==t)return;switch(Ct.tag){case k:bt===null?(Ct._3=nt.right(Ct._1(nt.fromRight(dt))),dt=Ct._3):Ct._3=bt;break;case g:if(Vt=Ct._1._3,tr=Ct._2._3,bt){if(Ct._3=bt,Mr=!0,ve=nr++,Bt[ve]=Lr(Fr,bt===Vt?Ct._2:Ct._1,function(){return function(){delete Bt[ve],Mr?Mr=!1:Wt===null?Pu(bt,null,null):Pu(bt,Wt._1,Wt._2)}}),Mr){Mr=!1;return}}else{if(Vt===t||tr===t)return;dt=nt.right(nt.fromRight(Vt)(nt.fromRight(tr))),Ct._3=dt}break;case D:if(Vt=Ct._1._3,tr=Ct._2._3,Vt===t&&nt.isLeft(tr)||tr===t&&nt.isLeft(Vt))return;if(Vt!==t&&nt.isLeft(Vt)&&tr!==t&&nt.isLeft(tr))bt=dt===Vt?tr:Vt,dt=null,Ct._3=bt;else if(Ct._3=dt,Mr=!0,ve=nr++,Bt[ve]=Lr(Fr,dt===Vt?Ct._2:Ct._1,function(){return function(){delete Bt[ve],Mr?Mr=!1:Wt===null?Pu(dt,null,null):Pu(dt,Wt._1,Wt._2)}}),Mr){Mr=!1;return}break}Wt===null?Ct=null:(Ct=Wt._1,Wt=Wt._2)}}function je(xr){return function(Ct){return function(){delete K[xr._1],xr._3=Ct,Pu(Ct,xr._2._1,xr._2._2)}}}function su(){var xr=xe,Ct=$r,Wt=null,bt=null,dt,Vt;t:for(;;)switch(dt=null,Vt=null,xr){case xe:switch(Ct.tag){case k:Wt&&(bt=new ot(a,Wt,bt)),Wt=new ot(k,Ct._1,t,t),Ct=Ct._2;break;case g:Wt&&(bt=new ot(a,Wt,bt)),Wt=new ot(g,t,Ct._2,t),Ct=Ct._1;break;case D:Wt&&(bt=new ot(a,Wt,bt)),Wt=new ot(D,t,Ct._2,t),Ct=Ct._1;break;default:Vt=Dt++,xr=Ue,dt=Ct,Ct=new ot(Nt,Vt,new ot(a,Wt,bt),t),dt=tc(nt,rr,dt),dt.onComplete({rethrow:!1,handler:je(Ct)})(),K[Vt]=dt,rr&&rr.register(dt)}break;case Ue:if(Wt===null)break t;Wt._1===t?(Wt._1=Ct,xr=xe,Ct=Wt._2,Wt._2=t):(Wt._2=Ct,Ct=Wt,bt===null?Wt=null:(Wt=bt._1,bt=bt._2))}for(sr=Ct,Vt=0;Vt<Dt;Vt++)K[Vt].run()}function vu(xr,Ct){oe=nt.left(xr);var Wt;for(var bt in Bt)if(Bt.hasOwnProperty(bt)){Wt=Bt[bt];for(bt in Wt)Wt.hasOwnProperty(bt)&&Wt[bt]()}Bt=null;var dt=Lr(xr,sr,Ct);return function(Vt){return new ot(o,function(tr){return function(){for(var Mr in dt)dt.hasOwnProperty(Mr)&&dt[Mr]();return eo}})}}return su(),function(xr){return new ot(o,function(Ct){return function(){return vu(xr,Ct)}})}}function Wb(nt,rr,$r){return new ot(o,function(ir){return function(){return Ub(nt,rr,$r,ir)}})}return ot.EMPTY=t,ot.Pure=ae(r),ot.Throw=ae(e),ot.Catch=ae(n),ot.Sync=ae(u),ot.Async=ae(o),ot.Bind=ae(p),ot.Bracket=ae(f),ot.Fork=ae(b),ot.Seq=ae(m),ot.ParMap=ae(k),ot.ParApply=ae(g),ot.ParAlt=ae(D),ot.Fiber=tc,ot.Supervisor=Bb,ot.Scheduler=ni,ot.nonCanceler=eo,ot}(),jm=Ne.Pure,Xm=Ne.Throw;function Km(t){return function(r){return Ne.Catch(t,r)}}function Qm(t){return function(r){return r.tag===Ne.Pure.tag?Ne.Pure(t(r._1)):Ne.Bind(r,function(e){return Ne.Pure(t(e))})}}function Ym(t){return function(r){return Ne.Bind(t,r)}}var tD=Ne.Sync;var Go=Ne.Async;function rD(t,r){return function(){return Ne.Fiber(t,null,r)}}var eC=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return Ne.Async(function(u){return function(){var o=t(n,u(e()));return function(){return Ne.Sync(function(){return e(r(n,o))})}}})}}(),nC=Ne.Seq;var dC=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var cp={map:Qm};var AC=function(){var t=function(n){if(n instanceof ft)return n.value0;if(n instanceof _t)return An("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof _t)return n.value0;if(n instanceof ft)return An("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof _t)return!0;if(n instanceof ft)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:_t.create,right:ft.create}}(),kC=function(t){return rD(AC,t)},yC=function(t){return function(){var e=kC(t)();return e.run(),e}},lp=function(){var t=it(R);return function(r){return t(yC(r))}}();var pp={Applicative0:function(){return Pf},Bind1:function(){return _p}},_p={bind:Ym,Apply0:function(){return oD(0)}},Pf={pure:jm,Apply0:function(){return oD(0)}},oD=dC("applyAff","Effect.Aff",function(){return{apply:nn(pp),Functor0:function(){return cp}}});var Of={liftEffect:tD,Monad0:function(){return pp}};var gC={throwError:Xm,Monad0:function(){return pp}},iD={catchError:Km,MonadThrow0:function(){return gC}};var fD=h(_(Pf)(void 0));var sD=function(t){return Go(function(r){return function(){var n=t(function(u){return r(_t.create(u))()},function(u){return r(ft.create(u))()});return function(u){return Go(function(o){return function(){return n(u,function(f){return o(_t.create(f))()},function(f){return o(ft.create(f))()}),fD}})}}})};function Hf(t){return Object.prototype.toString.call(t).slice(8,-1)}var vD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var mD=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},$e=function(t){return t};var Nf=isFinite;var mp=Math.floor;var jo=function(t){return function(r){return t%r}};var Bf=function(){return mD(C.create)(L.value)}(),JC=function(t){if(!Nf(t))return 0;if(t>=$e(Ye(Nu)))return Ye(Nu);if(t<=$e(sn(Nu)))return sn(Nu);if(de)return ke(0)(Bf(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var bp=function(t){return JC(mp(t))};var dp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),th=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),rh=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),wu=J,eh=J;var Wf=function(t){if(t instanceof dp)return t.value0;if(t instanceof th)return"Error at array index "+(at(tn)(t.value0)+(": "+Wf(t.value1)));if(t instanceof rh)return"Error at property "+(at(Se)(t.value0)+(": "+Wf(t.value1)));if(t instanceof hD)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var Ap=function(t){var r=hn($m(t));return function(e){return r(Vm(e))}};var Iu=function(t){return function(r){return function(e){if(Hf(e)===r)return _(oa(t))(eh(e));if(de)return Ap(t)(new hD(r,Hf(e)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[r.constructor.name,e.constructor.name])}}};var kp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yp=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),gp=function(){function t(){}return t.value=new t,t}(),Cp=function(){function t(){}return t.value=new t,t}(),hp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),TD=function(t){return function(r){var e=function(k){return k===""?_(oa(yr))(Mm):rn(function(){var g=Ap(yr);return function(D){return g(dp.create(D))}}())(_(oa(yr)))(Lm(k))},n=function(){if(r.responseFormat instanceof Gl)return Iu(yr)("ArrayBuffer");if(r.responseFormat instanceof jl)return Iu(yr)("Blob");if(r.responseFormat instanceof Xl)return function(k){return st(ep(qc)(yr))(Iu(yr)("Document")(k))(st(ep(qc)(yr))(Iu(yr)("XMLDocument")(k))(Iu(yr)("HTMLDocument")(k)))};if(r.responseFormat instanceof Ho)return _i(rp(yr))(function(k){return r.responseFormat.value0(e(k))})(Iu(yr)("String"));if(r.responseFormat instanceof Kl)return Iu(yr)("String");if(r.responseFormat instanceof hf)return h(r.responseFormat.value0(_(oa(yr))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(k){if(k instanceof _m)return new ft(k.value0(wu));if(k instanceof sm)return new ft(wu(k.value0));if(k instanceof vm)return new ft(wu(k.value0));if(k instanceof mm)return new ft(wu(k.value0));if(k instanceof Dm)return new ft(wu(k.value0));if(k instanceof zl)return ic("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(d(dr)(wu)(Hm(k.value0)));if(k instanceof Vl)return new ft(wu(np(k.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[k.constructor.name])},o=function(k){return function(g){return k instanceof C&&!bu(mt)(ye)(rc(Mt(mu))(Jl)(k.value0))(g)?Ri(g)(k.value0):g}},p=function(k){return o(d(dr)(Cf.create)(mn(Le)(bm)(k)))(o(d(dr)(gf.create)(ym(r.responseFormat)))(r.headers))},f=function(k){return{method:Zm(r.method),url:r.url,headers:d(Sr)(function(g){return{field:Jl(g),value:Am(g)}})(p(r.content)),content:k,responseType:km(r.responseFormat),username:Ka(r.username),password:Ka(r.password),withCredentials:r.withCredentials,timeout:ke(0)(d(dr)(function(g){return g})(r.timeout))}},b=function(k){return Xe(cp)(Sf(iD)(sD(cm(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",Tm.create,f(k)))))(function(g){if(g instanceof ft){var D=xm(n(g.value0.body));if(D instanceof _t)return new _t(new yp(Jm(D.value0),g.value0));if(D instanceof ft)return new ft({body:D.value0,headers:g.value0.headers,status:g.value0.status,statusText:g.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[D.constructor.name])}if(g instanceof _t)return new _t(function(){var a=No(g.value0),T=a==="AffjaxTimeoutErrorMessageIdent";if(T)return gp.value;var ut=a==="AffjaxRequestFailedMessageIdent";return ut?Cp.value:new hp(g.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[g.constructor.name])})};if(r.content instanceof L)return b(Ka(L.value));if(r.content instanceof C){var m=u(r.content.value0);if(m instanceof ft)return b(Ka(new C(m.value0)));if(m instanceof _t)return _(Pf)(new _t(new kp(m.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[m.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},Tp=function(t){if(t instanceof kp)return"There was a problem with the request content: "+t.value0;if(t instanceof yp)return"There was a problem with the response body: "+Wf(t.value0);if(t instanceof gp)return"There was a problem making the request: timeout";if(t instanceof Cp)return"There was a problem making the request: request failed";if(t instanceof hp)return"There was a problem making the request: "+No(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Lu=function(){return{method:new _t(Jo.value),url:"/",headers:[],content:L.value,username:L.value,password:L.value,withCredentials:!1,responseFormat:Cm,timeout:L.value}}();var Sp={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var ED=TD(Sp);var $D=function(){function t(){}return t.value=new t,t}(),Ep=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),oh=function(){return j.value}(),FD="Click to get some random user data.",ih=function(t){return Dr(h(function(){return t($D.value)(),lp(P(_p)(ED({method:new _t(Jo.value),url:"https://randomuser.me/api/",headers:Lu.headers,content:Lu.content,username:Lu.username,password:Lu.password,withCredentials:Lu.withCredentials,responseFormat:gm,timeout:Lu.timeout}))(function(e){if(e instanceof _t)return _n(Of)(t(new Ep("GET /api response failed to decode: "+Tp(e.value0))));if(e instanceof ft)return _n(Of)(t(new Ep(up(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},xD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(oh)({code:pr(Ir([wr([jt(Nl)])])),result:pr(Ha(function(r){return function(e){var n=Fe(kn(s))(function(p){return p instanceof $D?new C(new _t(void 0)):p instanceof Ep?new C(new ft(p.value0)):L.value})(e),u=Fe(kn(s))(function(p){return p instanceof ft?new C(p.value0):L.value})(n),o=Fe(kn(s))(function(p){return p instanceof _t?new C(void 0):L.value})(n);return or([or([he(_(Y(G))(ct(Er)(br.value)(ih(r))))([Je(st(Yt(s))(_(Y(G))(FD))(st(Yt(s))(B(ar)(o)("Loading..."))(B(ar)(u)(FD))))])]),pn(st(Yt(s))(_(Y(G))(ct(Cl)(be.value)("display: none;")))(B(ar)(Ku(wo(s))(Yu(Ce(G))(function(p){return function(f){return new q(f&&!1,function(){return f?new C(void 0):L.value}())}})(u)(!0)))(ct(Cl)(be.value)("display: block;"))))([Ir([wr([Je(st(Yt(s))(_(Y(G))(""))(u))])])])])}})),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(za.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"pursx2/")])})};var Fp=function(){function t(){}return t.value=new t,t}(),MD={attr:function(t){return function(r){return i({key:"controls",value:E(r)})}}};var Ko=function(){function t(){}return t.value=new t,t}();var Zf={attr:function(t){return function(r){return i({key:"input",value:Z(r)})}}};var qf=function(){function t(){}return t.value=new t,t}();var $p={attr:function(t){return function(r){return i({key:"keyup",value:Z(r)})}}};var xp=function(){function t(){}return t.value=new t,t}();var LD={attr:function(t){return function(r){return i({key:"src",value:E(r)})}}};var Mp=function(){function t(){}return t.value=new t,t}(),PD={attr:function(t){return function(r){return i({key:"width",value:E(r)})}}};var OD=function(t){return function(r){return new S(w("p")(t)(M(r)))}},wp=OD(y(A(s)));var Ip=function(t){return function(r){return new S(w("source")(t)(M(r)))}};var Lp=function(t){return function(r){return new S(w("video")(t)(M(r)))}};function zf(t){return function(){return t.value}}function Pp(t){return function(){return t.valueAsNumber}}function HD(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var o=n;o!=null;){var p=Object.getPrototypeOf(o),f=p.constructor.name;if(f===e)return r(n);if(f==="Object")return t;o=p}return t}var rt=function(t){return function(r){return HD(L.value,C.create,t,r)}};var Vf=rt("HTMLInputElement");function Op(t){return t.code}var Rp=rt("KeyboardEvent");var Jf=function(){var t=st(Yt(s))(_(Y(G))(ct(mf)(na.value)("range"))),r=d(ar)(function(e){return ct(Zf)(Ko.value)(Dr(function(n){return Gr(Qr)(jr)(P(Le)(kf(n))(Vf))(si(Au)(Pp)(e))}))});return function(e){return t(r(e))}}();var Gf=function(t){return function(r){return function(e){return d(t)(function(){var n=ct(e)(br.value);return function(u){return n(function(o){return o(Ut(r))}(u))}}())}}};var Th=function(){return j.value}(),WD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Th)({code:pr(Ir([wr([jt(Hl)])])),result:pr(pf()()(Pa({reflectSymbol:function(){return"buttonClicked"}})(Oa(Ra))(Pa({reflectSymbol:function(){return"sliderMoved"}})(Oa(Ra))(lf)()())()())(xa({reflectSymbol:function(){return"buttonClicked"}})()()(xa({reflectSymbol:function(){return"sliderMoved"}})()()(ef)()())()())(j.value)(function(r){return function(e){return or([he(Gf(ar)(Zu)(Ba)(_(Y(G))(r.buttonClicked)))([jt("Click")]),or([Je(st(Yt(s))(_(Y(G))("Val: 0"))(d(ar)(function(){var n=z(jn)("Val: "),u=at(tn);return function(o){return n(u(o))}}())(Su(Ce(G))(h(Ur(Ze)(1)))(st(Yt(s))(_(Y(G))(void 0))(e.buttonClicked))(-1))))]),or([iu(Jf(_(Y(G))(r.sliderMoved)))([]),or([Je(st(Yt(s))(_(Y(G))("Val: 50.0"))(d(ar)(function(){var n=z(jn)("Val: "),u=at(_o);return function(o){return n(u(o))}}())(e.sliderMoved)))])])])}})),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Ja.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"effects/")])})};var Eh=function(){function t(){}return t.value=new t,t}(),Hp=function(){function t(){}return t.value=new t,t}(),ZD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Fh=function(){return j.value}(),qD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Fh)({code:pr(Ir([wr([jt(Rl)])])),result:pr(Ha(function(r){return Oe(me)(function(e){return st(Yt(s))(_(Y(G))(Eh.value))(e)})(function(e){return or([or([iu(gr(mt)(A(s))(_(Y(G)))([ct(Gv)(be.value)("border-style:solid;border-width: 1px;border-color: black;"),ct(Zf)(Ko.value)(Dr(function(n){return Gr(Qr)(jr)(P(Le)(kf(n))(Vf))(si(Au)(zf)(function(u){return r(ZD.create(u))}))})),ct($p)(qf.value)(Dr(function(n){return Gr(Qr)(jr)(Rp(n))(function(u){return Jn(Qr)(Op(u)==="Enter")(r(Hp.value))})}))]))([]),he(st(Yt(s))(_(Y(G))(ct(sf)(be.value)("margin: 5px;")))(_(Y(G))(ct(Er)(br.value)(Dr(h(r(Hp.value)))))))([jt("Add")])]),Na(pn)(d(ar)(function(n){return Qu(Ce(G))($u(function(u){return function(o){return st(Yt(s))(_(Y(G))(ea(or([Zn(_(Y(G))(ct(Ua)(be.value)("margin: 5px;")))([jt(n)]),he(st(Yt(s))(_(Y(G))(ct(sf)(be.value)("margin: 5px;")))(_(Y(G))(ct(Er)(br.value)(Dr(h(u(qv)))))))([jt("Prioritize")]),he(st(Yt(s))(_(Y(G))(ct(sf)(be.value)("margin: 5px;")))(_(Y(G))(ct(Er)(br.value)(Dr(h(u(gl)))))))([jt("Delete")])]))))(o)}}))})(Fe(kn(s))(function(n){return n.value0?new C(n.value1):L.value})(Yu(Ce(G))(function(n){return function(u){return n instanceof ZD?new q(n.value0,new q(!1,n.value0)):n instanceof Hp?new q(u,new q(!0,u)):new q("",new q(!1,""))}})(e)(""))))])})})),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(ja.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"portals/")])})};var xh=function(){return j.value}(),zD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(xh)({code:pr(Ir([wr([jt(Ol)])])),result:pr(or([jt("Hello world")])),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Za.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"component/")])})};var wh=function(){return j.value}(),VD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(ee()(Br)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))(wh)({next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Wa.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"hello/")])})};var Lh=function(){return j.value}(),JD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Lh)({code:pr(Ir([wr([jt(Pl)])])),result:pr(Na(pn)($u(function(r){return Oe(me)(st(Yt(s))(_(Y(G))(void 0)))(function(e){return _(Y(G))(ea(Vv()(d(Ia)(function(n){return Lp(gr(mt)(A(s))(_(Y(G)))([ct(MD)(Fp.value)("true"),ct(PD)(Mp.value)("250")]))([Ip(gr(mt)(A(s))(_(Y(G)))([ct(LD)(xp.value)(n),ct(Kv)(na.value)("video/mp4")]))([])])})(_l()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(_l()()("https://www.w3schools.com/jsref/movie.mp4")(hv))))(function(n){return function(u){var o=pl()()()()()({reflectType:function(){return 1}})(j.value)(n),p=pl()()()()()({reflectType:function(){return 0}})(j.value)(n),f=Su(Ce(G))(h(en(ye)))(e),b=function(){var m=_f(Zn)(function(k){return k?p:o});return function(k){return m(f(k))}}();return or([he(_(Y(G))(ct(Er)(br.value)(Dr(h(r(void 0))))))([jt("Switch videos")]),or([b(!0),b(!1)])])}})))})}))),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Xa.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"ssr/")])})};var Oh=function(){return j.value}(),Rh=function(){return j.value}(),GD=function(t){return zr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Oh)({code:pr(Ir([wr([jt(Ll)])])),result:pr(um({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Br)(Rh)),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Va.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"events1/")])})};var Nh=function(){return j.value}(),Bh=function(){return j.value}(),jD=function(t){return wl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(_r()(ee()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(j.value)(Nh)({code:pr(Ir([wr([jt(Il)])])),result:pr(Na(pn)($u(function(r){return function(e){return _(Y(G))(ea(zr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(ee()(_r()(Br)({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}}))(Bh)({myli:_(Y(G))(ct(Jv)(be.value)("background-color:rgb(200,240,210);")),somethingNew:pr(he(_(Y(G))(ct(Ba)(br.value)(r(new C(void 0)))))([Je(st(Yt(s))(B(ar)(Ku(wo(s))(e))("Thanks for clicking me!"))(_(Y(G))("I was dynamically inserted")))]))})))}}))),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Ga.value)))(_e)})),ct(qr)(Nr.value)(t.slug+"events2/")])})};var XD=(t,r,e,n)=>{t(u=>n.units[u].main.appendChild(n.units[r].main))(e)},Np=t=>()=>{t.hydrating=!0},Bp=t=>()=>{t.hydrating=!1},KD=t=>r=>e=>()=>{e.units[r.id].main.parentNode||t(r.pos)(u=>()=>e.units[r.parent].main.children[u]?(e.units[r.parent].main.insertBefore(e.units[r.id].main,e.units[r.parent].main.children[u]),!0):!1)()||(r.parent.indexOf("@!%")!==-1?e.units[r.parent].main.parentNode.replaceChild(e.units[r.id].main,e.units[r.parent].main):e.units[r.parent].main.appendChild(e.units[r.id].main))},QD=t=>r=>e=>n=>()=>{var u,o=e.id;n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(o),t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.body.querySelectorAll("[data-deku-ssr-"+o+"]").item(0))?(n.units[o]={listeners:{},parent:e.parent,scope:e.scope,main:u},!0):!1)()||(n.units[o]={listeners:{},parent:e.parent,scope:e.scope,main:document.createElement(e.tag)})},YD=t=>r=>e=>n=>u=>()=>{var o=n.id,p;u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(o),t(n.parent)(b=>()=>{if(u.hydrating&&r&&(p=document.body.querySelectorAll("[data-deku-ssr-"+b+"]").item(0))){var m=0;if(p.childNodes.length===1)p.prepend(document.createTextNode(""));else for(var m=0;m<p.childNodes.length;m++)if(p.childNodes[m].nodeType===8&&p.childNodes[m].nodeValue===o){m=m-1;break}return u.units[o]={main:p.childNodes[m],parent:n.parent,scope:n.scope},!0}return!1})()||(u.units[o]={main:document.createTextNode(""),parent:n.parent,scope:n.scope},XD(e,o,n.parent,u))};function Up(){return{units:{},scopes:{}}}var tb=t=>r=>e=>()=>{var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+n+"]").item(0))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":e.units[n].main.setAttribute(r.key,u)},rb=t=>r=>e=>()=>{var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+n+"]").item(0))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var o=p=>u(p)();e.units[n].main.addEventListener(r.key,o),e.units[n].listeners[r.key]=o}},eb=t=>r=>()=>{var e=t.id;r.units[e].main.nodeValue=t.text},nb=t=>r=>e=>n=>u=>()=>{var o,p,f=n.id,b=n.html,m=n.verb,k=n.cache,g=n.parent,D=n.scope,a=n.pxScope;if(!t(n.parent)(()=>()=>u.hydrating&&r&&(o=document.body.querySelectorAll("[data-deku-ssr-"+f+"]").item(0))?(u.units[f]={listeners:{},scope:D,parent:g,main:o},!0):!1)()){let Pt=Object.entries(k);for(var ut=0;ut<Pt.length;ut++){let Ht=Pt[ut][0];Pt[ut][1]===!0?b=b.replace(m+Ht+m,'data-deku-attr-internal="'+Ht+'"'):b=b.replace(m+Ht+m,'<span style="display:contents;" data-deku-elt-internal="'+Ht+'"></span>')}p=document.createElement("div"),p.innerHTML=b.trim(),u.units[f]={listeners:{},scope:D,parent:g,main:p.firstChild}}u.scopes[D]||(u.scopes[D]=[]),u.scopes[D].push(f),p||(p=o),p.querySelectorAll("[data-deku-attr-internal]").forEach(function(Pt){var Ht=Pt.getAttribute("data-deku-attr-internal");let Nt=Ht+"@!%"+a;u.units[Nt]={listeners:{},main:Pt,scope:D},u.scopes[D].push(Nt)}),p.querySelectorAll("[data-deku-elt-internal]").forEach(function(Pt){var Ht=Pt.getAttribute("data-deku-elt-internal");let Nt=Ht+"@!%"+a;u.units[Ht+"@!%"+a]={listeners:{},main:Pt,scope:D},u.scopes[D].push(Nt)}),o||XD(e,f,g,u)},ub=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root}},ab=t=>r=>()=>{var e=t.id,n=t.parent;r.units[e].containingScope=t.scope,r.units[n].main.prepend(r.units[e].main)},ob=t=>r=>()=>{var e=t.id;r.units[e].noop||r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope)||r.units[e].main.remove()},ib=t=>r=>()=>{delete r.units[t.id]},fb=t=>r=>()=>{var e=t.id,n=t.pos,u=r.units[e].main.parentNode;u.insertBefore(r.units[e].main,u.children.length<=n?u.children[u.children.length-1]:n<0?u.children[0]:u.children[n])};var cb=function(t){return t};var Vh=1,Wp=2147483647,Jh=function(){return Wp-1|0}(),Zp=function(t){var r=function(e){return function(n){return function(u){var o=n-e|0,p=so(vi)(u)(o),f=p<e;return f?p+n|0:p}}};return r(Vh)(Jh)(t)};var Gh=0,jh=48271,lb=function(t){return function(r){return Ie()(Bf(jo($e(jh)*$e(r)+$e(t))($e(Wp))))}},pb=lb(Gh);var eT=function(){function t(p){this.fn=p}var r={},e=function(p,f){this.head=p,this.tail=f};function n(p){return new e(p,r)}function u(p){return function(f){return new e(p,f)}}function o(p){for(var f=[],b=p;b!==r;)f.push(b.head),b=b.tail;return f}return function(p){return function(f){return function(b){var m=function(g,D){return p(f(u)(b(g)))(D)},k=function(g,D,a){if(D===0)return g;var T=a[D-1];return new t(function(){var ut=k(m(T,g),D-1,a);return ut})};return function(g){for(var D=f(n)(b(g[g.length-1])),a=k(D,g.length-1,g);a instanceof t;)a=a.fn();return f(o)(a)}}}}}();var ro=function(t){return{map:function(r){return function(e){return function(n){return d(t)(function(u){return new q(r(u.value0),u.value1)})(e(n))}}}}};var Vp=function(t){return{Applicative0:function(){return ia(t)},Bind1:function(){return jf(t)}}},jf=function(t){return{bind:function(r){return function(e){return function(n){return P(t.Bind1())(r(n))(function(u){var o=e(u.value0);return o(u.value1)})}}},Apply0:function(){return Xf(t)}}},Xf=function(t){return{apply:nn(Vp(t)),Functor0:function(){return ro(t.Bind1().Apply0().Functor0())}}},ia=function(t){return{pure:function(r){return function(e){return _(t.Applicative0())(new q(r,e))}},Apply0:function(){return Xf(t)}}};var Qo=function(t){return{state:function(r){var e=_(t.Applicative0());return function(n){return e(r(n))}},Monad0:function(){return Vp(t)}}};var Ab=function(t){return function(r){var e=t(r);return e.value1}},kb=function(t){return function(r){var e=t(r);return e.value0}};var dT=function(t){return t};var AT=function(){var t=function(r){return new q(cb(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=pb(r.newSeed),e}())};return zn(Qo(yr))(t)}();var Yo=ro($n);var Gp=function(t){return kb(dT(t))};var Cb=Xf(yr),gb=function(t){return function(r){var e=$e(r),n=$e(t),u=function(f){return n+jo(f)(e-n+1)},o=d(Yo)($e)(AT),p=Zt(Cb)(d(Yo)(Ur(lo))(o))(d(Yo)(Qe(lo)(2))(o));return d(Yo)(function(f){return bp(u(f))})(p)}},hb=function(t){return function(r){var e=t<=r;return e?gb(t)(r):gb(r)(t)}};var jp=function(t){return t.arbitrary};var Xp=function(){return{arbitrary:hb(-1e6)(1e6)}}();var ti=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ri=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Yf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ei=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yT=function(t){return function(r){return it(ur)(Wr(function(e){return z(Ar)(e)([new ei(t)])})(r))}},gT=function(t){return function(r){return it(ur)(Wr(function(e){return z(Ar)(e)([new Yf(t)])})(r))}},CT=function(t){return function(r){return it(ur)(Wr(function(e){return z(Ar)(e)([new ri(t)])})(r))}},hT=function(t){return function(r){return it(ur)(Wr(function(e){return z(Ar)(e)([new Qf(t)])})(r))}},TT=function(t){return function(r){return it(ur)(Wr(function(e){return z(Ar)(e)([new ti(t)])})(r))}},Sb=function(t){return{ids:ra(function(){var e=lr(t)(),n=at(tn)(Gp(jp(Xp))({newSeed:Zp(e),size:5}));return it(ur)(Wr(Ur(Ze)(1))(t))(),n}),makeElement:TT,attributeParent:function(r){return function(e){return _(De)(void 0)}},makeRoot:function(r){return function(e){return _(De)(void 0)}},makeText:CT,makePursx:hT,setProp:gT,setCb:function(r){return function(e){return _(De)(void 0)}},setText:yT,sendToPos:function(r){return function(e){return _(De)(void 0)}},deleteFromCache:function(r){return function(e){return _(De)(void 0)}},giveNewParent:function(r){return function(e){return _(De)(void 0)}},disconnectElement:function(r){return function(e){return _(De)(void 0)}}}},Kf=function(t){return function(r){return t instanceof C?r(t.value0):_(Qr)(!1)}},Eb=function(t){return{ids:Yi(qu)(function(){var e=xn(t)(),n=at(tn)(Gp(jp(Xp))({newSeed:Zp(e),size:5}));return it(R)(yc(Ur(Ze)(1))(t))(),n}),makeElement:QD(Kf)(!0),attributeParent:KD(Kf),makeRoot:ub,makeText:YD(Kf)(!0)(er(void 0)),makePursx:nb(Kf)(!0)(er(void 0)),setProp:tb(!0),setCb:rb(!0),setText:eb,sendToPos:fb,deleteFromCache:ib,giveNewParent:ab,disconnectElement:ob}};var Kp=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),Qp=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let o=r,p=Object.entries(n);for(var f=0;f<p.length;f++){let g=p[f][0];p[f][1]===!0?o=o.replace(u+g+u,'data-deku-attr-internal="'+g+'" data-deku-ssr-'+g+"@!%"+e+'="true"'):o=o.replace(u+g+u,'<span style="display:contents;" data-deku-elt-internal="'+g+'" data-deku-ssr-'+g+"@!%"+e+'="true"></span>')}let b=o.indexOf(">"),m=o.indexOf("/>"),k=m==b-1?m:b;return o.slice(0,k)+" data-deku-ssr-"+t+'="true" '+o.slice(k)};var $b=function(t){return function(r){var e=function(g){return function(D){return it(ro($n))(Ya(Qo(yr))(function(a){var T={};for(var ut in a)({}).hasOwnProperty.call(a,ut)&&(T[ut]=a[ut]);return T.idToActions=Nn(fe)(function(Pt){if(Pt instanceof C)return new C(z(Ar)(Pt.value0)([D]));if(Pt instanceof L)return new C([D]);throw new Error("Failed pattern match at Deku.SSR (line 46, column 17 - line 48, column 45): "+[Pt.constructor.name])})(g)(a.idToActions),T}))}},n=function(g){return function(D){return function(a){return Kt(Qt)(jf(yr))(it(ro($n))(Ya(Qo(yr))(function(T){var ut={};for(var Pt in T)({}).hasOwnProperty.call(T,Pt)&&(ut[Pt]=T[Pt]);return ut.parentToChild=Nn(fe)(function(Ht){if(Ht instanceof C)return new C(z(Ar)(Ht.value0)([D]));if(Ht instanceof L)return new C([D]);throw new Error("Failed pattern match at Deku.SSR (line 33, column 17 - line 35, column 41): "+[Ht.constructor.name])})(g)(T.parentToChild),ut})))(function(){return e(D)(a)})}}},u=Ab(Ee(tu)(ia(yr))(function(g){if(g instanceof ti)return Gr(ia(yr))(jr)(g.value0.parent)(function(D){return n(D)(g.value0.id)(g)});if(g instanceof ri)return Gr(ia(yr))(jr)(g.value0.parent)(function(D){return n(D)(g.value0.id)(g)});if(g instanceof Qf)return Gr(ia(yr))(jr)(g.value0.parent)(function(D){return n(D)(g.value0.id)(g)});if(g instanceof Yf||g instanceof ei)return e(g.value0.id)(g);throw new Error("Failed pattern match at Deku.SSR (line 56, column 17 - line 63, column 43): "+[g.constructor.name])})(r))({parentToChild:Hn,idToActions:Hn}),o=function(g){return pa(Bc(function(D){return D instanceof ti||D instanceof ri})(g))},p=function(g){return ke("")(Hi(function(D){return D instanceof ti?new C(D.value0.tag):L.value})(g))},f=function(g){return Kn(mt)(qu)(" ")(Fe(nv)(function(D){return D instanceof Yf?new C(D.value0.key+('="'+(D.value0.value+'"'))):L.value})(g))},b=function(g){return er("")(function(D){var a=function(Pt){return ke("")(Hi(function(Ht){return Ht instanceof ei?new C(Kp(Ht.value0.text)+("<!--"+(g+"-->"))):L.value})(D))},T=function(Pt){var Ht=p(D),Nt=f(D);return"<"+(Ht+(" "+(Nt+(" data-deku-ssr-"+(g+('="true">'+(m(g)+("</"+(Ht+">")))))))))},ut=ju(D)(0);return ut instanceof C&&ut.value0 instanceof ei?a(void 0):ut instanceof C&&ut.value0 instanceof ri?a(void 0):ut instanceof C&&ut.value0 instanceof Qf?Qp(ut.value0.value0):T(void 0)})(Ea(fe)(g)(u.idToActions))},m=function(g){var D=ke([])(Ea(fe)(g)(u.parentToChild));return Or(mt)(qu)(b)(D)},k=function(g){return on(re)(function(D){return function(a){return function(T){var ut=o(T);if(ut)return a;if(!ut)return If("data-deku-ssr-"+D)(f(T)+(" data-deku-ssr-"+D))(a);throw new Error("Failed pattern match at Deku.SSR (line 83, column 19 - line 87, column 14): "+[ut.constructor.name])}}})(m(g))(u.idToActions)};return"<"+(t+(' data-deku-ssr-deku-root="true">'+(k("deku-root")+("</"+(t+">")))))}};var xb=Un(s)(G)({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Pr();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:Mt(wa)})}},toElt:function(t){return t}}),cS=function(t){return function(){var e=Up(),n=Xe(R)(ku(0))(Eb)();Np(e)();var u=Zr(mv(xb({parent:new C("deku-root"),scope:new Eu("rootScope"),raiseId:function(o){return _(s)(void 0)},pos:L.value})(n)(t)))(function(o){return o(e)})();return Bp(e)(),u}},Mb=function(t){return it(R)(cS(t))},lS=function(t){return function(r){return function(e){return d(ur)(function(){var n=$b(t);return function(u){return function(o){return r.head+o}(function(o){return o+r.tail}(n(u)))}}())(Q(cs)(function(){var u=Cr(0)(),o=Cr([])(),p=Sb(u);return it(ur)(Zr(vv(xb({parent:new C("deku-root"),scope:new Eu("rootScope"),raiseId:function(f){return _(s)(void 0)},pos:L.value})(p)(e)))(function(f){return f(o)}))(),lr(o)()}))}}},wb=lS("body");var pS=function(){return j.value}(),Lb=function(){return pf()()(Pa({reflectSymbol:function(){return"buttonClicked"}})(Oa(Ra))(Pa({reflectSymbol:function(){return"sliderMoved"}})(Oa(Ra))(lf)()())()())(xa({reflectSymbol:function(){return"buttonClicked"}})()()(xa({reflectSymbol:function(){return"sliderMoved"}})()()(ef)()())()())(j.value)(function(t){return function(r){return or([wp([jt(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),he(Gf(ar)(Zu)(Ba)(_(Y(G))(t.buttonClicked)))([jt("Click")]),or([Je(st(Yt(s))(_(Y(G))("Val: 0"))(d(ar)(function(){var e=z(jn)("Val: "),n=at(tn);return function(u){return e(n(u))}}())(Su(Ce(G))(h(Ur(Ze)(1)))(st(Yt(s))(_(Y(G))(void 0))(r.buttonClicked))(-1))))]),or([iu(Jf(_(Y(G))(t.sliderMoved)))([]),or([Je(st(Yt(s))(_(Y(G))("Val: 50"))(d(ar)(function(){var e=z(jn)("Val: "),n=at(_o);return function(u){return e(n(u))}}())(r.sliderMoved)))])])])}})}(),Pb=function(t){return zr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(_r()(_r()(_r()(_r()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}}))(pS)({code2:pr(Ir([wr([jt(Zl)])])),code1:pr(Ir([wr([jt(Wl)])])),code0:pr(Ir([wr([jt(Ul)])])),result:pr(Lb),codegen:pr(Ir([wr([Je(pe(function(r){return At(uu)(P(cn)(ra(wb({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Lb)))(r))(_(s)(_(s)(void 0)))}))])]))})};var Ob=function(t){var r=function(n){if(n instanceof bf)return VD;if(n instanceof Wa)return zD;if(n instanceof Za)return fm;if(n instanceof qa)return GD;if(n instanceof Va)return WD;if(n instanceof Ja)return xD;if(n instanceof za)return jD;if(n instanceof Ga)return qD;if(n instanceof ja)return JD;if(n instanceof Xa)return Pb;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[n.constructor.name])},e=function(n){return function(u){return r(u)({dpage:n,slug:t.slug})}};return Ha(function(n){return Oe(me)(function(u){return st(Yt(s))(_(Y(G))(t.startsWith))(u)})(function(u){return or([or(d(Sr)(function(o){return hl([Ro(gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(p){return At(mr)(Vr(p))(n(o.value0))})),ct(jv)(be.value)("cursor:pointer;"),ct(qr)(Nr.value)(t.slug+o.value1.value1.value0)]))([jt(o.value1.value0)]),Zn(_(Y(G))(ct(Ua)(be.value)(function(){return o.value1.value1.value1?"":"display:none;"}())))([jt(" | ")])])})([new q(bf.value,new q("Home",new q("",!0))),new q(Wa.value,new q("Hello world",new q("hello/",!0))),new q(Za.value,new q("Component",new q("simple/",!0))),new q(qa.value,new q("Pursx 1",new q("pursx1/",!0))),new q(Va.value,new q("Events 1",new q("events1/",!0))),new q(Ja.value,new q("Effects",new q("effects/",!0))),new q(za.value,new q("Pursx 2",new q("pursx2/",!0))),new q(Ga.value,new q("Events 2",new q("events2/",!0))),new q(ja.value,new q("Portals",new q("portals/",!0))),new q(Xa.value,new q("SSR",new q("ssr/",!1)))])),_f(pn)(e(n))(u)])})})};var lAt=function(t){return function(){var e=er(Bo(Qa("could not ingest options: "+at(h_()()(ac({reflectSymbol:function(){return"slug"}})(ac({reflectSymbol:function(){return"startsWith"}})(g_)(Se))(Se)))(t))))(_(Qr))(nm(t.startsWith))();return Mb(Ob({slug:t.slug,startsWith:e}))()}};export{lAt as main};
