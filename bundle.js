var ms=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),a=0,i=0;i<e;i++)for(var c=t[i],_=0;_<n;_++)u[a++]=c(r[_]);return u}};var ea={compose:function(t){return function(r){return function(e){return t(r(e))}}}},na=function(t){return t.compose},Oc=function(t){var r=na(t);return function(e){return function(n){return r(n)(e)}}};var Rt=function(t){return t.identity},Nt={identity:function(t){return t},Semigroupoid0:function(){return ea}};var Br=!0;var Fo=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},mr=function(t){return function(r){return function(e){return t(e)(r)}}},h=function(t){return function(r){return t}};var xo=function(t){return function(r){return r(t)}};var Ds=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var Z=function(){function t(){}return t.value=new t,t}();var y=function(t){return t.map},qe=function(t){var r=y(t);return function(e){return function(n){return r(n)(e)}}},ir=function(t){return y(t)(h(void 0))},X=function(t){var r=y(t);return function(e){return function(n){return r(h(n))(e)}}};var ua={map:na(ea)},br={map:Ds};var ey=Rt(Nt);var Mo={apply:ms,Functor0:function(){return br}},Jt=function(t){return t.apply};var Dr=function(t){var r=Jt(t),e=y(t.Functor0());return function(n){return function(u){return r(e(h(ey))(n))(u)}}},ee=function(t){var r=Jt(t),e=y(t.Functor0());return function(n){return function(u){return function(a){return r(e(n)(u))(a)}}}};var q=function(t){return t.pure};var Yn=function(t){var r=q(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},wo=function(t){var r=Jt(t.Apply0()),e=q(t);return function(n){return function(u){return r(e(n))(u)}}};var aa={pure:function(t){return[t]},Apply0:function(){return Mo}};var ds=function(t){return function(r){return t+r}},As=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Jr=function(t){return t.reflectSymbol};var tn=function(t){return function(r){return r[t]}},Zn=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var ys={append:function(t){return function(r){return void 0}}},oa={append:ds};var Vr={append:As};var nt=function(t){return t.append};var Wt=function(t){return t.alt};var iy=String.fromCharCode(65535),fy=String.fromCharCode(0),cy=Number.POSITIVE_INFINITY,ly=Number.NEGATIVE_INFINITY;var gs=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var Cs=gs;var hs=gs;var Ss=function(t){return function(r){return t===r}};var Ts=Ss;var Es=Ss;var xn={eq:Es};var Pa={eq:Ts};var St=function(t){return t.eq};var gt=function(){function t(){}return t.value=new t,t}(),Mt=function(){function t(){}return t.value=new t,t}(),wt=function(){function t(){}return t.value=new t,t}();var $s=function(t){return function(r){return t-r|0}};var Fs=function(t){return function(r){return t+r|0}},xs=function(t){return function(r){return t*r|0}},Ms=function(t){return function(r){return t+r}},ws=function(t){return function(r){return t*r}};var Io={add:Ms,zero:0,mul:ws,one:1},ia={add:Fs,zero:0,mul:xs,one:1};var rn=function(t){return t.mul};var Ae=function(t){return t.add};var Nc={sub:$s,Semiring0:function(){return ia}};var Ee=function(){return{compare:hs(gt.value)(wt.value)(Mt.value),Eq0:function(){return xn}}}();var le=function(){return{compare:Cs(gt.value)(wt.value)(Mt.value),Eq0:function(){return Pa}}}();var $t=function(t){return t.compare};var wn=function(t){return t.top};var Po={top:2147483647,bottom:-2147483648,Ord0:function(){return le}};var ru=function(t){return t.bottom};var Ls=function(t){return t.toString()},Ps=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var Os=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,a=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+a})+'"'};var Je={show:Os};var Rs=function(t){return t.showRecordFields},Ns=function(){return function(){return function(t){var r=Rs(t);return{show:function(e){return"{"+(r(Z.value)(e)+"}")}}}}};var Oo={show:Ps},sn={show:Ls};var _t=function(t){return t.show};var Ws=function(t){var r=Jr(t);return function(e){var n=Rs(e);return function(u){var a=_t(u);return{showRecordFields:function(i){return function(c){var _=n(Z.value)(c),s=r(Z.value),m=tn(s)(c);return" "+(s+(": "+(a(m)+(","+_))))}}}}}},Hs=function(t){var r=Jr(t);return function(e){var n=_t(e);return{showRecordFields:function(u){return function(a){var i=r(Z.value),c=tn(i)(a);return" "+(i+(": "+(n(c)+" ")))}}}}};var $y=Rt(Nt),b=function(){function t(){}return t.value=new t,t}(),p=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var tr=function(t){return function(r){return function(e){if(e instanceof b)return t;if(e instanceof p)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ra=tr(!1)(h(!0));var $r={map:function(t){return function(r){return r instanceof p?new p(t(r.value0)):b.value}}},Fy=y($r);var pe=function(t){return tr(t)($y)},Le=function(){return function(t){if(t instanceof p)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var hu=function(t){var r=St(t);return{eq:function(e){return function(n){return e instanceof b&&n instanceof b?!0:e instanceof p&&n instanceof p?r(e.value0)(n.value0):!1}}}},ca=function(t){var r=$t(t),e=hu(t.Eq0());return{compare:function(n){return function(u){if(n instanceof b&&u instanceof b)return wt.value;if(n instanceof b)return gt.value;if(u instanceof b)return Mt.value;if(n instanceof p&&u instanceof p)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var la={apply:function(t){return function(r){if(t instanceof p)return Fy(t.value0)(r);if(t instanceof b)return b.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return $r}};var ye={bind:function(t){return function(r){if(t instanceof p)return r(t.value0);if(t instanceof b)return b.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return la}};var Ln=function(){return{pure:p.create,Apply0:function(){return la}}}();var xy={alt:function(t){return function(r){return t instanceof b?r:t}},Functor0:function(){return $r}},qs=function(){return{empty:b.value,Alt0:function(){return xy}}}();var zs=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=u-1;a>=0;a--)n=t(e[a])(n);return n}}},Js=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=0;a<u;a++)n=t(n)(e[a]);return n}}};var Vs=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var Iy=Rt(Nt),Na=function(t){return t.discard};var Wa={bind:Vs,Apply0:function(){return Mo}},At=function(t){return t.bind},eu=function(t){return mr(At(t))},Hi=function(t){var r=eu(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},Bi=function(t){var r=At(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var Ha={discard:function(t){return At(t)}};var Ui=function(t){var r=At(t);return function(e){return r(e)(Iy)}};var k=function(t){return t.empty};var lt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ft=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Bc=function(t){return tr(new lt(t))(ft.create)};var Ba={map:function(t){return function(r){if(r instanceof lt)return new lt(r.value0);if(r instanceof ft)return new ft(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var en=function(t){return function(r){return function(e){if(e instanceof lt)return t(e.value0);if(e instanceof ft)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},Uc=function(){return en(h(b.value))(p.create)}();var Ry=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var Gs={defer:function(t){return function(r){return t(void 0)(r)}}},Ua=function(t){return t.defer},qc=function(t){var r=Ua(t);return function(e){var n=Ry("go","Control.Lazy",function(){return r(function(a){return e(n(25))})}),u=n(25);return u}};var Ks=function(t){return function(r){return t&&r}},Qs=function(t){return function(r){return t||r}},Ys=function(t){return!t};var pa=function(t){return t.not};var za=function(t){return t.ff};var _a=function(t){return t.disj},vn={ff:!1,tt:!0,implies:function(t){return function(r){return _a(vn)(pa(vn)(t))(r)}},conj:Ks,disj:Qs,not:Ys};var Zs=function(t){return Math.min(Math.abs(t),2147483647)},tv=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},rv=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var ev={Ring0:function(){return Nc}};var Ro=function(t){return t.mod};var qi={degree:Zs,div:tv,mod:rv,CommutativeRing0:function(){return ev}};var Jc={mempty:void 0,Semigroup0:function(){return ys}},No={mempty:"",Semigroup0:function(){return oa}};var qt=function(t){return t.mempty};var V=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var jr=function(t){return t.value1};var Su={map:function(t){return function(r){return new V(r.value0,t(r.value1))}}};var Ja=function(t){return function(r){return function(e){return t(new V(r,e))}}};var Uo=function(t){return t};var Qy=function(t){var r=_a(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Xc=function(t){var r=Qy(t);return{mempty:za(t),Semigroup0:function(){return r}}};var Xi=function(t){return t};var Yy=function(t){var r=na(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Gc=function(t){var r=Yy(t.Semigroupoid0());return{mempty:Rt(t),Semigroup0:function(){return r}}};var Q=function(t){return t};var g=function(){return Q};var Qc=g(),Gi=function(){return Qc};var Fr=function(){return Qc};var Ki=function(){return function(){return function(){return function(){return function(t){return Qc}}}}};var rg=Fr(),eg=Gc(Nt);var ng=Ki()()()(),sr=function(t){return t.foldr};var nu=function(t){var r=sr(t);return function(e){return r(Wt(e.Alt0()))(k(e))}},Ir=function(t){var r=sr(t);return function(e){var n=Wt(e.Alt0()),u=k(e);return function(a){return r(function(i){return n(a(i))})(u)}}},Xa=function(t){var r=Dr(t.Apply0()),e=q(t);return function(n){var u=sr(n);return function(a){return u(function(i){return r(a(i))})(e(void 0))}}},un=function(t){var r=Xa(t);return function(e){return mr(r(e))}};var ur=function(t){return t.foldl};var uu=function(t){var r=ur(t);return function(e){var n=nt(e.Semigroup0()),u=qt(e);return function(a){return function(i){var c=function(_){return function(s){return _.init?{init:!1,acc:s}:{init:!1,acc:n(_.acc)(n(a)(s))}}};return r(c)({init:!0,acc:u})(i).acc}}}};var an={foldr:function(t){return function(r){return function(e){if(e instanceof b)return r;if(e instanceof p)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof b)return r;if(e instanceof p)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=qt(t);return function(e){return function(n){if(n instanceof b)return r;if(n instanceof p)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var av=function(t){var r=sr(t);return function(e){var n=nt(e.Semigroup0()),u=qt(e);return function(a){return r(function(i){return function(c){return n(a(i))(c)}})(u)}}},Ft={foldr:zs,foldl:Js,foldMap:function(t){return av(Ft)(t)}},tl=function(t){var r=ur(t);return function(e){var n=nt(e.Semigroup0()),u=qt(e);return function(a){return r(function(i){return function(c){return n(i)(a(c))}})(u)}}},gr=function(t){return t.foldMap};var rl=function(t){var r=gr(t)(eg);return function(e){return function(n){return function(u){return rg(r(function(a){return Xi(e(a))})(u))(n)}}}};var Tu=function(t){var r=gr(t);return function(e){return ng(Uo)(r(Xc(e)))}};var ug=Rt(Nt);var Pe={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},ov=function(t){return t.dimap},Oe=function(t){var r=ov(t);return function(e){return r(e)(ug)}};var el=function(t){return function(){return t}},iv=function(t){return function(r){return function(){return r(t())()}}};var Re=function(t){var r=At(t.Bind1()),e=q(t.Applicative0());return function(n){return function(u){return r(n)(function(a){return r(u)(function(i){return e(a(i))})})}}};var fv=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Ga={Applicative0:function(){return ge},Bind1:function(){return va}},va={bind:iv,Apply0:function(){return nl(0)}},ge={pure:el,Apply0:function(){return nl(0)}},cv=fv("functorEffect","Effect",function(){return{map:wo(ge)}}),nl=fv("applyEffect","Effect",function(){return{apply:Re(Ga),Functor0:function(){return cv(0)}}}),U=cv(20),Lr=nl(23),og=ee(Lr),ul=function(t){return{append:og(nt(t))}},al=function(t){var r=ul(t.Semigroup0());return{mempty:el(qt(t)),Semigroup0:function(){return r}}};var Qi=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},ol=(t,r)=>{for(let e in t)r(t[e])},il=()=>({}),fl=(t,r,e)=>{e[t]=r},cl=(t,r)=>{delete r[t]};var lv=Q;var pv=function(t){return function(r){return function(){return t(r())}}},_v=function(t){return function(){return t}},sv=function(t){return function(r){return function(){return r(t())()}}};function _e(t){return function(){return{value:t}}}var Qr=function(t){return function(){return t.value}},vv=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Dn=function(t){return function(r){return function(){return r.value=t}}};var Pn=function(t){return t};var au={map:function(t){return function(r){return t(r)}}};var mv={apply:function(t){return function(r){return t(r)}},Functor0:function(){return au}},lg={bind:function(t){return function(r){return r(t)}},Apply0:function(){return mv}},pg={pure:Pn,Apply0:function(){return mv}},Ne={Applicative0:function(){return pg},Bind1:function(){return lg}};var Dv=function(t){return function(){return{value:t}}};var Yr=function(t){return function(){return t.value}},bv=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},se=function(t){return function(r){return function(){r.value=t}}};var sg=ir(U),Ce=Dv,vg=bv,Yi=function(t){return vg(function(r){var e=t(r);return{state:e,value:e}})},Jo=function(t){return function(r){return sg(Yi(t)(r))}};var kg=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},yg=vv,Pr=function(t){return yg(function(r){var e=t(r);return{state:e,value:e}})},ve={map:pv};var Zi={Applicative0:function(){return Cr},Bind1:function(){return $u}},$u={bind:sv,Apply0:function(){return pl(0)}},Cr={pure:_v,Apply0:function(){return pl(0)}},pl=kg("applyST","Control.Monad.ST.Internal",function(){return{apply:Re(Zi),Functor0:function(){return ve}}}),Ka=pl(47);var Av={liftST:Rt(Nt),Monad0:function(){return Zi}},Vo={liftST:lv,Monad0:function(){return Ga}},Qa=function(t){return t.liftST};var tf=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,a=0;u!==r;)n[a++]=u,u+=e;return n[a]=u,n}},gg=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},Cg=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},sl=typeof Array.prototype.fill=="function"?gg:Cg,hg=function(){function t(u,a){this.head=u,this.tail=a}var r={};function e(u){return function(a){return new t(u,a)}}function n(u){for(var a=[],i=0,c=u;c!==r;)a[i++]=c.head,c=c.tail;return a}return function(u){return function(a){return n(u(e)(r)(a))}}}(),An=function(t){return t.length},kv=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},yv=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},gv=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var a=e(n[u]);if(r(a))return a}return t}}}},Cv=function(t){return function(r){return function(e){return function(n){for(var u=0,a=n.length;u<a;u++)if(e(n[u]))return t(u);return r}}}};var hv=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var jo=function(t){return function(r){return r.filter(t)}},rf=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var a=r[u];t(a)?e.push(a):n.push(a)}return{yes:e,no:n}}};var Sv=function(){function t(r,e,n,u,a,i){var c,_,s,m,A,$,S;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),_=a,s=c,m=a;_<c&&s<i;)A=u[_],$=u[s],S=e(r(A)($)),S>0?(n[m++]=$,++s):(n[m++]=A,++_);for(;_<c;)n[m++]=u[_++];for(;s<i;)n[m++]=u[s++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var Xo=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),a=0;a<n;a++)u[a]=t(r[a])(e[a]);return u}}};var Tv=function(t){return function(r){return t[r]}};function On(){return[]}var vl=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var ef=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},Rn=function(t){return function(){return t}};function Ev(t){return function(){return t.slice()}}var nf=Ev,ml=Ev,Tg=function(){function t(r,e,n,u,a,i){var c,_,s,m,A,$,S;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),_=a,s=c,m=a;_<c&&s<i;)A=u[_],$=u[s],S=e(r(A)($)),S>0?(n[m++]=$,++s):(n[m++]=A,++_);for(;_<c;)n[m++]=u[_++];for(;s<i;)n[m++]=u[s++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var Mv=function(t){return function(r){return function(){var n=ml(r)();return t(n)(),Rn(n)()}}};var on=function(t){return vl([t])};var wv=y(ve),Fg=pa(vn),xg=ir(ve),Mg=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var wg=function(t){return function(){var e=Qr(t.value1)();return Pr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var af=function(t){return wv(Mg.create(t))(_e(0))},of=function(t){return function(r){return function(){for(var n=_e(!1)();wv(Fg)(Qr(n))();)(function(){var a=wg(t)();if(a instanceof p)return r(a.value0)();if(a instanceof b)return xg(Dn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[a.constructor.name])})();return{}}}};var Lv=function(){function t(u){return[u]}function r(u){return function(a){return[u,a]}}function e(u){return function(a){return function(i){return[u,a,i]}}}function n(u){return function(a){return u.concat(a)}}return function(u){return function(a){return function(i){return function(c){return function(_){function s(m,A){switch(A-m){case 0:return i([]);case 1:return a(t)(c(_[m]));case 2:return u(a(r)(c(_[m])))(c(_[m+1]));case 3:return u(u(a(e)(c(_[m])))(c(_[m+1])))(c(_[m+2]));default:var $=m+Math.floor((A-m)/4)*2;return u(a(n)(s(m,$)))(s($,A))}}return s(0,_.length)}}}}}}();var pC=Rt(Nt),We=function(t){return t.traverse};var yl=function(t){var r=We(t);return function(e){return r(e)(pC)}},ma={traverse:function(t){var r=t.Apply0();return Lv(Jt(r))(y(r.Functor0()))(q(t))},sequence:function(t){return yl(ma)(t)},Functor0:function(){return br},Foldable1:function(){return Ft}};var $C=y($r);var FC=Le();var xC=nt(Vr);var Sl=function(){return Tv},MC=Sl(),Tl=function(){return kv(h(b.value))(function(t){return function(r){return new p({head:t,tail:r})}})}();var vf=function(t){return Sv(t)(function(r){if(r instanceof Mt)return 1;if(r instanceof wt)return 0;if(r instanceof gt)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var mf=function(t){return function(r){return Mv(on(r))(t)()}},jv=function(t){return[t]};var w=function(t){return function(r){return Xo(t)(tf(0)(An(r)-1|0))(r)}};var Fu=function(){return yv(p.create)(b.value)}(),El=function(t){return Fu(t)(An(t)-1|0)};var $l=function(t){return Fu(t)(0)};var Qo=function(){return gv(b.value)(Ra)}();var Fl=function(){return Cv(p.create)(b.value)}();var xl=function(t){return function(r){return $C(MC(r))(Fl(t)(r))}};var Xv=function(){return hv(p.create)(b.value)}(),Ml=function(t){return function(r){return function(e){return e.length===0?[]:tr(e)(function(n){return FC(Xv(n)(e))})(Fl(t(r))(e))}}};var Yo=function(t){return function(r){return xC([t])(r)}};var wC=mr(At(Wa)),wl=function(t){return wC(function(){var r=tr([])(jv);return function(e){return r(t(e))}}())};var Gv=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var xu=function(t){return t.mapWithIndex};var to={mapWithIndex:Gv,Functor0:function(){return br}};var Nn=function(t){return t.foldrWithIndex};var Wn=function(t){return t.foldlWithIndex};var fu=function(t){return t.foldMapWithIndex};var Hn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var bf=function(t){var r=k(t);return function(e){return new Hn(e,r)}};var rr=function(){function t(){}return t.value=new t,t}(),mt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),df=function(t){return t},VC=function(t){return new mt(t.value0,t.value1)};var jC=function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){if(s instanceof mt&&s.value1 instanceof mt&&s.value1.value1 instanceof mt){u=new mt(s,_),n=s.value1.value1.value1;return}var m=function($){return $ instanceof mt&&$.value1 instanceof mt&&$.value1.value1 instanceof rr?new mt(t($.value0),new mt(t($.value1.value0),rr.value)):$ instanceof mt&&$.value1 instanceof rr?new mt(t($.value0),rr.value):rr.value},A=function($){return function(S){var o=$,v=!1,ut;function j(Pt,Ot){if(Pt instanceof mt&&Pt.value0 instanceof mt&&Pt.value0.value1 instanceof mt&&Pt.value0.value1.value1 instanceof mt){o=Pt.value1,S=new mt(t(Pt.value0.value0),new mt(t(Pt.value0.value1.value0),new mt(t(Pt.value0.value1.value1.value0),Ot)));return}return v=!0,Ot}for(;!v;)ut=j(o,S);return ut}};return a=!0,A(_)(m(s))}for(;!a;)i=c(u,n);return i}};return r(rr.value)},Zo={map:jC};var fn={foldr:function(t){return function(r){var e=function(){var u=function(a){return function(i){var c=a,_=!1,s;function m(A,$){if($ instanceof rr)return _=!0,A;if($ instanceof mt){c=new mt($.value0,A),i=$.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[A.constructor.name,$.constructor.name])}for(;!_;)s=m(c,i);return s}};return u(rr.value)}(),n=ur(fn)(mr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){if(s instanceof rr)return a=!0,_;if(s instanceof mt){u=t(_)(s.value0),n=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[s.constructor.name])}for(;!a;)i=c(u,n);return i}};return r},foldMap:function(t){var r=nt(t.Semigroup0()),e=qt(t);return function(n){return ur(fn)(function(u){var a=r(u);return function(i){return a(n(i))}})(e)}}};var XC=sr(fn);var Af={append:function(t){return function(r){return XC(mt.create)(r)(t)}}},Yv=nt(Af);var Zv={append:function(t){return function(r){return new Hn(t.value0,Yv(t.value1)(VC(r)))}}};var tm={alt:Yv,Functor0:function(){return Zo}},Il=function(){return{empty:rr.value,Alt0:function(){return tm}}}();var kf=function(){var t=function(r){return function(e){var n=r,u=!1,a;function i(c,_){if(_ instanceof rr)return u=!0,c;if(_ instanceof mt){n=new mt(_.value0,c),e=_.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[c.constructor.name,_.constructor.name])}for(;!u;)a=i(n,e);return a}};return t(rr.value)}();var om=function(t){return t()};var im=function(t){throw new Error(t)};var fm=function(){return im};var vh=fm(),mh=om,Iu=function(t){return mh(function(){return vh(t)})};var pt=function(){function t(){}return t.value=new t,t}(),Ct=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),jt=function(){function t(r,e,n,u,a,i,c){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i,this.value6=c}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return function(c){return new t(r,e,n,u,a,i,c)}}}}}}},t}(),Lu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),cu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),Pu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Bn=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Ou=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),gf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var _m=function(t){return function(r){return new Ct(pt.value,t,r,pt.value)}};var ri=function(t){var r=$t(t);return function(e){var n=function(u){var a=!1,i;function c(_){if(_ instanceof pt)return a=!0,b.value;if(_ instanceof Ct){var s=r(e)(_.value1);if(s instanceof wt)return a=!0,new p(_.value2);if(s instanceof gt){u=_.value0;return}u=_.value3;return}if(_ instanceof jt){var m=r(e)(_.value1);if(m instanceof wt)return a=!0,new p(_.value2);var A=r(e)(_.value4);if(A instanceof wt)return a=!0,new p(_.value5);if(m instanceof gt){u=_.value0;return}if(A instanceof Mt){u=_.value6;return}u=_.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[_.constructor.name])}for(;!a;)i=c(u);return i};return n}};var Ru={map:function(t){return function(r){if(r instanceof pt)return pt.value;if(r instanceof Ct)return new Ct(y(Ru)(t)(r.value0),r.value1,t(r.value2),y(Ru)(t)(r.value3));if(r instanceof jt)return new jt(y(Ru)(t)(r.value0),r.value1,t(r.value2),y(Ru)(t)(r.value3),r.value4,t(r.value5),y(Ru)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var sm=function(t){return function(r){return function(e){var n=t,u=r,a=!1,i;function c(_,s,m){if(s instanceof rr)return a=!0,m;if(s instanceof mt){if(s.value0 instanceof Lu){n=_,u=s.value1,e=new Ct(m,s.value0.value0,s.value0.value1,s.value0.value2);return}if(s.value0 instanceof cu){n=_,u=s.value1,e=new Ct(s.value0.value0,s.value0.value1,s.value0.value2,m);return}if(s.value0 instanceof Pu){n=_,u=s.value1,e=new jt(m,s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Bn){n=_,u=s.value1,e=new jt(s.value0.value0,s.value0.value1,s.value0.value2,m,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Ou){n=_,u=s.value1,e=new jt(s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5,m);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[s.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[s.constructor.name,m.constructor.name])}for(;!a;)i=c(n,u,e);return i}}},hf=function(t){var r=sm(t),e=$t(t);return function(n){return function(u){var a=function(c){return function(_){var s=c,m=!1,A;function $(S,o){if(S instanceof rr)return m=!0,new Ct(o.value0,o.value1,o.value2,o.value3);if(S instanceof mt){if(S.value0 instanceof Lu)return m=!0,r(S.value1)(new jt(o.value0,o.value1,o.value2,o.value3,S.value0.value0,S.value0.value1,S.value0.value2));if(S.value0 instanceof cu)return m=!0,r(S.value1)(new jt(S.value0.value0,S.value0.value1,S.value0.value2,o.value0,o.value1,o.value2,o.value3));if(S.value0 instanceof Pu){s=S.value1,_=new gf(new Ct(o.value0,o.value1,o.value2,o.value3),S.value0.value0,S.value0.value1,new Ct(S.value0.value2,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof Bn){s=S.value1,_=new gf(new Ct(S.value0.value0,S.value0.value1,S.value0.value2,o.value0),o.value1,o.value2,new Ct(o.value3,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof Ou){s=S.value1,_=new gf(new Ct(S.value0.value0,S.value0.value1,S.value0.value2,S.value0.value3),S.value0.value4,S.value0.value5,new Ct(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[S.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[S.constructor.name,o.constructor.name])}for(;!m;)A=$(s,_);return A}},i=function(c){return function(_){var s=c,m=!1,A;function $(S,o){if(o instanceof pt)return m=!0,a(S)(new gf(pt.value,n,u,pt.value));if(o instanceof Ct){var v=e(n)(o.value1);if(v instanceof wt)return m=!0,r(S)(new Ct(o.value0,n,u,o.value3));if(v instanceof gt){s=new mt(new Lu(o.value1,o.value2,o.value3),S),_=o.value0;return}s=new mt(new cu(o.value0,o.value1,o.value2),S),_=o.value3;return}if(o instanceof jt){var v=e(n)(o.value1);if(v instanceof wt)return m=!0,r(S)(new jt(o.value0,n,u,o.value3,o.value4,o.value5,o.value6));var ut=e(n)(o.value4);if(ut instanceof wt)return m=!0,r(S)(new jt(o.value0,o.value1,o.value2,o.value3,n,u,o.value6));if(v instanceof gt){s=new mt(new Pu(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),S),_=o.value0;return}if(v instanceof Mt&&ut instanceof gt){s=new mt(new Bn(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),S),_=o.value3;return}s=new mt(new Ou(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),S),_=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[S.constructor.name,o.constructor.name])}for(;!m;)A=$(s,_);return A}};return i(rr.value)}}},yh=function(t){var r=sm(t),e=$t(t);return function(n){var u=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(o instanceof rr)return A=!0,v;if(o instanceof mt){if(o.value0 instanceof Lu&&o.value0.value2 instanceof pt&&v instanceof pt)return A=!0,r(o.value1)(new Ct(pt.value,o.value0.value0,o.value0.value1,pt.value));if(o.value0 instanceof cu&&o.value0.value0 instanceof pt&&v instanceof pt)return A=!0,r(o.value1)(new Ct(pt.value,o.value0.value1,o.value0.value2,pt.value));if(o.value0 instanceof Lu&&o.value0.value2 instanceof Ct){m=o.value1,s=new jt(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof cu&&o.value0.value0 instanceof Ct){m=o.value1,s=new jt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v);return}return o.value0 instanceof Lu&&o.value0.value2 instanceof jt?(A=!0,r(o.value1)(new Ct(new Ct(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ct(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof cu&&o.value0.value0 instanceof jt?(A=!0,r(o.value1)(new Ct(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ct(o.value0.value0.value6,o.value0.value1,o.value0.value2,v)))):o.value0 instanceof Pu&&o.value0.value2 instanceof pt&&o.value0.value5 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value0,o.value0.value1,pt.value,o.value0.value3,o.value0.value4,pt.value))):o.value0 instanceof Bn&&o.value0.value0 instanceof pt&&o.value0.value5 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value1,o.value0.value2,pt.value,o.value0.value3,o.value0.value4,pt.value))):o.value0 instanceof Ou&&o.value0.value0 instanceof pt&&o.value0.value3 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value1,o.value0.value2,pt.value,o.value0.value4,o.value0.value5,pt.value))):o.value0 instanceof Pu&&o.value0.value2 instanceof Ct?(A=!0,r(o.value1)(new Ct(new jt(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Bn&&o.value0.value0 instanceof Ct?(A=!0,r(o.value1)(new Ct(new jt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Bn&&o.value0.value5 instanceof Ct?(A=!0,r(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new jt(v,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Ou&&o.value0.value3 instanceof Ct?(A=!0,r(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new jt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,v)))):o.value0 instanceof Pu&&o.value0.value2 instanceof jt?(A=!0,r(o.value1)(new jt(new Ct(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ct(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Bn&&o.value0.value0 instanceof jt?(A=!0,r(o.value1)(new jt(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ct(o.value0.value0.value6,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Bn&&o.value0.value5 instanceof jt?(A=!0,r(o.value1)(new jt(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(v,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new Ct(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Ou&&o.value0.value3 instanceof jt?(A=!0,r(o.value1)(new jt(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new Ct(o.value0.value3.value6,o.value0.value4,o.value0.value5,v)))):(A=!0,Iu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!A;)$=S(m,s);return $}},a=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(v instanceof Ct&&v.value0 instanceof pt&&v.value3 instanceof pt)return A=!0,u(o)(pt.value);if(v instanceof Ct){m=new mt(new cu(v.value0,v.value1,v.value2),o),s=v.value3;return}if(v instanceof jt&&v.value0 instanceof pt&&v.value3 instanceof pt&&v.value6 instanceof pt)return A=!0,u(new mt(new cu(pt.value,v.value1,v.value2),o))(pt.value);if(v instanceof jt){m=new mt(new Ou(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),s=v.value6;return}return A=!0,Iu("The impossible happened in partial function `removeMaxNode`.")}for(;!A;)$=S(m,s);return $}},i=function(_){var s=!1,m;function A($){if($ instanceof Ct&&$.value3 instanceof pt)return s=!0,{key:$.value1,value:$.value2};if($ instanceof Ct){_=$.value3;return}if($ instanceof jt&&$.value6 instanceof pt)return s=!0,{key:$.value4,value:$.value5};if($ instanceof jt){_=$.value6;return}return s=!0,Iu("The impossible happened in partial function `maxNode`.")}for(;!s;)m=A(_);return m},c=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(v instanceof pt)return A=!0,b.value;if(v instanceof Ct){var ut=e(n)(v.value1);if(v.value3 instanceof pt&&ut instanceof wt)return A=!0,new p(new V(v.value2,u(o)(pt.value)));if(ut instanceof wt){var j=i(v.value0);return A=!0,new p(new V(v.value2,a(new mt(new Lu(j.key,j.value,v.value3),o))(v.value0)))}if(ut instanceof gt){m=new mt(new Lu(v.value1,v.value2,v.value3),o),s=v.value0;return}m=new mt(new cu(v.value0,v.value1,v.value2),o),s=v.value3;return}if(v instanceof jt){var Pt=function(){return v.value0 instanceof pt&&v.value3 instanceof pt&&v.value6 instanceof pt}(),ut=e(n)(v.value4),Ot=e(n)(v.value1);if(Pt&&Ot instanceof wt)return A=!0,new p(new V(v.value2,r(o)(new Ct(pt.value,v.value4,v.value5,pt.value))));if(Pt&&ut instanceof wt)return A=!0,new p(new V(v.value5,r(o)(new Ct(pt.value,v.value1,v.value2,pt.value))));if(Ot instanceof wt){var j=i(v.value0);return A=!0,new p(new V(v.value2,a(new mt(new Pu(j.key,j.value,v.value3,v.value4,v.value5,v.value6),o))(v.value0)))}if(ut instanceof wt){var j=i(v.value3);return A=!0,new p(new V(v.value5,a(new mt(new Bn(v.value0,v.value1,v.value2,j.key,j.value,v.value6),o))(v.value3)))}if(Ot instanceof gt){m=new mt(new Pu(v.value1,v.value2,v.value3,v.value4,v.value5,v.value6),o),s=v.value0;return}if(Ot instanceof Mt&&ut instanceof gt){m=new mt(new Bn(v.value0,v.value1,v.value2,v.value4,v.value5,v.value6),o),s=v.value3;return}m=new mt(new Ou(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),s=v.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[v.constructor.name])}for(;!A;)$=S(m,s);return $}};return c(rr.value)}},ue={foldr:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return sr(ue)(t)(t(e.value2)(sr(ue)(t)(r)(e.value3)))(e.value0);if(e instanceof jt)return sr(ue)(t)(t(e.value2)(sr(ue)(t)(t(e.value5)(sr(ue)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return ur(ue)(t)(t(ur(ue)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof jt)return ur(ue)(t)(t(ur(ue)(t)(t(ur(ue)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=qt(t),e=nt(t.Semigroup0());return function(n){return function(u){if(u instanceof pt)return r;if(u instanceof Ct)return e(gr(ue)(t)(n)(u.value0))(e(n(u.value2))(gr(ue)(t)(n)(u.value3)));if(u instanceof jt)return e(gr(ue)(t)(n)(u.value0))(e(n(u.value2))(e(gr(ue)(t)(n)(u.value3))(e(n(u.value5))(gr(ue)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},me={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return Nn(me)(t)(t(e.value1)(e.value2)(Nn(me)(t)(r)(e.value3)))(e.value0);if(e instanceof jt)return Nn(me)(t)(t(e.value1)(e.value2)(Nn(me)(t)(t(e.value4)(e.value5)(Nn(me)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return Wn(me)(t)(t(e.value1)(Wn(me)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof jt)return Wn(me)(t)(t(e.value4)(Wn(me)(t)(t(e.value1)(Wn(me)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=qt(t),e=nt(t.Semigroup0());return function(n){return function(u){if(u instanceof pt)return r;if(u instanceof Ct)return e(fu(me)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(fu(me)(t)(n)(u.value3)));if(u instanceof jt)return e(fu(me)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(fu(me)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(fu(me)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return ue}},gh=Nn(me),Ch=Wn(me),vm=function(){return gh(function(t){return function(r){return function(e){return new mt(t,e)}}})(rr.value)}();var Un=function(){return pt.value}();var Wl=function(t){var r=yh(t);return function(e){return function(n){return tr(n)(jr)(r(e)(n))}}};var Nu=function(t){var r=ri(t),e=Wl(t),n=hf(t);return function(u){return function(a){return function(i){var c=u(r(a)(i));if(c instanceof b)return e(a)(i);if(c instanceof p)return n(a)(c.value0)(i);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[c.constructor.name])}}}};var hh=function(t){var r=Nu(t);return function(e){return function(n){return function(u){var a=function(i){return function(c){return function(_){return r(function(){var s=tr(_)(e(_));return function(m){return p.create(s(m))}}())(i)(c)}}};return Ch(a)(u)(n)}}}};var mm=function(t){return hh(t)(h)};var Dm=ir(ve),Eh=q(Cr),$h=Jt(Ka),Fh=y(ve);var Sf={compact:function(t){return function(){var e=On(),n=af(function(u){return Fu(t)(u)})();return of(n)(function(u){return Dm(function(a){if(a instanceof b)return Eh(0);if(a instanceof p)return on(a.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[a.constructor.name])}(u))})(),Rn(e)()}()},separate:function(t){return function(){var e=On(),n=On(),u=af(function(a){return Fu(t)(a)})();return of(u)(function(a){return Dm(function(i){if(i instanceof lt)return on(i.value0)(e);if(i instanceof ft)return on(i.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[i.constructor.name])}(a))})(),$h(Fh(function(a){return function(i){return{left:a,right:i}}})(Rn(e)))(Rn(n))()}()}};var lu=function(t){return t.compact};var bm=nt(Vr),Ih=ur(Ft);var dm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof lt)return{left:bm(e.left)([u.value0]),right:e.right};if(u instanceof ft)return{right:bm(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return Ih(r)({left:[],right:[]})},partition:rf,filterMap:wl,filter:jo,Compactable0:function(){return Sf},Functor1:function(){return br}};var Xe=function(t){return t.filterMap};var Hl=function(t){return t.filter};var Ph=gr(fn),Oh=ur(fn),Rh=sr(fn);var Nh=function(t){var r=mm(t);return function(e){return function(n){return r(e)(n)}}};var Bl=function(t){return vm(t)};var km=function(t){return _m(t)(void 0)};var Ul=function(t){return{append:Nh(t)}};var ym={foldMap:function(t){var r=Ph(t);return function(e){var n=r(e);return function(u){return n(Bl(u))}}},foldl:function(t){return function(r){var e=Oh(t)(r);return function(n){return e(Bl(n))}}},foldr:function(t){return function(r){var e=Rh(t)(r);return function(n){return e(Bl(n))}}}};var Wh=Un;var gm=function(t){var r=Ul(t);return{mempty:Wh,Semigroup0:function(){return r}}};var Cm=function(t){var r=Wl(t);return function(e){return function(n){return r(e)(n)}}};function hm(t){return function(r){return function(){return setTimeout(r,t)}}}function Sm(t){return function(){clearTimeout(t)}}var Uh=$t(le);var Tm=hm;var qh={eq:function(t){return function(r){return t===r}}},Tf={compare:function(t){return function(r){return Uh(t)(r)}},Eq0:function(){return qh}};var Em=Sm;var pu=function(r){return function(e){return r(e)()}};var ro=function(r){return function(e){return function(){return r(e)}}};var oS=function(t){var r=nt(ul(t));return{append:function(e){return function(n){return pu(function(u){return r(ro(e)(u))(ro(n)(u))})}}}};var Mm=function(t){var r=qt(al(t)),e=oS(t.Semigroup0());return{mempty:pu(function(n){return r}),Semigroup0:function(){return e}}};var iS=y(Su),fS=q(Ln),Im=function(t){return t.sampleOnRight};var ga=function(t){return t.keepLatest};var Lm=function(t){return t.fix},Wu=function(t){var r=Lm(t),e=Im(t),n=t.Alternative0(),u=Wt(n.Plus1().Alt0()),a=q(n.Applicative0()),i=y(t.Filterable1().Functor1());return function(c){return function(_){return function(s){return r(function(m){return e(u(m)(a(_)))(i(mr(c))(s))})}}}};var Hu=function(t){var r=Xe(t.Filterable1()),e=Wu(t);return function(n){return function(u){return function(a){return r(jr)(e(function(i){return function(c){return iS(fS)(n(i.value0)(c))}})(new V(u,b.value))(a))}}}};function zl(t){return function(r){return t===r}}var Pm=zl;var Om=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Rm=un(ge),Ef=Rm(an),Ca=q(ge),Nm=qt(Mm(Jc)),Uu=Qa(Vo),ui=ir(U),pS=nt(Vr),_S=qt(gm(Tf)),sS=Cm(Tf),vS=nt(Ul(Tf)),mS=Rm(ym),DS=Jt(Lr),bS=y(U);var dS=function(t){return function(r){return function(e,n){var u=Ce(b.value)(),a=t(e,function(c){return se(new p(c))(u)()}),i=r(e,function(c){var _=Yr(u)();return Ef(_)(function(s){return function(){return n(c(s))}})()});return function(){return a(),i()}}}},AS=function(t){return function(r){return function(e,n){var u=Ce(b.value)(),a=t(e,function(c){var _=Yr(u)();return Ef(_)(function(s){return function(){return n(s(c))}})()}),i=r(e,function(c){return se(new p(c))(u)()});return function(){return a(),i()}}}},kS=function(t){return function(r,e){var n=Ce(Ca(void 0))(),u=t(r,function(a){var i=Yr(n)();i();var c=a(r,e);return se(c)(n)()});return function(){var i=Yr(n)();return i(),u()}}},hr={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},yS=y(hr),ai=function(t){return function(r){return function(e,n){return r(e,function(u){var a=t(u);if(a instanceof p)return n(a.value0);if(a instanceof b)return void 0;throw new Error("Failed pattern match at FRP.Event (line 201, column 31 - line 203, column 35): "+[a.constructor.name])})}}},Jl=function(t){return ai(function(r){var e=t(r);if(e)return new p(r);if(!e)return b.value;throw new Error("Failed pattern match at FRP.Event (line 129, column 13 - line 131, column 25): "+[e.constructor.name])})},Wm=function(){var r=il(),e=Ce(0)();return{event:function(n,u){var a=Ce(u)(),i=Yr(e)();return fl(i,a,r),Jo(function(c){return c+1|0})(e)(),function(){return se(Nm)(a)(),cl(i,r),void 0}},push:function(n){return ol(r,function(u){var a=Yr(u)();return a(n)})}}},gS=function(t){return function(r,e){var n=Wm(),u=t(n.event),a=n.event(r,e),i=u(r,n.push);return function(){return i(),a()}}},oi={compact:ai(Rt(Nt)),separate:function(t){return{left:ai(function(r){if(r instanceof lt)return new p(r.value0);if(r instanceof ft)return b.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 33): "+[r.constructor.name])})(t),right:ai(function(r){if(r instanceof ft)return new p(r.value0);if(r instanceof lt)return b.value;throw new Error("Failed pattern match at FRP.Event (line 119, column 13 - line 121, column 32): "+[r.constructor.name])})(t)}}},qn={filter:Jl,filterMap:ai,partition:function(t){return function(r){return{yes:Jl(t)(r),no:Jl(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:Xe(qn)(function(){var e=en(p.create)(h(b.value));return function(n){return e(t(n))}}())(r),right:Xe(qn)(function(e){return Uc(t(e))})(r)}}},Compactable0:function(){return oi},Functor1:function(){return hr}},CS=function(t){return function(r){return function(e,n){var u=Ce(b.value)(),a=Uu(On)(),i=Ce(b.value)(),c=Uu(On)(),_=Ce(!0)(),s=t(e,function(S){var o=Yr(_)();if(o)return ui(Uu(on(S)(a)))();se(new p(S))(u)();var v=Yr(i)();return Ef(v)(function(ut){return function(){return n(ut(S))}})()}),m=r(e,function(S){var o=Yr(_)();if(o)return ui(Uu(on(S)(c)))();se(new p(S))(i)();var v=Yr(u)();return Ef(v)(function(ut){return function(){return n(S(ut))}})()});se(!1)(_)();var A=Uu(nf(a))(),$=Uu(nf(c))();return function(){return A.length===0?se(El($))(i)():Qi(A,function(S){return se(new p(S))(u)(),Qi($,function(o){return se(new p(o))(i)(),n(o(S))})})}(),Uu(ef(0)(An(A))([])(a))(),Uu(ef(0)(An($))([])(c))(),function(){return s(),m()}}}},jl=function(t){return function(r){return r}(Xl(321).subscribe)(t)},Xl=Om("backdoor","FRP.Event",function(){var t=function(){var e=il(),n=Ce(0)();return{event:function(u,a){var i=Ce(a)(),c=Yr(n)();return fl(c,i,e),Jo(function(_){return _+1|0})(n)(),function(){return se(Nm)(i)(),cl(c,e),void 0}},push:function(u){return function(){return ol(e,function(a){var i=Yr(a)();return i(u)})}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?Ca(void 0):e(function(a){return function(){return u(a)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?Ca(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(a){return function(){return u(a)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var a=function(i){return function(c){return function(){return i(n,pu(c))}}};return e(a)(function(i){return function(){return u(i)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var a=function(i,c){return i(n,c)};return e(a,u)}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,pu(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,pu(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var a=Vl(722)();return u(e(a.push)(a.event)),Ca(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,a){var i=Wm();return a(n(i.event)),e(u,i.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Vl(740)(),a=jl(e)(u.push)();return{event:u.event,unsubscribe:a}}};return r}(),mailboxed:function(){var r=function(e){var n=Nu(e),u=ri(e);return function(a){return function(i){return function(c,_){var s=Ce(Un)();_(i(function(A){return function($,S){return ui(Yi(n(function(o){if(o instanceof b)return new p([S]);if(o instanceof p)return new p(pS(o.value0)([S]));throw new Error("Failed pattern match at FRP.Event (line 753, column 21 - line 755, column 55): "+[o.constructor.name])})(A))(s))(),ui(Yi(n(function(o){if(o instanceof b)return b.value;if(o instanceof p)return new p(Ml(Pm)(S)(o.value0));throw new Error("Failed pattern match at FRP.Event (line 762, column 21 - line 764, column 69): "+[o.constructor.name])})(A))(s))}}));var m=a(c,function(A){var $=Yr(s)(),S=u(A.address)($);if(S instanceof b)return void 0;if(S instanceof p)return Qi(S.value0,function(o){return o(A.payload)});throw new Error("Failed pattern match at FRP.Event (line 771, column 13 - line 773, column 99): "+[S.constructor.name])});return function(){return ui(se(Un)(s))(),m()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,a){var i=Ce(_S)(),c=n(u,function(_){var s=Ce(b.value)(),m=Tm(e)(function(){a(_);var $=Yr(s)();return tr(Ca(void 0))(function(S){return Jo(sS(S))(i)})($)()})();return se(new p(m))(s)(),Jo(vS(km(m)))(i)()});return function(){var s=Yr(i)();return mS(s)(Em)(),c()}}}};return r}()}}),Vl=Om("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(Xl(437).create)()}}),eo=Xl(583),Hm=Vl(434),Gl=function(t){return function(r){return r}(eo.bus)(t)};var Bm=function(t){return function(r){return r}(eo.makeLemmingEvent)(t)},gn=function(t){return function(r){return r}(eo.makeLemmingEventO)(t)},Um=function(t){return function(r){return r}(eo.makePureEvent)(t)},$f=function(t){return function(r){return r}(eo.memoize)(t)};var qm=function(t){return function(r){return r}(eo.subscribePure)(t)};var hS={apply:function(t){return function(r){return CS(t)(yS(xo)(r))}},Functor0:function(){return hr}};var Yt={pure:function(t){return function(r,e){return e(t),Ca(void 0)}},Apply0:function(){return hS}};var Sr={alt:function(t){return function(r){return function(e,n){return DS(bS(function(u){return function(a){return function(){return u(),a()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return hr}};var d={empty:function(t,r){return Ca(void 0)},Alt0:function(){return Sr}},SS={Applicative0:function(){return Yt},Plus1:function(){return d}},De={keepLatest:kS,sampleOnRight:dS,sampleOnLeft:AS,fix:gS,Alternative0:function(){return SS},Filterable1:function(){return qn}};var TS=function(t){return t},ii=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ES=function(t){return t},Ff=g(),f=ES;var E=function(){return ii.create}();var G=function(){return fi.create}(),Ar=function(){var t=y(ua)(y(U)(h(!0)));return function(r){return TS(t(r))}}(),It=function(t){return t.attr};function zm(t){return()=>t.slice()}function Jm(t){return r=>e=>()=>{e[t]=r}}function Vm(t){return()=>t.slice()}var Kl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var Zl=function(t){var r=Jr(t);return function(){return function(){return function(e){return function(n){return function(u){return Zn(r(e))(n)(u)}}}}}},xf=function(t){var r=Jr(t);return function(){return function(e){return function(n){return tn(r(e))(n)}}}};var Xm=q(Cr);var wf={vb:function(t){return Xm(new V({},{}))}},Gm=function(t){return t.vb},wS={vbus:function(){var t=function(){return function(n){var u=Gm(n);return function(a){return function(i){return Bm(function(c){return function(_){return function(){var m=u(Z.value)();return _(i(m.value0)(m.value1))(),Xm(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},tp=function(){return function(t){return function(r){return function(e){return e()(t)}(wS.vbus)(r)}}};var no=function(t){var r=Zl(t)()();return function(){return function(){return function(e){var n=Gm(e);return function(){return function(){return{vb:function(u){return function(){var i=n(Z.value)(),c=Hm();return new V(r(Z.value)(c.push)(i.value0),r(Z.value)(c.event)(i.value1))}}}}}}}}};var qu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),rp=function(){function t(){}return t.value=new t,t}();var ci=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),uo=function(){function t(){}return t.value=new t,t}(),Lf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ep=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),np=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ha=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),C=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var zu={eq:function(t){return function(r){return t instanceof qu&&r instanceof qu?t.value0===r.value0:t instanceof rp&&r instanceof rp}}};var I=function(t){return new np(t)};var Km=function(t){return new ep(t)};var Qm=t=>r=>r[t];var Sa=function(t){return t.reflectType};var Zm=function(t){return Sa(t)};var ao=br;var tD=function(){return function(t){return t}};var up=function(){return function(){return function(){return function(){return function(){return function(t){var r=Zm(t);return function(e){return Qm(r(e))}}}}}}};var rD=[];var eD=function(){return function(){return function(t){return function(r){return Yo(t)(r)}}}};function nD(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var Ju={};function op(t){return t()}function uD(t){return function(r){return function(e){return function(n){var u=e;function a(c){return function(_){return r(_)(c)(n[c])}}for(var i in n)hasOwnProperty.call(n,i)&&(u=t(u)(a(i)));return u}}}}function Pf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var HS=Object.keys||Pf(function(t){return function(){return t}});function ip(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var fp=function(t){return function(r){return function(){return delete r[t],r}}};var XS=sr(Ft);var GS=Pf(function(t){return function(r){return r}});var KS=nD;var aD=function(t){return function(r){return op(function(){var n=KS(r)();return t(n)(),n})}};var oo=function(t){return function(r){return aD(ip(t)(r))}};var oD=uD(xo),QS=function(t){var r=nt(t.Semigroup0()),e=qt(t);return function(n){return oD(function(u){return function(a){return function(i){return r(u)(n(a)(i))}}})(e)}},iD={foldl:function(t){return oD(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return XS(t)(r)(GS(e))}}},foldMap:function(t){var r=QS(t);return function(e){return r(h(e))}}};var cp=function(t){return aD(fp(t))};function fD(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function cD(t){return function(r){return function(e){return e[t]=r,e}}}function lD(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function pD(t){return function(r){return delete r[t],r}}var _D=ea;var sD=function(){return function(){return function(t){var r=Jr(t);return function(e){return function(n){return function(u){return lD(r(e))(n)(u)}}}}}};var vD=function(){return function(){return function(t){var r=Jr(t);return function(e){return function(n){return function(u){return cD(r(e))(n)(u)}}}}}};var mD=function(t){var r=Jr(t);return function(){return function(){return function(e){return function(n){return pD(r(e))(n)}}}}};var DD=function(t){return function(r){return t(fD(r))}};var tT=ga(De),rT=y(hr),eT=nu(Ft)(d);var nT=At($u),uT=y(br),pp=tD(),aT=xu(to),oT=qc(Gs),io=q(Cr),AD=y(ve),iT=y(ao),kD=un(Cr),yD=kD(an),bD=Oc(_D),fT=vD()()({reflectSymbol:function(){return"id"}}),cT=sD()()({reflectSymbol:function(){return"parent"}}),lT=mD({reflectSymbol:function(){return"raiseId"}})()(),Cn=ir(ve),pT=Yn(Cr),gD=kD(Ft),_T=Rt(Nt),sT=Ir(Ft)(d),vT=Xa(Cr)(Ft),mT=nt(Vr),DT=ur(iD),bT=Dr(Ka),dD=function(){function t(){}return t.value=new t,t}(),_p=function(){function t(){}return t.value=new t,t}(),dT=function(){function t(){}return t.value=new t,t}();var cn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof np)return sT(cn(t)(r)(e))(u.value0);if(u instanceof ha)return tT(rT(cn(t)(r)(e))(u.value0));if(u instanceof C)return n(t.toElt(u.value0));if(u instanceof ep)return gn(function(a,i){var c=_e(Ju)(),_=a(u.value0,function(s){var m=t.ids(e)(),A=_e(io(void 0))(),$=t.ids(e)(),S=_e(io(void 0))(),o=_e([])(),v=_e(io(void 0))(),ut=AD(qu.create)(t.ids(e))(),j=_e(dD.value)(),Pt=a(s,function(Gt){var rt=Qr(j)();if(Gt instanceof Lf&&rt instanceof _p){var yr=Qr(o)();return vT(function(z){return function(){return i(t.doLogic(Gt.value0)(e)(z))}})(yr)()}if(Gt instanceof uo&&rt instanceof _p){Cn(Dn(dT.value)(j))();var fe=function(){var M=Qr(o)();gD(M)(function(we){return yD(r.parent)(function(Nr){return function(){return i(t.disconnectElement(e)({id:we,parent:Nr,scope:ut}))}})})();var st=Qr(A)();st();var Dt=Qr(S)();return Dt(),Cn(Pr(cp(m))(c))(),Cn(Pr(cp($))(c))()};return Cn(Dn(fe)(v))(),fe()}if(Gt instanceof ci&&rt instanceof dD){Cn(Dn(_p.value)(j))();var ot=a(cn(t)(function(){var z={};for(var M in r)({}).hasOwnProperty.call(r,M)&&(z[M]=r[M]);return z.scope=ut,z.raiseId=function(st){return Cn(Pr(mT([st]))(o))},z}())(e)(Gt.value0),i);return Cn(Pr(oo($)(ot))(c))(),Cn(Dn(ot)(S))()}return void 0});Cn(Dn(Pt)(A))(),Cn(Pr(oo(m)(Pt))(c))();var Ot=Qr(v)();return Ot()});return function(){return nT(Qr(c))(DT(bT)(io(void 0)))(),_()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},AT=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(a){var i=function(c){return function(_){return gn(function(s,m){var A=zm(uT(h(""))(pp(u)))(),$=eT(aT(function(Ot){return oT(function(Gt){return function(rt){return rt instanceof C?function(yr){return yr(function(){var fe={};for(var ot in c)({}).hasOwnProperty.call(c,ot)&&(fe[ot]=c[ot]);return fe.parent=b.value,fe.scope=r(c.scope),fe.raiseId=function(z){return Jm(Ot)(z)(A)},fe}())(_)}(n.toElt(rt.value0)):Gt(n.wrapElt(rt))}})})(pp(u))),S=s($,m),o=_e(io(void 0))(),v=AD(Q)(Vm(A))(),ut=iT(function(Ot){return function(Gt){return new C(n.fromEltO1(function(rt){return function(yr){return gn(function(fe,ot){return rt.raiseId(Ot)(),yD(rt.parent)(function(z){return function(){return ot(n.giveNewParent(yr)(DD(bD(fT(Z.value)(Ot))(bD(cT(Z.value)(h(z)))(lT(Z.value))))(rt))(Gt))}})(),io(void 0)})}}))}})(v),j=cn(e)(c)(_)(a(ut)(Q)),Pt=s(j,m);return Cn(Dn(Pt)(o))(),function(){S(),pT(!t)(gD(pp(v))(function(rt){return function(){return m(n.deleteFromCache(_)({id:rt}))}}))();var Gt=Qr(o)();return Gt()}})}};return new C(n.fromEltO2(i))}}}}}}}}},kT=AT()()();var CD=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return kT(!1)(_T)(t)(r)(e)(n)}}}}}}};var vp=g(),yT=tp(),gT=Oe(Pe),CT=y(hr),mp=Fr(),hT=St(zu),ST=q(Cr),sp=q(Yt),TT=k(d),ET=nu(Ft)(d);var Rf=function(){return function(t){var r=yT(t);return function(e){return function(n){return new ha(vp(r(e)(n)))}}}};var SD=function(t){return function(r){var e=function(n){return n instanceof C?new C(gT(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof ha?new ha(CT(e)(n.value0)):r};return e(r)}},L=function(t){return SD(p.create(t))};var Dp=function(){return Lf.create}(),bp=function(){return uo.value}(),$T=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(mp(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:hT})}},toElt:function(t){return t}}},FT=$T(),fo=function(t){return new ci(mp(SD(b.value)(t)))},TD=function(t){return function(r){return new ci(mp(L(t)(r)))}},Vu=function(t){return Gl(t)};var co=function(t){return new ha(vp(Vu(t)))};var xT=function(t){return function(r){return function(e){return cn(FT)(t)(r)(e)}}},MT=function(t){return function(r){var e=function(n){return function(u){return gn(function(a,i){var c=u.ids();n.raiseId(c)();var _=function(){if(n.parent instanceof b){var m=u.ids();return new V(sp(u.makeElement({id:m,parent:b.value,scope:n.scope,tag:"div",pos:b.value,dynFamily:b.value})),m)}if(n.parent instanceof p)return new V(TT,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 339, column 34 - line 353, column 36): "+[n.parent.constructor.name])}(),s=a(ET([_.value0,sp(u.makeDynBeacon({id:c,parent:new p(_.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),sp(u.attributeParent({id:c,parent:_.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),xT({parent:new p(_.value1),scope:n.scope,ez:!1,raiseId:function(m){return ST(void 0)},pos:b.value,dynFamily:new p(c)})(u)(t(r))]),i);return function(){return i(u.removeDynBeacon({id:c})),s()}})}};return new C(e)}},ju=MT(vp(Km));var Wf=y(hr),dp=nu(Ft)(d),lo=q(Yt),$D=k(d),wT=q(Cr),IT=Hu(De),LT=ga(De),PT=Hl(qn),OT=St(Pa),li=g(),Nf=Fr(),RT=St(zu);var NT=Wt(Sr);var WT=nt(Vr);var ED=y(ao);var HT=Gi(),BT=Oe(Pe);var UT=CD()()();var qT=function(t){return function(r){return function(e){return Wf(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},zT=function(t){return function(r){return function(e){return Wf(function(n){return function(u){if(u.value instanceof ii)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof fi)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 62, column 26 - line 64, column 45): "+[u.value.constructor.name])}(Ff(n))})(e)}}},Ge=function(t){var r=function(e){return function(n){return gn(function(u,a){var i=n.ids();e.raiseId(i)();var c=u(dp([lo(n.makeText({id:i,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),qT(n)(i)(t),tr($D)(function(_){return lo(n.attributeParent({id:i,parent:_,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),a);return function(){return a(n.deleteFromCache({id:i})),c()}})}};return new C(r)},Zt=function(t){return Ge(lo(t))},Hf=function(t){return function(r){var e=function(){var n=function(u){return function(a){return new V(u+1|0,new V(a,u))}};return IT(n)(0)}();return ju(LT($f(e(r))(function(n){return Wf(function(u){return dp([Wf(h(uo.value))(PT(function(){var a=OT(u.value1+1|0);return function(i){return a(jr(i))}}())(n)),lo(fo(li(t(u.value0))))])})(n)})))}},JT=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Nf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:RT})}},toElt:function(t){return t}}},FD=JT();var VT=function(t){return function(r){return function(e){return cn(FD)(t)(r)(e)}}};var P=function(t){return function(r){return function(e){var n=function(u){return function(a){return gn(function(i,c){var _=a.ids();u.raiseId(_)();var s=i(NT(dp(WT([lo(a.makeElement({id:_,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),zT(a)(_)(r)])(tr([])(function(m){return[lo(a.attributeParent({id:_,parent:m,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(VT({parent:new p(_),scope:u.scope,ez:!0,raiseId:function(m){return wT(void 0)},pos:b.value,dynFamily:b.value})(a)(e)),c);return function(){return c(a.deleteFromCache({id:_})),s()}})}};return n}}};var xD=function(){return function(t){return function(r){return UT(FD)({fromEltO1:li,fromEltO2:li,toElt:li,wrapElt:function(e){return new C(P("div")($D)(HT(e)))},giveNewParent:function(e){return function(n){return function(u){return Nf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(Nf(e))}})(ED(Nf)(t))(BT(ED(function(e){return e(void 0)}))(li(r)))}}};var Hr=function(){function t(){}return t.value=new t,t}();var Gr={attr:function(t){return function(r){return f({key:"href",value:E(r)})}}};var jT=X(U),kr=function(){function t(){}return t.value=new t,t}(),Xu={attr:function(t){return function(r){return f({key:"click",value:G(h(jT(r)(!0)))})}}};var Kr={attr:function(t){return function(r){return f({key:"click",value:G(r)})}}};var be=function(){function t(){}return t.value=new t,t}();var po={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var MD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var wD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var ID={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var LD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var PD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var OD=g(),_i=function(t){return function(r){return new C(P("a")(t)(OD(I(OD(w(L)(r))))))}};var ND=g(),Bf=function(t){return function(r){return new C(P("div")(t)(ND(I(ND(w(L)(r))))))}},cr=Bf(k(d));var WD=g(),Ku=function(t){return function(r){return new C(P("span")(t)(WD(I(WD(w(L)(r))))))}},si=Ku(k(d));var Ta=function(){function t(){}return t.value=new t,t}();var HD={attr:function(t){return function(r){return f({key:"type",value:E(r)})}}};var qf={attr:function(t){return function(r){return f({key:"type",value:E(r)})}}};var BD=g(),he=function(t){return function(r){return new C(P("button")(t)(BD(I(BD(w(L)(r))))))}},kp=he(k(d));var UD=g(),qD=function(t){return function(r){return new C(P("code")(t)(UD(I(UD(w(L)(r))))))}},Or=qD(k(d));var zD=g(),JD=function(t){return function(r){return new C(P("i")(t)(zD(I(zD(w(L)(r))))))}},yp=JD(k(d));var VD=g(),su=function(t){return function(r){return new C(P("input")(t)(VD(I(VD(w(L)(r))))))}};var jD=g(),XD=function(t){return function(r){return new C(P("li")(t)(jD(I(jD(w(L)(r))))))}},gp=XD(k(d));var GD=g(),KD=function(t){return function(r){return new C(P("pre")(t)(GD(I(GD(w(L)(r))))))}},Rr=KD(k(d));var QD=g(),YD=function(t){return function(r){return new C(P("ul")(t)(QD(I(QD(w(L)(r))))))}},Cp=YD(k(d));var Jn=q(Ln),QT=k(qs),Jf=function(){function t(){}return t.value=new t,t}(),_o=function(){function t(){}return t.value=new t,t}(),so=function(){function t(){}return t.value=new t,t}(),vo=function(){function t(){}return t.value=new t,t}(),mo=function(){function t(){}return t.value=new t,t}(),Do=function(){function t(){}return t.value=new t,t}(),bo=function(){function t(){}return t.value=new t,t}(),Ao=function(){function t(){}return t.value=new t,t}(),ko=function(){function t(){}return t.value=new t,t}(),yo=function(){function t(){}return t.value=new t,t}(),ZD=function(t){return t==="Intro"?Jn(Jf.value):t==="HelloWorld"?Jn(_o.value):t==="SimpleComponent"?Jn(so.value):t==="PURSX1"?Jn(vo.value):t==="PURSX2"?Jn(mo.value):t==="Events"?Jn(Do.value):t==="Effects"?Jn(bo.value):t==="Events2"?Jn(Ao.value):t==="Portals"?Jn(ko.value):t==="SSR"?Jn(yo.value):QT};function hp(){window.scrollTo(0,0)}var ae=hp;var rb=k(d),eb=Wt(Sr),ZT=y(hr),tE=Oe(Pe),rE=nu(Ft)(d),tb=q(Yt),eE=q(Cr),nE={reflectType:function(){return"~"}},uE=Fr(),aE=St(zu),oE=g(),iE=function(t){return t};var Ur={pursxToElement:function(t){return function(r){return function(e){return{cache:Ju,element:function(n){return function(u){return rb}}}}}}},Sp=function(t){return t.pursxToElement},oe=function(){return function(t){var r=Sp(t);return function(e){var n=Sa(e);return function(u){var a=xf(u)();return{pursxToElement:function(i){return function(c){return function(_){var s=r(i)(Z.value)(_);return{cache:oo(n(Z.value))(!0)(s.cache),element:function(m){return function(A){return eb(ZT(tE(Ff)(function($){if($.value instanceof ii)return A.setProp({id:n(Z.value)+("@!%"+i),key:$.key,value:$.value.value0});if($.value instanceof fi)return A.setCb({id:n(Z.value)+("@!%"+i),key:$.key,value:$.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4586, column 38 - line 4596, column 24): "+[$.value.constructor.name])}))(a(Z.value)(_)))(s.element(m)(A))}}}}}}}}}}};var pr=iE,Tp=function(t){var r=Sa(t);return function(e){var n=Sa(e);return function(){return function(){return function(u){var a=Sp(u);return function(i){return function(c){return function(_){var s=function(m){return function(A){return gn(function($,S){var o=A.ids(),v=A.ids();m.raiseId(o)();var ut=a(v)(Z.value)(_),j=$(rE([tb(A.makePursx({id:o,parent:m.parent,cache:ut.cache,dynFamily:m.dynFamily,pos:m.pos,pxScope:v,scope:m.scope,html:r(c),verb:n(i)})),ut.element(m)(A),tr(rb)(function(Pt){return tb(A.attributeParent({id:o,parent:Pt,pos:m.pos,dynFamily:m.dynFamily,ez:!1}))})(m.parent)]),S);return function(){return S(A.deleteFromCache({id:o})),j()}})}};return new C(s)}}}}}}}},qr=function(t){var r=Tp(t)(nE)()();return function(){return function(){return function(e){return r(e)(Z.value)}}}},nb=function(t){var r=qr(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},fE=function(t){return function(r){return function(e){return cn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(n){return function(u){return u.ids}(uE(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:aE})}},toElt:function(n){return n}})(t)(r)(oE(e))}}},ie=function(){return function(t){var r=Sp(t);return function(e){var n=Sa(e);return function(u){var a=xf(u)();return{pursxToElement:function(i){return function(c){return function(_){var s=a(Z.value)(_),m=r(i)(Z.value)(_);return{cache:oo(n(Z.value))(!1)(m.cache),element:function(A){return function($){return eb(fE({parent:new p(n(Z.value)+("@!%"+i)),scope:A.scope,raiseId:function(S){return eE(void 0)},pos:A.pos,ez:!1,dynFamily:b.value})($)(s))(m.element(A)($))}}}}}}}}}}};var Ep=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Do (useState')
import Deku.Do as Deku
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState'
  myDom ~~
    { myli: pure (D.Style := "background-color:rgb(200,240,210);")
    , somethingNew: nut
        ( D.button (pure (D.OnClick := push (Just unit)))
            [ text
                $ (compact event $> "Thanks for clicking me!") <|>
                    pure "I was dynamically inserted"
            ]
        )
    }`,$p=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Fp=`module Main where

import Prelude

import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Do (useState)
import Deku.Do as Deku
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState unit
  portal
    ( map
        ( \\i -> D.video
            (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
            [ D.source
                (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                []
            ]
        )
        ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
            : "https://www.w3schools.com/jsref/movie.mp4"
            : V.empty
        )
    )
    \\v _ -> do
      let
        p0 :: Domable _ _
        p0 = index (Proxy :: _ 0) v

        p1 :: Domable _ _
        p1 = index (Proxy :: _ 1) v

        ev :: Boolean -> Event Boolean
        ev b = fold (\\a _ -> not a) b event

        flips :: Boolean -> Domable _ _
        flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
      D.div_
        [ D.button (pure $ D.OnClick := push unit)
            [ text_ "Switch videos" ]
        , D.div_ [ D.span_ [ flips true ], flips false ]
        ]
`,xp=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,Mp=`module Main where

import Prelude

import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn)
import Deku.DOM as D
import Deku.Do (useDyn_, useState')
import Deku.Do as Deku
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

main :: Effect Unit
main = runInBody Deku.do
  pushAction /\\ actionEvent <- useState'
  let
    accumulateTextAndEmitOnSubmit :: Event String
    accumulateTextAndEmitOnSubmit = compact
      ( mapAccum
          ( \\a b -> case b of
              AddTodo -> a /\\ Just a
              ChangeText s -> s /\\ Nothing
          )
          ""
          actionEvent
      )

    top :: Nut
    top =
      D.div_
        [ D.input
            ( oneOf
                [ textInput $ pure (pushAction <<< ChangeText)
                , keyUp $ pure \\evt -> do
                    when (code evt == "Enter") $ do
                      pushAction AddTodo
                ]
            )
            []
        , D.button
            (click $ pure $ pushAction AddTodo)
            [ text_ "Add" ]
        ]
  D.div_
    [ top
    , dyn
        $ map
            ( \\txt -> Deku.do
                { remove, sendTo } <- useDyn_
                D.div_
                  [ text_ txt
                  , D.button
                      (click $ pure (sendTo 0))
                      [ text_ "Prioritize" ]
                  , D.button
                      (click $ pure remove)
                      [ text_ "Delete" ]
                  ]
            )
            accumulateTextAndEmitOnSubmit
    ]

`,wp=`module Main where

import Prelude

import Data.Tuple.Nested ((/\\))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Do (useState)
import Deku.Do as Deku
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)

main :: Effect Unit
main = runInBody Deku.do
  setButtonClicked /\\ buttonClicked <- useState unit
  setSliderMoved /\\ sliderMoved <- useState 50.0
  let
    countUp :: Event Int
    countUp = fold (\\a _ -> 1 + a) (-1) buttonClicked
  D.div_
    [ D.button
        (click_ (setButtonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            (("Val: " <> _) <<< show <$> countUp)
        ]
    , D.div_
        [ D.input
            (slider (pure setSliderMoved))
            []
        , D.div_
            [ text
                (("Val: " <> _) <<< show <$> sliderMoved)
            ]
        ]
    ]
`,Ip=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Do (useState)
import Deku.Do as Deku
import Deku.Listeners (click_)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody Deku.do
  setUIAction /\\ uiAction <- useState Initial
  let
    split :: { left :: Event Unit, right :: Event String }
    split = separate $ compact $
      map
        ( case _ of
            Loading -> Just $ Left unit
            Result s -> Just $ Right s
            _ -> Nothing
        )
        uiAction
    { left: loading, right: result } = split
  D.div_
    [ D.div_
        [ D.button (click_ (clickCb setUIAction))
            [ text
                ( pure clickText
                    <|> (loading $> "Loading...")
                    <|> (result $> clickText)
                )
            ]
        ]
    , D.div
        ( (pure (D.Style := "display: none;")) <|>
            ( compact
                ( mapAccum
                    ( \\b _ -> (b && false) /\\
                        if b then Just unit else Nothing
                    )
                    true
                    result
                ) $> (D.Style := "display: block;")
            )
        )
        [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
    ]
`,Lp=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  ( D.div_
      [ D.button_ [ text_ "I do nothing" ]
      , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
      , D.div_
          [ D.a (pure $ D.Href := "https://example.com")
              [ text_ "foo " ]
          , D.i_ [ text_ " bar " ]
          , D.span (pure $ D.Style := "font-weight: 800;")
              [ text_ " baz" ]
          ]
      , D.div_
          [ D.div_
              [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
              ]
          ]
      ]
  )`,Pp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Op=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,Rp=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function ub(t){return t.target}function zr(t){return function(){return t.preventDefault()}}function ab(t,r,e){return t==null?r:e(t)}function Np(t){return t}var go=tr(null)(Np),Zr=function(t){return ab(t,b.value,p.create)};var Gf=function(t){return Zr(ub(t))};var ib=ie(),mE=qr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(ib(oe()(ib(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),DE=y(br),bE=q(aa),Kf=q(Yt),fb=It(Gr),dE=It(po),AE=It(qf),kE=Ir(Ft)(d),yE=It(Kr),cb=Dr(Lr),gE=function(){return Z.value}(),lb=function(t){return mE(gE)({code:pr(Rr([Or([Zt(Lp)])])),result:pr(cr([kp([Zt("I do nothing")]),Cp(DE(function(r){return gp(bE(Zt(r)))})(["A","B","C"])),cr([_i(Kf(fb(Hr.value)("https://example.com")))([Zt("foo ")]),yp([Zt(" bar ")]),Ku(Kf(dE(be.value)("font-weight: 800;")))([Zt(" baz")])]),cr([cr([cr([su(Kf(AE(Ta.value)("range")))([])])])])])),next:kE(Kf)([yE(kr.value)(Ar(function(r){return cb(cb(zr(r))(t.dpage(vo.value)))(ae)})),fb(Hr.value)(t.slug+"pursx1/")])})};function pb(t,r,e,n,u){return function(a,i){var c=t.newXHR(),_=t.fixupUrl(u.url,c);if(c.open(u.method||"GET",_,!0,u.username,u.password),u.headers)try{for(var s=0,m;(m=u.headers[s])!=null;s++)c.setRequestHeader(m.field,m.value)}catch($){a($)}var A=function($){return function(){a(new Error($))}};return c.onerror=A(e),c.ontimeout=A(r),c.onload=function(){i({status:c.status,statusText:c.statusText,headers:c.getAllResponseHeaders().split(`\r
`).filter(function($){return $.length>0}).map(function($){var S=$.indexOf(":");return n($.substring(0,S))($.substring(S+2))}),body:c.response})},c.responseType=u.responseType,c.withCredentials=u.withCredentials,c.timeout=u.timeout,c.send(u.content),function($,S,o){try{c.abort()}catch(v){return S(v)}return o()}}}var Qf="application/json",_b="application/x-www-form-urlencoded";var vb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Db=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),db=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Wp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Hp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ab=function(t){return t instanceof Wp?new p(_b):t instanceof Hp?new p(Qf):b.value};var kb=Fr();var Yf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Zf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yb=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),gb=function(t){if(t instanceof Yf||t instanceof Zf)return kb(t.value0);if(t instanceof yb)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var Bp=function(t){if(t instanceof Yf)return"Accept";if(t instanceof Zf)return"Content-Type";if(t instanceof yb)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var Cb=Rt(Nt),Up=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Jp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),tc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hb=function(t){if(t instanceof Up)return"arraybuffer";if(t instanceof qp)return"blob";if(t instanceof zp)return"document";if(t instanceof vi||t instanceof Jp)return"text";if(t instanceof tc)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},Sb=function(t){return t instanceof vi?new p(Qf):b.value};var Tb=function(){return new vi(Cb)}(),Eb=function(){return new tc(Cb)}();var Fb=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function Co(t){return new Error(t)}function mi(t){return t.message}function Di(t){return function(){throw t}}var Tn=function(t){return t.throwError};var bu=function(t){return t.catchError};var ec=function(t){var r=bu(t),e=t.MonadThrow0().Monad0(),n=y(e.Bind1().Apply0().Functor0()),u=q(e.Applicative0());return function(a){return r(n(ft.create)(a))(function(i){return u(lt.create(i))})}};var Xn=function(t){return t.state};var Ai=function(t){var r=Xn(t);return function(e){return r(function(n){var u=e(n);return new V(u,u)})}};var En=function(t){return t.liftEffect};var xE=y(Ba);var Vp=function(t){return t};var jp=function(t){return t};var ic=function(t){return function(r){return t(r)}},Mb=function(t){var r=y(t);return{map:function(e){return ic(r(xE(e)))}}};var Xp=function(t){return{Applicative0:function(){return Ci(t)},Bind1:function(){return Gp(t)}}},Gp=function(t){var r=At(t.Bind1()),e=q(t.Applicative0());return{bind:function(n){return function(u){return r(n)(en(function(a){return e(lt.create(a))})(function(a){var i=u(a);return i}))}},Apply0:function(){return wb(t)}}},wb=function(t){var r=Mb(t.Bind1().Apply0().Functor0());return{apply:Re(Xp(t)),Functor0:function(){return r}}},Ci=function(t){return{pure:function(){var r=q(t.Applicative0());return function(e){return Vp(r(ft.create(e)))}}(),Apply0:function(){return wb(t)}}};var Ib=function(t){var r=Xp(t);return{throwError:function(){var e=q(t.Applicative0());return function(n){return Vp(e(lt.create(n)))}}(),Monad0:function(){return r}}};var Lb=function(t){var r=nt(t);return function(e){var n=e.Bind1(),u=At(n),a=q(e.Applicative0()),i=Mb(n.Apply0().Functor0());return{alt:function(c){return function(_){return u(c)(function(s){if(s instanceof ft)return a(new ft(s.value0));if(s instanceof lt)return u(_)(function(m){if(m instanceof ft)return a(new ft(m.value0));if(m instanceof lt)return a(new lt(r(s.value0)(m.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[m.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[s.constructor.name])})}},Functor0:function(){return i}}}};var wE=Fr();var Pb=function(t){return wE(jp(t))};function Kp(t){return JSON.stringify(t)}function Qp(t){return function(r){return JSON.stringify(r,null,t)}}var Ob=Ju;function Nb(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var Wb=function(t){return Nb(lt.create,ft.create,t)};var cc=function(t){return function(r){return function(e){return e.replace(t,r)}}};var Yp=function(t){return function(r){return r.join(t)}};function BE(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function Ub(t,r,e){try{return r(BE(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var lc=function(){return Kl(Ub)(h(b.value))(p.create)}();var zE=Jt(la),qb=y($r),JE=We(ma)(Ln);var VE=function(t){return t};var zb=function(){var t=function(n){if(n.value1 instanceof b)return lc(n.value0);if(n.value1 instanceof p)return zE(qb(function(u){return function(a){return u+("="+a)}})(lc(n.value0)))(lc(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=qb(Yp("&")),e=JE(t);return function(n){return r(e(VE(n)))}}();var XE=function(){function t(){}return t.value=new t,t}(),Si=function(){function t(){}return t.value=new t,t}(),GE=function(){function t(){}return t.value=new t,t}(),Jb=function(){function t(){}return t.value=new t,t}(),Vb=function(){function t(){}return t.value=new t,t}(),jb=function(){function t(){}return t.value=new t,t}(),KE=function(){function t(){}return t.value=new t,t}(),QE=function(){function t(){}return t.value=new t,t}(),YE=function(){function t(){}return t.value=new t,t}(),ZE=function(){function t(){}return t.value=new t,t}(),t$=function(){function t(){}return t.value=new t,t}(),r$=function(){function t(){}return t.value=new t,t}(),e$=function(){function t(){}return t.value=new t,t}(),n$=function(){function t(){}return t.value=new t,t}(),u$=function(){function t(){}return t.value=new t,t}(),Xb=function(){function t(){}return t.value=new t,t}();var a$=function(t){return t},o$={show:function(t){if(t instanceof XE)return"OPTIONS";if(t instanceof Si)return"GET";if(t instanceof GE)return"HEAD";if(t instanceof Jb)return"POST";if(t instanceof Vb)return"PUT";if(t instanceof jb)return"DELETE";if(t instanceof KE)return"TRACE";if(t instanceof QE)return"CONNECT";if(t instanceof YE)return"PROPFIND";if(t instanceof ZE)return"PROPPATCH";if(t instanceof t$)return"MKCOL";if(t instanceof r$)return"COPY";if(t instanceof e$)return"MOVE";if(t instanceof n$)return"LOCK";if(t instanceof u$)return"UNLOCK";if(t instanceof Xb)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Gb=en(_t(o$))(a$);var Yb=function(){var t=bf(Il);return function(r){return df(t(r))}}();var Zb=function(t){return t.value0};var He=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",a="Async",i="Bind",c="Bracket",_="Fork",s="Sequential",m="Map",A="Apply",$="Alt",S="Cons",o="Resume",v="Release",ut="Finalizer",j="Finalized",Pt="Forked",Ot="Fiber",Gt="Thunk";function rt(ct,ar,xr,lr){this.tag=ct,this._1=ar,this._2=xr,this._3=lr}function yr(ct){var ar=function(xr,lr,kt){return new rt(ct,xr,lr,kt)};return ar.tag=ct,ar}function fe(ct){return new rt(r,void 0)}function ot(ct){try{ct()}catch(ar){setTimeout(function(){throw ar},0)}}function z(ct,ar,xr){try{return ar(xr())}catch(lr){return ct(lr)}}function M(ct,ar,xr){try{return ar(xr)()}catch(lr){return xr(ct(lr))(),fe}}var st=function(){var ct=1024,ar=0,xr=0,lr=new Array(ct),kt=!1;function tt(){var fr;for(kt=!0;ar!==0;)ar--,fr=lr[xr],lr[xr]=void 0,xr=(xr+1)%ct,fr();kt=!1}return{isDraining:function(){return kt},enqueue:function(fr){var zt,Er;ar===ct&&(Er=kt,tt(),kt=Er),lr[(xr+ar)%ct]=fr,ar++,kt||tt()}}}();function Dt(ct){var ar={},xr=0,lr=0;return{register:function(kt){var tt=xr++;kt.onComplete({rethrow:!0,handler:function(fr){return function(){lr--,delete ar[tt]}}})(),ar[tt]=kt,lr++},isEmpty:function(){return lr===0},killAll:function(kt,tt){return function(){if(lr===0)return tt();var fr=0,zt={};function Er(vr){zt[vr]=ar[vr].kill(kt,function(Wr){return function(){delete zt[vr],fr--,ct.isLeft(Wr)&&ct.fromLeft(Wr)&&setTimeout(function(){throw ct.fromLeft(Wr)},0),fr===0&&tt()}})()}for(var re in ar)ar.hasOwnProperty(re)&&(fr++,Er(re));return ar={},xr=0,lr=0,function(vr){return new rt(u,function(){for(var Wr in zt)zt.hasOwnProperty(Wr)&&zt[Wr]()})}}}}}var we=0,Nr=1,ku=2,wa=3,Ia=4,Te=5,Eo=6;function Pc(ct,ar,xr){var lr=0,kt=we,tt=xr,fr=null,zt=null,Er=null,re=null,vr=null,Wr=0,ra=0,Ze=null,yu=!0;function gu(yt){for(var ht,Kt,er;;)switch(ht=null,Kt=null,er=null,kt){case ku:kt=Nr;try{tt=Er(tt),re===null?Er=null:(Er=re._1,re=re._2)}catch(ce){kt=Te,fr=ct.left(ce),tt=null}break;case wa:ct.isLeft(tt)?(kt=Te,fr=tt,tt=null):Er===null?kt=Te:(kt=ku,tt=ct.fromRight(tt));break;case Nr:switch(tt.tag){case i:Er&&(re=new rt(S,Er,re)),Er=tt._2,kt=Nr,tt=tt._1;break;case r:Er===null?(kt=Te,tt=ct.right(tt._1)):(kt=ku,tt=tt._1);break;case u:kt=wa,tt=z(ct.left,ct.right,tt._1);break;case a:kt=Ia,tt=M(ct.left,tt._1,function(ce){return function(){lr===yt&&(lr++,st.enqueue(function(){lr===yt+1&&(kt=wa,tt=ce,gu(lr))}))}});return;case e:kt=Te,fr=ct.left(tt._1),tt=null;break;case n:Er===null?vr=new rt(S,tt,vr,zt):vr=new rt(S,tt,new rt(S,new rt(o,Er,re),vr,zt),zt),Er=null,re=null,kt=Nr,tt=tt._1;break;case c:Wr++,Er===null?vr=new rt(S,tt,vr,zt):vr=new rt(S,tt,new rt(S,new rt(o,Er,re),vr,zt),zt),Er=null,re=null,kt=Nr,tt=tt._1;break;case _:kt=wa,ht=Pc(ct,ar,tt._2),ar&&ar.register(ht),tt._1&&ht.run(),tt=ct.right(ht);break;case s:kt=Nr,tt=Yk(ct,ar,tt._1);break}break;case Te:if(Er=null,re=null,vr===null)kt=Eo,tt=zt||fr||tt;else switch(ht=vr._3,er=vr._1,vr=vr._2,er.tag){case n:zt&&zt!==ht&&Wr===0?kt=Te:fr&&(kt=Nr,tt=er._2(ct.fromLeft(fr)),fr=null);break;case o:zt&&zt!==ht&&Wr===0||fr?kt=Te:(Er=er._1,re=er._2,kt=ku,tt=ct.fromRight(tt));break;case c:Wr--,fr===null&&(Kt=ct.fromRight(tt),vr=new rt(S,new rt(v,er._2,Kt),vr,ht),(zt===ht||Wr>0)&&(kt=Nr,tt=er._3(Kt)));break;case v:vr=new rt(S,new rt(j,tt,fr),vr,zt),kt=Nr,zt&&zt!==ht&&Wr===0?tt=er._1.killed(ct.fromLeft(zt))(er._2):fr?tt=er._1.failed(ct.fromLeft(fr))(er._2):tt=er._1.completed(ct.fromRight(tt))(er._2),fr=null,Wr++;break;case ut:Wr++,vr=new rt(S,new rt(j,tt,fr),vr,zt),kt=Nr,tt=er._1;break;case j:Wr--,kt=Te,tt=er._1,fr=er._2;break}break;case Eo:for(var wr in Ze)Ze.hasOwnProperty(wr)&&(yu=yu&&Ze[wr].rethrow,ot(Ze[wr].handler(tt)));Ze=null,zt&&fr?setTimeout(function(){throw ct.fromLeft(fr)},0):ct.isLeft(tt)&&yu&&setTimeout(function(){if(yu)throw ct.fromLeft(tt)},0);return;case we:kt=Nr;break;case Ia:return}}function Mr(yt){return function(){if(kt===Eo)return yu=yu&&yt.rethrow,yt.handler(tt)(),function(){};var ht=ra++;return Ze=Ze||{},Ze[ht]=yt,function(){Ze!==null&&delete Ze[ht]}}}function Et(yt,ht){return function(){if(kt===Eo)return ht(ct.right(void 0))(),function(){};var Kt=Mr({rethrow:!1,handler:function(){return ht(ct.right(void 0))}})();switch(kt){case we:zt=ct.left(yt),kt=Eo,tt=zt,gu(lr);break;case Ia:zt===null&&(zt=ct.left(yt)),Wr===0&&(kt===Ia&&(vr=new rt(S,new rt(ut,tt(yt)),vr,zt)),kt=Te,tt=null,fr=null,gu(++lr));break;default:zt===null&&(zt=ct.left(yt)),Wr===0&&(kt=Te,tt=null,fr=null)}return Kt}}function Xt(yt){return function(){var ht=Mr({rethrow:!1,handler:yt})();return kt===we&&gu(lr),ht}}return{kill:Et,join:Xt,onComplete:Mr,isSuspended:function(){return kt===we},run:function(){kt===we&&(st.isDraining()?gu(lr):st.enqueue(function(){gu(lr)}))}}}function Qk(ct,ar,xr,lr){var kt=0,tt={},fr=0,zt={},Er=new Error("[ParAff] Early exit"),re=null,vr=t;function Wr(Mr,Et,Xt){var yt=Et,ht=null,Kt=null,er=0,wr={},ce,$o;t:for(;;)switch(ce=null,yt.tag){case Pt:if(yt._3===t&&(ce=tt[yt._1],wr[er++]=ce.kill(Mr,function(Zk){return function(){er--,er===0&&Xt(Zk)()}})),ht===null)break t;yt=ht._2,Kt===null?ht=null:(ht=Kt._1,Kt=Kt._2);break;case m:yt=yt._2;break;case A:case $:ht&&(Kt=new rt(S,ht,Kt)),ht=yt,yt=yt._1;break}if(er===0)Xt(ct.right(void 0))();else for($o=0,ce=er;$o<ce;$o++)wr[$o]=wr[$o]();return wr}function ra(Mr,Et,Xt){var yt,ht,Kt,er,wr,ce;ct.isLeft(Mr)?(yt=Mr,ht=null):(ht=Mr,yt=null);t:for(;;){if(Kt=null,er=null,wr=null,ce=null,re!==null)return;if(Et===null){lr(yt||ht)();return}if(Et._3!==t)return;switch(Et.tag){case m:yt===null?(Et._3=ct.right(Et._1(ct.fromRight(ht))),ht=Et._3):Et._3=yt;break;case A:if(Kt=Et._1._3,er=Et._2._3,yt){if(Et._3=yt,wr=!0,ce=fr++,zt[ce]=Wr(Er,yt===Kt?Et._2:Et._1,function(){return function(){delete zt[ce],wr?wr=!1:Xt===null?ra(yt,null,null):ra(yt,Xt._1,Xt._2)}}),wr){wr=!1;return}}else{if(Kt===t||er===t)return;ht=ct.right(ct.fromRight(Kt)(ct.fromRight(er))),Et._3=ht}break;case $:if(Kt=Et._1._3,er=Et._2._3,Kt===t&&ct.isLeft(er)||er===t&&ct.isLeft(Kt))return;if(Kt!==t&&ct.isLeft(Kt)&&er!==t&&ct.isLeft(er))yt=ht===Kt?er:Kt,ht=null,Et._3=yt;else if(Et._3=ht,wr=!0,ce=fr++,zt[ce]=Wr(Er,ht===Kt?Et._2:Et._1,function(){return function(){delete zt[ce],wr?wr=!1:Xt===null?ra(ht,null,null):ra(ht,Xt._1,Xt._2)}}),wr){wr=!1;return}break}Xt===null?Et=null:(Et=Xt._1,Xt=Xt._2)}}function Ze(Mr){return function(Et){return function(){delete tt[Mr._1],Mr._3=Et,ra(Et,Mr._2._1,Mr._2._2)}}}function yu(){var Mr=Nr,Et=xr,Xt=null,yt=null,ht,Kt;t:for(;;)switch(ht=null,Kt=null,Mr){case Nr:switch(Et.tag){case m:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt(m,Et._1,t,t),Et=Et._2;break;case A:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt(A,t,Et._2,t),Et=Et._1;break;case $:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt($,t,Et._2,t),Et=Et._1;break;default:Kt=kt++,Mr=Te,ht=Et,Et=new rt(Pt,Kt,new rt(S,Xt,yt),t),ht=Pc(ct,ar,ht),ht.onComplete({rethrow:!1,handler:Ze(Et)})(),tt[Kt]=ht,ar&&ar.register(ht)}break;case Te:if(Xt===null)break t;Xt._1===t?(Xt._1=Et,Mr=Nr,Et=Xt._2,Xt._2=t):(Xt._2=Et,Et=Xt,yt===null?Xt=null:(Xt=yt._1,yt=yt._2))}for(vr=Et,Kt=0;Kt<kt;Kt++)tt[Kt].run()}function gu(Mr,Et){re=ct.left(Mr);var Xt;for(var yt in zt)if(zt.hasOwnProperty(yt)){Xt=zt[yt];for(yt in Xt)Xt.hasOwnProperty(yt)&&Xt[yt]()}zt=null;var ht=Wr(Mr,vr,Et);return function(Kt){return new rt(a,function(er){return function(){for(var wr in ht)ht.hasOwnProperty(wr)&&ht[wr]();return fe}})}}return yu(),function(Mr){return new rt(a,function(Et){return function(){return gu(Mr,Et)}})}}function Yk(ct,ar,xr){return new rt(a,function(lr){return function(){return Qk(ct,ar,xr,lr)}})}return rt.EMPTY=t,rt.Pure=yr(r),rt.Throw=yr(e),rt.Catch=yr(n),rt.Sync=yr(u),rt.Async=yr(a),rt.Bind=yr(i),rt.Bracket=yr(c),rt.Fork=yr(_),rt.Seq=yr(s),rt.ParMap=yr(m),rt.ParApply=yr(A),rt.ParAlt=yr($),rt.Fiber=Pc,rt.Supervisor=Dt,rt.Scheduler=st,rt.nonCanceler=fe,rt}(),rd=He.Pure,ed=He.Throw;function nd(t){return function(r){return He.Catch(t,r)}}function ud(t){return function(r){return r.tag===He.Pure.tag?He.Pure(t(r._1)):He.Bind(r,function(e){return He.Pure(t(e))})}}function ad(t){return function(r){return He.Bind(t,r)}}var od=He.Sync;var Ti=He.Async;function id(t,r){return function(){return He.Fiber(t,null,r)}}var i$=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return He.Async(function(u){return function(){var a=t(n,u(e()));return function(){return He.Sync(function(){return e(r(n,a))})}}})}}(),f$=He.Seq;var C$=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var h$=ir(U);var e_={map:ud};var S$=function(){var t=function(n){if(n instanceof ft)return n.value0;if(n instanceof lt)return Iu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof lt)return n.value0;if(n instanceof ft)return Iu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof lt)return!0;if(n instanceof ft)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:lt.create,right:ft.create}}(),T$=function(t){return id(S$,t)},E$=function(t){return function(){var e=T$(t)();return e.run(),e}},n_=function(t){return h$(E$(t))};var u_={Applicative0:function(){return pc},Bind1:function(){return a_}},a_={bind:ad,Apply0:function(){return _d(0)}},pc={pure:rd,Apply0:function(){return _d(0)}},_d=C$("applyAff","Effect.Aff",function(){return{apply:Re(u_),Functor0:function(){return e_}}});var $$=q(pc);var o_={liftEffect:od,Monad0:function(){return u_}};var F$={throwError:ed,Monad0:function(){return u_}},sd={catchError:nd,MonadThrow0:function(){return F$}};var vd=h($$(void 0));var md=function(t){return Ti(function(r){return function(){var n=t(function(u){return r(lt.create(u))()},function(u){return r(ft.create(u))()});return function(u){return Ti(function(a){return function(){return n(u,function(c){return a(lt.create(c))()},function(c){return a(ft.create(c))()}),vd}})}}})};function sc(t){return Object.prototype.toString.call(t).slice(8,-1)}var Dd=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var bd=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Fe=function(t){return t};var vc=isFinite;var i_=Math.floor;var Ei=function(t){return function(r){return t%r}};var dd=wn(Po),Ad=ru(Po);var mc=function(){return bd(p.create)(b.value)}(),R$=function(t){if(!vc(t))return 0;if(t>=Fe(dd))return dd;if(t<=Fe(Ad))return Ad;if(Br)return pe(0)(mc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var c_=function(t){return R$(i_(t))};var z$=_t(Je),J$=_t(sn);var l_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),$d=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),V$=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),j$=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Yu=Q,X$=Q;var bc=function(t){if(t instanceof l_)return t.value0;if(t instanceof V$)return"Error at array index "+(J$(t.value0)+(": "+bc(t.value1)));if(t instanceof j$)return"Error at property "+(z$(t.value0)+(": "+bc(t.value1)));if(t instanceof $d)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var p_=function(t){var r=Tn(Ib(t));return function(e){return r(Yb(e))}};var Fd=function(t){var r=q(Ci(t)),e=p_(t);return function(n){return function(u){if(sc(u)===n)return r(X$(u));if(Br)return e(new $d(n,sc(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var __=q(Ci(Ne)),K$=p_(Ne),Fa=Fd(Ne),xd=Wt(Lb(Zv)(Ne)),Q$=Hi(Gp(Ne)),dc=y($r),Y$=Tu(Ft)(vn),Z$=St(xn),tF=eu(ye),rF=y(br),eF=qe(e_),nF=ec(sd),uF=q(pc);var s_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),v_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),m_=function(){function t(){}return t.value=new t,t}(),D_=function(){function t(){}return t.value=new t,t}(),b_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Md=function(t){return function(r){var e=function(m){return m===""?__(Ob):en(function(A){return K$(l_.create(A))})(__)(Wb(m))},n=function(){if(r.responseFormat instanceof Up)return Fa("ArrayBuffer");if(r.responseFormat instanceof qp)return Fa("Blob");if(r.responseFormat instanceof zp)return function(m){return xd(Fa("Document")(m))(xd(Fa("XMLDocument")(m))(Fa("HTMLDocument")(m)))};if(r.responseFormat instanceof vi)return Q$(function(m){return r.responseFormat.value0(e(m))})(Fa("String"));if(r.responseFormat instanceof Jp)return Fa("String");if(r.responseFormat instanceof tc)return h(r.responseFormat.value0(__(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(m){if(m instanceof vb)return new ft(m.value0(Yu));if(m instanceof mb)return new ft(Yu(m.value0));if(m instanceof Db)return new ft(Yu(m.value0));if(m instanceof bb)return new ft(Yu(m.value0));if(m instanceof db)return new ft(Yu(m.value0));if(m instanceof Wp)return Bc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(dc(Yu)(zb(m.value0)));if(m instanceof Hp)return new ft(Yu(Kp(m.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[m.constructor.name])},a=function(m){return function(A){return m instanceof p&&!Y$(Fo(Z$)(Bp)(m.value0))(A)?mf(A)(m.value0):A}},i=function(m){return a(dc(Zf.create)(tF(Ab)(m)))(a(dc(Yf.create)(Sb(r.responseFormat)))(r.headers))},c=function(m){return{method:Gb(r.method),url:r.url,headers:rF(function(A){return{field:Bp(A),value:gb(A)}})(i(r.content)),content:m,responseType:hb(r.responseFormat),username:go(r.username),password:go(r.password),withCredentials:r.withCredentials,timeout:pe(0)(dc(function(A){return A})(r.timeout))}},_=function(m){return eF(nF(md(pb(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",Fb.create,c(m)))))(function(A){if(A instanceof ft){var $=Pb(n(A.value0.body));if($ instanceof lt)return new lt(new v_(Zb($.value0),A.value0));if($ instanceof ft)return new ft({body:$.value0,headers:A.value0.headers,status:A.value0.status,statusText:A.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[$.constructor.name])}if(A instanceof lt)return new lt(function(){var S=mi(A.value0),o=S==="AffjaxTimeoutErrorMessageIdent";if(o)return m_.value;var v=S==="AffjaxRequestFailedMessageIdent";return v?D_.value:new b_(A.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[A.constructor.name])})};if(r.content instanceof b)return _(go(b.value));if(r.content instanceof p){var s=u(r.content.value0);if(s instanceof ft)return _(go(new p(s.value0)));if(s instanceof lt)return uF(new lt(new s_(s.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[s.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},d_=function(t){if(t instanceof s_)return"There was a problem with the request content: "+t.value0;if(t instanceof v_)return"There was a problem with the response body: "+bc(t.value0);if(t instanceof m_)return"There was a problem making the request: timeout";if(t instanceof D_)return"There was a problem making the request: request failed";if(t instanceof b_)return"There was a problem making the request: "+mi(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Zu=function(){return{method:new lt(Si.value),url:"/",headers:[],content:b.value,username:b.value,password:b.value,withCredentials:!1,responseFormat:Eb,timeout:b.value}}();var A_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var Id=Md(A_);var iF=At(a_),Ld=En(o_),Pd=ie(),fF=qr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Pd(oe()(Pd(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),k_=Xe(qn),Fi=q(Yt),Od=It(Kr),Ac=Wt(Sr),y_=X(hr),Rd=It(ID),cF=lu(oi),lF=Hu(De),pF=Ir(Ft)(d),Nd=Dr(Lr),_F=It(Gr);var Hd=function(){function t(){}return t.value=new t,t}(),g_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sF=function(){return Z.value}(),Wd="Click to get some random user data.",vF=function(t){return Ar(h(function(){return t(Hd.value)(),n_(iF(Id({method:new lt(Si.value),url:"https://randomuser.me/api/",headers:Zu.headers,content:Zu.content,username:Zu.username,password:Zu.password,withCredentials:Zu.withCredentials,responseFormat:Tb,timeout:Zu.timeout}))(function(e){if(e instanceof lt)return Ld(t(new g_("GET /api response failed to decode: "+d_(e.value0))));if(e instanceof ft)return Ld(t(new g_(Qp(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},Bd=function(t){return fF(sF)({code:pr(Rr([Or([Zt(Ip)])])),result:pr(co(function(r){return function(e){var n=k_(function(i){return i instanceof Hd?new p(new lt(void 0)):i instanceof g_?new p(new ft(i.value0)):b.value})(e),u=k_(function(i){return i instanceof ft?new p(i.value0):b.value})(n),a=k_(function(i){return i instanceof lt?new p(void 0):b.value})(n);return cr([cr([he(Fi(Od(kr.value)(vF(r))))([Ge(Ac(Fi(Wd))(Ac(y_(a)("Loading..."))(y_(u)(Wd))))])]),Bf(Ac(Fi(Rd(be.value)("display: none;")))(y_(cF(lF(function(i){return function(c){return new V(i&&!1,function(){return i?new p(void 0):b.value}())}})(!0)(u)))(Rd(be.value)("display: block;"))))([Rr([Or([Ge(Ac(Fi(""))(u))])])])])}})),next:pF(Fi)([Od(kr.value)(Ar(function(r){return Nd(Nd(zr(r))(t.dpage(mo.value)))(ae)})),_F(Hr.value)(t.slug+"pursx2/")])})};var C_=function(){function t(){}return t.value=new t,t}(),Ud={attr:function(t){return function(r){return f({key:"controls",value:E(r)})}}};var xi=function(){function t(){}return t.value=new t,t}();var kc={attr:function(t){return function(r){return f({key:"input",value:G(r)})}}};var yc=function(){function t(){}return t.value=new t,t}();var h_={attr:function(t){return function(r){return f({key:"keyup",value:G(r)})}}};var S_=function(){function t(){}return t.value=new t,t}();var Jd={attr:function(t){return function(r){return f({key:"src",value:E(r)})}}};var T_=function(){function t(){}return t.value=new t,t}(),Vd={attr:function(t){return function(r){return f({key:"width",value:E(r)})}}};var jd=g(),Xd=function(t){return function(r){return new C(P("p")(t)(jd(I(jd(w(L)(r))))))}},E_=Xd(k(d));var Gd=g(),$_=function(t){return function(r){return new C(P("source")(t)(Gd(I(Gd(w(L)(r))))))}};var Kd=g(),F_=function(t){return function(r){return new C(P("video")(t)(Kd(I(Kd(w(L)(r))))))}};function gc(t){return function(){return t.value}}function x_(t){return function(){return t.valueAsNumber}}function Yd(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var a=n;a!=null;){var i=Object.getPrototypeOf(a),c=i.constructor.name;if(c===e)return r(n);if(c==="Object")return t;a=i}return t}var at=function(t){return function(r){return Yd(b.value,p.create,t,r)}};var Cc=at("HTMLInputElement");function M_(t){return t.code}var w_=at("KeyboardEvent");var rA=y(hr),IF=It(kc),LF=un(ge)(an),PF=At(ye),OF=Bi(va),RF=Wt(Sr),eA=q(Yt),NF=It(qf);var hc=function(){var t=RF(eA(NF(Ta.value)("range"))),r=rA(function(e){return IF(xi.value)(Ar(function(n){return LF(PF(Gf(n))(Cc))(OF(x_)(e))}))});return function(e){return t(r(e))}}();var I_=function(t){return rA(It(t)(kr.value))},Sc=function(t){var r=I_(t);return function(e){return r(eA(e))}};var nA=ie(),WF=qr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(nA(oe()(nA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),HF=Rf()(no({reflectSymbol:function(){return"buttonClicked"}})()()(no({reflectSymbol:function(){return"sliderMoved"}})()()(wf)()())()()),BF=Sc(Xu),P_=Wt(Sr),Mi=q(Yt),uA=y(hr),aA=nt(oa),UF=_t(sn),qF=Wu(De),zF=_t(Oo),JF=Ir(Ft)(d),VF=It(Kr),oA=Dr(Lr),jF=It(Gr),XF=function(){return Z.value}(),iA=function(t){return WF(XF)({code:pr(Rr([Or([Zt(wp)])])),result:pr(HF(Z.value)(function(r){return function(e){return cr([he(BF(r.buttonClicked(void 0)))([Zt("Click")]),cr([Ge(P_(Mi("Val: 0"))(uA(function(){var n=aA("Val: ");return function(u){return n(UF(u))}}())(qF(function(n){return function(u){return 1+n|0}})(-1)(P_(Mi(void 0))(e.buttonClicked)))))]),cr([su(hc(Mi(r.sliderMoved)))([]),cr([Ge(P_(Mi("Val: 50.0"))(uA(function(){var n=aA("Val: ");return function(u){return n(zF(u))}}())(e.sliderMoved)))])])])}})),next:JF(Mi)([VF(kr.value)(Ar(function(r){return oA(oA(zr(r))(t.dpage(bo.value)))(ae)})),jF(Hr.value)(t.slug+"effects/")])})};var KF=Wt(Sr),QF=q(Yt);var YF=ga(De);var O_=function(t){return function(r){return t(r)}};var ZF=function(t){return function(r){return YF(O_(function(e){return Vu(Ja(e))})(function(e){return KF(QF(TD(t)(r({remove:e.value0(bp),sendTo:function(n){return e.value0(Dp(n))}}))))(e.value1)}))}},fA=ZF(0);var cA=ie(),rx=qr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(cA(oe()(cA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),ex=Oe(Pe),Tc=Wt(Sr),Kn=q(Yt),lA=Ir(Ft)(d),nx=It(wD),ux=It(kc),pA=un(ge)(an),ax=At(ye),ox=Bi(va),ix=It(h_),fx=Yn(ge),R_=It(LD),_A=It(Kr),cx=y(hr),lx=It(po),sA=I_(Xu),px=Xe(qn),_x=Hu(De),vA=Dr(Lr),sx=It(Gr);var vx=function(){function t(){}return t.value=new t,t}(),N_=function(){function t(){}return t.value=new t,t}(),mA=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mx=function(){return Z.value}(),DA=function(t){return rx(mx)({code:pr(Rr([Or([Zt(Mp)])])),result:pr(co(function(r){return ex(function(e){return Tc(Kn(vx.value))(e)})(function(e){return cr([cr([su(lA(Kn)([nx(be.value)("border-style:solid;border-width: 1px;border-color: black;"),ux(xi.value)(Ar(function(n){return pA(ax(Gf(n))(Cc))(ox(gc)(function(u){return r(mA.create(u))}))})),ix(yc.value)(Ar(function(n){return pA(w_(n))(function(u){return fx(M_(u)==="Enter")(r(N_.value))})}))]))([]),he(Tc(Kn(R_(be.value)("margin: 5px;")))(Kn(_A(kr.value)(Ar(h(r(N_.value)))))))([Zt("Add")])]),ju(cx(function(n){return O_(fA)(function(u){return cr([Ku(Kn(lx(be.value)("margin: 5px;")))([Zt(n)]),he(Tc(Kn(R_(be.value)("margin: 5px;")))(sA(Kn(u.sendTo(0)))))([Zt("Prioritize")]),he(Tc(Kn(R_(be.value)("margin: 5px;")))(sA(Kn(u.remove))))([Zt("Delete")])])})})(px(function(n){return n.value0?new p(n.value1):b.value})(_x(function(n){return function(u){return u instanceof mA?new V(u.value0,new V(!1,u.value0)):u instanceof N_?new V(n,new V(!0,n)):new V("",new V(!1,""))}})("")(e))))])})})),next:lA(Kn)([_A(kr.value)(Ar(function(r){return vA(vA(zr(r))(t.dpage(ko.value)))(ae)})),sx(Hr.value)(t.slug+"portals/")])})};var bA=ie(),bx=qr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(bA(oe()(bA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),dx=Ir(Ft)(d),Ax=q(Yt),kx=It(Kr),dA=Dr(Lr),yx=It(Gr),gx=function(){return Z.value}(),AA=function(t){return bx(gx)({code:pr(Rr([Or([Zt(xp)])])),result:pr(cr([Zt("Hello world")])),next:dx(Ax)([kx(kr.value)(Ar(function(r){return dA(dA(zr(r))(t.dpage(so.value)))(ae)})),yx(Hr.value)(t.slug+"component/")])})};var hx=qr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(oe()(Ur)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),Sx=Ir(Ft)(d),Tx=q(Yt),Ex=It(Kr),kA=Dr(Lr),$x=It(Gr),Fx=function(){return Z.value}(),yA=function(t){return hx(Fx)({next:Sx(Tx)([Ex(kr.value)(Ar(function(r){return kA(kA(zr(r))(t.dpage(_o.value)))(ae)})),$x(Hr.value)(t.slug+"hello/")])})};var gA=ie(),Mx=qr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(gA(oe()(gA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),wx=Oe(Pe),Ix=Wt(Sr),So=q(Yt),Lx=xD(),Px=y(ao),W_=Ir(Ft)(d),Ox=It(Ud),Rx=It(Vd),Nx=It(Jd),Wx=It(HD),CA=eD()(),TA=up()()()()(),Hx=TA({reflectType:function(){return 1}}),Bx=TA({reflectType:function(){return 0}}),Ux=Wu(De),qx=q(aa),hA=It(Kr),SA=Dr(Lr),zx=It(Gr);var Jx=function(){return Z.value}(),EA=function(t){return Mx(Jx)({code:pr(Rr([Or([Zt(Fp)])])),result:pr(ju(Vu(function(r){return wx(Ix(So(void 0)))(function(e){return So(fo(Lx(Px(function(n){return F_(W_(So)([Ox(C_.value)("true"),Rx(T_.value)("250")]))([$_(W_(So)([Nx(S_.value)(n),Wx(Ta.value)("video/mp4")]))([])])})(CA("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(CA("https://www.w3schools.com/jsref/movie.mp4")(rD))))(function(n){return function(u){var a=Hx(Z.value)(n),i=Bx(Z.value)(n),c=function(s){return Ux(function(m){return function(A){return!m}})(s)(e)},_=function(){var s=Hf(function(m){return m?i:a});return function(m){return si(qx(s(c(m))))}}();return cr([he(So(hA(kr.value)(Ar(h(r(void 0))))))([Zt("Switch videos")]),cr([_(!0),_(!1)])])}})))})}))),next:W_(So)([hA(kr.value)(Ar(function(r){return SA(SA(zr(r))(t.dpage(yo.value)))(ae)})),zx(Hr.value)(t.slug+"ssr/")])})};var $A=ie(),jx=qr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()($A(oe()($A(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Xx=nb({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Ur),Gx=Ir(Ft)(d),Kx=q(Yt),Qx=It(Kr),FA=Dr(Lr),Yx=It(Gr),Zx=function(){return Z.value}(),tM=function(){return Z.value}(),xA=function(t){return jx(Zx)({code:pr(Rr([Or([Zt($p)])])),result:pr(Xx(tM)),next:Gx(Kx)([Qx(kr.value)(Ar(function(r){return FA(FA(zr(r))(t.dpage(Do.value)))(ae)})),Yx(Hr.value)(t.slug+"events1/")])})};var wA=ie(),IA=oe(),LA=wA(Ur),eM=Tp({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(wA(IA(LA({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),wi=q(Yt),nM=qr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(IA(LA({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),uM=It(MD),aM=It(Xu),oM=Wt(Sr),iM=X(hr),fM=lu(oi),cM=Ir(Ft)(d),lM=It(Kr),MA=Dr(Lr),pM=It(Gr),_M=function(){return Z.value}(),sM=function(){return Z.value}(),PA=function(t){return eM(Z.value)(_M)({code:pr(Rr([Or([Zt(Ep)])])),result:pr(ju(Vu(function(r){return function(e){return wi(fo(nM(sM)({myli:wi(uM(be.value)("background-color:rgb(200,240,210);")),somethingNew:pr(he(wi(aM(kr.value)(r(new p(void 0)))))([Ge(oM(iM(fM(e))("Thanks for clicking me!"))(wi("I was dynamically inserted")))]))})))}}))),next:cM(wi)([lM(kr.value)(Ar(function(r){return MA(MA(zr(r))(t.dpage(Ao.value)))(ae)})),pM(Hr.value)(t.slug+"events2/")])})};var H_=()=>document.documentElement.querySelector("[data-deku-root]");var B_=t=>()=>{t.hydrating=!0},U_=t=>()=>{t.hydrating=!1},OA=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(a=>()=>t(r.dynFamily)(i=>()=>{for(var c=0,_=0,s;_<n.childNodes.length;){if(n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i){_+=1;break}_++}let m=$=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[$]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[$])):n.insertBefore(e.units[r.id].main,n.childNodes[$])};for(;_<n.childNodes.length;){var A;if((A=n.childNodes[_].$dekuId)&&t(e.units[A].dynFamily)(S=>()=>t(e.units[A].pos)(v=>()=>i===S&&a<=v?(m(_),!0):!1)())())return!0;if(c===a||n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i+"%-%")return m(_),!0;n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue.substring(0,3)==="%-%"&&!s&&(s=n.childNodes[_].nodeValue+"%-%"),s||c++,n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue===s&&(s=void 0,c++),_++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(i=>()=>(e.units[r.id].main?e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[i].endBeacon):(e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon),e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(i=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[i].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[i].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},q_=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),a;a=u.nextNode();)a.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[a.nodeValue.substring(3)]=a)}e(document.documentElement)},RA=t=>r=>e=>n=>()=>{var u,a,i=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(i),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(a=n.allBeacons[`${e.id}%-%`])?(n.units[i]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:a},u.$dekuId=i,a.$dekuId=i,!0):!1)()){let _=document.createComment(`%-%${e.id}`),s=document.createComment(`%-%${e.id}%-%`);n.units[i]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:_,endBeacon:s},_.$dekuId=i,s.$dekuId=i}};var NA=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),WA=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),HA=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),BA=t=>r=>e=>n=>()=>{var u,a=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(a),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${a}"]`))?(n.units[a]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=a,!0):!1)()){let c=document.createElement(e.tag);n.units[a]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:c},c.$dekuId=a}},UA=t=>r=>e=>n=>u=>()=>{var a=n.id,i;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(a),!t(n.parent)(_=>()=>{if(u.hydrating&&r&&(i=document.documentElement.querySelector(`[data-deku-ssr="${_}"]`))){for(var s=0;s<i.childNodes.length;s++){let S=a.split("@-@");if(i.childNodes[s].nodeType===8&&i.childNodes[s].nodeValue===S[0]){s=s-1;var m=s===-1,A=s>=0&&i.childNodes[s].nodeType===8;m&&i.prepend(document.createTextNode("")),A&&i.insertBefore(document.createTextNode(""),i.childNodes[s+1]);break}}let $=i.childNodes[s];return u.units[a]={main:$,pos:n.pos,parent:n.parent,scope:n.scope},$.$dekuId=a,!0}return!1})()){let _=document.createTextNode("");u.units[a]={main:_,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},_.$dekuId=a}};function z_(){return{units:{},scopes:{},allBeacons:{}}}var qA=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},zA=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var a=i=>u(i)();e.units[n].main.addEventListener(r.key,a),e.units[n].listeners[r.key]=a}}},JA=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},VA=t=>r=>e=>n=>u=>()=>{var a,i,c=n.id,_=n.html,s=n.verb,m=n.cache,A=n.parent,$=n.scope,S=n.pxScope;let o=t(n.parent)(()=>()=>u.hydrating&&r&&(a=document.documentElement.querySelector(`[data-deku-ssr="${c}"]`))?(u.units[c]={listeners:{},pos:n.pos,scope:$,parent:A,main:a},a.$dekuId=c,!0):!1)();if(!o){let ut=Object.entries(m);for(var v=0;v<ut.length;v++){let j=ut[v][0];ut[v][1]===!0?_=_.replace(s+j+s,'data-deku-attr-internal="'+j+'"'):_=_.replace(s+j+s,'<span style="display:contents;" data-deku-elt-internal="'+j+'"></span>')}i=document.createElement("div"),i.innerHTML=_.trim(),u.units[c]={listeners:{},pos:n.pos,scope:$,parent:A,main:i.firstChild},i.firstChild.$dekuId=c}u.scopes[$]||(u.scopes[$]=[]),u.scopes[$].push(c),i||(i=a),i.querySelectorAll("[data-deku-attr-internal]").forEach(function(ut){var j=ut.getAttribute("data-deku-attr-internal");let Pt=j+"@!%"+S;u.units[Pt]={listeners:{},main:ut,scope:$},u.scopes[$].push(Pt)}),i.querySelectorAll("[data-deku-elt-internal]").forEach(function(ut){var j=ut.getAttribute("data-deku-elt-internal");let Pt=j+"@!%"+S;u.units[j+"@!%"+S]={listeners:{},main:ut,scope:$},u.scopes[$].push(Pt)}),o||u.units[c].main.remove()},jA=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},J_=t=>r=>e=>n=>()=>{let u=(o,v,ut)=>{if(n.units[o].startBeacon){var j=n.units[o].startBeacon,Pt=j.nextSibling;for(n.units[v].main.insertBefore(j,ut),j=Pt;j&&j!==n.units[o].endBeacon;)Pt=j.nextSibling,n.units[v].main.insertBefore(j,ut),j=Pt}else n.units[v].main.insertBefore(n.units[o].main,ut)},a=[];a.push(e);for(var i=0;i<a.length;i++){let o=a[i],v=o.id,ut=o.parent;n.units[v].containingScope=o.scope;var c=void 0;r(o.pos)(Pt=>()=>(c=Pt,!0))(),c===void 0&&(c=Number.MAX_VALUE);let j=n.units[ut].main.childNodes;for(var _=0,s=!1,m=0;_<j.length;){var A;if(A=j[_].$dekuId){if(r(o.dynFamily)(Ot=>()=>s?!1:n.units[A].endBeacon===j[_]&&Ot===A?(n.units[v].pos=t(m),u(v,ut,j[_]),!0):!1)()){s=!0;break}if(n.units[A].dynFamily!==n.units[v].dynFamily){_++;continue}if(s){_++;continue}m===c?(u(v,ut,j[_]),m++,s=!0):n.units[A].endBeacon!==j[_]&&(n.units[A].pos=t(m),m++)}_++}if(s)return;if(n.units[v].main)n.units[ut].main.appendChild(n.units[v].main);else{var $=n.units[v].startBeacon,S=$.nextSibling;for(n.units[ut].main.appendChild($),$=S;$&&$!==n.units[v].endBeacon;)S=$.nextSibling,n.units[ut].main.appendChild($),$=S}}},XA=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let a=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(a.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,a.appendChild(n),n=u}}},V_=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},GA=V_;var kM=Ro(qi),yM=Le();var KA=function(t){return t};var gM=1,j_=2147483647,CM=function(){return j_-1|0}(),X_=function(t){var r=function(e){return function(n){return function(u){var a=n-e|0,i=kM(u)(a),c=i<e;return c?i+n|0:i}}};return r(gM)(CM)(t)};var hM=0,SM=48271,QA=function(t){return function(r){return yM(mc(Ei(Fe(SM)*Fe(r)+Fe(t))(Fe(j_))))}},YA=QA(hM);var wM=function(){function t(i){this.fn=i}var r={},e=function(i,c){this.head=i,this.tail=c};function n(i){return new e(i,r)}function u(i){return function(c){return new e(i,c)}}function a(i){for(var c=[],_=i;_!==r;)c.push(_.head),_=_.tail;return c}return function(i){return function(c){return function(_){var s=function(A,$){return i(c(u)(_(A)))($)},m=function(A,$,S){if($===0)return A;var o=S[$-1];return new t(function(){var v=m(s(o,A),$-1,S);return v})};return function(A){for(var $=c(n)(_(A[A.length-1])),S=m($,A.length-1,A);S instanceof t;)S=S.fn();return c(a)(S)}}}}}();var Ii=function(t){var r=y(t);return{map:function(e){return function(n){return function(u){return r(function(a){return new V(e(a.value0),a.value1)})(n(u))}}}}};var Q_=function(t){return{Applicative0:function(){return Fc(t)},Bind1:function(){return Ec(t)}}},Ec=function(t){var r=At(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(a){var i=n(a.value0);return i(a.value1)})}}},Apply0:function(){return $c(t)}}},$c=function(t){var r=Ii(t.Bind1().Apply0().Functor0());return{apply:Re(Q_(t)),Functor0:function(){return r}}},Fc=function(t){var r=q(t.Applicative0());return{pure:function(e){return function(n){return r(new V(e,n))}},Apply0:function(){return $c(t)}}};var xc=function(t){var r=q(t.Applicative0()),e=Q_(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var ok=function(t){return function(r){var e=t(r);return e.value1}},ik=function(t){return function(r){var e=t(r);return e.value0}};var XM=xc(Ne),GM=Xn(XM);var KM=Ii(au);var QM=rn(Io);var YM=Ae(Io);var ZM=function(t){return t};var t0=function(){var t=function(r){return new V(KA(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=YA(r.newSeed),e}())};return GM(t)}();var lk=KM,Mc=y(lk);var Z_=function(t){return ik(ZM(t))};var pk=$c(Ne),r0=Jt(pk),ck=function(t){return function(r){var e=Fe(r),n=Fe(t),u=function(c){return n+Ei(c)(e-n+1)},a=Mc(Fe)(t0),i=r0(Mc(YM)(a))(Mc(QM(2))(a));return Mc(function(c){return c_(u(c))})(i)}},_k=function(t){return function(r){var e=t<=r;return e?ck(t)(r):ck(r)(t)}};var vk=function(t){return t.arbitrary};var mk=function(){return{arbitrary:_k(-1e6)(1e6)}}();var Be=ir(ve),pn=nt(Vr),bk=_t(sn),dk=vk(mk),Ak=Ae(ia),Dk=q(Cr),n0=q(ge),Qe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ye=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),xe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),de=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_n=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),$n=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ts=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),wc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),rs=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),es=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ns=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),us=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Au=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ue=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),u0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Au(new $n(t))])})(r))}},a0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Au(new Qn(t))])})(r))}},o0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Ue(new ts(t))])})(r))}},i0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Ue(new ns(t))])})(r))}},f0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Au(new Ye(t))])})(r))}},c0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Ue(new wc(t))])})(r))}},l0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Au(new _n(t))])})(r))}},p0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Au(new Qe(t))])})(r))}},_0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Au(new xe(t)),new Au(new de(t))])})(r))}},s0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Ue(new rs(t))])})(r))}},v0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Ue(new es(t))])})(r))}},m0=function(t){return function(r){return Be(Pr(function(e){return pn(e)([new Ue(new us(t))])})(r))}},kk=function(t){return{ids:function(){var e=Qr(t)(),n=bk(Z_(dk)({newSeed:X_(e),size:5}));return Be(Pr(Ak(1))(t))(),n},makeElement:p0,attributeParent:function(r){return function(e){return Dk(void 0)}},makeRoot:c0,makeText:f0,makePursx:l0,setProp:a0,makeDynBeacon:_0,setCb:function(r){return function(e){return Dk(void 0)}},setText:u0,sendToPos:o0,deleteFromCache:m0,removeDynBeacon:i0,giveNewParent:s0,disconnectElement:v0}},xa=function(t){return function(r){return t instanceof p?r(t.value0):n0(!1)}},D0=function(t){return function(r){return function(){var n=HA(t.id)(r)(),u=WA(t.id)(r)(),a=NA(t.id)(r)(),i={scope:n,parent:u,dynFamily:a,id:t.id,pos:new p(t.pos),ez:!1};return J_(p.create)(xa)(i)(r)()}}},yk=function(t){return{ids:function(){var e=Qr(t)(),n=bk(Z_(dk)({newSeed:X_(e),size:5}));return Be(Pr(Ak(1))(t))(),n},makeElement:BA(xa)(!0),makeDynBeacon:RA(xa)(!0),attributeParent:OA(xa),makeRoot:jA,makeText:UA(xa)(!0)(tr(void 0)),makePursx:VA(xa)(!0)(tr(void 0)),setProp:qA(!0),setCb:zA(!0),setText:JA,sendToPos:D0,deleteFromCache:V_,removeDynBeacon:GA,giveNewParent:J_(p.create)(xa),disconnectElement:XA}};var as=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),os=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let a=r,i=Object.entries(n);for(var c=0;c<i.length;c++){let A=i[c][0];i[c][1]===!0?a=a.replace(u+A+u,'data-deku-attr-internal="'+A+'" data-deku-ssr="'+A+"@!%"+e+'"'):a=a.replace(u+A+u,'<span style="display:contents;" data-deku-elt-internal="'+A+'" data-deku-ssr="'+A+"@!%"+e+'"></span>')}let _=a.indexOf(">"),s=a.indexOf("/>"),m=s==_-1?s:_;return a.slice(0,m)+' data-deku-ssr="'+t+'" '+a.slice(m)};var d0=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Ck=y(Zo),ta=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),hk=function(t){var r=!1,e;function n(u){if(u.value1 instanceof mt)return r=!0,new p(new V(u.value1.value0,new ta(u.value0,u.value1.value1)));if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,b.value;if(u.value1 instanceof rr){t=new ta(rr.value,kf(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Pi=function(t){var r=!1,e;function n(u){if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,b.value;if(u.value0 instanceof rr){t=new ta(kf(u.value1),rr.value);return}if(u.value0 instanceof mt)return r=!0,new p(new V(u.value0.value0,new ta(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Tr=function(t){return function(r){return new ta(t.value0,new mt(r,t.value1))}};var Ic={map:function(t){return function(r){return new ta(Ck(t)(r.value0),Ck(t)(r.value1))}}},Li={foldMap:function(t){return tl(Li)(t)},foldr:function(t){return rl(Li)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){var m=Pi(s);if(m instanceof p){u=t(_)(m.value0.value0),n=m.value0.value1;return}if(m instanceof b)return a=!0,_;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[m.constructor.name])}for(;!a;)i=c(u,n);return i}};return r}},is=ur(Li),fs={append:is(Tr)},Se=function(){return new ta(rr.value,rr.value)}(),Sk={mempty:Se,Semigroup0:function(){return fs}},Tk=Tr(Se),Ek=function(t){var r=gr(t)(Sk);return function(e){return r(Tk)(e)}},cs={traverse:function(t){var r=t.Apply0(),e=y(r.Functor0()),n=ee(r),u=q(t);return function(a){var i=e(is(Tr)(Se)),c=is(function(_){var s=n(Tr)(_);return function(m){return s(a(m))}})(u(Se));return function(_){return i(c(_))}}},sequence:function(t){return yl(cs)(t)},Functor0:function(){return Ic},Foldable1:function(){return Li}};var $k=function(t){return function(r){return new ta(new mt(t,r.value0),r.value1)}},A0={Applicative0:function(){return ls},Bind1:function(){return k0}},k0={bind:mr(gr(Li)(Sk)),Apply0:function(){return Fk(0)}},ls={pure:Tk,Apply0:function(){return Fk(0)}},Fk=d0("applyCatQueue","Data.CatQueue",function(){return{apply:Re(A0),Functor0:function(){return Ic}}});var g0=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},To=nt(Vr),Lk=Fr(),_s=y(br),C0=Ui(Wa),h0=qe(br),xk=ir(Ii(au)),Mk=Ai(xc(Ne)),wk=Nu(Ee),S0=Na(Ha)(Ec(Ne)),Me=St(hu(xn)),Ma=nt(fs),T0=q(ls),Ik=y(Ic),E0=Ek(Ft),$0=qe(Ru),F0=At(ye),ps=ri(Ee),x0=lu(Sf),Pk=Fc(Ne),M0=We(cs)(Pk),Oi=un(Pk)(an),w0=uu(Ft)(No),I0=Xe(dm),L0=gr(Ft)(No),P0=ur(ue);var O0=function(t){var r=function(e){return function(n){return function(u){return function(a){if(a instanceof b)return{acc:e,rest:[]};if(a instanceof p){if(a.value0.head instanceof xe){var i=r([])(new p({id:a.value0.head.value0.id,e:a.value0.head.value0}))(a.value0.tail);return r(To(e)(i.acc))(n)(i.rest)}if(a.value0.head instanceof de){if(n instanceof p)return{acc:[{pos:n.value0.e.pos,elt:new ft({o:n.value0.e,a:e,c:a.value0.head.value0})}],rest:a.value0.tail};if(n instanceof b)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var c=function(){if(a.value0.head instanceof Qe||a.value0.head instanceof Ye||a.value0.head instanceof _n||a.value0.head instanceof xe||a.value0.head instanceof de)return a.value0.head.value0.pos;if(a.value0.head instanceof Qn)return b.value;if(a.value0.head instanceof $n)return b.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[a.value0.head.constructor.name])}();return r(To(e)([{pos:c,elt:new lt(a.value0.head)}]))(n)(a.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[a.constructor.name])}(Tl(u))}}};return r([])(b.value)(t).acc},Ok=g0("sortSortableDyns","Deku.SSR",function(){var t=_s(function(e){if(e.elt instanceof lt)return e;if(e.elt instanceof ft)return{pos:e.pos,elt:new ft({o:e.elt.value0.o,c:e.elt.value0.c,a:Ok(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=vf(Fo($t(ca(le)))(function(e){return function(n){return n.pos}(Lk(e))}));return function(e){return t(r(e))}}),R0=Ok(39),Rk=function(t){return C0(h0(t)(function(r){return function(e){if(e instanceof lt)return[e.value0];if(e instanceof ft)return To([new xe(e.value0.o)])(To(Rk(e.value0.a))([new de(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[e.constructor.name])}(function(e){return e.elt}(Lk(r)))}))},Nk=function(t){return function(r){var e=function(o){return function(v){return xk(Mk(function(ut){var j={};for(var Pt in ut)({}).hasOwnProperty.call(ut,Pt)&&(j[Pt]=ut[Pt]);return j.idToActions=wk(function(Ot){if(Ot instanceof p)return new p(To(Ot.value0)([v]));if(Ot instanceof b)return new p([v]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Ot.constructor.name])})(o)(ut.idToActions),j}))}},n=pe("deku-root")(Qo(function(o){return o instanceof Ue&&o.value0 instanceof wc?new p(o.value0.value0.id):b.value})(r)),u=function(o){return function(v){return function(ut){return S0(xk(Mk(function(j){var Pt={};for(var Ot in j)({}).hasOwnProperty.call(j,Ot)&&(Pt[Ot]=j[Ot]);return Pt.parentToChild=wk(function(Gt){if(Gt instanceof p)return new p(To(Gt.value0)([v]));if(Gt instanceof b)return new p([v]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[Gt.constructor.name])})(o)(j.parentToChild),Pt})))(function(){return e(v)(ut)})}}},a=function(o){var v=function(ot){return function(z){return function(M){if(M instanceof Qe){var st=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return st?new Qe({id:M.value0.id,scope:M.value0.scope,parent:M.value0.parent,tag:M.value0.tag,pos:new p(z),dynFamily:M.value0.dynFamily}):M}if(M instanceof Ye){var Dt=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return Dt?new Ye({id:M.value0.id,pos:new p(z),scope:M.value0.scope,parent:M.value0.parent,dynFamily:M.value0.dynFamily}):M}if(M instanceof _n){var we=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return we?new _n({id:M.value0.id,parent:M.value0.parent,html:M.value0.html,scope:M.value0.scope,pos:new p(z),pxScope:M.value0.pxScope,verb:M.value0.verb,cache:M.value0.cache,dynFamily:M.value0.dynFamily}):M}if(M instanceof xe){var Nr=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return Nr?new xe({id:M.value0.id,parent:M.value0.parent,pos:new p(z),scope:M.value0.scope,dynFamily:M.value0.dynFamily}):M}if(M instanceof de){var ku=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return ku?new de({id:M.value0.id,parent:M.value0.parent,pos:new p(z),scope:M.value0.scope,dynFamily:M.value0.dynFamily}):M}if(M instanceof $n||M instanceof Qn)return M;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[M.constructor.name])}}},ut=function(ot){return function(z){if(z instanceof Qe){var M=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return M?new Qe({id:z.value0.id,scope:z.value0.scope,parent:b.value,tag:z.value0.tag,pos:z.value0.pos,dynFamily:z.value0.dynFamily}):z}if(z instanceof Ye){var st=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return st?new Ye({id:z.value0.id,pos:z.value0.pos,scope:z.value0.scope,parent:b.value,dynFamily:z.value0.dynFamily}):z}if(z instanceof _n){var Dt=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return Dt?new _n({id:z.value0.id,parent:b.value,html:z.value0.html,scope:z.value0.scope,pos:z.value0.pos,pxScope:z.value0.pxScope,verb:z.value0.verb,cache:z.value0.cache,dynFamily:z.value0.dynFamily}):z}if(z instanceof xe){var we=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return we?new xe({id:z.value0.id,parent:b.value,pos:z.value0.pos,scope:z.value0.scope,dynFamily:z.value0.dynFamily}):z}if(z instanceof de){var Nr=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return Nr?new de({id:z.value0.id,parent:b.value,pos:z.value0.pos,scope:z.value0.scope,dynFamily:z.value0.dynFamily}):z}if(z instanceof $n||z instanceof Qn)return z;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[z.constructor.name])}},j=function(ot){return function(z){return function(M){return function(st){return function(Dt){if(Dt instanceof p&&Dt.value0.value0 instanceof xe){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Tr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof de){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Tr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Ye){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Tr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof _n){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Tr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Qe){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Tr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Qn)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1);if(Dt instanceof p&&Dt.value0.value0 instanceof $n)return j(ot)(Tr(z)(Dt.value0.value0))(M)(Dt.value0.value1);if(Dt instanceof b)return Ma(ot)(Ma(T0(new de({id:M.id+"%-%",parent:M.parent,pos:M.pos,scope:M.scope,dynFamily:M.dynFamily})))(z));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[Dt.constructor.name])}(Pi(st))}}}},Pt=function(ot){return function(z){return function(M){if(M instanceof p&&M.value0.value0 instanceof de)return Pt(j(Se)(Se)(M.value0.value0.value0)(ot))(M.value0.value1);if(M instanceof p)return Pt($k(M.value0.value0)(ot))(M.value0.value1);if(M instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[M.constructor.name])}(hk(z))}},Ot=function(ot){return function(z){return function(M){return function(st){if(st instanceof p&&st.value0.value0 instanceof Qe){var Dt=st.value0.value0.value0.id===z;return Dt?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Ye){var we=st.value0.value0.value0.id===z;return we?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof _n){var Nr=st.value0.value0.value0.id===z;return Nr?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof xe){var ku=st.value0.value0.value0.id===z;return ku?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof de){var wa=st.value0.value0.value0.id===z;return wa?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Qn){var Ia=st.value0.value0.value0.id===z;return Ia?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof $n){var Te=st.value0.value0.value0.id===z;return Te?Ot(ot)(z)(st.value0.value1):Ot(Tr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[st.constructor.name])}(Pi(M))}}},Gt=function(ot){return function(z){return function(M){if(M instanceof p&&M.value0.value0 instanceof Au)return Gt(Tr(ot)(M.value0.value0.value0))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Ue&&M.value0.value0.value0 instanceof ts)return Gt(Ik(v(M.value0.value0.value0.value0.id)(M.value0.value0.value0.value0.pos))(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Ue&&M.value0.value0.value0 instanceof wc||M instanceof p&&M.value0.value0 instanceof Ue&&M.value0.value0.value0 instanceof rs)return Gt(ot)(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Ue&&M.value0.value0.value0 instanceof es)return Gt(Ik(ut(M.value0.value0.value0.value0.id))(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Ue&&M.value0.value0.value0 instanceof ns)return Gt(Ot(Se)(M.value0.value0.value0.value0.id)(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Ue&&M.value0.value0.value0 instanceof us)return Gt(Ot(Se)(M.value0.value0.value0.value0.id)(ot))(M.value0.value1);if(M instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[M.constructor.name])}(Pi(z))}},rt=E0(o),yr=Gt(Se)(rt),fe=Pt(Se)(yr);return fe},i=a(r),c=function(o){return{parentToChild:$0(o.parentToChild)(function(){var v=_s(function(j){if(j instanceof Qe||j instanceof Ye||j instanceof _n||j instanceof xe||j instanceof de||j instanceof Qn||j instanceof $n)return j.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[j.constructor.name])}),ut=_s(function(j){return F0(ps(j)(o.idToActions))($l)});return function(j){return v(Rk(R0(O0(x0(ut(j))))))}}()),idToActions:o.idToActions}}(ok(M0(function(o){if(o instanceof Qe)return Oi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Ye)return Oi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof _n)return Oi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof xe)return Oi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof de)return Oi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Qn||o instanceof $n)return e(o.value0.id)(o);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[o.constructor.name])})(i))({parentToChild:Un,idToActions:Un})),_=function(o){return Ra(xl(function(v){return v instanceof Qe||v instanceof Ye||v instanceof xe||v instanceof de})(o))},s=function(o){return pe("")(Qo(function(v){return v instanceof Qe?new p(v.value0.tag):b.value})(o))},m=function(o){return w0(" ")(I0(function(v){return v instanceof Qn?new p(v.value0.key+('="'+(v.value0.value+'"'))):b.value})(o))},A=function(o){return tr("")(function(v){var ut=function(rt){return pe("")(Qo(function(yr){return yr instanceof $n?new p(as(yr.value0.text)+("<!--"+(o+"-->"))):b.value})(v))},j=function(rt){return"<!--%-%"+(o+"-->")},Pt=function(rt){var yr=s(v),fe=m(v);return"<"+(yr+(" "+(fe+(' data-deku-ssr="'+(o+('">'+($(o)+("</"+(yr+">")))))))))},Ot=function(rt){return"<!--%-%"+(o+"-->")},Gt=Fu(v)(0);return Gt instanceof p&&Gt.value0 instanceof $n?ut(void 0):Gt instanceof p&&Gt.value0 instanceof Ye?ut(void 0):Gt instanceof p&&Gt.value0 instanceof xe?j(void 0):Gt instanceof p&&Gt.value0 instanceof de?Ot(void 0):Gt instanceof p&&Gt.value0 instanceof _n?os(Gt.value0.value0):Pt(void 0)})(ps(o)(c.idToActions))},$=function(o){var v=pe([])(ps(o)(c.parentToChild));return L0(A)(v)},S=function(o){return P0(function(v){return function(ut){var j=_(ut);if(j)return v;if(!j)return cc("data-deku-ssr")(m(ut)+" data-deku-ssr")(v);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[j.constructor.name])}})($(o))(c.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(S(n)+("</"+(t+">")))))))}};var yw=qe(U),gw=Qa(Vo);var Cw=ir(U),Wk=Fr(),hw=St(zu),Sw=g(),Tw=Wt(Sr),Ew=q(Yt),Hk=q(Cr),$w=y(ve),Fw=Qa(Av),xw=ir(ve);var Bk=function(t){return function(r){return function(e){return cn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(n){return function(u){return u.ids}(Wk(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:hw})}},toElt:function(n){return n}})(t)(r)(Sw(e))}}},Mw=function(t){return function(){var e=z_();q_(e)();var n=yw(gw(_e(0)))(yk)();B_(e)();var u=H_(),a=jl(Tw(Ew(Wk(n).makeRoot({id:"deku-root",root:u})))(Bk({parent:new p("deku-root"),scope:new qu("rootScope"),raiseId:function(i){return Hk(void 0)},ez:!0,pos:b.value,dynFamily:b.value})(n)(t)))(function(i){return i(e)})();return U_(e)(),a}},Uk=function(t){return Cw(Mw(t))},ww=function(t){return function(r){return function(e){return $w(function(){var n=Nk(t);return function(u){return function(a){return r.head+a}(function(a){return a+r.tail}(n(u)))}}())(Fw(function(){var u=_e(0)(),a=_e([])(),i=kk(u);return xw(qm(Bk({parent:new p("deku-root"),scope:new qu("rootScope"),raiseId:function(c){return Hk(void 0)},ez:!0,pos:b.value,dynFamily:b.value})(i)(e))(function(c){return c(a)}))(),Qr(a)()}))}}},qk=ww("body");var Iw=Sc(Xu),ss=Wt(Sr),Lc=q(Yt),Jk=y(hr),Vk=nt(oa),Lw=_t(sn),Pw=Wu(De),Ow=_t(Oo),Ri=ie(),Rw=qr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Ri(Ri(Ri(Ri(Ri(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),Nw=Dr(Ka),Ww=At($u),jk=q(Cr),Hw=function(){return Z.value}(),Xk=function(){return Rf()(no({reflectSymbol:function(){return"buttonClicked"}})()()(no({reflectSymbol:function(){return"sliderMoved"}})()()(wf)()())()())(Z.value)(function(t){return function(r){return cr([E_([Zt(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),he(Iw(t.buttonClicked(void 0)))([Zt("Click")]),cr([Ge(ss(Lc("Val: 0"))(Jk(function(){var e=Vk("Val: ");return function(n){return e(Lw(n))}}())(Pw(function(e){return function(n){return 1+e|0}})(-1)(ss(Lc(void 0))(r.buttonClicked)))))]),cr([su(hc(Lc(t.sliderMoved)))([]),cr([Ge(ss(Lc("Val: 50"))(Jk(function(){var e=Vk("Val: ");return function(n){return e(Ow(n))}}())(r.sliderMoved)))])])])}})}(),Gk=function(t){return Rw(Hw)({code2:pr(Rr([Or([Zt(Rp)])])),code1:pr(Rr([Or([Zt(Op)])])),code0:pr(Rr([Or([Zt(Pp)])])),result:pr(Xk),codegen:pr(Rr([Or([Ge(Um(function(r){return Nw(Ww(qk({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Xk))(r))(jk(jk(void 0)))}))])]))})};var Uw=Oe(Pe),qw=Wt(Sr),vs=q(Yt),zw=y(br),Jw=Ir(Ft)(d),Vw=It(Kr),jw=Dr(Lr),Xw=It(PD),Gw=It(Gr),Kw=It(po),Kk=function(t){var r=function(n){if(n instanceof Jf)return yA;if(n instanceof _o)return AA;if(n instanceof so)return lb;if(n instanceof vo)return xA;if(n instanceof Do)return iA;if(n instanceof bo)return Bd;if(n instanceof mo)return PA;if(n instanceof Ao)return DA;if(n instanceof ko)return EA;if(n instanceof yo)return Gk;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[n.constructor.name])},e=function(n){return function(u){return r(u)({dpage:n,slug:t.slug})}};return co(function(n){return Uw(function(u){return qw(vs(t.startsWith))(u)})(function(u){return cr([cr(zw(function(a){return si([_i(Jw(vs)([Vw(kr.value)(Ar(function(i){return jw(zr(i))(n(a.value0))})),Xw(be.value)("cursor:pointer;"),Gw(Hr.value)(t.slug+a.value1.value1.value0)]))([Zt(a.value1.value0)]),Ku(vs(Kw(be.value)(function(){return a.value1.value1.value1?"":"display:none;"}())))([Zt(" | ")])])})([new V(Jf.value,new V("Home",new V("",!0))),new V(_o.value,new V("Hello world",new V("hello/",!0))),new V(so.value,new V("Component",new V("simple/",!0))),new V(vo.value,new V("Pursx 1",new V("pursx1/",!0))),new V(Do.value,new V("Events 1",new V("events1/",!0))),new V(bo.value,new V("Effects",new V("effects/",!0))),new V(mo.value,new V("Pursx 2",new V("pursx2/",!0))),new V(Ao.value,new V("Events 2",new V("events2/",!0))),new V(ko.value,new V("Portals",new V("portals/",!0))),new V(yo.value,new V("SSR",new V("ssr/",!1)))])),Hf(e(n))(u)])})})};var Yw=_t(Ns()()(Ws({reflectSymbol:function(){return"slug"}})(Hs({reflectSymbol:function(){return"startsWith"}})(Je))(Je))),Zw=q(ge),TTt=function(t){return function(){var e=tr(Di(Co("could not ingest options: "+Yw(t))))(Zw)(ZD(t.startsWith))();return Uk(Kk({slug:t.slug,startsWith:e}))()}};export{TTt as main};
