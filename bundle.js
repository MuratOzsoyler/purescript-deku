var $_=function(n){return function(t){for(var r=n.length,e=t.length,a=new Array(r*e),u=0,i=0;i<r;i++)for(var f=n[i],_=0;_<e;_++)a[u++]=f(t[_]);return a}};var Ma={compose:function(n){return function(t){return function(r){return n(t(r))}}}},ua=function(n){return n.compose};var on=function(n){return n.identity},Y={identity:function(n){return n},Semigroupoid0:function(){return Ma}};var ir=!0;var Xf=function(n){return function(t){return function(r){return function(e){return n(t(r))(t(e))}}}},pt=function(n){return function(t){return function(r){return n(r)(t)}}},L=function(n){return function(t){return n}};var Ko=function(n){return function(t){return t(n)}};var P_=function(n){return function(t){for(var r=t.length,e=new Array(r),a=0;a<r;a++)e[a]=n(t[a]);return e}};var M=function(){function n(){}return n.value=new n,n}();var d=function(n){return n.map},te=function(n){return function(t){return function(r){return d(n)(r)(t)}}},z=function(n){return d(n)(L(void 0))},Fr=function(n){return function(t){return function(r){return d(n)(L(r))(t)}}},ei=function(n){return function(t){return d(n)(L(t))}};var Hr={map:ua(Ma)},mt={map:P_};var nu={apply:$_,Functor0:function(){return mt}},Cn=function(n){return n.apply};var tn=function(n){return function(t){return function(r){return Cn(n)(d(n.Functor0())(L(on(Y)))(t))(r)}}},mr=function(n){return function(t){return function(r){return function(e){return Cn(n)(d(n.Functor0())(t)(r))(e)}}}};var c=function(n){return n.pure};var Ne=function(n){return function(t){return function(r){if(t)return r;if(!t)return c(n)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[t.constructor.name,r.constructor.name])}}},tu=function(n){return function(t){return function(r){return Cn(n.Apply0())(c(n)(t))(r)}}};var ru={pure:function(n){return[n]},Apply0:function(){return nu}};var k_=function(n){return function(t){return n+t}},R_=function(n){return function(t){return n.length===0?t:t.length===0?n:n.concat(t)}};var Ot=function(n){return n.reflectSymbol};var Mr=function(n){return function(t){return t[n]}},ke=function(n){return function(t){return function(r){var e={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e[n]=t,e}}};var W_={append:function(n){return function(t){return void 0}}},Re={append:k_};var ot={append:R_};var h=function(n){return n.append};var V=function(n){return n.alt};var WD=String.fromCharCode(65535),UD=String.fromCharCode(0),BD=Number.POSITIVE_INFINITY,HD=Number.NEGATIVE_INFINITY;var U_=function(n){return function(t){return function(r){return function(e){return function(a){return e<a?n:e===a?t:r}}}}};var B_=U_;var H_=U_;var q_=function(n){return function(t){return n===t}};var z_=q_;var V_=q_;var ia={eq:V_};var eu={eq:z_};var mn=function(n){return n.eq};var cn=function(){function n(){}return n.value=new n,n}(),dn=function(){function n(){}return n.value=new n,n}(),vn=function(){function n(){}return n.value=new n,n}();var J_=function(n){return function(t){return n-t|0}};var j_=function(n){return function(t){return n+t|0}},G_=function(n){return function(t){return n*t|0}},X_=function(n){return function(t){return n+t}},Q_=function(n){return function(t){return n*t}};var au={add:X_,zero:0,mul:Q_,one:1},Pr={add:j_,zero:0,mul:G_,one:1};var zr=function(n){return n.mul};var It=function(n){return n.add};var Yf={sub:J_,Semiring0:function(){return Pr}};var Zt=function(){return{compare:H_(cn.value)(vn.value)(dn.value),Eq0:function(){return ia}}}();var vr=function(){return{compare:B_(cn.value)(vn.value)(dn.value),Eq0:function(){return eu}}}();var _n=function(n){return n.compare};var Vr=function(n){return n.top};var Aa={top:2147483647,bottom:-2147483648,Ord0:function(){return vr}};var re=function(n){return n.bottom};var Z_=function(n){return n.toString()},K_=function(n){var t=n.toString();return isNaN(t+".0")?t:t+".0"};var ns=function(n){var t=n.length;return'"'+n.replace(/[\0-\x1F\x7F"\\]/g,function(r,e){switch(r){case'"':case"\\":return"\\"+r;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var a=e+1,u=a<t&&n[a]>="0"&&n[a]<="9"?"\\&":"";return"\\"+r.charCodeAt(0).toString(10)+u})+'"'};var ts=function(n){return function(t){return[n].concat(t)}},oi=function(n){return function(t){return t.join(n)}};var dr={show:ns},rs={showRecordFields:function(n){return function(t){return[]}}},es=function(n){return n.showRecordFields},as=function(){return function(){return function(n){return{show:function(t){var r=es(n)(M.value)(t);return r.length===0?"{}":oi(" ")(["{",oi(", ")(r),"}"])}}}}};var uu={show:K_},Jr={show:Z_};var R=function(n){return n.show};var Kf=function(n){return function(t){return function(r){return{showRecordFields:function(e){return function(a){var u=es(t)(M.value)(a),i=Ot(n)(M.value),f=Mr(i)(a);return ts(oi(": ")([i,R(r)(f)]))(u)}}}}}};var y=function(){function n(){}return n.value=new n,n}(),D=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Un=function(n){return function(t){return function(r){if(r instanceof y)return n;if(r instanceof D)return t(r.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}};var Za=Un(!1)(L(!0));var rt={map:function(n){return function(t){return t instanceof D?new D(n(t.value0)):y.value}}};var cr=function(n){return Un(n)(on(Y))},wr=function(){return function(n){if(n instanceof D)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[n.constructor.name])}};var xa={apply:function(n){return function(t){if(n instanceof D)return d(rt)(n.value0)(t);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,t.constructor.name])}},Functor0:function(){return rt}},Ar={bind:function(n){return function(t){if(n instanceof D)return t(n.value0);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,t.constructor.name])}},Apply0:function(){return xa}};var Ht=function(){return{pure:D.create,Apply0:function(){return xa}}}();var uy={alt:function(n){return function(t){return n instanceof y?t:n}},Functor0:function(){return rt}},is=function(){return{empty:y.value,Alt0:function(){return uy}}}();var fs=function(n){return Math.min(Math.abs(n),2147483647)},cs=function(n){return function(t){return t===0?0:t>0?Math.floor(n/t):-Math.floor(n/-t)}},ls=function(n){return function(t){if(t===0)return 0;var r=Math.abs(t);return(n%r+r)%r}};var _s={Ring0:function(){return Yf}};var iu=function(n){return n.mod};var ii={degree:fs,div:cs,mod:ls,CommutativeRing0:function(){return _s}};var jr={mempty:void 0,Semigroup0:function(){return W_}},fu={mempty:"",Semigroup0:function(){return Re}};var bn=function(n){return n.mempty};var Ka=function(n){return{always:L(bn(n)),Monoid0:function(){return n}}},no=function(n){return{always:on(Y),Monoid0:function(){return n}}},cu=function(n){return n.always};var q=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),W=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var rc=function(n){return Un(new q(n))(W.create)};var to={map:function(n){return function(t){if(t instanceof q)return new q(t.value0);if(t instanceof W)return new W(n(t.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[t.constructor.name])}}};var Gr=function(n){return function(t){return function(r){if(r instanceof q)return n(r.value0);if(r instanceof W)return t(r.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},ec=function(){return Gr(L(y.value))(D.create)}();var Dn=function(n){return n.empty};var ss=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=a-1;u>=0;u--)e=n(r[u])(e);return e}}},ps=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=0;u<a;u++)e=n(e)(r[u]);return e}}};var ms=function(n){return function(t){for(var r=[],e=0,a=n.length;e<a;e++)Array.prototype.push.apply(r,t(n[e]));return r}};var Rn=function(n){return n.discard};var ci={bind:ms,Apply0:function(){return nu}},b=function(n){return n.bind},We=function(n){return pt(b(n))},li=function(n){return function(t){return function(r){return function(e){return We(n)(t)(r(e))}}}},_i=function(n){return function(t){return function(r){return function(e){return b(n)(t(e))(r)}}}};var On={discard:function(n){return b(n)}};var La=function(n){return function(t){return b(n)(t)(on(Y))}};var dy=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var Ds={defer:function(n){return function(t){return n(void 0)(t)}}},ro=function(n){return n.defer},oc=function(n){return function(t){var r=dy("go","Control.Lazy",function(){return ro(n)(function(a){return t(r(25))})}),e=r(25);return e}};var ys=function(n){return function(t){return n&&t}},bs=function(n){return function(t){return n||t}},gs=function(n){return!n};var Xr=function(n){return n.not};var ao=function(n){return n.ff};var Ia=function(n){return n.disj},lr={ff:!1,tt:!0,implies:function(n){return function(t){return Ia(lr)(Xr(lr)(n))(t)}},conj:ys,disj:bs,not:gs};var T=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var qt=function(n){return n.value1};var Sa={map:function(n){return function(t){return new T(t.value0,n(t.value1))}}};var pu=function(n){return n};var My=function(n){return{append:function(t){return function(r){return Ia(n)(t)(r)}}}};var fc=function(n){return{mempty:ao(n),Semigroup0:function(){return My(n)}}};var wy=function(n){return{append:function(t){return function(r){return ua(n)(t)(r)}}}};var Pa=function(n){return{mempty:on(n),Semigroup0:function(){return wy(n.Semigroupoid0())}}};var F=function(n){return n};var ye=function(){return F};var Et=ye;var yi=function(){return function(){return function(){return function(){return function(n){return ye()}}}}};var jn=function(n){return n.foldr};var io=function(n){return function(t){return jn(n)(V(t.Alt0()))(Dn(t))}},_t=function(n){return function(t){return function(r){return jn(n)(function(){var e=V(t.Alt0());return function(a){return e(r(a))}}())(Dn(t))}}},Nr=function(n){return function(t){return function(r){return jn(t)(function(){var e=tn(n.Apply0());return function(a){return e(r(a))}}())(c(n)(void 0))}}},Wt=function(n){return function(t){return pt(Nr(n)(t))}},bi=function(n){return function(t){return Nr(n)(t)(on(Y))}},Gn=function(n){return n.foldl};var Ue=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:h(t.Semigroup0())(u.acc)(h(t.Semigroup0())(r)(i))}}};return Gn(n)(a)({init:!0,acc:bn(t)})(e).acc}}}};var Ut={foldr:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof D)return n(r.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof D)return n(t)(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof y)return bn(n);if(r instanceof D)return t(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name])}}}};var Es=function(n){return function(t){return function(r){return jn(n)(function(e){return function(a){return h(t.Semigroup0())(r(e))(a)}})(bn(t))}}},J={foldr:ss,foldl:ps,foldMap:function(n){return Es(J)(n)}};var Mt=function(n){return n.foldMap};var ca=function(n){return function(t){return yi()()()()(pu)(Mt(n)(fc(t)))}};var Fs=function(n){return function(t){for(var r=t.length,e=Array(r),a=0;a<r;a++)e[a]=n(a)(t[a]);return e}};var be=function(n){return n};var ge={map:function(n){return function(t){return n(t)}}};var As={apply:function(n){return function(t){return n(t)}},Functor0:function(){return ge}},Iy={bind:function(n){return function(t){return t(n)}},Apply0:function(){return As}},Sy={pure:be,Apply0:function(){return As}},it={Applicative0:function(){return Sy},Bind1:function(){return Iy}};var He=function(n){return n.mapWithIndex};var co={mapWithIndex:Fs,Functor0:function(){return mt}};var Te=function(n){return n.foldrWithIndex};var Qr=function(n){return n.foldlWithIndex};var qe=function(n){return n.foldMapWithIndex};var Ps=function(){function n(a){return[a]}function t(a){return function(u){return[a,u]}}function r(a){return function(u){return function(i){return[a,u,i]}}}function e(a){return function(u){return a.concat(u)}}return function(a){return function(u){return function(i){return function(f){return function(_){function l(s,p){switch(p-s){case 0:return i([]);case 1:return u(n)(f(_[s]));case 2:return a(u(t)(f(_[s])))(f(_[s+1]));case 3:return a(a(u(r)(f(_[s])))(f(_[s+1])))(f(_[s+2]));default:var m=s+Math.floor((p-s)/4)*2;return a(u(e)(l(s,m)))(l(m,p))}}return l(0,_.length)}}}}}}();var Dr=function(n){return n.traverse};var Rs=function(n){return function(t){return Dr(n)(t)(on(Y))}},ze={traverse:function(n){return Ps(Cn(n.Apply0()))(d(n.Apply0().Functor0()))(c(n))},sequence:function(n){return Rs(ze)(n)},Functor0:function(){return mt},Foldable1:function(){return J}};var he=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var Ai=function(n){return function(t){return new he(t,Dn(n))}};var st=function(){function n(){}return n.value=new n,n}(),rn=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),xi=function(n){return n},Pb=function(n){return new rn(n.value0,n.value1)};var Nb=function(n){var t=function(r){return function(e){var a=r,u=!1,i;function f(_,l){if(l instanceof rn&&l.value1 instanceof rn&&l.value1.value1 instanceof rn){a=new rn(l,_),e=l.value1.value1.value1;return}var s=function(m){return m instanceof rn&&m.value1 instanceof rn&&m.value1.value1 instanceof st?new rn(n(m.value0),new rn(n(m.value1.value0),st.value)):m instanceof rn&&m.value1 instanceof st?new rn(n(m.value0),st.value):st.value},p=function(m){return function(o){var v=m,$=!1,hn;function Vn(Pn,Sr){if(Pn instanceof rn&&Pn.value0 instanceof rn&&Pn.value0.value1 instanceof rn&&Pn.value0.value1.value1 instanceof rn){v=Pn.value1,o=new rn(n(Pn.value0.value0),new rn(n(Pn.value0.value1.value0),new rn(n(Pn.value0.value1.value1.value0),Sr)));return}return $=!0,Sr}for(;!$;)hn=Vn(v,o);return hn}};return u=!0,p(_)(s(l))}for(;!u;)i=f(a,e);return i}};return t(st.value)},gc={map:Nb};var Yr={foldr:function(n){return function(t){var r=function(){var a=function(u){return function(i){var f=u,_=!1,l;function s(p,m){if(m instanceof st)return _=!0,p;if(m instanceof rn){f=new rn(m.value0,p),i=m.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[p.constructor.name,m.constructor.name])}for(;!_;)l=s(f,i);return l}};return a(st.value)}(),e=Gn(Yr)(pt(n))(t);return function(a){return e(r(a))}}},foldl:function(n){var t=function(r){return function(e){var a=r,u=!1,i;function f(_,l){if(l instanceof st)return u=!0,_;if(l instanceof rn){a=n(_)(l.value0),e=l.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[l.constructor.name])}for(;!u;)i=f(a,e);return i}};return t},foldMap:function(n){return function(t){return Gn(Yr)(function(r){var e=h(n.Semigroup0())(r);return function(a){return e(t(a))}})(bn(n))}}};var Du={append:function(n){return function(t){return jn(Yr)(rn.create)(t)(n)}}};var Cc={append:function(n){return function(t){return new he(n.value0,h(Du)(n.value1)(Pb(t)))}}};var Bs={alt:h(Du),Functor0:function(){return gc}},Tc=function(){return{empty:st.value,Alt0:function(){return Bs}}}();var Hs=function(n){return n()};var qs=function(n){throw new Error(n)};var zs=function(){return qs};var Wb=Hs,oe=function(n){return Wb(function(){return zs()(n)})};function js(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}function Gs(n){return function(t){return function(r){return r[n]=t(r[n]),r}}}var Ec=function(n){return function(t){return function(r){return function(e){return n(t,r,e)}}}};var Qs=Ma;var Ys=function(){return function(){return function(n){return function(t){return function(r){return function(e){return Gs(Ot(n)(t))(r)(e)}}}}}};var Zs=Y,Ks=function(n){return function(t){return n(js(t))}};var tg=function(n){return n},rg=function(n){return n.mappingWithIndex};var eg=function(n){return n.mapping};var Li={mapRecordWithIndexBuilder:function(n){return function(t){return on(Zs)}}},np=function(n){return n.mapRecordWithIndexBuilder},so=function(n){return function(t){return function(r){return function(){return function(){return{mapRecordWithIndexBuilder:function(e){return function(a){return ua(Qs)(Ys()()(n)(M.value)(rg(t)(a)(M.value)))(np(r)(M.value)(a))}}}}}}}};var tp=function(){return function(n){return{hmap:function(){var t=np(n)(M.value);return function(r){return Ks(t(tg(r)))}}()}}};var rp=function(n){return n.hmap},po=function(n){return{mappingWithIndex:function(t){return function(r){return eg(n)(t)}}}};var ag=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),mo=function(n){return function(t){return{mapping:function(r){return d(Hr)(cu(n))}}}},ep=function(n){return function(t){return rp(n)(new ag(t))}};var ap=F;var op=function(n){return function(t){return function(){return n(t())}}},up=function(n){return function(){return n}},ip=function(n){return function(t){return function(){return t(n())()}}};function vt(n){return function(){return{value:n}}}var et=function(n){return function(){return n.value}},fp=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}},Bt=function(n){return function(t){return function(){return t.value=n}}};var Zr=function(n){return function(t){return function(r){return b(n.Bind1())(t)(function(e){return b(n.Bind1())(r)(function(a){return c(n.Applicative0())(e(a))})})}}};var Ac=function(n){return function(){return n}},cp=function(n){return function(t){return function(){return t(n())()}}};var lp=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},vo={Applicative0:function(){return ur},Bind1:function(){return Oa}},Oa={bind:cp,Apply0:function(){return xc(0)}},ur={pure:Ac,Apply0:function(){return xc(0)}},_p=lp("functorEffect","Effect",function(){return{map:tu(ur)}}),xc=lp("applyEffect","Effect",function(){return{apply:Zr(vo),Functor0:function(){return _p(0)}}}),Fn=_p(20),Yn=xc(23),sp=function(n){return{append:mr(Yn)(h(n))}},ie=function(n){return{mempty:Ac(bn(n)),Semigroup0:function(){return sp(n.Semigroup0())}}};var pp=function(n){return function(){return{value:n}}};var sa=function(n){return function(){return n.value}},mp=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}},bu=function(n){return function(t){return function(){t.value=n}}};var Wa=pp,cg=mp,Lc=function(n){return cg(function(t){var r=n(t);return{state:r,value:r}})},Ic=function(n){return function(t){return z(Fn)(Lc(n)(t))}};var mg=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},vg=fp,St=function(n){return vg(function(t){var r=n(t);return{state:r,value:r}})},dt={map:op},Si={Applicative0:function(){return _r},Bind1:function(){return $i}},$i={bind:ip,Apply0:function(){return Sc(0)}},_r={pure:up,Apply0:function(){return Sc(0)}},Sc=mg("applyST","Control.Monad.ST.Internal",function(){return{apply:Zr(Si),Functor0:function(){return dt}}}),dp=Sc(46);var Dp={liftST:on(Y),Monad0:function(){return Si}},yp={liftST:ap,Monad0:function(){return vo}},I=function(n){return n.liftST};var dg=function(n){return function(t){if(n<1)return[];var r=new Array(n);return r.fill(t)}},Dg=function(n){return function(t){for(var r=[],e=0,a=0;a<n;a++)r[e++]=t;return r}},$c=typeof Array.prototype.fill=="function"?dg:Dg,yg=function(){function n(a,u){this.head=a,this.tail=u}var t={};function r(a){return function(u){return new n(a,u)}}function e(a){for(var u=[],i=0,f=a;f!==t;)u[i++]=f.head,f=f.tail;return u}return function(a){return function(u){return e(a(r)(t)(u))}}}(),Ve=function(n){return n.length};var bp=function(n){return function(t){return function(r){return function(e){return e<0||e>=r.length?t:n(r[e])}}}},gp=function(n){return function(t){return function(r){return function(e){for(var a=0;a<e.length;a++){var u=r(e[a]);if(t(u))return u}return n}}}},Cp=function(n){return function(t){return function(r){return function(e){for(var a=0,u=e.length;a<u;a++)if(r(e[a]))return n(a);return t}}}};var Tp=function(n){return function(t){return function(r){return function(e){if(r<0||r>=e.length)return t;var a=e.slice();return a.splice(r,1),n(a)}}}};var Cu=function(n){return function(t){return t.filter(n)}},Ni=function(n){return function(t){for(var r=[],e=[],a=0;a<t.length;a++){var u=t[a];n(u)?r.push(u):e.push(u)}return{yes:r,no:e}}};var bg=function(){function n(t,r,e,a,u,i){var f,_,l,s,p,m,o;for(f=u+(i-u>>1),f-u>1&&n(t,r,a,e,u,f),i-f>1&&n(t,r,a,e,f,i),_=u,l=f,s=u;_<f&&l<i;)p=a[_],m=a[l],o=r(t(p)(m)),o>0?(e[s++]=m,++l):(e[s++]=p,++_);for(;_<f;)e[s++]=a[_++];for(;l<i;)e[s++]=a[l++]}return function(t){return function(r){return function(e){var a;return e.length<2?e:(a=e.slice(0),n(t,r,a,e.slice(0),0,e.length),a)}}}}();var hp=function(n){return function(t){return n[t]}};function Fe(){return[]}var Pc=function(n){return function(t){return function(){return t.push.apply(t,n)}}};var ki=function(n){return function(t){return function(r){return function(e){return function(){return e.splice.apply(e,[n,t].concat(r))}}}}},Me=function(n){return function(){return n}};function Ep(n){return function(){return n.slice()}}var Ri=Ep,Nc=Ep,Cg=function(){function n(t,r,e,a,u,i){var f,_,l,s,p,m,o;for(f=u+(i-u>>1),f-u>1&&n(t,r,a,e,u,f),i-f>1&&n(t,r,a,e,f,i),_=u,l=f,s=u;_<f&&l<i;)p=a[_],m=a[l],o=r(t(p)(m)),o>0?(e[s++]=m,++l):(e[s++]=p,++_);for(;_<f;)e[s++]=a[_++];for(;l<i;)e[s++]=a[l++]}return function(t){return function(r){return function(e){return function(){return e.length<2||n(t,r,e,e.slice(0),0,e.length),e}}}}}();var Ap=function(n){return function(t){return function(){var e=Nc(t)();return n(e)(),Me(e)()}}};var Kr=function(n){return Pc([n])};var Eg=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var Fg=function(n){return function(){var r=et(n.value1)();return St(function(e){return e+1|0})(n.value1)(),n.value0(r)}};var Oi=function(n){return d(dt)(Eg.create(n))(vt(0))},Wi=function(n){return function(t){return function(){for(var e=vt(!1)();d(dt)(Xr(lr))(et(e))();)(function(){var u=Fg(n)();if(u instanceof D)return t(u.value0)();if(u instanceof y)return z(dt)(Bt(!0)(e))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[u.constructor.name])})();return{}}}};var $p=function(){return hp};var Ui=function(n){return function(t){return Ap(Kr(t))(n)()}},Pp=function(n){return[n]};var yo=function(){return bp(D.create)(y.value)}();var Bi=function(){return gp(y.value)(Za)}();var Oc=function(){return Cp(D.create)(y.value)}();var Wc=function(n){return function(t){return d(rt)($p()(t))(Oc(n)(t))}};var Np=function(){return Tp(D.create)(y.value)}(),Hi=function(n){return function(t){return function(r){return r.length===0?[]:Un(r)(function(e){return wr()(Np(e)(r))})(Oc(n(t))(r))}}};var Tu=function(n){return function(t){return h(ot)([n])(t)}};var Ig=pt(b(ci)),Uc=function(n){return Ig(function(){var t=Un([])(Pp);return function(r){return t(n(r))}}())};var U=function(){function n(){}return n.value=new n,n}(),en=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}(),An=function(){function n(t,r,e,a,u,i,f){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i,this.value6=f}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return function(f){return new n(t,r,e,a,u,i,f)}}}}}}},n}(),pa=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),Je=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),ma=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),we=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),va=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),zi=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}();var qp=function(n){return function(t){return new en(U.value,n,t,U.value)}};var go=function(n){return function(t){var r=_n(n),e=function(a){var u=!1,i;function f(_){if(_ instanceof U)return u=!0,y.value;if(_ instanceof en){var l=r(t)(_.value1);if(l instanceof vn)return u=!0,new D(_.value2);if(l instanceof cn){a=_.value0;return}a=_.value3;return}if(_ instanceof An){var s=r(t)(_.value1);if(s instanceof vn)return u=!0,new D(_.value2);var p=r(t)(_.value4);if(p instanceof vn)return u=!0,new D(_.value5);if(s instanceof cn){a=_.value0;return}if(p instanceof dn){a=_.value6;return}a=_.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[_.constructor.name])}for(;!u;)i=f(a);return i};return e}};var wt=function(n){return function(t){return function(r){var e=n,a=t,u=!1,i;function f(_,l,s){if(l instanceof st)return u=!0,s;if(l instanceof rn){if(l.value0 instanceof pa){e=_,a=l.value1,r=new en(s,l.value0.value0,l.value0.value1,l.value0.value2);return}if(l.value0 instanceof Je){e=_,a=l.value1,r=new en(l.value0.value0,l.value0.value1,l.value0.value2,s);return}if(l.value0 instanceof ma){e=_,a=l.value1,r=new An(s,l.value0.value0,l.value0.value1,l.value0.value2,l.value0.value3,l.value0.value4,l.value0.value5);return}if(l.value0 instanceof we){e=_,a=l.value1,r=new An(l.value0.value0,l.value0.value1,l.value0.value2,s,l.value0.value3,l.value0.value4,l.value0.value5);return}if(l.value0 instanceof va){e=_,a=l.value1,r=new An(l.value0.value0,l.value0.value1,l.value0.value2,l.value0.value3,l.value0.value4,l.value0.value5,s);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[l.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[l.constructor.name,s.constructor.name])}for(;!u;)i=f(e,a,r);return i}}},Ji=function(n){return function(t){return function(r){var e=function(i){return function(f){var _=i,l=!1,s;function p(m,o){if(m instanceof st)return l=!0,new en(o.value0,o.value1,o.value2,o.value3);if(m instanceof rn){if(m.value0 instanceof pa)return l=!0,wt(n)(m.value1)(new An(o.value0,o.value1,o.value2,o.value3,m.value0.value0,m.value0.value1,m.value0.value2));if(m.value0 instanceof Je)return l=!0,wt(n)(m.value1)(new An(m.value0.value0,m.value0.value1,m.value0.value2,o.value0,o.value1,o.value2,o.value3));if(m.value0 instanceof ma){_=m.value1,f=new zi(new en(o.value0,o.value1,o.value2,o.value3),m.value0.value0,m.value0.value1,new en(m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5));return}if(m.value0 instanceof we){_=m.value1,f=new zi(new en(m.value0.value0,m.value0.value1,m.value0.value2,o.value0),o.value1,o.value2,new en(o.value3,m.value0.value3,m.value0.value4,m.value0.value5));return}if(m.value0 instanceof va){_=m.value1,f=new zi(new en(m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3),m.value0.value4,m.value0.value5,new en(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[m.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[m.constructor.name,o.constructor.name])}for(;!l;)s=p(_,f);return s}},a=_n(n),u=function(i){return function(f){var _=i,l=!1,s;function p(m,o){if(o instanceof U)return l=!0,e(m)(new zi(U.value,t,r,U.value));if(o instanceof en){var v=a(t)(o.value1);if(v instanceof vn)return l=!0,wt(n)(m)(new en(o.value0,t,r,o.value3));if(v instanceof cn){_=new rn(new pa(o.value1,o.value2,o.value3),m),f=o.value0;return}_=new rn(new Je(o.value0,o.value1,o.value2),m),f=o.value3;return}if(o instanceof An){var $=a(t)(o.value1);if($ instanceof vn)return l=!0,wt(n)(m)(new An(o.value0,t,r,o.value3,o.value4,o.value5,o.value6));var hn=a(t)(o.value4);if(hn instanceof vn)return l=!0,wt(n)(m)(new An(o.value0,o.value1,o.value2,o.value3,t,r,o.value6));if($ instanceof cn){_=new rn(new ma(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),m),f=o.value0;return}if($ instanceof dn&&hn instanceof cn){_=new rn(new we(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),m),f=o.value3;return}_=new rn(new va(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),m),f=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[m.constructor.name,o.constructor.name])}for(;!l;)s=p(_,f);return s}};return u(st.value)}}},Yg=function(n){return function(t){var r=function(f){return function(_){var l=f,s=!1,p;function m(o,v){if(o instanceof st)return s=!0,v;if(o instanceof rn){if(o.value0 instanceof pa&&o.value0.value2 instanceof U&&v instanceof U)return s=!0,wt(n)(o.value1)(new en(U.value,o.value0.value0,o.value0.value1,U.value));if(o.value0 instanceof Je&&o.value0.value0 instanceof U&&v instanceof U)return s=!0,wt(n)(o.value1)(new en(U.value,o.value0.value1,o.value0.value2,U.value));if(o.value0 instanceof pa&&o.value0.value2 instanceof en){l=o.value1,_=new An(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof Je&&o.value0.value0 instanceof en){l=o.value1,_=new An(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v);return}return o.value0 instanceof pa&&o.value0.value2 instanceof An?(s=!0,wt(n)(o.value1)(new en(new en(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new en(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof Je&&o.value0.value0 instanceof An?(s=!0,wt(n)(o.value1)(new en(new en(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new en(o.value0.value0.value6,o.value0.value1,o.value0.value2,v)))):o.value0 instanceof ma&&o.value0.value2 instanceof U&&o.value0.value5 instanceof U&&v instanceof U?(s=!0,wt(n)(o.value1)(new An(U.value,o.value0.value0,o.value0.value1,U.value,o.value0.value3,o.value0.value4,U.value))):o.value0 instanceof we&&o.value0.value0 instanceof U&&o.value0.value5 instanceof U&&v instanceof U?(s=!0,wt(n)(o.value1)(new An(U.value,o.value0.value1,o.value0.value2,U.value,o.value0.value3,o.value0.value4,U.value))):o.value0 instanceof va&&o.value0.value0 instanceof U&&o.value0.value3 instanceof U&&v instanceof U?(s=!0,wt(n)(o.value1)(new An(U.value,o.value0.value1,o.value0.value2,U.value,o.value0.value4,o.value0.value5,U.value))):o.value0 instanceof ma&&o.value0.value2 instanceof en?(s=!0,wt(n)(o.value1)(new en(new An(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof we&&o.value0.value0 instanceof en?(s=!0,wt(n)(o.value1)(new en(new An(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof we&&o.value0.value5 instanceof en?(s=!0,wt(n)(o.value1)(new en(o.value0.value0,o.value0.value1,o.value0.value2,new An(v,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof va&&o.value0.value3 instanceof en?(s=!0,wt(n)(o.value1)(new en(o.value0.value0,o.value0.value1,o.value0.value2,new An(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,v)))):o.value0 instanceof ma&&o.value0.value2 instanceof An?(s=!0,wt(n)(o.value1)(new An(new en(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new en(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof we&&o.value0.value0 instanceof An?(s=!0,wt(n)(o.value1)(new An(new en(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new en(o.value0.value0.value6,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof we&&o.value0.value5 instanceof An?(s=!0,wt(n)(o.value1)(new An(o.value0.value0,o.value0.value1,o.value0.value2,new en(v,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new en(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof va&&o.value0.value3 instanceof An?(s=!0,wt(n)(o.value1)(new An(o.value0.value0,o.value0.value1,o.value0.value2,new en(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new en(o.value0.value3.value6,o.value0.value4,o.value0.value5,v)))):(s=!0,oe("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!s;)p=m(l,_);return p}},e=function(f){return function(_){var l=f,s=!1,p;function m(o,v){if(v instanceof en&&v.value0 instanceof U&&v.value3 instanceof U)return s=!0,r(o)(U.value);if(v instanceof en){l=new rn(new Je(v.value0,v.value1,v.value2),o),_=v.value3;return}if(v instanceof An&&v.value0 instanceof U&&v.value3 instanceof U&&v.value6 instanceof U)return s=!0,r(new rn(new Je(U.value,v.value1,v.value2),o))(U.value);if(v instanceof An){l=new rn(new va(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),_=v.value6;return}return s=!0,oe("The impossible happened in partial function `removeMaxNode`.")}for(;!s;)p=m(l,_);return p}},a=function(f){var _=!1,l;function s(p){if(p instanceof en&&p.value3 instanceof U)return _=!0,{key:p.value1,value:p.value2};if(p instanceof en){f=p.value3;return}if(p instanceof An&&p.value6 instanceof U)return _=!0,{key:p.value4,value:p.value5};if(p instanceof An){f=p.value6;return}return _=!0,oe("The impossible happened in partial function `maxNode`.")}for(;!_;)l=s(f);return l},u=_n(n),i=function(f){return function(_){var l=f,s=!1,p;function m(o,v){if(v instanceof U)return s=!0,y.value;if(v instanceof en){var $=u(t)(v.value1);if(v.value3 instanceof U&&$ instanceof vn)return s=!0,new D(new T(v.value2,r(o)(U.value)));if($ instanceof vn){var hn=a(v.value0);return s=!0,new D(new T(v.value2,e(new rn(new pa(hn.key,hn.value,v.value3),o))(v.value0)))}if($ instanceof cn){l=new rn(new pa(v.value1,v.value2,v.value3),o),_=v.value0;return}l=new rn(new Je(v.value0,v.value1,v.value2),o),_=v.value3;return}if(v instanceof An){var Vn=function(){return v.value0 instanceof U&&v.value3 instanceof U&&v.value6 instanceof U}(),$=u(t)(v.value4),Pn=u(t)(v.value1);if(Vn&&Pn instanceof vn)return s=!0,new D(new T(v.value2,wt(n)(o)(new en(U.value,v.value4,v.value5,U.value))));if(Vn&&$ instanceof vn)return s=!0,new D(new T(v.value5,wt(n)(o)(new en(U.value,v.value1,v.value2,U.value))));if(Pn instanceof vn){var hn=a(v.value0);return s=!0,new D(new T(v.value2,e(new rn(new ma(hn.key,hn.value,v.value3,v.value4,v.value5,v.value6),o))(v.value0)))}if($ instanceof vn){var hn=a(v.value3);return s=!0,new D(new T(v.value5,e(new rn(new we(v.value0,v.value1,v.value2,hn.key,hn.value,v.value6),o))(v.value3)))}if(Pn instanceof cn){l=new rn(new ma(v.value1,v.value2,v.value3,v.value4,v.value5,v.value6),o),_=v.value0;return}if(Pn instanceof dn&&$ instanceof cn){l=new rn(new we(v.value0,v.value1,v.value2,v.value4,v.value5,v.value6),o),_=v.value3;return}l=new rn(new va(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),_=v.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[v.constructor.name])}for(;!s;)p=m(l,_);return p}};return i(st.value)}},sr={foldr:function(n){return function(t){return function(r){if(r instanceof U)return t;if(r instanceof en)return jn(sr)(n)(n(r.value2)(jn(sr)(n)(t)(r.value3)))(r.value0);if(r instanceof An)return jn(sr)(n)(n(r.value2)(jn(sr)(n)(n(r.value5)(jn(sr)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof U)return t;if(r instanceof en)return Gn(sr)(n)(n(Gn(sr)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof An)return Gn(sr)(n)(n(Gn(sr)(n)(n(Gn(sr)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof U)return bn(n);if(r instanceof en)return h(n.Semigroup0())(Mt(sr)(n)(t)(r.value0))(h(n.Semigroup0())(t(r.value2))(Mt(sr)(n)(t)(r.value3)));if(r instanceof An)return h(n.Semigroup0())(Mt(sr)(n)(t)(r.value0))(h(n.Semigroup0())(t(r.value2))(h(n.Semigroup0())(Mt(sr)(n)(t)(r.value3))(h(n.Semigroup0())(t(r.value5))(Mt(sr)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[r.constructor.name])}}}},Vt={foldrWithIndex:function(n){return function(t){return function(r){if(r instanceof U)return t;if(r instanceof en)return Te(Vt)(n)(n(r.value1)(r.value2)(Te(Vt)(n)(t)(r.value3)))(r.value0);if(r instanceof An)return Te(Vt)(n)(n(r.value1)(r.value2)(Te(Vt)(n)(n(r.value4)(r.value5)(Te(Vt)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[r.constructor.name])}}},foldlWithIndex:function(n){return function(t){return function(r){if(r instanceof U)return t;if(r instanceof en)return Qr(Vt)(n)(n(r.value1)(Qr(Vt)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof An)return Qr(Vt)(n)(n(r.value4)(Qr(Vt)(n)(n(r.value1)(Qr(Vt)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[r.constructor.name])}}},foldMapWithIndex:function(n){return function(t){return function(r){if(r instanceof U)return bn(n);if(r instanceof en)return h(n.Semigroup0())(qe(Vt)(n)(t)(r.value0))(h(n.Semigroup0())(t(r.value1)(r.value2))(qe(Vt)(n)(t)(r.value3)));if(r instanceof An)return h(n.Semigroup0())(qe(Vt)(n)(t)(r.value0))(h(n.Semigroup0())(t(r.value1)(r.value2))(h(n.Semigroup0())(qe(Vt)(n)(t)(r.value3))(h(n.Semigroup0())(t(r.value4)(r.value5))(qe(Vt)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[r.constructor.name])}}},Foldable0:function(){return sr}},zp=function(){return Te(Vt)(function(n){return function(t){return function(r){return new rn(n,r)}}})(st.value)}();var Ae=function(){return U.value}();var zc=function(n){return function(t){return function(r){return Un(r)(qt)(Yg(n)(t)(r))}}};var xe=function(n){return function(t){return function(r){return function(e){var a=t(go(n)(r)(e));if(a instanceof y)return zc(n)(r)(e);if(a instanceof D)return Ji(n)(r)(a.value0)(e);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[a.constructor.name])}}}};var Zg=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return function(f){return xe(n)(function(){var _=Un(f)(t(f));return function(l){return D.create(_(l))}}())(u)(i)}}};return Qr(Vt)(a)(e)(r)}}}};var Vp=function(n){return Zg(n)(L)};var Jp={compact:function(n){return function(){var r=Fe(),e=Oi(function(a){return yo(n)(a)})();return Wi(e)(function(){var a=z(dt);return function(u){return a(function(i){if(i instanceof y)return c(_r)(0);if(i instanceof D)return Kr(i.value0)(r);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[i.constructor.name])}(u))}}())(),Me(r)()}()},separate:function(n){return function(){var r=Fe(),e=Fe(),a=Oi(function(u){return yo(n)(u)})();return Wi(a)(function(){var u=z(dt);return function(i){return u(function(f){if(f instanceof q)return Kr(f.value0)(r);if(f instanceof W)return Kr(f.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[f.constructor.name])}(i))}}())(),Cn(dp)(d(dt)(function(u){return function(i){return{left:u,right:i}}})(Me(r)))(Me(e))()}()}};var Ba=function(n){return n.compact};var jp={partitionMap:function(n){var t=function(r){return function(e){var a=n(e);if(a instanceof q)return{left:h(ot)(r.left)([a.value0]),right:r.right};if(a instanceof W)return{right:h(ot)(r.right)([a.value0]),left:r.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[a.constructor.name])}};return Gn(J)(t)({left:[],right:[]})},partition:Ni,filterMap:Uc,filter:Cu,Compactable0:function(){return Jp},Functor1:function(){return mt}};var yr=function(n){return n.filterMap};var Gp=function(n){return n.filter};var br={dimap:function(n){return function(t){return function(r){return function(e){return t(r(n(e)))}}}}},Xp=function(n){return n.dimap},Lr=function(n){return function(t){return Xp(n)(t)(on(Y))}};var uC=function(n){return function(t){return function(r){return Vp(n)(t)(r)}}};var Vc=function(n){return zp(n)};var Yp=function(n){return qp(n)(void 0)};var Jc=function(n){return{append:uC(n)}};var Zp={foldMap:function(n){return function(t){var r=Mt(Yr)(n)(t);return function(e){return r(Vc(e))}}},foldl:function(n){return function(t){var r=Gn(Yr)(n)(t);return function(e){return r(Vc(e))}}},foldr:function(n){return function(t){var r=jn(Yr)(n)(t);return function(e){return r(Vc(e))}}}};var iC=Ae;var Kp=function(n){return{mempty:iC,Semigroup0:function(){return Jc(n)}}};var nm=function(n){return function(t){return function(r){return zc(n)(t)(r)}}};function tm(n){return function(t){return function(){return setTimeout(t,n)}}}function rm(n){return function(){clearTimeout(n)}}var em=tm;var lC={eq:function(n){return function(t){return n===t}}},Gi={compare:function(n){return function(t){return _n(vr)(n)(t)}},Eq0:function(){return lC}};var am=rm;var To=function(n){return n.keepLatest};var Da=function(n){return n.fold};var Ha=function(n){return function(t){return function(r){return function(e){return yr(n.Filterable1())(qt)(Da(n)(function(a){return function(u){return d(Sa)(c(Ht))(t(a)(u.value0))}})(r)(new T(e,y.value)))}}}};function jc(n){return function(t){return n===t}}var Gc=jc;var vC=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},dC=function(n){return n};var DC=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(I(n)(vt(y.value)))(function(u){return b(n.Monad0().Bind1())(r(function(i){return I(n)(z(dt)(Bt(new D(i))(u)))}))(function(i){return b(n.Monad0().Bind1())(e(function(f){return b(n.Monad0().Bind1())(I(n)(et(u)))(Nr(t)(Ut)(function(_){return a(f(_))}))}))(function(f){return c(t)(tn(t.Apply0())(i)(f))})})})}}}}},Hn={map:function(n){return function(t){return function(r){return t(function(e){return r(n(e))})}}}};var yC=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(I(n)(vt(e)))(function(u){return r(function(i){return b(n.Monad0().Bind1())(I(n)(St(t(i))(u)))(a)})})}}}}},Fu=function(n){return function(t){return function(r){return function(e){return r(function(a){var u=t(a);if(u instanceof D)return e(u.value0);if(u instanceof y)return c(n)(void 0);throw new Error("Failed pattern match at FRP.Event (line 184, column 13 - line 186, column 27): "+[u.constructor.name])})}}}},Xc=function(n){return function(t){return Fu(n)(function(r){var e=t(r);if(e)return new D(r);if(!e)return y.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 25): "+[e.constructor.name])})}},Mu=function(n){return{compact:Fu(n)(on(Y)),separate:function(t){return{left:Fu(n)(function(r){if(r instanceof q)return new D(r.value0);if(r instanceof W)return y.value;throw new Error("Failed pattern match at FRP.Event (line 95, column 13 - line 97, column 33): "+[r.constructor.name])})(t),right:Fu(n)(function(r){if(r instanceof W)return new D(r.value0);if(r instanceof q)return y.value;throw new Error("Failed pattern match at FRP.Event (line 102, column 13 - line 104, column 32): "+[r.constructor.name])})(t)}}}},se=function(n){return{filter:Xc(n),filterMap:Fu(n),partition:function(t){return function(r){return{yes:Xc(n)(t)(r),no:Xc(n)(function(){var e=Xr(lr);return function(a){return e(t(a))}}())(r)}}},partitionMap:function(t){return function(r){return{left:yr(se(n))(function(){var e=Gr(D.create)(L(y.value));return function(a){return e(t(a))}}())(r),right:yr(se(n))(function(e){return ec(t(e))})(r)}}},Compactable0:function(){return Mu(n)},Functor1:function(){return Hn}}},bC=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(I(n)(vt(y.value)))(function(u){return b(n.Monad0().Bind1())(I(n)(Fe))(function(i){return b(n.Monad0().Bind1())(I(n)(vt(y.value)))(function(f){return b(n.Monad0().Bind1())(I(n)(Fe))(function(_){return b(n.Monad0().Bind1())(I(n)(vt(!0)))(function(l){return b(n.Monad0().Bind1())(r(function(s){return b(n.Monad0().Bind1())(I(n)(et(l)))(function(p){return p?I(n)(z(dt)(Kr(s)(i))):b(n.Monad0().Bind1())(I(n)(Bt(new D(s))(u)))(function(){return b(n.Monad0().Bind1())(I(n)(et(f)))(Nr(t)(Ut)(function(m){return a(m(s))}))})})}))(function(s){return b(n.Monad0().Bind1())(e(function(p){return b(n.Monad0().Bind1())(I(n)(et(l)))(function(m){return m?I(n)(z(dt)(Kr(p)(_))):b(n.Monad0().Bind1())(I(n)(Bt(new D(p))(f)))(function(){return b(n.Monad0().Bind1())(I(n)(et(u)))(Nr(t)(Ut)(function(o){return a(p(o))}))})})}))(function(p){return b(n.Monad0().Bind1())(I(n)(Bt(!1)(l)))(function(){return b(n.Monad0().Bind1())(I(n)(Ri(i)))(function(m){return b(n.Monad0().Bind1())(I(n)(Ri(_)))(function(o){return Rn(On)(n.Monad0().Bind1())(Wt(t)(J)(m)(function(v){return b(n.Monad0().Bind1())(I(n)(Bt(new D(v))(u)))(function(){return Wt(t)(J)(o)(function($){return b(n.Monad0().Bind1())(I(n)(Bt(new D($))(f)))(function(){return a($(v))})})})}))(function(){return b(n.Monad0().Bind1())(I(n)(ki(0)(Ve(m))([])(i)))(function(){return b(n.Monad0().Bind1())(I(n)(ki(0)(Ve(o))([])(_)))(function(){return c(t)(tn(t.Apply0())(s)(p))})})})})})})})})})})})})})}}}}},$t=function(n){return function(t){return t}(Qi(269).subscribe)(n)},nr=function(n){return function(t){return t}(Qi(292).makeEvent)(n)},Xi=function(n){return function(t){return Rn(On)(n.Monad0().Bind1())(c(n.Monad0().Applicative0())(void 0))(function(){return function(r){return r(n)(t)}(Qi(308).create)})}},Qi=vC("backdoor","FRP.Event",function(){return{makeEvent:dC,create:function(){var n=function(t){return function(r){return b(t.Monad0().Bind1())(I(t)(vt([])))(function(e){return c(t.Monad0().Applicative0())({event:function(a){return b(r.Monad0().Bind1())(I(r)(St(function(u){return h(ot)(u)([a])})(e)))(function(){return c(r.Monad0().Applicative0())(b(r.Monad0().Bind1())(I(r)(St(Hi(Gc)(a))(e)))(function(){return c(r.Monad0().Applicative0())(void 0)}))})},push:function(a){return b(r.Monad0().Bind1())(I(r)(et(e)))(Nr(r.Monad0().Applicative0())(J)(function(u){return u(a)}))}})})}};return n}(),subscribe:function(){var n=function(t){return function(r){return t(r)}};return n}(),bus:function(){var n=function(t){return function(r){return nr(function(e){return b(t.Monad0().Bind1())(Xi(t)(t))(function(a){return Rn(On)(t.Monad0().Bind1())(e(r(a.push)(a.event)))(function(){return c(t.Monad0().Applicative0())(c(t.Monad0().Applicative0())(void 0))})})})}};return n}(),memoize:function(){var n=function(t){return function(r){return function(e){return nr(function(a){return b(t.Monad0().Bind1())(Xi(t)(t))(function(u){return Rn(On)(t.Monad0().Bind1())(a(e(u.event)))(function(){return $t(r)(u.push)})})})}}};return n}(),hot:function(){var n=function(t){return function(r){return b(t.Monad0().Bind1())(Xi(t)(t))(function(e){return b(t.Monad0().Bind1())($t(r)(e.push))(function(a){return c(t.Monad0().Applicative0())({event:e.event,unsubscribe:a})})})}};return n}(),mailboxed:function(){var n=function(t){return function(r){return function(e){return function(a){return nr(function(u){return b(r.Monad0().Bind1())(I(r)(vt(Ae)))(function(i){return Rn(On)(r.Monad0().Bind1())(u(a(function(f){return nr(function(_){return Rn(On)(r.Monad0().Bind1())(z(r.Monad0().Bind1().Apply0().Functor0())(I(r)(St(xe(t)(function(l){if(l instanceof y)return new D([_]);if(l instanceof D)return new D(h(ot)(l.value0)([_]));throw new Error("Failed pattern match at FRP.Event (line 490, column 21 - line 492, column 55): "+[l.constructor.name])})(f))(i))))(function(){return c(r.Monad0().Applicative0())(z(r.Monad0().Bind1().Apply0().Functor0())(I(r)(St(xe(t)(function(l){if(l instanceof y)return y.value;if(l instanceof D)return new D(Hi(Gc)(_)(l.value0));throw new Error("Failed pattern match at FRP.Event (line 499, column 21 - line 501, column 69): "+[l.constructor.name])})(f))(i))))})})})))(function(){return b(r.Monad0().Bind1())($t(e)(function(f){return b(r.Monad0().Bind1())(I(r)(et(i)))(function(_){var l=go(t)(f.address)(_);if(l instanceof y)return c(r.Monad0().Applicative0())(void 0);if(l instanceof D)return Wt(r.Monad0().Applicative0())(J)(l.value0)(function(s){return s(f.payload)});throw new Error("Failed pattern match at FRP.Event (line 508, column 13 - line 510, column 49): "+[l.constructor.name])})}))(function(f){return c(r.Monad0().Applicative0())(Rn(On)(r.Monad0().Bind1())(z(r.Monad0().Bind1().Apply0().Functor0())(I(r)(Bt(Ae)(i))))(function(){return f}))})})})})}}}};return n}(),delay:function(){var n=function(t){return function(r){return nr(function(e){return function(){var u=Wa(bn(Kp(Gi)))(),i=$t(r)(function(f){return function(){var l=Wa(y.value)(),s=em(t)(function(){e(f)();var m=sa(l)();return Un(c(ur)(void 0))(function(o){return Ic(nm(Gi)(o))(u)})(m)()})();return bu(new D(s))(l)(),Ic(h(Jc(Gi))(Yp(s)))(u)()}})();return function(){var _=sa(u)();return Wt(ur)(Zp)(_)(am)(),i()}}})}};return n}()}}),om=Qi(423),Qc=function(n){return function(t){return function(r){return r(n)}(om.bus)(t)}};var um=function(n){return function(t){return function(r){return r(n)}(om.memoize)(t)}},gC=function(n){return function(t){return function(r){return function(e){return b(t.Bind1())(Xi(n)(n))(function(a){var u=r(a.event);return b(t.Bind1())($t(u.input)(a.push))(function(i){return b(t.Bind1())($t(u.output)(e))(function(f){return c(t.Applicative0())(tn(t.Bind1().Apply0())(i)(f))})})})}}}},CC=function(n){return function(t){return function(r){return b(n.Monad0().Bind1())(I(n)(vt(y.value)))(function(e){return b(n.Monad0().Bind1())(t(function(a){return Rn(On)(n.Monad0().Bind1())(b(n.Monad0().Bind1())(I(n)(et(e)))(bi(n.Monad0().Applicative0())(Ut)))(function(){return b(n.Monad0().Bind1())($t(a)(r))(function(u){return I(n)(z(dt)(Bt(new D(u))(e)))})})}))(function(a){return c(n.Monad0().Applicative0())(Rn(On)(n.Monad0().Bind1())(b(n.Monad0().Bind1())(I(n)(et(e)))(bi(n.Monad0().Applicative0())(Ut)))(function(){return a}))})})}}},TC=function(n){return{apply:function(t){return function(r){return bC(n)(n.Monad0().Applicative0())(t)(d(Hn)(Ko)(r))}},Functor0:function(){return Hn}}};var x=function(n){return{pure:function(t){return function(r){return ei(n.Monad0().Bind1().Apply0().Functor0())(c(n.Monad0().Applicative0())(void 0))(r(t))}},Apply0:function(){return TC(n)}}};var Nn=function(n){return{alt:function(t){return function(r){return function(e){return Cn(n.Apply0())(d(n.Apply0().Functor0())(function(a){return function(u){return tn(n.Apply0())(a)(u)}})(t(e)))(r(e))}}},Functor0:function(){return Hn}}};var j=function(n){return{empty:function(t){return c(n)(c(n)(void 0))},Alt0:function(){return Nn(n)}}},hC=function(n){return{Applicative0:function(){return x(n)},Plus1:function(){return j(n.Monad0().Applicative0())}}},gr=function(n){return{fold:yC(n),keepLatest:CC(n),sampleOn:DC(n)(n.Monad0().Applicative0()),fix:gC(n)(n.Monad0()),Alternative0:function(){return hC(n)},Filterable1:function(){return se(n.Monad0().Applicative0())}}};var im="_____$__$_$$_vbus";function fm(n){return()=>{for(let t in n)delete n[t]}}function cm(n){return()=>{let t=(u,i,f,_)=>{let l=Object.keys(_);for(var s=0;s<l.length;s++)if(_[l[s]]instanceof Object&&_[l[s]][im]===im){let p={},m={};t(u,p,m,_[l[s]]),i[l[s]]=p,f[l[s]]=m}else{let p=`${Math.random()}`;u[p]={},i[l[s]]=m=>()=>{let o=Object.values(u[p]);for(var v=0;v<o.length;v++)o[v](m)()},f[l[s]]=m=>()=>{let o=`${Math.random()}`;return u[p][o]=m,()=>{u[p]&&u[p][o]&&delete u[p][o]}}}},r={},e={},a={};return t(r,e,a,n),{p:e,e:a,s:r}}}var Yc=function(n){return function(){return function(){return function(t){return function(r){return function(e){return ke(Ot(n)(t))(r)(e)}}}}}},Zc=function(n){return function(){return function(t){return function(r){return Mr(Ot(n)(t))(r)}}}};var Yi={vb:function(n){return function(t){return function(r){return{}}}}},lm=function(n){return n.vb},FC={vbus:function(){var n=function(){return function(r){return function(e){return function(a){return function(u){var i=lm(e)(M.value)(M.value)(M.value);return nr(function(f){return b(r.Monad0().Bind1())(cm(i))(function(_){return Rn(On)(r.Monad0().Bind1())(f(u(_.p)(_.e)))(function(){return c(r.Monad0().Applicative0())(fm(_.s))})})})}}}}},t=function(){return function(r){return function(e){return n()(r)(e)}}};return t}()},nl=function(){return function(n){return function(t){return function(r){return function(e){return e()(n)(t)}(FC.vbus)(r)}}}};var Eo=function(n){return function(){return function(){return function(t){return function(){return function(){return function(){return function(){return{vb:function(r){return function(e){return function(a){return Yc(n)()()(M.value)(void 0)(lm(t)(M.value)(M.value)(M.value))}}}}}}}}}}}};var ya=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),tl=function(){function n(){}return n.value=new n,n}();var wu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Au=function(){function n(){}return n.value=new n,n}(),Ki=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),nf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),tf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Fo=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Sn=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Mo={eq:function(n){return function(t){return n instanceof ya&&t instanceof ya?n.value0===t.value0:n instanceof tl&&t instanceof tl}}};var ft=function(n){return new tf(n)};var _m=function(n){return new nf(n)};var rf={Always0:function(){return Ka(ie(jr))},Always1:function(){return Ka(ie(ie(jr)))},Always2:function(){return Ka(ie(jr))},Always3:function(){return Ka(Pa(Y))},Always4:function(){return Ka(Pa(Y))},MonadST5:function(){return Dp}},ef={Always0:function(){return no(ie(jr))},Always1:function(){return no(ie(ie(jr)))},Always2:function(){return no(ie(jr))},Always3:function(){return no(Pa(Y))},Always4:function(){return no(Pa(Y))},MonadST5:function(){return yp}},af=function(){return function(n){return function(){return function(t){return function(r){return function(e){return function(a){return new Fo(nl()(n.MonadST5())(r)(e)(Lr(br)(ep(tp()(t))(M.value))(a)))}}}}}}};var sm=function(){return new Ki(0)}();var pm=function(){return Au.value}(),wo=function(){return wu.create}();var qa=function(n){return function(t){return function(r){return Qc(n.MonadST5())(Lr(br)(d(Hr)(cu(t)))(r))}}};var Ao=function(n){return function(t){return function(r){return new Fo(qa(n)(t)(r))}}};function mm(n){return()=>n.slice()}function vm(n){return t=>r=>()=>{r[n]=t}}function dm(n){return()=>n.slice()}var Dm=n=>t=>t[n];var Le=function(n){return n.reflectType};var bm=function(n){return Le(n)};var xo=mt;var of=function(){return function(n){return n}};var rl=function(){return function(){return function(){return function(){return function(){return function(n){var t=bm(n);return function(r){return Dm(t(r))}}}}}}};var gm=[];var el=function(){return function(){return function(n){return function(t){return Tu(n)(t)}}}};function Cm(n){return function(){var t={};for(var r in n)hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}}var ba={};function ol(n){return n()}function Tm(n){return function(t){return function(r){return function(e){var a=r;function u(f){return function(_){return t(_)(f)(e[f])}}for(var i in e)hasOwnProperty.call(e,i)&&(a=n(a)(u(i)));return a}}}}function uf(n){return function(t){var r=[];for(var e in t)hasOwnProperty.call(t,e)&&r.push(n(e)(t[e]));return r}}var PC=Object.keys||uf(function(n){return function(){return n}});function ul(n){return function(t){return function(r){return function(){return r[n]=t,r}}}}var il=function(n){return function(t){return function(){return delete t[n],t}}};var HC=uf(function(n){return function(t){return t}});var qC=Cm;var hm=function(n){return function(t){return ol(function(){var e=qC(t)();return n(e)(),e})}};var Lo=function(n){return function(t){return hm(ul(n)(t))}};var Em=Tm(Ko),zC=function(n){return function(t){return Em(function(r){return function(e){return function(a){return h(n.Semigroup0())(r)(t(e)(a))}}})(bn(n))}},Fm={foldl:function(n){return Em(function(t){return function(r){return n(t)}})},foldr:function(n){return function(t){return function(r){return jn(J)(n)(t)(HC(r))}}},foldMap:function(n){return function(t){return zC(n)(L(t))}}};var fl=function(n){return hm(il(n))};var Mm=function(){function n(){}return n.value=new n,n}(),ll=function(){function n(){}return n.value=new n,n}(),VC=function(){function n(){}return n.value=new n,n}();var xu=function(n){return function(t){return function(r){var e=function(a){var u=function(i){return function(f){return new T(f+1|0,new T(i,f))}};return Ha(gr(n))(u)(a)(0)};return new nf(To(gr(n))(um(n)(e(r))(function(a){return d(Hn)(function(u){return V(Nn(n.Monad0().Applicative0()))(c(x(n))(new wu(t(u.value0))))(d(Hn)(L(Au.value))(Gp(se(n.Monad0().Applicative0()))(function(){var i=mn(eu)(u.value1+1|0);return function(f){return i(qt(f))}}())(a)))})(a)})))}}};var Ie=function(n){return function(t){return function(r){return function(e){return function(a){var u=function(i){return i(e)(a)};return function(i){if(i instanceof tf)return _t(J)(j(n))(Ie(n)(t)(r)(e)(a))(i.value0);if(i instanceof Fo)return To(gr(t))(d(Hn)(Ie(n)(t)(r)(e)(a))(i.value0));if(i instanceof Sn)return u(r.toElt(i.value0));if(i instanceof nf)return nr(function(f){return b(t.Monad0().Bind1())(I(t)(vt(ba)))(function(_){return b(t.Monad0().Bind1())($t(i.value0)(function(l){return b(t.Monad0().Bind1())(r.ids(a))(function(s){return b(t.Monad0().Bind1())(I(t)(vt(c(n)(void 0))))(function(p){return b(t.Monad0().Bind1())(r.ids(a))(function(m){return b(t.Monad0().Bind1())(I(t)(vt(c(n)(void 0))))(function(o){return b(t.Monad0().Bind1())(I(t)(vt([])))(function(v){return b(t.Monad0().Bind1())(I(t)(vt(c(n)(void 0))))(function($){return b(t.Monad0().Bind1())(d(n.Apply0().Functor0())(ya.create)(r.ids(a)))(function(hn){return b(t.Monad0().Bind1())(I(t)(vt(Mm.value)))(function(Vn){return b(t.Monad0().Bind1())($t(l)(function(Pn){return b(t.Monad0().Bind1())(I(t)(et(Vn)))(function(Sr){return Pn instanceof Ki&&Sr instanceof ll?b(t.Monad0().Bind1())(I(t)(et(v)))(Nr(n)(J)(function(){var ar=r.doLogic(Pn.value0)(a);return function(O){return f(ar(O))}}())):Pn instanceof Au&&Sr instanceof ll?Rn(On)(t.Monad0().Bind1())(z(n.Apply0().Functor0())(I(t)(Bt(VC.value)(Vn))))(function(){var ar=tn(n.Apply0())(tn(n.Apply0())(tn(n.Apply0())(tn(n.Apply0())(b(t.Monad0().Bind1())(I(t)(et(v)))(Nr(n)(J)(function(O){return Wt(n)(Ut)(e.parent)(function(Xt){return f(r.disconnectElement(a)({id:O,parent:Xt,scope:hn}))})})))(La(t.Monad0().Bind1())(I(t)(et(p)))))(La(t.Monad0().Bind1())(I(t)(et(o)))))(z(n.Apply0().Functor0())(I(t)(St(fl(s))(_)))))(z(n.Apply0().Functor0())(I(t)(St(fl(m))(_))));return tn(n.Apply0())(z(n.Apply0().Functor0())(I(t)(Bt(ar)($))))(ar)}):Pn instanceof wu&&Sr instanceof Mm?Rn(On)(t.Monad0().Bind1())(z(n.Apply0().Functor0())(I(t)(Bt(ll.value)(Vn))))(function(){return b(t.Monad0().Bind1())($t(Ie(n)(t)(r)(function(){var ar={};for(var O in e)({}).hasOwnProperty.call(e,O)&&(ar[O]=e[O]);return ar.scope=hn,ar.raiseId=function(Xt){return z(n.Apply0().Functor0())(I(t)(St(h(ot)([Xt]))(v)))},ar}())(a)(Pn.value0))(f))(function(ar){return Rn(On)(t.Monad0().Bind1())(z(n.Apply0().Functor0())(I(t)(St(Lo(m)(ar))(_))))(function(){return z(n.Apply0().Functor0())(I(t)(Bt(ar)(o)))})})}):c(n)(void 0)})}))(function(Pn){return Rn(On)(t.Monad0().Bind1())(z(n.Apply0().Functor0())(I(t)(Bt(Pn)(p))))(function(){return Rn(On)(t.Monad0().Bind1())(z(n.Apply0().Functor0())(I(t)(St(Lo(s)(Pn))(_))))(function(){return La(t.Monad0().Bind1())(I(t)(et($)))})})})})})})})})})})})}))(function(l){return c(n)(Rn(On)(t.Monad0().Bind1())(b(t.Monad0().Bind1())(I(t)(et(_)))(Gn(Fm)(tn(n.Apply0()))(c(n)(void 0))))(function(){return l}))})})});throw new Error("Failed pattern match at Bolson.Control (line 530, column 17 - line 614, column 20): "+[i.constructor.name])}}}}}},JC=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return function(u){return function(i){var f=function(_){return function(l){return nr(function(s){return b(n.Monad0().Bind1())(mm(d(mt)(L(""))(of()(u))))(function(p){var m=io(J)(j(n.Monad0().Applicative0()))(He(co)(function(o){return oc(Ds)(function(v){return function($){return $ instanceof Sn?function(hn){return hn(function(){var Vn={};for(var Pn in _)({}).hasOwnProperty.call(_,Pn)&&(Vn[Pn]=_[Pn]);return Vn.parent=y.value,Vn.scope=r(_.scope),Vn.raiseId=function(Sr){return vm(o)(Sr)(p)},Vn}())(l)}(a.toElt($.value0)):v(a.wrapElt($))}})})(of()(u)));return b(n.Monad0().Bind1())($t(m)(s))(function(o){return b(n.Monad0().Bind1())(I(n)(vt(c(n.Monad0().Applicative0())(void 0))))(function(v){return b(n.Monad0().Bind1())(d(n.Monad0().Bind1().Apply0().Functor0())(F)(dm(p)))(function($){var hn=d(xo)(function(Pn){return function(Sr){return new Sn(a.fromEltO1(function(ar){return function(O){return nr(function(Xt){return Rn(On)(n.Monad0().Bind1())(ar.raiseId(Pn))(function(){return Rn(On)(n.Monad0().Bind1())(Wt(n.Monad0().Applicative0())(Ut)(ar.parent)(function(Qo){return Xt(a.giveNewParent(O)({id:Pn,parent:Qo,scope:ar.scope})(Sr))}))(function(){return c(n.Monad0().Applicative0())(c(n.Monad0().Applicative0())(void 0))})})})}}))}})($),Vn=Ie(n.Monad0().Applicative0())(n)(e)(_)(l)(i(hn)(F));return b(n.Monad0().Bind1())($t(Vn)(s))(function(Pn){return Rn(On)(n.Monad0().Bind1())(z(n.Monad0().Bind1().Apply0().Functor0())(I(n)(Bt(Pn)(v))))(function(){return c(n.Monad0().Applicative0())(Rn(On)(n.Monad0().Bind1())(o)(function(){return Rn(On)(n.Monad0().Bind1())(Ne(n.Monad0().Applicative0())(!t)(Wt(n.Monad0().Applicative0())(J)(of()($))(function(Sr){return s(a.deleteFromCache(l)({id:Sr}))})))(function(){return La(n.Monad0().Bind1())(I(n)(et(v)))})}))})})})})})})})}};return new Sn(a.fromEltO2(f))}}}}}}}};var wm=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return JC()(n)(!1)(on(Y))(t)(r)(e)(a)}}}}}};var jC=function(n){return n},Iu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Su=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),GC=function(n){return n},ff=ye(),ct=GC;var rr=function(){return Iu.create}();var Ge=function(){return Su.create}(),tt=function(){var n=d(Hr)(d(Fn)(L(!0)));return function(t){return jC(n(t))}}(),B=function(n){return n.attr};var XC=function(n){return n.makeText},QC=function(n){return function(t){return function(r){return d(Hn)(function(e){return n.setText(function(a){return{id:t,text:a}}(e))})(r)}}},YC=function(n){return function(t){return function(r){return d(Hn)(function(e){return function(a){if(a.value instanceof Iu)return n.setProp({id:t,key:a.key,value:a.value.value0});if(a.value instanceof Su)return n.setCb({id:t,key:a.key,value:a.value.value0});throw new Error("Failed pattern match at Deku.Control (line 84, column 26 - line 86, column 45): "+[a.value.constructor.name])}(ff(e))})(r)}}},ZC=function(n){return n.makeElement},KC=function(n){return n.attributeParent},Wr=function(n){return function(t){var r=function(e){return function(a){return nr(function(u){return b(n.Monad0().Bind1())(a.ids)(function(i){return Rn(On)(n.Monad0().Bind1())(e.raiseId(i))(function(){return d(n.Monad0().Bind1().Apply0().Functor0())(tn(n.Monad0().Bind1().Apply0())(u(a.deleteFromCache({id:i}))))($t(io(J)(j(n.Monad0().Applicative0()))([c(x(n))(XC(a)({id:i,parent:e.parent,scope:e.scope})),QC(a)(i)(t)]))(u))})})})}};return new Sn(r)}},$n=function(n){return function(t){return Wr(n)(c(x(n))(t))}},Am=function(n){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Et(n);return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:mn(Mo)})}},toElt:function(t){return t}}};var Io=function(n){return function(t){return function(r){return t(Dn(j(n.MonadST5().Monad0().Applicative0())))([_m(r)])}}};var nT=function(n){return Ie(n.MonadST5().Monad0().Applicative0())(n.MonadST5())(Am())};var lt=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return nr(function(f){return b(n.MonadST5().Monad0().Bind1())(i.ids)(function(_){return Rn(On)(n.MonadST5().Monad0().Bind1())(u.raiseId(_))(function(){return d(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(l){return tn(n.MonadST5().Monad0().Bind1().Apply0())(f(i.deleteFromCache({id:_})))(l)})($t(V(Nn(n.MonadST5().Monad0().Applicative0()))(io(J)(j(n.MonadST5().Monad0().Applicative0()))(h(ot)([c(x(n.MonadST5()))(ZC(i)({id:_,parent:u.parent,scope:u.scope,tag:t})),YC(i)(_)(r)])(Un([])(function(l){return[c(x(n.MonadST5()))(KC(i)({id:_,parent:l,pos:u.pos}))]})(u.parent))))(nT(n)({parent:new D(_),scope:u.scope,raiseId:function(l){return c(n.MonadST5().Monad0().Applicative0())(void 0)},pos:y.value})(i)(e)))(f))})})})}};return a}}}};var xm=function(){return function(n){return function(t){return function(r){return wm()(n.MonadST5())(Am())({fromEltO1:ye(),fromEltO2:ye(),toElt:ye(),wrapElt:function(){var e=lt(n)("div")(Dn(j(n.MonadST5().Monad0().Applicative0())));return function(a){return Sn.create(e(a))}}(),giveNewParent:function(e){return function(a){return function(u){return Et()(e).giveNewParent(a)}}},deleteFromCache:function(){var e=Et();return function(a){return function(u){return u.deleteFromCache}(e(a))}}()})(t)(Lr(br)(d(xo)(function(e){return e(void 0)}))(ye()(r)))}}}};var Pt=function(){function n(){}return n.value=new n,n}();var Nt={attr:function(n){return function(t){return ct({key:"href",value:rr(t)})}}};var at=function(){function n(){}return n.value=new n,n}(),So={attr:function(n){return function(t){return ct({key:"click",value:Ge(L(Fr(Fn)(t)(!0)))})}}};var Dt={attr:function(n){return function(t){return ct({key:"click",value:Ge(t)})}}};var pr=function(){function n(){}return n.value=new n,n}();var $o={attr:function(n){return function(t){return ct({key:"style",value:rr(t)})}}};var Lm={attr:function(n){return function(t){return ct({key:"style",value:rr(t)})}}};var Im={attr:function(n){return function(t){return ct({key:"style",value:rr(t)})}}};var _l={attr:function(n){return function(t){return ct({key:"style",value:rr(t)})}}};var cf={attr:function(n){return function(t){return ct({key:"style",value:rr(t)})}}};var Sm={attr:function(n){return function(t){return ct({key:"style",value:rr(t)})}}};var lf=function(n){return function(t){return function(r){return new Sn(lt(n)("a")(t)(ft(r)))}}};var Xe=function(n){return function(t){return function(r){return new Sn(lt(n)("div")(t)(ft(r)))}}},zn=function(n){return Xe(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var za=function(n){return function(t){return function(r){return new Sn(lt(n)("span")(t)(ft(r)))}}},Pu=function(n){return za(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var Po=function(){function n(){}return n.value=new n,n}();var Pm={attr:function(n){return function(t){return ct({key:"type",value:rr(t)})}}};var sf={attr:function(n){return function(t){return ct({key:"type",value:rr(t)})}}};var Cr=function(n){return function(t){return function(r){return new Sn(lt(n)("button")(t)(ft(r)))}}},Nm=function(n){return Cr(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var tT=function(n){return function(t){return function(r){return new Sn(lt(n)("code")(t)(ft(r)))}}},At=function(n){return tT(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var rT=function(n){return function(t){return function(r){return new Sn(lt(n)("i")(t)(ft(r)))}}},km=function(n){return rT(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var ga=function(n){return function(t){return function(r){return new Sn(lt(n)("input")(t)(ft(r)))}}};var aT=function(n){return function(t){return function(r){return new Sn(lt(n)("li")(t)(ft(r)))}}},Rm=function(n){return aT(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var uT=function(n){return function(t){return function(r){return new Sn(lt(n)("pre")(t)(ft(r)))}}},xt=function(n){return uT(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var iT=function(n){return function(t){return function(r){return new Sn(lt(n)("ul")(t)(ft(r)))}}},Om=function(n){return iT(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var mf=function(){function n(){}return n.value=new n,n}(),No=function(){function n(){}return n.value=new n,n}(),ko=function(){function n(){}return n.value=new n,n}(),Ro=function(){function n(){}return n.value=new n,n}(),Oo=function(){function n(){}return n.value=new n,n}(),Wo=function(){function n(){}return n.value=new n,n}(),Uo=function(){function n(){}return n.value=new n,n}(),Bo=function(){function n(){}return n.value=new n,n}(),Ho=function(){function n(){}return n.value=new n,n}(),qo=function(){function n(){}return n.value=new n,n}(),Wm=function(n){return n==="Intro"?c(Ht)(mf.value):n==="HelloWorld"?c(Ht)(No.value):n==="SimpleComponent"?c(Ht)(ko.value):n==="PURSX1"?c(Ht)(Ro.value):n==="PURSX2"?c(Ht)(Oo.value):n==="Events"?c(Ht)(Wo.value):n==="Effects"?c(Ht)(Uo.value):n==="Events2"?c(Ht)(Bo.value):n==="Portals"?c(Ht)(Ho.value):n==="SSR"?c(Ht)(qo.value):Dn(is)};function pl(){window.scrollTo(0,0)}var er=pl;var lT=function(n){return n};var Lt=function(n){return{pursxToElement:function(t){return function(r){return function(e){return{cache:ba,element:function(a){return function(u){return Dn(j(n))}}}}}}}},ml=function(n){return n.pursxToElement},Jt=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var f=ml(n)(a)(M.value)(i);return{cache:Lo(Le(t)(M.value))(!0)(f.cache),element:function(_){return function(l){return V(Nn(e.MonadST5().Monad0().Applicative0()))(d(Hn)(Lr(br)(ff)(function(s){if(s.value instanceof Iu)return l.setProp({id:Le(t)(M.value)+a,key:s.key,value:s.value.value0});if(s.value instanceof Su)return l.setCb({id:Le(t)(M.value)+a,key:s.key,value:s.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4492, column 38 - line 4502, column 24): "+[s.value.constructor.name])}))(Zc(r)()(M.value)(i)))(f.element(_)(l))}}}}}}}}}}}};var Xn=lT,vl=function(n){return function(t){return function(){return function(){return function(r){return function(e){return function(a){return function(u){return function(i){var f=function(_){return function(l){return nr(function(s){return b(r.MonadST5().Monad0().Bind1())(l.ids)(function(p){return b(r.MonadST5().Monad0().Bind1())(l.ids)(function(m){return Rn(On)(r.MonadST5().Monad0().Bind1())(_.raiseId(p))(function(){var o=ml(e)(m)(M.value)(i);return d(r.MonadST5().Monad0().Bind1().Apply0().Functor0())(tn(r.MonadST5().Monad0().Bind1().Apply0())(s(l.deleteFromCache({id:p}))))($t(V(Nn(r.MonadST5().Monad0().Applicative0()))(c(x(r.MonadST5()))(l.makePursx({id:p,parent:_.parent,cache:o.cache,pxScope:m,scope:_.scope,html:Le(n)(u),verb:Le(t)(a)})))(o.element(_)(l)))(s))})})})})}};return new Sn(f)}}}}}}}}},kt=function(n){return function(){return function(){return function(t){return function(r){return vl(n)({reflectType:function(){return"~"}})()()(r)(t)(M.value)}}}}},Um=function(n){return function(){return function(t){return function(r){return function(e){return kt(n)()()(r)(t)(e)({})}}}}},_T=function(n){return Ie(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Et();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:mn(Mo)})}},toElt:function(t){return t}})},Qn=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var f=Zc(r)()(M.value)(i),_=ml(n)(a)(M.value)(i);return{cache:Lo(Le(t)(M.value))(!1)(_.cache),element:function(l){return function(s){return V(Nn(e.MonadST5().Monad0().Applicative0()))(_T(e)({parent:new D(Le(t)(M.value)+a),scope:l.scope,raiseId:function(p){return c(e.MonadST5().Monad0().Applicative0())(void 0)},pos:l.pos})(s)(f))(_.element(l)(s))}}}}}}}}}}}};var dl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody1
  ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  )`,Dl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,yl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (AnEvent, bus, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 :: Domable _ _ _
            p0 = index (Proxy :: _ 0) v
            p1 :: Domable _ _ _
            p1 = index (Proxy :: _ 1) v
            ev :: Boolean -> AnEvent _ Boolean
            ev = fold (const not) event
            flips :: Boolean -> Domable _ _ _
            flips = switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], D.span_ [ flips false ] ]
            ]
  )
`,bl=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,gl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (dyn_, text_)
import Deku.Core (Nut, bussed, insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (AnEvent, bus, keepLatest, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody
  ( bussed \\pushAction actionEvent -> do
      let
        accumulateTextAndEmitOnSubmit :: AnEvent _ String
        accumulateTextAndEmitOnSubmit = compact
          ( mapAccum
              ( \\a b -> case a of
                  AddTodo -> b /\\ Just b
                  ChangeText s -> s /\\ Nothing
              )
              actionEvent
              ""
          )

        top :: Nut
        top =
          D.div_
            [ D.input
                ( oneOf
                    [ textInput $ pure (pushAction <<< ChangeText)
                    , keyUp $ pure \\evt -> do
                        when (code evt == "Enter") $ do
                          pushAction AddTodo
                    ]
                )
                []
            , D.button
                (click $ pure $ pushAction AddTodo)
                [ text_ "Add" ]
            ]
      D.div_
        [ top
        , dyn_ D.div $
            map
              ( \\txt -> keepLatest $ bus \\p' e' ->
                  ( pure $ insert_ $ D.div_
                      [ text_ txt
                      , D.button
                          (click $ pure (p' sendToTop))
                          [ text_ "Prioritize" ]
                      , D.button
                          (click $ pure (p' remove))
                          [ text_ "Delete" ]
                      ]
                  ) <|> e'
              )
              accumulateTextAndEmitOnSubmit
        ]
  )
`,Cl=`module Main where

import Prelude

import Bolson.Core (vbussed)
import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (AnEvent, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody
  ( vbussed (Proxy :: _ UIEvents) \\push event -> do
      let
        countUp :: AnEvent _ Int
        countUp = fold
          (const (1 + _))
          (pure unit <|> event.buttonClicked)
          (-1)
      D.div_
        [ D.button
            (click_ (pure push.buttonClicked))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show <$> countUp
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,Tl=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (AnEvent, bus, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure Initial <|> _)
      \\event -> do
        let
          split :: { left :: AnEvent _ Unit, right :: AnEvent _ String }
          split = separate $ compact $
            map
              ( case _ of
                  Loading -> Just $ Left unit
                  Result s -> Just $ Right s
                  _ -> Nothing
              )
              event
          { left: loading, right: result } = split
        D.div_
            [ D.div_
                [ D.button (pure (D.OnClick := clickCb push))
                    [ text
                        ( pure clickText
                            <|> (loading $> "Loading...")
                            <|> (result $> clickText)
                        )
                    ]
                ]
            , D.div
                ( (pure (D.Style := "display: none;")) <|>
                    ( compact
                        ( mapAccum
                            ( \\_ b -> (b && false) /\\
                                if b then Just unit else Nothing
                            )
                            result
                            true
                        ) $> (D.Style := "display: block;")
                    )
                )
                [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
            ]
  )
`,hl=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBodyA)
import Effect (Effect)

main :: Effect Unit
main = runInBodyA
  ( [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,El=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (pure push.buttonClicked))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (pure unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Fl=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  runSSR
    ( Template
        { head:
            """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
        , tail: "</html>"
        }
    )
    app >>= log`,Ml=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function Bm(n){return n.target}function Rt(n){return function(){return n.preventDefault()}}function Hm(n,t,r){return n==null?t:r(n)}function wl(n){return n}var zo=Un(null)(wl),jt=function(n){return Hm(n,y.value,D.create)};var Df=function(n){return jt(Bm(n))};var vT=function(){return M.value}(),zm=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(vT)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(hl)])])),result:Xn(zn(t)([Nm(t)([$n(t.MonadST5())("I do nothing")]),Om(t)(d(mt)(function(){var r=Rm(t),e=c(ru),a=$n(t.MonadST5());return function(u){return r(e(a(u)))}}())(["A","B","C"])),zn(t)([lf(t)(c(x(t.MonadST5()))(B(Nt)(Pt.value)("https://example.com")))([$n(t.MonadST5())("foo ")]),km(t)([$n(t.MonadST5())(" bar ")]),za(t)(c(x(t.MonadST5()))(B($o)(pr.value)("font-weight: 800;")))([$n(t.MonadST5())(" baz")])]),zn(t)([zn(t)([zn(t)([ga(t)(c(x(t.MonadST5()))(B(sf)(Po.value)("range")))([])])])])])),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(Ro.value)))(er)})),B(Nt)(Pt.value)(n.slug+"pursx1/")])})}};function Vm(n,t,r,e,a){return function(u,i){var f=n.newXHR(),_=n.fixupUrl(a.url,f);if(f.open(a.method||"GET",_,!0,a.username,a.password),a.headers)try{for(var l=0,s;(s=a.headers[l])!=null;l++)f.setRequestHeader(s.field,s.value)}catch(m){u(m)}var p=function(m){return function(){u(new Error(m))}};return f.onerror=p(r),f.ontimeout=p(t),f.onload=function(){i({status:f.status,statusText:f.statusText,headers:f.getAllResponseHeaders().split(`\r
`).filter(function(m){return m.length>0}).map(function(m){var o=m.indexOf(":");return e(m.substring(0,o))(m.substring(o+2))}),body:f.response})},f.responseType=a.responseType,f.withCredentials=a.withCredentials,f.timeout=a.timeout,f.send(a.content),function(m,o,v){try{f.abort()}catch($){return o($)}return v()}}}var yf="application/json",Jm="application/x-www-form-urlencoded";var Gm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Xm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Qm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Ym=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Zm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Al=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),xl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Km=function(n){return n instanceof Al?new D(Jm):n instanceof xl?new D(yf):y.value};var bf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),gf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),nv=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),tv=function(n){if(n instanceof bf)return Et()(n.value0);if(n instanceof gf)return Et()(n.value0);if(n instanceof nv)return n.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[n.constructor.name])};var Ll=function(n){if(n instanceof bf)return"Accept";if(n instanceof gf)return"Content-Type";if(n instanceof nv)return n.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[n.constructor.name])};var Il=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Sl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),$l=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Nu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Pl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Cf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),rv=function(n){if(n instanceof Il)return"arraybuffer";if(n instanceof Sl)return"blob";if(n instanceof $l)return"document";if(n instanceof Nu||n instanceof Pl)return"text";if(n instanceof Cf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[n.constructor.name])},ev=function(n){return n instanceof Nu?new D(yf):y.value};var av=function(){return new Nu(on(Y))}(),ov=function(){return new Cf(on(Y))}();var iv=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();function Vo(n){return new Error(n)}function ku(n){return n.message}function Ru(n){return function(){throw n}}var ve=function(n){return n.throwError};var ta=function(n){return n.catchError};var hf=function(n){return function(t){return ta(n)(d(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(W.create)(t))(function(){var r=c(n.MonadThrow0().Monad0().Applicative0());return function(e){return r(q.create(e))}}())}};var Pe=function(n){return n.state};var Jo=function(n){return function(t){return Pe(n)(function(r){var e=t(r);return new T(e,e)})}};var de=function(n){return n.liftEffect};var Nl=function(n){return n};var kl=function(n){return n};var Af=function(n){return function(t){return n(t)}},cv=function(n){return{map:function(t){return Af(d(n)(d(to)(t)))}}};var Rl=function(n){return{Applicative0:function(){return ja(n)},Bind1:function(){return Ol(n)}}},Ol=function(n){return{bind:function(t){return function(r){return b(n.Bind1())(t)(Gr(function(){var e=c(n.Applicative0());return function(a){return e(q.create(a))}}())(function(e){var a=r(e);return a}))}},Apply0:function(){return lv(n)}}},lv=function(n){return{apply:Zr(Rl(n)),Functor0:function(){return cv(n.Bind1().Apply0().Functor0())}}},ja=function(n){return{pure:function(){var t=c(n.Applicative0());return function(r){return Nl(t(W.create(r)))}}(),Apply0:function(){return lv(n)}}};var _v=function(n){return{throwError:function(){var t=c(n.Applicative0());return function(r){return Nl(t(q.create(r)))}}(),Monad0:function(){return Rl(n)}}};var Wl=function(n){return function(t){return{alt:function(r){return function(e){return b(t.Bind1())(r)(function(a){if(a instanceof W)return c(t.Applicative0())(new W(a.value0));if(a instanceof q)return b(t.Bind1())(e)(function(u){if(u instanceof W)return c(t.Applicative0())(new W(u.value0));if(u instanceof q)return c(t.Applicative0())(new q(h(n)(a.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[a.constructor.name])})}},Functor0:function(){return cv(t.Bind1().Apply0().Functor0())}}}};var sv=function(){var n=Et();return function(t){return n(kl(t))}}();function Ul(n){return JSON.stringify(n)}function Bl(n){return function(t){return JSON.stringify(t,null,n)}}var pv=ba;function vv(n,t,r){try{return t(JSON.parse(r))}catch(e){return n(e.message)}}var dv=function(n){return vv(q.create,W.create,n)};var Lf=function(n){return function(t){return function(r){return r.replace(n,t)}}};var Hl=function(n){return function(t){return t.join(n)}};function ST(n){return n.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}var bv=function(t,r,e){try{return r(ST(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(a){return t(a)}};var If=function(){return Ec(bv)(L(y.value))(D.create)}();var NT=function(n){return n};var gv=function(){var n=function(e){if(e.value1 instanceof y)return If(e.value0);if(e.value1 instanceof D)return Cn(xa)(d(rt)(function(a){return function(u){return a+("="+u)}})(If(e.value0)))(If(e.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[e.constructor.name])},t=d(rt)(Hl("&")),r=Dr(ze)(Ht)(n);return function(e){return t(r(NT(e)))}}();var RT=function(){function n(){}return n.value=new n,n}(),zu=function(){function n(){}return n.value=new n,n}(),OT=function(){function n(){}return n.value=new n,n}(),Cv=function(){function n(){}return n.value=new n,n}(),Tv=function(){function n(){}return n.value=new n,n}(),hv=function(){function n(){}return n.value=new n,n}(),WT=function(){function n(){}return n.value=new n,n}(),UT=function(){function n(){}return n.value=new n,n}(),BT=function(){function n(){}return n.value=new n,n}(),HT=function(){function n(){}return n.value=new n,n}(),qT=function(){function n(){}return n.value=new n,n}(),zT=function(){function n(){}return n.value=new n,n}(),VT=function(){function n(){}return n.value=new n,n}(),JT=function(){function n(){}return n.value=new n,n}(),jT=function(){function n(){}return n.value=new n,n}(),Ev=function(){function n(){}return n.value=new n,n}();var GT=function(n){return n},XT={show:function(n){if(n instanceof RT)return"OPTIONS";if(n instanceof zu)return"GET";if(n instanceof OT)return"HEAD";if(n instanceof Cv)return"POST";if(n instanceof Tv)return"PUT";if(n instanceof hv)return"DELETE";if(n instanceof WT)return"TRACE";if(n instanceof UT)return"CONNECT";if(n instanceof BT)return"PROPFIND";if(n instanceof HT)return"PROPPATCH";if(n instanceof qT)return"MKCOL";if(n instanceof zT)return"COPY";if(n instanceof VT)return"MOVE";if(n instanceof JT)return"LOCK";if(n instanceof jT)return"UNLOCK";if(n instanceof Ev)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[n.constructor.name])}};var Fv=Gr(R(XT))(GT);var Av=function(){var n=Ai(Tc);return function(t){return xi(n(t))}}();var xv=function(n){return n.value0};var Ir=function(){var n={},t="Pure",r="Throw",e="Catch",a="Sync",u="Async",i="Bind",f="Bracket",_="Fork",l="Sequential",s="Map",p="Apply",m="Alt",o="Cons",v="Resume",$="Release",hn="Finalizer",Vn="Finalized",Pn="Forked",Sr="Fiber",ar="Thunk";function O(k,Wn,Ct,Jn){this.tag=k,this._1=Wn,this._2=Ct,this._3=Jn}function Xt(k){var Wn=function(Ct,Jn,X){return new O(k,Ct,Jn,X)};return Wn.tag=k,Wn}function Qo(k){return new O(t,void 0)}function FD(k){try{k()}catch(Wn){setTimeout(function(){throw Wn},0)}}function MD(k,Wn,Ct){try{return Wn(Ct())}catch(Jn){return k(Jn)}}function wD(k,Wn,Ct){try{return Wn(Ct)()}catch(Jn){return Ct(k(Jn))(),Qo}}var Ku=function(){var k=1024,Wn=0,Ct=0,Jn=new Array(k),X=!1;function A(){var Bn;for(X=!0;Wn!==0;)Wn--,Bn=Jn[Ct],Jn[Ct]=void 0,Ct=(Ct+1)%k,Bn();X=!1}return{isDraining:function(){return X},enqueue:function(Bn){var gn,yt;Wn===k&&(yt=X,A(),X=yt),Jn[(Ct+Wn)%k]=Bn,Wn++,X||A()}}}();function AD(k){var Wn={},Ct=0,Jn=0;return{register:function(X){var A=Ct++;X.onComplete({rethrow:!0,handler:function(Bn){return function(){Jn--,delete Wn[A]}}})(),Wn[A]=X,Jn++},isEmpty:function(){return Jn===0},killAll:function(X,A){return function(){if(Jn===0)return A();var Bn=0,gn={};function yt(Zn){gn[Zn]=Wn[Zn].kill(X,function(Ft){return function(){delete gn[Zn],Bn--,k.isLeft(Ft)&&k.fromLeft(Ft)&&setTimeout(function(){throw k.fromLeft(Ft)},0),Bn===0&&A()}})()}for(var Qt in Wn)Wn.hasOwnProperty(Qt)&&(Bn++,yt(Qt));return Wn={},Ct=0,Jn=0,function(Zn){return new O(a,function(){for(var Ft in gn)gn.hasOwnProperty(Ft)&&gn[Ft]()})}}}}}var Xa=0,hr=1,ni=2,ti=3,ri=4,$r=5,Yo=6;function Gf(k,Wn,Ct){var Jn=0,X=Xa,A=Ct,Bn=null,gn=null,yt=null,Qt=null,Zn=null,Ft=0,Fa=0,Br=null,aa=!0;function oa(Q){for(var K,xn,kn;;)switch(K=null,xn=null,kn=null,X){case ni:X=hr;try{A=yt(A),Qt===null?yt=null:(yt=Qt._1,Qt=Qt._2)}catch(or){X=$r,Bn=k.left(or),A=null}break;case ti:k.isLeft(A)?(X=$r,Bn=A,A=null):yt===null?X=$r:(X=ni,A=k.fromRight(A));break;case hr:switch(A.tag){case i:yt&&(Qt=new O(o,yt,Qt)),yt=A._2,X=hr,A=A._1;break;case t:yt===null?(X=$r,A=k.right(A._1)):(X=ni,A=A._1);break;case a:X=ti,A=MD(k.left,k.right,A._1);break;case u:X=ri,A=wD(k.left,A._1,function(or){return function(){Jn===Q&&(Jn++,Ku.enqueue(function(){Jn===Q+1&&(X=ti,A=or,oa(Jn))}))}});return;case r:X=$r,Bn=k.left(A._1),A=null;break;case e:yt===null?Zn=new O(o,A,Zn,gn):Zn=new O(o,A,new O(o,new O(v,yt,Qt),Zn,gn),gn),yt=null,Qt=null,X=hr,A=A._1;break;case f:Ft++,yt===null?Zn=new O(o,A,Zn,gn):Zn=new O(o,A,new O(o,new O(v,yt,Qt),Zn,gn),gn),yt=null,Qt=null,X=hr,A=A._1;break;case _:X=ti,K=Gf(k,Wn,A._2),Wn&&Wn.register(K),A._1&&K.run(),A=k.right(K);break;case l:X=hr,A=LD(k,Wn,A._1);break}break;case $r:if(yt=null,Qt=null,Zn===null)X=Yo,A=gn||Bn||A;else switch(K=Zn._3,kn=Zn._1,Zn=Zn._2,kn.tag){case e:gn&&gn!==K&&Ft===0?X=$r:Bn&&(X=hr,A=kn._2(k.fromLeft(Bn)),Bn=null);break;case v:gn&&gn!==K&&Ft===0||Bn?X=$r:(yt=kn._1,Qt=kn._2,X=ni,A=k.fromRight(A));break;case f:Ft--,Bn===null&&(xn=k.fromRight(A),Zn=new O(o,new O($,kn._2,xn),Zn,K),(gn===K||Ft>0)&&(X=hr,A=kn._3(xn)));break;case $:Zn=new O(o,new O(Vn,A,Bn),Zn,gn),X=hr,gn&&gn!==K&&Ft===0?A=kn._1.killed(k.fromLeft(gn))(kn._2):Bn?A=kn._1.failed(k.fromLeft(Bn))(kn._2):A=kn._1.completed(k.fromRight(A))(kn._2),Bn=null,Ft++;break;case hn:Ft++,Zn=new O(o,new O(Vn,A,Bn),Zn,gn),X=hr,A=kn._1;break;case Vn:Ft--,X=$r,A=kn._1,Bn=kn._2;break}break;case Yo:for(var ht in Br)Br.hasOwnProperty(ht)&&(aa=aa&&Br[ht].rethrow,FD(Br[ht].handler(A)));Br=null,gn&&Bn?setTimeout(function(){throw k.fromLeft(Bn)},0):k.isLeft(A)&&aa&&setTimeout(function(){if(aa)throw k.fromLeft(A)},0);return;case Xa:X=hr;break;case ri:return}}function Tt(Q){return function(){if(X===Yo)return aa=aa&&Q.rethrow,Q.handler(A)(),function(){};var K=Fa++;return Br=Br||{},Br[K]=Q,function(){Br!==null&&delete Br[K]}}}function an(Q,K){return function(){if(X===Yo)return K(k.right(void 0))(),function(){};var xn=Tt({rethrow:!1,handler:function(){return K(k.right(void 0))}})();switch(X){case Xa:gn=k.left(Q),X=Yo,A=gn,oa(Jn);break;case ri:gn===null&&(gn=k.left(Q)),Ft===0&&(X===ri&&(Zn=new O(o,new O(hn,A(Q)),Zn,gn)),X=$r,A=null,Bn=null,oa(++Jn));break;default:gn===null&&(gn=k.left(Q)),Ft===0&&(X=$r,A=null,Bn=null)}return xn}}function En(Q){return function(){var K=Tt({rethrow:!1,handler:Q})();return X===Xa&&oa(Jn),K}}return{kill:an,join:En,onComplete:Tt,isSuspended:function(){return X===Xa},run:function(){X===Xa&&(Ku.isDraining()?oa(Jn):Ku.enqueue(function(){oa(Jn)}))}}}function xD(k,Wn,Ct,Jn){var X=0,A={},Bn=0,gn={},yt=new Error("[ParAff] Early exit"),Qt=null,Zn=n;function Ft(Tt,an,En){var Q=an,K=null,xn=null,kn=0,ht={},or,Zo;n:for(;;)switch(or=null,Q.tag){case Pn:if(Q._3===n&&(or=A[Q._1],ht[kn++]=or.kill(Tt,function(ID){return function(){kn--,kn===0&&En(ID)()}})),K===null)break n;Q=K._2,xn===null?K=null:(K=xn._1,xn=xn._2);break;case s:Q=Q._2;break;case p:case m:K&&(xn=new O(o,K,xn)),K=Q,Q=Q._1;break}if(kn===0)En(k.right(void 0))();else for(Zo=0,or=kn;Zo<or;Zo++)ht[Zo]=ht[Zo]();return ht}function Fa(Tt,an,En){var Q,K,xn,kn,ht,or;k.isLeft(Tt)?(Q=Tt,K=null):(K=Tt,Q=null);n:for(;;){if(xn=null,kn=null,ht=null,or=null,Qt!==null)return;if(an===null){Jn(Q||K)();return}if(an._3!==n)return;switch(an.tag){case s:Q===null?(an._3=k.right(an._1(k.fromRight(K))),K=an._3):an._3=Q;break;case p:if(xn=an._1._3,kn=an._2._3,Q){if(an._3=Q,ht=!0,or=Bn++,gn[or]=Ft(yt,Q===xn?an._2:an._1,function(){return function(){delete gn[or],ht?ht=!1:En===null?Fa(Q,null,null):Fa(Q,En._1,En._2)}}),ht){ht=!1;return}}else{if(xn===n||kn===n)return;K=k.right(k.fromRight(xn)(k.fromRight(kn))),an._3=K}break;case m:if(xn=an._1._3,kn=an._2._3,xn===n&&k.isLeft(kn)||kn===n&&k.isLeft(xn))return;if(xn!==n&&k.isLeft(xn)&&kn!==n&&k.isLeft(kn))Q=K===xn?kn:xn,K=null,an._3=Q;else if(an._3=K,ht=!0,or=Bn++,gn[or]=Ft(yt,K===xn?an._2:an._1,function(){return function(){delete gn[or],ht?ht=!1:En===null?Fa(K,null,null):Fa(K,En._1,En._2)}}),ht){ht=!1;return}break}En===null?an=null:(an=En._1,En=En._2)}}function Br(Tt){return function(an){return function(){delete A[Tt._1],Tt._3=an,Fa(an,Tt._2._1,Tt._2._2)}}}function aa(){var Tt=hr,an=Ct,En=null,Q=null,K,xn;n:for(;;)switch(K=null,xn=null,Tt){case hr:switch(an.tag){case s:En&&(Q=new O(o,En,Q)),En=new O(s,an._1,n,n),an=an._2;break;case p:En&&(Q=new O(o,En,Q)),En=new O(p,n,an._2,n),an=an._1;break;case m:En&&(Q=new O(o,En,Q)),En=new O(m,n,an._2,n),an=an._1;break;default:xn=X++,Tt=$r,K=an,an=new O(Pn,xn,new O(o,En,Q),n),K=Gf(k,Wn,K),K.onComplete({rethrow:!1,handler:Br(an)})(),A[xn]=K,Wn&&Wn.register(K)}break;case $r:if(En===null)break n;En._1===n?(En._1=an,Tt=hr,an=En._2,En._2=n):(En._2=an,an=En,Q===null?En=null:(En=Q._1,Q=Q._2))}for(Zn=an,xn=0;xn<X;xn++)A[xn].run()}function oa(Tt,an){Qt=k.left(Tt);var En;for(var Q in gn)if(gn.hasOwnProperty(Q)){En=gn[Q];for(Q in En)En.hasOwnProperty(Q)&&En[Q]()}gn=null;var K=Ft(Tt,Zn,an);return function(xn){return new O(u,function(kn){return function(){for(var ht in K)K.hasOwnProperty(ht)&&K[ht]();return Qo}})}}return aa(),function(Tt){return new O(u,function(an){return function(){return oa(Tt,an)}})}}function LD(k,Wn,Ct){return new O(u,function(Jn){return function(){return xD(k,Wn,Ct,Jn)}})}return O.EMPTY=n,O.Pure=Xt(t),O.Throw=Xt(r),O.Catch=Xt(e),O.Sync=Xt(a),O.Async=Xt(u),O.Bind=Xt(i),O.Bracket=Xt(f),O.Fork=Xt(_),O.Seq=Xt(l),O.ParMap=Xt(s),O.ParApply=Xt(p),O.ParAlt=Xt(m),O.Fiber=Gf,O.Supervisor=AD,O.Scheduler=Ku,O.nonCanceler=Qo,O}(),Iv=Ir.Pure,Sv=Ir.Throw;function $v(n){return function(t){return Ir.Catch(n,t)}}function Pv(n){return function(t){return t.tag===Ir.Pure.tag?Ir.Pure(n(t._1)):Ir.Bind(t,function(r){return Ir.Pure(n(r))})}}function Nv(n){return function(t){return Ir.Bind(n,t)}}var kv=Ir.Sync;var Vu=Ir.Async;function Rv(n,t){return function(){return Ir.Fiber(n,null,t)}}var QT=function(){function n(r,e){return r===0&&typeof setImmediate<"u"?setImmediate(e):setTimeout(e,r)}function t(r,e){return r===0&&typeof clearImmediate<"u"?clearImmediate(e):clearTimeout(e)}return function(r,e){return Ir.Async(function(a){return function(){var u=n(e,a(r()));return function(){return Ir.Sync(function(){return r(t(e,u))})}}})}}(),YT=Ir.Seq;var Go={proof:function(n){return n},Coercible0:function(){}};var _h=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var jl={map:Pv};var sh=function(){var n=function(e){if(e instanceof W)return e.value0;if(e instanceof q)return oe("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[e.constructor.name])},t=function(e){if(e instanceof q)return e.value0;if(e instanceof W)return oe("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[e.constructor.name])},r=function(e){if(e instanceof q)return!0;if(e instanceof W)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[e.constructor.name])};return{isLeft:r,fromLeft:t,fromRight:n,left:q.create,right:W.create}}(),ph=function(n){return Rv(sh,n)},mh=function(n){return function(){var r=ph(n)();return r.run(),r}},Hv=function(){var n=z(Fn);return function(t){return n(mh(t))}}();var Gl={Applicative0:function(){return Sf},Bind1:function(){return Xl}},Xl={bind:Nv,Apply0:function(){return qv(0)}},Sf={pure:Iv,Apply0:function(){return qv(0)}},qv=_h("applyAff","Effect.Aff",function(){return{apply:Zr(Gl),Functor0:function(){return jl}}});var Ql={liftEffect:kv,Monad0:function(){return Gl}};var vh={throwError:Sv,Monad0:function(){return Gl}},zv={catchError:$v,MonadThrow0:function(){return vh}};var Vv=L(c(Sf)(void 0));var Qv=function(n){return Vu(function(t){return function(){var e=n(function(a){return t(q.create(a))()},function(a){return t(W.create(a))()});return function(a){return Vu(function(u){return function(){return e(a,function(f){return u(q.create(f))()},function(f){return u(W.create(f))()}),Vv}})}}})};function $f(n){return Object.prototype.toString.call(n).slice(8,-1)}var Yv=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var Zv=function(n){return function(t){return function(r){return(r|0)===r?n(r):t}}},Tr=function(n){return n};var Pf=isFinite;var n_=Math.floor;var Ju=function(n){return function(t){return n%t}};var Nf=function(){return Zv(D.create)(y.value)}(),Wh=function(n){if(!Pf(n))return 0;if(n>=Tr(Vr(Aa)))return Vr(Aa);if(n<=Tr(re(Aa)))return re(Aa);if(ir)return cr(0)(Nf(n));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[n.constructor.name])};var r_=function(n){return Wh(n_(n))};var e_=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),id=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Jh=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),jh=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Ta=F,Gh=F;var Rf=function(n){if(n instanceof e_)return n.value0;if(n instanceof Jh)return"Error at array index "+(R(Jr)(n.value0)+(": "+Rf(n.value1)));if(n instanceof jh)return"Error at property "+(R(dr)(n.value0)+(": "+Rf(n.value1)));if(n instanceof id)return"Type mismatch: expected "+(n.value0+(", found "+n.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[n.constructor.name])};var a_=function(n){var t=ve(_v(n));return function(r){return t(Av(r))}};var ha=function(n){return function(t){return function(r){if($f(r)===t)return c(ja(n))(Gh(r));if(ir)return a_(n)(new id(t,$f(r)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[t.constructor.name,r.constructor.name])}}};var o_=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),u_=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),i_=function(){function n(){}return n.value=new n,n}(),f_=function(){function n(){}return n.value=new n,n}(),c_=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),fd=function(n){return function(t){var r=function(s){return s===""?c(ja(it))(pv):Gr(function(){var p=a_(it);return function(m){return p(e_.create(m))}}())(c(ja(it)))(dv(s))},e=function(){if(t.responseFormat instanceof Il)return ha(it)("ArrayBuffer");if(t.responseFormat instanceof Sl)return ha(it)("Blob");if(t.responseFormat instanceof $l)return function(s){return V(Wl(Cc)(it))(ha(it)("Document")(s))(V(Wl(Cc)(it))(ha(it)("XMLDocument")(s))(ha(it)("HTMLDocument")(s)))};if(t.responseFormat instanceof Nu)return li(Ol(it))(function(s){return t.responseFormat.value0(r(s))})(ha(it)("String"));if(t.responseFormat instanceof Pl)return ha(it)("String");if(t.responseFormat instanceof Cf)return L(t.responseFormat.value0(c(ja(it))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[t.responseFormat.constructor.name])}(),a=function(s){if(s instanceof Gm)return new W(s.value0(Ta));if(s instanceof Xm)return new W(Ta(s.value0));if(s instanceof Qm)return new W(Ta(s.value0));if(s instanceof Ym)return new W(Ta(s.value0));if(s instanceof Zm)return new W(Ta(s.value0));if(s instanceof Al)return rc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(d(rt)(Ta)(gv(s.value0)));if(s instanceof xl)return new W(Ta(Ul(s.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[s.constructor.name])},u=function(s){return function(p){return s instanceof D&&!ca(J)(lr)(Xf(mn(ia))(Ll)(s.value0))(p)?Ui(p)(s.value0):p}},i=function(s){return u(d(rt)(gf.create)(We(Ar)(Km)(s)))(u(d(rt)(bf.create)(ev(t.responseFormat)))(t.headers))},f=function(s){return{method:Fv(t.method),url:t.url,headers:d(mt)(function(p){return{field:Ll(p),value:tv(p)}})(i(t.content)),content:s,responseType:rv(t.responseFormat),username:zo(t.username),password:zo(t.password),withCredentials:t.withCredentials,timeout:cr(0)(d(rt)(function(p){return p})(t.timeout))}},_=function(s){return te(jl)(hf(zv)(Qv(Vm(n,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",iv.create,f(s)))))(function(p){if(p instanceof W){var m=sv(e(p.value0.body));if(m instanceof q)return new q(new u_(xv(m.value0),p.value0));if(m instanceof W)return new W({body:m.value0,headers:p.value0.headers,status:p.value0.status,statusText:p.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[m.constructor.name])}if(p instanceof q)return new q(function(){var o=ku(p.value0),v=o==="AffjaxTimeoutErrorMessageIdent";if(v)return i_.value;var $=o==="AffjaxRequestFailedMessageIdent";return $?f_.value:new c_(p.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[p.constructor.name])})};if(t.content instanceof y)return _(zo(y.value));if(t.content instanceof D){var l=a(t.content.value0);if(l instanceof W)return _(zo(new D(l.value0)));if(l instanceof q)return c(Sf)(new q(new o_(l.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[l.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[t.content.constructor.name])}},l_=function(n){if(n instanceof o_)return"There was a problem with the request content: "+n.value0;if(n instanceof u_)return"There was a problem with the response body: "+Rf(n.value0);if(n instanceof i_)return"There was a problem making the request: timeout";if(n instanceof f_)return"There was a problem making the request: request failed";if(n instanceof c_)return"There was a problem making the request: "+ku(n.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[n.constructor.name])},Ea=function(){return{method:new q(zu.value),url:"/",headers:[],content:y.value,username:y.value,password:y.value,withCredentials:!1,responseFormat:ov,timeout:y.value}}();var __={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(n){return n||"/"}};var ld=fd(__);var sd=function(){function n(){}return n.value=new n,n}(),s_=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Zh=function(){return M.value}(),_d="Click to get some random user data.",Kh=function(n){return tt(L(function(){return n(sd.value)(),Hv(b(Xl)(ld({method:new q(zu.value),url:"https://randomuser.me/api/",headers:Ea.headers,content:Ea.content,username:Ea.username,password:Ea.password,withCredentials:Ea.withCredentials,responseFormat:av,timeout:Ea.timeout}))(function(r){if(r instanceof q)return de(Ql)(n(new s_("GET /api response failed to decode: "+l_(r.value0))));if(r instanceof W)return de(Ql)(n(new s_(Bl(2)(r.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[r.constructor.name])}))()}))},pd=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Zh)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(Tl)])])),result:Xn(Ao(t)(t.Always2())(function(r){return function(e){var a=yr(se(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof sd?new D(new q(void 0)):f instanceof s_?new D(new W(f.value0)):y.value})(e),u=yr(se(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof W?new D(f.value0):y.value})(a),i=yr(se(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof q?new D(void 0):y.value})(a);return zn(t)([zn(t)([Cr(t)(c(x(t.MonadST5()))(B(Dt)(at.value)(Kh(r))))([Wr(t.MonadST5())(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(_d))(V(Nn(t.MonadST5().Monad0().Applicative0()))(Fr(Hn)(i)("Loading..."))(Fr(Hn)(u)(_d))))])]),Xe(t)(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(B(_l)(pr.value)("display: none;")))(Fr(Hn)(Ba(Mu(t.MonadST5().Monad0().Applicative0()))(Ha(gr(t.MonadST5()))(function(f){return function(_){return new T(_&&!1,function(){return _?new D(void 0):y.value}())}})(u)(!0)))(B(_l)(pr.value)("display: block;"))))([xt(t)([At(t)([Wr(t.MonadST5())(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(""))(u))])])])])}})),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(Oo.value)))(er)})),B(Nt)(Pt.value)(n.slug+"pursx2/")])})}};var Of=function(){function n(){}return n.value=new n,n}();var Wf={attr:function(n){return function(t){return ct({key:"input",value:Ge(t)})}}};var p_=function(){function n(){}return n.value=new n,n}();var m_={attr:function(n){return function(t){return ct({key:"keyup",value:Ge(t)})}}};function Uf(n){return function(){return n.value}}function v_(n){return function(){return n.valueAsNumber}}function Dd(n,t,r,e){if(typeof window<"u"){var a=window[r];if(a!=null&&e instanceof a)return t(e)}for(var u=e;u!=null;){var i=Object.getPrototypeOf(u),f=i.constructor.name;if(f===r)return t(e);if(f==="Object")return n;u=i}return n}var P=function(n){return function(t){return Dd(y.value,D.create,n,t)}};var Bf=P("HTMLInputElement");function d_(n){return n.code}var D_=P("KeyboardEvent");var Hf=function(n){var t=V(Nn(n.Monad0().Applicative0()))(c(x(n))(B(sf)(Po.value)("range"))),r=d(Hn)(function(e){return B(Wf)(Of.value)(tt(function(a){return Wt(ur)(Ut)(b(Ar)(Df(a))(Bf))(_i(Oa)(v_)(e))}))});return function(e){return t(r(e))}};var qf=function(n){return function(t){return function(r){return d(n)(function(){var e=B(r)(at.value);return function(a){return e(function(u){return u(bn(t))}(a))}}())}}};var fE=function(){return M.value}(),Cd=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(fE)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(Cl)])])),result:Xn(af()(t)()(so({reflectSymbol:function(){return"buttonClicked"}})(po(mo(t.Always2())(Go)))(so({reflectSymbol:function(){return"sliderMoved"}})(po(mo(t.Always2())(Go)))(Li)()())()())(Eo({reflectSymbol:function(){return"buttonClicked"}})()()(Eo({reflectSymbol:function(){return"sliderMoved"}})()()(Yi)()()()())()()()())(M.value)(function(r){return function(e){return zn(t)([Cr(t)(qf(Hn)(jr)(So)(c(x(t.MonadST5()))(r.buttonClicked)))([$n(t.MonadST5())("Click")]),zn(t)([Wr(t.MonadST5())(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))("Val: 0"))(d(Hn)(function(){var a=h(Re)("Val: "),u=R(Jr);return function(i){return a(u(i))}}())(Da(gr(t.MonadST5()))(L(It(Pr)(1)))(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(void 0))(e.buttonClicked))(-1))))]),zn(t)([ga(t)(Hf(t.MonadST5())(c(x(t.MonadST5()))(r.sliderMoved)))([]),zn(t)([Wr(t.MonadST5())(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))("Val: 50.0"))(d(Hn)(function(){var a=h(Re)("Val: "),u=R(uu);return function(i){return a(u(i))}}())(e.sliderMoved)))])])])}})),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(Uo.value)))(er)})),B(Nt)(Pt.value)(n.slug+"effects/")])})}};var lE=function(){function n(){}return n.value=new n,n}(),y_=function(){function n(){}return n.value=new n,n}(),Td=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),_E=function(){return M.value}(),hd=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(_E)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(gl)])])),result:Xn(Ao(t)(t.Always2())(function(r){return Lr(br)(function(e){return V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(lE.value))(e)})(function(e){return zn(t)([zn(t)([ga(t)(_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Im)(pr.value)("border-style:solid;border-width: 1px;border-color: black;"),B(Wf)(Of.value)(tt(function(a){return Wt(ur)(Ut)(b(Ar)(Df(a))(Bf))(_i(Oa)(Uf)(function(u){return r(Td.create(u))}))})),B(m_)(p_.value)(tt(function(a){return Wt(ur)(Ut)(D_(a))(function(u){return Ne(ur)(d_(u)==="Enter")(r(y_.value))})}))]))([]),Cr(t)(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(B(cf)(pr.value)("margin: 5px;")))(c(x(t.MonadST5()))(B(Dt)(at.value)(tt(L(r(y_.value)))))))([$n(t.MonadST5())("Add")])]),Io(t)(Xe(t))(d(Hn)(function(a){return To(gr(t.MonadST5()))(qa(t)(t.Always2())(function(u){return function(i){return V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(wo(zn(t)([za(t)(c(x(t.MonadST5()))(B($o)(pr.value)("margin: 5px;")))([$n(t.MonadST5())(a)]),Cr(t)(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(B(cf)(pr.value)("margin: 5px;")))(c(x(t.MonadST5()))(B(Dt)(at.value)(tt(L(u(sm)))))))([$n(t.MonadST5())("Prioritize")]),Cr(t)(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(B(cf)(pr.value)("margin: 5px;")))(c(x(t.MonadST5()))(B(Dt)(at.value)(tt(L(u(pm)))))))([$n(t.MonadST5())("Delete")])]))))(i)}}))})(yr(se(t.MonadST5().Monad0().Applicative0()))(function(a){return a.value0?new D(a.value1):y.value})(Ha(gr(t.MonadST5()))(function(a){return function(u){return a instanceof Td?new T(a.value0,new T(!1,a.value0)):a instanceof y_?new T(u,new T(!0,u)):new T("",new T(!1,""))}})(e)(""))))])})})),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(Ho.value)))(er)})),B(Nt)(Pt.value)(n.slug+"portals/")])})}};var pE=function(){return M.value}(),Ed=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(pE)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(bl)])])),result:Xn(zn(t)([$n(t.MonadST5())("Hello world")])),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(ko.value)))(er)})),B(Nt)(Pt.value)(n.slug+"component/")])})}};var vE=function(){return M.value}(),Fd=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(Jt()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))(t)(vE)({next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(No.value)))(er)})),B(Nt)(Pt.value)(n.slug+"hello/")])})}};var Md=function(){function n(){}return n.value=new n,n}(),wd={attr:function(n){return function(t){return ct({key:"controls",value:rr(t)})}}};var Ad=function(){function n(){}return n.value=new n,n}();var xd={attr:function(n){return function(t){return ct({key:"src",value:rr(t)})}}};var Ld=function(){function n(){}return n.value=new n,n}(),Id={attr:function(n){return function(t){return ct({key:"width",value:rr(t)})}}};var Sd=function(n){return function(t){return function(r){return new Sn(lt(n)("source")(t)(ft(r)))}}};var $d=function(n){return function(t){return function(r){return new Sn(lt(n)("video")(t)(ft(r)))}}};var TE=function(){return M.value}(),Pd=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(TE)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(yl)])])),result:Xn(Io(t)(Xe(t))(qa(t)(t.Always2())(function(r){return Lr(br)(V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(void 0)))(function(e){return c(x(t.MonadST5()))(wo(xm()(t)(d(xo)(function(a){return $d(t)(_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(wd)(Md.value)("true"),B(Id)(Ld.value)("250")]))([Sd(t)(_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(xd)(Ad.value)(a),B(Pm)(Po.value)("video/mp4")]))([])])})(el()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(el()()("https://www.w3schools.com/jsref/movie.mp4")(gm))))(function(a){return function(u){var i=rl()()()()()({reflectType:function(){return 1}})(M.value)(a),f=rl()()()()()({reflectType:function(){return 0}})(M.value)(a),_=Da(gr(t.MonadST5()))(L(Xr(lr)))(e),l=function(){var s=xu(t.MonadST5())(function(p){return p?f:i});return function(p){return s(_(p))}}();return zn(t)([Cr(t)(c(x(t.MonadST5()))(B(Dt)(at.value)(tt(L(r(void 0))))))([$n(t.MonadST5())("Switch videos")]),zn(t)([Pu(t)([l(!0)]),Pu(t)([l(!1)])])])}})))})}))),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(qo.value)))(er)})),B(Nt)(Pt.value)(n.slug+"ssr/")])})}};var EE=function(){return M.value}(),FE=function(){return M.value}(),Nd=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(EE)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(Dl)])])),result:Xn(Um({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(t)(Lt(t.MonadST5().Monad0().Applicative0()))(FE)),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(Wo.value)))(er)})),B(Nt)(Pt.value)(n.slug+"events1/")])})}};var wE=function(){return M.value}(),AE=function(){return M.value}(),kd=function(n){return function(t){return vl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(t)(Qn()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(M.value)(wE)({code:Xn(xt(t)([At(t)([$n(t.MonadST5())(dl)])])),result:Xn(Io(t)(Xe(t))(qa(t)(t.Always2())(function(r){return function(e){return c(x(t.MonadST5()))(wo(kt({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(Jt()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}})(t))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})(t))(t)(AE)({myli:c(x(t.MonadST5()))(B(Lm)(pr.value)("background-color:rgb(200,240,210);")),somethingNew:Xn(Cr(t)(c(x(t.MonadST5()))(B(So)(at.value)(r(new D(void 0)))))([Wr(t.MonadST5())(V(Nn(t.MonadST5().Monad0().Applicative0()))(Fr(Hn)(Ba(Mu(t.MonadST5().Monad0().Applicative0()))(e))("Thanks for clicking me!"))(c(x(t.MonadST5()))("I was dynamically inserted")))]))})))}}))),next:_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(r){return tn(Yn)(tn(Yn)(Rt(r))(n.dpage(Bo.value)))(er)})),B(Nt)(Pt.value)(n.slug+"events2/")])})}};var LE=function(n){return function(t){return function(r){return new Sn(lt(n)("p")(t)(ft(r)))}}},Rd=function(n){return LE(n)(Dn(j(n.MonadST5().Monad0().Applicative0())))};var Od=(n,t,r,e)=>{n(a=>e.units[a].main.appendChild(e.units[t].main))(r)},b_=n=>()=>{n.hydrating=!0},g_=n=>()=>{n.hydrating=!1},Wd=n=>t=>()=>{t.units[n.id].main.parentNode||(typeof n.pos.value0=="number"&&t.units[n.parent].main.children[n.pos.value0]?t.units[n.parent].main.insertBefore(t.units[n.id].main,t.units[n.parent].main.children[n.pos.value0]):t.units[n.parent].main.appendChild(t.units[n.id].main))},Ud=n=>t=>r=>()=>{var e,a=t.id;r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(a),r.hydrating&&n&&t.parent.value0&&(e=document.body.querySelectorAll("[data-deku-ssr-"+a+"]").item(0))?r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:e}:r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:document.createElement(t.tag)}},Bd=n=>t=>r=>e=>()=>{var a=r.id,u;if(e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(a),e.hydrating&&n&&r.parent.value0&&(u=document.body.querySelectorAll("[data-deku-ssr-"+r.parent.value0+"]").item(0))){var i=0;if(u.childNodes.length===1)u.prepend(document.createTextNode(""));else for(var i=0;i<u.childNodes.length;i++)if(u.childNodes[i].nodeType===8&&u.childNodes[i].nodeValue===a){i=i-1;break}e.units[a]={main:u.childNodes[i],parent:r.parent,scope:r.scope}}else e.units[a]={main:document.createTextNode(""),parent:r.parent,scope:r.scope},Od(t,a,r.parent,e)};function C_(){return{units:{},scopes:{}}}var Hd=n=>t=>r=>()=>{var e=t.id,a=t.value;r.hydrating&&n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),r.units[e].main.tagName==="INPUT"&&t.key==="value"?r.units[e].main.value=a:r.units[e].main.tagName==="INPUT"&&t.key==="checked"?r.units[e].main.checked=a==="true":r.units[e].main.setAttribute(t.key,a)},qd=n=>t=>r=>()=>{var e=t.id,a=t.value;if(r.hydrating&&n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),t.key==="@self@")a(r.units[e].main)();else{r.units[e].listeners[t.key]&&r.units[e].main.removeEventListener(t.key,r.units[e].listeners[t.key]);var u=i=>a(i)();r.units[e].main.addEventListener(t.key,u),r.units[e].listeners[t.key]=u}},zd=n=>t=>()=>{var r=n.id;t.units[r].main.nodeValue=n.text},Vd=n=>t=>r=>e=>()=>{var a,u,i=r.id,f=r.html,_=r.verb,l=r.cache,s=r.parent,p=r.scope,m=r.pxScope;if(e.hydrating&&n&&r.parent.value0&&(a=document.body.querySelectorAll("[data-deku-ssr-"+i+"]").item(0)))e.units[i]={listeners:{},scope:p,parent:s,main:a};else{let v=Object.entries(l);for(var o=0;o<v.length;o++){let $=v[o][0];v[o][1]===!0?f=f.replace(_+$+_,'data-deku-attr-internal="'+$+'"'):f=f.replace(_+$+_,'<span style="display:contents;" data-deku-elt-internal="'+$+'"></span>')}u=document.createElement("div"),u.innerHTML=f.trim(),e.units[i]={listeners:{},scope:p,parent:s,main:u.firstChild}}e.scopes[p]||(e.scopes[p]=[]),e.scopes[p].push(i),u||(u=a),u.querySelectorAll("[data-deku-attr-internal]").forEach(function(v){var $=v.getAttribute("data-deku-attr-internal");let hn=$+m;e.units[hn]={listeners:{},main:v,scope:p},e.scopes[p].push(hn)}),u.querySelectorAll("[data-deku-elt-internal]").forEach(function(v){var $=v.getAttribute("data-deku-elt-internal");let hn=$+m;e.units[$+m]={listeners:{},main:v,scope:p},e.scopes[p].push(hn)}),a||Od(t,i,s,e)},Jd=n=>t=>()=>{var r=n.id;t.units[r]={main:n.root}},jd=n=>t=>()=>{var r=n.id,e=n.parent;t.units[r].containingScope=n.scope,t.units[e].main.prepend(t.units[r].main)},Gd=n=>t=>()=>{var r=n.id;t.units[r].noop||t.units[r].containingScope&&!n.scopeEq(t.units[r].containingScope)(n.scope)||t.units[r].main.remove()},Xd=n=>t=>()=>{delete t.units[n.id]},Qd=n=>t=>()=>{var r=n.id,e=n.pos,a=t.units[r].main.parentNode;a.insertBefore(t.units[r].main,a.children.length<=e?a.children[a.children.length-1]:e<0?a.children[0]:a.children[e])};var Yd=function(n){return n};var kE=1,T_=2147483647,RE=function(){return T_-1|0}(),h_=function(n){var t=function(r){return function(e){return function(a){var u=e-r|0,i=iu(ii)(a)(u),f=i<r;return f?i+e|0:i}}};return t(kE)(RE)(n)};var OE=0,WE=48271,Zd=function(n){return function(t){return wr()(Nf(Ju(Tr(WE)*Tr(t)+Tr(n))(Tr(T_))))}},Kd=Zd(OE);var JE=function(){function n(i){this.fn=i}var t={},r=function(i,f){this.head=i,this.tail=f};function e(i){return new r(i,t)}function a(i){return function(f){return new r(i,f)}}function u(i){for(var f=[],_=i;_!==t;)f.push(_.head),_=_.tail;return f}return function(i){return function(f){return function(_){var l=function(p,m){return i(f(a)(_(p)))(m)},s=function(p,m,o){if(m===0)return p;var v=o[m-1];return new n(function(){var $=s(l(v,p),m-1,o);return $})};return function(p){for(var m=f(e)(_(p[p.length-1])),o=s(m,p.length-1,p);o instanceof n;)o=o.fn();return f(u)(o)}}}}}();var Xo=function(n){return{map:function(t){return function(r){return function(e){return d(n)(function(a){return new T(t(a.value0),a.value1)})(r(e))}}}}};var M_=function(n){return{Applicative0:function(){return Ga(n)},Bind1:function(){return zf(n)}}},zf=function(n){return{bind:function(t){return function(r){return function(e){return b(n.Bind1())(t(e))(function(a){var u=r(a.value0);return u(a.value1)})}}},Apply0:function(){return Vf(n)}}},Vf=function(n){return{apply:Zr(M_(n)),Functor0:function(){return Xo(n.Bind1().Apply0().Functor0())}}},Ga=function(n){return{pure:function(t){return function(r){return c(n.Applicative0())(new T(t,r))}},Apply0:function(){return Vf(n)}}};var Gu=function(n){return{state:function(t){var r=c(n.Applicative0());return function(e){return r(t(e))}},Monad0:function(){return M_(n)}}};var iD=function(n){return function(t){var r=n(t);return r.value1}},fD=function(n){return function(t){var r=n(t);return r.value0}};var fF=function(n){return n};var cF=function(){var n=function(t){return new T(Yd(t.newSeed),function(){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.newSeed=Kd(t.newSeed),r}())};return Pe(Gu(it))(n)}();var Xu=Xo(ge);var A_=function(n){return fD(fF(n))};var _D=Vf(it),lD=function(n){return function(t){var r=Tr(t),e=Tr(n),a=function(f){return e+Ju(f)(r-e+1)},u=d(Xu)(Tr)(cF),i=Cn(_D)(d(Xu)(It(au))(u))(d(Xu)(zr(au)(2))(u));return d(Xu)(function(f){return r_(a(f))})(i)}},sD=function(n){return function(t){var r=n<=t;return r?lD(n)(t):lD(t)(n)}};var x_=function(n){return n.arbitrary};var L_=function(){return{arbitrary:sD(-1e6)(1e6)}}();var Qu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Yu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Jf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),jf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Zu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),_F=function(n){return function(t){return z(dt)(St(function(r){return h(ot)(r)([new Zu(n)])})(t))}},sF=function(n){return function(t){return z(dt)(St(function(r){return h(ot)(r)([new jf(n)])})(t))}},pF=function(n){return function(t){return z(dt)(St(function(r){return h(ot)(r)([new Yu(n)])})(t))}},mF=function(n){return function(t){return z(dt)(St(function(r){return h(ot)(r)([new Jf(n)])})(t))}},vF=function(n){return function(t){return z(dt)(St(function(r){return h(ot)(r)([new Qu(n)])})(t))}},mD=function(n){return{ids:function(){var r=et(n)(),e=R(Jr)(A_(x_(L_))({newSeed:h_(r),size:5}));return z(dt)(St(It(Pr)(1))(n))(),e},makeElement:vF,attributeParent:function(t){return function(r){return c(_r)(void 0)}},makeRoot:function(t){return function(r){return c(_r)(void 0)}},makeText:pF,makePursx:mF,setProp:sF,setCb:function(t){return function(r){return c(_r)(void 0)}},setText:_F,sendToPos:function(t){return function(r){return c(_r)(void 0)}},deleteFromCache:function(t){return function(r){return c(_r)(void 0)}},giveNewParent:function(t){return function(r){return c(_r)(void 0)}},disconnectElement:function(t){return function(r){return c(_r)(void 0)}}}},vD=function(n){return{ids:function(){var r=sa(n)(),e=R(Jr)(A_(x_(L_))({newSeed:h_(r),size:5}));return z(Fn)(Lc(It(Pr)(1))(n))(),e},makeElement:Ud(!0),attributeParent:Wd,makeRoot:Jd,makeText:Bd(!0)(Un(void 0)),makePursx:Vd(!0)(Un(void 0)),setProp:Hd(!0),setCb:qd(!0),setText:zd,sendToPos:Qd,deleteFromCache:Xd,giveNewParent:jd,disconnectElement:Gd}};var I_=n=>n.replace(/[\u00A0-\u9999<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"}),S_=({id:n,html:t,pxScope:r,cache:e,verb:a})=>{let u=t,i=Object.entries(e);for(var f=0;f<i.length;f++){let p=i[f][0];i[f][1]===!0?u=u.replace(a+p+a,'data-deku-attr-internal="'+p+'" data-deku-ssr-'+p+r+'="true"'):u=u.replace(a+p+a,'<span style="display:contents;" data-deku-elt-internal="'+p+'" data-deku-ssr-'+p+r+'="true"></span>')}let _=u.indexOf(">"),l=u.indexOf("/>"),s=l==_-1?l:_;return u.slice(0,s)+" data-deku-ssr-"+n+'="true" '+u.slice(s)};var DD=function(n){return function(t){var r=function(p){return function(m){return z(Xo(ge))(Jo(Gu(it))(function(o){var v={};for(var $ in o)({}).hasOwnProperty.call(o,$)&&(v[$]=o[$]);return v.idToActions=xe(Zt)(function(hn){if(hn instanceof D)return new D(h(ot)(hn.value0)([m]));if(hn instanceof y)return new D([m]);throw new Error("Failed pattern match at Deku.SSR (line 46, column 17 - line 48, column 45): "+[hn.constructor.name])})(p)(o.idToActions),v}))}},e=function(p){return function(m){return function(o){return Rn(On)(zf(it))(z(Xo(ge))(Jo(Gu(it))(function(v){var $={};for(var hn in v)({}).hasOwnProperty.call(v,hn)&&($[hn]=v[hn]);return $.parentToChild=xe(Zt)(function(Vn){if(Vn instanceof D)return new D(h(ot)(Vn.value0)([m]));if(Vn instanceof y)return new D([m]);throw new Error("Failed pattern match at Deku.SSR (line 33, column 17 - line 35, column 41): "+[Vn.constructor.name])})(p)(v.parentToChild),$})))(function(){return r(m)(o)})}}},a=iD(Dr(ze)(Ga(it))(function(p){if(p instanceof Qu)return Wt(Ga(it))(Ut)(p.value0.parent)(function(m){return e(m)(p.value0.id)(p)});if(p instanceof Yu)return Wt(Ga(it))(Ut)(p.value0.parent)(function(m){return e(m)(p.value0.id)(p)});if(p instanceof Jf)return Wt(Ga(it))(Ut)(p.value0.parent)(function(m){return e(m)(p.value0.id)(p)});if(p instanceof jf||p instanceof Zu)return r(p.value0.id)(p);throw new Error("Failed pattern match at Deku.SSR (line 56, column 17 - line 63, column 43): "+[p.constructor.name])})(t))({parentToChild:Ae,idToActions:Ae}),u=function(p){return Za(Wc(function(m){return m instanceof Qu||m instanceof Yu})(p))},i=function(p){return cr("")(Bi(function(m){return m instanceof Qu?new D(m.value0.tag):y.value})(p))},f=function(p){return Ue(J)(fu)(" ")(yr(jp)(function(m){return m instanceof jf?new D(m.value0.key+('="'+(m.value0.value+'"'))):y.value})(p))},_=function(p){return Un("")(function(m){var o=function(hn){return cr("")(Bi(function(Vn){return Vn instanceof Zu?new D(I_(Vn.value0.text)+("<!--"+(p+"-->"))):y.value})(m))},v=function(hn){var Vn=i(m),Pn=f(m);return"<"+(Vn+(" "+(Pn+(" data-deku-ssr-"+(p+('="true">'+(l(p)+("</"+(Vn+">")))))))))},$=yo(m)(0);return $ instanceof D&&$.value0 instanceof Zu?o(void 0):$ instanceof D&&$.value0 instanceof Yu?o(void 0):$ instanceof D&&$.value0 instanceof Jf?S_($.value0.value0):v(void 0)})(go(Zt)(p)(a.idToActions))},l=function(p){var m=cr([])(go(Zt)(p)(a.parentToChild));return Mt(J)(fu)(_)(m)},s=function(p){return Qr(Vt)(function(m){return function(o){return function(v){var $=u(v);if($)return o;if(!$)return Lf("data-deku-ssr-"+m)(f(v)+(" data-deku-ssr-"+m))(o);throw new Error("Failed pattern match at Deku.SSR (line 83, column 19 - line 85, column 136): "+[$.constructor.name])}}})(l(p))(a.idToActions)};return"<"+(n+(' data-deku-ssr-deku-root="true">'+(s("deku-root")+("</"+(n+">")))))}};var yD=function(n){return Ie(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Et();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:mn(Mo)})}},toElt:function(t){return t}})},KF=function(n){return function(){var r=C_(),e=te(Fn)(Wa(0))(vD)();b_(r)();var a=$t(yD(ef)({parent:new D("deku-root"),scope:new ya("rootScope"),raiseId:function(u){return c(ur)(void 0)},pos:y.value})(e)(n))(function(u){return u(r)})();return g_(r)(),a}},bD=function(n){return z(Fn)(KF(n))},n0=function(n){return function(t){return function(r){return function(e){return d(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(){var a=DD(t);return function(u){return function(i){return r.head+i}(function(i){return i+r.tail}(a(u)))}}())(I(n.MonadST5())(function(){var u=vt(0)(),i=vt([])(),f=mD(u);return z(dt)($t(yD(rf)({parent:new D("deku-root"),scope:new ya("rootScope"),raiseId:function(_){return c(_r)(void 0)},pos:y.value})(f)(e))(function(_){return _(i)}))(),et(i)()}))}}}},gD=function(n){return n0(n)("body")};var t0=function(){return M.value}(),TD=function(n){return af()(n)()(so({reflectSymbol:function(){return"buttonClicked"}})(po(mo(n.Always2())(Go)))(so({reflectSymbol:function(){return"sliderMoved"}})(po(mo(n.Always2())(Go)))(Li)()())()())(Eo({reflectSymbol:function(){return"buttonClicked"}})()()(Eo({reflectSymbol:function(){return"sliderMoved"}})()()(Yi)()()()())()()()())(M.value)(function(t){return function(r){return zn(n)([Rd(n)([$n(n.MonadST5())(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),Cr(n)(qf(Hn)(jr)(So)(c(x(n.MonadST5()))(t.buttonClicked)))([$n(n.MonadST5())("Click")]),zn(n)([Wr(n.MonadST5())(V(Nn(n.MonadST5().Monad0().Applicative0()))(c(x(n.MonadST5()))("Val: 0"))(d(Hn)(function(){var e=h(Re)("Val: "),a=R(Jr);return function(u){return e(a(u))}}())(Da(gr(n.MonadST5()))(L(It(Pr)(1)))(V(Nn(n.MonadST5().Monad0().Applicative0()))(c(x(n.MonadST5()))(void 0))(r.buttonClicked))(-1))))]),zn(n)([ga(n)(Hf(n.MonadST5())(c(x(n.MonadST5()))(t.sliderMoved)))([]),zn(n)([Wr(n.MonadST5())(V(Nn(n.MonadST5().Monad0().Applicative0()))(c(x(n.MonadST5()))("Val: 50"))(d(Hn)(function(){var e=h(Re)("Val: "),a=R(uu);return function(u){return e(a(u))}}())(r.sliderMoved)))])])])}})},hD=function(n){return function(t){return kt({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Qn()(Qn()(Qn()(Qn()(Qn()(Lt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}})(t))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}})(t))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}})(t))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})(t))(t)(t0)({code2:Xn(xt(t)([At(t)([$n(t.MonadST5())(Ml)])])),code1:Xn(xt(t)([At(t)([$n(t.MonadST5())(Fl)])])),code0:Xn(xt(t)([At(t)([$n(t.MonadST5())(El)])])),result:Xn(TD(t)),codegen:Xn(xt(t)([At(t)([Wr(t.MonadST5())(nr(function(r){return tn(t.MonadST5().Monad0().Bind1().Apply0())(b(t.MonadST5().Monad0().Bind1())(gD(t)({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(TD(rf)))(r))(c(t.MonadST5().Monad0().Applicative0())(c(t.MonadST5().Monad0().Applicative0())(void 0)))}))])]))})}};var ED=function(n){return function(t){var r=function(a){if(a instanceof mf)return Fd;if(a instanceof No)return Ed;if(a instanceof ko)return zm;if(a instanceof Ro)return Nd;if(a instanceof Wo)return Cd;if(a instanceof Uo)return pd;if(a instanceof Oo)return kd;if(a instanceof Bo)return hd;if(a instanceof Ho)return Pd;if(a instanceof qo)return hD;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[a.constructor.name])},e=function(a){return function(u){return r(u)({dpage:a,slug:n.slug})(t)}};return Ao(t)(t.Always2())(function(a){return Lr(br)(function(u){return V(Nn(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5()))(n.startsWith))(u)})(function(u){return zn(t)([zn(t)(d(mt)(function(i){return Pu(t)([lf(t)(_t(J)(j(t.MonadST5().Monad0().Applicative0()))(c(x(t.MonadST5())))([B(Dt)(at.value)(tt(function(f){return tn(Yn)(Rt(f))(a(i.value0))})),B(Sm)(pr.value)("cursor:pointer;"),B(Nt)(Pt.value)(n.slug+i.value1.value1.value0)]))([$n(t.MonadST5())(i.value1.value0)]),za(t)(c(x(t.MonadST5()))(B($o)(pr.value)(function(){return i.value1.value1.value1?"":"display:none;"}())))([$n(t.MonadST5())(" | ")])])})([new T(mf.value,new T("Home",new T("",!0))),new T(No.value,new T("Hello world",new T("hello/",!0))),new T(ko.value,new T("Component",new T("simple/",!0))),new T(Ro.value,new T("Pursx 1",new T("pursx1/",!0))),new T(Wo.value,new T("Events 1",new T("events1/",!0))),new T(Uo.value,new T("Effects",new T("effects/",!0))),new T(Oo.value,new T("Pursx 2",new T("pursx2/",!0))),new T(Bo.value,new T("Events 2",new T("events2/",!0))),new T(Ho.value,new T("Portals",new T("portals/",!0))),new T(qo.value,new T("SSR",new T("ssr/",!1)))])),zn(t)([xu(t.MonadST5())(e(a))(u)])])})})}};var w8=function(n){return function(){var r=Un(Ru(Vo("could not ingest options: "+R(as()()(Kf({reflectSymbol:function(){return"slug"}})(Kf({reflectSymbol:function(){return"startsWith"}})(rs)(dr))(dr)))(n))))(c(ur))(Wm(n.startsWith))();return bD(ED({slug:n.slug,startsWith:r})(ef))()}};export{w8 as main};
