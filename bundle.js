var cs=function(n){return function(t){for(var r=n.length,e=t.length,a=new Array(r*e),u=0,i=0;i<r;i++)for(var f=n[i],p=0;p<e;p++)a[u++]=f(t[p]);return a}};var Ca={compose:function(n){return function(t){return function(r){return n(t(r))}}}},na=function(n){return n.compose};var nn=function(n){return n.identity},j={identity:function(n){return n},Semigroupoid0:function(){return Ca}};var ar=!0;var kf=function(n){return function(t){return function(r){return function(e){return n(t(r))(t(e))}}}},lt=function(n){return function(t){return function(r){return n(r)(t)}}},L=function(n){return function(t){return n}};var Of=function(n){return function(t){return t(n)}};var ls=function(n){return function(t){for(var r=t.length,e=new Array(r),a=0;a<r;a++)e[a]=n(t[a]);return e}};var M=function(){function n(){}return n.value=new n,n}();var v=function(n){return n.map},Qr=function(n){return function(t){return function(r){return v(n)(r)(t)}}},tn=function(n){return v(n)(L(void 0))},Ur=function(n){return function(t){return function(r){return v(n)(L(r))(t)}}};var Hr={map:na(Ca)},st={map:ls};var Go={apply:cs,Functor0:function(){return st}},En=function(n){return n.apply};var rn=function(n){return function(t){return function(r){return En(n)(v(n.Functor0())(L(nn(j)))(t))(r)}}},Tr=function(n){return function(t){return function(r){return function(e){return En(n)(v(n.Functor0())(t)(r))(e)}}}};var D=function(n){return n.pure};var we=function(n){return function(t){return function(r){if(t)return r;if(!t)return D(n)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[t.constructor.name,r.constructor.name])}}},Xo=function(n){return function(t){return function(r){return En(n.Apply0())(D(n)(t))(r)}}};var Qo={pure:function(n){return[n]},Apply0:function(){return Go}};var _s=function(n){return function(t){return n+t}},ps=function(n){return function(t){return n.length===0?t:t.length===0?n:n.concat(t)}};var Rt=function(n){return n.reflectSymbol};var hr=function(n){return function(t){return t[n]}},Ae=function(n){return function(t){return function(r){var e={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e[n]=t,e}}};var vs={append:function(n){return function(t){return void 0}}},Le={append:_s};var ft={append:ps};var F=function(n){return n.append};var q=function(n){return n.alt};var aD=String.fromCharCode(65535),oD=String.fromCharCode(0),uD=Number.POSITIVE_INFINITY,iD=Number.NEGATIVE_INFINITY;var ds=function(n){return function(t){return function(r){return function(e){return function(a){return e<a?n:e===a?t:r}}}}};var Ds=ds;var ys=ds;var gs=function(n){return function(t){return n===t}};var bs=gs;var Cs=gs;var ta={eq:Cs};var Yo={eq:bs};var _n=function(n){return n.eq};var un=function(){function n(){}return n.value=new n,n}(),vn=function(){function n(){}return n.value=new n,n}(),mn=function(){function n(){}return n.value=new n,n}();var Ts=function(n){return function(t){return n-t|0}};var hs=function(n){return function(t){return n+t|0}},Es=function(n){return function(t){return n*t|0}},Fs=function(n){return function(t){return n+t}},Ms=function(n){return function(t){return n*t}};var Zo={add:Fs,zero:0,mul:Ms,one:1},$r={add:hs,zero:0,mul:Es,one:1};var Yr=function(n){return n.mul};var kt=function(n){return n.add};var Uf={sub:Ts,Semiring0:function(){return $r}};var Gt=function(){return{compare:ys(un.value)(mn.value)(vn.value),Eq0:function(){return ta}}}();var Er=function(){return{compare:Ds(un.value)(mn.value)(vn.value),Eq0:function(){return Yo}}}();var pn=function(n){return n.compare};var qr=function(n){return n.top};var Ta={top:2147483647,bottom:-2147483648,Ord0:function(){return Er}};var Zr=function(n){return n.bottom};var ws=function(n){return n.toString()},As=function(n){var t=n.toString();return isNaN(t+".0")?t:t+".0"};var Ls=function(n){var t=n.length;return'"'+n.replace(/[\0-\x1F\x7F"\\]/g,function(r,e){switch(r){case'"':case"\\":return"\\"+r;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var a=e+1,u=a<t&&n[a]>="0"&&n[a]<="9"?"\\&":"";return"\\"+r.charCodeAt(0).toString(10)+u})+'"'};var Is=function(n){return function(t){return[n].concat(t)}},ri=function(n){return function(t){return t.join(n)}};var _r={show:Ls},Ss={showRecordFields:function(n){return function(t){return[]}}},$s=function(n){return n.showRecordFields},Ps=function(){return function(){return function(n){return{show:function(t){var r=$s(n)(M.value)(t);return r.length===0?"{}":ri(" ")(["{",ri(", ")(r),"}"])}}}}};var nu={show:As},zr={show:ws};var N=function(n){return n.show};var Bf=function(n){return function(t){return function(r){return{showRecordFields:function(e){return function(a){var u=$s(t)(M.value)(a),i=Rt(n)(M.value),f=hr(i)(a);return Is(ri(": ")([i,N(r)(f)]))(u)}}}}}};var y=function(){function n(){}return n.value=new n,n}(),d=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var qn=function(n){return function(t){return function(r){if(r instanceof y)return n;if(r instanceof d)return t(r.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}};var Xa=qn(!1)(L(!0));var rt={map:function(n){return function(t){return t instanceof d?new d(n(t.value0)):y.value}}};var ur=function(n){return qn(n)(nn(j))},Fr=function(){return function(n){if(n instanceof d)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[n.constructor.name])}};var ha={apply:function(n){return function(t){if(n instanceof d)return v(rt)(n.value0)(t);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,t.constructor.name])}},Functor0:function(){return rt}},Mr={bind:function(n){return function(t){if(n instanceof d)return t(n.value0);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,t.constructor.name])}},Apply0:function(){return ha}};var Ot=function(){return{pure:d.create,Apply0:function(){return ha}}}();var FD={alt:function(n){return function(t){return n instanceof y?t:n}},Functor0:function(){return rt}},ks=function(){return{empty:y.value,Alt0:function(){return FD}}}();var Os=function(n){return Math.min(Math.abs(n),2147483647)},Ws=function(n){return function(t){return t===0?0:t>0?Math.floor(n/t):-Math.floor(n/-t)}},Us=function(n){return function(t){if(t===0)return 0;var r=Math.abs(t);return(n%r+r)%r}};var Hs={Ring0:function(){return Uf}};var tu=function(n){return n.mod};var ai={degree:Os,div:Ws,mod:Us,CommutativeRing0:function(){return Hs}};var Vr={mempty:void 0,Semigroup0:function(){return vs}},ru={mempty:"",Semigroup0:function(){return Le}};var bn=function(n){return n.mempty};var Qa=function(n){return{always:L(bn(n)),Monoid0:function(){return n}}},Ya=function(n){return{always:nn(j),Monoid0:function(){return n}}},eu=function(n){return n.always};var H=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),k=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var zf=function(n){return qn(new H(n))(k.create)};var Za={map:function(n){return function(t){if(t instanceof H)return new H(t.value0);if(t instanceof k)return new k(n(t.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[t.constructor.name])}}};var Jr=function(n){return function(t){return function(r){if(r instanceof H)return n(r.value0);if(r instanceof k)return t(r.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},Vf=function(){return Jr(L(y.value))(d.create)}();var dn=function(n){return n.empty};var qs=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=a-1;u>=0;u--)e=n(r[u])(e);return e}}},zs=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=0;u<a;u++)e=n(e)(r[u]);return e}}};var Vs=function(n){return function(t){for(var r=[],e=0,a=n.length;e<a;e++)Array.prototype.push.apply(r,t(n[e]));return r}};var Jn=function(n){return n.discard};var ui={bind:Vs,Apply0:function(){return Go}},b=function(n){return n.bind},Se=function(n){return lt(b(n))},ii=function(n){return function(t){return function(r){return function(e){return Se(n)(t)(r(e))}}}},fi=function(n){return function(t){return function(r){return function(e){return b(n)(t(e))(r)}}}};var jn={discard:function(n){return b(n)}};var Ea=function(n){return function(t){return b(n)(t)(nn(j))}};var ND=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var Gs={defer:function(n){return function(t){return n(void 0)(t)}}},Ka=function(n){return n.defer},jf=function(n){return function(t){var r=ND("go","Control.Lazy",function(){return Ka(n)(function(a){return t(r(25))})}),e=r(25);return e}};var Xs=function(n){return function(t){return n&&t}},Qs=function(n){return function(t){return n||t}},Ys=function(n){return!n};var jr=function(n){return n.not};var au=function(n){return n.ff};var to=function(n){return n.disj},ir={ff:!1,tt:!0,implies:function(n){return function(t){return to(ir)(jr(ir)(n))(t)}},conj:Xs,disj:Qs,not:Ys};var T=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var Wt=function(n){return n.value1};var Fa={map:function(n){return function(t){return new T(t.value0,n(t.value1))}}};var fu=function(n){return n};var JD=function(n){return{append:function(t){return function(r){return to(n)(t)(r)}}}};var Zf=function(n){return{mempty:au(n),Semigroup0:function(){return JD(n)}}};var jD=function(n){return{append:function(t){return function(r){return na(n)(t)(r)}}}};var xa=function(n){return{mempty:nn(n),Semigroup0:function(){return jD(n.Semigroupoid0())}}};var E=function(n){return n};var ve=function(){return E};var bt=ve;var pi=function(){return function(){return function(){return function(){return function(n){return ve()}}}}};var Gn=function(n){return n.foldr};var ao=function(n){return function(t){return Gn(n)(q(t.Alt0()))(dn(t))}},ct=function(n){return function(t){return function(r){return Gn(n)(function(){var e=q(t.Alt0());return function(a){return e(r(a))}}())(dn(t))}}},ne=function(n){return function(t){return function(r){return Gn(t)(function(){var e=rn(n.Apply0());return function(a){return e(r(a))}}())(D(n)(void 0))}}},fr=function(n){return function(t){return lt(ne(n)(t))}},mi=function(n){return function(t){return ne(n)(t)(nn(j))}},Xn=function(n){return n.foldl};var $e=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:F(t.Semigroup0())(u.acc)(F(t.Semigroup0())(r)(i))}}};return Xn(n)(a)({init:!0,acc:bn(t)})(e).acc}}}};var Xt={foldr:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof d)return n(r.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof d)return n(t)(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof y)return bn(n);if(r instanceof d)return t(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name])}}}};var n_=function(n){return function(t){return function(r){return Gn(n)(function(e){return function(a){return F(t.Semigroup0())(r(e))(a)}})(bn(t))}}},Z={foldr:qs,foldl:zs,foldMap:function(n){return n_(Z)(n)}};var Lt=function(n){return n.foldMap};var aa=function(n){return function(t){return pi()()()()(fu)(Lt(n)(Zf(t)))}};var t_=function(n){return function(t){for(var r=t.length,e=Array(r),a=0;a<r;a++)e[a]=n(a)(t[a]);return e}};var de=function(n){return n};var De={map:function(n){return function(t){return n(t)}}};var a_={apply:function(n){return function(t){return n(t)}},Functor0:function(){return De}},YD={bind:function(n){return function(t){return t(n)}},Apply0:function(){return a_}},ZD={pure:de,Apply0:function(){return a_}},ot={Applicative0:function(){return ZD},Bind1:function(){return YD}};var Ne=function(n){return n.mapWithIndex};var uo={mapWithIndex:t_,Functor0:function(){return st}};var Re=function(n){return n.foldrWithIndex};var te=function(n){return n.foldlWithIndex};var ke=function(n){return n.foldMapWithIndex};var l_=function(){function n(a){return[a]}function t(a){return function(u){return[a,u]}}function r(a){return function(u){return function(i){return[a,u,i]}}}function e(a){return function(u){return a.concat(u)}}return function(a){return function(u){return function(i){return function(f){return function(p){function _(c,l){switch(l-c){case 0:return i([]);case 1:return u(n)(f(p[c]));case 2:return a(u(t)(f(p[c])))(f(p[c+1]));case 3:return a(a(u(r)(f(p[c])))(f(p[c+1])))(f(p[c+2]));default:var s=c+Math.floor((l-c)/4)*2;return a(u(e)(_(c,s)))(_(s,l))}}return _(0,p.length)}}}}}}();var pr=function(n){return n.traverse};var p_=function(n){return function(t){return pr(n)(t)(nn(j))}},Oe={traverse:function(n){return l_(En(n.Apply0()))(v(n.Apply0().Functor0()))(D(n))},sequence:function(n){return p_(Oe)(n)},Functor0:function(){return st},Foldable1:function(){return Z}};var ge=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var hi=function(n){return function(t){return new ge(t,dn(n))}};var _t=function(){function n(){}return n.value=new n,n}(),en=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Ei=function(n){return n},tg=function(n){return new en(n.value0,n.value1)};var rg=function(n){var t=function(r){return function(e){var a=r,u=!1,i;function f(p,_){if(_ instanceof en&&_.value1 instanceof en&&_.value1.value1 instanceof en){a=new en(_,p),e=_.value1.value1.value1;return}var c=function(s){return s instanceof en&&s.value1 instanceof en&&s.value1.value1 instanceof _t?new en(n(s.value0),new en(n(s.value1.value0),_t.value)):s instanceof en&&s.value1 instanceof _t?new en(n(s.value0),_t.value):_t.value},l=function(s){return function(o){var m=s,S=!1,Tn;function Hn(Pn,Ir){if(Pn instanceof en&&Pn.value0 instanceof en&&Pn.value0.value1 instanceof en&&Pn.value0.value1.value1 instanceof en){m=Pn.value1,o=new en(n(Pn.value0.value0),new en(n(Pn.value0.value1.value0),new en(n(Pn.value0.value1.value1.value0),Ir)));return}return S=!0,Ir}for(;!S;)Tn=Hn(m,o);return Tn}};return u=!0,l(p)(c(_))}for(;!u;)i=f(a,e);return i}};return t(_t.value)},lc={map:rg};var We={foldr:function(n){return function(t){var r=function(){var a=function(u){return function(i){var f=u,p=!1,_;function c(l,s){if(s instanceof _t)return p=!0,l;if(s instanceof en){f=new en(s.value0,l),i=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[l.constructor.name,s.constructor.name])}for(;!p;)_=c(f,i);return _}};return a(_t.value)}(),e=Xn(We)(lt(n))(t);return function(a){return e(r(a))}}},foldl:function(n){var t=function(r){return function(e){var a=r,u=!1,i;function f(p,_){if(_ instanceof _t)return u=!0,p;if(_ instanceof en){a=n(p)(_.value0),e=_.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[_.constructor.name])}for(;!u;)i=f(a,e);return i}};return t},foldMap:function(n){return function(t){return Xn(We)(function(r){var e=F(n.Semigroup0())(r);return function(a){return e(t(a))}})(bn(n))}}};var _u={append:function(n){return function(t){return Gn(We)(en.create)(t)(n)}}};var sc={append:function(n){return function(t){return new ge(n.value0,F(_u)(n.value1)(tg(t)))}}};var D_={alt:F(_u),Functor0:function(){return lc}},_c=function(){return{empty:_t.value,Alt0:function(){return D_}}}();var y_=function(n){return n()};var g_=function(n){throw new Error(n)};var b_=function(){return g_};var ug=y_,ee=function(n){return ug(function(){return b_()(n)})};function h_(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}function E_(n){return function(t){return function(r){return r[n]=t(r[n]),r}}}var mc=function(n){return function(t){return function(r){return function(e){return n(t,r,e)}}}};var M_=Ca;var x_=function(){return function(){return function(n){return function(t){return function(r){return function(e){return E_(Rt(n)(t))(r)(e)}}}}}};var w_=j,A_=function(n){return function(t){return n(h_(t))}};var Tg=function(n){return n},hg=function(n){return n.mappingWithIndex};var Eg=function(n){return n.mapping};var Fi={mapRecordWithIndexBuilder:function(n){return function(t){return nn(w_)}}},L_=function(n){return n.mapRecordWithIndexBuilder},co=function(n){return function(t){return function(r){return function(){return function(){return{mapRecordWithIndexBuilder:function(e){return function(a){return na(M_)(x_()()(n)(M.value)(hg(t)(a)(M.value)))(L_(r)(M.value)(a))}}}}}}}};var I_=function(){return function(n){return{hmap:function(){var t=L_(n)(M.value);return function(r){return A_(t(Tg(r)))}}()}}};var S_=function(n){return n.hmap},lo=function(n){return{mappingWithIndex:function(t){return function(r){return Eg(n)(t)}}}};var Fg=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),so=function(n){return function(t){return{mapping:function(r){return v(Hr)(eu(n))}}}},$_=function(n){return function(t){return S_(n)(new Fg(t))}};var P_=E;var N_=function(n){return function(t){return function(){return n(t())}}},R_=function(n){return function(){return n}},k_=function(n){return function(t){return function(){return t(n())()}}};function It(n){return function(){return{value:n}}}var Ct=function(n){return function(){return n.value}},O_=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}},wr=function(n){return function(t){return function(){return t.value=n}}};var Gr=function(n){return function(t){return function(r){return b(n.Bind1())(t)(function(e){return b(n.Bind1())(r)(function(a){return D(n.Applicative0())(e(a))})})}}};var yc=function(n){return function(){return n}},W_=function(n){return function(t){return function(){return t(n())()}}};var U_=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},_o={Applicative0:function(){return mr},Bind1:function(){return Ia}},Ia={bind:W_,Apply0:function(){return gc(0)}},mr={pure:yc,Apply0:function(){return gc(0)}},H_=U_("functorEffect","Effect",function(){return{map:Xo(mr)}}),gc=U_("applyEffect","Effect",function(){return{apply:Gr(_o),Functor0:function(){return H_(0)}}}),In=H_(20),Qn=gc(23),B_=function(n){return{append:Tr(Qn)(F(n))}},oe=function(n){return{mempty:yc(bn(n)),Semigroup0:function(){return B_(n.Semigroup0())}}};var q_=function(n){return function(){return{value:n}}};var po=function(n){return function(){return n.value}},z_=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}};var mu=q_,Lg=z_,V_=function(n){return Lg(function(t){var r=n(t);return{state:r,value:r}})};var Ng=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},Rg=O_,Ht=function(n){return Rg(function(t){var r=n(t);return{state:r,value:r}})},Tt={map:N_},xi={Applicative0:function(){return cr},Bind1:function(){return wi}},wi={bind:k_,Apply0:function(){return Cc(0)}},cr={pure:R_,Apply0:function(){return Cc(0)}},Cc=Ng("applyST","Control.Monad.ST.Internal",function(){return{apply:Gr(xi),Functor0:function(){return Tt}}}),j_=Cc(46);var G_={liftST:nn(j),Monad0:function(){return xi}},X_={liftST:P_,Monad0:function(){return _o}},yn=function(n){return n.liftST};var kg=function(n){return function(t){if(n<1)return[];var r=new Array(n);return r.fill(t)}},Og=function(n){return function(t){for(var r=[],e=0,a=0;a<n;a++)r[e++]=t;return r}},Tc=typeof Array.prototype.fill=="function"?kg:Og,Wg=function(){function n(a,u){this.head=a,this.tail=u}var t={};function r(a){return function(u){return new n(a,u)}}function e(a){for(var u=[],i=0,f=a;f!==t;)u[i++]=f.head,f=f.tail;return u}return function(a){return function(u){return e(a(r)(t)(u))}}}();var Q_=function(n){return function(t){return function(r){return function(e){return e<0||e>=r.length?t:n(r[e])}}}},Y_=function(n){return function(t){return function(r){return function(e){for(var a=0;a<e.length;a++){var u=r(e[a]);if(t(u))return u}return n}}}},Z_=function(n){return function(t){return function(r){return function(e){for(var a=0,u=e.length;a<u;a++)if(r(e[a]))return n(a);return t}}}};var K_=function(n){return function(t){return function(r){return function(e){if(r<0||r>=e.length)return t;var a=e.slice();return a.splice(r,1),n(a)}}}};var du=function(n){return function(t){return t.filter(n)}},Li=function(n){return function(t){for(var r=[],e=[],a=0;a<t.length;a++){var u=t[a];n(u)?r.push(u):e.push(u)}return{yes:r,no:e}}};var Ug=function(){function n(t,r,e,a,u,i){var f,p,_,c,l,s,o;for(f=u+(i-u>>1),f-u>1&&n(t,r,a,e,u,f),i-f>1&&n(t,r,a,e,f,i),p=u,_=f,c=u;p<f&&_<i;)l=a[p],s=a[_],o=r(t(l)(s)),o>0?(e[c++]=s,++_):(e[c++]=l,++p);for(;p<f;)e[c++]=a[p++];for(;_<i;)e[c++]=a[_++]}return function(t){return function(r){return function(e){var a;return e.length<2?e:(a=e.slice(0),n(t,r,a,e.slice(0),0,e.length),a)}}}}();var np=function(n){return function(t){return n[t]}};function Sa(){return[]}var hc=function(n){return function(t){return function(){return t.push.apply(t,n)}}};var Ce=function(n){return function(){return n}};function Bg(n){return function(){return n.slice()}}var Ec=Bg,qg=function(){function n(t,r,e,a,u,i){var f,p,_,c,l,s,o;for(f=u+(i-u>>1),f-u>1&&n(t,r,a,e,u,f),i-f>1&&n(t,r,a,e,f,i),p=u,_=f,c=u;p<f&&_<i;)l=a[p],s=a[_],o=r(t(l)(s)),o>0?(e[c++]=s,++_):(e[c++]=l,++p);for(;p<f;)e[c++]=a[p++];for(;_<i;)e[c++]=a[_++]}return function(t){return function(r){return function(e){return function(){return e.length<2||n(t,r,e,e.slice(0),0,e.length),e}}}}}();var ap=function(n){return function(t){return function(){var e=Ec(t)();return n(e)(),Ce(e)()}}};var Ue=function(n){return hc([n])};var Jg=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var jg=function(n){return function(){var r=Ct(n.value1)();return Ht(function(e){return e+1|0})(n.value1)(),n.value0(r)}};var Ii=function(n){return v(Tt)(Jg.create(n))(It(0))},Si=function(n){return function(t){return function(){for(var e=It(!1)();v(Tt)(jr(ir))(Ct(e))();)(function(){var u=jg(n)();if(u instanceof d)return t(u.value0)();if(u instanceof y)return tn(Tt)(wr(!0)(e))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[u.constructor.name])})();return{}}}};var cp=function(){return np};var $i=function(n){return function(t){return ap(Ue(t))(n)()}},lp=function(n){return[n]};var mo=function(){return Q_(d.create)(y.value)}();var Pi=function(){return Y_(y.value)(Xa)}();var xc=function(){return Z_(d.create)(y.value)}();var wc=function(n){return function(t){return v(rt)(cp()(t))(xc(n)(t))}};var sp=function(){return K_(d.create)(y.value)}(),Ac=function(n){return function(t){return function(r){return r.length===0?[]:qn(r)(function(e){return Fr()(sp(e)(r))})(xc(n(t))(r))}}};var gu=function(n){return function(t){return F(ft)([n])(t)}};var Kg=lt(b(ui)),Lc=function(n){return Kg(function(){var t=qn([])(lp);return function(r){return t(n(r))}}())};var B=function(){function n(){}return n.value=new n,n}(),an=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}(),xn=function(){function n(t,r,e,a,u,i,f){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i,this.value6=f}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return function(f){return new n(t,r,e,a,u,i,f)}}}}}}},n}(),ia=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),He=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),fa=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),Te=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),ca=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),Ri=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}();var Cu=function(n){return function(t){var r=pn(n),e=function(a){var u=!1,i;function f(p){if(p instanceof B)return u=!0,y.value;if(p instanceof an){var _=r(t)(p.value1);if(_ instanceof mn)return u=!0,new d(p.value2);if(_ instanceof un){a=p.value0;return}a=p.value3;return}if(p instanceof xn){var c=r(t)(p.value1);if(c instanceof mn)return u=!0,new d(p.value2);var l=r(t)(p.value4);if(l instanceof mn)return u=!0,new d(p.value5);if(c instanceof un){a=p.value0;return}if(l instanceof vn){a=p.value6;return}a=p.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[p.constructor.name])}for(;!u;)i=f(a);return i};return e}};var Et=function(n){return function(t){return function(r){var e=n,a=t,u=!1,i;function f(p,_,c){if(_ instanceof _t)return u=!0,c;if(_ instanceof en){if(_.value0 instanceof ia){e=p,a=_.value1,r=new an(c,_.value0.value0,_.value0.value1,_.value0.value2);return}if(_.value0 instanceof He){e=p,a=_.value1,r=new an(_.value0.value0,_.value0.value1,_.value0.value2,c);return}if(_.value0 instanceof fa){e=p,a=_.value1,r=new xn(c,_.value0.value0,_.value0.value1,_.value0.value2,_.value0.value3,_.value0.value4,_.value0.value5);return}if(_.value0 instanceof Te){e=p,a=_.value1,r=new xn(_.value0.value0,_.value0.value1,_.value0.value2,c,_.value0.value3,_.value0.value4,_.value0.value5);return}if(_.value0 instanceof ca){e=p,a=_.value1,r=new xn(_.value0.value0,_.value0.value1,_.value0.value2,_.value0.value3,_.value0.value4,_.value0.value5,c);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[_.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[_.constructor.name,c.constructor.name])}for(;!u;)i=f(e,a,r);return i}}},Oi=function(n){return function(t){return function(r){var e=function(i){return function(f){var p=i,_=!1,c;function l(s,o){if(s instanceof _t)return _=!0,new an(o.value0,o.value1,o.value2,o.value3);if(s instanceof en){if(s.value0 instanceof ia)return _=!0,Et(n)(s.value1)(new xn(o.value0,o.value1,o.value2,o.value3,s.value0.value0,s.value0.value1,s.value0.value2));if(s.value0 instanceof He)return _=!0,Et(n)(s.value1)(new xn(s.value0.value0,s.value0.value1,s.value0.value2,o.value0,o.value1,o.value2,o.value3));if(s.value0 instanceof fa){p=s.value1,f=new Ri(new an(o.value0,o.value1,o.value2,o.value3),s.value0.value0,s.value0.value1,new an(s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5));return}if(s.value0 instanceof Te){p=s.value1,f=new Ri(new an(s.value0.value0,s.value0.value1,s.value0.value2,o.value0),o.value1,o.value2,new an(o.value3,s.value0.value3,s.value0.value4,s.value0.value5));return}if(s.value0 instanceof ca){p=s.value1,f=new Ri(new an(s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3),s.value0.value4,s.value0.value5,new an(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[s.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[s.constructor.name,o.constructor.name])}for(;!_;)c=l(p,f);return c}},a=pn(n),u=function(i){return function(f){var p=i,_=!1,c;function l(s,o){if(o instanceof B)return _=!0,e(s)(new Ri(B.value,t,r,B.value));if(o instanceof an){var m=a(t)(o.value1);if(m instanceof mn)return _=!0,Et(n)(s)(new an(o.value0,t,r,o.value3));if(m instanceof un){p=new en(new ia(o.value1,o.value2,o.value3),s),f=o.value0;return}p=new en(new He(o.value0,o.value1,o.value2),s),f=o.value3;return}if(o instanceof xn){var S=a(t)(o.value1);if(S instanceof mn)return _=!0,Et(n)(s)(new xn(o.value0,t,r,o.value3,o.value4,o.value5,o.value6));var Tn=a(t)(o.value4);if(Tn instanceof mn)return _=!0,Et(n)(s)(new xn(o.value0,o.value1,o.value2,o.value3,t,r,o.value6));if(S instanceof un){p=new en(new fa(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),s),f=o.value0;return}if(S instanceof vn&&Tn instanceof un){p=new en(new Te(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),s),f=o.value3;return}p=new en(new ca(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),s),f=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[s.constructor.name,o.constructor.name])}for(;!_;)c=l(p,f);return c}};return u(_t.value)}}},gb=function(n){return function(t){var r=function(f){return function(p){var _=f,c=!1,l;function s(o,m){if(o instanceof _t)return c=!0,m;if(o instanceof en){if(o.value0 instanceof ia&&o.value0.value2 instanceof B&&m instanceof B)return c=!0,Et(n)(o.value1)(new an(B.value,o.value0.value0,o.value0.value1,B.value));if(o.value0 instanceof He&&o.value0.value0 instanceof B&&m instanceof B)return c=!0,Et(n)(o.value1)(new an(B.value,o.value0.value1,o.value0.value2,B.value));if(o.value0 instanceof ia&&o.value0.value2 instanceof an){_=o.value1,p=new xn(m,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof He&&o.value0.value0 instanceof an){_=o.value1,p=new xn(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,m);return}return o.value0 instanceof ia&&o.value0.value2 instanceof xn?(c=!0,Et(n)(o.value1)(new an(new an(m,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new an(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof He&&o.value0.value0 instanceof xn?(c=!0,Et(n)(o.value1)(new an(new an(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new an(o.value0.value0.value6,o.value0.value1,o.value0.value2,m)))):o.value0 instanceof fa&&o.value0.value2 instanceof B&&o.value0.value5 instanceof B&&m instanceof B?(c=!0,Et(n)(o.value1)(new xn(B.value,o.value0.value0,o.value0.value1,B.value,o.value0.value3,o.value0.value4,B.value))):o.value0 instanceof Te&&o.value0.value0 instanceof B&&o.value0.value5 instanceof B&&m instanceof B?(c=!0,Et(n)(o.value1)(new xn(B.value,o.value0.value1,o.value0.value2,B.value,o.value0.value3,o.value0.value4,B.value))):o.value0 instanceof ca&&o.value0.value0 instanceof B&&o.value0.value3 instanceof B&&m instanceof B?(c=!0,Et(n)(o.value1)(new xn(B.value,o.value0.value1,o.value0.value2,B.value,o.value0.value4,o.value0.value5,B.value))):o.value0 instanceof fa&&o.value0.value2 instanceof an?(c=!0,Et(n)(o.value1)(new an(new xn(m,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value0 instanceof an?(c=!0,Et(n)(o.value1)(new an(new xn(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,m),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value5 instanceof an?(c=!0,Et(n)(o.value1)(new an(o.value0.value0,o.value0.value1,o.value0.value2,new xn(m,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof ca&&o.value0.value3 instanceof an?(c=!0,Et(n)(o.value1)(new an(o.value0.value0,o.value0.value1,o.value0.value2,new xn(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,m)))):o.value0 instanceof fa&&o.value0.value2 instanceof xn?(c=!0,Et(n)(o.value1)(new xn(new an(m,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new an(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value0 instanceof xn?(c=!0,Et(n)(o.value1)(new xn(new an(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new an(o.value0.value0.value6,o.value0.value1,o.value0.value2,m),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value5 instanceof xn?(c=!0,Et(n)(o.value1)(new xn(o.value0.value0,o.value0.value1,o.value0.value2,new an(m,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new an(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof ca&&o.value0.value3 instanceof xn?(c=!0,Et(n)(o.value1)(new xn(o.value0.value0,o.value0.value1,o.value0.value2,new an(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new an(o.value0.value3.value6,o.value0.value4,o.value0.value5,m)))):(c=!0,ee("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!c;)l=s(_,p);return l}},e=function(f){return function(p){var _=f,c=!1,l;function s(o,m){if(m instanceof an&&m.value0 instanceof B&&m.value3 instanceof B)return c=!0,r(o)(B.value);if(m instanceof an){_=new en(new He(m.value0,m.value1,m.value2),o),p=m.value3;return}if(m instanceof xn&&m.value0 instanceof B&&m.value3 instanceof B&&m.value6 instanceof B)return c=!0,r(new en(new He(B.value,m.value1,m.value2),o))(B.value);if(m instanceof xn){_=new en(new ca(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),o),p=m.value6;return}return c=!0,ee("The impossible happened in partial function `removeMaxNode`.")}for(;!c;)l=s(_,p);return l}},a=function(f){var p=!1,_;function c(l){if(l instanceof an&&l.value3 instanceof B)return p=!0,{key:l.value1,value:l.value2};if(l instanceof an){f=l.value3;return}if(l instanceof xn&&l.value6 instanceof B)return p=!0,{key:l.value4,value:l.value5};if(l instanceof xn){f=l.value6;return}return p=!0,ee("The impossible happened in partial function `maxNode`.")}for(;!p;)_=c(f);return _},u=pn(n),i=function(f){return function(p){var _=f,c=!1,l;function s(o,m){if(m instanceof B)return c=!0,y.value;if(m instanceof an){var S=u(t)(m.value1);if(m.value3 instanceof B&&S instanceof mn)return c=!0,new d(new T(m.value2,r(o)(B.value)));if(S instanceof mn){var Tn=a(m.value0);return c=!0,new d(new T(m.value2,e(new en(new ia(Tn.key,Tn.value,m.value3),o))(m.value0)))}if(S instanceof un){_=new en(new ia(m.value1,m.value2,m.value3),o),p=m.value0;return}_=new en(new He(m.value0,m.value1,m.value2),o),p=m.value3;return}if(m instanceof xn){var Hn=function(){return m.value0 instanceof B&&m.value3 instanceof B&&m.value6 instanceof B}(),S=u(t)(m.value4),Pn=u(t)(m.value1);if(Hn&&Pn instanceof mn)return c=!0,new d(new T(m.value2,Et(n)(o)(new an(B.value,m.value4,m.value5,B.value))));if(Hn&&S instanceof mn)return c=!0,new d(new T(m.value5,Et(n)(o)(new an(B.value,m.value1,m.value2,B.value))));if(Pn instanceof mn){var Tn=a(m.value0);return c=!0,new d(new T(m.value2,e(new en(new fa(Tn.key,Tn.value,m.value3,m.value4,m.value5,m.value6),o))(m.value0)))}if(S instanceof mn){var Tn=a(m.value3);return c=!0,new d(new T(m.value5,e(new en(new Te(m.value0,m.value1,m.value2,Tn.key,Tn.value,m.value6),o))(m.value3)))}if(Pn instanceof un){_=new en(new fa(m.value1,m.value2,m.value3,m.value4,m.value5,m.value6),o),p=m.value0;return}if(Pn instanceof vn&&S instanceof un){_=new en(new Te(m.value0,m.value1,m.value2,m.value4,m.value5,m.value6),o),p=m.value3;return}_=new en(new ca(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),o),p=m.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[m.constructor.name])}for(;!c;)l=s(_,p);return l}};return i(_t.value)}},lr={foldr:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof an)return Gn(lr)(n)(n(r.value2)(Gn(lr)(n)(t)(r.value3)))(r.value0);if(r instanceof xn)return Gn(lr)(n)(n(r.value2)(Gn(lr)(n)(n(r.value5)(Gn(lr)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof an)return Xn(lr)(n)(n(Xn(lr)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof xn)return Xn(lr)(n)(n(Xn(lr)(n)(n(Xn(lr)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof B)return bn(n);if(r instanceof an)return F(n.Semigroup0())(Lt(lr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value2))(Lt(lr)(n)(t)(r.value3)));if(r instanceof xn)return F(n.Semigroup0())(Lt(lr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value2))(F(n.Semigroup0())(Lt(lr)(n)(t)(r.value3))(F(n.Semigroup0())(t(r.value5))(Lt(lr)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[r.constructor.name])}}}},er={foldrWithIndex:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof an)return Re(er)(n)(n(r.value1)(r.value2)(Re(er)(n)(t)(r.value3)))(r.value0);if(r instanceof xn)return Re(er)(n)(n(r.value1)(r.value2)(Re(er)(n)(n(r.value4)(r.value5)(Re(er)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[r.constructor.name])}}},foldlWithIndex:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof an)return te(er)(n)(n(r.value1)(te(er)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof xn)return te(er)(n)(n(r.value4)(te(er)(n)(n(r.value1)(te(er)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[r.constructor.name])}}},foldMapWithIndex:function(n){return function(t){return function(r){if(r instanceof B)return bn(n);if(r instanceof an)return F(n.Semigroup0())(ke(er)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value1)(r.value2))(ke(er)(n)(t)(r.value3)));if(r instanceof xn)return F(n.Semigroup0())(ke(er)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value1)(r.value2))(F(n.Semigroup0())(ke(er)(n)(t)(r.value3))(F(n.Semigroup0())(t(r.value4)(r.value5))(ke(er)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[r.constructor.name])}}},Foldable0:function(){return lr}};var Pa=function(){return B.value}();var gp=function(n){return function(t){return function(r){return qn(r)(Wt)(gb(n)(t)(r))}}};var Na=function(n){return function(t){return function(r){return function(e){var a=t(Cu(n)(r)(e));if(a instanceof y)return gp(n)(r)(e);if(a instanceof d)return Oi(n)(r)(a.value0)(e);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[a.constructor.name])}}}};var bp={compact:function(n){return function(){var r=Sa(),e=Ii(function(a){return mo(n)(a)})();return Si(e)(function(){var a=tn(Tt);return function(u){return a(function(i){if(i instanceof y)return D(cr)(0);if(i instanceof d)return Ue(i.value0)(r);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[i.constructor.name])}(u))}}())(),Ce(r)()}()},separate:function(n){return function(){var r=Sa(),e=Sa(),a=Ii(function(u){return mo(n)(u)})();return Si(a)(function(){var u=tn(Tt);return function(i){return u(function(f){if(f instanceof H)return Ue(f.value0)(r);if(f instanceof k)return Ue(f.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[f.constructor.name])}(i))}}())(),En(j_)(v(Tt)(function(u){return function(i){return{left:u,right:i}}})(Ce(r)))(Ce(e))()}()}};var Ra=function(n){return n.compact};var Cp={partitionMap:function(n){var t=function(r){return function(e){var a=n(e);if(a instanceof H)return{left:F(ft)(r.left)([a.value0]),right:r.right};if(a instanceof k)return{right:F(ft)(r.right)([a.value0]),left:r.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[a.constructor.name])}};return Xn(Z)(t)({left:[],right:[]})},partition:Li,filterMap:Lc,filter:du,Compactable0:function(){return bp},Functor1:function(){return st}};var vr=function(n){return n.filterMap};var Tp=function(n){return n.filter};var dr={dimap:function(n){return function(t){return function(r){return function(e){return t(r(n(e)))}}}}},hp=function(n){return n.dimap},Ar=function(n){return function(t){return hp(n)(t)(nn(j))}};var yo=function(n){return n.keepLatest},sa=function(n){return n.fold};var ka=function(n){return function(t){return function(r){return function(e){return vr(n.Filterable1())(Wt)(sa(n)(function(a){return function(u){return v(Fa)(D(Ot))(t(a)(u.value0))}})(r)(new T(e,y.value)))}}}};var _a=function(n){return n.bang};function Pc(n){return function(t){return n===t}}var Fp=Pc;var $b=function(n){return n};var Yt=function(n){return function(t){return n(t)}},Pb=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(yn(n)(It(y.value)))(function(u){return b(n.Monad0().Bind1())(r(function(i){return yn(n)(tn(Tt)(wr(new d(i))(u)))}))(function(i){return b(n.Monad0().Bind1())(e(function(f){return b(n.Monad0().Bind1())(yn(n)(Ct(u)))(ne(t)(Xt)(function(p){return a(f(p))}))}))(function(f){return D(t)(rn(t.Apply0())(i)(f))})})})}}}}},Dr=$b;var Nb=function(n){return function(t){return function(r){return b(n.Monad0().Bind1())(yn(n)(It(y.value)))(function(e){return b(n.Monad0().Bind1())(t(function(a){return Jn(jn)(n.Monad0().Bind1())(b(n.Monad0().Bind1())(yn(n)(Ct(e)))(mi(n.Monad0().Applicative0())(Xt)))(function(){return b(n.Monad0().Bind1())(Yt(a)(r))(function(u){return yn(n)(tn(Tt)(wr(new d(u))(e)))})})}))(function(a){return D(n.Monad0().Applicative0())(Jn(jn)(n.Monad0().Bind1())(b(n.Monad0().Bind1())(yn(n)(Ct(e)))(mi(n.Monad0().Applicative0())(Xt)))(function(){return a}))})})}}},Kn={map:function(n){return function(t){return function(r){return t(function(e){return r(n(e))})}}}};var Rb=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(yn(n)(It(e)))(function(u){return r(function(i){return b(n.Monad0().Bind1())(yn(n)(Ht(t(i))(u)))(a)})})}}}}},hu=function(n){return function(t){return function(r){return function(e){return r(function(a){var u=t(a);if(u instanceof d)return e(u.value0);if(u instanceof y)return D(n)(void 0);throw new Error("Failed pattern match at FRP.Event (line 131, column 13 - line 133, column 27): "+[u.constructor.name])})}}}},Nc=function(n){return function(t){return hu(n)(function(r){var e=t(r);if(e)return new d(r);if(!e)return y.value;throw new Error("Failed pattern match at FRP.Event (line 89, column 13 - line 91, column 25): "+[e.constructor.name])})}};var Rc=function(n){return function(t){return b(n.Monad0().Bind1())(yn(n)(It([])))(function(r){return D(n.Monad0().Applicative0())({event:function(e){return b(t.Monad0().Bind1())(yn(t)(Ht(function(a){return F(ft)(a)([e])})(r)))(function(){return D(t.Monad0().Applicative0())(b(t.Monad0().Bind1())(yn(t)(Ht(Ac(Fp)(e))(r)))(function(){return D(t.Monad0().Applicative0())(void 0)}))})},push:function(e){return b(t.Monad0().Bind1())(yn(t)(Ct(r)))(ne(t.Monad0().Applicative0())(Z)(function(a){return a(e)}))}})})}},kb=function(n){return function(t){return function(r){return function(e){return b(t.Bind1())(Rc(n)(n))(function(a){var u=r(a.event);return b(t.Bind1())(Yt(u.input)(a.push))(function(i){return b(t.Bind1())(Yt(u.output)(e))(function(f){return D(t.Applicative0())(rn(t.Bind1().Apply0())(i)(f))})})})}}}};var Mp=function(n){return function(t){return function(r){return Dr(function(e){return b(n.Monad0().Bind1())(Rc(n)(n))(function(a){return Jn(jn)(n.Monad0().Bind1())(e(r(a.event)))(function(){return Yt(t)(a.push)})})})}}},Eu=function(n){return{compact:hu(n)(nn(j)),separate:function(t){return{left:hu(n)(function(r){if(r instanceof H)return new d(r.value0);if(r instanceof k)return y.value;throw new Error("Failed pattern match at FRP.Event (line 72, column 13 - line 74, column 33): "+[r.constructor.name])})(t),right:hu(n)(function(r){if(r instanceof k)return new d(r.value0);if(r instanceof H)return y.value;throw new Error("Failed pattern match at FRP.Event (line 79, column 13 - line 81, column 32): "+[r.constructor.name])})(t)}}}},le=function(n){return{filter:Nc(n),filterMap:hu(n),partition:function(t){return function(r){return{yes:Nc(n)(t)(r),no:Nc(n)(function(){var e=jr(ir);return function(a){return e(t(a))}}())(r)}}},partitionMap:function(t){return function(r){return{left:vr(le(n))(function(){var e=Jr(d.create)(L(y.value));return function(a){return e(t(a))}}())(r),right:vr(le(n))(function(e){return Vf(t(e))})(r)}}},Compactable0:function(){return Eu(n)},Functor1:function(){return Kn}}},kc=function(n){return function(t){return Dr(function(r){return b(n.Monad0().Bind1())(Rc(n)(n))(function(e){return Jn(jn)(n.Monad0().Bind1())(r(t(e.push)(e.event)))(function(){return D(n.Monad0().Applicative0())(D(n.Monad0().Applicative0())(void 0))})})})}},$=function(n){return function(t){return function(r){return v(n.Apply0().Functor0())(function(e){return D(n)(void 0)})(r(t))}}},Nn=function(n){return{alt:function(t){return function(r){return function(e){return En(n.Apply0())(v(n.Apply0().Functor0())(function(a){return function(u){return rn(n.Apply0())(a)(u)}})(t(e)))(r(e))}}},Functor0:function(){return Kn}}},z=function(n){return{empty:function(t){return D(n)(D(n)(void 0))},Alt0:function(){return Nn(n)}}},Ft=function(n){return{fold:Rb(n),keepLatest:Nb(n),sampleOn:Pb(n)(n.Monad0().Applicative0()),fix:kb(n)(n.Monad0()),bang:$(n.Monad0().Applicative0()),Plus0:function(){return z(n.Monad0().Applicative0())},Filterable1:function(){return le(n.Monad0().Applicative0())}}};var xp="_____$__$_$$_vbus";function Oc(n){return()=>{for(let t in n)delete n[t]}}function Wc(n){return()=>{let t=(u,i,f,p)=>{let _=Object.keys(p);for(var c=0;c<_.length;c++)if(p[_[c]]instanceof Object&&p[_[c]][xp]===xp){let l={},s={};t(u,l,s,p[_[c]]),i[_[c]]=l,f[_[c]]=s}else{let l=`${Math.random()}`;u[l]={},i[_[c]]=s=>()=>{let o=Object.values(u[l]);for(var m=0;m<o.length;m++)o[m](s)()},f[_[c]]=s=>()=>{let o=`${Math.random()}`;return u[l][o]=s,()=>{u[l]&&u[l][o]&&delete u[l][o]}}}},r={},e={},a={};return t(r,e,a,n),{p:e,e:a,s:r}}}var Uc=function(n){return function(){return function(){return function(t){return function(r){return function(e){return Ae(Rt(n)(t))(r)(e)}}}}}},Hc=function(n){return function(){return function(t){return function(r){return hr(Rt(n)(t))(r)}}}};var Ui={vb:function(n){return function(t){return function(r){return{}}}}},wp=function(n){return n.vb},qc=function(){return function(n){return function(t){return function(r){return function(e){var a=wp(t)(M.value)(M.value)(M.value);return Dr(function(u){return b(n.Monad0().Bind1())(Wc(a))(function(i){return Jn(jn)(n.Monad0().Bind1())(u(e(i.p)(i.e)))(function(){return D(n.Monad0().Applicative0())(Oc(i.s))})})})}}}}};var go=function(n){return function(){return function(){return function(t){return function(){return function(){return function(){return function(){return{vb:function(r){return function(e){return function(a){return Uc(n)()()(M.value)(void 0)(wp(t)(M.value)(M.value)(M.value))}}}}}}}}}}}};var pa=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),zc=function(){function n(){}return n.value=new n,n}();var Fu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Mu=function(){function n(){}return n.value=new n,n}(),Bi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),qi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),zi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),bo=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Sn=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Co={eq:function(n){return function(t){return n instanceof pa&&t instanceof pa?n.value0===t.value0:n instanceof zc&&t instanceof zc}}};var ut=function(n){return new zi(n)};var Ap=function(n){return new qi(n)};var Vi={Always0:function(){return Qa(oe(Vr))},Always1:function(){return Qa(oe(oe(Vr)))},Always2:function(){return Qa(oe(Vr))},Always3:function(){return Qa(xa(j))},Always4:function(){return Qa(xa(j))},MonadST5:function(){return G_}},Ji={Always0:function(){return Ya(oe(Vr))},Always1:function(){return Ya(oe(oe(Vr)))},Always2:function(){return Ya(oe(Vr))},Always3:function(){return Ya(xa(j))},Always4:function(){return Ya(xa(j))},MonadST5:function(){return X_}},ji=function(){return function(n){return function(){return function(t){return function(r){return function(e){return function(a){return new bo(qc()(n.MonadST5())(r)(e)(Ar(dr)($_(I_()(t))(M.value))(a)))}}}}}}};var Lp=function(){return new Bi(0)}();var Ip=function(){return Mu.value}(),To=function(){return Fu.create}();var Oa=function(n){return function(t){return function(r){return kc(n.MonadST5())(Ar(dr)(v(Hr)(eu(t)))(r))}}};var ho=function(n){return function(t){return function(r){return new bo(Oa(n)(t)(r))}}};function Sp(n){return()=>n.slice()}function $p(n){return t=>r=>()=>{r[n]=t}}function Pp(n){return()=>n.slice()}var Np=n=>t=>t[n];var he=function(n){return n.reflectType};var kp=function(n){return he(n)};var Eo=st;var Gi=function(){return function(n){return n}};var Vc=function(){return function(){return function(){return function(){return function(){return function(n){var t=kp(n);return function(r){return Np(t(r))}}}}}}};var Op=[];var Jc=function(){return function(){return function(n){return function(t){return gu(n)(t)}}}};function Wp(n){return function(){var t={};for(var r in n)hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}}var ma={};function Gc(n){return n()}function Up(n){return function(t){return function(r){return function(e){var a=r;function u(f){return function(p){return t(p)(f)(e[f])}}for(var i in e)hasOwnProperty.call(e,i)&&(a=n(a)(u(i)));return a}}}}function Xi(n){return function(t){var r=[];for(var e in t)hasOwnProperty.call(t,e)&&r.push(n(e)(t[e]));return r}}var Gb=Object.keys||Xi(function(n){return function(){return n}});function Xc(n){return function(t){return function(r){return function(){return r[n]=t,r}}}}var Qc=function(n){return function(t){return function(){return delete t[n],t}}};var rC=Xi(function(n){return function(t){return t}});var eC=Wp;var Hp=function(n){return function(t){return Gc(function(){var e=eC(t)();return n(e)(),e})}};var Fo=function(n){return function(t){return Hp(Xc(n)(t))}};var Bp=Up(Of),aC=function(n){return function(t){return Bp(function(r){return function(e){return function(a){return F(n.Semigroup0())(r)(t(e)(a))}}})(bn(n))}},qp={foldl:function(n){return Bp(function(t){return function(r){return n(t)}})},foldr:function(n){return function(t){return function(r){return Gn(Z)(n)(t)(rC(r))}}},foldMap:function(n){return function(t){return aC(n)(L(t))}}};var Yc=function(n){return Hp(Qc(n))};var zp=function(){function n(){}return n.value=new n,n}(),Kc=function(){function n(){}return n.value=new n,n}(),oC=function(){function n(){}return n.value=new n,n}();var xu=function(n){return function(t){return function(r){var e=function(a){var u=function(i){return function(f){return new T(f+1|0,new T(i,f))}};return ka(Ft(n))(u)(a)(0)};return new qi(yo(Ft(n))(Mp(n)(e(r))(function(a){return v(Kn)(function(u){return q(Nn(n.Monad0().Applicative0()))(_a(Ft(n))(new Fu(t(u.value0))))(v(Kn)(L(Mu.value))(Tp(le(n.Monad0().Applicative0()))(function(){var i=_n(Yo)(u.value1+1|0);return function(f){return i(Wt(f))}}())(a)))})(a)})))}}};var Ee=function(n){return function(t){return function(r){return function(e){return function(a){var u=function(i){return i(e)(a)};return function(i){if(i instanceof zi)return ct(Z)(z(n))(Ee(n)(t)(r)(e)(a))(i.value0);if(i instanceof bo)return yo(Ft(t))(v(Kn)(Ee(n)(t)(r)(e)(a))(i.value0));if(i instanceof Sn)return u(r.toElt(i.value0));if(i instanceof qi)return Dr(function(f){return b(t.Monad0().Bind1())(yn(t)(It(ma)))(function(p){return b(t.Monad0().Bind1())(Yt(i.value0)(function(_){return b(t.Monad0().Bind1())(r.ids(a))(function(c){return b(t.Monad0().Bind1())(yn(t)(It(D(n)(void 0))))(function(l){return b(t.Monad0().Bind1())(r.ids(a))(function(s){return b(t.Monad0().Bind1())(yn(t)(It(D(n)(void 0))))(function(o){return b(t.Monad0().Bind1())(yn(t)(It([])))(function(m){return b(t.Monad0().Bind1())(yn(t)(It(D(n)(void 0))))(function(S){return b(t.Monad0().Bind1())(v(n.Apply0().Functor0())(pa.create)(r.ids(a)))(function(Tn){return b(t.Monad0().Bind1())(yn(t)(It(zp.value)))(function(Hn){return b(t.Monad0().Bind1())(Yt(_)(function(Pn){return b(t.Monad0().Bind1())(yn(t)(Ct(Hn)))(function(Ir){return Pn instanceof Bi&&Ir instanceof Kc?b(t.Monad0().Bind1())(yn(t)(Ct(m)))(ne(n)(Z)(function(){var tr=r.doLogic(Pn.value0)(a);return function(R){return f(tr(R))}}())):Pn instanceof Mu&&Ir instanceof Kc?Jn(jn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(wr(oC.value)(Hn))))(function(){var tr=rn(n.Apply0())(rn(n.Apply0())(rn(n.Apply0())(rn(n.Apply0())(b(t.Monad0().Bind1())(yn(t)(Ct(m)))(ne(n)(Z)(function(R){return fr(n)(Xt)(e.parent)(function(Vt){return f(r.disconnectElement(a)({id:R,parent:Vt,scope:Tn}))})})))(Ea(t.Monad0().Bind1())(yn(t)(Ct(l)))))(Ea(t.Monad0().Bind1())(yn(t)(Ct(o)))))(tn(n.Apply0().Functor0())(yn(t)(Ht(Yc(c))(p)))))(tn(n.Apply0().Functor0())(yn(t)(Ht(Yc(s))(p))));return rn(n.Apply0())(tn(n.Apply0().Functor0())(yn(t)(wr(tr)(S))))(tr)}):Pn instanceof Fu&&Ir instanceof zp?Jn(jn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(wr(Kc.value)(Hn))))(function(){return b(t.Monad0().Bind1())(Yt(Ee(n)(t)(r)(function(){var tr={};for(var R in e)({}).hasOwnProperty.call(e,R)&&(tr[R]=e[R]);return tr.scope=Tn,tr.raiseId=function(Vt){return tn(n.Apply0().Functor0())(yn(t)(Ht(F(ft)([Vt]))(m)))},tr}())(a)(Pn.value0))(f))(function(tr){return Jn(jn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(Ht(Fo(s)(tr))(p))))(function(){return tn(n.Apply0().Functor0())(yn(t)(wr(tr)(o)))})})}):D(n)(void 0)})}))(function(Pn){return Jn(jn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(wr(Pn)(l))))(function(){return Jn(jn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(Ht(Fo(c)(Pn))(p))))(function(){return Ea(t.Monad0().Bind1())(yn(t)(Ct(S)))})})})})})})})})})})})}))(function(_){return D(n)(Jn(jn)(t.Monad0().Bind1())(b(t.Monad0().Bind1())(yn(t)(Ct(p)))(Xn(qp)(rn(n.Apply0()))(D(n)(void 0))))(function(){return _}))})})});throw new Error("Failed pattern match at Bolson.Control (line 531, column 17 - line 615, column 20): "+[i.constructor.name])}}}}}},uC=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return function(u){return function(i){var f=function(p){return function(_){return Dr(function(c){return b(n.Monad0().Bind1())(Sp(v(st)(L(""))(Gi()(u))))(function(l){var s=ao(Z)(z(n.Monad0().Applicative0()))(Ne(uo)(function(o){return jf(Gs)(function(m){return function(S){return S instanceof Sn?function(Tn){return Tn(function(){var Hn={};for(var Pn in p)({}).hasOwnProperty.call(p,Pn)&&(Hn[Pn]=p[Pn]);return Hn.parent=y.value,Hn.scope=r(p.scope),Hn.raiseId=function(Ir){return $p(o)(Ir)(l)},Hn}())(_)}(a.toElt(S.value0)):m(a.wrapElt(S))}})})(Gi()(u)));return b(n.Monad0().Bind1())(Yt(s)(c))(function(o){return b(n.Monad0().Bind1())(yn(n)(It(D(n.Monad0().Applicative0())(void 0))))(function(m){return b(n.Monad0().Bind1())(v(n.Monad0().Bind1().Apply0().Functor0())(E)(Pp(l)))(function(S){var Tn=v(Eo)(function(Pn){return function(Ir){return new Sn(a.fromEltO1(function(tr){return function(R){return Dr(function(Vt){return Jn(jn)(n.Monad0().Bind1())(tr.raiseId(Pn))(function(){return Jn(jn)(n.Monad0().Bind1())(fr(n.Monad0().Applicative0())(Xt)(tr.parent)(function(Vo){return Vt(a.giveNewParent(R)({id:Pn,parent:Vo,scope:tr.scope})(Ir))}))(function(){return D(n.Monad0().Applicative0())(D(n.Monad0().Applicative0())(void 0))})})})}}))}})(S),Hn=Ee(n.Monad0().Applicative0())(n)(e)(p)(_)(i(Tn)(E));return b(n.Monad0().Bind1())(Yt(Hn)(c))(function(Pn){return Jn(jn)(n.Monad0().Bind1())(tn(n.Monad0().Bind1().Apply0().Functor0())(yn(n)(wr(Pn)(m))))(function(){return D(n.Monad0().Applicative0())(Jn(jn)(n.Monad0().Bind1())(o)(function(){return Jn(jn)(n.Monad0().Bind1())(we(n.Monad0().Applicative0())(!t)(fr(n.Monad0().Applicative0())(Z)(Gi()(S))(function(Ir){return c(a.deleteFromCache(_)({id:Ir}))})))(function(){return Ea(n.Monad0().Bind1())(yn(n)(Ct(m)))})}))})})})})})})})}};return new Sn(a.fromEltO2(f))}}}}}}}};var Vp=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return uC()(n)(!1)(nn(j))(t)(r)(e)(a)}}}}}};var iC=function(n){return n},Au=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Lu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),fC=function(n){return n},Qi=ve(),pt=fC;var Kt=function(){return Au.create}();var Wa=function(){return Lu.create}(),nt=function(){var n=v(Hr)(v(In)(L(!0)));return function(t){return iC(n(t))}}(),O=function(n){return n.attr};var cC=function(n){return n.makeText},lC=function(n){return function(t){return function(r){return v(Kn)(function(e){return n.setText(function(a){return{id:t,text:a}}(e))})(r)}}},sC=function(n){return function(t){return function(r){return v(Kn)(function(e){return function(a){if(a.value instanceof Au)return n.setProp({id:t,key:a.key,value:a.value.value0});if(a.value instanceof Lu)return n.setCb({id:t,key:a.key,value:a.value.value0});throw new Error("Failed pattern match at Deku.Control (line 82, column 26 - line 84, column 45): "+[a.value.constructor.name])}(Qi(e))})(r)}}},_C=function(n){return n.makeElement},pC=function(n){return n.attributeParent},kr=function(n){return function(t){var r=function(e){return function(a){return Dr(function(u){return b(n.Bind1())(a.ids)(function(i){return Jn(jn)(n.Bind1())(e.raiseId(i))(function(){return v(n.Bind1().Apply0().Functor0())(rn(n.Bind1().Apply0())(u(a.deleteFromCache({id:i}))))(Yt(ao(Z)(z(n.Applicative0()))([$(n.Applicative0())(cC(a)({id:i,parent:e.parent,scope:e.scope})),lC(a)(i)(t)]))(u))})})})}};return new Sn(r)}},$n=function(n){return function(t){return kr(n)($(n.Applicative0())(t))}},Jp=function(n){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=bt(n);return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:_n(Co)})}},toElt:function(t){return t}}};var Mo=function(n){return function(t){return function(r){return t(dn(z(n.MonadST5().Monad0().Applicative0())))([Ap(r)])}}};var mC=function(n){return Ee(n.MonadST5().Monad0().Applicative0())(n.MonadST5())(Jp())};var it=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return Dr(function(f){return b(n.MonadST5().Monad0().Bind1())(i.ids)(function(p){return Jn(jn)(n.MonadST5().Monad0().Bind1())(u.raiseId(p))(function(){return v(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(_){return rn(n.MonadST5().Monad0().Bind1().Apply0())(f(i.deleteFromCache({id:p})))(_)})(Yt(q(Nn(n.MonadST5().Monad0().Applicative0()))(ao(Z)(z(n.MonadST5().Monad0().Applicative0()))(F(ft)([$(n.MonadST5().Monad0().Applicative0())(_C(i)({id:p,parent:u.parent,scope:u.scope,tag:t})),sC(i)(p)(r)])(qn([])(function(_){return[$(n.MonadST5().Monad0().Applicative0())(pC(i)({id:p,parent:_,pos:u.pos}))]})(u.parent))))(mC(n)({parent:new d(p),scope:u.scope,raiseId:function(_){return D(n.MonadST5().Monad0().Applicative0())(void 0)},pos:y.value})(i)(e)))(f))})})})}};return a}}}};var jp=function(){return function(n){return function(t){return function(r){return Vp()(n.MonadST5())(Jp())({fromEltO1:ve(),fromEltO2:ve(),toElt:ve(),wrapElt:function(){var e=it(n)("div")(dn(z(n.MonadST5().Monad0().Applicative0())));return function(a){return Sn.create(e(a))}}(),giveNewParent:function(e){return function(a){return function(u){return bt()(e).giveNewParent(a)}}},deleteFromCache:function(){var e=bt();return function(a){return function(u){return u.deleteFromCache}(e(a))}}()})(t)(Ar(dr)(v(Eo)(function(e){return e(void 0)}))(ve()(r)))}}}};var St=function(){function n(){}return n.value=new n,n}();var $t={attr:function(n){return function(t){return pt({key:"href",value:Kt(t)})}}};var et=function(){function n(){}return n.value=new n,n}(),xo={attr:function(n){return function(t){return pt({key:"click",value:Wa(L(Ur(In)(t)(!0)))})}}};var mt={attr:function(n){return function(t){return pt({key:"click",value:Wa(t)})}}};var sr=function(){function n(){}return n.value=new n,n}();var wo={attr:function(n){return function(t){return pt({key:"style",value:Kt(t)})}}};var Gp={attr:function(n){return function(t){return pt({key:"style",value:Kt(t)})}}};var Xp={attr:function(n){return function(t){return pt({key:"style",value:Kt(t)})}}};var nl={attr:function(n){return function(t){return pt({key:"style",value:Kt(t)})}}};var Yi={attr:function(n){return function(t){return pt({key:"style",value:Kt(t)})}}};var Qp={attr:function(n){return function(t){return pt({key:"style",value:Kt(t)})}}};var Zi=function(n){return function(t){return function(r){return new Sn(it(n)("a")(t)(ut(r)))}}};var ze=function(n){return function(t){return function(r){return new Sn(it(n)("div")(t)(ut(r)))}}},Un=function(n){return ze(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var Ua=function(n){return function(t){return function(r){return new Sn(it(n)("span")(t)(ut(r)))}}},Su=function(n){return Ua(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var Ao=function(){function n(){}return n.value=new n,n}();var Zp={attr:function(n){return function(t){return pt({key:"type",value:Kt(t)})}}};var nf={attr:function(n){return function(t){return pt({key:"type",value:Kt(t)})}}};var yr=function(n){return function(t){return function(r){return new Sn(it(n)("button")(t)(ut(r)))}}},Kp=function(n){return yr(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var vC=function(n){return function(t){return function(r){return new Sn(it(n)("code")(t)(ut(r)))}}},xt=function(n){return vC(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var dC=function(n){return function(t){return function(r){return new Sn(it(n)("i")(t)(ut(r)))}}},nm=function(n){return dC(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var va=function(n){return function(t){return function(r){return new Sn(it(n)("input")(t)(ut(r)))}}};var yC=function(n){return function(t){return function(r){return new Sn(it(n)("li")(t)(ut(r)))}}},tm=function(n){return yC(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var bC=function(n){return function(t){return function(r){return new Sn(it(n)("pre")(t)(ut(r)))}}},wt=function(n){return bC(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var CC=function(n){return function(t){return function(r){return new Sn(it(n)("ul")(t)(ut(r)))}}},rm=function(n){return CC(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var rf=function(){function n(){}return n.value=new n,n}(),Lo=function(){function n(){}return n.value=new n,n}(),Io=function(){function n(){}return n.value=new n,n}(),So=function(){function n(){}return n.value=new n,n}(),$o=function(){function n(){}return n.value=new n,n}(),Po=function(){function n(){}return n.value=new n,n}(),No=function(){function n(){}return n.value=new n,n}(),Ro=function(){function n(){}return n.value=new n,n}(),ko=function(){function n(){}return n.value=new n,n}(),Oo=function(){function n(){}return n.value=new n,n}(),em=function(n){return n==="Intro"?D(Ot)(rf.value):n==="HelloWorld"?D(Ot)(Lo.value):n==="SimpleComponent"?D(Ot)(Io.value):n==="PURSX1"?D(Ot)(So.value):n==="PURSX2"?D(Ot)($o.value):n==="Events"?D(Ot)(Po.value):n==="Effects"?D(Ot)(No.value):n==="Events2"?D(Ot)(Ro.value):n==="Portals"?D(Ot)(ko.value):n==="SSR"?D(Ot)(Oo.value):dn(ks)};function rl(){window.scrollTo(0,0)}var nr=rl;var EC=function(n){return n};var At=function(n){return{pursxToElement:function(t){return function(r){return function(e){return{cache:ma,element:function(a){return function(u){return dn(z(n))}}}}}}}},el=function(n){return n.pursxToElement},Bt=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var f=el(n)(a)(M.value)(i);return{cache:Fo(he(t)(M.value))(!0)(f.cache),element:function(p){return function(_){return q(Nn(e.MonadST5().Monad0().Applicative0()))(v(Kn)(Ar(dr)(Qi)(function(c){if(c.value instanceof Au)return _.setProp({id:he(t)(M.value)+a,key:c.key,value:c.value.value0});if(c.value instanceof Lu)return _.setCb({id:he(t)(M.value)+a,key:c.key,value:c.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4475, column 38 - line 4485, column 24): "+[c.value.constructor.name])}))(Hc(r)()(M.value)(i)))(f.element(p)(_))}}}}}}}}}}}};var zn=EC,al=function(n){return function(t){return function(){return function(){return function(r){return function(e){return function(a){return function(u){return function(i){var f=function(p){return function(_){return Dr(function(c){return b(r.MonadST5().Monad0().Bind1())(_.ids)(function(l){return b(r.MonadST5().Monad0().Bind1())(_.ids)(function(s){return Jn(jn)(r.MonadST5().Monad0().Bind1())(p.raiseId(l))(function(){var o=el(e)(s)(M.value)(i);return v(r.MonadST5().Monad0().Bind1().Apply0().Functor0())(rn(r.MonadST5().Monad0().Bind1().Apply0())(c(_.deleteFromCache({id:l}))))(Yt(q(Nn(r.MonadST5().Monad0().Applicative0()))($(r.MonadST5().Monad0().Applicative0())(_.makePursx({id:l,parent:p.parent,cache:o.cache,pxScope:s,scope:p.scope,html:he(n)(u),verb:he(t)(a)})))(o.element(p)(_)))(c))})})})})}};return new Sn(f)}}}}}}}}},Pt=function(n){return function(){return function(){return function(t){return function(r){return al(n)({reflectType:function(){return"~"}})()()(r)(t)(M.value)}}}}},am=function(n){return function(){return function(t){return function(r){return function(e){return Pt(n)()()(r)(t)(e)({})}}}}},FC=function(n){return Ee(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=bt();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:_n(Co)})}},toElt:function(t){return t}})},Vn=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var f=Hc(r)()(M.value)(i),p=el(n)(a)(M.value)(i);return{cache:Fo(he(t)(M.value))(!1)(p.cache),element:function(_){return function(c){return q(Nn(e.MonadST5().Monad0().Applicative0()))(FC(e)({parent:new d(he(t)(M.value)+a),scope:_.scope,raiseId:function(l){return D(e.MonadST5().Monad0().Applicative0())(void 0)},pos:_.pos})(c)(f))(p.element(_)(c))}}}}}}}}}}}};function om(n){return n.target}function Nt(n){return function(){return n.preventDefault()}}function um(n,t,r){return n==null?t:r(n)}function ol(n){return n}var Wo=qn(null)(ol),qt=function(n){return um(n,y.value,d.create)};var of=function(n){return qt(om(n))};var AC=function(){return M.value}(),fm=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>bang</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>bang (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(AC)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBodyA)
import Effect (Effect)
import FRP.Event.Class (bang)

main :: Effect Unit
main = runInBodyA
  ( [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (bang $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (bang $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (bang $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`)])])),result:zn(Un(t)([Kp(t)([$n(t.MonadST5().Monad0())("I do nothing")]),rm(t)(v(st)(function(){var r=tm(t),e=D(Qo),a=$n(t.MonadST5().Monad0());return function(u){return r(e(a(u)))}}())(["A","B","C"])),Un(t)([Zi(t)($(t.MonadST5().Monad0().Applicative0())(O($t)(St.value)("https://example.com")))([$n(t.MonadST5().Monad0())("foo ")]),nm(t)([$n(t.MonadST5().Monad0())(" bar ")]),Ua(t)($(t.MonadST5().Monad0().Applicative0())(O(wo)(sr.value)("font-weight: 800;")))([$n(t.MonadST5().Monad0())(" baz")])]),Un(t)([Un(t)([Un(t)([va(t)($(t.MonadST5().Monad0().Applicative0())(O(nf)(Ao.value)("range")))([])])])])])),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(So.value)))(nr)})),O($t)(St.value)(n.slug+"pursx1/")])})}};function cm(n,t,r,e,a){return function(u,i){var f=n.newXHR(),p=n.fixupUrl(a.url,f);if(f.open(a.method||"GET",p,!0,a.username,a.password),a.headers)try{for(var _=0,c;(c=a.headers[_])!=null;_++)f.setRequestHeader(c.field,c.value)}catch(s){u(s)}var l=function(s){return function(){u(new Error(s))}};return f.onerror=l(r),f.ontimeout=l(t),f.onload=function(){i({status:f.status,statusText:f.statusText,headers:f.getAllResponseHeaders().split(`\r
`).filter(function(s){return s.length>0}).map(function(s){var o=s.indexOf(":");return e(s.substring(0,o))(s.substring(o+2))}),body:f.response})},f.responseType=a.responseType,f.withCredentials=a.withCredentials,f.timeout=a.timeout,f.send(a.content),function(s,o,m){try{f.abort()}catch(S){return o(S)}return m()}}}var uf="application/json",lm="application/x-www-form-urlencoded";var _m=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),pm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),mm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),vm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),dm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ul=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),il=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Dm=function(n){return n instanceof ul?new d(lm):n instanceof il?new d(uf):y.value};var ff=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),cf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ym=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),gm=function(n){if(n instanceof ff)return bt()(n.value0);if(n instanceof cf)return bt()(n.value0);if(n instanceof ym)return n.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[n.constructor.name])};var fl=function(n){if(n instanceof ff)return"Accept";if(n instanceof cf)return"Content-Type";if(n instanceof ym)return n.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[n.constructor.name])};var cl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ll=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),sl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),$u=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),_l=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),lf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),bm=function(n){if(n instanceof cl)return"arraybuffer";if(n instanceof ll)return"blob";if(n instanceof sl)return"document";if(n instanceof $u||n instanceof _l)return"text";if(n instanceof lf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[n.constructor.name])},Cm=function(n){return n instanceof $u?new d(uf):y.value};var Tm=function(){return new $u(nn(j))}(),hm=function(){return new lf(nn(j))}();var Fm=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();function Uo(n){return new Error(n)}function Pu(n){return n.message}function Nu(n){return function(){throw n}}var pe=function(n){return n.throwError};var Xe=function(n){return n.catchError};var _f=function(n){return function(t){return Xe(n)(v(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(k.create)(t))(function(){var r=D(n.MonadThrow0().Monad0().Applicative0());return function(e){return r(H.create(e))}}())}};var xe=function(n){return n.state};var Ho=function(n){return function(t){return xe(n)(function(r){var e=t(r);return new T(e,e)})}};var me=function(n){return n.liftEffect};var pl=function(n){return n};var ml=function(n){return n};var Df=function(n){return function(t){return n(t)}},xm=function(n){return{map:function(t){return Df(v(n)(v(Za)(t)))}}};var vl=function(n){return{Applicative0:function(){return qa(n)},Bind1:function(){return dl(n)}}},dl=function(n){return{bind:function(t){return function(r){return b(n.Bind1())(t)(Jr(function(){var e=D(n.Applicative0());return function(a){return e(H.create(a))}}())(function(e){var a=r(e);return a}))}},Apply0:function(){return wm(n)}}},wm=function(n){return{apply:Gr(vl(n)),Functor0:function(){return xm(n.Bind1().Apply0().Functor0())}}},qa=function(n){return{pure:function(){var t=D(n.Applicative0());return function(r){return pl(t(k.create(r)))}}(),Apply0:function(){return wm(n)}}};var Am=function(n){return{throwError:function(){var t=D(n.Applicative0());return function(r){return pl(t(H.create(r)))}}(),Monad0:function(){return vl(n)}}};var Dl=function(n){return function(t){return{alt:function(r){return function(e){return b(t.Bind1())(r)(function(a){if(a instanceof k)return D(t.Applicative0())(new k(a.value0));if(a instanceof H)return b(t.Bind1())(e)(function(u){if(u instanceof k)return D(t.Applicative0())(new k(u.value0));if(u instanceof H)return D(t.Applicative0())(new H(F(n)(a.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[a.constructor.name])})}},Functor0:function(){return xm(t.Bind1().Apply0().Functor0())}}}};var Lm=function(){var n=bt();return function(t){return n(ml(t))}}();function yl(n){return JSON.stringify(n)}function gl(n){return function(t){return JSON.stringify(t,null,n)}}var Im=ma;function $m(n,t,r){try{return t(JSON.parse(r))}catch(e){return n(e.message)}}var Pm=function(n){return $m(H.create,k.create,n)};var gf=function(n){return function(t){return function(r){return r.replace(n,t)}}};var bl=function(n){return function(t){return t.join(n)}};function JC(n){return n.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}var km=function(t,r,e){try{return r(JC(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(a){return t(a)}};var bf=function(){return mc(km)(L(y.value))(d.create)}();var XC=function(n){return n};var Om=function(){var n=function(e){if(e.value1 instanceof y)return bf(e.value0);if(e.value1 instanceof d)return En(ha)(v(rt)(function(a){return function(u){return a+("="+u)}})(bf(e.value0)))(bf(e.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[e.constructor.name])},t=v(rt)(bl("&")),r=pr(Oe)(Ot)(n);return function(e){return t(r(XC(e)))}}();var YC=function(){function n(){}return n.value=new n,n}(),Bu=function(){function n(){}return n.value=new n,n}(),ZC=function(){function n(){}return n.value=new n,n}(),Wm=function(){function n(){}return n.value=new n,n}(),Um=function(){function n(){}return n.value=new n,n}(),Hm=function(){function n(){}return n.value=new n,n}(),KC=function(){function n(){}return n.value=new n,n}(),nT=function(){function n(){}return n.value=new n,n}(),tT=function(){function n(){}return n.value=new n,n}(),rT=function(){function n(){}return n.value=new n,n}(),eT=function(){function n(){}return n.value=new n,n}(),aT=function(){function n(){}return n.value=new n,n}(),oT=function(){function n(){}return n.value=new n,n}(),uT=function(){function n(){}return n.value=new n,n}(),iT=function(){function n(){}return n.value=new n,n}(),Bm=function(){function n(){}return n.value=new n,n}();var fT=function(n){return n},cT={show:function(n){if(n instanceof YC)return"OPTIONS";if(n instanceof Bu)return"GET";if(n instanceof ZC)return"HEAD";if(n instanceof Wm)return"POST";if(n instanceof Um)return"PUT";if(n instanceof Hm)return"DELETE";if(n instanceof KC)return"TRACE";if(n instanceof nT)return"CONNECT";if(n instanceof tT)return"PROPFIND";if(n instanceof rT)return"PROPPATCH";if(n instanceof eT)return"MKCOL";if(n instanceof aT)return"COPY";if(n instanceof oT)return"MOVE";if(n instanceof uT)return"LOCK";if(n instanceof iT)return"UNLOCK";if(n instanceof Bm)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[n.constructor.name])}};var qm=Jr(N(cT))(fT);var Jm=function(){var n=hi(_c);return function(t){return Ei(n(t))}}();var jm=function(n){return n.value0};var Lr=function(){var n={},t="Pure",r="Throw",e="Catch",a="Sync",u="Async",i="Bind",f="Bracket",p="Fork",_="Sequential",c="Map",l="Apply",s="Alt",o="Cons",m="Resume",S="Release",Tn="Finalizer",Hn="Finalized",Pn="Forked",Ir="Fiber",tr="Thunk";function R(P,kn,Dt,Bn){this.tag=P,this._1=kn,this._2=Dt,this._3=Bn}function Vt(P){var kn=function(Dt,Bn,V){return new R(P,Dt,Bn,V)};return kn.tag=P,kn}function Vo(P){return new R(t,void 0)}function zd(P){try{P()}catch(kn){setTimeout(function(){throw kn},0)}}function Vd(P,kn,Dt){try{return kn(Dt())}catch(Bn){return P(Bn)}}function Jd(P,kn,Dt){try{return kn(Dt)()}catch(Bn){return Dt(P(Bn))(),Vo}}var Yu=function(){var P=1024,kn=0,Dt=0,Bn=new Array(P),V=!1;function w(){var On;for(V=!0;kn!==0;)kn--,On=Bn[Dt],Bn[Dt]=void 0,Dt=(Dt+1)%P,On();V=!1}return{isDraining:function(){return V},enqueue:function(On){var gn,vt;kn===P&&(vt=V,w(),V=vt),Bn[(Dt+kn)%P]=On,kn++,V||w()}}}();function jd(P){var kn={},Dt=0,Bn=0;return{register:function(V){var w=Dt++;V.onComplete({rethrow:!0,handler:function(On){return function(){Bn--,delete kn[w]}}})(),kn[w]=V,Bn++},isEmpty:function(){return Bn===0},killAll:function(V,w){return function(){if(Bn===0)return w();var On=0,gn={};function vt(Yn){gn[Yn]=kn[Yn].kill(V,function(ht){return function(){delete gn[Yn],On--,P.isLeft(ht)&&P.fromLeft(ht)&&setTimeout(function(){throw P.fromLeft(ht)},0),On===0&&w()}})()}for(var Jt in kn)kn.hasOwnProperty(Jt)&&(On++,vt(Jt));return kn={},Dt=0,Bn=0,function(Yn){return new R(a,function(){for(var ht in gn)gn.hasOwnProperty(ht)&&gn[ht]()})}}}}}var Va=0,br=1,Zu=2,Ku=3,ni=4,Sr=5,Jo=6;function Rf(P,kn,Dt){var Bn=0,V=Va,w=Dt,On=null,gn=null,vt=null,Jt=null,Yn=null,ht=0,ba=0,Wr=null,Ze=!0;function Ke(J){for(var G,wn,Rn;;)switch(G=null,wn=null,Rn=null,V){case Zu:V=br;try{w=vt(w),Jt===null?vt=null:(vt=Jt._1,Jt=Jt._2)}catch(rr){V=Sr,On=P.left(rr),w=null}break;case Ku:P.isLeft(w)?(V=Sr,On=w,w=null):vt===null?V=Sr:(V=Zu,w=P.fromRight(w));break;case br:switch(w.tag){case i:vt&&(Jt=new R(o,vt,Jt)),vt=w._2,V=br,w=w._1;break;case t:vt===null?(V=Sr,w=P.right(w._1)):(V=Zu,w=w._1);break;case a:V=Ku,w=Vd(P.left,P.right,w._1);break;case u:V=ni,w=Jd(P.left,w._1,function(rr){return function(){Bn===J&&(Bn++,Yu.enqueue(function(){Bn===J+1&&(V=Ku,w=rr,Ke(Bn))}))}});return;case r:V=Sr,On=P.left(w._1),w=null;break;case e:vt===null?Yn=new R(o,w,Yn,gn):Yn=new R(o,w,new R(o,new R(m,vt,Jt),Yn,gn),gn),vt=null,Jt=null,V=br,w=w._1;break;case f:ht++,vt===null?Yn=new R(o,w,Yn,gn):Yn=new R(o,w,new R(o,new R(m,vt,Jt),Yn,gn),gn),vt=null,Jt=null,V=br,w=w._1;break;case p:V=Ku,G=Rf(P,kn,w._2),kn&&kn.register(G),w._1&&G.run(),w=P.right(G);break;case _:V=br,w=Xd(P,kn,w._1);break}break;case Sr:if(vt=null,Jt=null,Yn===null)V=Jo,w=gn||On||w;else switch(G=Yn._3,Rn=Yn._1,Yn=Yn._2,Rn.tag){case e:gn&&gn!==G&&ht===0?V=Sr:On&&(V=br,w=Rn._2(P.fromLeft(On)),On=null);break;case m:gn&&gn!==G&&ht===0||On?V=Sr:(vt=Rn._1,Jt=Rn._2,V=Zu,w=P.fromRight(w));break;case f:ht--,On===null&&(wn=P.fromRight(w),Yn=new R(o,new R(S,Rn._2,wn),Yn,G),(gn===G||ht>0)&&(V=br,w=Rn._3(wn)));break;case S:Yn=new R(o,new R(Hn,w,On),Yn,gn),V=br,gn&&gn!==G&&ht===0?w=Rn._1.killed(P.fromLeft(gn))(Rn._2):On?w=Rn._1.failed(P.fromLeft(On))(Rn._2):w=Rn._1.completed(P.fromRight(w))(Rn._2),On=null,ht++;break;case Tn:ht++,Yn=new R(o,new R(Hn,w,On),Yn,gn),V=br,w=Rn._1;break;case Hn:ht--,V=Sr,w=Rn._1,On=Rn._2;break}break;case Jo:for(var gt in Wr)Wr.hasOwnProperty(gt)&&(Ze=Ze&&Wr[gt].rethrow,zd(Wr[gt].handler(w)));Wr=null,gn&&On?setTimeout(function(){throw P.fromLeft(On)},0):P.isLeft(w)&&Ze&&setTimeout(function(){if(Ze)throw P.fromLeft(w)},0);return;case Va:V=br;break;case ni:return}}function yt(J){return function(){if(V===Jo)return Ze=Ze&&J.rethrow,J.handler(w)(),function(){};var G=ba++;return Wr=Wr||{},Wr[G]=J,function(){Wr!==null&&delete Wr[G]}}}function K(J,G){return function(){if(V===Jo)return G(P.right(void 0))(),function(){};var wn=yt({rethrow:!1,handler:function(){return G(P.right(void 0))}})();switch(V){case Va:gn=P.left(J),V=Jo,w=gn,Ke(Bn);break;case ni:gn===null&&(gn=P.left(J)),ht===0&&(V===ni&&(Yn=new R(o,new R(Tn,w(J)),Yn,gn)),V=Sr,w=null,On=null,Ke(++Bn));break;default:gn===null&&(gn=P.left(J)),ht===0&&(V=Sr,w=null,On=null)}return wn}}function hn(J){return function(){var G=yt({rethrow:!1,handler:J})();return V===Va&&Ke(Bn),G}}return{kill:K,join:hn,onComplete:yt,isSuspended:function(){return V===Va},run:function(){V===Va&&(Yu.isDraining()?Ke(Bn):Yu.enqueue(function(){Ke(Bn)}))}}}function Gd(P,kn,Dt,Bn){var V=0,w={},On=0,gn={},vt=new Error("[ParAff] Early exit"),Jt=null,Yn=n;function ht(yt,K,hn){var J=K,G=null,wn=null,Rn=0,gt={},rr,jo;n:for(;;)switch(rr=null,J.tag){case Pn:if(J._3===n&&(rr=w[J._1],gt[Rn++]=rr.kill(yt,function(Qd){return function(){Rn--,Rn===0&&hn(Qd)()}})),G===null)break n;J=G._2,wn===null?G=null:(G=wn._1,wn=wn._2);break;case c:J=J._2;break;case l:case s:G&&(wn=new R(o,G,wn)),G=J,J=J._1;break}if(Rn===0)hn(P.right(void 0))();else for(jo=0,rr=Rn;jo<rr;jo++)gt[jo]=gt[jo]();return gt}function ba(yt,K,hn){var J,G,wn,Rn,gt,rr;P.isLeft(yt)?(J=yt,G=null):(G=yt,J=null);n:for(;;){if(wn=null,Rn=null,gt=null,rr=null,Jt!==null)return;if(K===null){Bn(J||G)();return}if(K._3!==n)return;switch(K.tag){case c:J===null?(K._3=P.right(K._1(P.fromRight(G))),G=K._3):K._3=J;break;case l:if(wn=K._1._3,Rn=K._2._3,J){if(K._3=J,gt=!0,rr=On++,gn[rr]=ht(vt,J===wn?K._2:K._1,function(){return function(){delete gn[rr],gt?gt=!1:hn===null?ba(J,null,null):ba(J,hn._1,hn._2)}}),gt){gt=!1;return}}else{if(wn===n||Rn===n)return;G=P.right(P.fromRight(wn)(P.fromRight(Rn))),K._3=G}break;case s:if(wn=K._1._3,Rn=K._2._3,wn===n&&P.isLeft(Rn)||Rn===n&&P.isLeft(wn))return;if(wn!==n&&P.isLeft(wn)&&Rn!==n&&P.isLeft(Rn))J=G===wn?Rn:wn,G=null,K._3=J;else if(K._3=G,gt=!0,rr=On++,gn[rr]=ht(vt,G===wn?K._2:K._1,function(){return function(){delete gn[rr],gt?gt=!1:hn===null?ba(G,null,null):ba(G,hn._1,hn._2)}}),gt){gt=!1;return}break}hn===null?K=null:(K=hn._1,hn=hn._2)}}function Wr(yt){return function(K){return function(){delete w[yt._1],yt._3=K,ba(K,yt._2._1,yt._2._2)}}}function Ze(){var yt=br,K=Dt,hn=null,J=null,G,wn;n:for(;;)switch(G=null,wn=null,yt){case br:switch(K.tag){case c:hn&&(J=new R(o,hn,J)),hn=new R(c,K._1,n,n),K=K._2;break;case l:hn&&(J=new R(o,hn,J)),hn=new R(l,n,K._2,n),K=K._1;break;case s:hn&&(J=new R(o,hn,J)),hn=new R(s,n,K._2,n),K=K._1;break;default:wn=V++,yt=Sr,G=K,K=new R(Pn,wn,new R(o,hn,J),n),G=Rf(P,kn,G),G.onComplete({rethrow:!1,handler:Wr(K)})(),w[wn]=G,kn&&kn.register(G)}break;case Sr:if(hn===null)break n;hn._1===n?(hn._1=K,yt=br,K=hn._2,hn._2=n):(hn._2=K,K=hn,J===null?hn=null:(hn=J._1,J=J._2))}for(Yn=K,wn=0;wn<V;wn++)w[wn].run()}function Ke(yt,K){Jt=P.left(yt);var hn;for(var J in gn)if(gn.hasOwnProperty(J)){hn=gn[J];for(J in hn)hn.hasOwnProperty(J)&&hn[J]()}gn=null;var G=ht(yt,Yn,K);return function(wn){return new R(u,function(Rn){return function(){for(var gt in G)G.hasOwnProperty(gt)&&G[gt]();return Vo}})}}return Ze(),function(yt){return new R(u,function(K){return function(){return Ke(yt,K)}})}}function Xd(P,kn,Dt){return new R(u,function(Bn){return function(){return Gd(P,kn,Dt,Bn)}})}return R.EMPTY=n,R.Pure=Vt(t),R.Throw=Vt(r),R.Catch=Vt(e),R.Sync=Vt(a),R.Async=Vt(u),R.Bind=Vt(i),R.Bracket=Vt(f),R.Fork=Vt(p),R.Seq=Vt(_),R.ParMap=Vt(c),R.ParApply=Vt(l),R.ParAlt=Vt(s),R.Fiber=Rf,R.Supervisor=jd,R.Scheduler=Yu,R.nonCanceler=Vo,R}(),Xm=Lr.Pure,Qm=Lr.Throw;function Ym(n){return function(t){return Lr.Catch(n,t)}}function Zm(n){return function(t){return t.tag===Lr.Pure.tag?Lr.Pure(n(t._1)):Lr.Bind(t,function(r){return Lr.Pure(n(r))})}}function Km(n){return function(t){return Lr.Bind(n,t)}}var nv=Lr.Sync;var qu=Lr.Async;function tv(n,t){return function(){return Lr.Fiber(n,null,t)}}var lT=function(){function n(r,e){return r===0&&typeof setImmediate<"u"?setImmediate(e):setTimeout(e,r)}function t(r,e){return r===0&&typeof clearImmediate<"u"?clearImmediate(e):clearTimeout(e)}return function(r,e){return Lr.Async(function(a){return function(){var u=n(e,a(r()));return function(){return Lr.Sync(function(){return r(t(e,u))})}}})}}(),sT=Lr.Seq;var qo={proof:function(n){return n},Coercible0:function(){}};var FT=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var Fl={map:Zm};var MT=function(){var n=function(e){if(e instanceof k)return e.value0;if(e instanceof H)return ee("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[e.constructor.name])},t=function(e){if(e instanceof H)return e.value0;if(e instanceof k)return ee("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[e.constructor.name])},r=function(e){if(e instanceof H)return!0;if(e instanceof k)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[e.constructor.name])};return{isLeft:r,fromLeft:t,fromRight:n,left:H.create,right:k.create}}(),xT=function(n){return tv(MT,n)},wT=function(n){return function(){var r=xT(n)();return r.run(),r}},uv=function(){var n=tn(In);return function(t){return n(wT(t))}}();var Ml={Applicative0:function(){return Cf},Bind1:function(){return xl}},xl={bind:Km,Apply0:function(){return iv(0)}},Cf={pure:Xm,Apply0:function(){return iv(0)}},iv=FT("applyAff","Effect.Aff",function(){return{apply:Gr(Ml),Functor0:function(){return Fl}}});var wl={liftEffect:nv,Monad0:function(){return Ml}};var AT={throwError:Qm,Monad0:function(){return Ml}},fv={catchError:Ym,MonadThrow0:function(){return AT}};var cv=L(D(Cf)(void 0));var mv=function(n){return qu(function(t){return function(){var e=n(function(a){return t(H.create(a))()},function(a){return t(k.create(a))()});return function(a){return qu(function(u){return function(){return e(a,function(f){return u(H.create(f))()},function(f){return u(k.create(f))()}),cv}})}}})};function Tf(n){return Object.prototype.toString.call(n).slice(8,-1)}var vv=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var dv=function(n){return function(t){return function(r){return(r|0)===r?n(r):t}}},gr=function(n){return n};var hf=isFinite;var Sl=Math.floor;var zu=function(n){return function(t){return n%t}};var Ef=function(){return dv(d.create)(y.value)}(),KT=function(n){if(!hf(n))return 0;if(n>=gr(qr(Ta)))return qr(Ta);if(n<=gr(Zr(Ta)))return Zr(Ta);if(ar)return ur(0)(Ef(n));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[n.constructor.name])};var Pl=function(n){return KT(Sl(n))};var Nl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Fv=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),uh=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),ih=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Da=E,fh=E;var Mf=function(n){if(n instanceof Nl)return n.value0;if(n instanceof uh)return"Error at array index "+(N(zr)(n.value0)+(": "+Mf(n.value1)));if(n instanceof ih)return"Error at property "+(N(_r)(n.value0)+(": "+Mf(n.value1)));if(n instanceof Fv)return"Type mismatch: expected "+(n.value0+(", found "+n.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[n.constructor.name])};var Rl=function(n){var t=pe(Am(n));return function(r){return t(Jm(r))}};var ya=function(n){return function(t){return function(r){if(Tf(r)===t)return D(qa(n))(fh(r));if(ar)return Rl(n)(new Fv(t,Tf(r)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[t.constructor.name,r.constructor.name])}}};var kl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Ol=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Wl=function(){function n(){}return n.value=new n,n}(),Ul=function(){function n(){}return n.value=new n,n}(),Hl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Mv=function(n){return function(t){var r=function(c){return c===""?D(qa(ot))(Im):Jr(function(){var l=Rl(ot);return function(s){return l(Nl.create(s))}}())(D(qa(ot)))(Pm(c))},e=function(){if(t.responseFormat instanceof cl)return ya(ot)("ArrayBuffer");if(t.responseFormat instanceof ll)return ya(ot)("Blob");if(t.responseFormat instanceof sl)return function(c){return q(Dl(sc)(ot))(ya(ot)("Document")(c))(q(Dl(sc)(ot))(ya(ot)("XMLDocument")(c))(ya(ot)("HTMLDocument")(c)))};if(t.responseFormat instanceof $u)return ii(dl(ot))(function(c){return t.responseFormat.value0(r(c))})(ya(ot)("String"));if(t.responseFormat instanceof _l)return ya(ot)("String");if(t.responseFormat instanceof lf)return L(t.responseFormat.value0(D(qa(ot))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[t.responseFormat.constructor.name])}(),a=function(c){if(c instanceof _m)return new k(c.value0(Da));if(c instanceof pm)return new k(Da(c.value0));if(c instanceof mm)return new k(Da(c.value0));if(c instanceof vm)return new k(Da(c.value0));if(c instanceof dm)return new k(Da(c.value0));if(c instanceof ul)return zf("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(v(rt)(Da)(Om(c.value0)));if(c instanceof il)return new k(Da(yl(c.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[c.constructor.name])},u=function(c){return function(l){return c instanceof d&&!aa(Z)(ir)(kf(_n(ta))(fl)(c.value0))(l)?$i(l)(c.value0):l}},i=function(c){return u(v(rt)(cf.create)(Se(Mr)(Dm)(c)))(u(v(rt)(ff.create)(Cm(t.responseFormat)))(t.headers))},f=function(c){return{method:qm(t.method),url:t.url,headers:v(st)(function(l){return{field:fl(l),value:gm(l)}})(i(t.content)),content:c,responseType:bm(t.responseFormat),username:Wo(t.username),password:Wo(t.password),withCredentials:t.withCredentials,timeout:ur(0)(v(rt)(function(l){return l})(t.timeout))}},p=function(c){return Qr(Fl)(_f(fv)(mv(cm(n,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",Fm.create,f(c)))))(function(l){if(l instanceof k){var s=Lm(e(l.value0.body));if(s instanceof H)return new H(new Ol(jm(s.value0),l.value0));if(s instanceof k)return new k({body:s.value0,headers:l.value0.headers,status:l.value0.status,statusText:l.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[s.constructor.name])}if(l instanceof H)return new H(function(){var o=Pu(l.value0),m=o==="AffjaxTimeoutErrorMessageIdent";if(m)return Wl.value;var S=o==="AffjaxRequestFailedMessageIdent";return S?Ul.value:new Hl(l.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[l.constructor.name])})};if(t.content instanceof y)return p(Wo(y.value));if(t.content instanceof d){var _=a(t.content.value0);if(_ instanceof k)return p(Wo(new d(_.value0)));if(_ instanceof H)return D(Cf)(new H(new kl(_.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[_.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[t.content.constructor.name])}},Bl=function(n){if(n instanceof kl)return"There was a problem with the request content: "+n.value0;if(n instanceof Ol)return"There was a problem with the response body: "+Mf(n.value0);if(n instanceof Wl)return"There was a problem making the request: timeout";if(n instanceof Ul)return"There was a problem making the request: request failed";if(n instanceof Hl)return"There was a problem making the request: "+Pu(n.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[n.constructor.name])},ga=function(){return{method:new H(Bu.value),url:"/",headers:[],content:y.value,username:y.value,password:y.value,withCredentials:!1,responseFormat:hm,timeout:y.value}}();var ql={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(n){return n||"/"}};var wv=Mv(ql);var Lv=function(){function n(){}return n.value=new n,n}(),zl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),_h=function(){return M.value}(),Av="Click to get some random user data.",ph=function(n){return nt(L(function(){return n(Lv.value)(),uv(b(xl)(wv({method:new H(Bu.value),url:"https://randomuser.me/api/",headers:ga.headers,content:ga.content,username:ga.username,password:ga.password,withCredentials:ga.withCredentials,responseFormat:Tm,timeout:ga.timeout}))(function(r){if(r instanceof H)return me(wl)(n(new zl("GET /api response failed to decode: "+Bl(r.value0))));if(r instanceof k)return me(wl)(n(new zl(gl(2)(r.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 43, column 9 - line 50, column 48): "+[r.constructor.name])}))()}))},Iv=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(_h)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, filterMap)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (bang, bus, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
              ( "GET /api response failed to decode: " <>
                  AX.printError err
              )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (bang Initial <|> _)
      \\event ->
        let
          loadingOrResult = filterMap
            ( case _ of
                Loading -> Just $ Left unit
                Result s -> Just $ Right s
                _ -> Nothing
            )
            event
          loading = filterMap
            ( case _ of
                Left _ -> Just unit
                _ -> Nothing
            )
            loadingOrResult
          result = filterMap
            ( case _ of
                Right s -> Just s
                _ -> Nothing
            )
            loadingOrResult
        in
          D.div_
            [ D.div_
                [ D.button (bang (D.OnClick := clickCb push))
                    [ text
                        ( bang clickText
                            <|> (loading $> "Loading...")
                            <|> (result $> clickText)
                        )
                    ]
                ]
            , D.div
                ( (bang (D.Style := "display: none;")) <|>
                    ( compact
                        ( mapAccum
                            ( \\_ b -> (b && false) /\\
                                if b then Just unit else Nothing
                            )
                            result
                            true
                        ) $> (D.Style := "display: block;")
                    )
                )
                [ D.pre_ [ D.code_ [ text (bang "" <|> result) ] ] ]
            ]
  )
`)])])),result:zn(ho(t)(t.Always2())(function(r){return function(e){var a=vr(le(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof Lv?new d(new H(void 0)):f instanceof zl?new d(new k(f.value0)):y.value})(e),u=vr(le(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof k?new d(f.value0):y.value})(a),i=vr(le(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof H?new d(void 0):y.value})(a);return Un(t)([Un(t)([yr(t)($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(ph(r))))([kr(t.MonadST5().Monad0())(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(Av))(q(Nn(t.MonadST5().Monad0().Applicative0()))(Ur(Kn)(i)("Loading..."))(Ur(Kn)(u)(Av))))])]),ze(t)(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(nl)(sr.value)("display: none;")))(Ur(Kn)(Ra(Eu(t.MonadST5().Monad0().Applicative0()))(ka(Ft(t.MonadST5()))(function(f){return function(p){return new T(p&&!1,function(){return p?new d(void 0):y.value}())}})(u)(!0)))(O(nl)(sr.value)("display: block;"))))([wt(t)([xt(t)([kr(t.MonadST5().Monad0())(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(""))(u))])])])])}})),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage($o.value)))(nr)})),O($t)(St.value)(n.slug+"pursx2/")])})}};var xf=function(){function n(){}return n.value=new n,n}();var wf={attr:function(n){return function(t){return pt({key:"input",value:Wa(t)})}}};function Vl(n){return function(){return n.value}}function Jl(n){return function(){return n.valueAsNumber}}function Pv(n,t,r,e){if(typeof window<"u"){var a=window[r];if(a!=null&&e instanceof a)return t(e)}for(var u=e;u!=null;){var i=Object.getPrototypeOf(u),f=i.constructor.name;if(f===r)return t(e);if(f==="Object")return n;u=i}return n}var A=function(n){return function(t){return Pv(y.value,d.create,n,t)}};var Af=A("HTMLInputElement");var Lf=function(n){var t=q(Nn(n))($(n)(O(nf)(Ao.value)("range"))),r=v(Kn)(function(e){return O(wf)(xf.value)(nt(function(a){return fr(mr)(Xt)(b(Mr)(of(a))(Af))(fi(Ia)(Jl)(e))}))});return function(e){return t(r(e))}},If=function(n){return function(t){return function(r){return v(n)(function(){var e=O(r)(et.value);return function(a){return e(function(u){return u(bn(t))}(a))}}())}}};var yh=function(){return M.value}(),kv=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(yh)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bang, fold)
import FRP.Event.VBus (V, vbus)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody1
  ( vbus (Proxy :: _ UIEvents) \\push event -> do
      D.div_
        [ D.button
            (click_ (bang push.buttonClicked))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( bang "Val: 0" <|>
                    ( append "Val: " <<< show
                        <$> fold
                          (const (add 1))
                          (bang unit <|> event.buttonClicked)
                          (-1)
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (bang push.sliderMoved))
                []
            , D.div_
                [ text
                    ( bang "Val: 50.0" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`)])])),result:zn(ji()(t)()(co({reflectSymbol:function(){return"buttonClicked"}})(lo(so(t.Always2())(qo)))(co({reflectSymbol:function(){return"sliderMoved"}})(lo(so(t.Always2())(qo)))(Fi)()())()())(go({reflectSymbol:function(){return"buttonClicked"}})()()(go({reflectSymbol:function(){return"sliderMoved"}})()()(Ui)()()()())()()()())(M.value)(function(r){return function(e){return Un(t)([yr(t)(If(Kn)(Vr)(xo)($(t.MonadST5().Monad0().Applicative0())(r.buttonClicked)))([$n(t.MonadST5().Monad0())("Click")]),Un(t)([kr(t.MonadST5().Monad0())(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())("Val: 0"))(v(Kn)(function(){var a=F(Le)("Val: "),u=N(zr);return function(i){return a(u(i))}}())(sa(Ft(t.MonadST5()))(L(kt($r)(1)))(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(void 0))(e.buttonClicked))(-1))))]),Un(t)([va(t)(Lf(t.MonadST5().Monad0().Applicative0())($(t.MonadST5().Monad0().Applicative0())(r.sliderMoved)))([]),Un(t)([kr(t.MonadST5().Monad0())(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())("Val: 50.0"))(v(Kn)(function(){var a=F(Le)("Val: "),u=N(nu);return function(i){return a(u(i))}}())(e.sliderMoved)))])])])}})),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(No.value)))(nr)})),O($t)(St.value)(n.slug+"effects/")])})}};var Ov=function(){function n(){}return n.value=new n,n}();var Wv={attr:function(n){return function(t){return pt({key:"keyup",value:Wa(t)})}}};function jl(n){return n.code}var Uv=A("KeyboardEvent");var Eh=function(){function n(){}return n.value=new n,n}(),Gl=function(){function n(){}return n.value=new n,n}(),Hv=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Fh=function(){return M.value}(),Bv=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Fh)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (filterMap)
import Data.Foldable (for_, oneOfMap)
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (cb, (:=))
import Deku.Control (text_, dyn_)
import Deku.Core (Child(..))
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bang, bus, keepLatest, mapAccum)
import Web.Event.Event (target)
import Web.HTML.HTMLInputElement (fromEventTarget, value)
import Web.UIEvent.KeyboardEvent (code, fromEvent)

data MainUIAction
  = UIShown
  | AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (bang UIShown <|> _) \\event -> do
      let
        top =
          [ D.input
              ( oneOfMap bang
                  [ D.OnInput := cb \\e -> for_
                      ( target e
                          >>= fromEventTarget
                      )
                      ( value
                          >=> push <<< ChangeText
                      )
                  , D.OnKeyup := cb
                      \\e -> for_ (fromEvent e) \\evt -> do
                        when (code evt == "Enter") $ do
                          push AddTodo
                  ]
              )
              []
          , D.button
              (bang $ D.OnClick := push AddTodo)
              [ text_ "Add" ]
          ]
      D.div_
        [ D.div_ top
        , dyn_ D.div $
                map
                  ( \\txt -> keepLatest $ bus \\p' e' ->
                      ( bang $ Insert $ D.div_
                          [ text_ txt
                          , D.button
                              ( bang
                                  $ D.OnClick := p' SendToTop
                              )
                              [ text_ "Prioritize" ]
                          , D.button
                              ( bang
                                  $ D.OnClick := p' Remove
                              )
                              [ text_ "Delete" ]
                          ]
                      ) <|> e'
                  )
                  ( filterMap
                      ( \\(tf /\\ s) ->
                          if tf then Just s else Nothing
                      )
                      ( mapAccum
                          ( \\a b -> case a of
                              ChangeText s -> s /\\ (false /\\ s)
                              AddTodo -> b /\\ (true /\\ b)
                              _ -> "" /\\ (false /\\ "")
                          )
                          event
                          ""
                      )
                  )
        ]
  )
`)])])),result:zn(ho(t)(t.Always2())(function(r){return Ar(dr)(function(e){return q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(Eh.value))(e)})(function(e){return Un(t)([Un(t)([va(t)(ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(Xp)(sr.value)("border-style:solid;border-width: 1px;border-color: black;"),O(wf)(xf.value)(nt(function(a){return fr(mr)(Xt)(b(Mr)(of(a))(Af))(fi(Ia)(Vl)(function(u){return r(Hv.create(u))}))})),O(Wv)(Ov.value)(nt(function(a){return fr(mr)(Xt)(Uv(a))(function(u){return we(mr)(jl(u)==="Enter")(r(Gl.value))})}))]))([]),yr(t)(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Yi)(sr.value)("margin: 5px;")))($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(r(Gl.value)))))))([$n(t.MonadST5().Monad0())("Add")])]),Mo(t)(ze(t))(v(Kn)(function(a){return yo(Ft(t.MonadST5()))(Oa(t)(t.Always2())(function(u){return function(i){return q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(To(Un(t)([Ua(t)($(t.MonadST5().Monad0().Applicative0())(O(wo)(sr.value)("margin: 5px;")))([$n(t.MonadST5().Monad0())(a)]),yr(t)(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Yi)(sr.value)("margin: 5px;")))($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(u(Lp)))))))([$n(t.MonadST5().Monad0())("Prioritize")]),yr(t)(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Yi)(sr.value)("margin: 5px;")))($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(u(Ip)))))))([$n(t.MonadST5().Monad0())("Delete")])]))))(i)}}))})(vr(le(t.MonadST5().Monad0().Applicative0()))(function(a){return a.value0?new d(a.value1):y.value})(ka(Ft(t.MonadST5()))(function(a){return function(u){return a instanceof Hv?new T(a.value0,new T(!1,a.value0)):a instanceof Gl?new T(u,new T(!0,u)):new T("",new T(!1,""))}})(e)(""))))])})})),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(ko.value)))(nr)})),O($t)(St.value)(n.slug+"portals/")])})}};var xh=function(){return M.value}(),qv=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(xh)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")
`)])])),result:zn(Un(t)([$n(t.MonadST5().Monad0())("Hello world")])),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))(_a(Ft(t.MonadST5())))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(Io.value)))(nr)})),O($t)(St.value)(n.slug+"component/")])})}};var Ah=function(){return M.value}(),zv=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(Bt()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))(t)(Ah)({next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))(_a(Ft(t.MonadST5())))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(Lo.value)))(nr)})),O($t)(St.value)(n.slug+"hello/")])})}};var Vv=function(){function n(){}return n.value=new n,n}(),Jv={attr:function(n){return function(t){return pt({key:"controls",value:Kt(t)})}}};var jv=function(){function n(){}return n.value=new n,n}();var Gv={attr:function(n){return function(t){return pt({key:"src",value:Kt(t)})}}};var Xv=function(){function n(){}return n.value=new n,n}(),Qv={attr:function(n){return function(t){return pt({key:"width",value:Kt(t)})}}};var Yv=function(n){return function(t){return function(r){return new Sn(it(n)("source")(t)(ut(r)))}}};var Zv=function(n){return function(t){return function(r){return new Sn(it(n)("video")(t)(ut(r)))}}};var Rh=function(){return M.value}(),Kv=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Rh)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\), type (/\\))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (Event, bang, bus, fold, mapAccum)
import Type.Prelude (Proxy(..))

counter :: forall a. Event a \u2192 Event (a /\\ Int)
counter event = mapAccum f event 0
  where
  f a b = (b + 1) /\\ (a /\\ b)

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap  (bang unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap bang [ D.Controls := "true", D.Width := "250" ])
                [D.source
                    (oneOfMap bang [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 = index (Proxy :: _ 0) v
            p1 = index (Proxy :: _ 1) v
            ev = fold (const not) event
            flips = switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (bang $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [flips true], D.span_ [flips false] ]
            ]
  )
`)])])),result:zn(Mo(t)(ze(t))(Oa(t)(t.Always2())(function(r){return Ar(dr)(q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(void 0)))(function(e){return $(t.MonadST5().Monad0().Applicative0())(To(jp()(t)(v(Eo)(function(a){return Zv(t)(ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(Jv)(Vv.value)("true"),O(Qv)(Xv.value)("250")]))([Yv(t)(ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(Gv)(jv.value)(a),O(Zp)(Ao.value)("video/mp4")]))([])])})(Jc()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(Jc()()("https://www.w3schools.com/jsref/movie.mp4")(Op))))(function(a){return function(u){var i=Vc()()()()()({reflectType:function(){return 1}})(M.value)(a),f=Vc()()()()()({reflectType:function(){return 0}})(M.value)(a),p=sa(Ft(t.MonadST5()))(L(jr(ir)))(e),_=function(){var c=xu(t.MonadST5())(function(l){return l?f:i});return function(l){return c(p(l))}}();return Un(t)([yr(t)($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(r(void 0))))))([$n(t.MonadST5().Monad0())("Switch videos")]),Un(t)([Su(t)([_(!0)]),Su(t)([_(!1)])])])}})))})}))),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(Oo.value)))(nr)})),O($t)(St.value)(n.slug+"ssr/")])})}};var Oh=function(){return M.value}(),Wh=function(){return M.value}(),nd=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Oh)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (bang)
import Type.Proxy (Proxy(..))

myDom = Proxy :: Proxy """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)
`)])])),result:zn(am({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(t)(At(t.MonadST5().Monad0().Applicative0()))(Wh)),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))(_a(Ft(t.MonadST5())))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(Po.value)))(nr)})),O($t)(St.value)(n.slug+"events1/")])})}};var Hh=function(){return M.value}(),Bh=function(){return M.value}(),td=function(n){return function(t){return al({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(t)(Vn()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(M.value)(Hh)({code:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute (cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus, bang)
import Type.Proxy (Proxy(..))

myDom =
  Proxy :: Proxy """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody1
  ( bus \\push event -> myDom ~~
      { myli: bang (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (bang (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                    bang "I was dynamically inserted"
              ]
          )
      }
  )`)])])),result:zn(Mo(t)(ze(t))(Oa(t)(t.Always2())(function(r){return function(e){return $(t.MonadST5().Monad0().Applicative0())(To(Pt({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(Bt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}})(t))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})(t))(t)(Bh)({myli:$(t.MonadST5().Monad0().Applicative0())(O(Gp)(sr.value)("background-color:rgb(200,240,210);")),somethingNew:zn(yr(t)($(t.MonadST5().Monad0().Applicative0())(O(xo)(et.value)(r(new d(void 0)))))([kr(t.MonadST5().Monad0())(q(Nn(t.MonadST5().Monad0().Applicative0()))(Ur(Kn)(Ra(Eu(t.MonadST5().Monad0().Applicative0()))(e))("Thanks for clicking me!"))($(t.MonadST5().Monad0().Applicative0())("I was dynamically inserted")))]))})))}}))),next:ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Qn)(rn(Qn)(Nt(r))(n.dpage(Ro.value)))(nr)})),O($t)(St.value)(n.slug+"events2/")])})}};var zh=function(n){return function(t){return function(r){return new Sn(it(n)("p")(t)(ut(r)))}}},rd=function(n){return zh(n)(dn(z(n.MonadST5().Monad0().Applicative0())))};var ed=(n,t,r,e)=>{n(a=>e.units[a].main.appendChild(e.units[t].main))(r)},Xl=n=>()=>{n.hydrating=!0},Ql=n=>()=>{n.hydrating=!1},ad=n=>t=>()=>{t.units[n.id].main.parentNode||(typeof n.pos.value0=="number"&&t.units[n.parent].main.children[n.pos.value0]?t.units[n.parent].main.insertBefore(t.units[n.id].main,t.units[n.parent].main.children[n.pos.value0]):t.units[n.parent].main.appendChild(t.units[n.id].main))},od=n=>t=>r=>()=>{var e,a=t.id;r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(a),r.hydrating&&n&&t.parent.value0&&(e=document.body.querySelectorAll("[data-deku-ssr-"+a+"]").item(0))?r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:e}:r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:document.createElement(t.tag)}},ud=n=>t=>r=>e=>()=>{var a=r.id,u;if(e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(a),e.hydrating&&n&&r.parent.value0&&(u=document.body.querySelectorAll("[data-deku-ssr-"+r.parent.value0+"]").item(0))){var i=0;if(u.childNodes.length===1)u.prepend(document.createTextNode(""));else for(var i=0;i<u.childNodes.length;i++)if(u.childNodes[i].nodeType===8&&u.childNodes[i].nodeValue===a){i=i-1;break}e.units[a]={main:u.childNodes[i],parent:r.parent,scope:r.scope}}else e.units[a]={main:document.createTextNode(""),parent:r.parent,scope:r.scope},ed(t,a,r.parent,e)};function Yl(){return{units:{},scopes:{}}}var id=n=>t=>r=>()=>{var e=t.id,a=t.value;r.hydrating&&n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),r.units[e].main.tagName==="INPUT"&&t.key==="value"?r.units[e].main.value=a:r.units[e].main.tagName==="INPUT"&&t.key==="checked"?r.units[e].main.checked=a==="true":r.units[e].main.setAttribute(t.key,a)},fd=n=>t=>r=>()=>{var e=t.id,a=t.value;if(r.hydrating&&n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),t.key==="@self@")a(r.units[e].main)();else{r.units[e].listeners[t.key]&&r.units[e].main.removeEventListener(t.key,r.units[e].listeners[t.key]);var u=i=>a(i)();r.units[e].main.addEventListener(t.key,u),r.units[e].listeners[t.key]=u}},cd=n=>t=>()=>{var r=n.id;t.units[r].main.nodeValue=n.text},ld=n=>t=>r=>e=>()=>{var a,u,i=r.id,f=r.html,p=r.verb,_=r.cache,c=r.parent,l=r.scope,s=r.pxScope;if(e.hydrating&&n&&r.parent.value0&&(a=document.body.querySelectorAll("[data-deku-ssr-"+i+"]").item(0)))e.units[i]={listeners:{},scope:l,parent:c,main:a};else{let m=Object.entries(_);for(var o=0;o<m.length;o++){let S=m[o][0];m[o][1]===!0?f=f.replace(p+S+p,'data-deku-attr-internal="'+S+'"'):f=f.replace(p+S+p,'<span style="display:contents;" data-deku-elt-internal="'+S+'"></span>')}u=document.createElement("div"),u.innerHTML=f.trim(),e.units[i]={listeners:{},scope:l,parent:c,main:u.firstChild}}e.scopes[l]||(e.scopes[l]=[]),e.scopes[l].push(i),u||(u=a),u.querySelectorAll("[data-deku-attr-internal]").forEach(function(m){var S=m.getAttribute("data-deku-attr-internal");let Tn=S+s;e.units[Tn]={listeners:{},main:m,scope:l},e.scopes[l].push(Tn)}),u.querySelectorAll("[data-deku-elt-internal]").forEach(function(m){var S=m.getAttribute("data-deku-elt-internal");let Tn=S+s;e.units[S+s]={listeners:{},main:m,scope:l},e.scopes[l].push(Tn)}),a||ed(t,i,c,e)},sd=n=>t=>()=>{var r=n.id;t.units[r]={main:n.root}},_d=n=>t=>()=>{var r=n.id,e=n.parent;t.units[r].containingScope=n.scope,t.units[e].main.prepend(t.units[r].main)},pd=n=>t=>()=>{var r=n.id;t.units[r].noop||t.units[r].containingScope&&!n.scopeEq(t.units[r].containingScope)(n.scope)||t.units[r].main.remove()},md=n=>t=>()=>{delete t.units[n.id]},vd=n=>t=>()=>{var r=n.id,e=n.pos,a=t.units[r].main.parentNode;a.insertBefore(t.units[r].main,a.children.length<=e?a.children[a.children.length-1]:e<0?a.children[0]:a.children[e])};var dd=function(n){return n};var Qh=1,Zl=2147483647,Yh=function(){return Zl-1|0}(),Kl=function(n){var t=function(r){return function(e){return function(a){var u=e-r|0,i=tu(ai)(a)(u),f=i<r;return f?i+e|0:i}}};return t(Qh)(Yh)(n)};var Zh=0,Kh=48271,Dd=function(n){return function(t){return Fr()(Ef(zu(gr(Kh)*gr(t)+gr(n))(gr(Zl))))}},yd=Dd(Zh);var u0=function(){function n(i){this.fn=i}var t={},r=function(i,f){this.head=i,this.tail=f};function e(i){return new r(i,t)}function a(i){return function(f){return new r(i,f)}}function u(i){for(var f=[],p=i;p!==t;)f.push(p.head),p=p.tail;return f}return function(i){return function(f){return function(p){var _=function(l,s){return i(f(a)(p(l)))(s)},c=function(l,s,o){if(s===0)return l;var m=o[s-1];return new n(function(){var S=c(_(m,l),s-1,o);return S})};return function(l){for(var s=f(e)(p(l[l.length-1])),o=c(s,l.length-1,l);o instanceof n;)o=o.fn();return f(u)(o)}}}}}();var zo=function(n){return{map:function(t){return function(r){return function(e){return v(n)(function(a){return new T(t(a.value0),a.value1)})(r(e))}}}}};var rs=function(n){return{Applicative0:function(){return za(n)},Bind1:function(){return Sf(n)}}},Sf=function(n){return{bind:function(t){return function(r){return function(e){return b(n.Bind1())(t(e))(function(a){var u=r(a.value0);return u(a.value1)})}}},Apply0:function(){return $f(n)}}},$f=function(n){return{apply:Gr(rs(n)),Functor0:function(){return zo(n.Bind1().Apply0().Functor0())}}},za=function(n){return{pure:function(t){return function(r){return D(n.Applicative0())(new T(t,r))}},Apply0:function(){return $f(n)}}};var Ju=function(n){return{state:function(t){var r=D(n.Applicative0());return function(e){return r(t(e))}},Monad0:function(){return rs(n)}}};var Md=function(n){return function(t){var r=n(t);return r.value1}},xd=function(n){return function(t){var r=n(t);return r.value0}};var T0=function(n){return n};var h0=function(){var n=function(t){return new T(dd(t.newSeed),function(){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.newSeed=yd(t.newSeed),r}())};return xe(Ju(ot))(n)}();var ju=zo(De);var as=function(n){return xd(T0(n))};var Ld=$f(ot),Ad=function(n){return function(t){var r=gr(t),e=gr(n),a=function(f){return e+zu(f)(r-e+1)},u=v(ju)(gr)(h0),i=En(Ld)(v(ju)(kt(Zo))(u))(v(ju)(Yr(Zo)(2))(u));return v(ju)(function(f){return Pl(a(f))})(i)}},Id=function(n){return function(t){var r=n<=t;return r?Ad(n)(t):Ad(t)(n)}};var os=function(n){return n.arbitrary};var us=function(){return{arbitrary:Id(-1e6)(1e6)}}();var Gu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Xu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Pf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Nf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Qu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),F0=function(n){return function(t){return tn(Tt)(Ht(function(r){return F(ft)(r)([new Qu(n)])})(t))}},M0=function(n){return function(t){return tn(Tt)(Ht(function(r){return F(ft)(r)([new Nf(n)])})(t))}},x0=function(n){return function(t){return tn(Tt)(Ht(function(r){return F(ft)(r)([new Xu(n)])})(t))}},w0=function(n){return function(t){return tn(Tt)(Ht(function(r){return F(ft)(r)([new Pf(n)])})(t))}},A0=function(n){return function(t){return tn(Tt)(Ht(function(r){return F(ft)(r)([new Gu(n)])})(t))}},$d=function(n){return{ids:function(){var r=Ct(n)(),e=N(zr)(as(os(us))({newSeed:Kl(r),size:5}));return tn(Tt)(Ht(kt($r)(1))(n))(),e},makeElement:A0,attributeParent:function(t){return function(r){return D(cr)(void 0)}},makeRoot:function(t){return function(r){return D(cr)(void 0)}},makeText:x0,makePursx:w0,setProp:M0,setCb:function(t){return function(r){return D(cr)(void 0)}},setText:F0,sendToPos:function(t){return function(r){return D(cr)(void 0)}},deleteFromCache:function(t){return function(r){return D(cr)(void 0)}},giveNewParent:function(t){return function(r){return D(cr)(void 0)}},disconnectElement:function(t){return function(r){return D(cr)(void 0)}}}},Pd=function(n){return{ids:function(){var r=po(n)(),e=N(zr)(as(os(us))({newSeed:Kl(r),size:5}));return tn(In)(V_(kt($r)(1))(n))(),e},makeElement:od(!0),attributeParent:ad,makeRoot:sd,makeText:ud(!0)(qn(void 0)),makePursx:ld(!0)(qn(void 0)),setProp:id(!0),setCb:fd(!0),setText:cd,sendToPos:vd,deleteFromCache:md,giveNewParent:_d,disconnectElement:pd}};var is=n=>n.replace(/[\u00A0-\u9999<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"}),fs=({id:n,html:t,pxScope:r,cache:e,verb:a})=>{let u=t,i=Object.entries(e);for(var f=0;f<i.length;f++){let l=i[f][0];i[f][1]===!0?u=u.replace(a+l+a,'data-deku-attr-internal="'+l+'" data-deku-ssr-'+l+r+'="true"'):u=u.replace(a+l+a,'<span style="display:contents;" data-deku-elt-internal="'+l+'" data-deku-ssr-'+l+r+'="true"></span>')}let p=u.indexOf(">"),_=u.indexOf("/>"),c=_==p-1?_:p;return u.slice(0,c)+" data-deku-ssr-"+n+'="true" '+u.slice(c)};var Rd=function(n){return function(t){var r=function(l){return function(s){return tn(zo(De))(Ho(Ju(ot))(function(o){var m={};for(var S in o)({}).hasOwnProperty.call(o,S)&&(m[S]=o[S]);return m.idToActions=Na(Gt)(function(Tn){if(Tn instanceof d)return new d(F(ft)(Tn.value0)([s]));if(Tn instanceof y)return new d([s]);throw new Error("Failed pattern match at Deku.SSR (line 46, column 17 - line 48, column 45): "+[Tn.constructor.name])})(l)(o.idToActions),m}))}},e=function(l){return function(s){return function(o){return Jn(jn)(Sf(ot))(tn(zo(De))(Ho(Ju(ot))(function(m){var S={};for(var Tn in m)({}).hasOwnProperty.call(m,Tn)&&(S[Tn]=m[Tn]);return S.parentToChild=Na(Gt)(function(Hn){if(Hn instanceof d)return new d(F(ft)(Hn.value0)([s]));if(Hn instanceof y)return new d([s]);throw new Error("Failed pattern match at Deku.SSR (line 33, column 17 - line 35, column 41): "+[Hn.constructor.name])})(l)(m.parentToChild),S})))(function(){return r(s)(o)})}}},a=Md(pr(Oe)(za(ot))(function(l){if(l instanceof Gu)return fr(za(ot))(Xt)(l.value0.parent)(function(s){return e(s)(l.value0.id)(l)});if(l instanceof Xu)return fr(za(ot))(Xt)(l.value0.parent)(function(s){return e(s)(l.value0.id)(l)});if(l instanceof Pf)return fr(za(ot))(Xt)(l.value0.parent)(function(s){return e(s)(l.value0.id)(l)});if(l instanceof Nf||l instanceof Qu)return r(l.value0.id)(l);throw new Error("Failed pattern match at Deku.SSR (line 56, column 17 - line 63, column 43): "+[l.constructor.name])})(t))({parentToChild:Pa,idToActions:Pa}),u=function(l){return Xa(wc(function(s){return s instanceof Gu||s instanceof Xu})(l))},i=function(l){return ur("")(Pi(function(s){return s instanceof Gu?new d(s.value0.tag):y.value})(l))},f=function(l){return $e(Z)(ru)(" ")(vr(Cp)(function(s){return s instanceof Nf?new d(s.value0.key+('="'+(s.value0.value+'"'))):y.value})(l))},p=function(l){return qn("")(function(s){var o=function(Tn){return ur("")(Pi(function(Hn){return Hn instanceof Qu?new d(is(Hn.value0.text)+("<!--"+(l+"-->"))):y.value})(s))},m=function(Tn){var Hn=i(s),Pn=f(s);return"<"+(Hn+(" "+(Pn+(" data-deku-ssr-"+(l+('="true">'+(_(l)+("</"+(Hn+">")))))))))},S=mo(s)(0);return S instanceof d&&S.value0 instanceof Qu?o(void 0):S instanceof d&&S.value0 instanceof Xu?o(void 0):S instanceof d&&S.value0 instanceof Pf?fs(S.value0.value0):m(void 0)})(Cu(Gt)(l)(a.idToActions))},_=function(l){var s=ur([])(Cu(Gt)(l)(a.parentToChild));return Lt(Z)(ru)(p)(s)},c=function(l){return te(er)(function(s){return function(o){return function(m){var S=u(m);if(S)return o;if(!S)return gf("data-deku-ssr-"+s)(f(m)+(" data-deku-ssr-"+s))(o);throw new Error("Failed pattern match at Deku.SSR (line 83, column 19 - line 85, column 136): "+[S.constructor.name])}}})(_(l))(a.idToActions)};return"<"+(n+(' data-deku-ssr-deku-root="true">'+(c("deku-root")+("</"+(n+">")))))}};var kd=function(n){return Ee(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=bt();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:_n(Co)})}},toElt:function(t){return t}})},pE=function(n){return function(){var r=Yl(),e=Qr(In)(mu(0))(Pd)();Xl(r)();var a=Yt(kd(Ji)({parent:new d("deku-root"),scope:new pa("rootScope"),raiseId:function(u){return D(mr)(void 0)},pos:y.value})(e)(n))(function(u){return u(r)})();return Ql(r)(),a}},Od=function(n){return tn(In)(pE(n))},mE=function(n){return function(t){return function(r){return function(e){return v(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(){var a=Rd(t);return function(u){return function(i){return r.head+i}(function(i){return i+r.tail}(a(u)))}}())(yn(n.MonadST5())(function(){var u=It(0)(),i=It([])(),f=$d(u);return tn(Tt)(Yt(kd(Vi)({parent:new d("deku-root"),scope:new pa("rootScope"),raiseId:function(p){return D(cr)(void 0)},pos:y.value})(f)(e))(function(p){return p(i)}))(),Ct(i)()}))}}}},Wd=function(n){return mE(n)("body")};var vE=function(){return M.value}(),Hd=function(n){return ji()(n)()(co({reflectSymbol:function(){return"buttonClicked"}})(lo(so(n.Always2())(qo)))(co({reflectSymbol:function(){return"sliderMoved"}})(lo(so(n.Always2())(qo)))(Fi)()())()())(go({reflectSymbol:function(){return"buttonClicked"}})()()(go({reflectSymbol:function(){return"sliderMoved"}})()()(Ui)()()()())()()()())(M.value)(function(t){return function(r){return Un(n)([rd(n)([$n(n.MonadST5().Monad0())(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),yr(n)(If(Kn)(Vr)(xo)($(n.MonadST5().Monad0().Applicative0())(t.buttonClicked)))([$n(n.MonadST5().Monad0())("Click")]),Un(n)([kr(n.MonadST5().Monad0())(q(Nn(n.MonadST5().Monad0().Applicative0()))($(n.MonadST5().Monad0().Applicative0())("Val: 0"))(v(Kn)(function(){var e=F(Le)("Val: "),a=N(zr);return function(u){return e(a(u))}}())(sa(Ft(n.MonadST5()))(L(kt($r)(1)))(q(Nn(n.MonadST5().Monad0().Applicative0()))($(n.MonadST5().Monad0().Applicative0())(void 0))(r.buttonClicked))(-1))))]),Un(n)([va(n)(Lf(n.MonadST5().Monad0().Applicative0())($(n.MonadST5().Monad0().Applicative0())(t.sliderMoved)))([]),Un(n)([kr(n.MonadST5().Monad0())(q(Nn(n.MonadST5().Monad0().Applicative0()))($(n.MonadST5().Monad0().Applicative0())("Val: 50"))(v(Kn)(function(){var e=F(Le)("Val: "),a=N(nu);return function(u){return e(a(u))}}())(r.sliderMoved)))])])])}})},Bd=function(n){return function(t){return Pt({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Vn()(Vn()(Vn()(Vn()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}})(t))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}})(t))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}})(t))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})(t))(t)(vE)({code2:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Live where

import Prelude

import App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`)])])),code1:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module Build where

import Prelude

import App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  runSSR
    ( Template
        { head: "<!DOCTYPE html><html><head><script src=\\"bundle.js\\" defer><\/script></head>"
        , tail: "</html>"
        }
    )
    app >>= log`)])])),code0:zn(wt(t)([xt(t)([$n(t.MonadST5().Monad0())(`module App where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (bang, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (bang push.buttonClicked))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( bang "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (bang unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (bang push.sliderMoved))
            []
        , D.div_
            [ text
                ( bang "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`)])])),result:zn(Hd(t)),codegen:zn(wt(t)([xt(t)([kr(t.MonadST5().Monad0())(Dr(function(r){return rn(t.MonadST5().Monad0().Bind1().Apply0())(b(t.MonadST5().Monad0().Bind1())(Wd(t)({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Hd(Vi)))(r))(D(t.MonadST5().Monad0().Applicative0())(D(t.MonadST5().Monad0().Applicative0())(void 0)))}))])]))})}};var qd=function(n){return function(t){var r=function(a){if(a instanceof rf)return zv;if(a instanceof Lo)return qv;if(a instanceof Io)return fm;if(a instanceof So)return nd;if(a instanceof Po)return kv;if(a instanceof No)return Iv;if(a instanceof $o)return td;if(a instanceof Ro)return Bv;if(a instanceof ko)return Kv;if(a instanceof Oo)return Bd;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 96, column 3 - line 96, column 25): "+[a.constructor.name])},e=function(a){return function(u){return r(u)({dpage:a,slug:n.slug})(t)}};return ho(t)(t.Always2())(function(a){return Ar(dr)(function(u){return q(Nn(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(n.startsWith))(u)})(function(u){return Un(t)([Un(t)(v(st)(function(i){return Su(t)([Zi(t)(ct(Z)(z(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(f){return rn(Qn)(Nt(f))(a(i.value0))})),O(Qp)(sr.value)("cursor:pointer;"),O($t)(St.value)(n.slug+i.value1.value1.value0)]))([$n(t.MonadST5().Monad0())(i.value1.value0)]),Ua(t)($(t.MonadST5().Monad0().Applicative0())(O(wo)(sr.value)(function(){return i.value1.value1.value1?"":"display:none;"}())))([$n(t.MonadST5().Monad0())(" | ")])])})([new T(rf.value,new T("Home",new T("",!0))),new T(Lo.value,new T("Hello world",new T("hello/",!0))),new T(Io.value,new T("Component",new T("simple/",!0))),new T(So.value,new T("Pursx 1",new T("pursx1/",!0))),new T(Po.value,new T("Events 1",new T("events1/",!0))),new T(No.value,new T("Effects",new T("effects/",!0))),new T($o.value,new T("Pursx 2",new T("pursx2/",!0))),new T(Ro.value,new T("Events 2",new T("events2/",!0))),new T(ko.value,new T("Portals",new T("portals/",!0))),new T(Oo.value,new T("SSR",new T("ssr/",!1)))])),Un(t)([xu(t.MonadST5())(e(a))(u)])])})})}};var Q8=function(n){return function(){var r=qn(Nu(Uo("could not ingest options: "+N(Ps()()(Bf({reflectSymbol:function(){return"slug"}})(Bf({reflectSymbol:function(){return"startsWith"}})(Ss)(_r))(_r)))(n))))(D(mr))(em(n.startsWith))();return Od(qd({slug:n.slug,startsWith:r})(Ji))()}};export{Q8 as main};
