var ps=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),a=0,i=0;i<e;i++)for(var c=t[i],_=0;_<n;_++)u[a++]=c(r[_]);return u}};var Yu={compose:function(t){return function(r){return function(e){return t(r(e))}}}},Zu=function(t){return t.compose},Ic=function(t){var r=Zu(t);return function(e){return function(n){return r(n)(e)}}};var Rt=function(t){return t.identity},Nt={identity:function(t){return t},Semigroupoid0:function(){return Yu}};var Br=!0;var $o=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},vr=function(t){return function(r){return function(e){return t(e)(r)}}},h=function(t){return function(r){return t}};var Fo=function(t){return function(r){return r(t)}};var _s=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var tt=function(){function t(){}return t.value=new t,t}();var y=function(t){return t.map},Be=function(t){var r=y(t);return function(e){return function(n){return r(n)(e)}}},ir=function(t){return y(t)(h(void 0))},X=function(t){var r=y(t);return function(e){return function(n){return r(h(n))(e)}}};var ta={map:Zu(Yu)},Ar={map:_s};var Kk=Rt(Nt);var xo={apply:ps,Functor0:function(){return Ar}},Jt=function(t){return t.apply};var mr=function(t){var r=Jt(t),e=y(t.Functor0());return function(n){return function(u){return r(e(h(Kk))(n))(u)}}},ee=function(t){var r=Jt(t),e=y(t.Functor0());return function(n){return function(u){return function(a){return r(e(n)(u))(a)}}}};var q=function(t){return t.pure};var Yn=function(t){var r=q(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},Mo=function(t){var r=Jt(t.Apply0()),e=q(t);return function(n){return function(u){return r(e(n))(u)}}};var ra={pure:function(t){return[t]},Apply0:function(){return xo}};var vs=function(t){return function(r){return t+r}},ms=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Jr=function(t){return t.reflectSymbol};var tn=function(t){return function(r){return r[t]}},Zn=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var bs={append:function(t){return function(r){return void 0}}},ea={append:vs};var Vr={append:ms};var et=function(t){return t.append};var Ht=function(t){return t.alt};var ry=String.fromCharCode(65535),ey=String.fromCharCode(0),ny=Number.POSITIVE_INFINITY,uy=Number.NEGATIVE_INFINITY;var ds=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var As=ds;var ks=ds;var ys=function(t){return function(r){return t===r}};var gs=ys;var Cs=ys;var Mn={eq:Cs};var Pa={eq:gs};var St=function(t){return t.eq};var gt=function(){function t(){}return t.value=new t,t}(),Mt=function(){function t(){}return t.value=new t,t}(),wt=function(){function t(){}return t.value=new t,t}();var hs=function(t){return function(r){return t-r|0}};var Ss=function(t){return function(r){return t+r|0}},Ts=function(t){return function(r){return t*r|0}},Es=function(t){return function(r){return t+r}},$s=function(t){return function(r){return t*r}};var wo={add:Es,zero:0,mul:$s,one:1},na={add:Ss,zero:0,mul:Ts,one:1};var rn=function(t){return t.mul};var de=function(t){return t.add};var Pc={sub:hs,Semiring0:function(){return na}};var Ee=function(){return{compare:ks(gt.value)(wt.value)(Mt.value),Eq0:function(){return Mn}}}();var le=function(){return{compare:As(gt.value)(wt.value)(Mt.value),Eq0:function(){return Pa}}}();var $t=function(t){return t.compare};var In=function(t){return t.top};var Lo={top:2147483647,bottom:-2147483648,Ord0:function(){return le}};var ru=function(t){return t.bottom};var xs=function(t){return t.toString()},Ms=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var ws=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,a=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+a})+'"'};var qe={show:ws};var Is=function(t){return t.showRecordFields},Ls=function(){return function(){return function(t){var r=Is(t);return{show:function(e){return"{"+(r(tt.value)(e)+"}")}}}}};var Po={show:Ms},sn={show:xs};var _t=function(t){return t.show};var Ps=function(t){var r=Jr(t);return function(e){var n=Is(e);return function(u){var a=_t(u);return{showRecordFields:function(i){return function(c){var _=n(tt.value)(c),s=r(tt.value),m=tn(s)(c);return" "+(s+(": "+(a(m)+(","+_))))}}}}}},Os=function(t){var r=Jr(t);return function(e){var n=_t(e);return{showRecordFields:function(u){return function(a){var i=r(tt.value),c=tn(i)(a);return" "+(i+(": "+(n(c)+" ")))}}}}};var gy=Rt(Nt),b=function(){function t(){}return t.value=new t,t}(),p=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Zt=function(t){return function(r){return function(e){if(e instanceof b)return t;if(e instanceof p)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ra=Zt(!1)(h(!0));var Tr={map:function(t){return function(r){return r instanceof p?new p(t(r.value0)):b.value}}},Cy=y(Tr);var pe=function(t){return Zt(t)(gy)},Le=function(){return function(t){if(t instanceof p)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var hu=function(t){var r=St(t);return{eq:function(e){return function(n){return e instanceof b&&n instanceof b?!0:e instanceof p&&n instanceof p?r(e.value0)(n.value0):!1}}}},aa=function(t){var r=$t(t),e=hu(t.Eq0());return{compare:function(n){return function(u){if(n instanceof b&&u instanceof b)return wt.value;if(n instanceof b)return gt.value;if(u instanceof b)return Mt.value;if(n instanceof p&&u instanceof p)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var oa={apply:function(t){return function(r){if(t instanceof p)return Cy(t.value0)(r);if(t instanceof b)return b.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return Tr}};var ke={bind:function(t){return function(r){if(t instanceof p)return r(t.value0);if(t instanceof b)return b.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return oa}};var Pn=function(){return{pure:p.create,Apply0:function(){return oa}}}();var hy={alt:function(t){return function(r){return t instanceof b?r:t}},Functor0:function(){return Tr}},Ws=function(){return{empty:b.value,Alt0:function(){return hy}}}();var Hs=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=u-1;a>=0;a--)n=t(e[a])(n);return n}}},Bs=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=0;a<u;a++)n=t(n)(e[a]);return n}}};var Us=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var Ey=Rt(Nt),Na=function(t){return t.discard};var Wa={bind:Us,Apply0:function(){return xo}},At=function(t){return t.bind},eu=function(t){return vr(At(t))},Wi=function(t){var r=eu(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},Hi=function(t){var r=At(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var Ha={discard:function(t){return At(t)}};var Bi=function(t){var r=At(t);return function(e){return r(e)(Ey)}};var k=function(t){return t.empty};var lt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ft=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Nc=function(t){return Zt(new lt(t))(ft.create)};var Ba={map:function(t){return function(r){if(r instanceof lt)return new lt(r.value0);if(r instanceof ft)return new ft(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var en=function(t){return function(r){return function(e){if(e instanceof lt)return t(e.value0);if(e instanceof ft)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},Wc=function(){return en(h(b.value))(p.create)}();var My=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var Js={defer:function(t){return function(r){return t(void 0)(r)}}},Ua=function(t){return t.defer},Hc=function(t){var r=Ua(t);return function(e){var n=My("go","Control.Lazy",function(){return r(function(a){return e(n(25))})}),u=n(25);return u}};var Vs=function(t){return function(r){return t&&r}},js=function(t){return function(r){return t||r}},Xs=function(t){return!t};var ia=function(t){return t.not};var za=function(t){return t.ff};var fa=function(t){return t.disj},vn={ff:!1,tt:!0,implies:function(t){return function(r){return fa(vn)(ia(vn)(t))(r)}},conj:Vs,disj:js,not:Xs};var Gs=function(t){return Math.min(Math.abs(t),2147483647)},Ks=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},Qs=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var Ys={Ring0:function(){return Pc}};var Oo=function(t){return t.mod};var Ui={degree:Gs,div:Ks,mod:Qs,CommutativeRing0:function(){return Ys}};var Uc={mempty:void 0,Semigroup0:function(){return bs}},Ro={mempty:"",Semigroup0:function(){return ea}};var Ut=function(t){return t.mempty};var V=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var jr=function(t){return t.value1};var ca={map:function(t){return function(r){return new V(r.value0,t(r.value1))}}};var Bo=function(t){return t};var Jy=function(t){var r=fa(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Jc=function(t){var r=Jy(t);return{mempty:za(t),Semigroup0:function(){return r}}};var ji=function(t){return t};var Vy=function(t){var r=Zu(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Vc=function(t){var r=Vy(t.Semigroupoid0());return{mempty:Rt(t),Semigroup0:function(){return r}}};var Q=function(t){return t};var C=function(){return Q};var Xc=C(),Xi=function(){return Xc};var Er=function(){return Xc};var Gi=function(){return function(){return function(){return function(){return function(t){return Xc}}}}};var Gy=Er(),Ky=Vc(Nt);var Qy=Gi()()()(),_r=function(t){return t.foldr};var nu=function(t){var r=_r(t);return function(e){return r(Ht(e.Alt0()))(k(e))}},wr=function(t){var r=_r(t);return function(e){var n=Ht(e.Alt0()),u=k(e);return function(a){return r(function(i){return n(a(i))})(u)}}},ja=function(t){var r=mr(t.Apply0()),e=q(t);return function(n){var u=_r(n);return function(a){return u(function(i){return r(a(i))})(e(void 0))}}},un=function(t){var r=ja(t);return function(e){return vr(r(e))}};var er=function(t){return t.foldl};var uu=function(t){var r=er(t);return function(e){var n=et(e.Semigroup0()),u=Ut(e);return function(a){return function(i){var c=function(_){return function(s){return _.init?{init:!1,acc:s}:{init:!1,acc:n(_.acc)(n(a)(s))}}};return r(c)({init:!0,acc:u})(i).acc}}}};var an={foldr:function(t){return function(r){return function(e){if(e instanceof b)return r;if(e instanceof p)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof b)return r;if(e instanceof p)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=Ut(t);return function(e){return function(n){if(n instanceof b)return r;if(n instanceof p)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var rv=function(t){var r=_r(t);return function(e){var n=et(e.Semigroup0()),u=Ut(e);return function(a){return r(function(i){return function(c){return n(a(i))(c)}})(u)}}},Ft={foldr:Hs,foldl:Bs,foldMap:function(t){return rv(Ft)(t)}},Qc=function(t){var r=er(t);return function(e){var n=et(e.Semigroup0()),u=Ut(e);return function(a){return r(function(i){return function(c){return n(i)(a(c))}})(u)}}},gr=function(t){return t.foldMap};var Yc=function(t){var r=gr(t)(Ky);return function(e){return function(n){return function(u){return Gy(r(function(a){return ji(e(a))})(u))(n)}}}};var Su=function(t){var r=gr(t);return function(e){return Qy(Bo)(r(Jc(e)))}};var Yy=Rt(Nt);var ze={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},ev=function(t){return t.dimap},Je=function(t){var r=ev(t);return function(e){return r(e)(Yy)}};var Zc=function(t){return function(){return t}},nv=function(t){return function(r){return function(){return r(t())()}}};var Pe=function(t){var r=At(t.Bind1()),e=q(t.Applicative0());return function(n){return function(u){return r(n)(function(a){return r(u)(function(i){return e(a(i))})})}}};var uv=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Xa={Applicative0:function(){return ye},Bind1:function(){return _a}},_a={bind:nv,Apply0:function(){return tl(0)}},ye={pure:Zc,Apply0:function(){return tl(0)}},av=uv("functorEffect","Effect",function(){return{map:Mo(ye)}}),tl=uv("applyEffect","Effect",function(){return{apply:Pe(Xa),Functor0:function(){return av(0)}}}),U=av(20),Ir=tl(23),tg=ee(Ir),rl=function(t){return{append:tg(et(t))}},el=function(t){var r=rl(t.Semigroup0());return{mempty:Zc(Ut(t)),Semigroup0:function(){return r}}};var Ki=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},nl=(t,r)=>{for(let e in t)r(t[e])},ul=()=>({}),al=(t,r,e)=>{e[t]=r},ol=(t,r)=>{delete r[t]};var ov=Q;var iv=function(t){return function(r){return function(){return t(r())}}},fv=function(t){return function(){return t}},cv=function(t){return function(r){return function(){return r(t())()}}};function _e(t){return function(){return{value:t}}}var Qr=function(t){return function(){return t.value}},lv=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Dn=function(t){return function(r){return function(){return r.value=t}}};var On=function(t){return t};var au={map:function(t){return function(r){return t(r)}}};var pv={apply:function(t){return function(r){return t(r)}},Functor0:function(){return au}},ug={bind:function(t){return function(r){return r(t)}},Apply0:function(){return pv}},ag={pure:On,Apply0:function(){return pv}},Oe={Applicative0:function(){return ag},Bind1:function(){return ug}};var _v=function(t){return function(){return{value:t}}};var Yr=function(t){return function(){return t.value}},sv=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},se=function(t){return function(r){return function(){r.value=t}}};var ig=ir(U),ge=_v,fg=sv,Qi=function(t){return fg(function(r){var e=t(r);return{state:e,value:e}})},zo=function(t){return function(r){return ig(Qi(t)(r))}};var vg=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},mg=lv,Lr=function(t){return mg(function(r){var e=t(r);return{state:e,value:e}})},ve={map:iv};var Yi={Applicative0:function(){return Cr},Bind1:function(){return Tu}},Tu={bind:cv,Apply0:function(){return fl(0)}},Cr={pure:fv,Apply0:function(){return fl(0)}},fl=vg("applyST","Control.Monad.ST.Internal",function(){return{apply:Pe(Yi),Functor0:function(){return ve}}}),Ga=fl(47);var mv={liftST:Rt(Nt),Monad0:function(){return Yi}},Jo={liftST:ov,Monad0:function(){return Xa}},Ka=function(t){return t.liftST};var Zi=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,a=0;u!==r;)n[a++]=u,u+=e;return n[a]=u,n}},Dg=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},bg=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},ll=typeof Array.prototype.fill=="function"?Dg:bg,dg=function(){function t(u,a){this.head=u,this.tail=a}var r={};function e(u){return function(a){return new t(u,a)}}function n(u){for(var a=[],i=0,c=u;c!==r;)a[i++]=c.head,c=c.tail;return a}return function(u){return function(a){return n(u(e)(r)(a))}}}(),An=function(t){return t.length},Dv=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},bv=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},dv=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var a=e(n[u]);if(r(a))return a}return t}}}},Av=function(t){return function(r){return function(e){return function(n){for(var u=0,a=n.length;u<a;u++)if(e(n[u]))return t(u);return r}}}};var kv=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var Vo=function(t){return function(r){return r.filter(t)}},tf=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var a=r[u];t(a)?e.push(a):n.push(a)}return{yes:e,no:n}}};var yv=function(){function t(r,e,n,u,a,i){var c,_,s,m,A,$,S;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),_=a,s=c,m=a;_<c&&s<i;)A=u[_],$=u[s],S=e(r(A)($)),S>0?(n[m++]=$,++s):(n[m++]=A,++_);for(;_<c;)n[m++]=u[_++];for(;s<i;)n[m++]=u[s++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var jo=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),a=0;a<n;a++)u[a]=t(r[a])(e[a]);return u}}};var gv=function(t){return function(r){return t[r]}};function Rn(){return[]}var pl=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var rf=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},Nn=function(t){return function(){return t}};function Cv(t){return function(){return t.slice()}}var ef=Cv,_l=Cv,kg=function(){function t(r,e,n,u,a,i){var c,_,s,m,A,$,S;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),_=a,s=c,m=a;_<c&&s<i;)A=u[_],$=u[s],S=e(r(A)($)),S>0?(n[m++]=$,++s):(n[m++]=A,++_);for(;_<c;)n[m++]=u[_++];for(;s<i;)n[m++]=u[s++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var Ev=function(t){return function(r){return function(){var n=_l(r)();return t(n)(),Nn(n)()}}};var on=function(t){return pl([t])};var $v=y(ve),Cg=ia(vn),hg=ir(ve),Sg=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Tg=function(t){return function(){var e=Qr(t.value1)();return Lr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var uf=function(t){return $v(Sg.create(t))(_e(0))},af=function(t){return function(r){return function(){for(var n=_e(!1)();$v(Cg)(Qr(n))();)(function(){var a=Tg(t)();if(a instanceof p)return r(a.value0)();if(a instanceof b)return hg(Dn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[a.constructor.name])})();return{}}}};var xv=function(){function t(u){return[u]}function r(u){return function(a){return[u,a]}}function e(u){return function(a){return function(i){return[u,a,i]}}}function n(u){return function(a){return u.concat(a)}}return function(u){return function(a){return function(i){return function(c){return function(_){function s(m,A){switch(A-m){case 0:return i([]);case 1:return a(t)(c(_[m]));case 2:return u(a(r)(c(_[m])))(c(_[m+1]));case 3:return u(u(a(e)(c(_[m])))(c(_[m+1])))(c(_[m+2]));default:var $=m+Math.floor((A-m)/4)*2;return u(a(n)(s(m,$)))(s($,A))}}return s(0,_.length)}}}}}}();var aC=Rt(Nt),Re=function(t){return t.traverse};var dl=function(t){var r=Re(t);return function(e){return r(e)(aC)}},sa={traverse:function(t){var r=t.Apply0();return xv(Jt(r))(y(r.Functor0()))(q(t))},sequence:function(t){return dl(sa)(t)},Functor0:function(){return Ar},Foldable1:function(){return Ft}};var gC=y(Tr);var CC=Le();var hC=et(Vr);var gl=function(){return gv},SC=gl(),Cl=function(){return Dv(h(b.value))(function(t){return function(r){return new p({head:t,tail:r})}})}();var sf=function(t){return yv(t)(function(r){if(r instanceof Mt)return 1;if(r instanceof wt)return 0;if(r instanceof gt)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var vf=function(t){return function(r){return Ev(on(r))(t)()}},qv=function(t){return[t]};var w=function(t){return function(r){return jo(t)(Zi(0)(An(r)-1|0))(r)}};var Eu=function(){return bv(p.create)(b.value)}(),hl=function(t){return Eu(t)(An(t)-1|0)};var Sl=function(t){return Eu(t)(0)};var Ko=function(){return dv(b.value)(Ra)}();var Tl=function(){return Av(p.create)(b.value)}();var El=function(t){return function(r){return gC(SC(r))(Tl(t)(r))}};var zv=function(){return kv(p.create)(b.value)}(),$l=function(t){return function(r){return function(e){return e.length===0?[]:Zt(e)(function(n){return CC(zv(n)(e))})(Tl(t(r))(e))}}};var Qo=function(t){return function(r){return hC([t])(r)}};var TC=vr(At(Wa)),Fl=function(t){return TC(function(){var r=Zt([])(qv);return function(e){return r(t(e))}}())};var Jv=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var $u=function(t){return t.mapWithIndex};var Za={mapWithIndex:Jv,Functor0:function(){return Ar}};var Wn=function(t){return t.foldrWithIndex};var Hn=function(t){return t.foldlWithIndex};var fu=function(t){return t.foldMapWithIndex};var Bn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Df=function(t){var r=k(t);return function(e){return new Bn(e,r)}};var tr=function(){function t(){}return t.value=new t,t}(),mt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),bf=function(t){return t},HC=function(t){return new mt(t.value0,t.value1)};var BC=function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){if(s instanceof mt&&s.value1 instanceof mt&&s.value1.value1 instanceof mt){u=new mt(s,_),n=s.value1.value1.value1;return}var m=function($){return $ instanceof mt&&$.value1 instanceof mt&&$.value1.value1 instanceof tr?new mt(t($.value0),new mt(t($.value1.value0),tr.value)):$ instanceof mt&&$.value1 instanceof tr?new mt(t($.value0),tr.value):tr.value},A=function($){return function(S){var o=$,v=!1,ut;function j(Pt,Ot){if(Pt instanceof mt&&Pt.value0 instanceof mt&&Pt.value0.value1 instanceof mt&&Pt.value0.value1.value1 instanceof mt){o=Pt.value1,S=new mt(t(Pt.value0.value0),new mt(t(Pt.value0.value1.value0),new mt(t(Pt.value0.value1.value1.value0),Ot)));return}return v=!0,Ot}for(;!v;)ut=j(o,S);return ut}};return a=!0,A(_)(m(s))}for(;!a;)i=c(u,n);return i}};return r(tr.value)},Yo={map:BC};var fn={foldr:function(t){return function(r){var e=function(){var u=function(a){return function(i){var c=a,_=!1,s;function m(A,$){if($ instanceof tr)return _=!0,A;if($ instanceof mt){c=new mt($.value0,A),i=$.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[A.constructor.name,$.constructor.name])}for(;!_;)s=m(c,i);return s}};return u(tr.value)}(),n=er(fn)(vr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){if(s instanceof tr)return a=!0,_;if(s instanceof mt){u=t(_)(s.value0),n=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[s.constructor.name])}for(;!a;)i=c(u,n);return i}};return r},foldMap:function(t){var r=et(t.Semigroup0()),e=Ut(t);return function(n){return er(fn)(function(u){var a=r(u);return function(i){return a(n(i))}})(e)}}};var UC=_r(fn);var df={append:function(t){return function(r){return UC(mt.create)(r)(t)}}},Xv=et(df);var Gv={append:function(t){return function(r){return new Bn(t.value0,Xv(t.value1)(HC(r)))}}};var Kv={alt:Xv,Functor0:function(){return Yo}},Ml=function(){return{empty:tr.value,Alt0:function(){return Kv}}}();var Af=function(){var t=function(r){return function(e){var n=r,u=!1,a;function i(c,_){if(_ instanceof tr)return u=!0,c;if(_ instanceof mt){n=new mt(_.value0,c),e=_.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[c.constructor.name,_.constructor.name])}for(;!u;)a=i(n,e);return a}};return t(tr.value)}();var em=function(t){return t()};var nm=function(t){throw new Error(t)};var um=function(){return nm};var fh=um(),ch=em,xu=function(t){return ch(function(){return fh(t)})};var pt=function(){function t(){}return t.value=new t,t}(),Ct=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),jt=function(){function t(r,e,n,u,a,i,c){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i,this.value6=c}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return function(c){return new t(r,e,n,u,a,i,c)}}}}}}},t}(),Mu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),cu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),wu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Un=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Iu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),yf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var fm=function(t){return function(r){return new Ct(pt.value,t,r,pt.value)}};var ti=function(t){var r=$t(t);return function(e){var n=function(u){var a=!1,i;function c(_){if(_ instanceof pt)return a=!0,b.value;if(_ instanceof Ct){var s=r(e)(_.value1);if(s instanceof wt)return a=!0,new p(_.value2);if(s instanceof gt){u=_.value0;return}u=_.value3;return}if(_ instanceof jt){var m=r(e)(_.value1);if(m instanceof wt)return a=!0,new p(_.value2);var A=r(e)(_.value4);if(A instanceof wt)return a=!0,new p(_.value5);if(m instanceof gt){u=_.value0;return}if(A instanceof Mt){u=_.value6;return}u=_.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[_.constructor.name])}for(;!a;)i=c(u);return i};return n}};var Lu={map:function(t){return function(r){if(r instanceof pt)return pt.value;if(r instanceof Ct)return new Ct(y(Lu)(t)(r.value0),r.value1,t(r.value2),y(Lu)(t)(r.value3));if(r instanceof jt)return new jt(y(Lu)(t)(r.value0),r.value1,t(r.value2),y(Lu)(t)(r.value3),r.value4,t(r.value5),y(Lu)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var cm=function(t){return function(r){return function(e){var n=t,u=r,a=!1,i;function c(_,s,m){if(s instanceof tr)return a=!0,m;if(s instanceof mt){if(s.value0 instanceof Mu){n=_,u=s.value1,e=new Ct(m,s.value0.value0,s.value0.value1,s.value0.value2);return}if(s.value0 instanceof cu){n=_,u=s.value1,e=new Ct(s.value0.value0,s.value0.value1,s.value0.value2,m);return}if(s.value0 instanceof wu){n=_,u=s.value1,e=new jt(m,s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Un){n=_,u=s.value1,e=new jt(s.value0.value0,s.value0.value1,s.value0.value2,m,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Iu){n=_,u=s.value1,e=new jt(s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5,m);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[s.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[s.constructor.name,m.constructor.name])}for(;!a;)i=c(n,u,e);return i}}},Cf=function(t){var r=cm(t),e=$t(t);return function(n){return function(u){var a=function(c){return function(_){var s=c,m=!1,A;function $(S,o){if(S instanceof tr)return m=!0,new Ct(o.value0,o.value1,o.value2,o.value3);if(S instanceof mt){if(S.value0 instanceof Mu)return m=!0,r(S.value1)(new jt(o.value0,o.value1,o.value2,o.value3,S.value0.value0,S.value0.value1,S.value0.value2));if(S.value0 instanceof cu)return m=!0,r(S.value1)(new jt(S.value0.value0,S.value0.value1,S.value0.value2,o.value0,o.value1,o.value2,o.value3));if(S.value0 instanceof wu){s=S.value1,_=new yf(new Ct(o.value0,o.value1,o.value2,o.value3),S.value0.value0,S.value0.value1,new Ct(S.value0.value2,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof Un){s=S.value1,_=new yf(new Ct(S.value0.value0,S.value0.value1,S.value0.value2,o.value0),o.value1,o.value2,new Ct(o.value3,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof Iu){s=S.value1,_=new yf(new Ct(S.value0.value0,S.value0.value1,S.value0.value2,S.value0.value3),S.value0.value4,S.value0.value5,new Ct(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[S.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[S.constructor.name,o.constructor.name])}for(;!m;)A=$(s,_);return A}},i=function(c){return function(_){var s=c,m=!1,A;function $(S,o){if(o instanceof pt)return m=!0,a(S)(new yf(pt.value,n,u,pt.value));if(o instanceof Ct){var v=e(n)(o.value1);if(v instanceof wt)return m=!0,r(S)(new Ct(o.value0,n,u,o.value3));if(v instanceof gt){s=new mt(new Mu(o.value1,o.value2,o.value3),S),_=o.value0;return}s=new mt(new cu(o.value0,o.value1,o.value2),S),_=o.value3;return}if(o instanceof jt){var v=e(n)(o.value1);if(v instanceof wt)return m=!0,r(S)(new jt(o.value0,n,u,o.value3,o.value4,o.value5,o.value6));var ut=e(n)(o.value4);if(ut instanceof wt)return m=!0,r(S)(new jt(o.value0,o.value1,o.value2,o.value3,n,u,o.value6));if(v instanceof gt){s=new mt(new wu(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),S),_=o.value0;return}if(v instanceof Mt&&ut instanceof gt){s=new mt(new Un(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),S),_=o.value3;return}s=new mt(new Iu(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),S),_=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[S.constructor.name,o.constructor.name])}for(;!m;)A=$(s,_);return A}};return i(tr.value)}}},mh=function(t){var r=cm(t),e=$t(t);return function(n){var u=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(o instanceof tr)return A=!0,v;if(o instanceof mt){if(o.value0 instanceof Mu&&o.value0.value2 instanceof pt&&v instanceof pt)return A=!0,r(o.value1)(new Ct(pt.value,o.value0.value0,o.value0.value1,pt.value));if(o.value0 instanceof cu&&o.value0.value0 instanceof pt&&v instanceof pt)return A=!0,r(o.value1)(new Ct(pt.value,o.value0.value1,o.value0.value2,pt.value));if(o.value0 instanceof Mu&&o.value0.value2 instanceof Ct){m=o.value1,s=new jt(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof cu&&o.value0.value0 instanceof Ct){m=o.value1,s=new jt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v);return}return o.value0 instanceof Mu&&o.value0.value2 instanceof jt?(A=!0,r(o.value1)(new Ct(new Ct(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ct(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof cu&&o.value0.value0 instanceof jt?(A=!0,r(o.value1)(new Ct(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ct(o.value0.value0.value6,o.value0.value1,o.value0.value2,v)))):o.value0 instanceof wu&&o.value0.value2 instanceof pt&&o.value0.value5 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value0,o.value0.value1,pt.value,o.value0.value3,o.value0.value4,pt.value))):o.value0 instanceof Un&&o.value0.value0 instanceof pt&&o.value0.value5 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value1,o.value0.value2,pt.value,o.value0.value3,o.value0.value4,pt.value))):o.value0 instanceof Iu&&o.value0.value0 instanceof pt&&o.value0.value3 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value1,o.value0.value2,pt.value,o.value0.value4,o.value0.value5,pt.value))):o.value0 instanceof wu&&o.value0.value2 instanceof Ct?(A=!0,r(o.value1)(new Ct(new jt(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Un&&o.value0.value0 instanceof Ct?(A=!0,r(o.value1)(new Ct(new jt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Un&&o.value0.value5 instanceof Ct?(A=!0,r(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new jt(v,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Iu&&o.value0.value3 instanceof Ct?(A=!0,r(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new jt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,v)))):o.value0 instanceof wu&&o.value0.value2 instanceof jt?(A=!0,r(o.value1)(new jt(new Ct(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ct(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Un&&o.value0.value0 instanceof jt?(A=!0,r(o.value1)(new jt(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ct(o.value0.value0.value6,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Un&&o.value0.value5 instanceof jt?(A=!0,r(o.value1)(new jt(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(v,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new Ct(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Iu&&o.value0.value3 instanceof jt?(A=!0,r(o.value1)(new jt(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new Ct(o.value0.value3.value6,o.value0.value4,o.value0.value5,v)))):(A=!0,xu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!A;)$=S(m,s);return $}},a=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(v instanceof Ct&&v.value0 instanceof pt&&v.value3 instanceof pt)return A=!0,u(o)(pt.value);if(v instanceof Ct){m=new mt(new cu(v.value0,v.value1,v.value2),o),s=v.value3;return}if(v instanceof jt&&v.value0 instanceof pt&&v.value3 instanceof pt&&v.value6 instanceof pt)return A=!0,u(new mt(new cu(pt.value,v.value1,v.value2),o))(pt.value);if(v instanceof jt){m=new mt(new Iu(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),s=v.value6;return}return A=!0,xu("The impossible happened in partial function `removeMaxNode`.")}for(;!A;)$=S(m,s);return $}},i=function(_){var s=!1,m;function A($){if($ instanceof Ct&&$.value3 instanceof pt)return s=!0,{key:$.value1,value:$.value2};if($ instanceof Ct){_=$.value3;return}if($ instanceof jt&&$.value6 instanceof pt)return s=!0,{key:$.value4,value:$.value5};if($ instanceof jt){_=$.value6;return}return s=!0,xu("The impossible happened in partial function `maxNode`.")}for(;!s;)m=A(_);return m},c=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(v instanceof pt)return A=!0,b.value;if(v instanceof Ct){var ut=e(n)(v.value1);if(v.value3 instanceof pt&&ut instanceof wt)return A=!0,new p(new V(v.value2,u(o)(pt.value)));if(ut instanceof wt){var j=i(v.value0);return A=!0,new p(new V(v.value2,a(new mt(new Mu(j.key,j.value,v.value3),o))(v.value0)))}if(ut instanceof gt){m=new mt(new Mu(v.value1,v.value2,v.value3),o),s=v.value0;return}m=new mt(new cu(v.value0,v.value1,v.value2),o),s=v.value3;return}if(v instanceof jt){var Pt=function(){return v.value0 instanceof pt&&v.value3 instanceof pt&&v.value6 instanceof pt}(),ut=e(n)(v.value4),Ot=e(n)(v.value1);if(Pt&&Ot instanceof wt)return A=!0,new p(new V(v.value2,r(o)(new Ct(pt.value,v.value4,v.value5,pt.value))));if(Pt&&ut instanceof wt)return A=!0,new p(new V(v.value5,r(o)(new Ct(pt.value,v.value1,v.value2,pt.value))));if(Ot instanceof wt){var j=i(v.value0);return A=!0,new p(new V(v.value2,a(new mt(new wu(j.key,j.value,v.value3,v.value4,v.value5,v.value6),o))(v.value0)))}if(ut instanceof wt){var j=i(v.value3);return A=!0,new p(new V(v.value5,a(new mt(new Un(v.value0,v.value1,v.value2,j.key,j.value,v.value6),o))(v.value3)))}if(Ot instanceof gt){m=new mt(new wu(v.value1,v.value2,v.value3,v.value4,v.value5,v.value6),o),s=v.value0;return}if(Ot instanceof Mt&&ut instanceof gt){m=new mt(new Un(v.value0,v.value1,v.value2,v.value4,v.value5,v.value6),o),s=v.value3;return}m=new mt(new Iu(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),s=v.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[v.constructor.name])}for(;!A;)$=S(m,s);return $}};return c(tr.value)}},ue={foldr:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return _r(ue)(t)(t(e.value2)(_r(ue)(t)(r)(e.value3)))(e.value0);if(e instanceof jt)return _r(ue)(t)(t(e.value2)(_r(ue)(t)(t(e.value5)(_r(ue)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return er(ue)(t)(t(er(ue)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof jt)return er(ue)(t)(t(er(ue)(t)(t(er(ue)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=Ut(t),e=et(t.Semigroup0());return function(n){return function(u){if(u instanceof pt)return r;if(u instanceof Ct)return e(gr(ue)(t)(n)(u.value0))(e(n(u.value2))(gr(ue)(t)(n)(u.value3)));if(u instanceof jt)return e(gr(ue)(t)(n)(u.value0))(e(n(u.value2))(e(gr(ue)(t)(n)(u.value3))(e(n(u.value5))(gr(ue)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},me={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return Wn(me)(t)(t(e.value1)(e.value2)(Wn(me)(t)(r)(e.value3)))(e.value0);if(e instanceof jt)return Wn(me)(t)(t(e.value1)(e.value2)(Wn(me)(t)(t(e.value4)(e.value5)(Wn(me)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return Hn(me)(t)(t(e.value1)(Hn(me)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof jt)return Hn(me)(t)(t(e.value4)(Hn(me)(t)(t(e.value1)(Hn(me)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=Ut(t),e=et(t.Semigroup0());return function(n){return function(u){if(u instanceof pt)return r;if(u instanceof Ct)return e(fu(me)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(fu(me)(t)(n)(u.value3)));if(u instanceof jt)return e(fu(me)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(fu(me)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(fu(me)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return ue}},Dh=Wn(me),bh=Hn(me),lm=function(){return Dh(function(t){return function(r){return function(e){return new mt(t,e)}}})(tr.value)}();var qn=function(){return pt.value}();var Rl=function(t){var r=mh(t);return function(e){return function(n){return Zt(n)(jr)(r(e)(n))}}};var Pu=function(t){var r=ti(t),e=Rl(t),n=Cf(t);return function(u){return function(a){return function(i){var c=u(r(a)(i));if(c instanceof b)return e(a)(i);if(c instanceof p)return n(a)(c.value0)(i);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[c.constructor.name])}}}};var dh=function(t){var r=Pu(t);return function(e){return function(n){return function(u){var a=function(i){return function(c){return function(_){return r(function(){var s=Zt(_)(e(_));return function(m){return p.create(s(m))}}())(i)(c)}}};return bh(a)(u)(n)}}}};var pm=function(t){return dh(t)(h)};var _m=ir(ve),yh=q(Cr),gh=Jt(Ga),Ch=y(ve);var hf={compact:function(t){return function(){var e=Rn(),n=uf(function(u){return Eu(t)(u)})();return af(n)(function(u){return _m(function(a){if(a instanceof b)return yh(0);if(a instanceof p)return on(a.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[a.constructor.name])}(u))})(),Nn(e)()}()},separate:function(t){return function(){var e=Rn(),n=Rn(),u=uf(function(a){return Eu(t)(a)})();return af(u)(function(a){return _m(function(i){if(i instanceof lt)return on(i.value0)(e);if(i instanceof ft)return on(i.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[i.constructor.name])}(a))})(),gh(Ch(function(a){return function(i){return{left:a,right:i}}})(Nn(e)))(Nn(n))()}()}};var lu=function(t){return t.compact};var sm=et(Vr),Eh=er(Ft);var vm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof lt)return{left:sm(e.left)([u.value0]),right:e.right};if(u instanceof ft)return{right:sm(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return Eh(r)({left:[],right:[]})},partition:tf,filterMap:Fl,filter:Vo,Compactable0:function(){return hf},Functor1:function(){return Ar}};var Xe=function(t){return t.filterMap};var Nl=function(t){return t.filter};var Fh=gr(fn),xh=er(fn),Mh=_r(fn);var wh=function(t){var r=pm(t);return function(e){return function(n){return r(e)(n)}}};var Wl=function(t){return lm(t)};var Dm=function(t){return fm(t)(void 0)};var Hl=function(t){return{append:wh(t)}};var bm={foldMap:function(t){var r=Fh(t);return function(e){var n=r(e);return function(u){return n(Wl(u))}}},foldl:function(t){return function(r){var e=xh(t)(r);return function(n){return e(Wl(n))}}},foldr:function(t){return function(r){var e=Mh(t)(r);return function(n){return e(Wl(n))}}}};var Ih=qn;var dm=function(t){var r=Hl(t);return{mempty:Ih,Semigroup0:function(){return r}}};var Am=function(t){var r=Rl(t);return function(e){return function(n){return r(e)(n)}}};function km(t){return function(r){return function(){return setTimeout(r,t)}}}function ym(t){return function(){clearTimeout(t)}}var Oh=$t(le);var gm=km;var Rh={eq:function(t){return function(r){return t===r}}},Sf={compare:function(t){return function(r){return Oh(t)(r)}},Eq0:function(){return Rh}};var Cm=ym;var pu=function(r){return function(e){return r(e)()}};var to=function(r){return function(e){return function(){return r(e)}}};var tS=function(t){var r=et(rl(t));return{append:function(e){return function(n){return pu(function(u){return r(to(e)(u))(to(n)(u))})}}}};var Em=function(t){var r=Ut(el(t)),e=tS(t.Semigroup0());return{mempty:pu(function(n){return r}),Semigroup0:function(){return e}}};var rS=y(ca),eS=q(Pn),Fm=function(t){return t.sampleOnRight};var ya=function(t){return t.keepLatest};var xm=function(t){return t.fix},Ou=function(t){var r=xm(t),e=Fm(t),n=t.Alternative0(),u=Ht(n.Plus1().Alt0()),a=q(n.Applicative0()),i=y(t.Filterable1().Functor1());return function(c){return function(_){return function(s){return r(function(m){return e(u(m)(a(_)))(i(vr(c))(s))})}}}};var Ru=function(t){var r=Xe(t.Filterable1()),e=Ou(t);return function(n){return function(u){return function(a){return r(jr)(e(function(i){return function(c){return rS(eS)(n(i.value0)(c))}})(new V(u,b.value))(a))}}}};function Ul(t){return function(r){return t===r}}var Mm=Ul;var wm=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Im=un(ye),Tf=Im(an),Ca=q(ye),Lm=Ut(Em(Uc)),Nu=Ka(Jo),ni=ir(U),aS=et(Vr),oS=Ut(dm(Sf)),iS=Am(Sf),fS=et(Hl(Sf)),cS=Im(bm),lS=Jt(Ir),pS=y(U);var _S=function(t){return function(r){return function(e,n){var u=ge(b.value)(),a=t(e,function(c){return se(new p(c))(u)()}),i=r(e,function(c){var _=Yr(u)();return Tf(_)(function(s){return function(){return n(c(s))}})()});return function(){return a(),i()}}}},sS=function(t){return function(r){return function(e,n){var u=ge(b.value)(),a=t(e,function(c){var _=Yr(u)();return Tf(_)(function(s){return function(){return n(s(c))}})()}),i=r(e,function(c){return se(new p(c))(u)()});return function(){return a(),i()}}}},vS=function(t){return function(r,e){var n=ge(Ca(void 0))(),u=t(r,function(a){var i=Yr(n)();i();var c=a(r,e);return se(c)(n)()});return function(){var i=Yr(n)();return i(),u()}}},$r={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},mS=y($r),ui=function(t){return function(r){return function(e,n){return r(e,function(u){var a=t(u);if(a instanceof p)return n(a.value0);if(a instanceof b)return void 0;throw new Error("Failed pattern match at FRP.Event (line 201, column 31 - line 203, column 35): "+[a.constructor.name])})}}},ql=function(t){return ui(function(r){var e=t(r);if(e)return new p(r);if(!e)return b.value;throw new Error("Failed pattern match at FRP.Event (line 129, column 13 - line 131, column 25): "+[e.constructor.name])})},Pm=function(){var r=ul(),e=ge(0)();return{event:function(n,u){var a=ge(u)(),i=Yr(e)();return al(i,a,r),zo(function(c){return c+1|0})(e)(),function(){return se(Lm)(a)(),ol(i,r),void 0}},push:function(n){return nl(r,function(u){var a=Yr(u)();return a(n)})}}},DS=function(t){return function(r,e){var n=Pm(),u=t(n.event),a=n.event(r,e),i=u(r,n.push);return function(){return i(),a()}}},ai={compact:ui(Rt(Nt)),separate:function(t){return{left:ui(function(r){if(r instanceof lt)return new p(r.value0);if(r instanceof ft)return b.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 33): "+[r.constructor.name])})(t),right:ui(function(r){if(r instanceof ft)return new p(r.value0);if(r instanceof lt)return b.value;throw new Error("Failed pattern match at FRP.Event (line 119, column 13 - line 121, column 32): "+[r.constructor.name])})(t)}}},zn={filter:ql,filterMap:ui,partition:function(t){return function(r){return{yes:ql(t)(r),no:ql(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:Xe(zn)(function(){var e=en(p.create)(h(b.value));return function(n){return e(t(n))}}())(r),right:Xe(zn)(function(e){return Wc(t(e))})(r)}}},Compactable0:function(){return ai},Functor1:function(){return $r}},bS=function(t){return function(r){return function(e,n){var u=ge(b.value)(),a=Nu(Rn)(),i=ge(b.value)(),c=Nu(Rn)(),_=ge(!0)(),s=t(e,function(S){var o=Yr(_)();if(o)return ni(Nu(on(S)(a)))();se(new p(S))(u)();var v=Yr(i)();return Tf(v)(function(ut){return function(){return n(ut(S))}})()}),m=r(e,function(S){var o=Yr(_)();if(o)return ni(Nu(on(S)(c)))();se(new p(S))(i)();var v=Yr(u)();return Tf(v)(function(ut){return function(){return n(S(ut))}})()});se(!1)(_)();var A=Nu(ef(a))(),$=Nu(ef(c))();return function(){return A.length===0?se(hl($))(i)():Ki(A,function(S){return se(new p(S))(u)(),Ki($,function(o){return se(new p(o))(i)(),n(o(S))})})}(),Nu(rf(0)(An(A))([])(a))(),Nu(rf(0)(An($))([])(c))(),function(){return s(),m()}}}},Jl=function(t){return function(r){return r}(Vl(321).subscribe)(t)},Vl=wm("backdoor","FRP.Event",function(){var t=function(){var e=ul(),n=ge(0)();return{event:function(u,a){var i=ge(a)(),c=Yr(n)();return al(c,i,e),zo(function(_){return _+1|0})(n)(),function(){return se(Lm)(i)(),ol(c,e),void 0}},push:function(u){return function(){return nl(e,function(a){var i=Yr(a)();return i(u)})}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?Ca(void 0):e(function(a){return function(){return u(a)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?Ca(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(a){return function(){return u(a)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var a=function(i){return function(c){return function(){return i(n,pu(c))}}};return e(a)(function(i){return function(){return u(i)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var a=function(i,c){return i(n,c)};return e(a,u)}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,pu(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,pu(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var a=zl(722)();return u(e(a.push)(a.event)),Ca(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,a){var i=Pm();return a(n(i.event)),e(u,i.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=zl(740)(),a=Jl(e)(u.push)();return{event:u.event,unsubscribe:a}}};return r}(),mailboxed:function(){var r=function(e){var n=Pu(e),u=ti(e);return function(a){return function(i){return function(c,_){var s=ge(qn)();_(i(function(A){return function($,S){return ni(Qi(n(function(o){if(o instanceof b)return new p([S]);if(o instanceof p)return new p(aS(o.value0)([S]));throw new Error("Failed pattern match at FRP.Event (line 753, column 21 - line 755, column 55): "+[o.constructor.name])})(A))(s))(),ni(Qi(n(function(o){if(o instanceof b)return b.value;if(o instanceof p)return new p($l(Mm)(S)(o.value0));throw new Error("Failed pattern match at FRP.Event (line 762, column 21 - line 764, column 69): "+[o.constructor.name])})(A))(s))}}));var m=a(c,function(A){var $=Yr(s)(),S=u(A.address)($);if(S instanceof b)return void 0;if(S instanceof p)return Ki(S.value0,function(o){return o(A.payload)});throw new Error("Failed pattern match at FRP.Event (line 771, column 13 - line 773, column 99): "+[S.constructor.name])});return function(){return ni(se(qn)(s))(),m()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,a){var i=ge(oS)(),c=n(u,function(_){var s=ge(b.value)(),m=gm(e)(function(){a(_);var $=Yr(s)();return Zt(Ca(void 0))(function(S){return zo(iS(S))(i)})($)()})();return se(new p(m))(s)(),zo(fS(Dm(m)))(i)()});return function(){var s=Yr(i)();return cS(s)(Cm)(),c()}}}};return r}()}}),zl=wm("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(Vl(437).create)()}}),ro=Vl(583),Om=zl(434),jl=function(t){return function(r){return r}(ro.bus)(t)};var Rm=function(t){return function(r){return r}(ro.makeLemmingEvent)(t)},gn=function(t){return function(r){return r}(ro.makeLemmingEventO)(t)},Nm=function(t){return function(r){return r}(ro.makePureEvent)(t)},Xl=function(t){return function(r){return r}(ro.memoize)(t)};var Wm=function(t){return function(r){return r}(ro.subscribePure)(t)};var dS={apply:function(t){return function(r){return bS(t)(mS(Fo)(r))}},Functor0:function(){return $r}};var nr={pure:function(t){return function(r,e){return e(t),Ca(void 0)}},Apply0:function(){return dS}};var Pr={alt:function(t){return function(r){return function(e,n){return lS(pS(function(u){return function(a){return function(){return u(),a()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return $r}};var d={empty:function(t,r){return Ca(void 0)},Alt0:function(){return Pr}},AS={Applicative0:function(){return nr},Plus1:function(){return d}},Ce={keepLatest:vS,sampleOnRight:_S,sampleOnLeft:sS,fix:DS,Alternative0:function(){return AS},Filterable1:function(){return zn}};var kS=function(t){return t},oi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ii=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yS=function(t){return t},Ef=C(),f=yS;var E=function(){return oi.create}();var G=function(){return ii.create}(),br=function(){var t=y(ta)(y(U)(h(!0)));return function(r){return kS(t(r))}}(),It=function(t){return t.attr};function Hm(t){return()=>t.slice()}function Bm(t){return r=>e=>()=>{e[t]=r}}function Um(t){return()=>t.slice()}var Gl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var Yl=function(t){var r=Jr(t);return function(){return function(){return function(e){return function(n){return function(u){return Zn(r(e))(n)(u)}}}}}},Zl=function(t){var r=Jr(t);return function(){return function(e){return function(n){return tn(r(e))(n)}}}};var zm=q(Cr);var $f={vb:function(t){return zm(new V({},{}))}},Jm=function(t){return t.vb},TS={vbus:function(){var t=function(){return function(n){var u=Jm(n);return function(a){return function(i){return Rm(function(c){return function(_){return function(){var m=u(tt.value)();return _(i(m.value0)(m.value1))(),zm(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},rp=function(){return function(t){return function(r){return function(e){return e()(t)}(TS.vbus)(r)}}};var eo=function(t){var r=Yl(t)()();return function(){return function(){return function(e){var n=Jm(e);return function(){return function(){return{vb:function(u){return function(){var i=n(tt.value)(),c=Om();return new V(r(tt.value)(c.push)(i.value0),r(tt.value)(c.event)(i.value1))}}}}}}}}};var Wu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ep=function(){function t(){}return t.value=new t,t}();var xf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),no=function(){function t(){}return t.value=new t,t}(),Mf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),np=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),up=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ha=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),g=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Hu={eq:function(t){return function(r){return t instanceof Wu&&r instanceof Wu?t.value0===r.value0:t instanceof ep&&r instanceof ep}}};var I=function(t){return new up(t)};var Vm=function(t){return new np(t)};var jm=t=>r=>r[t];var Sa=function(t){return t.reflectType};var Gm=function(t){return Sa(t)};var uo=Ar;var Km=function(){return function(t){return t}};var ap=function(){return function(){return function(){return function(){return function(){return function(t){var r=Gm(t);return function(e){return jm(r(e))}}}}}}};var Qm=[];var Ym=function(){return function(){return function(t){return function(r){return Qo(t)(r)}}}};function Zm(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var Bu={};function ip(t){return t()}function tD(t){return function(r){return function(e){return function(n){var u=e;function a(c){return function(_){return r(_)(c)(n[c])}}for(var i in n)hasOwnProperty.call(n,i)&&(u=t(u)(a(i)));return u}}}}function wf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var LS=Object.keys||wf(function(t){return function(){return t}});function fp(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var cp=function(t){return function(r){return function(){return delete r[t],r}}};var US=_r(Ft);var qS=wf(function(t){return function(r){return r}});var zS=Zm;var rD=function(t){return function(r){return ip(function(){var n=zS(r)();return t(n)(),n})}};var ao=function(t){return function(r){return rD(fp(t)(r))}};var eD=tD(Fo),JS=function(t){var r=et(t.Semigroup0()),e=Ut(t);return function(n){return eD(function(u){return function(a){return function(i){return r(u)(n(a)(i))}}})(e)}},nD={foldl:function(t){return eD(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return US(t)(r)(qS(e))}}},foldMap:function(t){var r=JS(t);return function(e){return r(h(e))}}};var lp=function(t){return rD(cp(t))};function uD(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function aD(t){return function(r){return function(e){return e[t]=r,e}}}function oD(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function iD(t){return function(r){return delete r[t],r}}var fD=Yu;var cD=function(){return function(){return function(t){var r=Jr(t);return function(e){return function(n){return function(u){return oD(r(e))(n)(u)}}}}}};var lD=function(){return function(){return function(t){var r=Jr(t);return function(e){return function(n){return function(u){return aD(r(e))(n)(u)}}}}}};var pD=function(t){var r=Jr(t);return function(){return function(){return function(e){return function(n){return iD(r(e))(n)}}}}};var _D=function(t){return function(r){return t(uD(r))}};var XS=ya(Ce),GS=y($r),KS=nu(Ft)(d);var QS=At(Tu),YS=y(Ar),_p=Km(),ZS=$u(Za),tT=Hc(Js),oo=q(Cr),mD=y(ve),rT=y(uo),DD=un(Cr),bD=DD(an),sD=Ic(fD),eT=lD()()({reflectSymbol:function(){return"id"}}),nT=cD()()({reflectSymbol:function(){return"parent"}}),uT=pD({reflectSymbol:function(){return"raiseId"}})()(),Cn=ir(ve),aT=Yn(Cr),dD=DD(Ft),oT=Rt(Nt),iT=wr(Ft)(d),fT=ja(Cr)(Ft),cT=et(Vr),lT=er(nD),pT=mr(Ga),vD=function(){function t(){}return t.value=new t,t}(),sp=function(){function t(){}return t.value=new t,t}(),_T=function(){function t(){}return t.value=new t,t}();var cn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof up)return iT(cn(t)(r)(e))(u.value0);if(u instanceof ha)return XS(GS(cn(t)(r)(e))(u.value0));if(u instanceof g)return n(t.toElt(u.value0));if(u instanceof np)return gn(function(a,i){var c=_e(Bu)(),_=a(u.value0,function(s){var m=t.ids(e)(),A=_e(oo(void 0))(),$=t.ids(e)(),S=_e(oo(void 0))(),o=_e([])(),v=_e(oo(void 0))(),ut=mD(Wu.create)(t.ids(e))(),j=_e(vD.value)(),Pt=a(s,function(Gt){var rt=Qr(j)();if(Gt instanceof Mf&&rt instanceof sp){var yr=Qr(o)();return fT(function(z){return function(){return i(t.doLogic(Gt.value0)(e)(z))}})(yr)()}if(Gt instanceof no&&rt instanceof sp){Cn(Dn(_T.value)(j))();var fe=function(){var M=Qr(o)();dD(M)(function(we){return bD(r.parent)(function(Nr){return function(){return i(t.disconnectElement(e)({id:we,parent:Nr,scope:ut}))}})})();var st=Qr(A)();st();var Dt=Qr(S)();return Dt(),Cn(Lr(lp(m))(c))(),Cn(Lr(lp($))(c))()};return Cn(Dn(fe)(v))(),fe()}if(Gt instanceof xf&&rt instanceof vD){Cn(Dn(sp.value)(j))();var ot=a(cn(t)(function(){var z={};for(var M in r)({}).hasOwnProperty.call(r,M)&&(z[M]=r[M]);return z.scope=ut,z.raiseId=function(st){return Cn(Lr(cT([st]))(o))},z}())(e)(Gt.value0),i);return Cn(Lr(ao($)(ot))(c))(),Cn(Dn(ot)(S))()}return void 0});Cn(Dn(Pt)(A))(),Cn(Lr(ao(m)(Pt))(c))();var Ot=Qr(v)();return Ot()});return function(){return QS(Qr(c))(lT(pT)(oo(void 0)))(),_()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},sT=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(a){var i=function(c){return function(_){return gn(function(s,m){var A=Hm(YS(h(""))(_p(u)))(),$=KS(ZS(function(Ot){return tT(function(Gt){return function(rt){return rt instanceof g?function(yr){return yr(function(){var fe={};for(var ot in c)({}).hasOwnProperty.call(c,ot)&&(fe[ot]=c[ot]);return fe.parent=b.value,fe.scope=r(c.scope),fe.raiseId=function(z){return Bm(Ot)(z)(A)},fe}())(_)}(n.toElt(rt.value0)):Gt(n.wrapElt(rt))}})})(_p(u))),S=s($,m),o=_e(oo(void 0))(),v=mD(Q)(Um(A))(),ut=rT(function(Ot){return function(Gt){return new g(n.fromEltO1(function(rt){return function(yr){return gn(function(fe,ot){return rt.raiseId(Ot)(),bD(rt.parent)(function(z){return function(){return ot(n.giveNewParent(yr)(_D(sD(eT(tt.value)(Ot))(sD(nT(tt.value)(h(z)))(uT(tt.value))))(rt))(Gt))}})(),oo(void 0)})}}))}})(v),j=cn(e)(c)(_)(a(ut)(Q)),Pt=s(j,m);return Cn(Dn(Pt)(o))(),function(){S(),aT(!t)(dD(_p(v))(function(rt){return function(){return m(n.deleteFromCache(_)({id:rt}))}}))();var Gt=Qr(o)();return Gt()}})}};return new g(n.fromEltO2(i))}}}}}}}}},vT=sT()()();var AD=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return vT(!1)(oT)(t)(r)(e)(n)}}}}}}};var mp=C(),DT=rp(),bT=Je(ze),dT=y($r),kD=Er(),AT=St(Hu),kT=q(Cr),vp=q(nr),yT=k(d),gT=nu(Ft)(d);var Lf=function(){return function(t){var r=DT(t);return function(e){return function(n){return new ha(mp(r(e)(n)))}}}};var yD=function(t){return function(r){var e=function(n){return n instanceof g?new g(bT(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof ha?new ha(dT(e)(n.value0)):r};return e(r)}},P=function(t){return yD(p.create(t))},gD=function(){return new Mf(0)}();var Dp=function(){return no.value}(),CT=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(kD(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:AT})}},toElt:function(t){return t}}},hT=CT(),Uu=function(t){return new xf(kD(yD(b.value)(t)))};var qu=function(t){return jl(t)};var io=function(t){return new ha(mp(qu(t)))};var ST=function(t){return function(r){return function(e){return cn(hT)(t)(r)(e)}}},TT=function(t){return function(r){var e=function(n){return function(u){return gn(function(a,i){var c=u.ids();n.raiseId(c)();var _=function(){if(n.parent instanceof b){var m=u.ids();return new V(vp(u.makeElement({id:m,parent:b.value,scope:n.scope,tag:"div",pos:b.value,dynFamily:b.value})),m)}if(n.parent instanceof p)return new V(yT,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 339, column 34 - line 353, column 36): "+[n.parent.constructor.name])}(),s=a(gT([_.value0,vp(u.makeDynBeacon({id:c,parent:new p(_.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),vp(u.attributeParent({id:c,parent:_.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),ST({parent:new p(_.value1),scope:n.scope,ez:!1,raiseId:function(m){return kT(void 0)},pos:b.value,dynFamily:new p(c)})(u)(t(r))]),i);return function(){return i(u.removeDynBeacon({id:c})),s()}})}};return new g(e)}},zu=TT(mp(Vm));var Of=y($r),bp=nu(Ft)(d),fo=q(nr),hD=k(d),ET=q(Cr),$T=Ru(Ce),FT=ya(Ce),xT=Nl(zn),MT=St(Pa),fi=C(),Pf=Er(),wT=St(Hu);var IT=Ht(Pr);var LT=et(Vr);var CD=y(uo);var PT=Xi(),OT=Je(ze);var RT=AD()()();var NT=function(t){return function(r){return function(e){return Of(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},WT=function(t){return function(r){return function(e){return Of(function(n){return function(u){if(u.value instanceof oi)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof ii)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 62, column 26 - line 64, column 45): "+[u.value.constructor.name])}(Ef(n))})(e)}}},Ge=function(t){var r=function(e){return function(n){return gn(function(u,a){var i=n.ids();e.raiseId(i)();var c=u(bp([fo(n.makeText({id:i,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),NT(n)(i)(t),Zt(hD)(function(_){return fo(n.attributeParent({id:i,parent:_,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),a);return function(){return a(n.deleteFromCache({id:i})),c()}})}};return new g(r)},Qt=function(t){return Ge(fo(t))},Rf=function(t){return function(r){var e=function(){var n=function(u){return function(a){return new V(u+1|0,new V(a,u))}};return $T(n)(0)}();return zu(FT(Xl(e(r))(function(n){return Of(function(u){return bp([Of(h(no.value))(xT(function(){var a=MT(u.value1+1|0);return function(i){return a(jr(i))}}())(n)),fo(Uu(fi(t(u.value0))))])})(n)})))}},HT=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Pf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:wT})}},toElt:function(t){return t}}},SD=HT();var BT=function(t){return function(r){return function(e){return cn(SD)(t)(r)(e)}}};var L=function(t){return function(r){return function(e){var n=function(u){return function(a){return gn(function(i,c){var _=a.ids();u.raiseId(_)();var s=i(IT(bp(LT([fo(a.makeElement({id:_,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),WT(a)(_)(r)])(Zt([])(function(m){return[fo(a.attributeParent({id:_,parent:m,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(BT({parent:new p(_),scope:u.scope,ez:!0,raiseId:function(m){return ET(void 0)},pos:b.value,dynFamily:b.value})(a)(e)),c);return function(){return c(a.deleteFromCache({id:_})),s()}})}};return n}}};var TD=function(){return function(t){return function(r){return RT(SD)({fromEltO1:fi,fromEltO2:fi,toElt:fi,wrapElt:function(e){return new g(L("div")(hD)(PT(e)))},giveNewParent:function(e){return function(n){return function(u){return Pf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(Pf(e))}})(CD(Pf)(t))(OT(CD(function(e){return e(void 0)}))(fi(r)))}}};var Hr=function(){function t(){}return t.value=new t,t}();var Gr={attr:function(t){return function(r){return f({key:"href",value:E(r)})}}};var UT=X(U),dr=function(){function t(){}return t.value=new t,t}(),co={attr:function(t){return function(r){return f({key:"click",value:G(h(UT(r)(!0)))})}}};var Kr={attr:function(t){return function(r){return f({key:"click",value:G(r)})}}};var De=function(){function t(){}return t.value=new t,t}();var lo={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var ED={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var $D={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var FD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var xD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var MD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var wD=C(),li=function(t){return function(r){return new g(L("a")(t)(wD(I(wD(w(P)(r))))))}};var LD=C(),Nf=function(t){return function(r){return new g(L("div")(t)(LD(I(LD(w(P)(r))))))}},cr=Nf(k(d));var PD=C(),Vu=function(t){return function(r){return new g(L("span")(t)(PD(I(PD(w(P)(r))))))}},pi=Vu(k(d));var Ta=function(){function t(){}return t.value=new t,t}();var OD={attr:function(t){return function(r){return f({key:"type",value:E(r)})}}};var Hf={attr:function(t){return function(r){return f({key:"type",value:E(r)})}}};var RD=C(),he=function(t){return function(r){return new g(L("button")(t)(RD(I(RD(w(P)(r))))))}},Ap=he(k(d));var ND=C(),WD=function(t){return function(r){return new g(L("code")(t)(ND(I(ND(w(P)(r))))))}},Or=WD(k(d));var HD=C(),BD=function(t){return function(r){return new g(L("i")(t)(HD(I(HD(w(P)(r))))))}},kp=BD(k(d));var UD=C(),su=function(t){return function(r){return new g(L("input")(t)(UD(I(UD(w(P)(r))))))}};var qD=C(),zD=function(t){return function(r){return new g(L("li")(t)(qD(I(qD(w(P)(r))))))}},yp=zD(k(d));var JD=C(),VD=function(t){return function(r){return new g(L("pre")(t)(JD(I(JD(w(P)(r))))))}},Rr=VD(k(d));var jD=C(),XD=function(t){return function(r){return new g(L("ul")(t)(jD(I(jD(w(P)(r))))))}},gp=XD(k(d));var Vn=q(Pn),VT=k(Ws),Uf=function(){function t(){}return t.value=new t,t}(),po=function(){function t(){}return t.value=new t,t}(),_o=function(){function t(){}return t.value=new t,t}(),so=function(){function t(){}return t.value=new t,t}(),vo=function(){function t(){}return t.value=new t,t}(),mo=function(){function t(){}return t.value=new t,t}(),Do=function(){function t(){}return t.value=new t,t}(),bo=function(){function t(){}return t.value=new t,t}(),Ao=function(){function t(){}return t.value=new t,t}(),ko=function(){function t(){}return t.value=new t,t}(),GD=function(t){return t==="Intro"?Vn(Uf.value):t==="HelloWorld"?Vn(po.value):t==="SimpleComponent"?Vn(_o.value):t==="PURSX1"?Vn(so.value):t==="PURSX2"?Vn(vo.value):t==="Events"?Vn(mo.value):t==="Effects"?Vn(Do.value):t==="Events2"?Vn(bo.value):t==="Portals"?Vn(Ao.value):t==="SSR"?Vn(ko.value):VT};function Cp(){window.scrollTo(0,0)}var ae=Cp;var QD=k(d),YD=Ht(Pr),XT=y($r),GT=Je(ze),KT=nu(Ft)(d),KD=q(nr),QT=q(Cr),YT={reflectType:function(){return"~"}},ZT=Er(),tE=St(Hu),rE=C(),eE=function(t){return t};var Ur={pursxToElement:function(t){return function(r){return function(e){return{cache:Bu,element:function(n){return function(u){return QD}}}}}}},hp=function(t){return t.pursxToElement},oe=function(){return function(t){var r=hp(t);return function(e){var n=Sa(e);return function(u){var a=Zl(u)();return{pursxToElement:function(i){return function(c){return function(_){var s=r(i)(tt.value)(_);return{cache:ao(n(tt.value))(!0)(s.cache),element:function(m){return function(A){return YD(XT(GT(Ef)(function($){if($.value instanceof oi)return A.setProp({id:n(tt.value)+("@!%"+i),key:$.key,value:$.value.value0});if($.value instanceof ii)return A.setCb({id:n(tt.value)+("@!%"+i),key:$.key,value:$.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4196, column 38 - line 4206, column 24): "+[$.value.constructor.name])}))(a(tt.value)(_)))(s.element(m)(A))}}}}}}}}}}};var pr=eE,Sp=function(t){var r=Sa(t);return function(e){var n=Sa(e);return function(){return function(){return function(u){var a=hp(u);return function(i){return function(c){return function(_){var s=function(m){return function(A){return gn(function($,S){var o=A.ids(),v=A.ids();m.raiseId(o)();var ut=a(v)(tt.value)(_),j=$(KT([KD(A.makePursx({id:o,parent:m.parent,cache:ut.cache,dynFamily:m.dynFamily,pos:m.pos,pxScope:v,scope:m.scope,html:r(c),verb:n(i)})),ut.element(m)(A),Zt(QD)(function(Pt){return KD(A.attributeParent({id:o,parent:Pt,pos:m.pos,dynFamily:m.dynFamily,ez:!1}))})(m.parent)]),S);return function(){return S(A.deleteFromCache({id:o})),j()}})}};return new g(s)}}}}}}}},qr=function(t){var r=Sp(t)(YT)()();return function(){return function(){return function(e){return r(e)(tt.value)}}}},ZD=function(t){var r=qr(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},nE=function(t){return function(r){return function(e){return cn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(n){return function(u){return u.ids}(ZT(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:tE})}},toElt:function(n){return n}})(t)(r)(rE(e))}}},ie=function(){return function(t){var r=hp(t);return function(e){var n=Sa(e);return function(u){var a=Zl(u)();return{pursxToElement:function(i){return function(c){return function(_){var s=a(tt.value)(_),m=r(i)(tt.value)(_);return{cache:ao(n(tt.value))(!1)(m.cache),element:function(A){return function($){return YD(nE({parent:new p(n(tt.value)+("@!%"+i)),scope:A.scope,raiseId:function(S){return QT(void 0)},pos:A.pos,ez:!1,dynFamily:b.value})($)(s))(m.element(A)($))}}}}}}}}}}};var Tp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.Core (envy)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody
  (envy ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  ))`,Ep=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,$p=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable, envy)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, bus, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody
  (envy $ bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 :: Domable _ _
            p0 = index (Proxy :: _ 0) v

            p1 :: Domable _ _
            p1 = index (Proxy :: _ 1) v

            ev :: Boolean -> Event Boolean
            ev b = fold (\\a _ -> not a) b event

            flips :: Boolean -> Domable _ _
            flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], flips false ]
            ]
  )
`,Fp=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,xp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn, bussed, insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, bus, keepLatest, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody
  ( bussed \\pushAction actionEvent -> do
      let
        accumulateTextAndEmitOnSubmit :: Event String
        accumulateTextAndEmitOnSubmit = compact
          ( mapAccum
              ( \\a b -> case b of
                  AddTodo -> a /\\ Just a
                  ChangeText s -> s /\\ Nothing
              )
              ""
              actionEvent
          )

        top :: Nut
        top =
          D.div_
            [ D.input
                ( oneOf
                    [ textInput $ pure (pushAction <<< ChangeText)
                    , keyUp $ pure \\evt -> do
                        when (code evt == "Enter") $ do
                          pushAction AddTodo
                    ]
                )
                []
            , D.button
                (click $ pure $ pushAction AddTodo)
                [ text_ "Add" ]
            ]
      D.div_
        [ top
        , dyn
            $ map
                ( \\txt -> keepLatest $ bus \\p' e' ->
                    ( pure $ insert_ $ D.div_
                        [ text_ txt
                        , D.button
                            (click $ pure (p' sendToTop))
                            [ text_ "Prioritize" ]
                        , D.button
                            (click $ pure (p' remove))
                            [ text_ "Delete" ]
                        ]
                    ) <|> e'
                )
                accumulateTextAndEmitOnSubmit
        ]
  )
`,Mp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.Core (vbussed)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody
  ( vbussed (Proxy :: _ UIEvents) \\push event -> do
      let
        countUp :: Event Int
        countUp = fold
          (\\a _ -> 1 + a)
          (-1)
          (pure unit <|> event.buttonClicked)
      D.div_
        [ D.button
            (click_ (push.buttonClicked unit))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show <$> countUp
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,wp=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.Core (bus, envy)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody
  (envy $ bus \\push -> lcmap (pure Initial <|> _)
      \\event -> do
        let
          split :: { left :: Event Unit, right :: Event String }
          split = separate $ compact $
            map
              ( case _ of
                  Loading -> Just $ Left unit
                  Result s -> Just $ Right s
                  _ -> Nothing
              )
              event
          { left: loading, right: result } = split
        D.div_
          [ D.div_
              [ D.button (pure (D.OnClick := clickCb push))
                  [ text
                      ( pure clickText
                          <|> (loading $> "Loading...")
                          <|> (result $> clickText)
                      )
                  ]
              ]
          , D.div
              ( (pure (D.Style := "display: none;")) <|>
                  ( compact
                      ( mapAccum
                          ( \\b _ -> (b && false) /\\
                              if b then Just unit else Nothing
                          )
                          true
                          result
                      ) $> (D.Style := "display: block;")
                  )
              )
              [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
          ]
  )
`,Ip=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.Core (fixed)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  (fixed [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,Lp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Pp=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,Op=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function tb(t){return t.target}function zr(t){return function(){return t.preventDefault()}}function rb(t,r,e){return t==null?r:e(t)}function Rp(t){return t}var yo=Zt(null)(Rp),Zr=function(t){return rb(t,b.value,p.create)};var Vf=function(t){return Zr(tb(t))};var nb=ie(),lE=qr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(nb(oe()(nb(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),pE=y(Ar),_E=q(ra),jf=q(nr),ub=It(Gr),sE=It(lo),vE=It(Hf),mE=wr(Ft)(d),DE=It(Kr),ab=mr(Ir),bE=function(){return tt.value}(),ob=function(t){return lE(bE)({code:pr(Rr([Or([Qt(Ip)])])),result:pr(cr([Ap([Qt("I do nothing")]),gp(pE(function(r){return yp(_E(Qt(r)))})(["A","B","C"])),cr([li(jf(ub(Hr.value)("https://example.com")))([Qt("foo ")]),kp([Qt(" bar ")]),Vu(jf(sE(De.value)("font-weight: 800;")))([Qt(" baz")])]),cr([cr([cr([su(jf(vE(Ta.value)("range")))([])])])])])),next:mE(jf)([DE(dr.value)(br(function(r){return ab(ab(zr(r))(t.dpage(so.value)))(ae)})),ub(Hr.value)(t.slug+"pursx1/")])})};function ib(t,r,e,n,u){return function(a,i){var c=t.newXHR(),_=t.fixupUrl(u.url,c);if(c.open(u.method||"GET",_,!0,u.username,u.password),u.headers)try{for(var s=0,m;(m=u.headers[s])!=null;s++)c.setRequestHeader(m.field,m.value)}catch($){a($)}var A=function($){return function(){a(new Error($))}};return c.onerror=A(e),c.ontimeout=A(r),c.onload=function(){i({status:c.status,statusText:c.statusText,headers:c.getAllResponseHeaders().split(`\r
`).filter(function($){return $.length>0}).map(function($){var S=$.indexOf(":");return n($.substring(0,S))($.substring(S+2))}),body:c.response})},c.responseType=u.responseType,c.withCredentials=u.withCredentials,c.timeout=u.timeout,c.send(u.content),function($,S,o){try{c.abort()}catch(v){return S(v)}return o()}}}var Xf="application/json",fb="application/x-www-form-urlencoded";var lb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_b=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Np=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Wp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mb=function(t){return t instanceof Np?new p(fb):t instanceof Wp?new p(Xf):b.value};var Db=Er();var Gf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Kf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bb=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),db=function(t){if(t instanceof Gf||t instanceof Kf)return Db(t.value0);if(t instanceof bb)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var Hp=function(t){if(t instanceof Gf)return"Accept";if(t instanceof Kf)return"Content-Type";if(t instanceof bb)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var Ab=Rt(Nt),Bp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Up=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_i=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kb=function(t){if(t instanceof Bp)return"arraybuffer";if(t instanceof Up)return"blob";if(t instanceof qp)return"document";if(t instanceof _i||t instanceof zp)return"text";if(t instanceof Qf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},yb=function(t){return t instanceof _i?new p(Xf):b.value};var gb=function(){return new _i(Ab)}(),Cb=function(){return new Qf(Ab)}();var Sb=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function go(t){return new Error(t)}function si(t){return t.message}function vi(t){return function(){throw t}}var Tn=function(t){return t.throwError};var bu=function(t){return t.catchError};var Zf=function(t){var r=bu(t),e=t.MonadThrow0().Monad0(),n=y(e.Bind1().Apply0().Functor0()),u=q(e.Applicative0());return function(a){return r(n(ft.create)(a))(function(i){return u(lt.create(i))})}};var Gn=function(t){return t.state};var bi=function(t){var r=Gn(t);return function(e){return r(function(n){var u=e(n);return new V(u,u)})}};var En=function(t){return t.liftEffect};var SE=y(Ba);var Jp=function(t){return t};var Vp=function(t){return t};var uc=function(t){return function(r){return t(r)}},Eb=function(t){var r=y(t);return{map:function(e){return uc(r(SE(e)))}}};var jp=function(t){return{Applicative0:function(){return yi(t)},Bind1:function(){return Xp(t)}}},Xp=function(t){var r=At(t.Bind1()),e=q(t.Applicative0());return{bind:function(n){return function(u){return r(n)(en(function(a){return e(lt.create(a))})(function(a){var i=u(a);return i}))}},Apply0:function(){return $b(t)}}},$b=function(t){var r=Eb(t.Bind1().Apply0().Functor0());return{apply:Pe(jp(t)),Functor0:function(){return r}}},yi=function(t){return{pure:function(){var r=q(t.Applicative0());return function(e){return Jp(r(ft.create(e)))}}(),Apply0:function(){return $b(t)}}};var Fb=function(t){var r=jp(t);return{throwError:function(){var e=q(t.Applicative0());return function(n){return Jp(e(lt.create(n)))}}(),Monad0:function(){return r}}};var xb=function(t){var r=et(t);return function(e){var n=e.Bind1(),u=At(n),a=q(e.Applicative0()),i=Eb(n.Apply0().Functor0());return{alt:function(c){return function(_){return u(c)(function(s){if(s instanceof ft)return a(new ft(s.value0));if(s instanceof lt)return u(_)(function(m){if(m instanceof ft)return a(new ft(m.value0));if(m instanceof lt)return a(new lt(r(s.value0)(m.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[m.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[s.constructor.name])})}},Functor0:function(){return i}}}};var EE=Er();var Mb=function(t){return EE(Vp(t))};function Gp(t){return JSON.stringify(t)}function Kp(t){return function(r){return JSON.stringify(r,null,t)}}var wb=Bu;function Lb(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var Pb=function(t){return Lb(lt.create,ft.create,t)};var oc=function(t){return function(r){return function(e){return e.replace(t,r)}}};var Qp=function(t){return function(r){return r.join(t)}};function OE(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function Nb(t,r,e){try{return r(OE(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var ic=function(){return Gl(Nb)(h(b.value))(p.create)}();var WE=Jt(oa),Wb=y(Tr),HE=Re(sa)(Pn);var BE=function(t){return t};var Hb=function(){var t=function(n){if(n.value1 instanceof b)return ic(n.value0);if(n.value1 instanceof p)return WE(Wb(function(u){return function(a){return u+("="+a)}})(ic(n.value0)))(ic(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=Wb(Qp("&")),e=HE(t);return function(n){return r(e(BE(n)))}}();var qE=function(){function t(){}return t.value=new t,t}(),Ci=function(){function t(){}return t.value=new t,t}(),zE=function(){function t(){}return t.value=new t,t}(),Bb=function(){function t(){}return t.value=new t,t}(),Ub=function(){function t(){}return t.value=new t,t}(),qb=function(){function t(){}return t.value=new t,t}(),JE=function(){function t(){}return t.value=new t,t}(),VE=function(){function t(){}return t.value=new t,t}(),jE=function(){function t(){}return t.value=new t,t}(),XE=function(){function t(){}return t.value=new t,t}(),GE=function(){function t(){}return t.value=new t,t}(),KE=function(){function t(){}return t.value=new t,t}(),QE=function(){function t(){}return t.value=new t,t}(),YE=function(){function t(){}return t.value=new t,t}(),ZE=function(){function t(){}return t.value=new t,t}(),zb=function(){function t(){}return t.value=new t,t}();var t$=function(t){return t},r$={show:function(t){if(t instanceof qE)return"OPTIONS";if(t instanceof Ci)return"GET";if(t instanceof zE)return"HEAD";if(t instanceof Bb)return"POST";if(t instanceof Ub)return"PUT";if(t instanceof qb)return"DELETE";if(t instanceof JE)return"TRACE";if(t instanceof VE)return"CONNECT";if(t instanceof jE)return"PROPFIND";if(t instanceof XE)return"PROPPATCH";if(t instanceof GE)return"MKCOL";if(t instanceof KE)return"COPY";if(t instanceof QE)return"MOVE";if(t instanceof YE)return"LOCK";if(t instanceof ZE)return"UNLOCK";if(t instanceof zb)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Jb=en(_t(r$))(t$);var Xb=function(){var t=Df(Ml);return function(r){return bf(t(r))}}();var Gb=function(t){return t.value0};var Ne=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",a="Async",i="Bind",c="Bracket",_="Fork",s="Sequential",m="Map",A="Apply",$="Alt",S="Cons",o="Resume",v="Release",ut="Finalizer",j="Finalized",Pt="Forked",Ot="Fiber",Gt="Thunk";function rt(ct,ur,Fr,lr){this.tag=ct,this._1=ur,this._2=Fr,this._3=lr}function yr(ct){var ur=function(Fr,lr,kt){return new rt(ct,Fr,lr,kt)};return ur.tag=ct,ur}function fe(ct){return new rt(r,void 0)}function ot(ct){try{ct()}catch(ur){setTimeout(function(){throw ur},0)}}function z(ct,ur,Fr){try{return ur(Fr())}catch(lr){return ct(lr)}}function M(ct,ur,Fr){try{return ur(Fr)()}catch(lr){return Fr(ct(lr))(),fe}}var st=function(){var ct=1024,ur=0,Fr=0,lr=new Array(ct),kt=!1;function Z(){var fr;for(kt=!0;ur!==0;)ur--,fr=lr[Fr],lr[Fr]=void 0,Fr=(Fr+1)%ct,fr();kt=!1}return{isDraining:function(){return kt},enqueue:function(fr){var zt,Sr;ur===ct&&(Sr=kt,Z(),kt=Sr),lr[(Fr+ur)%ct]=fr,ur++,kt||Z()}}}();function Dt(ct){var ur={},Fr=0,lr=0;return{register:function(kt){var Z=Fr++;kt.onComplete({rethrow:!0,handler:function(fr){return function(){lr--,delete ur[Z]}}})(),ur[Z]=kt,lr++},isEmpty:function(){return lr===0},killAll:function(kt,Z){return function(){if(lr===0)return Z();var fr=0,zt={};function Sr(sr){zt[sr]=ur[sr].kill(kt,function(Wr){return function(){delete zt[sr],fr--,ct.isLeft(Wr)&&ct.fromLeft(Wr)&&setTimeout(function(){throw ct.fromLeft(Wr)},0),fr===0&&Z()}})()}for(var re in ur)ur.hasOwnProperty(re)&&(fr++,Sr(re));return ur={},Fr=0,lr=0,function(sr){return new rt(u,function(){for(var Wr in zt)zt.hasOwnProperty(Wr)&&zt[Wr]()})}}}}}var we=0,Nr=1,ku=2,wa=3,Ia=4,Te=5,To=6;function wc(ct,ur,Fr){var lr=0,kt=we,Z=Fr,fr=null,zt=null,Sr=null,re=null,sr=null,Wr=0,Qu=0,Ze=null,yu=!0;function gu(yt){for(var ht,Kt,rr;;)switch(ht=null,Kt=null,rr=null,kt){case ku:kt=Nr;try{Z=Sr(Z),re===null?Sr=null:(Sr=re._1,re=re._2)}catch(ce){kt=Te,fr=ct.left(ce),Z=null}break;case wa:ct.isLeft(Z)?(kt=Te,fr=Z,Z=null):Sr===null?kt=Te:(kt=ku,Z=ct.fromRight(Z));break;case Nr:switch(Z.tag){case i:Sr&&(re=new rt(S,Sr,re)),Sr=Z._2,kt=Nr,Z=Z._1;break;case r:Sr===null?(kt=Te,Z=ct.right(Z._1)):(kt=ku,Z=Z._1);break;case u:kt=wa,Z=z(ct.left,ct.right,Z._1);break;case a:kt=Ia,Z=M(ct.left,Z._1,function(ce){return function(){lr===yt&&(lr++,st.enqueue(function(){lr===yt+1&&(kt=wa,Z=ce,gu(lr))}))}});return;case e:kt=Te,fr=ct.left(Z._1),Z=null;break;case n:Sr===null?sr=new rt(S,Z,sr,zt):sr=new rt(S,Z,new rt(S,new rt(o,Sr,re),sr,zt),zt),Sr=null,re=null,kt=Nr,Z=Z._1;break;case c:Wr++,Sr===null?sr=new rt(S,Z,sr,zt):sr=new rt(S,Z,new rt(S,new rt(o,Sr,re),sr,zt),zt),Sr=null,re=null,kt=Nr,Z=Z._1;break;case _:kt=wa,ht=wc(ct,ur,Z._2),ur&&ur.register(ht),Z._1&&ht.run(),Z=ct.right(ht);break;case s:kt=Nr,Z=Vk(ct,ur,Z._1);break}break;case Te:if(Sr=null,re=null,sr===null)kt=To,Z=zt||fr||Z;else switch(ht=sr._3,rr=sr._1,sr=sr._2,rr.tag){case n:zt&&zt!==ht&&Wr===0?kt=Te:fr&&(kt=Nr,Z=rr._2(ct.fromLeft(fr)),fr=null);break;case o:zt&&zt!==ht&&Wr===0||fr?kt=Te:(Sr=rr._1,re=rr._2,kt=ku,Z=ct.fromRight(Z));break;case c:Wr--,fr===null&&(Kt=ct.fromRight(Z),sr=new rt(S,new rt(v,rr._2,Kt),sr,ht),(zt===ht||Wr>0)&&(kt=Nr,Z=rr._3(Kt)));break;case v:sr=new rt(S,new rt(j,Z,fr),sr,zt),kt=Nr,zt&&zt!==ht&&Wr===0?Z=rr._1.killed(ct.fromLeft(zt))(rr._2):fr?Z=rr._1.failed(ct.fromLeft(fr))(rr._2):Z=rr._1.completed(ct.fromRight(Z))(rr._2),fr=null,Wr++;break;case ut:Wr++,sr=new rt(S,new rt(j,Z,fr),sr,zt),kt=Nr,Z=rr._1;break;case j:Wr--,kt=Te,Z=rr._1,fr=rr._2;break}break;case To:for(var Mr in Ze)Ze.hasOwnProperty(Mr)&&(yu=yu&&Ze[Mr].rethrow,ot(Ze[Mr].handler(Z)));Ze=null,zt&&fr?setTimeout(function(){throw ct.fromLeft(fr)},0):ct.isLeft(Z)&&yu&&setTimeout(function(){if(yu)throw ct.fromLeft(Z)},0);return;case we:kt=Nr;break;case Ia:return}}function xr(yt){return function(){if(kt===To)return yu=yu&&yt.rethrow,yt.handler(Z)(),function(){};var ht=Qu++;return Ze=Ze||{},Ze[ht]=yt,function(){Ze!==null&&delete Ze[ht]}}}function Tt(yt,ht){return function(){if(kt===To)return ht(ct.right(void 0))(),function(){};var Kt=xr({rethrow:!1,handler:function(){return ht(ct.right(void 0))}})();switch(kt){case we:zt=ct.left(yt),kt=To,Z=zt,gu(lr);break;case Ia:zt===null&&(zt=ct.left(yt)),Wr===0&&(kt===Ia&&(sr=new rt(S,new rt(ut,Z(yt)),sr,zt)),kt=Te,Z=null,fr=null,gu(++lr));break;default:zt===null&&(zt=ct.left(yt)),Wr===0&&(kt=Te,Z=null,fr=null)}return Kt}}function Xt(yt){return function(){var ht=xr({rethrow:!1,handler:yt})();return kt===we&&gu(lr),ht}}return{kill:Tt,join:Xt,onComplete:xr,isSuspended:function(){return kt===we},run:function(){kt===we&&(st.isDraining()?gu(lr):st.enqueue(function(){gu(lr)}))}}}function Jk(ct,ur,Fr,lr){var kt=0,Z={},fr=0,zt={},Sr=new Error("[ParAff] Early exit"),re=null,sr=t;function Wr(xr,Tt,Xt){var yt=Tt,ht=null,Kt=null,rr=0,Mr={},ce,Eo;t:for(;;)switch(ce=null,yt.tag){case Pt:if(yt._3===t&&(ce=Z[yt._1],Mr[rr++]=ce.kill(xr,function(jk){return function(){rr--,rr===0&&Xt(jk)()}})),ht===null)break t;yt=ht._2,Kt===null?ht=null:(ht=Kt._1,Kt=Kt._2);break;case m:yt=yt._2;break;case A:case $:ht&&(Kt=new rt(S,ht,Kt)),ht=yt,yt=yt._1;break}if(rr===0)Xt(ct.right(void 0))();else for(Eo=0,ce=rr;Eo<ce;Eo++)Mr[Eo]=Mr[Eo]();return Mr}function Qu(xr,Tt,Xt){var yt,ht,Kt,rr,Mr,ce;ct.isLeft(xr)?(yt=xr,ht=null):(ht=xr,yt=null);t:for(;;){if(Kt=null,rr=null,Mr=null,ce=null,re!==null)return;if(Tt===null){lr(yt||ht)();return}if(Tt._3!==t)return;switch(Tt.tag){case m:yt===null?(Tt._3=ct.right(Tt._1(ct.fromRight(ht))),ht=Tt._3):Tt._3=yt;break;case A:if(Kt=Tt._1._3,rr=Tt._2._3,yt){if(Tt._3=yt,Mr=!0,ce=fr++,zt[ce]=Wr(Sr,yt===Kt?Tt._2:Tt._1,function(){return function(){delete zt[ce],Mr?Mr=!1:Xt===null?Qu(yt,null,null):Qu(yt,Xt._1,Xt._2)}}),Mr){Mr=!1;return}}else{if(Kt===t||rr===t)return;ht=ct.right(ct.fromRight(Kt)(ct.fromRight(rr))),Tt._3=ht}break;case $:if(Kt=Tt._1._3,rr=Tt._2._3,Kt===t&&ct.isLeft(rr)||rr===t&&ct.isLeft(Kt))return;if(Kt!==t&&ct.isLeft(Kt)&&rr!==t&&ct.isLeft(rr))yt=ht===Kt?rr:Kt,ht=null,Tt._3=yt;else if(Tt._3=ht,Mr=!0,ce=fr++,zt[ce]=Wr(Sr,ht===Kt?Tt._2:Tt._1,function(){return function(){delete zt[ce],Mr?Mr=!1:Xt===null?Qu(ht,null,null):Qu(ht,Xt._1,Xt._2)}}),Mr){Mr=!1;return}break}Xt===null?Tt=null:(Tt=Xt._1,Xt=Xt._2)}}function Ze(xr){return function(Tt){return function(){delete Z[xr._1],xr._3=Tt,Qu(Tt,xr._2._1,xr._2._2)}}}function yu(){var xr=Nr,Tt=Fr,Xt=null,yt=null,ht,Kt;t:for(;;)switch(ht=null,Kt=null,xr){case Nr:switch(Tt.tag){case m:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt(m,Tt._1,t,t),Tt=Tt._2;break;case A:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt(A,t,Tt._2,t),Tt=Tt._1;break;case $:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt($,t,Tt._2,t),Tt=Tt._1;break;default:Kt=kt++,xr=Te,ht=Tt,Tt=new rt(Pt,Kt,new rt(S,Xt,yt),t),ht=wc(ct,ur,ht),ht.onComplete({rethrow:!1,handler:Ze(Tt)})(),Z[Kt]=ht,ur&&ur.register(ht)}break;case Te:if(Xt===null)break t;Xt._1===t?(Xt._1=Tt,xr=Nr,Tt=Xt._2,Xt._2=t):(Xt._2=Tt,Tt=Xt,yt===null?Xt=null:(Xt=yt._1,yt=yt._2))}for(sr=Tt,Kt=0;Kt<kt;Kt++)Z[Kt].run()}function gu(xr,Tt){re=ct.left(xr);var Xt;for(var yt in zt)if(zt.hasOwnProperty(yt)){Xt=zt[yt];for(yt in Xt)Xt.hasOwnProperty(yt)&&Xt[yt]()}zt=null;var ht=Wr(xr,sr,Tt);return function(Kt){return new rt(a,function(rr){return function(){for(var Mr in ht)ht.hasOwnProperty(Mr)&&ht[Mr]();return fe}})}}return yu(),function(xr){return new rt(a,function(Tt){return function(){return gu(xr,Tt)}})}}function Vk(ct,ur,Fr){return new rt(a,function(lr){return function(){return Jk(ct,ur,Fr,lr)}})}return rt.EMPTY=t,rt.Pure=yr(r),rt.Throw=yr(e),rt.Catch=yr(n),rt.Sync=yr(u),rt.Async=yr(a),rt.Bind=yr(i),rt.Bracket=yr(c),rt.Fork=yr(_),rt.Seq=yr(s),rt.ParMap=yr(m),rt.ParApply=yr(A),rt.ParAlt=yr($),rt.Fiber=wc,rt.Supervisor=Dt,rt.Scheduler=st,rt.nonCanceler=fe,rt}(),Qb=Ne.Pure,Yb=Ne.Throw;function Zb(t){return function(r){return Ne.Catch(t,r)}}function td(t){return function(r){return r.tag===Ne.Pure.tag?Ne.Pure(t(r._1)):Ne.Bind(r,function(e){return Ne.Pure(t(e))})}}function rd(t){return function(r){return Ne.Bind(t,r)}}var ed=Ne.Sync;var hi=Ne.Async;function nd(t,r){return function(){return Ne.Fiber(t,null,r)}}var e$=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return Ne.Async(function(u){return function(){var a=t(n,u(e()));return function(){return Ne.Sync(function(){return e(r(n,a))})}}})}}(),n$=Ne.Seq;var d$=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var A$=ir(U);var r_={map:td};var k$=function(){var t=function(n){if(n instanceof ft)return n.value0;if(n instanceof lt)return xu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof lt)return n.value0;if(n instanceof ft)return xu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof lt)return!0;if(n instanceof ft)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:lt.create,right:ft.create}}(),y$=function(t){return nd(k$,t)},g$=function(t){return function(){var e=y$(t)();return e.run(),e}},e_=function(t){return A$(g$(t))};var n_={Applicative0:function(){return fc},Bind1:function(){return u_}},u_={bind:rd,Apply0:function(){return fd(0)}},fc={pure:Qb,Apply0:function(){return fd(0)}},fd=d$("applyAff","Effect.Aff",function(){return{apply:Pe(n_),Functor0:function(){return r_}}});var C$=q(fc);var a_={liftEffect:ed,Monad0:function(){return n_}};var h$={throwError:Yb,Monad0:function(){return n_}},cd={catchError:Zb,MonadThrow0:function(){return h$}};var ld=h(C$(void 0));var pd=function(t){return hi(function(r){return function(){var n=t(function(u){return r(lt.create(u))()},function(u){return r(ft.create(u))()});return function(u){return hi(function(a){return function(){return n(u,function(c){return a(lt.create(c))()},function(c){return a(ft.create(c))()}),ld}})}}})};function lc(t){return Object.prototype.toString.call(t).slice(8,-1)}var _d=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var sd=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Fe=function(t){return t};var pc=isFinite;var o_=Math.floor;var Si=function(t){return function(r){return t%r}};var vd=In(Lo),md=ru(Lo);var _c=function(){return sd(p.create)(b.value)}(),w$=function(t){if(!pc(t))return 0;if(t>=Fe(vd))return vd;if(t<=Fe(md))return md;if(Br)return pe(0)(_c(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var f_=function(t){return w$(o_(t))};var W$=_t(qe),H$=_t(sn);var c_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hd=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),B$=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),U$=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Xu=Q,q$=Q;var vc=function(t){if(t instanceof c_)return t.value0;if(t instanceof B$)return"Error at array index "+(H$(t.value0)+(": "+vc(t.value1)));if(t instanceof U$)return"Error at property "+(W$(t.value0)+(": "+vc(t.value1)));if(t instanceof hd)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var l_=function(t){var r=Tn(Fb(t));return function(e){return r(Xb(e))}};var Sd=function(t){var r=q(yi(t)),e=l_(t);return function(n){return function(u){if(lc(u)===n)return r(q$(u));if(Br)return e(new hd(n,lc(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var p_=q(yi(Oe)),J$=l_(Oe),Fa=Sd(Oe),Td=Ht(xb(Gv)(Oe)),V$=Wi(Xp(Oe)),mc=y(Tr),j$=Su(Ft)(vn),X$=St(Mn),G$=eu(ke),K$=y(Ar),Q$=Be(r_),Y$=Zf(cd),Z$=q(fc);var __=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),s_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),v_=function(){function t(){}return t.value=new t,t}(),m_=function(){function t(){}return t.value=new t,t}(),D_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ed=function(t){return function(r){var e=function(m){return m===""?p_(wb):en(function(A){return J$(c_.create(A))})(p_)(Pb(m))},n=function(){if(r.responseFormat instanceof Bp)return Fa("ArrayBuffer");if(r.responseFormat instanceof Up)return Fa("Blob");if(r.responseFormat instanceof qp)return function(m){return Td(Fa("Document")(m))(Td(Fa("XMLDocument")(m))(Fa("HTMLDocument")(m)))};if(r.responseFormat instanceof _i)return V$(function(m){return r.responseFormat.value0(e(m))})(Fa("String"));if(r.responseFormat instanceof zp)return Fa("String");if(r.responseFormat instanceof Qf)return h(r.responseFormat.value0(p_(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(m){if(m instanceof lb)return new ft(m.value0(Xu));if(m instanceof pb)return new ft(Xu(m.value0));if(m instanceof _b)return new ft(Xu(m.value0));if(m instanceof sb)return new ft(Xu(m.value0));if(m instanceof vb)return new ft(Xu(m.value0));if(m instanceof Np)return Nc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(mc(Xu)(Hb(m.value0)));if(m instanceof Wp)return new ft(Xu(Gp(m.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[m.constructor.name])},a=function(m){return function(A){return m instanceof p&&!j$($o(X$)(Hp)(m.value0))(A)?vf(A)(m.value0):A}},i=function(m){return a(mc(Kf.create)(G$(mb)(m)))(a(mc(Gf.create)(yb(r.responseFormat)))(r.headers))},c=function(m){return{method:Jb(r.method),url:r.url,headers:K$(function(A){return{field:Hp(A),value:db(A)}})(i(r.content)),content:m,responseType:kb(r.responseFormat),username:yo(r.username),password:yo(r.password),withCredentials:r.withCredentials,timeout:pe(0)(mc(function(A){return A})(r.timeout))}},_=function(m){return Q$(Y$(pd(ib(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",Sb.create,c(m)))))(function(A){if(A instanceof ft){var $=Mb(n(A.value0.body));if($ instanceof lt)return new lt(new s_(Gb($.value0),A.value0));if($ instanceof ft)return new ft({body:$.value0,headers:A.value0.headers,status:A.value0.status,statusText:A.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[$.constructor.name])}if(A instanceof lt)return new lt(function(){var S=si(A.value0),o=S==="AffjaxTimeoutErrorMessageIdent";if(o)return v_.value;var v=S==="AffjaxRequestFailedMessageIdent";return v?m_.value:new D_(A.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[A.constructor.name])})};if(r.content instanceof b)return _(yo(b.value));if(r.content instanceof p){var s=u(r.content.value0);if(s instanceof ft)return _(yo(new p(s.value0)));if(s instanceof lt)return Z$(new lt(new __(s.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[s.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},b_=function(t){if(t instanceof __)return"There was a problem with the request content: "+t.value0;if(t instanceof s_)return"There was a problem with the response body: "+vc(t.value0);if(t instanceof v_)return"There was a problem making the request: timeout";if(t instanceof m_)return"There was a problem making the request: request failed";if(t instanceof D_)return"There was a problem making the request: "+si(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Gu=function(){return{method:new lt(Ci.value),url:"/",headers:[],content:b.value,username:b.value,password:b.value,withCredentials:!1,responseFormat:Cb,timeout:b.value}}();var d_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var Fd=Ed(d_);var eF=At(u_),xd=En(a_),Md=ie(),nF=qr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Md(oe()(Md(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),A_=Xe(zn),Ei=q(nr),wd=It(Kr),Dc=Ht(Pr),k_=X($r),Id=It(FD),uF=lu(ai),aF=Ru(Ce),oF=wr(Ft)(d),Ld=mr(Ir),iF=It(Gr);var Od=function(){function t(){}return t.value=new t,t}(),y_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fF=function(){return tt.value}(),Pd="Click to get some random user data.",cF=function(t){return br(h(function(){return t(Od.value)(),e_(eF(Fd({method:new lt(Ci.value),url:"https://randomuser.me/api/",headers:Gu.headers,content:Gu.content,username:Gu.username,password:Gu.password,withCredentials:Gu.withCredentials,responseFormat:gb,timeout:Gu.timeout}))(function(e){if(e instanceof lt)return xd(t(new y_("GET /api response failed to decode: "+b_(e.value0))));if(e instanceof ft)return xd(t(new y_(Kp(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},Rd=function(t){return nF(fF)({code:pr(Rr([Or([Qt(wp)])])),result:pr(io(function(r){return function(e){var n=A_(function(i){return i instanceof Od?new p(new lt(void 0)):i instanceof y_?new p(new ft(i.value0)):b.value})(e),u=A_(function(i){return i instanceof ft?new p(i.value0):b.value})(n),a=A_(function(i){return i instanceof lt?new p(void 0):b.value})(n);return cr([cr([he(Ei(wd(dr.value)(cF(r))))([Ge(Dc(Ei(Pd))(Dc(k_(a)("Loading..."))(k_(u)(Pd))))])]),Nf(Dc(Ei(Id(De.value)("display: none;")))(k_(uF(aF(function(i){return function(c){return new V(i&&!1,function(){return i?new p(void 0):b.value}())}})(!0)(u)))(Id(De.value)("display: block;"))))([Rr([Or([Ge(Dc(Ei(""))(u))])])])])}})),next:oF(Ei)([wd(dr.value)(br(function(r){return Ld(Ld(zr(r))(t.dpage(vo.value)))(ae)})),iF(Hr.value)(t.slug+"pursx2/")])})};var g_=function(){function t(){}return t.value=new t,t}(),Nd={attr:function(t){return function(r){return f({key:"controls",value:E(r)})}}};var $i=function(){function t(){}return t.value=new t,t}();var bc={attr:function(t){return function(r){return f({key:"input",value:G(r)})}}};var dc=function(){function t(){}return t.value=new t,t}();var C_={attr:function(t){return function(r){return f({key:"keyup",value:G(r)})}}};var h_=function(){function t(){}return t.value=new t,t}();var Bd={attr:function(t){return function(r){return f({key:"src",value:E(r)})}}};var S_=function(){function t(){}return t.value=new t,t}(),Ud={attr:function(t){return function(r){return f({key:"width",value:E(r)})}}};var qd=C(),zd=function(t){return function(r){return new g(L("p")(t)(qd(I(qd(w(P)(r))))))}},T_=zd(k(d));var Jd=C(),E_=function(t){return function(r){return new g(L("source")(t)(Jd(I(Jd(w(P)(r))))))}};var Vd=C(),$_=function(t){return function(r){return new g(L("video")(t)(Vd(I(Vd(w(P)(r))))))}};function Ac(t){return function(){return t.value}}function F_(t){return function(){return t.valueAsNumber}}function Xd(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var a=n;a!=null;){var i=Object.getPrototypeOf(a),c=i.constructor.name;if(c===e)return r(n);if(c==="Object")return t;a=i}return t}var at=function(t){return function(r){return Xd(b.value,p.create,t,r)}};var kc=at("HTMLInputElement");function x_(t){return t.code}var M_=at("KeyboardEvent");var Qd=y($r),$F=It(bc),FF=un(ye)(an),xF=At(ke),MF=Hi(_a),wF=Ht(Pr),Yd=q(nr),IF=It(Hf);var yc=function(){var t=wF(Yd(IF(Ta.value)("range"))),r=Qd(function(e){return $F($i.value)(br(function(n){return FF(xF(Vf(n))(kc))(MF(F_)(e))}))});return function(e){return t(r(e))}}();var LF=function(t){return Qd(It(t)(dr.value))},gc=function(t){var r=LF(t);return function(e){return r(Yd(e))}};var tA=ie(),PF=qr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(tA(oe()(tA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),OF=Lf()(eo({reflectSymbol:function(){return"buttonClicked"}})()()(eo({reflectSymbol:function(){return"sliderMoved"}})()()($f)()())()()),RF=gc(co),w_=Ht(Pr),Fi=q(nr),rA=y($r),eA=et(ea),NF=_t(sn),WF=Ou(Ce),HF=_t(Po),BF=wr(Ft)(d),UF=It(Kr),nA=mr(Ir),qF=It(Gr),zF=function(){return tt.value}(),uA=function(t){return PF(zF)({code:pr(Rr([Or([Qt(Mp)])])),result:pr(OF(tt.value)(function(r){return function(e){return cr([he(RF(r.buttonClicked(void 0)))([Qt("Click")]),cr([Ge(w_(Fi("Val: 0"))(rA(function(){var n=eA("Val: ");return function(u){return n(NF(u))}}())(WF(function(n){return function(u){return 1+n|0}})(-1)(w_(Fi(void 0))(e.buttonClicked)))))]),cr([su(yc(Fi(r.sliderMoved)))([]),cr([Ge(w_(Fi("Val: 50.0"))(rA(function(){var n=eA("Val: ");return function(u){return n(HF(u))}}())(e.sliderMoved)))])])])}})),next:BF(Fi)([UF(dr.value)(br(function(r){return nA(nA(zr(r))(t.dpage(Do.value)))(ae)})),qF(Hr.value)(t.slug+"effects/")])})};var aA=ie(),VF=qr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(aA(oe()(aA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),jF=Je(ze),xi=Ht(Pr),$n=q(nr),oA=wr(Ft)(d),XF=It($D),GF=It(bc),iA=un(ye)(an),KF=At(ke),QF=Hi(_a),YF=It(C_),ZF=Yn(ye),I_=It(xD),Cc=It(Kr),tx=y($r),rx=ya(Ce),ex=It(lo),nx=Xe(zn),ux=Ru(Ce),fA=mr(Ir),ax=It(Gr);var ox=function(){function t(){}return t.value=new t,t}(),L_=function(){function t(){}return t.value=new t,t}(),cA=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ix=function(){return tt.value}(),lA=function(t){return VF(ix)({code:pr(Rr([Or([Qt(xp)])])),result:pr(io(function(r){return jF(function(e){return xi($n(ox.value))(e)})(function(e){return cr([cr([su(oA($n)([XF(De.value)("border-style:solid;border-width: 1px;border-color: black;"),GF($i.value)(br(function(n){return iA(KF(Vf(n))(kc))(QF(Ac)(function(u){return r(cA.create(u))}))})),YF(dc.value)(br(function(n){return iA(M_(n))(function(u){return ZF(x_(u)==="Enter")(r(L_.value))})}))]))([]),he(xi($n(I_(De.value)("margin: 5px;")))($n(Cc(dr.value)(br(h(r(L_.value)))))))([Qt("Add")])]),zu(tx(function(n){return rx(qu(function(u){return function(a){return xi($n(Uu(cr([Vu($n(ex(De.value)("margin: 5px;")))([Qt(n)]),he(xi($n(I_(De.value)("margin: 5px;")))($n(Cc(dr.value)(br(h(u(gD)))))))([Qt("Prioritize")]),he(xi($n(I_(De.value)("margin: 5px;")))($n(Cc(dr.value)(br(h(u(Dp)))))))([Qt("Delete")])]))))(a)}}))})(nx(function(n){return n.value0?new p(n.value1):b.value})(ux(function(n){return function(u){return u instanceof cA?new V(u.value0,new V(!1,u.value0)):u instanceof L_?new V(n,new V(!0,n)):new V("",new V(!1,""))}})("")(e))))])})})),next:oA($n)([Cc(dr.value)(br(function(r){return fA(fA(zr(r))(t.dpage(Ao.value)))(ae)})),ax(Hr.value)(t.slug+"portals/")])})};var pA=ie(),cx=qr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(pA(oe()(pA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),lx=wr(Ft)(d),px=q(nr),_x=It(Kr),_A=mr(Ir),sx=It(Gr),vx=function(){return tt.value}(),sA=function(t){return cx(vx)({code:pr(Rr([Or([Qt(Fp)])])),result:pr(cr([Qt("Hello world")])),next:lx(px)([_x(dr.value)(br(function(r){return _A(_A(zr(r))(t.dpage(_o.value)))(ae)})),sx(Hr.value)(t.slug+"component/")])})};var Dx=qr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(oe()(Ur)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),bx=wr(Ft)(d),dx=q(nr),Ax=It(Kr),vA=mr(Ir),kx=It(Gr),yx=function(){return tt.value}(),mA=function(t){return Dx(yx)({next:bx(dx)([Ax(dr.value)(br(function(r){return vA(vA(zr(r))(t.dpage(po.value)))(ae)})),kx(Hr.value)(t.slug+"hello/")])})};var DA=ie(),Cx=qr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(DA(oe()(DA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),hx=Je(ze),Sx=Ht(Pr),ho=q(nr),Tx=TD(),Ex=y(uo),P_=wr(Ft)(d),$x=It(Nd),Fx=It(Ud),xx=It(Bd),Mx=It(OD),bA=Ym()(),kA=ap()()()()(),wx=kA({reflectType:function(){return 1}}),Ix=kA({reflectType:function(){return 0}}),Lx=Ou(Ce),Px=q(ra),dA=It(Kr),AA=mr(Ir),Ox=It(Gr);var Rx=function(){return tt.value}(),yA=function(t){return Cx(Rx)({code:pr(Rr([Or([Qt($p)])])),result:pr(zu(qu(function(r){return hx(Sx(ho(void 0)))(function(e){return ho(Uu(Tx(Ex(function(n){return $_(P_(ho)([$x(g_.value)("true"),Fx(S_.value)("250")]))([E_(P_(ho)([xx(h_.value)(n),Mx(Ta.value)("video/mp4")]))([])])})(bA("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(bA("https://www.w3schools.com/jsref/movie.mp4")(Qm))))(function(n){return function(u){var a=wx(tt.value)(n),i=Ix(tt.value)(n),c=function(s){return Lx(function(m){return function(A){return!m}})(s)(e)},_=function(){var s=Rf(function(m){return m?i:a});return function(m){return pi(Px(s(c(m))))}}();return cr([he(ho(dA(dr.value)(br(h(r(void 0))))))([Qt("Switch videos")]),cr([_(!0),_(!1)])])}})))})}))),next:P_(ho)([dA(dr.value)(br(function(r){return AA(AA(zr(r))(t.dpage(ko.value)))(ae)})),Ox(Hr.value)(t.slug+"ssr/")])})};var gA=ie(),Wx=qr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(gA(oe()(gA(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Hx=ZD({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Ur),Bx=wr(Ft)(d),Ux=q(nr),qx=It(Kr),CA=mr(Ir),zx=It(Gr),Jx=function(){return tt.value}(),Vx=function(){return tt.value}(),hA=function(t){return Wx(Jx)({code:pr(Rr([Or([Qt(Ep)])])),result:pr(Hx(Vx)),next:Bx(Ux)([qx(dr.value)(br(function(r){return CA(CA(zr(r))(t.dpage(mo.value)))(ae)})),zx(Hr.value)(t.slug+"events1/")])})};var TA=ie(),EA=oe(),$A=TA(Ur),Xx=Sp({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(TA(EA($A({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Mi=q(nr),Gx=qr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(EA($A({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),Kx=It(ED),Qx=It(co),Yx=Ht(Pr),Zx=X($r),tM=lu(ai),rM=wr(Ft)(d),eM=It(Kr),SA=mr(Ir),nM=It(Gr),uM=function(){return tt.value}(),aM=function(){return tt.value}(),FA=function(t){return Xx(tt.value)(uM)({code:pr(Rr([Or([Qt(Tp)])])),result:pr(zu(qu(function(r){return function(e){return Mi(Uu(Gx(aM)({myli:Mi(Kx(De.value)("background-color:rgb(200,240,210);")),somethingNew:pr(he(Mi(Qx(dr.value)(r(new p(void 0)))))([Ge(Yx(Zx(tM(e))("Thanks for clicking me!"))(Mi("I was dynamically inserted")))]))})))}}))),next:rM(Mi)([eM(dr.value)(br(function(r){return SA(SA(zr(r))(t.dpage(bo.value)))(ae)})),nM(Hr.value)(t.slug+"events2/")])})};var O_=()=>document.documentElement.querySelector("[data-deku-root]");var R_=t=>()=>{t.hydrating=!0},N_=t=>()=>{t.hydrating=!1},xA=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(a=>()=>t(r.dynFamily)(i=>()=>{for(var c=0,_=0,s;_<n.childNodes.length;){if(n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i){_+=1;break}_++}let m=$=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[$]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[$])):n.insertBefore(e.units[r.id].main,n.childNodes[$])};for(;_<n.childNodes.length;){var A;if((A=n.childNodes[_].$dekuId)&&t(e.units[A].dynFamily)(S=>()=>t(e.units[A].pos)(v=>()=>i===S&&a<=v?(m(_),!0):!1)())())return!0;if(c===a||n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i+"%-%")return m(_),!0;n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue.substring(0,3)==="%-%"&&!s&&(s=n.childNodes[_].nodeValue+"%-%"),s||c++,n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue===s&&(s=void 0,c++),_++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(i=>()=>(e.units[r.id].main?e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[i].endBeacon):(e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon),e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(i=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[i].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[i].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},W_=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),a;a=u.nextNode();)a.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[a.nodeValue.substring(3)]=a)}e(document.documentElement)},MA=t=>r=>e=>n=>()=>{var u,a,i=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(i),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(a=n.allBeacons[`${e.id}%-%`])?(n.units[i]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:a},u.$dekuId=i,a.$dekuId=i,!0):!1)()){let _=document.createComment(`%-%${e.id}`),s=document.createComment(`%-%${e.id}%-%`);n.units[i]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:_,endBeacon:s},_.$dekuId=i,s.$dekuId=i}};var wA=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),IA=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),LA=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),PA=t=>r=>e=>n=>()=>{var u,a=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(a),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${a}"]`))?(n.units[a]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=a,!0):!1)()){let c=document.createElement(e.tag);n.units[a]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:c},c.$dekuId=a}},OA=t=>r=>e=>n=>u=>()=>{var a=n.id,i;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(a),!t(n.parent)(_=>()=>{if(u.hydrating&&r&&(i=document.documentElement.querySelector(`[data-deku-ssr="${_}"]`))){for(var s=0;s<i.childNodes.length;s++){let S=a.split("@-@");if(i.childNodes[s].nodeType===8&&i.childNodes[s].nodeValue===S[0]){s=s-1;var m=s===-1,A=s>=0&&i.childNodes[s].nodeType===8;m&&i.prepend(document.createTextNode("")),A&&i.insertBefore(document.createTextNode(""),i.childNodes[s+1]);break}}let $=i.childNodes[s];return u.units[a]={main:$,pos:n.pos,parent:n.parent,scope:n.scope},$.$dekuId=a,!0}return!1})()){let _=document.createTextNode("");u.units[a]={main:_,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},_.$dekuId=a}};function H_(){return{units:{},scopes:{},allBeacons:{}}}var RA=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},NA=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var a=i=>u(i)();e.units[n].main.addEventListener(r.key,a),e.units[n].listeners[r.key]=a}}},WA=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},HA=t=>r=>e=>n=>u=>()=>{var a,i,c=n.id,_=n.html,s=n.verb,m=n.cache,A=n.parent,$=n.scope,S=n.pxScope;let o=t(n.parent)(()=>()=>u.hydrating&&r&&(a=document.documentElement.querySelector(`[data-deku-ssr="${c}"]`))?(u.units[c]={listeners:{},pos:n.pos,scope:$,parent:A,main:a},a.$dekuId=c,!0):!1)();if(!o){let ut=Object.entries(m);for(var v=0;v<ut.length;v++){let j=ut[v][0];ut[v][1]===!0?_=_.replace(s+j+s,'data-deku-attr-internal="'+j+'"'):_=_.replace(s+j+s,'<span style="display:contents;" data-deku-elt-internal="'+j+'"></span>')}i=document.createElement("div"),i.innerHTML=_.trim(),u.units[c]={listeners:{},pos:n.pos,scope:$,parent:A,main:i.firstChild},i.firstChild.$dekuId=c}u.scopes[$]||(u.scopes[$]=[]),u.scopes[$].push(c),i||(i=a),i.querySelectorAll("[data-deku-attr-internal]").forEach(function(ut){var j=ut.getAttribute("data-deku-attr-internal");let Pt=j+"@!%"+S;u.units[Pt]={listeners:{},main:ut,scope:$},u.scopes[$].push(Pt)}),i.querySelectorAll("[data-deku-elt-internal]").forEach(function(ut){var j=ut.getAttribute("data-deku-elt-internal");let Pt=j+"@!%"+S;u.units[j+"@!%"+S]={listeners:{},main:ut,scope:$},u.scopes[$].push(Pt)}),o||u.units[c].main.remove()},BA=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},B_=t=>r=>e=>n=>()=>{let u=(o,v,ut)=>{if(n.units[o].startBeacon){var j=n.units[o].startBeacon,Pt=j.nextSibling;for(n.units[v].main.insertBefore(j,ut),j=Pt;j&&j!==n.units[o].endBeacon;)Pt=j.nextSibling,n.units[v].main.insertBefore(j,ut),j=Pt}else n.units[v].main.insertBefore(n.units[o].main,ut)},a=[];a.push(e);for(var i=0;i<a.length;i++){let o=a[i],v=o.id,ut=o.parent;n.units[v].containingScope=o.scope;var c=void 0;r(o.pos)(Pt=>()=>(c=Pt,!0))(),c===void 0&&(c=Number.MAX_VALUE);let j=n.units[ut].main.childNodes;for(var _=0,s=!1,m=0;_<j.length;){var A;if(A=j[_].$dekuId){if(r(o.dynFamily)(Ot=>()=>s?!1:n.units[A].endBeacon===j[_]&&Ot===A?(n.units[v].pos=t(m),u(v,ut,j[_]),!0):!1)()){s=!0;break}if(n.units[A].dynFamily!==n.units[v].dynFamily){_++;continue}if(s){_++;continue}m===c?(u(v,ut,j[_]),m++,s=!0):n.units[A].endBeacon!==j[_]&&(n.units[A].pos=t(m),m++)}_++}if(s)return;if(n.units[v].main)n.units[ut].main.appendChild(n.units[v].main);else{var $=n.units[v].startBeacon,S=$.nextSibling;for(n.units[ut].main.appendChild($),$=S;$&&$!==n.units[v].endBeacon;)S=$.nextSibling,n.units[ut].main.appendChild($),$=S}}},UA=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let a=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(a.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,a.appendChild(n),n=u}}},U_=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},qA=U_;var _M=Oo(Ui),sM=Le();var zA=function(t){return t};var vM=1,q_=2147483647,mM=function(){return q_-1|0}(),z_=function(t){var r=function(e){return function(n){return function(u){var a=n-e|0,i=_M(u)(a),c=i<e;return c?i+n|0:i}}};return r(vM)(mM)(t)};var DM=0,bM=48271,JA=function(t){return function(r){return sM(_c(Si(Fe(bM)*Fe(r)+Fe(t))(Fe(q_))))}},VA=JA(DM);var hM=function(){function t(i){this.fn=i}var r={},e=function(i,c){this.head=i,this.tail=c};function n(i){return new e(i,r)}function u(i){return function(c){return new e(i,c)}}function a(i){for(var c=[],_=i;_!==r;)c.push(_.head),_=_.tail;return c}return function(i){return function(c){return function(_){var s=function(A,$){return i(c(u)(_(A)))($)},m=function(A,$,S){if($===0)return A;var o=S[$-1];return new t(function(){var v=m(s(o,A),$-1,S);return v})};return function(A){for(var $=c(n)(_(A[A.length-1])),S=m($,A.length-1,A);S instanceof t;)S=S.fn();return c(a)(S)}}}}}();var wi=function(t){var r=y(t);return{map:function(e){return function(n){return function(u){return r(function(a){return new V(e(a.value0),a.value1)})(n(u))}}}}};var j_=function(t){return{Applicative0:function(){return Tc(t)},Bind1:function(){return hc(t)}}},hc=function(t){var r=At(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(a){var i=n(a.value0);return i(a.value1)})}}},Apply0:function(){return Sc(t)}}},Sc=function(t){var r=wi(t.Bind1().Apply0().Functor0());return{apply:Pe(j_(t)),Functor0:function(){return r}}},Tc=function(t){var r=q(t.Applicative0());return{pure:function(e){return function(n){return r(new V(e,n))}},Apply0:function(){return Sc(t)}}};var Ec=function(t){var r=q(t.Applicative0()),e=j_(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var tk=function(t){return function(r){var e=t(r);return e.value1}},rk=function(t){return function(r){var e=t(r);return e.value0}};var HM=Ec(Oe),BM=Gn(HM);var UM=wi(au);var qM=rn(wo);var zM=de(wo);var JM=function(t){return t};var VM=function(){var t=function(r){return new V(zA(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=VA(r.newSeed),e}())};return BM(t)}();var uk=UM,$c=y(uk);var G_=function(t){return rk(JM(t))};var ak=Sc(Oe),jM=Jt(ak),nk=function(t){return function(r){var e=Fe(r),n=Fe(t),u=function(c){return n+Si(c)(e-n+1)},a=$c(Fe)(VM),i=jM($c(zM)(a))($c(qM(2))(a));return $c(function(c){return f_(u(c))})(i)}},ok=function(t){return function(r){var e=t<=r;return e?nk(t)(r):nk(r)(t)}};var fk=function(t){return t.arbitrary};var ck=function(){return{arbitrary:ok(-1e6)(1e6)}}();var We=ir(ve),pn=et(Vr),pk=_t(sn),_k=fk(ck),sk=de(na),lk=q(Cr),GM=q(ye),Qe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ye=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),xe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),be=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_n=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Fn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),K_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Fc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Q_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Y_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Z_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ts=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Au=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),He=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),KM=function(t){return function(r){return We(Lr(function(e){return pn(e)([new Au(new Fn(t))])})(r))}},QM=function(t){return function(r){return We(Lr(function(e){return pn(e)([new Au(new Qn(t))])})(r))}},YM=function(t){return function(r){return We(Lr(function(e){return pn(e)([new He(new K_(t))])})(r))}},ZM=function(t){return function(r){return We(Lr(function(e){return pn(e)([new He(new Z_(t))])})(r))}},t0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new Au(new Ye(t))])})(r))}},r0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new He(new Fc(t))])})(r))}},e0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new Au(new _n(t))])})(r))}},n0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new Au(new Qe(t))])})(r))}},u0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new Au(new xe(t)),new Au(new be(t))])})(r))}},a0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new He(new Q_(t))])})(r))}},o0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new He(new Y_(t))])})(r))}},i0=function(t){return function(r){return We(Lr(function(e){return pn(e)([new He(new ts(t))])})(r))}},vk=function(t){return{ids:function(){var e=Qr(t)(),n=pk(G_(_k)({newSeed:z_(e),size:5}));return We(Lr(sk(1))(t))(),n},makeElement:n0,attributeParent:function(r){return function(e){return lk(void 0)}},makeRoot:r0,makeText:t0,makePursx:e0,setProp:QM,makeDynBeacon:u0,setCb:function(r){return function(e){return lk(void 0)}},setText:KM,sendToPos:YM,deleteFromCache:i0,removeDynBeacon:ZM,giveNewParent:a0,disconnectElement:o0}},xa=function(t){return function(r){return t instanceof p?r(t.value0):GM(!1)}},f0=function(t){return function(r){return function(){var n=LA(t.id)(r)(),u=IA(t.id)(r)(),a=wA(t.id)(r)(),i={scope:n,parent:u,dynFamily:a,id:t.id,pos:new p(t.pos),ez:!1};return B_(p.create)(xa)(i)(r)()}}},mk=function(t){return{ids:function(){var e=Qr(t)(),n=pk(G_(_k)({newSeed:z_(e),size:5}));return We(Lr(sk(1))(t))(),n},makeElement:PA(xa)(!0),makeDynBeacon:MA(xa)(!0),attributeParent:xA(xa),makeRoot:BA,makeText:OA(xa)(!0)(Zt(void 0)),makePursx:HA(xa)(!0)(Zt(void 0)),setProp:RA(!0),setCb:NA(!0),setText:WA,sendToPos:f0,deleteFromCache:U_,removeDynBeacon:qA,giveNewParent:B_(p.create)(xa),disconnectElement:UA}};var rs=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),es=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let a=r,i=Object.entries(n);for(var c=0;c<i.length;c++){let A=i[c][0];i[c][1]===!0?a=a.replace(u+A+u,'data-deku-attr-internal="'+A+'" data-deku-ssr="'+A+"@!%"+e+'"'):a=a.replace(u+A+u,'<span style="display:contents;" data-deku-elt-internal="'+A+'" data-deku-ssr="'+A+"@!%"+e+'"></span>')}let _=a.indexOf(">"),s=a.indexOf("/>"),m=s==_-1?s:_;return a.slice(0,m)+' data-deku-ssr="'+t+'" '+a.slice(m)};var l0=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},bk=y(Yo),Ku=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),dk=function(t){var r=!1,e;function n(u){if(u.value1 instanceof mt)return r=!0,new p(new V(u.value1.value0,new Ku(u.value0,u.value1.value1)));if(u.value0 instanceof tr&&u.value1 instanceof tr)return r=!0,b.value;if(u.value1 instanceof tr){t=new Ku(tr.value,Af(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Li=function(t){var r=!1,e;function n(u){if(u.value0 instanceof tr&&u.value1 instanceof tr)return r=!0,b.value;if(u.value0 instanceof tr){t=new Ku(Af(u.value1),tr.value);return}if(u.value0 instanceof mt)return r=!0,new p(new V(u.value0.value0,new Ku(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},hr=function(t){return function(r){return new Ku(t.value0,new mt(r,t.value1))}};var xc={map:function(t){return function(r){return new Ku(bk(t)(r.value0),bk(t)(r.value1))}}},Ii={foldMap:function(t){return Qc(Ii)(t)},foldr:function(t){return Yc(Ii)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){var m=Li(s);if(m instanceof p){u=t(_)(m.value0.value0),n=m.value0.value1;return}if(m instanceof b)return a=!0,_;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[m.constructor.name])}for(;!a;)i=c(u,n);return i}};return r}},ns=er(Ii),us={append:ns(hr)},Se=function(){return new Ku(tr.value,tr.value)}(),Ak={mempty:Se,Semigroup0:function(){return us}},kk=hr(Se),yk=function(t){var r=gr(t)(Ak);return function(e){return r(kk)(e)}},as={traverse:function(t){var r=t.Apply0(),e=y(r.Functor0()),n=ee(r),u=q(t);return function(a){var i=e(ns(hr)(Se)),c=ns(function(_){var s=n(hr)(_);return function(m){return s(a(m))}})(u(Se));return function(_){return i(c(_))}}},sequence:function(t){return dl(as)(t)},Functor0:function(){return xc},Foldable1:function(){return Ii}};var gk=function(t){return function(r){return new Ku(new mt(t,r.value0),r.value1)}},p0={Applicative0:function(){return os},Bind1:function(){return _0}},_0={bind:vr(gr(Ii)(Ak)),Apply0:function(){return Ck(0)}},os={pure:kk,Apply0:function(){return Ck(0)}},Ck=l0("applyCatQueue","Data.CatQueue",function(){return{apply:Pe(p0),Functor0:function(){return xc}}});var v0=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},So=et(Vr),$k=Er(),fs=y(Ar),m0=Bi(Wa),D0=Be(Ar),hk=ir(wi(au)),Sk=bi(Ec(Oe)),Tk=Pu(Ee),b0=Na(Ha)(hc(Oe)),Me=St(hu(Mn)),Ma=et(us),d0=q(os),Ek=y(xc),A0=yk(Ft),k0=Be(Lu),y0=At(ke),is=ti(Ee),g0=lu(hf),Fk=Tc(Oe),C0=Re(as)(Fk),Pi=un(Fk)(an),h0=uu(Ft)(Ro),S0=Xe(vm),T0=gr(Ft)(Ro),E0=er(ue);var $0=function(t){var r=function(e){return function(n){return function(u){return function(a){if(a instanceof b)return{acc:e,rest:[]};if(a instanceof p){if(a.value0.head instanceof xe){var i=r([])(new p({id:a.value0.head.value0.id,e:a.value0.head.value0}))(a.value0.tail);return r(So(e)(i.acc))(n)(i.rest)}if(a.value0.head instanceof be){if(n instanceof p)return{acc:[{pos:n.value0.e.pos,elt:new ft({o:n.value0.e,a:e,c:a.value0.head.value0})}],rest:a.value0.tail};if(n instanceof b)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var c=function(){if(a.value0.head instanceof Qe||a.value0.head instanceof Ye||a.value0.head instanceof _n||a.value0.head instanceof xe||a.value0.head instanceof be)return a.value0.head.value0.pos;if(a.value0.head instanceof Qn)return b.value;if(a.value0.head instanceof Fn)return b.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[a.value0.head.constructor.name])}();return r(So(e)([{pos:c,elt:new lt(a.value0.head)}]))(n)(a.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[a.constructor.name])}(Cl(u))}}};return r([])(b.value)(t).acc},xk=v0("sortSortableDyns","Deku.SSR",function(){var t=fs(function(e){if(e.elt instanceof lt)return e;if(e.elt instanceof ft)return{pos:e.pos,elt:new ft({o:e.elt.value0.o,c:e.elt.value0.c,a:xk(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=sf($o($t(aa(le)))(function(e){return function(n){return n.pos}($k(e))}));return function(e){return t(r(e))}}),F0=xk(39),Mk=function(t){return m0(D0(t)(function(r){return function(e){if(e instanceof lt)return[e.value0];if(e instanceof ft)return So([new xe(e.value0.o)])(So(Mk(e.value0.a))([new be(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[e.constructor.name])}(function(e){return e.elt}($k(r)))}))},wk=function(t){return function(r){var e=function(o){return function(v){return hk(Sk(function(ut){var j={};for(var Pt in ut)({}).hasOwnProperty.call(ut,Pt)&&(j[Pt]=ut[Pt]);return j.idToActions=Tk(function(Ot){if(Ot instanceof p)return new p(So(Ot.value0)([v]));if(Ot instanceof b)return new p([v]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Ot.constructor.name])})(o)(ut.idToActions),j}))}},n=pe("deku-root")(Ko(function(o){return o instanceof He&&o.value0 instanceof Fc?new p(o.value0.value0.id):b.value})(r)),u=function(o){return function(v){return function(ut){return b0(hk(Sk(function(j){var Pt={};for(var Ot in j)({}).hasOwnProperty.call(j,Ot)&&(Pt[Ot]=j[Ot]);return Pt.parentToChild=Tk(function(Gt){if(Gt instanceof p)return new p(So(Gt.value0)([v]));if(Gt instanceof b)return new p([v]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[Gt.constructor.name])})(o)(j.parentToChild),Pt})))(function(){return e(v)(ut)})}}},a=function(o){var v=function(ot){return function(z){return function(M){if(M instanceof Qe){var st=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return st?new Qe({id:M.value0.id,scope:M.value0.scope,parent:M.value0.parent,tag:M.value0.tag,pos:new p(z),dynFamily:M.value0.dynFamily}):M}if(M instanceof Ye){var Dt=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return Dt?new Ye({id:M.value0.id,pos:new p(z),scope:M.value0.scope,parent:M.value0.parent,dynFamily:M.value0.dynFamily}):M}if(M instanceof _n){var we=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return we?new _n({id:M.value0.id,parent:M.value0.parent,html:M.value0.html,scope:M.value0.scope,pos:new p(z),pxScope:M.value0.pxScope,verb:M.value0.verb,cache:M.value0.cache,dynFamily:M.value0.dynFamily}):M}if(M instanceof xe){var Nr=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return Nr?new xe({id:M.value0.id,parent:M.value0.parent,pos:new p(z),scope:M.value0.scope,dynFamily:M.value0.dynFamily}):M}if(M instanceof be){var ku=M.value0.id===ot||Me(M.value0.dynFamily)(new p(M.value0.id));return ku?new be({id:M.value0.id,parent:M.value0.parent,pos:new p(z),scope:M.value0.scope,dynFamily:M.value0.dynFamily}):M}if(M instanceof Fn||M instanceof Qn)return M;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[M.constructor.name])}}},ut=function(ot){return function(z){if(z instanceof Qe){var M=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return M?new Qe({id:z.value0.id,scope:z.value0.scope,parent:b.value,tag:z.value0.tag,pos:z.value0.pos,dynFamily:z.value0.dynFamily}):z}if(z instanceof Ye){var st=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return st?new Ye({id:z.value0.id,pos:z.value0.pos,scope:z.value0.scope,parent:b.value,dynFamily:z.value0.dynFamily}):z}if(z instanceof _n){var Dt=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return Dt?new _n({id:z.value0.id,parent:b.value,html:z.value0.html,scope:z.value0.scope,pos:z.value0.pos,pxScope:z.value0.pxScope,verb:z.value0.verb,cache:z.value0.cache,dynFamily:z.value0.dynFamily}):z}if(z instanceof xe){var we=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return we?new xe({id:z.value0.id,parent:b.value,pos:z.value0.pos,scope:z.value0.scope,dynFamily:z.value0.dynFamily}):z}if(z instanceof be){var Nr=z.value0.id===ot||Me(z.value0.dynFamily)(new p(z.value0.id));return Nr?new be({id:z.value0.id,parent:b.value,pos:z.value0.pos,scope:z.value0.scope,dynFamily:z.value0.dynFamily}):z}if(z instanceof Fn||z instanceof Qn)return z;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[z.constructor.name])}},j=function(ot){return function(z){return function(M){return function(st){return function(Dt){if(Dt instanceof p&&Dt.value0.value0 instanceof xe){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(hr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof be){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(hr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Ye){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(hr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof _n){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(hr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Qe){if(Me(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(hr(Ma(ot)(z))(Dt.value0.value0))(Se)(M)(Dt.value0.value1);if(Br)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Qn)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1);if(Dt instanceof p&&Dt.value0.value0 instanceof Fn)return j(ot)(hr(z)(Dt.value0.value0))(M)(Dt.value0.value1);if(Dt instanceof b)return Ma(ot)(Ma(d0(new be({id:M.id+"%-%",parent:M.parent,pos:M.pos,scope:M.scope,dynFamily:M.dynFamily})))(z));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[Dt.constructor.name])}(Li(st))}}}},Pt=function(ot){return function(z){return function(M){if(M instanceof p&&M.value0.value0 instanceof be)return Pt(j(Se)(Se)(M.value0.value0.value0)(ot))(M.value0.value1);if(M instanceof p)return Pt(gk(M.value0.value0)(ot))(M.value0.value1);if(M instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[M.constructor.name])}(dk(z))}},Ot=function(ot){return function(z){return function(M){return function(st){if(st instanceof p&&st.value0.value0 instanceof Qe){var Dt=st.value0.value0.value0.id===z;return Dt?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Ye){var we=st.value0.value0.value0.id===z;return we?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof _n){var Nr=st.value0.value0.value0.id===z;return Nr?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof xe){var ku=st.value0.value0.value0.id===z;return ku?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof be){var wa=st.value0.value0.value0.id===z;return wa?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Qn){var Ia=st.value0.value0.value0.id===z;return Ia?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Fn){var Te=st.value0.value0.value0.id===z;return Te?Ot(ot)(z)(st.value0.value1):Ot(hr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[st.constructor.name])}(Li(M))}}},Gt=function(ot){return function(z){return function(M){if(M instanceof p&&M.value0.value0 instanceof Au)return Gt(hr(ot)(M.value0.value0.value0))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof He&&M.value0.value0.value0 instanceof K_)return Gt(Ek(v(M.value0.value0.value0.value0.id)(M.value0.value0.value0.value0.pos))(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof He&&M.value0.value0.value0 instanceof Fc||M instanceof p&&M.value0.value0 instanceof He&&M.value0.value0.value0 instanceof Q_)return Gt(ot)(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof He&&M.value0.value0.value0 instanceof Y_)return Gt(Ek(ut(M.value0.value0.value0.value0.id))(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof He&&M.value0.value0.value0 instanceof Z_)return Gt(Ot(Se)(M.value0.value0.value0.value0.id)(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof He&&M.value0.value0.value0 instanceof ts)return Gt(Ot(Se)(M.value0.value0.value0.value0.id)(ot))(M.value0.value1);if(M instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[M.constructor.name])}(Li(z))}},rt=A0(o),yr=Gt(Se)(rt),fe=Pt(Se)(yr);return fe},i=a(r),c=function(o){return{parentToChild:k0(o.parentToChild)(function(){var v=fs(function(j){if(j instanceof Qe||j instanceof Ye||j instanceof _n||j instanceof xe||j instanceof be||j instanceof Qn||j instanceof Fn)return j.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[j.constructor.name])}),ut=fs(function(j){return y0(is(j)(o.idToActions))(Sl)});return function(j){return v(Mk(F0($0(g0(ut(j))))))}}()),idToActions:o.idToActions}}(tk(C0(function(o){if(o instanceof Qe)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Ye)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof _n)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof xe)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof be)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Qn||o instanceof Fn)return e(o.value0.id)(o);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[o.constructor.name])})(i))({parentToChild:qn,idToActions:qn})),_=function(o){return Ra(El(function(v){return v instanceof Qe||v instanceof Ye||v instanceof xe||v instanceof be})(o))},s=function(o){return pe("")(Ko(function(v){return v instanceof Qe?new p(v.value0.tag):b.value})(o))},m=function(o){return h0(" ")(S0(function(v){return v instanceof Qn?new p(v.value0.key+('="'+(v.value0.value+'"'))):b.value})(o))},A=function(o){return Zt("")(function(v){var ut=function(rt){return pe("")(Ko(function(yr){return yr instanceof Fn?new p(rs(yr.value0.text)+("<!--"+(o+"-->"))):b.value})(v))},j=function(rt){return"<!--%-%"+(o+"-->")},Pt=function(rt){var yr=s(v),fe=m(v);return"<"+(yr+(" "+(fe+(' data-deku-ssr="'+(o+('">'+($(o)+("</"+(yr+">")))))))))},Ot=function(rt){return"<!--%-%"+(o+"-->")},Gt=Eu(v)(0);return Gt instanceof p&&Gt.value0 instanceof Fn?ut(void 0):Gt instanceof p&&Gt.value0 instanceof Ye?ut(void 0):Gt instanceof p&&Gt.value0 instanceof xe?j(void 0):Gt instanceof p&&Gt.value0 instanceof be?Ot(void 0):Gt instanceof p&&Gt.value0 instanceof _n?es(Gt.value0.value0):Pt(void 0)})(is(o)(c.idToActions))},$=function(o){var v=pe([])(is(o)(c.parentToChild));return T0(A)(v)},S=function(o){return E0(function(v){return function(ut){var j=_(ut);if(j)return v;if(!j)return oc("data-deku-ssr")(m(ut)+" data-deku-ssr")(v);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[j.constructor.name])}})($(o))(c.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(S(n)+("</"+(t+">")))))))}};var sw=Be(U),vw=Ka(Jo);var mw=ir(U),Ik=Er(),Dw=St(Hu),bw=C(),dw=Ht(Pr),Aw=q(nr),Lk=q(Cr),kw=y(ve),yw=Ka(mv),gw=ir(ve);var Pk=function(t){return function(r){return function(e){return cn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(n){return function(u){return u.ids}(Ik(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:Dw})}},toElt:function(n){return n}})(t)(r)(bw(e))}}},Cw=function(t){return function(){var e=H_();W_(e)();var n=sw(vw(_e(0)))(mk)();R_(e)();var u=O_(),a=Jl(dw(Aw(Ik(n).makeRoot({id:"deku-root",root:u})))(Pk({parent:new p("deku-root"),scope:new Wu("rootScope"),raiseId:function(i){return Lk(void 0)},ez:!0,pos:b.value,dynFamily:b.value})(n)(t)))(function(i){return i(e)})();return N_(e)(),a}},Ok=function(t){return mw(Cw(t))},hw=function(t){return function(r){return function(e){return kw(function(){var n=wk(t);return function(u){return function(a){return r.head+a}(function(a){return a+r.tail}(n(u)))}}())(yw(function(){var u=_e(0)(),a=_e([])(),i=vk(u);return gw(Wm(Pk({parent:new p("deku-root"),scope:new Wu("rootScope"),raiseId:function(c){return Lk(void 0)},ez:!0,pos:b.value,dynFamily:b.value})(i)(e))(function(c){return c(a)}))(),Qr(a)()}))}}},Rk=hw("body");var Sw=gc(co),cs=Ht(Pr),Mc=q(nr),Wk=y($r),Hk=et(ea),Tw=_t(sn),Ew=Ou(Ce),$w=_t(Po),Oi=ie(),Fw=qr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Oi(Oi(Oi(Oi(Oi(Ur)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),xw=mr(Ga),Mw=At(Tu),Bk=q(Cr),ww=function(){return tt.value}(),Uk=function(){return Lf()(eo({reflectSymbol:function(){return"buttonClicked"}})()()(eo({reflectSymbol:function(){return"sliderMoved"}})()()($f)()())()())(tt.value)(function(t){return function(r){return cr([T_([Qt(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),he(Sw(t.buttonClicked(void 0)))([Qt("Click")]),cr([Ge(cs(Mc("Val: 0"))(Wk(function(){var e=Hk("Val: ");return function(n){return e(Tw(n))}}())(Ew(function(e){return function(n){return 1+e|0}})(-1)(cs(Mc(void 0))(r.buttonClicked)))))]),cr([su(yc(Mc(t.sliderMoved)))([]),cr([Ge(cs(Mc("Val: 50"))(Wk(function(){var e=Hk("Val: ");return function(n){return e($w(n))}}())(r.sliderMoved)))])])])}})}(),qk=function(t){return Fw(ww)({code2:pr(Rr([Or([Qt(Op)])])),code1:pr(Rr([Or([Qt(Pp)])])),code0:pr(Rr([Or([Qt(Lp)])])),result:pr(Uk),codegen:pr(Rr([Or([Ge(Nm(function(r){return xw(Mw(Rk({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Uk))(r))(Bk(Bk(void 0)))}))])]))})};var Lw=Je(ze),Pw=Ht(Pr),ls=q(nr),Ow=y(Ar),Rw=wr(Ft)(d),Nw=It(Kr),Ww=mr(Ir),Hw=It(MD),Bw=It(Gr),Uw=It(lo),zk=function(t){var r=function(n){if(n instanceof Uf)return mA;if(n instanceof po)return sA;if(n instanceof _o)return ob;if(n instanceof so)return hA;if(n instanceof mo)return uA;if(n instanceof Do)return Rd;if(n instanceof vo)return FA;if(n instanceof bo)return lA;if(n instanceof Ao)return yA;if(n instanceof ko)return qk;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[n.constructor.name])},e=function(n){return function(u){return r(u)({dpage:n,slug:t.slug})}};return io(function(n){return Lw(function(u){return Pw(ls(t.startsWith))(u)})(function(u){return cr([cr(Ow(function(a){return pi([li(Rw(ls)([Nw(dr.value)(br(function(i){return Ww(zr(i))(n(a.value0))})),Hw(De.value)("cursor:pointer;"),Bw(Hr.value)(t.slug+a.value1.value1.value0)]))([Qt(a.value1.value0)]),Vu(ls(Uw(De.value)(function(){return a.value1.value1.value1?"":"display:none;"}())))([Qt(" | ")])])})([new V(Uf.value,new V("Home",new V("",!0))),new V(po.value,new V("Hello world",new V("hello/",!0))),new V(_o.value,new V("Component",new V("simple/",!0))),new V(so.value,new V("Pursx 1",new V("pursx1/",!0))),new V(mo.value,new V("Events 1",new V("events1/",!0))),new V(Do.value,new V("Effects",new V("effects/",!0))),new V(vo.value,new V("Pursx 2",new V("pursx2/",!0))),new V(bo.value,new V("Events 2",new V("events2/",!0))),new V(Ao.value,new V("Portals",new V("portals/",!0))),new V(ko.value,new V("SSR",new V("ssr/",!1)))])),Rf(e(n))(u)])})})};var zw=_t(Ls()()(Ps({reflectSymbol:function(){return"slug"}})(Os({reflectSymbol:function(){return"startsWith"}})(qe))(qe))),Jw=q(ye),vTt=function(t){return function(){var e=Zt(vi(go("could not ingest options: "+zw(t))))(Jw)(GD(t.startsWith))();return Ok(zk({slug:t.slug,startsWith:e}))()}};export{vTt as main};
