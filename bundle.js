var vs=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),a=0,i=0;i<e;i++)for(var c=t[i],_=0;_<n;_++)u[a++]=c(r[_]);return u}};var ra={compose:function(t){return function(r){return function(e){return t(r(e))}}}},ea=function(t){return t.compose},Pc=function(t){var r=ea(t);return function(e){return function(n){return r(n)(e)}}};var Rt=function(t){return t.identity},Nt={identity:function(t){return t},Semigroupoid0:function(){return ra}};var Hr=!0;var $o=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},vr=function(t){return function(r){return function(e){return t(e)(r)}}},h=function(t){return function(r){return t}};var Fo=function(t){return function(r){return r(t)}};var ms=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var Z=function(){function t(){}return t.value=new t,t}();var y=function(t){return t.map},Ue=function(t){var r=y(t);return function(e){return function(n){return r(n)(e)}}},ir=function(t){return y(t)(h(void 0))},X=function(t){var r=y(t);return function(e){return function(n){return r(h(n))(e)}}};var na={map:ea(ra)},Dr={map:ms};var ry=Rt(Nt);var xo={apply:vs,Functor0:function(){return Dr}},Jt=function(t){return t.apply};var mr=function(t){var r=Jt(t),e=y(t.Functor0());return function(n){return function(u){return r(e(h(ry))(n))(u)}}},re=function(t){var r=Jt(t),e=y(t.Functor0());return function(n){return function(u){return function(a){return r(e(n)(u))(a)}}}};var q=function(t){return t.pure};var Qn=function(t){var r=q(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},Mo=function(t){var r=Jt(t.Apply0()),e=q(t);return function(n){return function(u){return r(e(n))(u)}}};var ua={pure:function(t){return[t]},Apply0:function(){return xo}};var bs=function(t){return function(r){return t+r}},ds=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var zr=function(t){return t.reflectSymbol};var Ze=function(t){return function(r){return r[t]}},Yn=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var ks={append:function(t){return function(r){return void 0}}},aa={append:bs};var Jr={append:ds};var nt=function(t){return t.append};var Wt=function(t){return t.alt};var oy=String.fromCharCode(65535),iy=String.fromCharCode(0),fy=Number.POSITIVE_INFINITY,cy=Number.NEGATIVE_INFINITY;var ys=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var gs=ys;var Cs=ys;var hs=function(t){return function(r){return t===r}};var Ss=hs;var Ts=hs;var Fn={eq:Ts};var La={eq:Ss};var St=function(t){return t.eq};var gt=function(){function t(){}return t.value=new t,t}(),Mt=function(){function t(){}return t.value=new t,t}(),wt=function(){function t(){}return t.value=new t,t}();var Es=function(t){return function(r){return t-r|0}};var $s=function(t){return function(r){return t+r|0}},Fs=function(t){return function(r){return t*r|0}},xs=function(t){return function(r){return t+r}},Ms=function(t){return function(r){return t*r}};var wo={add:xs,zero:0,mul:Ms,one:1},oa={add:$s,zero:0,mul:Fs,one:1};var tn=function(t){return t.mul};var de=function(t){return t.add};var Rc={sub:Es,Semiring0:function(){return oa}};var Te=function(){return{compare:Cs(gt.value)(wt.value)(Mt.value),Eq0:function(){return Fn}}}();var ce=function(){return{compare:gs(gt.value)(wt.value)(Mt.value),Eq0:function(){return La}}}();var $t=function(t){return t.compare};var Mn=function(t){return t.top};var Lo={top:2147483647,bottom:-2147483648,Ord0:function(){return ce}};var tu=function(t){return t.bottom};var Is=function(t){return t.toString()},Ls=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var Ps=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,a=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+a})+'"'};var ze={show:Ps};var Os=function(t){return t.showRecordFields},Rs=function(){return function(){return function(t){var r=Os(t);return{show:function(e){return"{"+(r(Z.value)(e)+"}")}}}}};var Po={show:Ls},_n={show:Is};var _t=function(t){return t.show};var Ns=function(t){var r=zr(t);return function(e){var n=Os(e);return function(u){var a=_t(u);return{showRecordFields:function(i){return function(c){var _=n(Z.value)(c),s=r(Z.value),m=Ze(s)(c);return" "+(s+(": "+(a(m)+(","+_))))}}}}}},Ws=function(t){var r=zr(t);return function(e){var n=_t(e);return{showRecordFields:function(u){return function(a){var i=r(Z.value),c=Ze(i)(a);return" "+(i+(": "+(n(c)+" ")))}}}}};var Ey=Rt(Nt),b=function(){function t(){}return t.value=new t,t}(),p=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var tr=function(t){return function(r){return function(e){if(e instanceof b)return t;if(e instanceof p)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Oa=tr(!1)(h(!0));var Er={map:function(t){return function(r){return r instanceof p?new p(t(r.value0)):b.value}}},$y=y(Er);var le=function(t){return tr(t)(Ey)},Ie=function(){return function(t){if(t instanceof p)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Cu=function(t){var r=St(t);return{eq:function(e){return function(n){return e instanceof b&&n instanceof b?!0:e instanceof p&&n instanceof p?r(e.value0)(n.value0):!1}}}},fa=function(t){var r=$t(t),e=Cu(t.Eq0());return{compare:function(n){return function(u){if(n instanceof b&&u instanceof b)return wt.value;if(n instanceof b)return gt.value;if(u instanceof b)return Mt.value;if(n instanceof p&&u instanceof p)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var ca={apply:function(t){return function(r){if(t instanceof p)return $y(t.value0)(r);if(t instanceof b)return b.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return Er}};var ke={bind:function(t){return function(r){if(t instanceof p)return r(t.value0);if(t instanceof b)return b.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return ca}};var In=function(){return{pure:p.create,Apply0:function(){return ca}}}();var Fy={alt:function(t){return function(r){return t instanceof b?r:t}},Functor0:function(){return Er}},Us=function(){return{empty:b.value,Alt0:function(){return Fy}}}();var qs=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=u-1;a>=0;a--)n=t(e[a])(n);return n}}},zs=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=0;a<u;a++)n=t(n)(e[a]);return n}}};var Js=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var wy=Rt(Nt),Ra=function(t){return t.discard};var Na={bind:Js,Apply0:function(){return xo}},At=function(t){return t.bind},ru=function(t){return vr(At(t))},Wi=function(t){var r=ru(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},Hi=function(t){var r=At(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var Wa={discard:function(t){return At(t)}};var Bi=function(t){var r=At(t);return function(e){return r(e)(wy)}};var k=function(t){return t.empty};var lt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ft=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Hc=function(t){return tr(new lt(t))(ft.create)};var Ha={map:function(t){return function(r){if(r instanceof lt)return new lt(r.value0);if(r instanceof ft)return new ft(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var rn=function(t){return function(r){return function(e){if(e instanceof lt)return t(e.value0);if(e instanceof ft)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},Bc=function(){return rn(h(b.value))(p.create)}();var Oy=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var Xs={defer:function(t){return function(r){return t(void 0)(r)}}},Ba=function(t){return t.defer},Uc=function(t){var r=Ba(t);return function(e){var n=Oy("go","Control.Lazy",function(){return r(function(a){return e(n(25))})}),u=n(25);return u}};var Gs=function(t){return function(r){return t&&r}},Ks=function(t){return function(r){return t||r}},Qs=function(t){return!t};var la=function(t){return t.not};var qa=function(t){return t.ff};var pa=function(t){return t.disj},sn={ff:!1,tt:!0,implies:function(t){return function(r){return pa(sn)(la(sn)(t))(r)}},conj:Gs,disj:Ks,not:Qs};var Ys=function(t){return Math.min(Math.abs(t),2147483647)},Zs=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},tv=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var rv={Ring0:function(){return Rc}};var Oo=function(t){return t.mod};var Ui={degree:Ys,div:Zs,mod:tv,CommutativeRing0:function(){return rv}};var zc={mempty:void 0,Semigroup0:function(){return ks}},Ro={mempty:"",Semigroup0:function(){return aa}};var qt=function(t){return t.mempty};var V=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Vr=function(t){return t.value1};var hu={map:function(t){return function(r){return new V(r.value0,t(r.value1))}}};var za=function(t){return function(r){return function(e){return t(new V(r,e))}}};var Bo=function(t){return t};var Ky=function(t){var r=pa(t);return{append:function(e){return function(n){return r(e)(n)}}}};var jc=function(t){var r=Ky(t);return{mempty:qa(t),Semigroup0:function(){return r}}};var ji=function(t){return t};var Qy=function(t){var r=ea(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Xc=function(t){var r=Qy(t.Semigroupoid0());return{mempty:Rt(t),Semigroup0:function(){return r}}};var Q=function(t){return t};var g=function(){return Q};var Kc=g(),Xi=function(){return Kc};var $r=function(){return Kc};var Gi=function(){return function(){return function(){return function(){return function(t){return Kc}}}}};var tg=$r(),rg=Xc(Nt);var eg=Gi()()()(),_r=function(t){return t.foldr};var eu=function(t){var r=_r(t);return function(e){return r(Wt(e.Alt0()))(k(e))}},wr=function(t){var r=_r(t);return function(e){var n=Wt(e.Alt0()),u=k(e);return function(a){return r(function(i){return n(a(i))})(u)}}},ja=function(t){var r=mr(t.Apply0()),e=q(t);return function(n){var u=_r(n);return function(a){return u(function(i){return r(a(i))})(e(void 0))}}},nn=function(t){var r=ja(t);return function(e){return vr(r(e))}};var ur=function(t){return t.foldl};var nu=function(t){var r=ur(t);return function(e){var n=nt(e.Semigroup0()),u=qt(e);return function(a){return function(i){var c=function(_){return function(s){return _.init?{init:!1,acc:s}:{init:!1,acc:n(_.acc)(n(a)(s))}}};return r(c)({init:!0,acc:u})(i).acc}}}};var un={foldr:function(t){return function(r){return function(e){if(e instanceof b)return r;if(e instanceof p)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof b)return r;if(e instanceof p)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=qt(t);return function(e){return function(n){if(n instanceof b)return r;if(n instanceof p)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var uv=function(t){var r=_r(t);return function(e){var n=nt(e.Semigroup0()),u=qt(e);return function(a){return r(function(i){return function(c){return n(a(i))(c)}})(u)}}},Ft={foldr:qs,foldl:zs,foldMap:function(t){return uv(Ft)(t)}},Zc=function(t){var r=ur(t);return function(e){var n=nt(e.Semigroup0()),u=qt(e);return function(a){return r(function(i){return function(c){return n(i)(a(c))}})(u)}}},yr=function(t){return t.foldMap};var tl=function(t){var r=yr(t)(rg);return function(e){return function(n){return function(u){return tg(r(function(a){return ji(e(a))})(u))(n)}}}};var Su=function(t){var r=yr(t);return function(e){return eg(Bo)(r(jc(e)))}};var ng=Rt(Nt);var Le={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},av=function(t){return t.dimap},Pe=function(t){var r=av(t);return function(e){return r(e)(ng)}};var rl=function(t){return function(){return t}},ov=function(t){return function(r){return function(){return r(t())()}}};var Oe=function(t){var r=At(t.Bind1()),e=q(t.Applicative0());return function(n){return function(u){return r(n)(function(a){return r(u)(function(i){return e(a(i))})})}}};var iv=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Xa={Applicative0:function(){return ye},Bind1:function(){return sa}},sa={bind:ov,Apply0:function(){return el(0)}},ye={pure:rl,Apply0:function(){return el(0)}},fv=iv("functorEffect","Effect",function(){return{map:Mo(ye)}}),el=iv("applyEffect","Effect",function(){return{apply:Oe(Xa),Functor0:function(){return fv(0)}}}),U=fv(20),Ir=el(23),ag=re(Ir),nl=function(t){return{append:ag(nt(t))}},ul=function(t){var r=nl(t.Semigroup0());return{mempty:rl(qt(t)),Semigroup0:function(){return r}}};var Ki=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},al=(t,r)=>{for(let e in t)r(t[e])},ol=()=>({}),il=(t,r,e)=>{e[t]=r},fl=(t,r)=>{delete r[t]};var cv=Q;var lv=function(t){return function(r){return function(){return t(r())}}},pv=function(t){return function(){return t}},_v=function(t){return function(r){return function(){return r(t())()}}};function pe(t){return function(){return{value:t}}}var Kr=function(t){return function(){return t.value}},sv=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},mn=function(t){return function(r){return function(){return r.value=t}}};var Ln=function(t){return t};var uu={map:function(t){return function(r){return t(r)}}};var vv={apply:function(t){return function(r){return t(r)}},Functor0:function(){return uu}},cg={bind:function(t){return function(r){return r(t)}},Apply0:function(){return vv}},lg={pure:Ln,Apply0:function(){return vv}},Re={Applicative0:function(){return lg},Bind1:function(){return cg}};var mv=function(t){return function(){return{value:t}}};var Qr=function(t){return function(){return t.value}},Dv=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},_e=function(t){return function(r){return function(){r.value=t}}};var _g=ir(U),ge=mv,sg=Dv,Qi=function(t){return sg(function(r){var e=t(r);return{state:e,value:e}})},zo=function(t){return function(r){return _g(Qi(t)(r))}};var Ag=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},kg=sv,Lr=function(t){return kg(function(r){var e=t(r);return{state:e,value:e}})},se={map:lv};var Yi={Applicative0:function(){return gr},Bind1:function(){return Eu}},Eu={bind:_v,Apply0:function(){return ll(0)}},gr={pure:pv,Apply0:function(){return ll(0)}},ll=Ag("applyST","Control.Monad.ST.Internal",function(){return{apply:Oe(Yi),Functor0:function(){return se}}}),Ga=ll(47);var dv={liftST:Rt(Nt),Monad0:function(){return Yi}},Jo={liftST:cv,Monad0:function(){return Xa}},Ka=function(t){return t.liftST};var Zi=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,a=0;u!==r;)n[a++]=u,u+=e;return n[a]=u,n}},yg=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},gg=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},_l=typeof Array.prototype.fill=="function"?yg:gg,Cg=function(){function t(u,a){this.head=u,this.tail=a}var r={};function e(u){return function(a){return new t(u,a)}}function n(u){for(var a=[],i=0,c=u;c!==r;)a[i++]=c.head,c=c.tail;return a}return function(u){return function(a){return n(u(e)(r)(a))}}}(),dn=function(t){return t.length},Av=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},kv=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},yv=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var a=e(n[u]);if(r(a))return a}return t}}}},gv=function(t){return function(r){return function(e){return function(n){for(var u=0,a=n.length;u<a;u++)if(e(n[u]))return t(u);return r}}}};var Cv=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var Vo=function(t){return function(r){return r.filter(t)}},tf=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var a=r[u];t(a)?e.push(a):n.push(a)}return{yes:e,no:n}}};var hv=function(){function t(r,e,n,u,a,i){var c,_,s,m,A,$,S;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),_=a,s=c,m=a;_<c&&s<i;)A=u[_],$=u[s],S=e(r(A)($)),S>0?(n[m++]=$,++s):(n[m++]=A,++_);for(;_<c;)n[m++]=u[_++];for(;s<i;)n[m++]=u[s++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var jo=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),a=0;a<n;a++)u[a]=t(r[a])(e[a]);return u}}};var Sv=function(t){return function(r){return t[r]}};function Pn(){return[]}var sl=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var rf=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},On=function(t){return function(){return t}};function Tv(t){return function(){return t.slice()}}var ef=Tv,vl=Tv,Sg=function(){function t(r,e,n,u,a,i){var c,_,s,m,A,$,S;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),_=a,s=c,m=a;_<c&&s<i;)A=u[_],$=u[s],S=e(r(A)($)),S>0?(n[m++]=$,++s):(n[m++]=A,++_);for(;_<c;)n[m++]=u[_++];for(;s<i;)n[m++]=u[s++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var xv=function(t){return function(r){return function(){var n=vl(r)();return t(n)(),On(n)()}}};var an=function(t){return sl([t])};var Mv=y(se),$g=la(sn),Fg=ir(se),xg=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Mg=function(t){return function(){var e=Kr(t.value1)();return Lr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var uf=function(t){return Mv(xg.create(t))(pe(0))},af=function(t){return function(r){return function(){for(var n=pe(!1)();Mv($g)(Kr(n))();)(function(){var a=Mg(t)();if(a instanceof p)return r(a.value0)();if(a instanceof b)return Fg(mn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[a.constructor.name])})();return{}}}};var Iv=function(){function t(u){return[u]}function r(u){return function(a){return[u,a]}}function e(u){return function(a){return function(i){return[u,a,i]}}}function n(u){return function(a){return u.concat(a)}}return function(u){return function(a){return function(i){return function(c){return function(_){function s(m,A){switch(A-m){case 0:return i([]);case 1:return a(t)(c(_[m]));case 2:return u(a(r)(c(_[m])))(c(_[m+1]));case 3:return u(u(a(e)(c(_[m])))(c(_[m+1])))(c(_[m+2]));default:var $=m+Math.floor((A-m)/4)*2;return u(a(n)(s(m,$)))(s($,A))}}return s(0,_.length)}}}}}}();var lC=Rt(Nt),Ne=function(t){return t.traverse};var kl=function(t){var r=Ne(t);return function(e){return r(e)(lC)}},va={traverse:function(t){var r=t.Apply0();return Iv(Jt(r))(y(r.Functor0()))(q(t))},sequence:function(t){return kl(va)(t)},Functor0:function(){return Dr},Foldable1:function(){return Ft}};var EC=y(Er);var $C=Ie();var FC=nt(Jr);var hl=function(){return Sv},xC=hl(),Sl=function(){return Av(h(b.value))(function(t){return function(r){return new p({head:t,tail:r})}})}();var sf=function(t){return hv(t)(function(r){if(r instanceof Mt)return 1;if(r instanceof wt)return 0;if(r instanceof gt)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var vf=function(t){return function(r){return xv(an(r))(t)()}},Vv=function(t){return[t]};var w=function(t){return function(r){return jo(t)(Zi(0)(dn(r)-1|0))(r)}};var $u=function(){return kv(p.create)(b.value)}(),Tl=function(t){return $u(t)(dn(t)-1|0)};var El=function(t){return $u(t)(0)};var Ko=function(){return yv(b.value)(Oa)}();var $l=function(){return gv(p.create)(b.value)}();var Fl=function(t){return function(r){return EC(xC(r))($l(t)(r))}};var jv=function(){return Cv(p.create)(b.value)}(),xl=function(t){return function(r){return function(e){return e.length===0?[]:tr(e)(function(n){return $C(jv(n)(e))})($l(t(r))(e))}}};var Qo=function(t){return function(r){return FC([t])(r)}};var MC=vr(At(Na)),Ml=function(t){return MC(function(){var r=tr([])(Vv);return function(e){return r(t(e))}}())};var Xv=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var Fu=function(t){return t.mapWithIndex};var Za={mapWithIndex:Xv,Functor0:function(){return Dr}};var Rn=function(t){return t.foldrWithIndex};var Nn=function(t){return t.foldlWithIndex};var iu=function(t){return t.foldMapWithIndex};var Wn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Df=function(t){var r=k(t);return function(e){return new Wn(e,r)}};var rr=function(){function t(){}return t.value=new t,t}(),mt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),bf=function(t){return t},JC=function(t){return new mt(t.value0,t.value1)};var VC=function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){if(s instanceof mt&&s.value1 instanceof mt&&s.value1.value1 instanceof mt){u=new mt(s,_),n=s.value1.value1.value1;return}var m=function($){return $ instanceof mt&&$.value1 instanceof mt&&$.value1.value1 instanceof rr?new mt(t($.value0),new mt(t($.value1.value0),rr.value)):$ instanceof mt&&$.value1 instanceof rr?new mt(t($.value0),rr.value):rr.value},A=function($){return function(S){var o=$,v=!1,ut;function j(Pt,Ot){if(Pt instanceof mt&&Pt.value0 instanceof mt&&Pt.value0.value1 instanceof mt&&Pt.value0.value1.value1 instanceof mt){o=Pt.value1,S=new mt(t(Pt.value0.value0),new mt(t(Pt.value0.value1.value0),new mt(t(Pt.value0.value1.value1.value0),Ot)));return}return v=!0,Ot}for(;!v;)ut=j(o,S);return ut}};return a=!0,A(_)(m(s))}for(;!a;)i=c(u,n);return i}};return r(rr.value)},Yo={map:VC};var on={foldr:function(t){return function(r){var e=function(){var u=function(a){return function(i){var c=a,_=!1,s;function m(A,$){if($ instanceof rr)return _=!0,A;if($ instanceof mt){c=new mt($.value0,A),i=$.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[A.constructor.name,$.constructor.name])}for(;!_;)s=m(c,i);return s}};return u(rr.value)}(),n=ur(on)(vr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){if(s instanceof rr)return a=!0,_;if(s instanceof mt){u=t(_)(s.value0),n=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[s.constructor.name])}for(;!a;)i=c(u,n);return i}};return r},foldMap:function(t){var r=nt(t.Semigroup0()),e=qt(t);return function(n){return ur(on)(function(u){var a=r(u);return function(i){return a(n(i))}})(e)}}};var jC=_r(on);var df={append:function(t){return function(r){return jC(mt.create)(r)(t)}}},Qv=nt(df);var Yv={append:function(t){return function(r){return new Wn(t.value0,Qv(t.value1)(JC(r)))}}};var Zv={alt:Qv,Functor0:function(){return Yo}},wl=function(){return{empty:rr.value,Alt0:function(){return Zv}}}();var Af=function(){var t=function(r){return function(e){var n=r,u=!1,a;function i(c,_){if(_ instanceof rr)return u=!0,c;if(_ instanceof mt){n=new mt(_.value0,c),e=_.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[c.constructor.name,_.constructor.name])}for(;!u;)a=i(n,e);return a}};return t(rr.value)}();var am=function(t){return t()};var om=function(t){throw new Error(t)};var im=function(){return om};var sh=im(),vh=am,wu=function(t){return vh(function(){return sh(t)})};var pt=function(){function t(){}return t.value=new t,t}(),Ct=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),jt=function(){function t(r,e,n,u,a,i,c){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i,this.value6=c}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return function(c){return new t(r,e,n,u,a,i,c)}}}}}}},t}(),Iu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),fu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),Lu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Hn=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Pu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),yf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var pm=function(t){return function(r){return new Ct(pt.value,t,r,pt.value)}};var ti=function(t){var r=$t(t);return function(e){var n=function(u){var a=!1,i;function c(_){if(_ instanceof pt)return a=!0,b.value;if(_ instanceof Ct){var s=r(e)(_.value1);if(s instanceof wt)return a=!0,new p(_.value2);if(s instanceof gt){u=_.value0;return}u=_.value3;return}if(_ instanceof jt){var m=r(e)(_.value1);if(m instanceof wt)return a=!0,new p(_.value2);var A=r(e)(_.value4);if(A instanceof wt)return a=!0,new p(_.value5);if(m instanceof gt){u=_.value0;return}if(A instanceof Mt){u=_.value6;return}u=_.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[_.constructor.name])}for(;!a;)i=c(u);return i};return n}};var Ou={map:function(t){return function(r){if(r instanceof pt)return pt.value;if(r instanceof Ct)return new Ct(y(Ou)(t)(r.value0),r.value1,t(r.value2),y(Ou)(t)(r.value3));if(r instanceof jt)return new jt(y(Ou)(t)(r.value0),r.value1,t(r.value2),y(Ou)(t)(r.value3),r.value4,t(r.value5),y(Ou)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var _m=function(t){return function(r){return function(e){var n=t,u=r,a=!1,i;function c(_,s,m){if(s instanceof rr)return a=!0,m;if(s instanceof mt){if(s.value0 instanceof Iu){n=_,u=s.value1,e=new Ct(m,s.value0.value0,s.value0.value1,s.value0.value2);return}if(s.value0 instanceof fu){n=_,u=s.value1,e=new Ct(s.value0.value0,s.value0.value1,s.value0.value2,m);return}if(s.value0 instanceof Lu){n=_,u=s.value1,e=new jt(m,s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Hn){n=_,u=s.value1,e=new jt(s.value0.value0,s.value0.value1,s.value0.value2,m,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Pu){n=_,u=s.value1,e=new jt(s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5,m);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[s.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[s.constructor.name,m.constructor.name])}for(;!a;)i=c(n,u,e);return i}}},Cf=function(t){var r=_m(t),e=$t(t);return function(n){return function(u){var a=function(c){return function(_){var s=c,m=!1,A;function $(S,o){if(S instanceof rr)return m=!0,new Ct(o.value0,o.value1,o.value2,o.value3);if(S instanceof mt){if(S.value0 instanceof Iu)return m=!0,r(S.value1)(new jt(o.value0,o.value1,o.value2,o.value3,S.value0.value0,S.value0.value1,S.value0.value2));if(S.value0 instanceof fu)return m=!0,r(S.value1)(new jt(S.value0.value0,S.value0.value1,S.value0.value2,o.value0,o.value1,o.value2,o.value3));if(S.value0 instanceof Lu){s=S.value1,_=new yf(new Ct(o.value0,o.value1,o.value2,o.value3),S.value0.value0,S.value0.value1,new Ct(S.value0.value2,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof Hn){s=S.value1,_=new yf(new Ct(S.value0.value0,S.value0.value1,S.value0.value2,o.value0),o.value1,o.value2,new Ct(o.value3,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof Pu){s=S.value1,_=new yf(new Ct(S.value0.value0,S.value0.value1,S.value0.value2,S.value0.value3),S.value0.value4,S.value0.value5,new Ct(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[S.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[S.constructor.name,o.constructor.name])}for(;!m;)A=$(s,_);return A}},i=function(c){return function(_){var s=c,m=!1,A;function $(S,o){if(o instanceof pt)return m=!0,a(S)(new yf(pt.value,n,u,pt.value));if(o instanceof Ct){var v=e(n)(o.value1);if(v instanceof wt)return m=!0,r(S)(new Ct(o.value0,n,u,o.value3));if(v instanceof gt){s=new mt(new Iu(o.value1,o.value2,o.value3),S),_=o.value0;return}s=new mt(new fu(o.value0,o.value1,o.value2),S),_=o.value3;return}if(o instanceof jt){var v=e(n)(o.value1);if(v instanceof wt)return m=!0,r(S)(new jt(o.value0,n,u,o.value3,o.value4,o.value5,o.value6));var ut=e(n)(o.value4);if(ut instanceof wt)return m=!0,r(S)(new jt(o.value0,o.value1,o.value2,o.value3,n,u,o.value6));if(v instanceof gt){s=new mt(new Lu(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),S),_=o.value0;return}if(v instanceof Mt&&ut instanceof gt){s=new mt(new Hn(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),S),_=o.value3;return}s=new mt(new Pu(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),S),_=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[S.constructor.name,o.constructor.name])}for(;!m;)A=$(s,_);return A}};return i(rr.value)}}},kh=function(t){var r=_m(t),e=$t(t);return function(n){var u=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(o instanceof rr)return A=!0,v;if(o instanceof mt){if(o.value0 instanceof Iu&&o.value0.value2 instanceof pt&&v instanceof pt)return A=!0,r(o.value1)(new Ct(pt.value,o.value0.value0,o.value0.value1,pt.value));if(o.value0 instanceof fu&&o.value0.value0 instanceof pt&&v instanceof pt)return A=!0,r(o.value1)(new Ct(pt.value,o.value0.value1,o.value0.value2,pt.value));if(o.value0 instanceof Iu&&o.value0.value2 instanceof Ct){m=o.value1,s=new jt(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof fu&&o.value0.value0 instanceof Ct){m=o.value1,s=new jt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v);return}return o.value0 instanceof Iu&&o.value0.value2 instanceof jt?(A=!0,r(o.value1)(new Ct(new Ct(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ct(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof fu&&o.value0.value0 instanceof jt?(A=!0,r(o.value1)(new Ct(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ct(o.value0.value0.value6,o.value0.value1,o.value0.value2,v)))):o.value0 instanceof Lu&&o.value0.value2 instanceof pt&&o.value0.value5 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value0,o.value0.value1,pt.value,o.value0.value3,o.value0.value4,pt.value))):o.value0 instanceof Hn&&o.value0.value0 instanceof pt&&o.value0.value5 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value1,o.value0.value2,pt.value,o.value0.value3,o.value0.value4,pt.value))):o.value0 instanceof Pu&&o.value0.value0 instanceof pt&&o.value0.value3 instanceof pt&&v instanceof pt?(A=!0,r(o.value1)(new jt(pt.value,o.value0.value1,o.value0.value2,pt.value,o.value0.value4,o.value0.value5,pt.value))):o.value0 instanceof Lu&&o.value0.value2 instanceof Ct?(A=!0,r(o.value1)(new Ct(new jt(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Hn&&o.value0.value0 instanceof Ct?(A=!0,r(o.value1)(new Ct(new jt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Hn&&o.value0.value5 instanceof Ct?(A=!0,r(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new jt(v,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Pu&&o.value0.value3 instanceof Ct?(A=!0,r(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new jt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,v)))):o.value0 instanceof Lu&&o.value0.value2 instanceof jt?(A=!0,r(o.value1)(new jt(new Ct(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ct(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Hn&&o.value0.value0 instanceof jt?(A=!0,r(o.value1)(new jt(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ct(o.value0.value0.value6,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Hn&&o.value0.value5 instanceof jt?(A=!0,r(o.value1)(new jt(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(v,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new Ct(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Pu&&o.value0.value3 instanceof jt?(A=!0,r(o.value1)(new jt(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new Ct(o.value0.value3.value6,o.value0.value4,o.value0.value5,v)))):(A=!0,wu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!A;)$=S(m,s);return $}},a=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(v instanceof Ct&&v.value0 instanceof pt&&v.value3 instanceof pt)return A=!0,u(o)(pt.value);if(v instanceof Ct){m=new mt(new fu(v.value0,v.value1,v.value2),o),s=v.value3;return}if(v instanceof jt&&v.value0 instanceof pt&&v.value3 instanceof pt&&v.value6 instanceof pt)return A=!0,u(new mt(new fu(pt.value,v.value1,v.value2),o))(pt.value);if(v instanceof jt){m=new mt(new Pu(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),s=v.value6;return}return A=!0,wu("The impossible happened in partial function `removeMaxNode`.")}for(;!A;)$=S(m,s);return $}},i=function(_){var s=!1,m;function A($){if($ instanceof Ct&&$.value3 instanceof pt)return s=!0,{key:$.value1,value:$.value2};if($ instanceof Ct){_=$.value3;return}if($ instanceof jt&&$.value6 instanceof pt)return s=!0,{key:$.value4,value:$.value5};if($ instanceof jt){_=$.value6;return}return s=!0,wu("The impossible happened in partial function `maxNode`.")}for(;!s;)m=A(_);return m},c=function(_){return function(s){var m=_,A=!1,$;function S(o,v){if(v instanceof pt)return A=!0,b.value;if(v instanceof Ct){var ut=e(n)(v.value1);if(v.value3 instanceof pt&&ut instanceof wt)return A=!0,new p(new V(v.value2,u(o)(pt.value)));if(ut instanceof wt){var j=i(v.value0);return A=!0,new p(new V(v.value2,a(new mt(new Iu(j.key,j.value,v.value3),o))(v.value0)))}if(ut instanceof gt){m=new mt(new Iu(v.value1,v.value2,v.value3),o),s=v.value0;return}m=new mt(new fu(v.value0,v.value1,v.value2),o),s=v.value3;return}if(v instanceof jt){var Pt=function(){return v.value0 instanceof pt&&v.value3 instanceof pt&&v.value6 instanceof pt}(),ut=e(n)(v.value4),Ot=e(n)(v.value1);if(Pt&&Ot instanceof wt)return A=!0,new p(new V(v.value2,r(o)(new Ct(pt.value,v.value4,v.value5,pt.value))));if(Pt&&ut instanceof wt)return A=!0,new p(new V(v.value5,r(o)(new Ct(pt.value,v.value1,v.value2,pt.value))));if(Ot instanceof wt){var j=i(v.value0);return A=!0,new p(new V(v.value2,a(new mt(new Lu(j.key,j.value,v.value3,v.value4,v.value5,v.value6),o))(v.value0)))}if(ut instanceof wt){var j=i(v.value3);return A=!0,new p(new V(v.value5,a(new mt(new Hn(v.value0,v.value1,v.value2,j.key,j.value,v.value6),o))(v.value3)))}if(Ot instanceof gt){m=new mt(new Lu(v.value1,v.value2,v.value3,v.value4,v.value5,v.value6),o),s=v.value0;return}if(Ot instanceof Mt&&ut instanceof gt){m=new mt(new Hn(v.value0,v.value1,v.value2,v.value4,v.value5,v.value6),o),s=v.value3;return}m=new mt(new Pu(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),s=v.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[v.constructor.name])}for(;!A;)$=S(m,s);return $}};return c(rr.value)}},ne={foldr:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return _r(ne)(t)(t(e.value2)(_r(ne)(t)(r)(e.value3)))(e.value0);if(e instanceof jt)return _r(ne)(t)(t(e.value2)(_r(ne)(t)(t(e.value5)(_r(ne)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return ur(ne)(t)(t(ur(ne)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof jt)return ur(ne)(t)(t(ur(ne)(t)(t(ur(ne)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=qt(t),e=nt(t.Semigroup0());return function(n){return function(u){if(u instanceof pt)return r;if(u instanceof Ct)return e(yr(ne)(t)(n)(u.value0))(e(n(u.value2))(yr(ne)(t)(n)(u.value3)));if(u instanceof jt)return e(yr(ne)(t)(n)(u.value0))(e(n(u.value2))(e(yr(ne)(t)(n)(u.value3))(e(n(u.value5))(yr(ne)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},ve={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return Rn(ve)(t)(t(e.value1)(e.value2)(Rn(ve)(t)(r)(e.value3)))(e.value0);if(e instanceof jt)return Rn(ve)(t)(t(e.value1)(e.value2)(Rn(ve)(t)(t(e.value4)(e.value5)(Rn(ve)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof pt)return r;if(e instanceof Ct)return Nn(ve)(t)(t(e.value1)(Nn(ve)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof jt)return Nn(ve)(t)(t(e.value4)(Nn(ve)(t)(t(e.value1)(Nn(ve)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=qt(t),e=nt(t.Semigroup0());return function(n){return function(u){if(u instanceof pt)return r;if(u instanceof Ct)return e(iu(ve)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(iu(ve)(t)(n)(u.value3)));if(u instanceof jt)return e(iu(ve)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(iu(ve)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(iu(ve)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return ne}},yh=Rn(ve),gh=Nn(ve),sm=function(){return yh(function(t){return function(r){return function(e){return new mt(t,e)}}})(rr.value)}();var Bn=function(){return pt.value}();var Nl=function(t){var r=kh(t);return function(e){return function(n){return tr(n)(Vr)(r(e)(n))}}};var Ru=function(t){var r=ti(t),e=Nl(t),n=Cf(t);return function(u){return function(a){return function(i){var c=u(r(a)(i));if(c instanceof b)return e(a)(i);if(c instanceof p)return n(a)(c.value0)(i);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[c.constructor.name])}}}};var Ch=function(t){var r=Ru(t);return function(e){return function(n){return function(u){var a=function(i){return function(c){return function(_){return r(function(){var s=tr(_)(e(_));return function(m){return p.create(s(m))}}())(i)(c)}}};return gh(a)(u)(n)}}}};var vm=function(t){return Ch(t)(h)};var mm=ir(se),Th=q(gr),Eh=Jt(Ga),$h=y(se);var hf={compact:function(t){return function(){var e=Pn(),n=uf(function(u){return $u(t)(u)})();return af(n)(function(u){return mm(function(a){if(a instanceof b)return Th(0);if(a instanceof p)return an(a.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[a.constructor.name])}(u))})(),On(e)()}()},separate:function(t){return function(){var e=Pn(),n=Pn(),u=uf(function(a){return $u(t)(a)})();return af(u)(function(a){return mm(function(i){if(i instanceof lt)return an(i.value0)(e);if(i instanceof ft)return an(i.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[i.constructor.name])}(a))})(),Eh($h(function(a){return function(i){return{left:a,right:i}}})(On(e)))(On(n))()}()}};var cu=function(t){return t.compact};var Dm=nt(Jr),wh=ur(Ft);var bm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof lt)return{left:Dm(e.left)([u.value0]),right:e.right};if(u instanceof ft)return{right:Dm(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return wh(r)({left:[],right:[]})},partition:tf,filterMap:Ml,filter:Vo,Compactable0:function(){return hf},Functor1:function(){return Dr}};var je=function(t){return t.filterMap};var Wl=function(t){return t.filter};var Lh=yr(on),Ph=ur(on),Oh=_r(on);var Rh=function(t){var r=vm(t);return function(e){return function(n){return r(e)(n)}}};var Hl=function(t){return sm(t)};var Am=function(t){return pm(t)(void 0)};var Bl=function(t){return{append:Rh(t)}};var km={foldMap:function(t){var r=Lh(t);return function(e){var n=r(e);return function(u){return n(Hl(u))}}},foldl:function(t){return function(r){var e=Ph(t)(r);return function(n){return e(Hl(n))}}},foldr:function(t){return function(r){var e=Oh(t)(r);return function(n){return e(Hl(n))}}}};var Nh=Bn;var ym=function(t){var r=Bl(t);return{mempty:Nh,Semigroup0:function(){return r}}};var gm=function(t){var r=Nl(t);return function(e){return function(n){return r(e)(n)}}};function Cm(t){return function(r){return function(){return setTimeout(r,t)}}}function hm(t){return function(){clearTimeout(t)}}var Bh=$t(ce);var Sm=Cm;var Uh={eq:function(t){return function(r){return t===r}}},Sf={compare:function(t){return function(r){return Bh(t)(r)}},Eq0:function(){return Uh}};var Tm=hm;var lu=function(r){return function(e){return r(e)()}};var to=function(r){return function(e){return function(){return r(e)}}};var aS=function(t){var r=nt(nl(t));return{append:function(e){return function(n){return lu(function(u){return r(to(e)(u))(to(n)(u))})}}}};var xm=function(t){var r=qt(ul(t)),e=aS(t.Semigroup0());return{mempty:lu(function(n){return r}),Semigroup0:function(){return e}}};var oS=y(hu),iS=q(In),wm=function(t){return t.sampleOnRight};var ya=function(t){return t.keepLatest};var Im=function(t){return t.fix},Nu=function(t){var r=Im(t),e=wm(t),n=t.Alternative0(),u=Wt(n.Plus1().Alt0()),a=q(n.Applicative0()),i=y(t.Filterable1().Functor1());return function(c){return function(_){return function(s){return r(function(m){return e(u(m)(a(_)))(i(vr(c))(s))})}}}};var Wu=function(t){var r=je(t.Filterable1()),e=Nu(t);return function(n){return function(u){return function(a){return r(Vr)(e(function(i){return function(c){return oS(iS)(n(i.value0)(c))}})(new V(u,b.value))(a))}}}};function ql(t){return function(r){return t===r}}var Lm=ql;var Pm=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Om=nn(ye),Tf=Om(un),ga=q(ye),Rm=qt(xm(zc)),Bu=Ka(Jo),ni=ir(U),lS=nt(Jr),pS=qt(ym(Sf)),_S=gm(Sf),sS=nt(Bl(Sf)),vS=Om(km),mS=Jt(Ir),DS=y(U);var bS=function(t){return function(r){return function(e,n){var u=ge(b.value)(),a=t(e,function(c){return _e(new p(c))(u)()}),i=r(e,function(c){var _=Qr(u)();return Tf(_)(function(s){return function(){return n(c(s))}})()});return function(){return a(),i()}}}},dS=function(t){return function(r){return function(e,n){var u=ge(b.value)(),a=t(e,function(c){var _=Qr(u)();return Tf(_)(function(s){return function(){return n(s(c))}})()}),i=r(e,function(c){return _e(new p(c))(u)()});return function(){return a(),i()}}}},AS=function(t){return function(r,e){var n=ge(ga(void 0))(),u=t(r,function(a){var i=Qr(n)();i();var c=a(r,e);return _e(c)(n)()});return function(){var i=Qr(n)();return i(),u()}}},Cr={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},kS=y(Cr),ui=function(t){return function(r){return function(e,n){return r(e,function(u){var a=t(u);if(a instanceof p)return n(a.value0);if(a instanceof b)return void 0;throw new Error("Failed pattern match at FRP.Event (line 201, column 31 - line 203, column 35): "+[a.constructor.name])})}}},zl=function(t){return ui(function(r){var e=t(r);if(e)return new p(r);if(!e)return b.value;throw new Error("Failed pattern match at FRP.Event (line 129, column 13 - line 131, column 25): "+[e.constructor.name])})},Nm=function(){var r=ol(),e=ge(0)();return{event:function(n,u){var a=ge(u)(),i=Qr(e)();return il(i,a,r),zo(function(c){return c+1|0})(e)(),function(){return _e(Rm)(a)(),fl(i,r),void 0}},push:function(n){return al(r,function(u){var a=Qr(u)();return a(n)})}}},yS=function(t){return function(r,e){var n=Nm(),u=t(n.event),a=n.event(r,e),i=u(r,n.push);return function(){return i(),a()}}},ai={compact:ui(Rt(Nt)),separate:function(t){return{left:ui(function(r){if(r instanceof lt)return new p(r.value0);if(r instanceof ft)return b.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 33): "+[r.constructor.name])})(t),right:ui(function(r){if(r instanceof ft)return new p(r.value0);if(r instanceof lt)return b.value;throw new Error("Failed pattern match at FRP.Event (line 119, column 13 - line 121, column 32): "+[r.constructor.name])})(t)}}},Un={filter:zl,filterMap:ui,partition:function(t){return function(r){return{yes:zl(t)(r),no:zl(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:je(Un)(function(){var e=rn(p.create)(h(b.value));return function(n){return e(t(n))}}())(r),right:je(Un)(function(e){return Bc(t(e))})(r)}}},Compactable0:function(){return ai},Functor1:function(){return Cr}},gS=function(t){return function(r){return function(e,n){var u=ge(b.value)(),a=Bu(Pn)(),i=ge(b.value)(),c=Bu(Pn)(),_=ge(!0)(),s=t(e,function(S){var o=Qr(_)();if(o)return ni(Bu(an(S)(a)))();_e(new p(S))(u)();var v=Qr(i)();return Tf(v)(function(ut){return function(){return n(ut(S))}})()}),m=r(e,function(S){var o=Qr(_)();if(o)return ni(Bu(an(S)(c)))();_e(new p(S))(i)();var v=Qr(u)();return Tf(v)(function(ut){return function(){return n(S(ut))}})()});_e(!1)(_)();var A=Bu(ef(a))(),$=Bu(ef(c))();return function(){return A.length===0?_e(Tl($))(i)():Ki(A,function(S){return _e(new p(S))(u)(),Ki($,function(o){return _e(new p(o))(i)(),n(o(S))})})}(),Bu(rf(0)(dn(A))([])(a))(),Bu(rf(0)(dn($))([])(c))(),function(){return s(),m()}}}},Vl=function(t){return function(r){return r}(jl(321).subscribe)(t)},jl=Pm("backdoor","FRP.Event",function(){var t=function(){var e=ol(),n=ge(0)();return{event:function(u,a){var i=ge(a)(),c=Qr(n)();return il(c,i,e),zo(function(_){return _+1|0})(n)(),function(){return _e(Rm)(i)(),fl(c,e),void 0}},push:function(u){return function(){return al(e,function(a){var i=Qr(a)();return i(u)})}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?ga(void 0):e(function(a){return function(){return u(a)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?ga(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(a){return function(){return u(a)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var a=function(i){return function(c){return function(){return i(n,lu(c))}}};return e(a)(function(i){return function(){return u(i)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var a=function(i,c){return i(n,c)};return e(a,u)}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,lu(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,lu(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var a=Jl(722)();return u(e(a.push)(a.event)),ga(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,a){var i=Nm();return a(n(i.event)),e(u,i.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Jl(740)(),a=Vl(e)(u.push)();return{event:u.event,unsubscribe:a}}};return r}(),mailboxed:function(){var r=function(e){var n=Ru(e),u=ti(e);return function(a){return function(i){return function(c,_){var s=ge(Bn)();_(i(function(A){return function($,S){return ni(Qi(n(function(o){if(o instanceof b)return new p([S]);if(o instanceof p)return new p(lS(o.value0)([S]));throw new Error("Failed pattern match at FRP.Event (line 753, column 21 - line 755, column 55): "+[o.constructor.name])})(A))(s))(),ni(Qi(n(function(o){if(o instanceof b)return b.value;if(o instanceof p)return new p(xl(Lm)(S)(o.value0));throw new Error("Failed pattern match at FRP.Event (line 762, column 21 - line 764, column 69): "+[o.constructor.name])})(A))(s))}}));var m=a(c,function(A){var $=Qr(s)(),S=u(A.address)($);if(S instanceof b)return void 0;if(S instanceof p)return Ki(S.value0,function(o){return o(A.payload)});throw new Error("Failed pattern match at FRP.Event (line 771, column 13 - line 773, column 99): "+[S.constructor.name])});return function(){return ni(_e(Bn)(s))(),m()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,a){var i=ge(pS)(),c=n(u,function(_){var s=ge(b.value)(),m=Sm(e)(function(){a(_);var $=Qr(s)();return tr(ga(void 0))(function(S){return zo(_S(S))(i)})($)()})();return _e(new p(m))(s)(),zo(sS(Am(m)))(i)()});return function(){var s=Qr(i)();return vS(s)(Tm)(),c()}}}};return r}()}}),Jl=Pm("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(jl(437).create)()}}),ro=jl(583),Wm=Jl(434),Xl=function(t){return function(r){return r}(ro.bus)(t)};var Hm=function(t){return function(r){return r}(ro.makeLemmingEvent)(t)},yn=function(t){return function(r){return r}(ro.makeLemmingEventO)(t)},Bm=function(t){return function(r){return r}(ro.makePureEvent)(t)},Ef=function(t){return function(r){return r}(ro.memoize)(t)};var Um=function(t){return function(r){return r}(ro.subscribePure)(t)};var CS={apply:function(t){return function(r){return gS(t)(kS(Fo)(r))}},Functor0:function(){return Cr}};var Yt={pure:function(t){return function(r,e){return e(t),ga(void 0)}},Apply0:function(){return CS}};var hr={alt:function(t){return function(r){return function(e,n){return mS(DS(function(u){return function(a){return function(){return u(),a()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Cr}};var d={empty:function(t,r){return ga(void 0)},Alt0:function(){return hr}},hS={Applicative0:function(){return Yt},Plus1:function(){return d}},me={keepLatest:AS,sampleOnRight:bS,sampleOnLeft:dS,fix:yS,Alternative0:function(){return hS},Filterable1:function(){return Un}};var SS=function(t){return t},oi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ii=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),TS=function(t){return t},$f=g(),f=TS;var E=function(){return oi.create}();var G=function(){return ii.create}(),dr=function(){var t=y(na)(y(U)(h(!0)));return function(r){return SS(t(r))}}(),It=function(t){return t.attr};function qm(t){return()=>t.slice()}function zm(t){return r=>e=>()=>{e[t]=r}}function Jm(t){return()=>t.slice()}var Gl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var Yl=function(t){var r=zr(t);return function(){return function(){return function(e){return function(n){return function(u){return Yn(r(e))(n)(u)}}}}}},Ff=function(t){var r=zr(t);return function(){return function(e){return function(n){return Ze(r(e))(n)}}}};var jm=q(gr);var Mf={vb:function(t){return jm(new V({},{}))}},Xm=function(t){return t.vb},MS={vbus:function(){var t=function(){return function(n){var u=Xm(n);return function(a){return function(i){return Hm(function(c){return function(_){return function(){var m=u(Z.value)();return _(i(m.value0)(m.value1))(),jm(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},Zl=function(){return function(t){return function(r){return function(e){return e()(t)}(MS.vbus)(r)}}};var eo=function(t){var r=Yl(t)()();return function(){return function(){return function(e){var n=Xm(e);return function(){return function(){return{vb:function(u){return function(){var i=n(Z.value)(),c=Wm();return new V(r(Z.value)(c.push)(i.value0),r(Z.value)(c.event)(i.value1))}}}}}}}}};var Uu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),tp=function(){function t(){}return t.value=new t,t}();var fi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),no=function(){function t(){}return t.value=new t,t}(),If=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),rp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ep=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ca=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),C=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var qu={eq:function(t){return function(r){return t instanceof Uu&&r instanceof Uu?t.value0===r.value0:t instanceof tp&&r instanceof tp}}};var I=function(t){return new ep(t)};var Gm=function(t){return new rp(t)};var Km=t=>r=>r[t];var ha=function(t){return t.reflectType};var Ym=function(t){return ha(t)};var uo=Dr;var Zm=function(){return function(t){return t}};var np=function(){return function(){return function(){return function(){return function(){return function(t){var r=Ym(t);return function(e){return Km(r(e))}}}}}}};var tD=[];var rD=function(){return function(){return function(t){return function(r){return Qo(t)(r)}}}};function eD(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var zu={};function ap(t){return t()}function nD(t){return function(r){return function(e){return function(n){var u=e;function a(c){return function(_){return r(_)(c)(n[c])}}for(var i in n)hasOwnProperty.call(n,i)&&(u=t(u)(a(i)));return u}}}}function Lf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var WS=Object.keys||Lf(function(t){return function(){return t}});function op(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var ip=function(t){return function(r){return function(){return delete r[t],r}}};var jS=_r(Ft);var XS=Lf(function(t){return function(r){return r}});var GS=eD;var uD=function(t){return function(r){return ap(function(){var n=GS(r)();return t(n)(),n})}};var ao=function(t){return function(r){return uD(op(t)(r))}};var aD=nD(Fo),KS=function(t){var r=nt(t.Semigroup0()),e=qt(t);return function(n){return aD(function(u){return function(a){return function(i){return r(u)(n(a)(i))}}})(e)}},oD={foldl:function(t){return aD(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return jS(t)(r)(XS(e))}}},foldMap:function(t){var r=KS(t);return function(e){return r(h(e))}}};var fp=function(t){return uD(ip(t))};function iD(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function fD(t){return function(r){return function(e){return e[t]=r,e}}}function cD(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function lD(t){return function(r){return delete r[t],r}}var pD=ra;var _D=function(){return function(){return function(t){var r=zr(t);return function(e){return function(n){return function(u){return cD(r(e))(n)(u)}}}}}};var sD=function(){return function(){return function(t){var r=zr(t);return function(e){return function(n){return function(u){return fD(r(e))(n)(u)}}}}}};var vD=function(t){var r=zr(t);return function(){return function(){return function(e){return function(n){return lD(r(e))(n)}}}}};var mD=function(t){return function(r){return t(iD(r))}};var ZS=ya(me),tT=y(Cr),rT=eu(Ft)(d);var eT=At(Eu),nT=y(Dr),lp=Zm(),uT=Fu(Za),aT=Uc(Xs),oo=q(gr),dD=y(se),oT=y(uo),AD=nn(gr),kD=AD(un),DD=Pc(pD),iT=sD()()({reflectSymbol:function(){return"id"}}),fT=_D()()({reflectSymbol:function(){return"parent"}}),cT=vD({reflectSymbol:function(){return"raiseId"}})()(),gn=ir(se),lT=Qn(gr),yD=AD(Ft),pT=Rt(Nt),_T=wr(Ft)(d),sT=ja(gr)(Ft),vT=nt(Jr),mT=ur(oD),DT=mr(Ga),bD=function(){function t(){}return t.value=new t,t}(),pp=function(){function t(){}return t.value=new t,t}(),bT=function(){function t(){}return t.value=new t,t}();var fn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof ep)return _T(fn(t)(r)(e))(u.value0);if(u instanceof Ca)return ZS(tT(fn(t)(r)(e))(u.value0));if(u instanceof C)return n(t.toElt(u.value0));if(u instanceof rp)return yn(function(a,i){var c=pe(zu)(),_=a(u.value0,function(s){var m=t.ids(e)(),A=pe(oo(void 0))(),$=t.ids(e)(),S=pe(oo(void 0))(),o=pe([])(),v=pe(oo(void 0))(),ut=dD(Uu.create)(t.ids(e))(),j=pe(bD.value)(),Pt=a(s,function(Gt){var rt=Kr(j)();if(Gt instanceof If&&rt instanceof pp){var kr=Kr(o)();return sT(function(z){return function(){return i(t.doLogic(Gt.value0)(e)(z))}})(kr)()}if(Gt instanceof no&&rt instanceof pp){gn(mn(bT.value)(j))();var ie=function(){var M=Kr(o)();yD(M)(function(Me){return kD(r.parent)(function(Rr){return function(){return i(t.disconnectElement(e)({id:Me,parent:Rr,scope:ut}))}})})();var st=Kr(A)();st();var Dt=Kr(S)();return Dt(),gn(Lr(fp(m))(c))(),gn(Lr(fp($))(c))()};return gn(mn(ie)(v))(),ie()}if(Gt instanceof fi&&rt instanceof bD){gn(mn(pp.value)(j))();var ot=a(fn(t)(function(){var z={};for(var M in r)({}).hasOwnProperty.call(r,M)&&(z[M]=r[M]);return z.scope=ut,z.raiseId=function(st){return gn(Lr(vT([st]))(o))},z}())(e)(Gt.value0),i);return gn(Lr(ao($)(ot))(c))(),gn(mn(ot)(S))()}return void 0});gn(mn(Pt)(A))(),gn(Lr(ao(m)(Pt))(c))();var Ot=Kr(v)();return Ot()});return function(){return eT(Kr(c))(mT(DT)(oo(void 0)))(),_()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},dT=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(a){var i=function(c){return function(_){return yn(function(s,m){var A=qm(nT(h(""))(lp(u)))(),$=rT(uT(function(Ot){return aT(function(Gt){return function(rt){return rt instanceof C?function(kr){return kr(function(){var ie={};for(var ot in c)({}).hasOwnProperty.call(c,ot)&&(ie[ot]=c[ot]);return ie.parent=b.value,ie.scope=r(c.scope),ie.raiseId=function(z){return zm(Ot)(z)(A)},ie}())(_)}(n.toElt(rt.value0)):Gt(n.wrapElt(rt))}})})(lp(u))),S=s($,m),o=pe(oo(void 0))(),v=dD(Q)(Jm(A))(),ut=oT(function(Ot){return function(Gt){return new C(n.fromEltO1(function(rt){return function(kr){return yn(function(ie,ot){return rt.raiseId(Ot)(),kD(rt.parent)(function(z){return function(){return ot(n.giveNewParent(kr)(mD(DD(iT(Z.value)(Ot))(DD(fT(Z.value)(h(z)))(cT(Z.value))))(rt))(Gt))}})(),oo(void 0)})}}))}})(v),j=fn(e)(c)(_)(a(ut)(Q)),Pt=s(j,m);return gn(mn(Pt)(o))(),function(){S(),lT(!t)(yD(lp(v))(function(rt){return function(){return m(n.deleteFromCache(_)({id:rt}))}}))();var Gt=Kr(o)();return Gt()}})}};return new C(n.fromEltO2(i))}}}}}}}}},AT=dT()()();var gD=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return AT(!1)(pT)(t)(r)(e)(n)}}}}}}};var sp=g(),kT=Zl(),yT=Pe(Le),gT=y(Cr),vp=$r(),CT=St(qu),hT=q(gr),_p=q(Yt),ST=k(d),TT=eu(Ft)(d);var Of=function(){return function(t){var r=kT(t);return function(e){return function(n){return new Ca(sp(r(e)(n)))}}}};var hD=function(t){return function(r){var e=function(n){return n instanceof C?new C(yT(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof Ca?new Ca(gT(e)(n.value0)):r};return e(r)}},L=function(t){return hD(p.create(t))};var mp=function(){return If.create}(),Dp=function(){return no.value}(),ET=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(vp(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:CT})}},toElt:function(t){return t}}},$T=ET(),io=function(t){return new fi(vp(hD(b.value)(t)))},SD=function(t){return function(r){return new fi(vp(L(t)(r)))}},Ju=function(t){return Xl(t)};var fo=function(t){return new Ca(sp(Ju(t)))};var FT=function(t){return function(r){return function(e){return fn($T)(t)(r)(e)}}},xT=function(t){return function(r){var e=function(n){return function(u){return yn(function(a,i){var c=u.ids();n.raiseId(c)();var _=function(){if(n.parent instanceof b){var m=u.ids();return new V(_p(u.makeElement({id:m,parent:b.value,scope:n.scope,tag:"div",pos:b.value,dynFamily:b.value})),m)}if(n.parent instanceof p)return new V(ST,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 339, column 34 - line 353, column 36): "+[n.parent.constructor.name])}(),s=a(TT([_.value0,_p(u.makeDynBeacon({id:c,parent:new p(_.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),_p(u.attributeParent({id:c,parent:_.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),FT({parent:new p(_.value1),scope:n.scope,ez:!1,raiseId:function(m){return hT(void 0)},pos:b.value,dynFamily:new p(c)})(u)(t(r))]),i);return function(){return i(u.removeDynBeacon({id:c})),s()}})}};return new C(e)}},Vu=xT(sp(Gm));var Nf=y(Cr),bp=eu(Ft)(d),co=q(Yt),ED=k(d),MT=q(gr),wT=Wu(me),IT=ya(me),LT=Wl(Un),PT=St(La),ci=g(),Rf=$r(),OT=St(qu);var RT=Wt(hr);var NT=nt(Jr);var TD=y(uo);var WT=Xi(),HT=Pe(Le);var BT=gD()()();var UT=function(t){return function(r){return function(e){return Nf(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},qT=function(t){return function(r){return function(e){return Nf(function(n){return function(u){if(u.value instanceof oi)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof ii)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 62, column 26 - line 64, column 45): "+[u.value.constructor.name])}($f(n))})(e)}}},Xe=function(t){var r=function(e){return function(n){return yn(function(u,a){var i=n.ids();e.raiseId(i)();var c=u(bp([co(n.makeText({id:i,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),UT(n)(i)(t),tr(ED)(function(_){return co(n.attributeParent({id:i,parent:_,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),a);return function(){return a(n.deleteFromCache({id:i})),c()}})}};return new C(r)},Zt=function(t){return Xe(co(t))},Wf=function(t){return function(r){var e=function(){var n=function(u){return function(a){return new V(u+1|0,new V(a,u))}};return wT(n)(0)}();return Vu(IT(Ef(e(r))(function(n){return Nf(function(u){return bp([Nf(h(no.value))(LT(function(){var a=PT(u.value1+1|0);return function(i){return a(Vr(i))}}())(n)),co(io(ci(t(u.value0))))])})(n)})))}},zT=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Rf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:OT})}},toElt:function(t){return t}}},$D=zT();var JT=function(t){return function(r){return function(e){return fn($D)(t)(r)(e)}}};var P=function(t){return function(r){return function(e){var n=function(u){return function(a){return yn(function(i,c){var _=a.ids();u.raiseId(_)();var s=i(RT(bp(NT([co(a.makeElement({id:_,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),qT(a)(_)(r)])(tr([])(function(m){return[co(a.attributeParent({id:_,parent:m,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(JT({parent:new p(_),scope:u.scope,ez:!0,raiseId:function(m){return MT(void 0)},pos:b.value,dynFamily:b.value})(a)(e)),c);return function(){return c(a.deleteFromCache({id:_})),s()}})}};return n}}};var FD=function(){return function(t){return function(r){return BT($D)({fromEltO1:ci,fromEltO2:ci,toElt:ci,wrapElt:function(e){return new C(P("div")(ED)(WT(e)))},giveNewParent:function(e){return function(n){return function(u){return Rf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(Rf(e))}})(TD(Rf)(t))(HT(TD(function(e){return e(void 0)}))(ci(r)))}}};var Wr=function(){function t(){}return t.value=new t,t}();var Xr={attr:function(t){return function(r){return f({key:"href",value:E(r)})}}};var VT=X(U),Ar=function(){function t(){}return t.value=new t,t}(),ju={attr:function(t){return function(r){return f({key:"click",value:G(h(VT(r)(!0)))})}}};var Gr={attr:function(t){return function(r){return f({key:"click",value:G(r)})}}};var De=function(){function t(){}return t.value=new t,t}();var lo={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var xD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var MD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var wD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var ID={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var LD={attr:function(t){return function(r){return f({key:"style",value:E(r)})}}};var PD=g(),pi=function(t){return function(r){return new C(P("a")(t)(PD(I(PD(w(L)(r))))))}};var RD=g(),Hf=function(t){return function(r){return new C(P("div")(t)(RD(I(RD(w(L)(r))))))}},cr=Hf(k(d));var ND=g(),Gu=function(t){return function(r){return new C(P("span")(t)(ND(I(ND(w(L)(r))))))}},_i=Gu(k(d));var Sa=function(){function t(){}return t.value=new t,t}();var WD={attr:function(t){return function(r){return f({key:"type",value:E(r)})}}};var Uf={attr:function(t){return function(r){return f({key:"type",value:E(r)})}}};var HD=g(),Ce=function(t){return function(r){return new C(P("button")(t)(HD(I(HD(w(L)(r))))))}},Ap=Ce(k(d));var BD=g(),UD=function(t){return function(r){return new C(P("code")(t)(BD(I(BD(w(L)(r))))))}},Pr=UD(k(d));var qD=g(),zD=function(t){return function(r){return new C(P("i")(t)(qD(I(qD(w(L)(r))))))}},kp=zD(k(d));var JD=g(),_u=function(t){return function(r){return new C(P("input")(t)(JD(I(JD(w(L)(r))))))}};var VD=g(),jD=function(t){return function(r){return new C(P("li")(t)(VD(I(VD(w(L)(r))))))}},yp=jD(k(d));var XD=g(),GD=function(t){return function(r){return new C(P("pre")(t)(XD(I(XD(w(L)(r))))))}},Or=GD(k(d));var KD=g(),QD=function(t){return function(r){return new C(P("ul")(t)(KD(I(KD(w(L)(r))))))}},gp=QD(k(d));var zn=q(In),KT=k(Us),zf=function(){function t(){}return t.value=new t,t}(),po=function(){function t(){}return t.value=new t,t}(),_o=function(){function t(){}return t.value=new t,t}(),so=function(){function t(){}return t.value=new t,t}(),vo=function(){function t(){}return t.value=new t,t}(),mo=function(){function t(){}return t.value=new t,t}(),Do=function(){function t(){}return t.value=new t,t}(),bo=function(){function t(){}return t.value=new t,t}(),Ao=function(){function t(){}return t.value=new t,t}(),ko=function(){function t(){}return t.value=new t,t}(),YD=function(t){return t==="Intro"?zn(zf.value):t==="HelloWorld"?zn(po.value):t==="SimpleComponent"?zn(_o.value):t==="PURSX1"?zn(so.value):t==="PURSX2"?zn(vo.value):t==="Events"?zn(mo.value):t==="Effects"?zn(Do.value):t==="Events2"?zn(bo.value):t==="Portals"?zn(Ao.value):t==="SSR"?zn(ko.value):KT};function Cp(){window.scrollTo(0,0)}var ue=Cp;var tb=k(d),rb=Wt(hr),YT=y(Cr),ZT=Pe(Le),tE=eu(Ft)(d),ZD=q(Yt),rE=q(gr),eE={reflectType:function(){return"~"}},nE=$r(),uE=St(qu),aE=g();var Br={pursxToElement:function(t){return function(r){return function(e){return{cache:zu,element:function(n){return function(u){return tb}}}}}}},hp=function(t){return t.pursxToElement},ae=function(){return function(t){var r=hp(t);return function(e){var n=ha(e);return function(u){var a=Ff(u)();return{pursxToElement:function(i){return function(c){return function(_){var s=r(i)(Z.value)(_);return{cache:ao(n(Z.value))(!0)(s.cache),element:function(m){return function(A){return rb(YT(ZT($f)(function($){if($.value instanceof oi)return A.setProp({id:n(Z.value)+("@!%"+i),key:$.key,value:$.value.value0});if($.value instanceof ii)return A.setCb({id:n(Z.value)+("@!%"+i),key:$.key,value:$.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4578, column 38 - line 4588, column 24): "+[$.value.constructor.name])}))(a(Z.value)(_)))(s.element(m)(A))}}}}}}}}}}};var Sp=function(t){var r=ha(t);return function(e){var n=ha(e);return function(){return function(){return function(u){var a=hp(u);return function(i){return function(c){return function(_){var s=function(m){return function(A){return yn(function($,S){var o=A.ids(),v=A.ids();m.raiseId(o)();var ut=a(v)(Z.value)(_),j=$(tE([ZD(A.makePursx({id:o,parent:m.parent,cache:ut.cache,dynFamily:m.dynFamily,pos:m.pos,pxScope:v,scope:m.scope,html:r(c),verb:n(i)})),ut.element(m)(A),tr(tb)(function(Pt){return ZD(A.attributeParent({id:o,parent:Pt,pos:m.pos,dynFamily:m.dynFamily,ez:!1}))})(m.parent)]),S);return function(){return S(A.deleteFromCache({id:o})),j()}})}};return new C(s)}}}}}}}},Ur=function(t){var r=Sp(t)(eE)()();return function(){return function(){return function(e){return r(e)(Z.value)}}}},eb=function(t){var r=Ur(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},oE=function(t){return function(r){return function(e){return fn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(n){return function(u){return u.ids}(nE(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:uE})}},toElt:function(n){return n}})(t)(r)(aE(e))}}},oe=function(){return function(t){var r=hp(t);return function(e){var n=ha(e);return function(u){var a=Ff(u)();return{pursxToElement:function(i){return function(c){return function(_){var s=a(Z.value)(_),m=r(i)(Z.value)(_);return{cache:ao(n(Z.value))(!1)(m.cache),element:function(A){return function($){return rb(oE({parent:new p(n(Z.value)+("@!%"+i)),scope:A.scope,raiseId:function(S){return rE(void 0)},pos:A.pos,ez:!1,dynFamily:b.value})($)(s))(m.element(A)($))}}}}}}}}}}};var Tp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Do (useState')
import Deku.Do as Deku
import Deku.Pursx ((~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState'
  myDom ~~
    { myli: pure (D.Style := "background-color:rgb(200,240,210);")
    , somethingNew:
        ( D.button (pure (D.OnClick := push (Just unit)))
            [ text
                $ (compact event $> "Thanks for clicking me!") <|>
                    pure "I was dynamically inserted"
            ]
        )
    }`,Ep=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,$p=`module Main where

import Prelude

import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Do (useState)
import Deku.Do as Deku
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState unit
  portal
    ( map
        ( \\i -> D.video
            (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
            [ D.source
                (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                []
            ]
        )
        ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
            : "https://www.w3schools.com/jsref/movie.mp4"
            : V.empty
        )
    )
    \\v _ -> do
      let
        p0 :: Domable _ _
        p0 = index (Proxy :: _ 0) v

        p1 :: Domable _ _
        p1 = index (Proxy :: _ 1) v

        ev :: Boolean -> Event Boolean
        ev b = fold (\\a _ -> not a) b event

        flips :: Boolean -> Domable _ _
        flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
      D.div_
        [ D.button (pure $ D.OnClick := push unit)
            [ text_ "Switch videos" ]
        , D.div_ [ D.span_ [ flips true ], flips false ]
        ]
`,Fp=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,xp=`module Main where

import Prelude

import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn)
import Deku.DOM as D
import Deku.Do (useDyn_, useState')
import Deku.Do as Deku
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

main :: Effect Unit
main = runInBody Deku.do
  pushAction /\\ actionEvent <- useState'
  let
    accumulateTextAndEmitOnSubmit :: Event String
    accumulateTextAndEmitOnSubmit = compact
      ( mapAccum
          ( \\a b -> case b of
              AddTodo -> a /\\ Just a
              ChangeText s -> s /\\ Nothing
          )
          ""
          actionEvent
      )

    top :: Nut
    top =
      D.div_
        [ D.input
            ( oneOf
                [ textInput $ pure (pushAction <<< ChangeText)
                , keyUp $ pure \\evt -> do
                    when (code evt == "Enter") $ do
                      pushAction AddTodo
                ]
            )
            []
        , D.button
            (click $ pure $ pushAction AddTodo)
            [ text_ "Add" ]
        ]
  D.div_
    [ top
    , dyn
        $ map
            ( \\txt -> Deku.do
                { remove, sendTo } <- useDyn_
                D.div_
                  [ text_ txt
                  , D.button
                      (click $ pure (sendTo 0))
                      [ text_ "Prioritize" ]
                  , D.button
                      (click $ pure remove)
                      [ text_ "Delete" ]
                  ]
            )
            accumulateTextAndEmitOnSubmit
    ]

`,Mp=`module Main where

import Prelude

import Data.Tuple.Nested ((/\\))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Do (useState)
import Deku.Do as Deku
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)

main :: Effect Unit
main = runInBody Deku.do
  setButtonClicked /\\ buttonClicked <- useState unit
  setSliderMoved /\\ sliderMoved <- useState 50.0
  let
    countUp :: Event Int
    countUp = fold (\\a _ -> 1 + a) (-1) buttonClicked
  D.div_
    [ D.button
        (click_ (setButtonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            (("Val: " <> _) <<< show <$> countUp)
        ]
    , D.div_
        [ D.input
            (slider (pure setSliderMoved))
            []
        , D.div_
            [ text
                (("Val: " <> _) <<< show <$> sliderMoved)
            ]
        ]
    ]
`,wp=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Do (useState)
import Deku.Do as Deku
import Deku.Listeners (click_)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody Deku.do
  setUIAction /\\ uiAction <- useState Initial
  let
    split :: { left :: Event Unit, right :: Event String }
    split = separate $ compact $
      map
        ( case _ of
            Loading -> Just $ Left unit
            Result s -> Just $ Right s
            _ -> Nothing
        )
        uiAction
    { left: loading, right: result } = split
  D.div_
    [ D.div_
        [ D.button (click_ (clickCb setUIAction))
            [ text
                ( pure clickText
                    <|> (loading $> "Loading...")
                    <|> (result $> clickText)
                )
            ]
        ]
    , D.div
        ( (pure (D.Style := "display: none;")) <|>
            ( compact
                ( mapAccum
                    ( \\b _ -> (b && false) /\\
                        if b then Just unit else Nothing
                    )
                    true
                    result
                ) $> (D.Style := "display: block;")
            )
        )
        [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
    ]
`,Ip=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  ( D.div_
      [ D.button_ [ text_ "I do nothing" ]
      , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
      , D.div_
          [ D.a (pure $ D.Href := "https://example.com")
              [ text_ "foo " ]
          , D.i_ [ text_ " bar " ]
          , D.span (pure $ D.Style := "font-weight: 800;")
              [ text_ " baz" ]
          ]
      , D.div_
          [ D.div_
              [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
              ]
          ]
      ]
  )`,Lp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Pp=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,Op=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function nb(t){return t.target}function qr(t){return function(){return t.preventDefault()}}function ub(t,r,e){return t==null?r:e(t)}function Rp(t){return t}var yo=tr(null)(Rp),Yr=function(t){return ub(t,b.value,p.create)};var Xf=function(t){return Yr(nb(t))};var ob=oe(),sE=Ur({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(ob(ae()(ob(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),vE=y(Dr),mE=q(ua),Gf=q(Yt),ib=It(Xr),DE=It(lo),bE=It(Uf),dE=wr(Ft)(d),AE=It(Gr),fb=mr(Ir),kE=function(){return Z.value}(),cb=function(t){return sE(kE)({code:Or([Pr([Zt(Ip)])]),result:cr([Ap([Zt("I do nothing")]),gp(vE(function(r){return yp(mE(Zt(r)))})(["A","B","C"])),cr([pi(Gf(ib(Wr.value)("https://example.com")))([Zt("foo ")]),kp([Zt(" bar ")]),Gu(Gf(DE(De.value)("font-weight: 800;")))([Zt(" baz")])]),cr([cr([cr([_u(Gf(bE(Sa.value)("range")))([])])])])]),next:dE(Gf)([AE(Ar.value)(dr(function(r){return fb(fb(qr(r))(t.dpage(so.value)))(ue)})),ib(Wr.value)(t.slug+"pursx1/")])})};function lb(t,r,e,n,u){return function(a,i){var c=t.newXHR(),_=t.fixupUrl(u.url,c);if(c.open(u.method||"GET",_,!0,u.username,u.password),u.headers)try{for(var s=0,m;(m=u.headers[s])!=null;s++)c.setRequestHeader(m.field,m.value)}catch($){a($)}var A=function($){return function(){a(new Error($))}};return c.onerror=A(e),c.ontimeout=A(r),c.onload=function(){i({status:c.status,statusText:c.statusText,headers:c.getAllResponseHeaders().split(`\r
`).filter(function($){return $.length>0}).map(function($){var S=$.indexOf(":");return n($.substring(0,S))($.substring(S+2))}),body:c.response})},c.responseType=u.responseType,c.withCredentials=u.withCredentials,c.timeout=u.timeout,c.send(u.content),function($,S,o){try{c.abort()}catch(v){return S(v)}return o()}}}var Kf="application/json",pb="application/x-www-form-urlencoded";var sb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Db=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Np=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Wp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),db=function(t){return t instanceof Np?new p(pb):t instanceof Wp?new p(Kf):b.value};var Ab=$r();var Qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Yf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kb=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),yb=function(t){if(t instanceof Qf||t instanceof Yf)return Ab(t.value0);if(t instanceof kb)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var Hp=function(t){if(t instanceof Qf)return"Accept";if(t instanceof Yf)return"Content-Type";if(t instanceof kb)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var gb=Rt(Nt),Bp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Up=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),si=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Zf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Cb=function(t){if(t instanceof Bp)return"arraybuffer";if(t instanceof Up)return"blob";if(t instanceof qp)return"document";if(t instanceof si||t instanceof zp)return"text";if(t instanceof Zf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},hb=function(t){return t instanceof si?new p(Kf):b.value};var Sb=function(){return new si(gb)}(),Tb=function(){return new Zf(gb)}();var $b=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function go(t){return new Error(t)}function vi(t){return t.message}function mi(t){return function(){throw t}}var Sn=function(t){return t.throwError};var Du=function(t){return t.catchError};var rc=function(t){var r=Du(t),e=t.MonadThrow0().Monad0(),n=y(e.Bind1().Apply0().Functor0()),u=q(e.Applicative0());return function(a){return r(n(ft.create)(a))(function(i){return u(lt.create(i))})}};var jn=function(t){return t.state};var di=function(t){var r=jn(t);return function(e){return r(function(n){var u=e(n);return new V(u,u)})}};var Tn=function(t){return t.liftEffect};var $E=y(Ha);var Jp=function(t){return t};var Vp=function(t){return t};var oc=function(t){return function(r){return t(r)}},xb=function(t){var r=y(t);return{map:function(e){return oc(r($E(e)))}}};var jp=function(t){return{Applicative0:function(){return gi(t)},Bind1:function(){return Xp(t)}}},Xp=function(t){var r=At(t.Bind1()),e=q(t.Applicative0());return{bind:function(n){return function(u){return r(n)(rn(function(a){return e(lt.create(a))})(function(a){var i=u(a);return i}))}},Apply0:function(){return Mb(t)}}},Mb=function(t){var r=xb(t.Bind1().Apply0().Functor0());return{apply:Oe(jp(t)),Functor0:function(){return r}}},gi=function(t){return{pure:function(){var r=q(t.Applicative0());return function(e){return Jp(r(ft.create(e)))}}(),Apply0:function(){return Mb(t)}}};var wb=function(t){var r=jp(t);return{throwError:function(){var e=q(t.Applicative0());return function(n){return Jp(e(lt.create(n)))}}(),Monad0:function(){return r}}};var Ib=function(t){var r=nt(t);return function(e){var n=e.Bind1(),u=At(n),a=q(e.Applicative0()),i=xb(n.Apply0().Functor0());return{alt:function(c){return function(_){return u(c)(function(s){if(s instanceof ft)return a(new ft(s.value0));if(s instanceof lt)return u(_)(function(m){if(m instanceof ft)return a(new ft(m.value0));if(m instanceof lt)return a(new lt(r(s.value0)(m.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[m.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[s.constructor.name])})}},Functor0:function(){return i}}}};var xE=$r();var Lb=function(t){return xE(Vp(t))};function Gp(t){return JSON.stringify(t)}function Kp(t){return function(r){return JSON.stringify(r,null,t)}}var Pb=zu;function Rb(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var Nb=function(t){return Rb(lt.create,ft.create,t)};var fc=function(t){return function(r){return function(e){return e.replace(t,r)}}};var Qp=function(t){return function(r){return r.join(t)}};function WE(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function Bb(t,r,e){try{return r(WE(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var cc=function(){return Gl(Bb)(h(b.value))(p.create)}();var UE=Jt(ca),Ub=y(Er),qE=Ne(va)(In);var zE=function(t){return t};var qb=function(){var t=function(n){if(n.value1 instanceof b)return cc(n.value0);if(n.value1 instanceof p)return UE(Ub(function(u){return function(a){return u+("="+a)}})(cc(n.value0)))(cc(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=Ub(Qp("&")),e=qE(t);return function(n){return r(e(zE(n)))}}();var VE=function(){function t(){}return t.value=new t,t}(),hi=function(){function t(){}return t.value=new t,t}(),jE=function(){function t(){}return t.value=new t,t}(),zb=function(){function t(){}return t.value=new t,t}(),Jb=function(){function t(){}return t.value=new t,t}(),Vb=function(){function t(){}return t.value=new t,t}(),XE=function(){function t(){}return t.value=new t,t}(),GE=function(){function t(){}return t.value=new t,t}(),KE=function(){function t(){}return t.value=new t,t}(),QE=function(){function t(){}return t.value=new t,t}(),YE=function(){function t(){}return t.value=new t,t}(),ZE=function(){function t(){}return t.value=new t,t}(),t$=function(){function t(){}return t.value=new t,t}(),r$=function(){function t(){}return t.value=new t,t}(),e$=function(){function t(){}return t.value=new t,t}(),jb=function(){function t(){}return t.value=new t,t}();var n$=function(t){return t},u$={show:function(t){if(t instanceof VE)return"OPTIONS";if(t instanceof hi)return"GET";if(t instanceof jE)return"HEAD";if(t instanceof zb)return"POST";if(t instanceof Jb)return"PUT";if(t instanceof Vb)return"DELETE";if(t instanceof XE)return"TRACE";if(t instanceof GE)return"CONNECT";if(t instanceof KE)return"PROPFIND";if(t instanceof QE)return"PROPPATCH";if(t instanceof YE)return"MKCOL";if(t instanceof ZE)return"COPY";if(t instanceof t$)return"MOVE";if(t instanceof r$)return"LOCK";if(t instanceof e$)return"UNLOCK";if(t instanceof jb)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Xb=rn(_t(u$))(n$);var Qb=function(){var t=Df(wl);return function(r){return bf(t(r))}}();var Yb=function(t){return t.value0};var We=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",a="Async",i="Bind",c="Bracket",_="Fork",s="Sequential",m="Map",A="Apply",$="Alt",S="Cons",o="Resume",v="Release",ut="Finalizer",j="Finalized",Pt="Forked",Ot="Fiber",Gt="Thunk";function rt(ct,ar,Fr,lr){this.tag=ct,this._1=ar,this._2=Fr,this._3=lr}function kr(ct){var ar=function(Fr,lr,kt){return new rt(ct,Fr,lr,kt)};return ar.tag=ct,ar}function ie(ct){return new rt(r,void 0)}function ot(ct){try{ct()}catch(ar){setTimeout(function(){throw ar},0)}}function z(ct,ar,Fr){try{return ar(Fr())}catch(lr){return ct(lr)}}function M(ct,ar,Fr){try{return ar(Fr)()}catch(lr){return Fr(ct(lr))(),ie}}var st=function(){var ct=1024,ar=0,Fr=0,lr=new Array(ct),kt=!1;function tt(){var fr;for(kt=!0;ar!==0;)ar--,fr=lr[Fr],lr[Fr]=void 0,Fr=(Fr+1)%ct,fr();kt=!1}return{isDraining:function(){return kt},enqueue:function(fr){var zt,Tr;ar===ct&&(Tr=kt,tt(),kt=Tr),lr[(Fr+ar)%ct]=fr,ar++,kt||tt()}}}();function Dt(ct){var ar={},Fr=0,lr=0;return{register:function(kt){var tt=Fr++;kt.onComplete({rethrow:!0,handler:function(fr){return function(){lr--,delete ar[tt]}}})(),ar[tt]=kt,lr++},isEmpty:function(){return lr===0},killAll:function(kt,tt){return function(){if(lr===0)return tt();var fr=0,zt={};function Tr(sr){zt[sr]=ar[sr].kill(kt,function(Nr){return function(){delete zt[sr],fr--,ct.isLeft(Nr)&&ct.fromLeft(Nr)&&setTimeout(function(){throw ct.fromLeft(Nr)},0),fr===0&&tt()}})()}for(var te in ar)ar.hasOwnProperty(te)&&(fr++,Tr(te));return ar={},Fr=0,lr=0,function(sr){return new rt(u,function(){for(var Nr in zt)zt.hasOwnProperty(Nr)&&zt[Nr]()})}}}}}var Me=0,Rr=1,Au=2,Ma=3,wa=4,Se=5,To=6;function Lc(ct,ar,Fr){var lr=0,kt=Me,tt=Fr,fr=null,zt=null,Tr=null,te=null,sr=null,Nr=0,ta=0,Ye=null,ku=!0;function yu(yt){for(var ht,Kt,er;;)switch(ht=null,Kt=null,er=null,kt){case Au:kt=Rr;try{tt=Tr(tt),te===null?Tr=null:(Tr=te._1,te=te._2)}catch(fe){kt=Se,fr=ct.left(fe),tt=null}break;case Ma:ct.isLeft(tt)?(kt=Se,fr=tt,tt=null):Tr===null?kt=Se:(kt=Au,tt=ct.fromRight(tt));break;case Rr:switch(tt.tag){case i:Tr&&(te=new rt(S,Tr,te)),Tr=tt._2,kt=Rr,tt=tt._1;break;case r:Tr===null?(kt=Se,tt=ct.right(tt._1)):(kt=Au,tt=tt._1);break;case u:kt=Ma,tt=z(ct.left,ct.right,tt._1);break;case a:kt=wa,tt=M(ct.left,tt._1,function(fe){return function(){lr===yt&&(lr++,st.enqueue(function(){lr===yt+1&&(kt=Ma,tt=fe,yu(lr))}))}});return;case e:kt=Se,fr=ct.left(tt._1),tt=null;break;case n:Tr===null?sr=new rt(S,tt,sr,zt):sr=new rt(S,tt,new rt(S,new rt(o,Tr,te),sr,zt),zt),Tr=null,te=null,kt=Rr,tt=tt._1;break;case c:Nr++,Tr===null?sr=new rt(S,tt,sr,zt):sr=new rt(S,tt,new rt(S,new rt(o,Tr,te),sr,zt),zt),Tr=null,te=null,kt=Rr,tt=tt._1;break;case _:kt=Ma,ht=Lc(ct,ar,tt._2),ar&&ar.register(ht),tt._1&&ht.run(),tt=ct.right(ht);break;case s:kt=Rr,tt=Qk(ct,ar,tt._1);break}break;case Se:if(Tr=null,te=null,sr===null)kt=To,tt=zt||fr||tt;else switch(ht=sr._3,er=sr._1,sr=sr._2,er.tag){case n:zt&&zt!==ht&&Nr===0?kt=Se:fr&&(kt=Rr,tt=er._2(ct.fromLeft(fr)),fr=null);break;case o:zt&&zt!==ht&&Nr===0||fr?kt=Se:(Tr=er._1,te=er._2,kt=Au,tt=ct.fromRight(tt));break;case c:Nr--,fr===null&&(Kt=ct.fromRight(tt),sr=new rt(S,new rt(v,er._2,Kt),sr,ht),(zt===ht||Nr>0)&&(kt=Rr,tt=er._3(Kt)));break;case v:sr=new rt(S,new rt(j,tt,fr),sr,zt),kt=Rr,zt&&zt!==ht&&Nr===0?tt=er._1.killed(ct.fromLeft(zt))(er._2):fr?tt=er._1.failed(ct.fromLeft(fr))(er._2):tt=er._1.completed(ct.fromRight(tt))(er._2),fr=null,Nr++;break;case ut:Nr++,sr=new rt(S,new rt(j,tt,fr),sr,zt),kt=Rr,tt=er._1;break;case j:Nr--,kt=Se,tt=er._1,fr=er._2;break}break;case To:for(var Mr in Ye)Ye.hasOwnProperty(Mr)&&(ku=ku&&Ye[Mr].rethrow,ot(Ye[Mr].handler(tt)));Ye=null,zt&&fr?setTimeout(function(){throw ct.fromLeft(fr)},0):ct.isLeft(tt)&&ku&&setTimeout(function(){if(ku)throw ct.fromLeft(tt)},0);return;case Me:kt=Rr;break;case wa:return}}function xr(yt){return function(){if(kt===To)return ku=ku&&yt.rethrow,yt.handler(tt)(),function(){};var ht=ta++;return Ye=Ye||{},Ye[ht]=yt,function(){Ye!==null&&delete Ye[ht]}}}function Et(yt,ht){return function(){if(kt===To)return ht(ct.right(void 0))(),function(){};var Kt=xr({rethrow:!1,handler:function(){return ht(ct.right(void 0))}})();switch(kt){case Me:zt=ct.left(yt),kt=To,tt=zt,yu(lr);break;case wa:zt===null&&(zt=ct.left(yt)),Nr===0&&(kt===wa&&(sr=new rt(S,new rt(ut,tt(yt)),sr,zt)),kt=Se,tt=null,fr=null,yu(++lr));break;default:zt===null&&(zt=ct.left(yt)),Nr===0&&(kt=Se,tt=null,fr=null)}return Kt}}function Xt(yt){return function(){var ht=xr({rethrow:!1,handler:yt})();return kt===Me&&yu(lr),ht}}return{kill:Et,join:Xt,onComplete:xr,isSuspended:function(){return kt===Me},run:function(){kt===Me&&(st.isDraining()?yu(lr):st.enqueue(function(){yu(lr)}))}}}function Kk(ct,ar,Fr,lr){var kt=0,tt={},fr=0,zt={},Tr=new Error("[ParAff] Early exit"),te=null,sr=t;function Nr(xr,Et,Xt){var yt=Et,ht=null,Kt=null,er=0,Mr={},fe,Eo;t:for(;;)switch(fe=null,yt.tag){case Pt:if(yt._3===t&&(fe=tt[yt._1],Mr[er++]=fe.kill(xr,function(Yk){return function(){er--,er===0&&Xt(Yk)()}})),ht===null)break t;yt=ht._2,Kt===null?ht=null:(ht=Kt._1,Kt=Kt._2);break;case m:yt=yt._2;break;case A:case $:ht&&(Kt=new rt(S,ht,Kt)),ht=yt,yt=yt._1;break}if(er===0)Xt(ct.right(void 0))();else for(Eo=0,fe=er;Eo<fe;Eo++)Mr[Eo]=Mr[Eo]();return Mr}function ta(xr,Et,Xt){var yt,ht,Kt,er,Mr,fe;ct.isLeft(xr)?(yt=xr,ht=null):(ht=xr,yt=null);t:for(;;){if(Kt=null,er=null,Mr=null,fe=null,te!==null)return;if(Et===null){lr(yt||ht)();return}if(Et._3!==t)return;switch(Et.tag){case m:yt===null?(Et._3=ct.right(Et._1(ct.fromRight(ht))),ht=Et._3):Et._3=yt;break;case A:if(Kt=Et._1._3,er=Et._2._3,yt){if(Et._3=yt,Mr=!0,fe=fr++,zt[fe]=Nr(Tr,yt===Kt?Et._2:Et._1,function(){return function(){delete zt[fe],Mr?Mr=!1:Xt===null?ta(yt,null,null):ta(yt,Xt._1,Xt._2)}}),Mr){Mr=!1;return}}else{if(Kt===t||er===t)return;ht=ct.right(ct.fromRight(Kt)(ct.fromRight(er))),Et._3=ht}break;case $:if(Kt=Et._1._3,er=Et._2._3,Kt===t&&ct.isLeft(er)||er===t&&ct.isLeft(Kt))return;if(Kt!==t&&ct.isLeft(Kt)&&er!==t&&ct.isLeft(er))yt=ht===Kt?er:Kt,ht=null,Et._3=yt;else if(Et._3=ht,Mr=!0,fe=fr++,zt[fe]=Nr(Tr,ht===Kt?Et._2:Et._1,function(){return function(){delete zt[fe],Mr?Mr=!1:Xt===null?ta(ht,null,null):ta(ht,Xt._1,Xt._2)}}),Mr){Mr=!1;return}break}Xt===null?Et=null:(Et=Xt._1,Xt=Xt._2)}}function Ye(xr){return function(Et){return function(){delete tt[xr._1],xr._3=Et,ta(Et,xr._2._1,xr._2._2)}}}function ku(){var xr=Rr,Et=Fr,Xt=null,yt=null,ht,Kt;t:for(;;)switch(ht=null,Kt=null,xr){case Rr:switch(Et.tag){case m:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt(m,Et._1,t,t),Et=Et._2;break;case A:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt(A,t,Et._2,t),Et=Et._1;break;case $:Xt&&(yt=new rt(S,Xt,yt)),Xt=new rt($,t,Et._2,t),Et=Et._1;break;default:Kt=kt++,xr=Se,ht=Et,Et=new rt(Pt,Kt,new rt(S,Xt,yt),t),ht=Lc(ct,ar,ht),ht.onComplete({rethrow:!1,handler:Ye(Et)})(),tt[Kt]=ht,ar&&ar.register(ht)}break;case Se:if(Xt===null)break t;Xt._1===t?(Xt._1=Et,xr=Rr,Et=Xt._2,Xt._2=t):(Xt._2=Et,Et=Xt,yt===null?Xt=null:(Xt=yt._1,yt=yt._2))}for(sr=Et,Kt=0;Kt<kt;Kt++)tt[Kt].run()}function yu(xr,Et){te=ct.left(xr);var Xt;for(var yt in zt)if(zt.hasOwnProperty(yt)){Xt=zt[yt];for(yt in Xt)Xt.hasOwnProperty(yt)&&Xt[yt]()}zt=null;var ht=Nr(xr,sr,Et);return function(Kt){return new rt(a,function(er){return function(){for(var Mr in ht)ht.hasOwnProperty(Mr)&&ht[Mr]();return ie}})}}return ku(),function(xr){return new rt(a,function(Et){return function(){return yu(xr,Et)}})}}function Qk(ct,ar,Fr){return new rt(a,function(lr){return function(){return Kk(ct,ar,Fr,lr)}})}return rt.EMPTY=t,rt.Pure=kr(r),rt.Throw=kr(e),rt.Catch=kr(n),rt.Sync=kr(u),rt.Async=kr(a),rt.Bind=kr(i),rt.Bracket=kr(c),rt.Fork=kr(_),rt.Seq=kr(s),rt.ParMap=kr(m),rt.ParApply=kr(A),rt.ParAlt=kr($),rt.Fiber=Lc,rt.Supervisor=Dt,rt.Scheduler=st,rt.nonCanceler=ie,rt}(),td=We.Pure,rd=We.Throw;function ed(t){return function(r){return We.Catch(t,r)}}function nd(t){return function(r){return r.tag===We.Pure.tag?We.Pure(t(r._1)):We.Bind(r,function(e){return We.Pure(t(e))})}}function ud(t){return function(r){return We.Bind(t,r)}}var ad=We.Sync;var Si=We.Async;function od(t,r){return function(){return We.Fiber(t,null,r)}}var a$=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return We.Async(function(u){return function(){var a=t(n,u(e()));return function(){return We.Sync(function(){return e(r(n,a))})}}})}}(),o$=We.Seq;var y$=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var g$=ir(U);var r_={map:nd};var C$=function(){var t=function(n){if(n instanceof ft)return n.value0;if(n instanceof lt)return wu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof lt)return n.value0;if(n instanceof ft)return wu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof lt)return!0;if(n instanceof ft)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:lt.create,right:ft.create}}(),h$=function(t){return od(C$,t)},S$=function(t){return function(){var e=h$(t)();return e.run(),e}},e_=function(t){return g$(S$(t))};var n_={Applicative0:function(){return lc},Bind1:function(){return u_}},u_={bind:ud,Apply0:function(){return pd(0)}},lc={pure:td,Apply0:function(){return pd(0)}},pd=y$("applyAff","Effect.Aff",function(){return{apply:Oe(n_),Functor0:function(){return r_}}});var T$=q(lc);var a_={liftEffect:ad,Monad0:function(){return n_}};var E$={throwError:rd,Monad0:function(){return n_}},_d={catchError:ed,MonadThrow0:function(){return E$}};var sd=h(T$(void 0));var vd=function(t){return Si(function(r){return function(){var n=t(function(u){return r(lt.create(u))()},function(u){return r(ft.create(u))()});return function(u){return Si(function(a){return function(){return n(u,function(c){return a(lt.create(c))()},function(c){return a(ft.create(c))()}),sd}})}}})};function _c(t){return Object.prototype.toString.call(t).slice(8,-1)}var md=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var Dd=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},$e=function(t){return t};var sc=isFinite;var o_=Math.floor;var Ti=function(t){return function(r){return t%r}};var bd=Mn(Lo),dd=tu(Lo);var vc=function(){return Dd(p.create)(b.value)}(),P$=function(t){if(!sc(t))return 0;if(t>=$e(bd))return bd;if(t<=$e(dd))return dd;if(Hr)return le(0)(vc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var f_=function(t){return P$(o_(t))};var U$=_t(ze),q$=_t(_n);var c_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ed=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),z$=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),J$=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Qu=Q,V$=Q;var Dc=function(t){if(t instanceof c_)return t.value0;if(t instanceof z$)return"Error at array index "+(q$(t.value0)+(": "+Dc(t.value1)));if(t instanceof J$)return"Error at property "+(U$(t.value0)+(": "+Dc(t.value1)));if(t instanceof Ed)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var l_=function(t){var r=Sn(wb(t));return function(e){return r(Qb(e))}};var $d=function(t){var r=q(gi(t)),e=l_(t);return function(n){return function(u){if(_c(u)===n)return r(V$(u));if(Hr)return e(new Ed(n,_c(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var p_=q(gi(Re)),X$=l_(Re),$a=$d(Re),Fd=Wt(Ib(Yv)(Re)),G$=Wi(Xp(Re)),bc=y(Er),K$=Su(Ft)(sn),Q$=St(Fn),Y$=ru(ke),Z$=y(Dr),tF=Ue(r_),rF=rc(_d),eF=q(lc);var __=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),s_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),v_=function(){function t(){}return t.value=new t,t}(),m_=function(){function t(){}return t.value=new t,t}(),D_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),xd=function(t){return function(r){var e=function(m){return m===""?p_(Pb):rn(function(A){return X$(c_.create(A))})(p_)(Nb(m))},n=function(){if(r.responseFormat instanceof Bp)return $a("ArrayBuffer");if(r.responseFormat instanceof Up)return $a("Blob");if(r.responseFormat instanceof qp)return function(m){return Fd($a("Document")(m))(Fd($a("XMLDocument")(m))($a("HTMLDocument")(m)))};if(r.responseFormat instanceof si)return G$(function(m){return r.responseFormat.value0(e(m))})($a("String"));if(r.responseFormat instanceof zp)return $a("String");if(r.responseFormat instanceof Zf)return h(r.responseFormat.value0(p_(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(m){if(m instanceof sb)return new ft(m.value0(Qu));if(m instanceof vb)return new ft(Qu(m.value0));if(m instanceof mb)return new ft(Qu(m.value0));if(m instanceof Db)return new ft(Qu(m.value0));if(m instanceof bb)return new ft(Qu(m.value0));if(m instanceof Np)return Hc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(bc(Qu)(qb(m.value0)));if(m instanceof Wp)return new ft(Qu(Gp(m.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[m.constructor.name])},a=function(m){return function(A){return m instanceof p&&!K$($o(Q$)(Hp)(m.value0))(A)?vf(A)(m.value0):A}},i=function(m){return a(bc(Yf.create)(Y$(db)(m)))(a(bc(Qf.create)(hb(r.responseFormat)))(r.headers))},c=function(m){return{method:Xb(r.method),url:r.url,headers:Z$(function(A){return{field:Hp(A),value:yb(A)}})(i(r.content)),content:m,responseType:Cb(r.responseFormat),username:yo(r.username),password:yo(r.password),withCredentials:r.withCredentials,timeout:le(0)(bc(function(A){return A})(r.timeout))}},_=function(m){return tF(rF(vd(lb(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",$b.create,c(m)))))(function(A){if(A instanceof ft){var $=Lb(n(A.value0.body));if($ instanceof lt)return new lt(new s_(Yb($.value0),A.value0));if($ instanceof ft)return new ft({body:$.value0,headers:A.value0.headers,status:A.value0.status,statusText:A.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[$.constructor.name])}if(A instanceof lt)return new lt(function(){var S=vi(A.value0),o=S==="AffjaxTimeoutErrorMessageIdent";if(o)return v_.value;var v=S==="AffjaxRequestFailedMessageIdent";return v?m_.value:new D_(A.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[A.constructor.name])})};if(r.content instanceof b)return _(yo(b.value));if(r.content instanceof p){var s=u(r.content.value0);if(s instanceof ft)return _(yo(new p(s.value0)));if(s instanceof lt)return eF(new lt(new __(s.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[s.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},b_=function(t){if(t instanceof __)return"There was a problem with the request content: "+t.value0;if(t instanceof s_)return"There was a problem with the response body: "+Dc(t.value0);if(t instanceof v_)return"There was a problem making the request: timeout";if(t instanceof m_)return"There was a problem making the request: request failed";if(t instanceof D_)return"There was a problem making the request: "+vi(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Yu=function(){return{method:new lt(hi.value),url:"/",headers:[],content:b.value,username:b.value,password:b.value,withCredentials:!1,responseFormat:Tb,timeout:b.value}}();var d_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var wd=xd(d_);var aF=At(u_),Id=Tn(a_),Ld=oe(),oF=Ur({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Ld(ae()(Ld(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),A_=je(Un),$i=q(Yt),Pd=It(Gr),dc=Wt(hr),k_=X(Cr),Od=It(wD),iF=cu(ai),fF=Wu(me),cF=wr(Ft)(d),Rd=mr(Ir),lF=It(Xr);var Wd=function(){function t(){}return t.value=new t,t}(),y_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pF=function(){return Z.value}(),Nd="Click to get some random user data.",_F=function(t){return dr(h(function(){return t(Wd.value)(),e_(aF(wd({method:new lt(hi.value),url:"https://randomuser.me/api/",headers:Yu.headers,content:Yu.content,username:Yu.username,password:Yu.password,withCredentials:Yu.withCredentials,responseFormat:Sb,timeout:Yu.timeout}))(function(e){if(e instanceof lt)return Id(t(new y_("GET /api response failed to decode: "+b_(e.value0))));if(e instanceof ft)return Id(t(new y_(Kp(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},Hd=function(t){return oF(pF)({code:Or([Pr([Zt(wp)])]),result:fo(function(r){return function(e){var n=A_(function(i){return i instanceof Wd?new p(new lt(void 0)):i instanceof y_?new p(new ft(i.value0)):b.value})(e),u=A_(function(i){return i instanceof ft?new p(i.value0):b.value})(n),a=A_(function(i){return i instanceof lt?new p(void 0):b.value})(n);return cr([cr([Ce($i(Pd(Ar.value)(_F(r))))([Xe(dc($i(Nd))(dc(k_(a)("Loading..."))(k_(u)(Nd))))])]),Hf(dc($i(Od(De.value)("display: none;")))(k_(iF(fF(function(i){return function(c){return new V(i&&!1,function(){return i?new p(void 0):b.value}())}})(!0)(u)))(Od(De.value)("display: block;"))))([Or([Pr([Xe(dc($i(""))(u))])])])])}}),next:cF($i)([Pd(Ar.value)(dr(function(r){return Rd(Rd(qr(r))(t.dpage(vo.value)))(ue)})),lF(Wr.value)(t.slug+"pursx2/")])})};var g_=function(){function t(){}return t.value=new t,t}(),Bd={attr:function(t){return function(r){return f({key:"controls",value:E(r)})}}};var Fi=function(){function t(){}return t.value=new t,t}();var Ac={attr:function(t){return function(r){return f({key:"input",value:G(r)})}}};var kc=function(){function t(){}return t.value=new t,t}();var C_={attr:function(t){return function(r){return f({key:"keyup",value:G(r)})}}};var h_=function(){function t(){}return t.value=new t,t}();var zd={attr:function(t){return function(r){return f({key:"src",value:E(r)})}}};var S_=function(){function t(){}return t.value=new t,t}(),Jd={attr:function(t){return function(r){return f({key:"width",value:E(r)})}}};var Vd=g(),jd=function(t){return function(r){return new C(P("p")(t)(Vd(I(Vd(w(L)(r))))))}},T_=jd(k(d));var Xd=g(),E_=function(t){return function(r){return new C(P("source")(t)(Xd(I(Xd(w(L)(r))))))}};var Gd=g(),$_=function(t){return function(r){return new C(P("video")(t)(Gd(I(Gd(w(L)(r))))))}};function yc(t){return function(){return t.value}}function F_(t){return function(){return t.valueAsNumber}}function Qd(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var a=n;a!=null;){var i=Object.getPrototypeOf(a),c=i.constructor.name;if(c===e)return r(n);if(c==="Object")return t;a=i}return t}var at=function(t){return function(r){return Qd(b.value,p.create,t,r)}};var gc=at("HTMLInputElement");function x_(t){return t.code}var M_=at("KeyboardEvent");var tA=y(Cr),MF=It(Ac),wF=nn(ye)(un),IF=At(ke),LF=Hi(sa),PF=Wt(hr),rA=q(Yt),OF=It(Uf);var Cc=function(){var t=PF(rA(OF(Sa.value)("range"))),r=tA(function(e){return MF(Fi.value)(dr(function(n){return wF(IF(Xf(n))(gc))(LF(F_)(e))}))});return function(e){return t(r(e))}}();var w_=function(t){return tA(It(t)(Ar.value))},hc=function(t){var r=w_(t);return function(e){return r(rA(e))}};var eA=oe(),RF=Ur({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(eA(ae()(eA(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),NF=Of()(eo({reflectSymbol:function(){return"buttonClicked"}})()()(eo({reflectSymbol:function(){return"sliderMoved"}})()()(Mf)()())()()),WF=hc(ju),L_=Wt(hr),xi=q(Yt),nA=y(Cr),uA=nt(aa),HF=_t(_n),BF=Nu(me),UF=_t(Po),qF=wr(Ft)(d),zF=It(Gr),aA=mr(Ir),JF=It(Xr),VF=function(){return Z.value}(),oA=function(t){return RF(VF)({code:Or([Pr([Zt(Mp)])]),result:NF(Z.value)(function(r){return function(e){return cr([Ce(WF(r.buttonClicked(void 0)))([Zt("Click")]),cr([Xe(L_(xi("Val: 0"))(nA(function(){var n=uA("Val: ");return function(u){return n(HF(u))}}())(BF(function(n){return function(u){return 1+n|0}})(-1)(L_(xi(void 0))(e.buttonClicked)))))]),cr([_u(Cc(xi(r.sliderMoved)))([]),cr([Xe(L_(xi("Val: 50.0"))(nA(function(){var n=uA("Val: ");return function(u){return n(UF(u))}}())(e.sliderMoved)))])])])}}),next:qF(xi)([zF(Ar.value)(dr(function(r){return aA(aA(qr(r))(t.dpage(Do.value)))(ue)})),JF(Wr.value)(t.slug+"effects/")])})};var XF=Wt(hr),GF=q(Yt);var KF=ya(me);var P_=function(t){return function(r){return t(r)}};var QF=function(t){return function(r){return KF(P_(function(e){return Ju(za(e))})(function(e){return XF(GF(SD(t)(r({remove:e.value0(Dp),sendTo:function(n){return e.value0(mp(n))}}))))(e.value1)}))}},iA=QF(0);var fA=oe(),ZF=Ur({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(fA(ae()(fA(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),tx=Pe(Le),Sc=Wt(hr),Gn=q(Yt),cA=wr(Ft)(d),rx=It(MD),ex=It(Ac),lA=nn(ye)(un),nx=At(ke),ux=Hi(sa),ax=It(C_),ox=Qn(ye),O_=It(ID),pA=It(Gr),ix=y(Cr),fx=It(lo),_A=w_(ju),cx=je(Un),lx=Wu(me),sA=mr(Ir),px=It(Xr);var _x=function(){function t(){}return t.value=new t,t}(),R_=function(){function t(){}return t.value=new t,t}(),vA=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sx=function(){return Z.value}(),mA=function(t){return ZF(sx)({code:Or([Pr([Zt(xp)])]),result:fo(function(r){return tx(function(e){return Sc(Gn(_x.value))(e)})(function(e){return cr([cr([_u(cA(Gn)([rx(De.value)("border-style:solid;border-width: 1px;border-color: black;"),ex(Fi.value)(dr(function(n){return lA(nx(Xf(n))(gc))(ux(yc)(function(u){return r(vA.create(u))}))})),ax(kc.value)(dr(function(n){return lA(M_(n))(function(u){return ox(x_(u)==="Enter")(r(R_.value))})}))]))([]),Ce(Sc(Gn(O_(De.value)("margin: 5px;")))(Gn(pA(Ar.value)(dr(h(r(R_.value)))))))([Zt("Add")])]),Vu(ix(function(n){return P_(iA)(function(u){return cr([Gu(Gn(fx(De.value)("margin: 5px;")))([Zt(n)]),Ce(Sc(Gn(O_(De.value)("margin: 5px;")))(_A(Gn(u.sendTo(0)))))([Zt("Prioritize")]),Ce(Sc(Gn(O_(De.value)("margin: 5px;")))(_A(Gn(u.remove))))([Zt("Delete")])])})})(cx(function(n){return n.value0?new p(n.value1):b.value})(lx(function(n){return function(u){return u instanceof vA?new V(u.value0,new V(!1,u.value0)):u instanceof R_?new V(n,new V(!0,n)):new V("",new V(!1,""))}})("")(e))))])})}),next:cA(Gn)([pA(Ar.value)(dr(function(r){return sA(sA(qr(r))(t.dpage(Ao.value)))(ue)})),px(Wr.value)(t.slug+"portals/")])})};var DA=oe(),mx=Ur({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(DA(ae()(DA(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Dx=wr(Ft)(d),bx=q(Yt),dx=It(Gr),bA=mr(Ir),Ax=It(Xr),kx=function(){return Z.value}(),dA=function(t){return mx(kx)({code:Or([Pr([Zt(Fp)])]),result:cr([Zt("Hello world")]),next:Dx(bx)([dx(Ar.value)(dr(function(r){return bA(bA(qr(r))(t.dpage(_o.value)))(ue)})),Ax(Wr.value)(t.slug+"component/")])})};var gx=Ur({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(ae()(Br)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),Cx=wr(Ft)(d),hx=q(Yt),Sx=It(Gr),AA=mr(Ir),Tx=It(Xr),Ex=function(){return Z.value}(),kA=function(t){return gx(Ex)({next:Cx(hx)([Sx(Ar.value)(dr(function(r){return AA(AA(qr(r))(t.dpage(po.value)))(ue)})),Tx(Wr.value)(t.slug+"hello/")])})};var yA=oe(),Fx=Ur({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(yA(ae()(yA(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),xx=Pe(Le),Mx=Wt(hr),ho=q(Yt),wx=FD(),Ix=y(uo),N_=wr(Ft)(d),Lx=It(Bd),Px=It(Jd),Ox=It(zd),Rx=It(WD),gA=rD()(),SA=np()()()()(),Nx=SA({reflectType:function(){return 1}}),Wx=SA({reflectType:function(){return 0}}),Hx=Nu(me),Bx=q(ua),CA=It(Gr),hA=mr(Ir),Ux=It(Xr);var qx=function(){return Z.value}(),TA=function(t){return Fx(qx)({code:Or([Pr([Zt($p)])]),result:Vu(Ju(function(r){return xx(Mx(ho(void 0)))(function(e){return ho(io(wx(Ix(function(n){return $_(N_(ho)([Lx(g_.value)("true"),Px(S_.value)("250")]))([E_(N_(ho)([Ox(h_.value)(n),Rx(Sa.value)("video/mp4")]))([])])})(gA("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(gA("https://www.w3schools.com/jsref/movie.mp4")(tD))))(function(n){return function(u){var a=Nx(Z.value)(n),i=Wx(Z.value)(n),c=function(s){return Hx(function(m){return function(A){return!m}})(s)(e)},_=function(){var s=Wf(function(m){return m?i:a});return function(m){return _i(Bx(s(c(m))))}}();return cr([Ce(ho(CA(Ar.value)(dr(h(r(void 0))))))([Zt("Switch videos")]),cr([_(!0),_(!1)])])}})))})})),next:N_(ho)([CA(Ar.value)(dr(function(r){return hA(hA(qr(r))(t.dpage(ko.value)))(ue)})),Ux(Wr.value)(t.slug+"ssr/")])})};var EA=oe(),Jx=Ur({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(EA(ae()(EA(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Vx=eb({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Br),jx=wr(Ft)(d),Xx=q(Yt),Gx=It(Gr),$A=mr(Ir),Kx=It(Xr),Qx=function(){return Z.value}(),Yx=function(){return Z.value}(),FA=function(t){return Jx(Qx)({code:Or([Pr([Zt(Ep)])]),result:Vx(Yx),next:jx(Xx)([Gx(Ar.value)(dr(function(r){return $A($A(qr(r))(t.dpage(mo.value)))(ue)})),Kx(Wr.value)(t.slug+"events1/")])})};var MA=oe(),wA=ae(),IA=MA(Br),tM=Sp({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(MA(wA(IA({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Mi=q(Yt),rM=Ur({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(wA(IA({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),eM=It(xD),nM=It(ju),uM=Wt(hr),aM=X(Cr),oM=cu(ai),iM=wr(Ft)(d),fM=It(Gr),xA=mr(Ir),cM=It(Xr),lM=function(){return Z.value}(),pM=function(){return Z.value}(),LA=function(t){return tM(Z.value)(lM)({code:Or([Pr([Zt(Tp)])]),result:Vu(Ju(function(r){return function(e){return Mi(io(rM(pM)({myli:Mi(eM(De.value)("background-color:rgb(200,240,210);")),somethingNew:Ce(Mi(nM(Ar.value)(r(new p(void 0)))))([Xe(uM(aM(oM(e))("Thanks for clicking me!"))(Mi("I was dynamically inserted")))])})))}})),next:iM(Mi)([fM(Ar.value)(dr(function(r){return xA(xA(qr(r))(t.dpage(bo.value)))(ue)})),cM(Wr.value)(t.slug+"events2/")])})};var W_=()=>document.documentElement.querySelector("[data-deku-root]");var H_=t=>()=>{t.hydrating=!0},B_=t=>()=>{t.hydrating=!1},PA=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(a=>()=>t(r.dynFamily)(i=>()=>{for(var c=0,_=0,s;_<n.childNodes.length;){if(n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i){_+=1;break}_++}let m=$=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[$]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[$])):n.insertBefore(e.units[r.id].main,n.childNodes[$])};for(;_<n.childNodes.length;){var A;if((A=n.childNodes[_].$dekuId)&&t(e.units[A].dynFamily)(S=>()=>t(e.units[A].pos)(v=>()=>i===S&&a<=v?(m(_),!0):!1)())())return!0;if(c===a||n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i+"%-%")return m(_),!0;n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue.substring(0,3)==="%-%"&&!s&&(s=n.childNodes[_].nodeValue+"%-%"),s||c++,n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue===s&&(s=void 0,c++),_++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(i=>()=>(e.units[r.id].main?e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[i].endBeacon):(e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon),e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(i=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[i].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[i].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},U_=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),a;a=u.nextNode();)a.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[a.nodeValue.substring(3)]=a)}e(document.documentElement)},OA=t=>r=>e=>n=>()=>{var u,a,i=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(i),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(a=n.allBeacons[`${e.id}%-%`])?(n.units[i]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:a},u.$dekuId=i,a.$dekuId=i,!0):!1)()){let _=document.createComment(`%-%${e.id}`),s=document.createComment(`%-%${e.id}%-%`);n.units[i]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:_,endBeacon:s},_.$dekuId=i,s.$dekuId=i}};var RA=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),NA=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),WA=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),HA=t=>r=>e=>n=>()=>{var u,a=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(a),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${a}"]`))?(n.units[a]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=a,!0):!1)()){let c=document.createElement(e.tag);n.units[a]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:c},c.$dekuId=a}},BA=t=>r=>e=>n=>u=>()=>{var a=n.id,i;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(a),!t(n.parent)(_=>()=>{if(u.hydrating&&r&&(i=document.documentElement.querySelector(`[data-deku-ssr="${_}"]`))){for(var s=0;s<i.childNodes.length;s++){let S=a.split("@-@");if(i.childNodes[s].nodeType===8&&i.childNodes[s].nodeValue===S[0]){s=s-1;var m=s===-1,A=s>=0&&i.childNodes[s].nodeType===8;m&&i.prepend(document.createTextNode("")),A&&i.insertBefore(document.createTextNode(""),i.childNodes[s+1]);break}}let $=i.childNodes[s];return u.units[a]={main:$,pos:n.pos,parent:n.parent,scope:n.scope},$.$dekuId=a,!0}return!1})()){let _=document.createTextNode("");u.units[a]={main:_,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},_.$dekuId=a}};function q_(){return{units:{},scopes:{},allBeacons:{}}}var UA=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},qA=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var a=i=>u(i)();e.units[n].main.addEventListener(r.key,a),e.units[n].listeners[r.key]=a}}},zA=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},JA=t=>r=>e=>n=>u=>()=>{var a,i,c=n.id,_=n.html,s=n.verb,m=n.cache,A=n.parent,$=n.scope,S=n.pxScope;let o=t(n.parent)(()=>()=>u.hydrating&&r&&(a=document.documentElement.querySelector(`[data-deku-ssr="${c}"]`))?(u.units[c]={listeners:{},pos:n.pos,scope:$,parent:A,main:a},a.$dekuId=c,!0):!1)();if(!o){let ut=Object.entries(m);for(var v=0;v<ut.length;v++){let j=ut[v][0];ut[v][1]===!0?_=_.replace(s+j+s,'data-deku-attr-internal="'+j+'"'):_=_.replace(s+j+s,'<span style="display:contents;" data-deku-elt-internal="'+j+'"></span>')}i=document.createElement("div"),i.innerHTML=_.trim(),u.units[c]={listeners:{},pos:n.pos,scope:$,parent:A,main:i.firstChild},i.firstChild.$dekuId=c}u.scopes[$]||(u.scopes[$]=[]),u.scopes[$].push(c),i||(i=a),i.querySelectorAll("[data-deku-attr-internal]").forEach(function(ut){var j=ut.getAttribute("data-deku-attr-internal");let Pt=j+"@!%"+S;u.units[Pt]={listeners:{},main:ut,scope:$},u.scopes[$].push(Pt)}),i.querySelectorAll("[data-deku-elt-internal]").forEach(function(ut){var j=ut.getAttribute("data-deku-elt-internal");let Pt=j+"@!%"+S;u.units[j+"@!%"+S]={listeners:{},main:ut,scope:$},u.scopes[$].push(Pt)}),o||u.units[c].main.remove()},VA=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},z_=t=>r=>e=>n=>()=>{let u=(o,v,ut)=>{if(n.units[o].startBeacon){var j=n.units[o].startBeacon,Pt=j.nextSibling;for(n.units[v].main.insertBefore(j,ut),j=Pt;j&&j!==n.units[o].endBeacon;)Pt=j.nextSibling,n.units[v].main.insertBefore(j,ut),j=Pt}else n.units[v].main.insertBefore(n.units[o].main,ut)},a=[];a.push(e);for(var i=0;i<a.length;i++){let o=a[i],v=o.id,ut=o.parent;n.units[v].containingScope=o.scope;var c=void 0;r(o.pos)(Pt=>()=>(c=Pt,!0))(),c===void 0&&(c=Number.MAX_VALUE);let j=n.units[ut].main.childNodes;for(var _=0,s=!1,m=0;_<j.length;){var A;if(A=j[_].$dekuId){if(r(o.dynFamily)(Ot=>()=>s?!1:n.units[A].endBeacon===j[_]&&Ot===A?(n.units[v].pos=t(m),u(v,ut,j[_]),!0):!1)()){s=!0;break}if(n.units[A].dynFamily!==n.units[v].dynFamily){_++;continue}if(s){_++;continue}m===c?(u(v,ut,j[_]),m++,s=!0):n.units[A].endBeacon!==j[_]&&(n.units[A].pos=t(m),m++)}_++}if(s)return;if(n.units[v].main)n.units[ut].main.appendChild(n.units[v].main);else{var $=n.units[v].startBeacon,S=$.nextSibling;for(n.units[ut].main.appendChild($),$=S;$&&$!==n.units[v].endBeacon;)S=$.nextSibling,n.units[ut].main.appendChild($),$=S}}},jA=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let a=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(a.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,a.appendChild(n),n=u}}},J_=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},XA=J_;var dM=Oo(Ui),AM=Ie();var GA=function(t){return t};var kM=1,V_=2147483647,yM=function(){return V_-1|0}(),j_=function(t){var r=function(e){return function(n){return function(u){var a=n-e|0,i=dM(u)(a),c=i<e;return c?i+n|0:i}}};return r(kM)(yM)(t)};var gM=0,CM=48271,KA=function(t){return function(r){return AM(vc(Ti($e(CM)*$e(r)+$e(t))($e(V_))))}},QA=KA(gM);var xM=function(){function t(i){this.fn=i}var r={},e=function(i,c){this.head=i,this.tail=c};function n(i){return new e(i,r)}function u(i){return function(c){return new e(i,c)}}function a(i){for(var c=[],_=i;_!==r;)c.push(_.head),_=_.tail;return c}return function(i){return function(c){return function(_){var s=function(A,$){return i(c(u)(_(A)))($)},m=function(A,$,S){if($===0)return A;var o=S[$-1];return new t(function(){var v=m(s(o,A),$-1,S);return v})};return function(A){for(var $=c(n)(_(A[A.length-1])),S=m($,A.length-1,A);S instanceof t;)S=S.fn();return c(a)(S)}}}}}();var wi=function(t){var r=y(t);return{map:function(e){return function(n){return function(u){return r(function(a){return new V(e(a.value0),a.value1)})(n(u))}}}}};var K_=function(t){return{Applicative0:function(){return $c(t)},Bind1:function(){return Tc(t)}}},Tc=function(t){var r=At(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(a){var i=n(a.value0);return i(a.value1)})}}},Apply0:function(){return Ec(t)}}},Ec=function(t){var r=wi(t.Bind1().Apply0().Functor0());return{apply:Oe(K_(t)),Functor0:function(){return r}}},$c=function(t){var r=q(t.Applicative0());return{pure:function(e){return function(n){return r(new V(e,n))}},Apply0:function(){return Ec(t)}}};var Fc=function(t){var r=q(t.Applicative0()),e=K_(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var ak=function(t){return function(r){var e=t(r);return e.value1}},ok=function(t){return function(r){var e=t(r);return e.value0}};var VM=Fc(Re),jM=jn(VM);var XM=wi(uu);var GM=tn(wo);var KM=de(wo);var QM=function(t){return t};var YM=function(){var t=function(r){return new V(GA(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=QA(r.newSeed),e}())};return jM(t)}();var ck=XM,xc=y(ck);var Y_=function(t){return ok(QM(t))};var lk=Ec(Re),ZM=Jt(lk),fk=function(t){return function(r){var e=$e(r),n=$e(t),u=function(c){return n+Ti(c)(e-n+1)},a=xc($e)(YM),i=ZM(xc(KM)(a))(xc(GM(2))(a));return xc(function(c){return f_(u(c))})(i)}},pk=function(t){return function(r){var e=t<=r;return e?fk(t)(r):fk(r)(t)}};var sk=function(t){return t.arbitrary};var vk=function(){return{arbitrary:pk(-1e6)(1e6)}}();var He=ir(se),ln=nt(Jr),Dk=_t(_n),bk=sk(vk),dk=de(oa),mk=q(gr),r0=q(ye),Ke=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Fe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),be=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Kn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),En=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Z_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Mc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ts=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),rs=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),es=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ns=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),du=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Be=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),e0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new du(new En(t))])})(r))}},n0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new du(new Kn(t))])})(r))}},u0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new Be(new Z_(t))])})(r))}},a0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new Be(new es(t))])})(r))}},o0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new du(new Qe(t))])})(r))}},i0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new Be(new Mc(t))])})(r))}},f0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new du(new pn(t))])})(r))}},c0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new du(new Ke(t))])})(r))}},l0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new du(new Fe(t)),new du(new be(t))])})(r))}},p0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new Be(new ts(t))])})(r))}},_0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new Be(new rs(t))])})(r))}},s0=function(t){return function(r){return He(Lr(function(e){return ln(e)([new Be(new ns(t))])})(r))}},Ak=function(t){return{ids:function(){var e=Kr(t)(),n=Dk(Y_(bk)({newSeed:j_(e),size:5}));return He(Lr(dk(1))(t))(),n},makeElement:c0,attributeParent:function(r){return function(e){return mk(void 0)}},makeRoot:i0,makeText:o0,makePursx:f0,setProp:n0,makeDynBeacon:l0,setCb:function(r){return function(e){return mk(void 0)}},setText:e0,sendToPos:u0,deleteFromCache:s0,removeDynBeacon:a0,giveNewParent:p0,disconnectElement:_0}},Fa=function(t){return function(r){return t instanceof p?r(t.value0):r0(!1)}},v0=function(t){return function(r){return function(){var n=WA(t.id)(r)(),u=NA(t.id)(r)(),a=RA(t.id)(r)(),i={scope:n,parent:u,dynFamily:a,id:t.id,pos:new p(t.pos),ez:!1};return z_(p.create)(Fa)(i)(r)()}}},kk=function(t){return{ids:function(){var e=Kr(t)(),n=Dk(Y_(bk)({newSeed:j_(e),size:5}));return He(Lr(dk(1))(t))(),n},makeElement:HA(Fa)(!0),makeDynBeacon:OA(Fa)(!0),attributeParent:PA(Fa),makeRoot:VA,makeText:BA(Fa)(!0)(tr(void 0)),makePursx:JA(Fa)(!0)(tr(void 0)),setProp:UA(!0),setCb:qA(!0),setText:zA,sendToPos:v0,deleteFromCache:J_,removeDynBeacon:XA,giveNewParent:z_(p.create)(Fa),disconnectElement:jA}};var us=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),as=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let a=r,i=Object.entries(n);for(var c=0;c<i.length;c++){let A=i[c][0];i[c][1]===!0?a=a.replace(u+A+u,'data-deku-attr-internal="'+A+'" data-deku-ssr="'+A+"@!%"+e+'"'):a=a.replace(u+A+u,'<span style="display:contents;" data-deku-elt-internal="'+A+'" data-deku-ssr="'+A+"@!%"+e+'"></span>')}let _=a.indexOf(">"),s=a.indexOf("/>"),m=s==_-1?s:_;return a.slice(0,m)+' data-deku-ssr="'+t+'" '+a.slice(m)};var D0=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},gk=y(Yo),Zu=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ck=function(t){var r=!1,e;function n(u){if(u.value1 instanceof mt)return r=!0,new p(new V(u.value1.value0,new Zu(u.value0,u.value1.value1)));if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,b.value;if(u.value1 instanceof rr){t=new Zu(rr.value,Af(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Li=function(t){var r=!1,e;function n(u){if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,b.value;if(u.value0 instanceof rr){t=new Zu(Af(u.value1),rr.value);return}if(u.value0 instanceof mt)return r=!0,new p(new V(u.value0.value0,new Zu(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Sr=function(t){return function(r){return new Zu(t.value0,new mt(r,t.value1))}};var wc={map:function(t){return function(r){return new Zu(gk(t)(r.value0),gk(t)(r.value1))}}},Ii={foldMap:function(t){return Zc(Ii)(t)},foldr:function(t){return tl(Ii)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(_,s){var m=Li(s);if(m instanceof p){u=t(_)(m.value0.value0),n=m.value0.value1;return}if(m instanceof b)return a=!0,_;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[m.constructor.name])}for(;!a;)i=c(u,n);return i}};return r}},os=ur(Ii),is={append:os(Sr)},he=function(){return new Zu(rr.value,rr.value)}(),hk={mempty:he,Semigroup0:function(){return is}},Sk=Sr(he),Tk=function(t){var r=yr(t)(hk);return function(e){return r(Sk)(e)}},fs={traverse:function(t){var r=t.Apply0(),e=y(r.Functor0()),n=re(r),u=q(t);return function(a){var i=e(os(Sr)(he)),c=os(function(_){var s=n(Sr)(_);return function(m){return s(a(m))}})(u(he));return function(_){return i(c(_))}}},sequence:function(t){return kl(fs)(t)},Functor0:function(){return wc},Foldable1:function(){return Ii}};var Ek=function(t){return function(r){return new Zu(new mt(t,r.value0),r.value1)}},b0={Applicative0:function(){return cs},Bind1:function(){return d0}},d0={bind:vr(yr(Ii)(hk)),Apply0:function(){return $k(0)}},cs={pure:Sk,Apply0:function(){return $k(0)}},$k=D0("applyCatQueue","Data.CatQueue",function(){return{apply:Oe(b0),Functor0:function(){return wc}}});var k0=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},So=nt(Jr),Ik=$r(),ps=y(Dr),y0=Bi(Na),g0=Ue(Dr),Fk=ir(wi(uu)),xk=di(Fc(Re)),Mk=Ru(Te),C0=Ra(Wa)(Tc(Re)),xe=St(Cu(Fn)),xa=nt(is),h0=q(cs),wk=y(wc),S0=Tk(Ft),T0=Ue(Ou),E0=At(ke),ls=ti(Te),$0=cu(hf),Lk=$c(Re),F0=Ne(fs)(Lk),Pi=nn(Lk)(un),x0=nu(Ft)(Ro),M0=je(bm),w0=yr(Ft)(Ro),I0=ur(ne);var L0=function(t){var r=function(e){return function(n){return function(u){return function(a){if(a instanceof b)return{acc:e,rest:[]};if(a instanceof p){if(a.value0.head instanceof Fe){var i=r([])(new p({id:a.value0.head.value0.id,e:a.value0.head.value0}))(a.value0.tail);return r(So(e)(i.acc))(n)(i.rest)}if(a.value0.head instanceof be){if(n instanceof p)return{acc:[{pos:n.value0.e.pos,elt:new ft({o:n.value0.e,a:e,c:a.value0.head.value0})}],rest:a.value0.tail};if(n instanceof b)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var c=function(){if(a.value0.head instanceof Ke||a.value0.head instanceof Qe||a.value0.head instanceof pn||a.value0.head instanceof Fe||a.value0.head instanceof be)return a.value0.head.value0.pos;if(a.value0.head instanceof Kn)return b.value;if(a.value0.head instanceof En)return b.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[a.value0.head.constructor.name])}();return r(So(e)([{pos:c,elt:new lt(a.value0.head)}]))(n)(a.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[a.constructor.name])}(Sl(u))}}};return r([])(b.value)(t).acc},Pk=k0("sortSortableDyns","Deku.SSR",function(){var t=ps(function(e){if(e.elt instanceof lt)return e;if(e.elt instanceof ft)return{pos:e.pos,elt:new ft({o:e.elt.value0.o,c:e.elt.value0.c,a:Pk(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=sf($o($t(fa(ce)))(function(e){return function(n){return n.pos}(Ik(e))}));return function(e){return t(r(e))}}),P0=Pk(39),Ok=function(t){return y0(g0(t)(function(r){return function(e){if(e instanceof lt)return[e.value0];if(e instanceof ft)return So([new Fe(e.value0.o)])(So(Ok(e.value0.a))([new be(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[e.constructor.name])}(function(e){return e.elt}(Ik(r)))}))},Rk=function(t){return function(r){var e=function(o){return function(v){return Fk(xk(function(ut){var j={};for(var Pt in ut)({}).hasOwnProperty.call(ut,Pt)&&(j[Pt]=ut[Pt]);return j.idToActions=Mk(function(Ot){if(Ot instanceof p)return new p(So(Ot.value0)([v]));if(Ot instanceof b)return new p([v]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Ot.constructor.name])})(o)(ut.idToActions),j}))}},n=le("deku-root")(Ko(function(o){return o instanceof Be&&o.value0 instanceof Mc?new p(o.value0.value0.id):b.value})(r)),u=function(o){return function(v){return function(ut){return C0(Fk(xk(function(j){var Pt={};for(var Ot in j)({}).hasOwnProperty.call(j,Ot)&&(Pt[Ot]=j[Ot]);return Pt.parentToChild=Mk(function(Gt){if(Gt instanceof p)return new p(So(Gt.value0)([v]));if(Gt instanceof b)return new p([v]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[Gt.constructor.name])})(o)(j.parentToChild),Pt})))(function(){return e(v)(ut)})}}},a=function(o){var v=function(ot){return function(z){return function(M){if(M instanceof Ke){var st=M.value0.id===ot||xe(M.value0.dynFamily)(new p(M.value0.id));return st?new Ke({id:M.value0.id,scope:M.value0.scope,parent:M.value0.parent,tag:M.value0.tag,pos:new p(z),dynFamily:M.value0.dynFamily}):M}if(M instanceof Qe){var Dt=M.value0.id===ot||xe(M.value0.dynFamily)(new p(M.value0.id));return Dt?new Qe({id:M.value0.id,pos:new p(z),scope:M.value0.scope,parent:M.value0.parent,dynFamily:M.value0.dynFamily}):M}if(M instanceof pn){var Me=M.value0.id===ot||xe(M.value0.dynFamily)(new p(M.value0.id));return Me?new pn({id:M.value0.id,parent:M.value0.parent,html:M.value0.html,scope:M.value0.scope,pos:new p(z),pxScope:M.value0.pxScope,verb:M.value0.verb,cache:M.value0.cache,dynFamily:M.value0.dynFamily}):M}if(M instanceof Fe){var Rr=M.value0.id===ot||xe(M.value0.dynFamily)(new p(M.value0.id));return Rr?new Fe({id:M.value0.id,parent:M.value0.parent,pos:new p(z),scope:M.value0.scope,dynFamily:M.value0.dynFamily}):M}if(M instanceof be){var Au=M.value0.id===ot||xe(M.value0.dynFamily)(new p(M.value0.id));return Au?new be({id:M.value0.id,parent:M.value0.parent,pos:new p(z),scope:M.value0.scope,dynFamily:M.value0.dynFamily}):M}if(M instanceof En||M instanceof Kn)return M;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[M.constructor.name])}}},ut=function(ot){return function(z){if(z instanceof Ke){var M=z.value0.id===ot||xe(z.value0.dynFamily)(new p(z.value0.id));return M?new Ke({id:z.value0.id,scope:z.value0.scope,parent:b.value,tag:z.value0.tag,pos:z.value0.pos,dynFamily:z.value0.dynFamily}):z}if(z instanceof Qe){var st=z.value0.id===ot||xe(z.value0.dynFamily)(new p(z.value0.id));return st?new Qe({id:z.value0.id,pos:z.value0.pos,scope:z.value0.scope,parent:b.value,dynFamily:z.value0.dynFamily}):z}if(z instanceof pn){var Dt=z.value0.id===ot||xe(z.value0.dynFamily)(new p(z.value0.id));return Dt?new pn({id:z.value0.id,parent:b.value,html:z.value0.html,scope:z.value0.scope,pos:z.value0.pos,pxScope:z.value0.pxScope,verb:z.value0.verb,cache:z.value0.cache,dynFamily:z.value0.dynFamily}):z}if(z instanceof Fe){var Me=z.value0.id===ot||xe(z.value0.dynFamily)(new p(z.value0.id));return Me?new Fe({id:z.value0.id,parent:b.value,pos:z.value0.pos,scope:z.value0.scope,dynFamily:z.value0.dynFamily}):z}if(z instanceof be){var Rr=z.value0.id===ot||xe(z.value0.dynFamily)(new p(z.value0.id));return Rr?new be({id:z.value0.id,parent:b.value,pos:z.value0.pos,scope:z.value0.scope,dynFamily:z.value0.dynFamily}):z}if(z instanceof En||z instanceof Kn)return z;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[z.constructor.name])}},j=function(ot){return function(z){return function(M){return function(st){return function(Dt){if(Dt instanceof p&&Dt.value0.value0 instanceof Fe){if(xe(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Sr(xa(ot)(z))(Dt.value0.value0))(he)(M)(Dt.value0.value1);if(Hr)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof be){if(xe(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Sr(xa(ot)(z))(Dt.value0.value0))(he)(M)(Dt.value0.value1);if(Hr)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Qe){if(xe(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Sr(xa(ot)(z))(Dt.value0.value0))(he)(M)(Dt.value0.value1);if(Hr)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof pn){if(xe(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Sr(xa(ot)(z))(Dt.value0.value0))(he)(M)(Dt.value0.value1);if(Hr)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Ke){if(xe(Dt.value0.value0.value0.dynFamily)(new p(M.id)))return j(Sr(xa(ot)(z))(Dt.value0.value0))(he)(M)(Dt.value0.value1);if(Hr)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1)}if(Dt instanceof p&&Dt.value0.value0 instanceof Kn)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1);if(Dt instanceof p&&Dt.value0.value0 instanceof En)return j(ot)(Sr(z)(Dt.value0.value0))(M)(Dt.value0.value1);if(Dt instanceof b)return xa(ot)(xa(h0(new be({id:M.id+"%-%",parent:M.parent,pos:M.pos,scope:M.scope,dynFamily:M.dynFamily})))(z));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[Dt.constructor.name])}(Li(st))}}}},Pt=function(ot){return function(z){return function(M){if(M instanceof p&&M.value0.value0 instanceof be)return Pt(j(he)(he)(M.value0.value0.value0)(ot))(M.value0.value1);if(M instanceof p)return Pt(Ek(M.value0.value0)(ot))(M.value0.value1);if(M instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[M.constructor.name])}(Ck(z))}},Ot=function(ot){return function(z){return function(M){return function(st){if(st instanceof p&&st.value0.value0 instanceof Ke){var Dt=st.value0.value0.value0.id===z;return Dt?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Qe){var Me=st.value0.value0.value0.id===z;return Me?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof pn){var Rr=st.value0.value0.value0.id===z;return Rr?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Fe){var Au=st.value0.value0.value0.id===z;return Au?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof be){var Ma=st.value0.value0.value0.id===z;return Ma?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof Kn){var wa=st.value0.value0.value0.id===z;return wa?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof p&&st.value0.value0 instanceof En){var Se=st.value0.value0.value0.id===z;return Se?Ot(ot)(z)(st.value0.value1):Ot(Sr(ot)(st.value0.value0))(z)(st.value0.value1)}if(st instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[st.constructor.name])}(Li(M))}}},Gt=function(ot){return function(z){return function(M){if(M instanceof p&&M.value0.value0 instanceof du)return Gt(Sr(ot)(M.value0.value0.value0))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Be&&M.value0.value0.value0 instanceof Z_)return Gt(wk(v(M.value0.value0.value0.value0.id)(M.value0.value0.value0.value0.pos))(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Be&&M.value0.value0.value0 instanceof Mc||M instanceof p&&M.value0.value0 instanceof Be&&M.value0.value0.value0 instanceof ts)return Gt(ot)(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Be&&M.value0.value0.value0 instanceof rs)return Gt(wk(ut(M.value0.value0.value0.value0.id))(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Be&&M.value0.value0.value0 instanceof es)return Gt(Ot(he)(M.value0.value0.value0.value0.id)(ot))(M.value0.value1);if(M instanceof p&&M.value0.value0 instanceof Be&&M.value0.value0.value0 instanceof ns)return Gt(Ot(he)(M.value0.value0.value0.value0.id)(ot))(M.value0.value1);if(M instanceof b)return ot;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[M.constructor.name])}(Li(z))}},rt=S0(o),kr=Gt(he)(rt),ie=Pt(he)(kr);return ie},i=a(r),c=function(o){return{parentToChild:T0(o.parentToChild)(function(){var v=ps(function(j){if(j instanceof Ke||j instanceof Qe||j instanceof pn||j instanceof Fe||j instanceof be||j instanceof Kn||j instanceof En)return j.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[j.constructor.name])}),ut=ps(function(j){return E0(ls(j)(o.idToActions))(El)});return function(j){return v(Ok(P0(L0($0(ut(j))))))}}()),idToActions:o.idToActions}}(ak(F0(function(o){if(o instanceof Ke)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Qe)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof pn)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Fe)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof be)return Pi(o.value0.parent)(function(v){return u(v)(o.value0.id)(o)});if(o instanceof Kn||o instanceof En)return e(o.value0.id)(o);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[o.constructor.name])})(i))({parentToChild:Bn,idToActions:Bn})),_=function(o){return Oa(Fl(function(v){return v instanceof Ke||v instanceof Qe||v instanceof Fe||v instanceof be})(o))},s=function(o){return le("")(Ko(function(v){return v instanceof Ke?new p(v.value0.tag):b.value})(o))},m=function(o){return x0(" ")(M0(function(v){return v instanceof Kn?new p(v.value0.key+('="'+(v.value0.value+'"'))):b.value})(o))},A=function(o){return tr("")(function(v){var ut=function(rt){return le("")(Ko(function(kr){return kr instanceof En?new p(us(kr.value0.text)+("<!--"+(o+"-->"))):b.value})(v))},j=function(rt){return"<!--%-%"+(o+"-->")},Pt=function(rt){var kr=s(v),ie=m(v);return"<"+(kr+(" "+(ie+(' data-deku-ssr="'+(o+('">'+($(o)+("</"+(kr+">")))))))))},Ot=function(rt){return"<!--%-%"+(o+"-->")},Gt=$u(v)(0);return Gt instanceof p&&Gt.value0 instanceof En?ut(void 0):Gt instanceof p&&Gt.value0 instanceof Qe?ut(void 0):Gt instanceof p&&Gt.value0 instanceof Fe?j(void 0):Gt instanceof p&&Gt.value0 instanceof be?Ot(void 0):Gt instanceof p&&Gt.value0 instanceof pn?as(Gt.value0.value0):Pt(void 0)})(ls(o)(c.idToActions))},$=function(o){var v=le([])(ls(o)(c.parentToChild));return w0(A)(v)},S=function(o){return I0(function(v){return function(ut){var j=_(ut);if(j)return v;if(!j)return fc("data-deku-ssr")(m(ut)+" data-deku-ssr")(v);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[j.constructor.name])}})($(o))(c.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(S(n)+("</"+(t+">")))))))}};var Aw=Ue(U),kw=Ka(Jo);var yw=ir(U),Nk=$r(),gw=St(qu),Cw=g(),hw=Wt(hr),Sw=q(Yt),Wk=q(gr),Tw=y(se),Ew=Ka(dv),$w=ir(se);var Hk=function(t){return function(r){return function(e){return fn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(n){return function(u){return u.ids}(Nk(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:gw})}},toElt:function(n){return n}})(t)(r)(Cw(e))}}},Fw=function(t){return function(){var e=q_();U_(e)();var n=Aw(kw(pe(0)))(kk)();H_(e)();var u=W_(),a=Vl(hw(Sw(Nk(n).makeRoot({id:"deku-root",root:u})))(Hk({parent:new p("deku-root"),scope:new Uu("rootScope"),raiseId:function(i){return Wk(void 0)},ez:!0,pos:b.value,dynFamily:b.value})(n)(t)))(function(i){return i(e)})();return B_(e)(),a}},Bk=function(t){return yw(Fw(t))},xw=function(t){return function(r){return function(e){return Tw(function(){var n=Rk(t);return function(u){return function(a){return r.head+a}(function(a){return a+r.tail}(n(u)))}}())(Ew(function(){var u=pe(0)(),a=pe([])(),i=Ak(u);return $w(Um(Hk({parent:new p("deku-root"),scope:new Uu("rootScope"),raiseId:function(c){return Wk(void 0)},ez:!0,pos:b.value,dynFamily:b.value})(i)(e))(function(c){return c(a)}))(),Kr(a)()}))}}},Uk=xw("body");var Mw=hc(ju),_s=Wt(hr),Ic=q(Yt),zk=y(Cr),Jk=nt(aa),ww=_t(_n),Iw=Nu(me),Lw=_t(Po),Oi=oe(),Pw=Ur({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Oi(Oi(Oi(Oi(Oi(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),Ow=mr(Ga),Rw=At(Eu),Vk=q(gr),Nw=function(){return Z.value}(),jk=function(){return Of()(eo({reflectSymbol:function(){return"buttonClicked"}})()()(eo({reflectSymbol:function(){return"sliderMoved"}})()()(Mf)()())()())(Z.value)(function(t){return function(r){return cr([T_([Zt(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),Ce(Mw(t.buttonClicked(void 0)))([Zt("Click")]),cr([Xe(_s(Ic("Val: 0"))(zk(function(){var e=Jk("Val: ");return function(n){return e(ww(n))}}())(Iw(function(e){return function(n){return 1+e|0}})(-1)(_s(Ic(void 0))(r.buttonClicked)))))]),cr([_u(Cc(Ic(t.sliderMoved)))([]),cr([Xe(_s(Ic("Val: 50"))(zk(function(){var e=Jk("Val: ");return function(n){return e(Lw(n))}}())(r.sliderMoved)))])])])}})}(),Xk=function(t){return Pw(Nw)({code2:Or([Pr([Zt(Op)])]),code1:Or([Pr([Zt(Pp)])]),code0:Or([Pr([Zt(Lp)])]),result:jk,codegen:Or([Pr([Xe(Bm(function(r){return Ow(Rw(Uk({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(jk))(r))(Vk(Vk(void 0)))}))])])})};var Hw=Pe(Le),Bw=Wt(hr),ss=q(Yt),Uw=y(Dr),qw=wr(Ft)(d),zw=It(Gr),Jw=mr(Ir),Vw=It(LD),jw=It(Xr),Xw=It(lo),Gk=function(t){return fo(function(r){return Hw(function(e){return Bw(ss(t.startsWith))(e)})(function(e){var n=function(a){if(a instanceof zf)return kA;if(a instanceof po)return dA;if(a instanceof _o)return cb;if(a instanceof so)return FA;if(a instanceof mo)return oA;if(a instanceof Do)return Hd;if(a instanceof vo)return LA;if(a instanceof bo)return mA;if(a instanceof Ao)return TA;if(a instanceof ko)return Xk;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 32, column 9 - line 32, column 36): "+[a.constructor.name])},u=function(a){return function(i){return n(i)({dpage:a,slug:t.slug})}};return cr([cr(Uw(function(a){return _i([pi(qw(ss)([zw(Ar.value)(dr(function(i){return Jw(qr(i))(r(a.value0))})),Vw(De.value)("cursor:pointer;"),jw(Wr.value)(t.slug+a.value1.value1.value0)]))([Zt(a.value1.value0)]),Gu(ss(Xw(De.value)(function(){return a.value1.value1.value1?"":"display:none;"}())))([Zt(" | ")])])})([new V(zf.value,new V("Home",new V("",!0))),new V(po.value,new V("Hello world",new V("hello/",!0))),new V(_o.value,new V("Component",new V("simple/",!0))),new V(so.value,new V("Pursx 1",new V("pursx1/",!0))),new V(mo.value,new V("Events 1",new V("events1/",!0))),new V(Do.value,new V("Effects",new V("effects/",!0))),new V(vo.value,new V("Pursx 2",new V("pursx2/",!0))),new V(bo.value,new V("Events 2",new V("events2/",!0))),new V(Ao.value,new V("Portals",new V("portals/",!0))),new V(ko.value,new V("SSR",new V("ssr/",!1)))])),Wf(u(r))(e)])})})};var Kw=_t(Rs()()(Ns({reflectSymbol:function(){return"slug"}})(Ws({reflectSymbol:function(){return"startsWith"}})(ze))(ze))),Qw=q(ye),hTt=function(t){return function(){var e=tr(mi(go("could not ingest options: "+Kw(t))))(Qw)(YD(t.startsWith))();return Bk(Gk({slug:t.slug,startsWith:e}))()}};export{hTt as main};
