var E_=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),a=0,i=0;i<e;i++)for(var l=t[i],_=0;_<n;_++)u[a++]=l(r[_]);return u}};var ea={compose:function(t){return function(r){return function(e){return t(r(e))}}}},na=function(t){return t.compose},Ti=function(t){return function(r){return function(e){return na(t)(e)(r)}}};var Bt=function(t){return t.identity},Ht={identity:function(t){return t},Semigroupoid0:function(){return ea}};var Yr=!0;var $o=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},Mr=function(t){return function(r){return function(e){return t(e)(r)}}},S=function(t){return function(r){return t}};var Fo=function(t){return function(r){return r(t)}};var $_=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var rt=function(){function t(){}return t.value=new t,t}();var y=function(t){return t.map},je=function(t){return function(r){return function(e){return y(t)(e)(r)}}},mt=function(t){return y(t)(S(void 0))},j=function(t){return function(r){return function(e){return y(t)(S(e))(r)}}};var ua={map:na(ea)},gr={map:$_};var Mo={apply:E_,Functor0:function(){return gr}},jt=function(t){return t.apply};var Zt=function(t){return function(r){return function(e){return jt(t)(y(t.Functor0())(S(Bt(Ht)))(r))(e)}}},ke=function(t){return function(r){return function(e){return function(n){return jt(t)(y(t.Functor0())(r)(e))(n)}}}};var v=function(t){return t.pure};var uu=function(t){return function(r){return function(e){if(r)return e;if(!r)return v(t)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[r.constructor.name,e.constructor.name])}}},xo=function(t){return function(r){return function(e){return jt(t.Apply0())(v(t)(r))(e)}}};var aa={pure:function(t){return[t]},Apply0:function(){return Mo}};var M_=function(t){return function(r){return t+r}},x_=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var oe=function(t){return t.reflectSymbol};var yn=function(t){return function(r){return r[t]}},au=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var I_={append:function(t){return function(r){return void 0}}},ou={append:M_};var Yt={append:x_};var z=function(t){return t.append};var Ct=function(t){return t.alt};var hd=String.fromCharCode(65535),Td=String.fromCharCode(0),Ed=Number.POSITIVE_INFINITY,$d=Number.NEGATIVE_INFINITY;var L_=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var P_=L_;var O_=L_;var R_=function(t){return function(r){return t===r}};var N_=R_;var B_=R_;var Nr={eq:B_};var Na={eq:N_};var it=function(t){return t.eq};var xt=function(){function t(){}return t.value=new t,t}(),Ot=function(){function t(){}return t.value=new t,t}(),Rt=function(){function t(){}return t.value=new t,t}();var H_=function(t){return function(r){return t-r|0}};var W_=function(t){return function(r){return t+r|0}},U_=function(t){return function(r){return t*r|0}},q_=function(t){return function(r){return t+r}},z_=function(t){return function(r){return t*r}};var wo={add:q_,zero:0,mul:z_,one:1},Ge={add:W_,zero:0,mul:U_,one:1};var cn=function(t){return t.mul};var Zr=function(t){return t.add};var Dc={sub:H_,Semiring0:function(){return Ge}};var me=function(){return{compare:O_(xt.value)(Rt.value)(Ot.value),Eq0:function(){return Nr}}}();var ye=function(){return{compare:P_(xt.value)(Rt.value)(Ot.value),Eq0:function(){return Na}}}();var Lt=function(t){return t.compare};var gn=function(t){return t.top};var ia={top:2147483647,bottom:-2147483648,Ord0:function(){return ye}};var Bn=function(t){return t.bottom};var V_=function(t){return t.toString()},j_=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var X_=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,a=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+a})+'"'};var G_=function(t){return function(r){return[t].concat(r)}},$i=function(t){return function(r){return r.join(t)}};var Qe={show:X_},Q_={showRecordFields:function(t){return function(r){return[]}}},K_=function(t){return t.showRecordFields},Y_=function(){return function(){return function(t){return{show:function(r){var e=K_(t)(rt.value)(r);return e.length===0?"{}":$i(" ")(["{",$i(", ")(e),"}"])}}}}};var Lo={show:j_},ln={show:V_};var dt=function(t){return t.show};var dc=function(t){return function(r){return function(e){return{showRecordFields:function(n){return function(u){var a=K_(r)(rt.value)(u),i=oe(t)(rt.value),l=yn(i)(u);return G_($i(": ")([i,dt(e)(l)]))(a)}}}}}};var k=function(){function t(){}return t.value=new t,t}(),p=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var or=function(t){return function(r){return function(e){if(e instanceof k)return t;if(e instanceof p)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ha=or(!1)(S(!0));var Fr={map:function(t){return function(r){return r instanceof p?new p(t(r.value0)):k.value}}};var ge=function(t){return or(t)(Bt(Ht))},We=function(){return function(t){if(t instanceof p)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Xr=function(t){return{eq:function(r){return function(e){return r instanceof k&&e instanceof k?!0:r instanceof p&&e instanceof p?it(t)(r.value0)(e.value0):!1}}}},fa=function(t){return{compare:function(r){return function(e){if(r instanceof k&&e instanceof k)return Rt.value;if(r instanceof k)return xt.value;if(e instanceof k)return Ot.value;if(r instanceof p&&e instanceof p)return Lt(t)(r.value0)(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 212, column 1 - line 212, column 51): "+[r.constructor.name,e.constructor.name])}},Eq0:function(){return Xr(t.Eq0())}}};var ca={apply:function(t){return function(r){if(t instanceof p)return y(Fr)(t.value0)(r);if(t instanceof k)return k.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return Fr}},$e={bind:function(t){return function(r){if(t instanceof p)return r(t.value0);if(t instanceof k)return k.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return ca}};var ie=function(){return{pure:p.create,Apply0:function(){return ca}}}();var Vd={alt:function(t){return function(r){return t instanceof k?r:t}},Functor0:function(){return Fr}},rs=function(){return{empty:k.value,Alt0:function(){return Vd}}}();var es=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=u-1;a>=0;a--)n=t(e[a])(n);return n}}},ns=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=0;a<u;a++)n=t(n)(e[a]);return n}}};var us=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var Wa=function(t){return t.discard};var Ua={bind:us,Apply0:function(){return Mo}},kt=function(t){return t.bind},fu=function(t){return Mr(kt(t))},Mi=function(t){return function(r){return function(e){return function(n){return fu(t)(r)(e(n))}}}},xi=function(t){return function(r){return function(e){return function(n){return kt(t)(r(n))(e)}}}};var qa={discard:function(t){return kt(t)}};var wi=function(t){return function(r){return kt(t)(r)(Bt(Ht))}};var C=function(t){return t.empty};var Dt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_t=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var kc=function(t){return or(new Dt(t))(_t.create)};var za={map:function(t){return function(r){if(r instanceof Dt)return new Dt(r.value0);if(r instanceof _t)return new _t(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[r.constructor.name])}}};var pn=function(t){return function(r){return function(e){if(e instanceof Dt)return t(e.value0);if(e instanceof _t)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},yc=function(){return pn(S(k.value))(p.create)}();var Yd=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var is={defer:function(t){return function(r){return t(void 0)(r)}}},Ja=function(t){return t.defer},gc=function(t){return function(r){var e=Yd("go","Control.Lazy",function(){return Ja(t)(function(u){return r(e(25))})}),n=e(25);return n}};var fs=function(t){return function(r){return t&&r}},cs=function(t){return function(r){return t||r}},ls=function(t){return!t};var _n=function(t){return t.not};var ja=function(t){return t.ff};var la=function(t){return t.disj},Fe={ff:!1,tt:!0,implies:function(t){return function(r){return la(Fe)(_n(Fe)(t))(r)}},conj:fs,disj:cs,not:ls};var ps=function(t){return Math.min(Math.abs(t),2147483647)},_s=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},ss=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var ms={Ring0:function(){return Dc}};var Po=function(t){return t.mod};var Ii={degree:ps,div:_s,mod:ss,CommutativeRing0:function(){return ms}};var Pi={mempty:void 0,Semigroup0:function(){return I_}},Oo={mempty:"",Semigroup0:function(){return ou}};var qt=function(t){return t.mempty};var X=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var ne=function(t){return t.value1};var pa={map:function(t){return function(r){return new X(r.value0,t(r.value1))}}};var Ho=function(t){return t};var _A=function(t){return{append:function(r){return function(e){return la(t)(r)(e)}}}};var Tc=function(t){return{mempty:ja(t),Semigroup0:function(){return _A(t)}}};var Bi=function(t){return t};var sA=function(t){return{append:function(r){return function(e){return na(t)(r)(e)}}}};var Ec=function(t){return{mempty:Bt(t),Semigroup0:function(){return sA(t.Semigroupoid0())}}};var K=function(t){return t};var g=function(){return K};var Hi=g,Ar=g;var Wi=function(){return function(){return function(){return function(){return function(t){return g()}}}}};var Cr=function(t){return t.foldr};var Cn=function(t){return function(r){return Cr(t)(Ct(r.Alt0()))(C(r))}},wr=function(t){return function(r){return function(e){return Cr(t)(function(){var n=Ct(r.Alt0());return function(u){return n(e(u))}}())(C(r))}}},Qa=function(t){return function(r){return function(e){return Cr(r)(function(){var n=Zt(t.Apply0());return function(u){return n(e(u))}}())(v(t)(void 0))}}},Ur=function(t){return function(r){return Mr(Qa(t)(r))}};var rr=function(t){return t.foldl};var cu=function(t){return function(r){return function(e){return function(n){var u=function(a){return function(i){return a.init?{init:!1,acc:i}:{init:!1,acc:z(r.Semigroup0())(a.acc)(z(r.Semigroup0())(e)(i))}}};return rr(t)(u)({init:!0,acc:qt(r)})(n).acc}}}};var ae={foldr:function(t){return function(r){return function(e){if(e instanceof k)return r;if(e instanceof p)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof k)return r;if(e instanceof p)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof k)return qt(t);if(e instanceof p)return r(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[r.constructor.name,e.constructor.name])}}}};var bs=function(t){return function(r){return function(e){return Cr(t)(function(n){return function(u){return z(r.Semigroup0())(e(n))(u)}})(qt(r))}}},gt={foldr:es,foldl:ns,foldMap:function(t){return bs(gt)(t)}},xc=function(t){return function(r){return function(e){return rr(t)(function(n){return function(u){return z(r.Semigroup0())(n)(e(u))}})(qt(r))}}},Ir=function(t){return t.foldMap};var wc=function(t){return function(r){return function(e){return function(n){return Ar()(Ir(t)(Ec(Ht))(function(u){return Bi(r(u))})(n))(e)}}}};var xu=function(t){return function(r){return Wi()()()()(Ho)(Ir(t)(Tc(r)))}};var Ke={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},ds=function(t){return t.dimap},Ye=function(t){return function(r){return ds(t)(r)(Bt(Ht))}};var Ic=function(t){return function(){return t}},As=function(t){return function(r){return function(){return r(t())()}}};var ma=function(t){return function(r){return function(){for(var e=0,n=t.length;e<n;e++)r(t[e])()}}};var qe=function(t){return function(r){return function(e){return kt(t.Bind1())(r)(function(n){return kt(t.Bind1())(e)(function(u){return v(t.Applicative0())(n(u))})})}}};var ks=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Ka={Applicative0:function(){return Lr},Bind1:function(){return va}},va={bind:As,Apply0:function(){return Lc(0)}},Lr={pure:Ic,Apply0:function(){return Lc(0)}},ys=ks("functorEffect","Effect",function(){return{map:xo(Lr)}}),Lc=ks("applyEffect","Effect",function(){return{apply:qe(Ka),Functor0:function(){return ys(0)}}}),H=ys(20),vr=Lc(23),Pc=function(t){return{append:ke(vr)(z(t))}},Oc=function(t){return{mempty:Ic(qt(t)),Semigroup0:function(){return Pc(t.Semigroup0())}}};var gs=K;var Cs=function(t){return function(r){return function(){return t(r())}}},Ss=function(t){return function(){return t}},hs=function(t){return function(r){return function(){return r(t())()}}};function Ce(t){return function(){return{value:t}}}var fe=function(t){return function(){return t.value}},Ts=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},hn=function(t){return function(r){return function(){return r.value=t}}};var Wn=function(t){return t};var Un={map:function(t){return function(r){return t(r)}}};var Es={apply:function(t){return function(r){return t(r)}},Functor0:function(){return Un}},AA={bind:function(t){return function(r){return r(t)}},Apply0:function(){return Es}},kA={pure:Wn,Apply0:function(){return Es}},Tr={Applicative0:function(){return kA},Bind1:function(){return AA}};var $s=function(t){return function(){return{value:t}}};var ve=function(t){return function(){return t.value}},Fs=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Me=function(t){return function(r){return function(){r.value=t}}};var xe=$s,gA=Fs,Da=function(t){return gA(function(r){var e=t(r);return{state:e,value:e}})},qo=function(t){return function(r){return mt(H)(Da(t)(r))}};var $A=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},FA=Ts,qr=function(t){return FA(function(r){var e=t(r);return{state:e,value:e}})},Jt={map:Cs},Ui={Applicative0:function(){return er},Bind1:function(){return lu}},lu={bind:hs,Apply0:function(){return Nc(0)}},er={pure:Ss,Apply0:function(){return Nc(0)}},Nc=$A("applyST","Control.Monad.ST.Internal",function(){return{apply:qe(Ui),Functor0:function(){return Jt}}}),Ya=Nc(46);var xs={liftST:Bt(Ht),Monad0:function(){return Ui}},$n={liftST:gs,Monad0:function(){return Ka}},sn=function(t){return t.liftST};var qi=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,a=0;u!==r;)n[a++]=u,u+=e;return n[a]=u,n}},MA=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},xA=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},Bc=typeof Array.prototype.fill=="function"?MA:xA,wA=function(){function t(u,a){this.head=u,this.tail=a}var r={};function e(u){return function(a){return new t(u,a)}}function n(u){for(var a=[],i=0,l=u;l!==r;)a[i++]=l.head,l=l.tail;return a}return function(u){return function(a){return n(u(e)(r)(a))}}}(),Fn=function(t){return t.length},Is=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},Ls=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},Ps=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var a=e(n[u]);if(r(a))return a}return t}}}},Os=function(t){return function(r){return function(e){return function(n){for(var u=0,a=n.length;u<a;u++)if(e(n[u]))return t(u);return r}}}};var Rs=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var zo=function(t){return function(r){return r.filter(t)}},zi=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var a=r[u];t(a)?e.push(a):n.push(a)}return{yes:e,no:n}}};var Ns=function(){function t(r,e,n,u,a,i){var l,_,s,b,T,d,o;for(l=a+(i-a>>1),l-a>1&&t(r,e,u,n,a,l),i-l>1&&t(r,e,u,n,l,i),_=a,s=l,b=a;_<l&&s<i;)T=u[_],d=u[s],o=e(r(T)(d)),o>0?(n[b++]=d,++s):(n[b++]=T,++_);for(;_<l;)n[b++]=u[_++];for(;s<i;)n[b++]=u[s++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var Jo=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),a=0;a<n;a++)u[a]=t(r[a])(e[a]);return u}}};var Bs=function(t){return function(r){return t[r]}};function qn(){return[]}var Hc=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var Ji=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},zn=function(t){return function(){return t}};function Hs(t){return function(){return t.slice()}}var Vi=Hs,Wc=Hs,LA=function(){function t(r,e,n,u,a,i){var l,_,s,b,T,d,o;for(l=a+(i-a>>1),l-a>1&&t(r,e,u,n,a,l),i-l>1&&t(r,e,u,n,l,i),_=a,s=l,b=a;_<l&&s<i;)T=u[_],d=u[s],o=e(r(T)(d)),o>0?(n[b++]=d,++s):(n[b++]=T,++_);for(;_<l;)n[b++]=u[_++];for(;s<i;)n[b++]=u[s++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var zs=function(t){return function(r){return function(){var n=Wc(r)();return t(n)(),zn(n)()}}};var mn=function(t){return Hc([t])};var RA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var NA=function(t){return function(){var e=fe(t.value1)();return qr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var Xi=function(t){return y(Jt)(RA.create(t))(Ce(0))},Gi=function(t){return function(r){return function(){for(var n=Ce(!1)();y(Jt)(_n(Fe))(fe(n))();)(function(){var a=NA(t)();if(a instanceof p)return r(a.value0)();if(a instanceof k)return mt(Jt)(hn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[a.constructor.name])})();return{}}}};var Vs=function(){function t(u){return[u]}function r(u){return function(a){return[u,a]}}function e(u){return function(a){return function(i){return[u,a,i]}}}function n(u){return function(a){return u.concat(a)}}return function(u){return function(a){return function(i){return function(l){return function(_){function s(b,T){switch(T-b){case 0:return i([]);case 1:return a(t)(l(_[b]));case 2:return u(a(r)(l(_[b])))(l(_[b+1]));case 3:return u(u(a(e)(l(_[b])))(l(_[b+1])))(l(_[b+2]));default:var d=b+Math.floor((T-b)/4)*2;return u(a(n)(s(b,d)))(s(d,T))}}return s(0,_.length)}}}}}}();var ze=function(t){return t.traverse};var jc=function(t){return function(r){return ze(t)(r)(Bt(Ht))}},ba={traverse:function(t){return Vs(jt(t.Apply0()))(y(t.Apply0().Functor0()))(v(t))},sequence:function(t){return jc(ba)(t)},Functor0:function(){return gr},Foldable1:function(){return gt}};var am=function(){return Bs},Kc=function(){return Is(S(k.value))(function(t){return function(r){return new p({head:t,tail:r})}})}();var ef=function(t){return Ns(t)(function(r){if(r instanceof Ot)return 1;if(r instanceof Rt)return 0;if(r instanceof xt)return-1;throw new Error("Failed pattern match at Data.Array (line 829, column 31 - line 832, column 11): "+[r.constructor.name])})};var nf=function(t){return function(r){return zs(mn(r))(t)()}},om=function(t){return[t]};var w=function(t){return function(r){return Jo(t)(qi(0)(Fn(r)-1|0))(r)}};var wu=function(){return Ls(p.create)(k.value)}(),Yc=function(t){return wu(t)(Fn(t)-1|0)};var Zc=function(t){return wu(t)(0)};var jo=function(){return Ps(k.value)(Ha)}();var tl=function(){return Os(p.create)(k.value)}();var rl=function(t){return function(r){return y(Fr)(am()(r))(tl(t)(r))}};var im=function(){return Rs(p.create)(k.value)}(),Xo=function(t){return function(r){return function(e){return e.length===0?[]:or(e)(function(n){return We()(im(n)(e))})(tl(t(r))(e))}}};var Go=function(t){return function(r){return z(Yt)([t])(r)}};var Ik=Mr(kt(Ua)),el=function(t){return Ik(function(){var r=or([])(om);return function(e){return r(t(e))}}())};var fm=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var Iu=function(t){return t.mapWithIndex};var eo={mapWithIndex:fm,Functor0:function(){return gr}};var Jn=function(t){return t.foldrWithIndex};var Vn=function(t){return t.foldlWithIndex};var su=function(t){return t.foldMapWithIndex};var jn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var af=function(t){return function(r){return new jn(r,C(t))}};var ir=function(){function t(){}return t.value=new t,t}(),St=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),of=function(t){return t},jk=function(t){return new St(t.value0,t.value1)};var Xk=function(t){var r=function(e){return function(n){var u=e,a=!1,i;function l(_,s){if(s instanceof St&&s.value1 instanceof St&&s.value1.value1 instanceof St){u=new St(s,_),n=s.value1.value1.value1;return}var b=function(d){return d instanceof St&&d.value1 instanceof St&&d.value1.value1 instanceof ir?new St(t(d.value0),new St(t(d.value1.value0),ir.value)):d instanceof St&&d.value1 instanceof ir?new St(t(d.value0),ir.value):ir.value},T=function(d){return function(o){var m=d,V=!1,et;function nt(at,Kt){if(at instanceof St&&at.value0 instanceof St&&at.value0.value1 instanceof St&&at.value0.value1.value1 instanceof St){m=at.value1,o=new St(t(at.value0.value0),new St(t(at.value0.value1.value0),new St(t(at.value0.value1.value1.value0),Kt)));return}return V=!0,Kt}for(;!V;)et=nt(m,o);return et}};return a=!0,T(_)(b(s))}for(;!a;)i=l(u,n);return i}};return r(ir.value)},no={map:Xk};var vn={foldr:function(t){return function(r){var e=function(){var u=function(a){return function(i){var l=a,_=!1,s;function b(T,d){if(d instanceof ir)return _=!0,T;if(d instanceof St){l=new St(d.value0,T),i=d.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[T.constructor.name,d.constructor.name])}for(;!_;)s=b(l,i);return s}};return u(ir.value)}(),n=rr(vn)(Mr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function l(_,s){if(s instanceof ir)return a=!0,_;if(s instanceof St){u=t(_)(s.value0),n=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[s.constructor.name])}for(;!a;)i=l(u,n);return i}};return r},foldMap:function(t){return function(r){return rr(vn)(function(e){var n=z(t.Semigroup0())(e);return function(u){return n(r(u))}})(qt(t))}}};var Qo={append:function(t){return function(r){return Cr(vn)(St.create)(r)(t)}}};var ul={append:function(t){return function(r){return new jn(t.value0,z(Qo)(t.value1)(jk(r)))}}};var pm={alt:z(Qo),Functor0:function(){return no}},al=function(){return{empty:ir.value,Alt0:function(){return pm}}}();var ff=function(){var t=function(r){return function(e){var n=r,u=!1,a;function i(l,_){if(_ instanceof ir)return u=!0,l;if(_ instanceof St){n=new St(_.value0,l),e=_.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,_.constructor.name])}for(;!u;)a=i(n,e);return a}};return t(ir.value)}();var bm=function(t){return t()};var dm=function(t){throw new Error(t)};var Am=function(){return dm};var my=bm,Pu=function(t){return my(function(){return Am()(t)})};var bt=function(){function t(){}return t.value=new t,t}(),Ft=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Gt=function(){function t(r,e,n,u,a,i,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i,this.value6=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return function(l){return new t(r,e,n,u,a,i,l)}}}}}}},t}(),Ou=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),mu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),Ru=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Xn=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Nu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),lf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Cm=function(t){return function(r){return new Ft(bt.value,t,r,bt.value)}};var Sa=function(t){return function(r){var e=Lt(t),n=function(u){var a=!1,i;function l(_){if(_ instanceof bt)return a=!0,k.value;if(_ instanceof Ft){var s=e(r)(_.value1);if(s instanceof Rt)return a=!0,new p(_.value2);if(s instanceof xt){u=_.value0;return}u=_.value3;return}if(_ instanceof Gt){var b=e(r)(_.value1);if(b instanceof Rt)return a=!0,new p(_.value2);var T=e(r)(_.value4);if(T instanceof Rt)return a=!0,new p(_.value5);if(b instanceof xt){u=_.value0;return}if(T instanceof Ot){u=_.value6;return}u=_.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[_.constructor.name])}for(;!a;)i=l(u);return i};return n}};var Bu={map:function(t){return function(r){if(r instanceof bt)return bt.value;if(r instanceof Ft)return new Ft(y(Bu)(t)(r.value0),r.value1,t(r.value2),y(Bu)(t)(r.value3));if(r instanceof Gt)return new Gt(y(Bu)(t)(r.value0),r.value1,t(r.value2),y(Bu)(t)(r.value3),r.value4,t(r.value5),y(Bu)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var Gr=function(t){return function(r){return function(e){var n=t,u=r,a=!1,i;function l(_,s,b){if(s instanceof ir)return a=!0,b;if(s instanceof St){if(s.value0 instanceof Ou){n=_,u=s.value1,e=new Ft(b,s.value0.value0,s.value0.value1,s.value0.value2);return}if(s.value0 instanceof mu){n=_,u=s.value1,e=new Ft(s.value0.value0,s.value0.value1,s.value0.value2,b);return}if(s.value0 instanceof Ru){n=_,u=s.value1,e=new Gt(b,s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Xn){n=_,u=s.value1,e=new Gt(s.value0.value0,s.value0.value1,s.value0.value2,b,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Nu){n=_,u=s.value1,e=new Gt(s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5,b);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[s.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[s.constructor.name,b.constructor.name])}for(;!a;)i=l(n,u,e);return i}}},_f=function(t){return function(r){return function(e){var n=function(i){return function(l){var _=i,s=!1,b;function T(d,o){if(d instanceof ir)return s=!0,new Ft(o.value0,o.value1,o.value2,o.value3);if(d instanceof St){if(d.value0 instanceof Ou)return s=!0,Gr(t)(d.value1)(new Gt(o.value0,o.value1,o.value2,o.value3,d.value0.value0,d.value0.value1,d.value0.value2));if(d.value0 instanceof mu)return s=!0,Gr(t)(d.value1)(new Gt(d.value0.value0,d.value0.value1,d.value0.value2,o.value0,o.value1,o.value2,o.value3));if(d.value0 instanceof Ru){_=d.value1,l=new lf(new Ft(o.value0,o.value1,o.value2,o.value3),d.value0.value0,d.value0.value1,new Ft(d.value0.value2,d.value0.value3,d.value0.value4,d.value0.value5));return}if(d.value0 instanceof Xn){_=d.value1,l=new lf(new Ft(d.value0.value0,d.value0.value1,d.value0.value2,o.value0),o.value1,o.value2,new Ft(o.value3,d.value0.value3,d.value0.value4,d.value0.value5));return}if(d.value0 instanceof Nu){_=d.value1,l=new lf(new Ft(d.value0.value0,d.value0.value1,d.value0.value2,d.value0.value3),d.value0.value4,d.value0.value5,new Ft(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[d.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[d.constructor.name,o.constructor.name])}for(;!s;)b=T(_,l);return b}},u=Lt(t),a=function(i){return function(l){var _=i,s=!1,b;function T(d,o){if(o instanceof bt)return s=!0,n(d)(new lf(bt.value,r,e,bt.value));if(o instanceof Ft){var m=u(r)(o.value1);if(m instanceof Rt)return s=!0,Gr(t)(d)(new Ft(o.value0,r,e,o.value3));if(m instanceof xt){_=new St(new Ou(o.value1,o.value2,o.value3),d),l=o.value0;return}_=new St(new mu(o.value0,o.value1,o.value2),d),l=o.value3;return}if(o instanceof Gt){var V=u(r)(o.value1);if(V instanceof Rt)return s=!0,Gr(t)(d)(new Gt(o.value0,r,e,o.value3,o.value4,o.value5,o.value6));var et=u(r)(o.value4);if(et instanceof Rt)return s=!0,Gr(t)(d)(new Gt(o.value0,o.value1,o.value2,o.value3,r,e,o.value6));if(V instanceof xt){_=new St(new Ru(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),d),l=o.value0;return}if(V instanceof Ot&&et instanceof xt){_=new St(new Xn(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),d),l=o.value3;return}_=new St(new Nu(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),d),l=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[d.constructor.name,o.constructor.name])}for(;!s;)b=T(_,l);return b}};return a(ir.value)}}},ky=function(t){return function(r){var e=function(l){return function(_){var s=l,b=!1,T;function d(o,m){if(o instanceof ir)return b=!0,m;if(o instanceof St){if(o.value0 instanceof Ou&&o.value0.value2 instanceof bt&&m instanceof bt)return b=!0,Gr(t)(o.value1)(new Ft(bt.value,o.value0.value0,o.value0.value1,bt.value));if(o.value0 instanceof mu&&o.value0.value0 instanceof bt&&m instanceof bt)return b=!0,Gr(t)(o.value1)(new Ft(bt.value,o.value0.value1,o.value0.value2,bt.value));if(o.value0 instanceof Ou&&o.value0.value2 instanceof Ft){s=o.value1,_=new Gt(m,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof mu&&o.value0.value0 instanceof Ft){s=o.value1,_=new Gt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,m);return}return o.value0 instanceof Ou&&o.value0.value2 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Ft(new Ft(m,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ft(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof mu&&o.value0.value0 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Ft(new Ft(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ft(o.value0.value0.value6,o.value0.value1,o.value0.value2,m)))):o.value0 instanceof Ru&&o.value0.value2 instanceof bt&&o.value0.value5 instanceof bt&&m instanceof bt?(b=!0,Gr(t)(o.value1)(new Gt(bt.value,o.value0.value0,o.value0.value1,bt.value,o.value0.value3,o.value0.value4,bt.value))):o.value0 instanceof Xn&&o.value0.value0 instanceof bt&&o.value0.value5 instanceof bt&&m instanceof bt?(b=!0,Gr(t)(o.value1)(new Gt(bt.value,o.value0.value1,o.value0.value2,bt.value,o.value0.value3,o.value0.value4,bt.value))):o.value0 instanceof Nu&&o.value0.value0 instanceof bt&&o.value0.value3 instanceof bt&&m instanceof bt?(b=!0,Gr(t)(o.value1)(new Gt(bt.value,o.value0.value1,o.value0.value2,bt.value,o.value0.value4,o.value0.value5,bt.value))):o.value0 instanceof Ru&&o.value0.value2 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(new Gt(m,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Xn&&o.value0.value0 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(new Gt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,m),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Xn&&o.value0.value5 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(o.value0.value0,o.value0.value1,o.value0.value2,new Gt(m,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Nu&&o.value0.value3 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(o.value0.value0,o.value0.value1,o.value0.value2,new Gt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,m)))):o.value0 instanceof Ru&&o.value0.value2 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(new Ft(m,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ft(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Xn&&o.value0.value0 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(new Ft(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ft(o.value0.value0.value6,o.value0.value1,o.value0.value2,m),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Xn&&o.value0.value5 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(o.value0.value0,o.value0.value1,o.value0.value2,new Ft(m,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new Ft(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Nu&&o.value0.value3 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(o.value0.value0,o.value0.value1,o.value0.value2,new Ft(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new Ft(o.value0.value3.value6,o.value0.value4,o.value0.value5,m)))):(b=!0,Pu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!b;)T=d(s,_);return T}},n=function(l){return function(_){var s=l,b=!1,T;function d(o,m){if(m instanceof Ft&&m.value0 instanceof bt&&m.value3 instanceof bt)return b=!0,e(o)(bt.value);if(m instanceof Ft){s=new St(new mu(m.value0,m.value1,m.value2),o),_=m.value3;return}if(m instanceof Gt&&m.value0 instanceof bt&&m.value3 instanceof bt&&m.value6 instanceof bt)return b=!0,e(new St(new mu(bt.value,m.value1,m.value2),o))(bt.value);if(m instanceof Gt){s=new St(new Nu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),o),_=m.value6;return}return b=!0,Pu("The impossible happened in partial function `removeMaxNode`.")}for(;!b;)T=d(s,_);return T}},u=function(l){var _=!1,s;function b(T){if(T instanceof Ft&&T.value3 instanceof bt)return _=!0,{key:T.value1,value:T.value2};if(T instanceof Ft){l=T.value3;return}if(T instanceof Gt&&T.value6 instanceof bt)return _=!0,{key:T.value4,value:T.value5};if(T instanceof Gt){l=T.value6;return}return _=!0,Pu("The impossible happened in partial function `maxNode`.")}for(;!_;)s=b(l);return s},a=Lt(t),i=function(l){return function(_){var s=l,b=!1,T;function d(o,m){if(m instanceof bt)return b=!0,k.value;if(m instanceof Ft){var V=a(r)(m.value1);if(m.value3 instanceof bt&&V instanceof Rt)return b=!0,new p(new X(m.value2,e(o)(bt.value)));if(V instanceof Rt){var et=u(m.value0);return b=!0,new p(new X(m.value2,n(new St(new Ou(et.key,et.value,m.value3),o))(m.value0)))}if(V instanceof xt){s=new St(new Ou(m.value1,m.value2,m.value3),o),_=m.value0;return}s=new St(new mu(m.value0,m.value1,m.value2),o),_=m.value3;return}if(m instanceof Gt){var nt=function(){return m.value0 instanceof bt&&m.value3 instanceof bt&&m.value6 instanceof bt}(),V=a(r)(m.value4),at=a(r)(m.value1);if(nt&&at instanceof Rt)return b=!0,new p(new X(m.value2,Gr(t)(o)(new Ft(bt.value,m.value4,m.value5,bt.value))));if(nt&&V instanceof Rt)return b=!0,new p(new X(m.value5,Gr(t)(o)(new Ft(bt.value,m.value1,m.value2,bt.value))));if(at instanceof Rt){var et=u(m.value0);return b=!0,new p(new X(m.value2,n(new St(new Ru(et.key,et.value,m.value3,m.value4,m.value5,m.value6),o))(m.value0)))}if(V instanceof Rt){var et=u(m.value3);return b=!0,new p(new X(m.value5,n(new St(new Xn(m.value0,m.value1,m.value2,et.key,et.value,m.value6),o))(m.value3)))}if(at instanceof xt){s=new St(new Ru(m.value1,m.value2,m.value3,m.value4,m.value5,m.value6),o),_=m.value0;return}if(at instanceof Ot&&V instanceof xt){s=new St(new Xn(m.value0,m.value1,m.value2,m.value4,m.value5,m.value6),o),_=m.value3;return}s=new St(new Nu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),o),_=m.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[m.constructor.name])}for(;!b;)T=d(s,_);return T}};return i(ir.value)}},be={foldr:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return Cr(be)(t)(t(e.value2)(Cr(be)(t)(r)(e.value3)))(e.value0);if(e instanceof Gt)return Cr(be)(t)(t(e.value2)(Cr(be)(t)(t(e.value5)(Cr(be)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return rr(be)(t)(t(rr(be)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Gt)return rr(be)(t)(t(rr(be)(t)(t(rr(be)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof bt)return qt(t);if(e instanceof Ft)return z(t.Semigroup0())(Ir(be)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(Ir(be)(t)(r)(e.value3)));if(e instanceof Gt)return z(t.Semigroup0())(Ir(be)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(z(t.Semigroup0())(Ir(be)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value5))(Ir(be)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[e.constructor.name])}}}},Se={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return Jn(Se)(t)(t(e.value1)(e.value2)(Jn(Se)(t)(r)(e.value3)))(e.value0);if(e instanceof Gt)return Jn(Se)(t)(t(e.value1)(e.value2)(Jn(Se)(t)(t(e.value4)(e.value5)(Jn(Se)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return Vn(Se)(t)(t(e.value1)(Vn(Se)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Gt)return Vn(Se)(t)(t(e.value4)(Vn(Se)(t)(t(e.value1)(Vn(Se)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){return function(r){return function(e){if(e instanceof bt)return qt(t);if(e instanceof Ft)return z(t.Semigroup0())(su(Se)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(su(Se)(t)(r)(e.value3)));if(e instanceof Gt)return z(t.Semigroup0())(su(Se)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(z(t.Semigroup0())(su(Se)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value4)(e.value5))(su(Se)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[e.constructor.name])}}},Foldable0:function(){return be}},Sm=function(){return Jn(Se)(function(t){return function(r){return function(e){return new St(t,e)}}})(ir.value)}();var Gn=function(){return bt.value}();var pl=function(t){return function(r){return function(e){return or(e)(ne)(ky(t)(r)(e))}}};var Qn=function(t){return function(r){return function(e){return function(n){var u=r(Sa(t)(e)(n));if(u instanceof k)return pl(t)(e)(n);if(u instanceof p)return _f(t)(e)(u.value0)(n);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[u.constructor.name])}}}};var yy=function(t){return function(r){return function(e){return function(n){var u=function(a){return function(i){return function(l){return Qn(t)(function(){var _=or(l)(r(l));return function(s){return p.create(_(s))}}())(a)(i)}}};return Vn(Se)(u)(n)(e)}}}};var hm=function(t){return yy(t)(S)};var sf={compact:function(t){return function(){var e=qn(),n=Xi(function(u){return wu(t)(u)})();return Gi(n)(function(){var u=mt(Jt);return function(a){return u(function(i){if(i instanceof k)return v(er)(0);if(i instanceof p)return mn(i.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[i.constructor.name])}(a))}}())(),zn(e)()}()},separate:function(t){return function(){var e=qn(),n=qn(),u=Xi(function(a){return wu(t)(a)})();return Gi(u)(function(){var a=mt(Jt);return function(i){return a(function(l){if(l instanceof Dt)return mn(l.value0)(e);if(l instanceof _t)return mn(l.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[l.constructor.name])}(i))}}())(),jt(Ya)(y(Jt)(function(a){return function(i){return{left:a,right:i}}})(zn(e)))(zn(n))()}()}};var vu=function(t){return t.compact};var Tm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof Dt)return{left:z(Yt)(e.left)([u.value0]),right:e.right};if(u instanceof _t)return{right:z(Yt)(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return rr(gt)(r)({left:[],right:[]})},partition:zi,filterMap:el,filter:zo,Compactable0:function(){return sf},Functor1:function(){return gr}};var Re=function(t){return t.filterMap};var _l=function(t){return t.filter};var $y=function(t){return function(r){return function(e){return hm(t)(r)(e)}}};var sl=function(t){return Sm(t)};var $m=function(t){return Cm(t)(void 0)};var ml=function(t){return{append:$y(t)}};var Fm={foldMap:function(t){return function(r){var e=Ir(vn)(t)(r);return function(n){return e(sl(n))}}},foldl:function(t){return function(r){var e=rr(vn)(t)(r);return function(n){return e(sl(n))}}},foldr:function(t){return function(r){var e=Cr(vn)(t)(r);return function(n){return e(sl(n))}}}};var Fy=Gn;var Mm=function(t){return{mempty:Fy,Semigroup0:function(){return ml(t)}}};var xm=function(t){return function(r){return function(e){return pl(t)(r)(e)}}};function wm(t){return function(r){return function(){return setTimeout(r,t)}}}function Im(t){return function(){clearTimeout(t)}}var Lm=wm;var wy={eq:function(t){return function(r){return t===r}}},mf={compare:function(t){return function(r){return Lt(ye)(t)(r)}},Eq0:function(){return wy}};var Pm=Im;var Du=function(r){return function(e){return r(e)()}};var uo=function(r){return function(e){return function(){return r(e)}}};var Gy=function(t){return{append:function(r){return function(e){return Du(function(n){return z(Pc(t))(uo(r)(n))(uo(e)(n))})}}}};var Dl=function(t){return{mempty:Du(function(r){return qt(Oc(t))}),Semigroup0:function(){return Gy(t.Semigroup0())}}};var Ta=function(t){return t.keepLatest};var Hu=function(t){return t.fold};var Wu=function(t){return function(r){return function(e){return function(n){return Re(t.Filterable1())(ne)(Hu(t)(function(u){return function(a){return y(pa)(v(ie))(r(u)(a.value0))}})(e)(new X(n,k.value)))}}}};function bl(t){return function(r){return t===r}}var vf=bl;var Hm=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var Zy=function(t){return function(r){return function(e,n){var u=xe(k.value)(),a=t(e,function(l){return Me(new p(l))(u)()}),i=r(e,function(l){var _=ve(u)();return Ur(Lr)(ae)(_)(function(s){return function(){return n(l(s))}})()});return function(){return a(),i()}}}},tg=function(t){return function(r,e){var n=xe(v(Lr)(void 0))(),u=t(r,function(a){var i=ve(n)();i();var l=a(r,e);return Me(l)(n)()});return function(){var i=ve(n)();return i(),u()}}},Dr={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},rg=function(t){return function(r){return function(e){return function(n,u){var a=xe(e)();return r(n,function(i){var l=Da(t(i))(a)();return u(l)})}}}},ti=function(t){return function(r){return function(e,n){return r(e,function(u){var a=t(u);if(a instanceof p)return n(a.value0);if(a instanceof k)return void 0;throw new Error("Failed pattern match at FRP.Event (line 202, column 31 - line 204, column 35): "+[a.constructor.name])})}}},dl=function(t){return ti(function(r){var e=t(r);if(e)return new p(r);if(!e)return k.value;throw new Error("Failed pattern match at FRP.Event (line 117, column 13 - line 119, column 25): "+[e.constructor.name])})},Wm=function(){var r=xe([])();return{event:function(e,n){var u=xe(n)();return qo(function(a){return z(Yt)(a)([u])})(r)(),function(){return Me(qt(Dl(Pi)))(u)(),Da(Xo(vf)(u))(r)(),void 0}},push:function(e){var n=ve(r)();return ma(n)(function(u){return function(){var i=ve(u)();return i(e)}})()}}},eg=function(t){return function(r,e){var n=Wm(),u=t(n.event),a=u.input(r,n.push),i=u.output(r,e);return function(){return a(),i()}}},ri={compact:ti(Bt(Ht)),separate:function(t){return{left:ti(function(r){if(r instanceof Dt)return new p(r.value0);if(r instanceof _t)return k.value;throw new Error("Failed pattern match at FRP.Event (line 100, column 13 - line 102, column 33): "+[r.constructor.name])})(t),right:ti(function(r){if(r instanceof _t)return new p(r.value0);if(r instanceof Dt)return k.value;throw new Error("Failed pattern match at FRP.Event (line 107, column 13 - line 109, column 32): "+[r.constructor.name])})(t)}}},Dn={filter:dl,filterMap:ti,partition:function(t){return function(r){return{yes:dl(t)(r),no:dl(function(){var e=_n(Fe);return function(n){return e(t(n))}}())(r)}}},partitionMap:function(t){return function(r){return{left:Re(Dn)(function(){var e=pn(p.create)(S(k.value));return function(n){return e(t(n))}}())(r),right:Re(Dn)(function(e){return yc(t(e))})(r)}}},Compactable0:function(){return ri},Functor1:function(){return Dr}},ng=function(t){return function(r){return function(e,n){var u=xe(k.value)(),a=sn($n)(qn)(),i=xe(k.value)(),l=sn($n)(qn)(),_=xe(!0)(),s=t(e,function(o){var m=ve(_)();if(m)return mt(H)(sn($n)(mn(o)(a)))();Me(new p(o))(u)();var V=ve(i)();return Ur(Lr)(ae)(V)(function(et){return function(){return n(et(o))}})()}),b=r(e,function(o){var m=ve(_)();if(m)return mt(H)(sn($n)(mn(o)(l)))();Me(new p(o))(i)();var V=ve(u)();return Ur(Lr)(ae)(V)(function(et){return function(){return n(o(et))}})()});Me(!1)(_)();var T=sn($n)(Vi(a))(),d=sn($n)(Vi(l))();return function(){return T.length===0?Me(Yc(d))(i)():ma(T)(function(o){return function(){return Me(new p(o))(u)(),ma(d)(function(V){return function(){return Me(new p(V))(i)(),n(V(o))}})()}})()}(),sn($n)(Ji(0)(Fn(T))([])(a))(),sn($n)(Ji(0)(Fn(d))([])(l))(),function(){return s(),b()}}}},kl=function(t){return function(r){return r}(yl(306).subscribe)(t)},yl=Hm("backdoor","FRP.Event",function(){var t=function(){var e=xe([])();return{event:function(n,u){var a=xe(u)();return qo(function(i){return z(Yt)(i)([a])})(e)(),function(){return Me(qt(Dl(Pi)))(a)(),Da(Xo(vf)(a))(e)(),void 0}},push:function(n){return function(){var a=ve(e)();return ma(a)(function(i){return function(){var _=ve(i)();return _(n)}})()}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?v(Lr)(void 0):e(function(a){return function(){return u(a)}})()}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(a){return function(){return u(a)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var a=function(i){return function(l){return function(){return i(n,Du(l))}}};return e(a)(function(i){return function(){return u(i)}})()}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,Du(n))}}};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,Du(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var a=Al(604)();return u(e(a.push)(a.event)),v(Lr)(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,a){var i=Wm();return a(n(i.event)),e(u,i.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Al(622)(),a=kl(e)(u.push)();return{event:u.event,unsubscribe:a}}};return r}(),mailboxed:function(){var r=function(e){return function(n){return function(u){return function(a,i){var l=xe(Gn)();i(u(function(s){return function(b,T){return mt(H)(Da(Qn(e)(function(d){if(d instanceof k)return new p([T]);if(d instanceof p)return new p(z(Yt)(d.value0)([T]));throw new Error("Failed pattern match at FRP.Event (line 635, column 21 - line 637, column 55): "+[d.constructor.name])})(s))(l))(),mt(H)(Da(Qn(e)(function(d){if(d instanceof k)return k.value;if(d instanceof p)return new p(Xo(vf)(T)(d.value0));throw new Error("Failed pattern match at FRP.Event (line 644, column 21 - line 646, column 69): "+[d.constructor.name])})(s))(l))}}));var _=n(a,function(s){var b=ve(l)(),T=Sa(e)(s.address)(b);if(T instanceof k)return void 0;if(T instanceof p)return ma(T.value0)(function(d){return function(){return d(s.payload)}})();throw new Error("Failed pattern match at FRP.Event (line 653, column 13 - line 655, column 70): "+[T.constructor.name])});return function(){return mt(H)(Me(Gn)(l))(),_()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,a){var i=xe(qt(Mm(mf)))(),l=n(u,function(_){var s=xe(k.value)(),b=Lm(e)(function(){a(_);var d=ve(s)();return or(v(Lr)(void 0))(function(o){return qo(xm(mf)(o))(i)})(d)()})();return Me(new p(b))(s)(),qo(z(ml(mf))($m(b)))(i)()});return function(){var s=ve(i)();return Ur(Lr)(Fm)(s)(Pm)(),l()}}}};return r}()}}),Al=Hm("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(yl(383).create)()}}),ei=yl(515),Um=Al(380),gl=function(t){return function(r){return r}(ei.bus)(t)};var rn=function(t){return function(r){return r}(ei.makeLemmingEvent)(t)},qm=function(t){return function(r){return r}(ei.makePureEvent)(t)},Cl=function(t){return function(r){return r}(ei.memoize)(t)},zm=function(t){return function(r){return r}(ei.subscribePure)(t)},ug={apply:function(t){return function(r){return ng(t)(y(Dr)(Fo)(r))}},Functor0:function(){return Dr}};var Y={pure:function(t){return function(r,e){return e(t),v(Lr)(void 0)}},Apply0:function(){return ug}};var lr={alt:function(t){return function(r){return function(e,n){return jt(vr)(y(H)(function(u){return function(a){return function(){return u(),a()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Dr}};var A={empty:function(t,r){return v(Lr)(void 0)},Alt0:function(){return lr}},ag={Applicative0:function(){return Y},Plus1:function(){return A}},we={fold:rg,keepLatest:tg,sampleOn:Zy,fix:eg,Alternative0:function(){return ag},Filterable1:function(){return Dn}};var og=function(t){return t},ni=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ui=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ig=function(t){return t},Df=g(),f=ig;var $=function(){return ni.create}();var G=function(){return ui.create}(),Er=function(){var t=y(ua)(y(H)(S(!0)));return function(r){return og(t(r))}}(),At=function(t){return t.attr};function Jm(t){return()=>t.slice()}function Vm(t){return r=>e=>()=>{e[t]=r}}function jm(t){return()=>t.slice()}var Sl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var bf=function(t){return function(){return function(){return function(r){return function(e){return function(n){return au(oe(t)(r))(e)(n)}}}}}},El=function(t){return function(){return function(r){return function(e){return yn(oe(t)(r))(e)}}}};var df={vb:function(t){return v(er)(new X({},{}))}},Gm=function(t){return t.vb},_g={vbus:function(){var t=function(){return function(e){return function(n){return function(u){return rn(function(a){return function(i){return function(){var _=Gm(e)(rt.value)();return i(u(_.value0)(_.value1))(),v(er)(void 0)}}})}}}},r=function(){return function(e){return t()(e)}};return r}()},Fl=function(){return function(t){return function(r){return function(e){return e()(t)}(_g.vbus)(r)}}};var ao=function(t){return function(){return function(){return function(r){return function(){return function(){return{vb:function(e){return function(){var u=Gm(r)(rt.value)(),a=Um();return new X(bf(t)()()(rt.value)(a.push)(u.value0),bf(t)()()(rt.value)(a.event)(u.value1))}}}}}}}}};var Uu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ml=function(){function t(){}return t.value=new t,t}();var kf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),oo=function(){function t(){}return t.value=new t,t}(),yf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),xl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),wl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),$a=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),h=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var qu={eq:function(t){return function(r){return t instanceof Uu&&r instanceof Uu?t.value0===r.value0:t instanceof Ml&&r instanceof Ml}}};var I=function(t){return new wl(t)};var Qm=function(t){return new xl(t)};var Km=t=>r=>r[t];var Kn=function(t){return t.reflectType};var Zm=function(t){return Kn(t)};var Fa=gr;var gf=function(){return function(t){return t}};var Cf=function(){return function(){return function(){return function(){return function(){return function(t){var r=Zm(t);return function(e){return Km(r(e))}}}}}}};var tv=[];var Il=function(){return function(){return function(t){return function(r){return Go(t)(r)}}}};function rv(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var zu={};function Pl(t){return t()}function ev(t){return function(r){return function(e){return function(n){var u=e;function a(l){return function(_){return r(_)(l)(n[l])}}for(var i in n)hasOwnProperty.call(n,i)&&(u=t(u)(a(i)));return u}}}}function Sf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var kg=Object.keys||Sf(function(t){return function(){return t}});function Ol(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var Rl=function(t){return function(r){return function(){return delete r[t],r}}};var $g=Sf(function(t){return function(r){return r}});var Fg=rv;var nv=function(t){return function(r){return Pl(function(){var n=Fg(r)();return t(n)(),n})}};var io=function(t){return function(r){return nv(Ol(t)(r))}};var uv=ev(Fo),Mg=function(t){return function(r){return uv(function(e){return function(n){return function(u){return z(t.Semigroup0())(e)(r(n)(u))}}})(qt(t))}},av={foldl:function(t){return uv(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return Cr(gt)(t)(r)($g(e))}}},foldMap:function(t){return function(r){return Mg(t)(S(r))}}};var Nl=function(t){return nv(Rl(t))};function ov(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function iv(t){return function(r){return function(e){return e[t]=r,e}}}function fv(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function cv(t){return function(r){return delete r[t],r}}var Hl=ea;var lv=function(){return function(){return function(t){return function(r){return function(e){return function(n){return fv(oe(t)(r))(e)(n)}}}}}};var pv=function(){return function(){return function(t){return function(r){return function(e){return function(n){return iv(oe(t)(r))(e)(n)}}}}}};var _v=function(t){return function(){return function(){return function(r){return function(e){return cv(oe(t)(r))(e)}}}}};var sv=function(t){return function(r){return t(ov(r))}};var mv=function(){function t(){}return t.value=new t,t}(),Wl=function(){function t(){}return t.value=new t,t}(),Ig=function(){function t(){}return t.value=new t,t}();var bn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof wl)return wr(gt)(A)(bn(t)(r)(e))(u.value0);if(u instanceof $a)return Ta(we)(y(Dr)(bn(t)(r)(e))(u.value0));if(u instanceof h)return n(t.toElt(u.value0));if(u instanceof xl)return rn(function(a){return function(i){return function(){var _=Ce(zu)(),s=a(u.value0)(function(b){return function(){var d=t.ids(e)(),o=Ce(v(er)(void 0))(),m=t.ids(e)(),V=Ce(v(er)(void 0))(),et=Ce([])(),nt=Ce(v(er)(void 0))(),at=y(Jt)(Uu.create)(t.ids(e))(),Kt=Ce(mv.value)(),fr=a(b)(function(ur){return function(){var ot=fe(Kt)();if(ur instanceof yf&&ot instanceof Wl)return kt(lu)(fe(et))(Qa(er)(gt)(function(){var ct=t.doLogic(ur.value0)(e);return function(vt){return i(ct(vt))}}()))();if(ur instanceof oo&&ot instanceof Wl){mt(Jt)(hn(Ig.value)(Kt))();var q=function(){var vt=fe(et)();Ur(er)(gt)(vt)(function(On){return Ur(er)(ae)(r.parent)(function(Eu){return i(t.disconnectElement(e)({id:On,parent:Eu,scope:at}))})})();var Ee=fe(o)();Ee();var Vr=fe(V)();return Vr(),mt(Jt)(qr(Nl(d))(_))(),mt(Jt)(qr(Nl(m))(_))()};return mt(Jt)(hn(q)(nt))(),q()}if(ur instanceof kf&&ot instanceof mv){mt(Jt)(hn(Wl.value)(Kt))();var x=a(bn(t)(function(){var ct={};for(var vt in r)({}).hasOwnProperty.call(r,vt)&&(ct[vt]=r[vt]);return ct.scope=at,ct.raiseId=function(Ee){return mt(Jt)(qr(z(Yt)([Ee]))(et))},ct}())(e)(ur.value0))(i)();return mt(Jt)(qr(io(m)(x))(_))(),mt(Jt)(hn(x)(V))()}return void 0}})();mt(Jt)(hn(fr)(o))(),mt(Jt)(qr(io(d)(fr))(_))();var lt=fe(nt)();return lt()}})();return function(){return kt(lu)(fe(_))(rr(av)(Zt(Ya))(v(er)(void 0)))(),s()}}}});throw new Error("Failed pattern match at Bolson.Control (line 543, column 17 - line 628, column 20): "+[u.constructor.name])}}}},Lg=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(a){var i=function(l){return function(_){return rn(function(s){return function(b){return function(){var d=Jm(y(gr)(S(""))(gf()(u)))(),o=Cn(gt)(A)(Iu(eo)(function(fr){return gc(is)(function(lt){return function(ur){return ur instanceof h?function(on){return on(function(){var ot={};for(var q in l)({}).hasOwnProperty.call(l,q)&&(ot[q]=l[q]);return ot.parent=k.value,ot.scope=r(l.scope),ot.raiseId=function(x){return Vm(fr)(x)(d)},ot}())(_)}(n.toElt(ur.value0)):lt(n.wrapElt(ur))}})})(gf()(u))),m=s(o)(b)(),V=Ce(v(er)(void 0))(),et=y(Jt)(K)(jm(d))(),nt=y(Fa)(function(fr){return function(lt){return new h(n.fromEltO1(function(ur){return function(on){return rn(function(ot){return function(q){return function(){return ur.raiseId(fr)(),Ur(er)(ae)(ur.parent)(function(ct){return q(n.giveNewParent(on)(sv(Ti(Hl)(pv()()({reflectSymbol:function(){return"id"}})(rt.value)(fr))(Ti(Hl)(lv()()({reflectSymbol:function(){return"parent"}})(rt.value)(S(ct)))(_v({reflectSymbol:function(){return"raiseId"}})()()(rt.value))))(ur))(lt))})(),v(er)(void 0)}}})}}))}})(et),at=bn(e)(l)(_)(a(nt)(K)),Kt=s(at)(b)();return mt(Jt)(hn(Kt)(V))(),function(){m(),uu(er)(!t)(Ur(er)(gt)(gf()(et))(function(ur){return b(n.deleteFromCache(_)({id:ur}))}))();var lt=fe(V)();return lt()}}}})}};return new h(n.fromEltO2(i))}}}}}}}}};var vv=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return Lg()()()(!1)(Bt(Ht))(t)(r)(e)(n)}}}}}}};var Tf=function(){return function(t){return function(r){return function(e){return new $a(g()(Fl()(t)(r)(e)))}}}};var Dv=function(t){return function(r){var e=function(n){return n instanceof h?new h(Ye(Ke)(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof $a?new $a(y(Dr)(e)(n.value0)):r};return e(r)}},P=function(t){return Dv(p.create(t))},bv=function(){return new yf(0)}();var Ul=function(){return oo.value}(),Og=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Ar();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:it(qu)})}},toElt:function(t){return t}}},Ju=function(t){return new kf(Ar()(Dv(k.value)(t)))};var Vu=function(t){return gl(t)};var fo=function(t){return new $a(g()(Vu(t)))};var Rg=function(t){return function(r){return function(e){return bn(Og())(t)(r)(e)}}},Ng=function(t){return function(r){var e=function(n){return function(u){return rn(function(a){return function(i){return function(){var _=u.ids();n.raiseId(_)();var s=function(){if(n.parent instanceof k){var T=u.ids();return new X(v(Y)(u.makeElement({id:T,parent:k.value,scope:n.scope,tag:"div",pos:k.value,dynFamily:k.value})),T)}if(n.parent instanceof p)return new X(C(A),n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 338, column 34 - line 352, column 36): "+[n.parent.constructor.name])}(),b=a(Cn(gt)(A)([s.value0,v(Y)(u.makeDynBeacon({id:_,parent:new p(s.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),v(Y)(u.attributeParent({id:_,parent:s.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),Rg({parent:new p(s.value1),scope:n.scope,ez:!1,raiseId:function(T){return v(er)(void 0)},pos:k.value,dynFamily:new p(_)})(u)(t(r))]))(i)();return function(){return i(u.removeDynBeacon({id:_}))(),b()}}}})}};return new h(e)}},ju=Ng(g()(Qm));var Bg=function(t){return function(r){return function(e){return y(Dr)(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},Hg=function(t){return function(r){return function(e){return y(Dr)(function(n){return function(u){if(u.value instanceof ni)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof ui)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 61, column 26 - line 63, column 45): "+[u.value.constructor.name])}(Df(n))})(e)}}},en=function(t){var r=function(e){return function(n){return rn(function(u){return function(a){return function(){var l=n.ids();e.raiseId(l)();var _=u(Cn(gt)(A)([v(Y)(n.makeText({id:l,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),Bg(n)(l)(t),or(C(A))(function(s){return v(Y)(n.attributeParent({id:l,parent:s,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]))(a)();return function(){return a(n.deleteFromCache({id:l}))(),_()}}}})}};return new h(r)},nr=function(t){return en(v(Y)(t))},Ef=function(t){return function(r){var e=function(n){var u=function(a){return function(i){return new X(i+1|0,new X(a,i))}};return Wu(we)(u)(n)(0)};return ju(Ta(we)(Cl(e(r))(function(n){return y(Dr)(function(u){return Cn(gt)(A)([y(Dr)(S(oo.value))(_l(Dn)(function(){var a=it(Na)(u.value1+1|0);return function(i){return a(ne(i))}}())(n)),v(Y)(Ju(g()(t(u.value0))))])})(n)})))}},dv=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Ar();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:it(qu)})}},toElt:function(t){return t}}};var Wg=function(t){return function(r){return function(e){return bn(dv())(t)(r)(e)}}};var L=function(t){return function(r){return function(e){var n=function(u){return function(a){return rn(function(i){return function(l){return function(){var s=a.ids();u.raiseId(s)();var b=i(Ct(lr)(Cn(gt)(A)(z(Yt)([v(Y)(a.makeElement({id:s,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),Hg(a)(s)(r)])(or([])(function(T){return[v(Y)(a.attributeParent({id:s,parent:T,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(Wg({parent:new p(s),scope:u.scope,ez:!0,raiseId:function(T){return v(er)(void 0)},pos:k.value,dynFamily:k.value})(a)(e)))(l)();return function(){return l(a.deleteFromCache({id:s}))(),b()}}}})}};return n}}};var Av=function(){return function(t){return function(r){return vv()()()(dv())({fromEltO1:g(),fromEltO2:g(),toElt:g(),wrapElt:function(e){return new h(L("div")(C(A))(Hi()(e)))},giveNewParent:function(e){return function(n){return function(u){return Ar()(e).giveNewParent(n)}}},deleteFromCache:function(){var e=Ar();return function(n){return function(u){return u.deleteFromCache}(e(n))}}()})(y(Fa)(Ar())(t))(Ye(Ke)(y(Fa)(function(e){return e(void 0)}))(g()(r)))}}};var Qr=function(){function t(){}return t.value=new t,t}();var te={attr:function(t){return function(r){return f({key:"href",value:$(r)})}}};var $r=function(){function t(){}return t.value=new t,t}(),co={attr:function(t){return function(r){return f({key:"click",value:G(S(j(H)(r)(!0)))})}}};var Pr={attr:function(t){return function(r){return f({key:"click",value:G(r)})}}};var he=function(){function t(){}return t.value=new t,t}();var lo={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var kv={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var yv={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var ql={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var $f={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var gv={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var oi=function(t){return function(r){return new h(L("a")(t)(g()(I(g()(w(P)(r))))))}};var Ff=function(t){return function(r){return new h(L("div")(t)(g()(I(g()(w(P)(r))))))}},br=Ff(C(A));var Gu=function(t){return function(r){return new h(L("span")(t)(g()(I(g()(w(P)(r))))))}},ii=Gu(C(A));var Ma=function(){function t(){}return t.value=new t,t}();var Sv={attr:function(t){return function(r){return f({key:"type",value:$(r)})}}};var xf={attr:function(t){return function(r){return f({key:"type",value:$(r)})}}};var Ie=function(t){return function(r){return new h(L("button")(t)(g()(I(g()(w(P)(r))))))}},Jl=Ie(C(A));var hv=function(t){return function(r){return new h(L("code")(t)(g()(I(g()(w(P)(r))))))}},zr=hv(C(A));var Tv=function(t){return function(r){return new h(L("i")(t)(g()(I(g()(w(P)(r))))))}},Vl=Tv(C(A));var du=function(t){return function(r){return new h(L("input")(t)(g()(I(g()(w(P)(r))))))}};var Ev=function(t){return function(r){return new h(L("li")(t)(g()(I(g()(w(P)(r))))))}},jl=Ev(C(A));var $v=function(t){return function(r){return new h(L("pre")(t)(g()(I(g()(w(P)(r))))))}},Jr=$v(C(A));var Fv=function(t){return function(r){return new h(L("ul")(t)(g()(I(g()(w(P)(r))))))}},Xl=Fv(C(A));var If=function(){function t(){}return t.value=new t,t}(),po=function(){function t(){}return t.value=new t,t}(),_o=function(){function t(){}return t.value=new t,t}(),so=function(){function t(){}return t.value=new t,t}(),mo=function(){function t(){}return t.value=new t,t}(),vo=function(){function t(){}return t.value=new t,t}(),Do=function(){function t(){}return t.value=new t,t}(),bo=function(){function t(){}return t.value=new t,t}(),Ao=function(){function t(){}return t.value=new t,t}(),ko=function(){function t(){}return t.value=new t,t}(),Mv=function(t){return t==="Intro"?v(ie)(If.value):t==="HelloWorld"?v(ie)(po.value):t==="SimpleComponent"?v(ie)(_o.value):t==="PURSX1"?v(ie)(so.value):t==="PURSX2"?v(ie)(mo.value):t==="Events"?v(ie)(vo.value):t==="Effects"?v(ie)(Do.value):t==="Events2"?v(ie)(bo.value):t==="Portals"?v(ie)(Ao.value):t==="SSR"?v(ie)(ko.value):C(rs)};function Gl(){window.scrollTo(0,0)}var de=Gl;var Vg=function(t){return t};var Kr={pursxToElement:function(t){return function(r){return function(e){return{cache:zu,element:function(n){return function(u){return C(A)}}}}}}},Ql=function(t){return t.pursxToElement},ce=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(a){var i=Ql(t)(n)(rt.value)(a);return{cache:io(Kn(r)(rt.value))(!0)(i.cache),element:function(l){return function(_){return Ct(lr)(y(Dr)(Ye(Ke)(Df)(function(s){if(s.value instanceof ni)return _.setProp({id:Kn(r)(rt.value)+("@!%"+n),key:s.key,value:s.value.value0});if(s.value instanceof ui)return _.setCb({id:Kn(r)(rt.value)+("@!%"+n),key:s.key,value:s.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4195, column 38 - line 4205, column 24): "+[s.value.constructor.name])}))(El(e)()(rt.value)(a)))(i.element(l)(_))}}}}}}}}}}};var kr=Vg,Kl=function(t){return function(r){return function(){return function(){return function(e){return function(n){return function(u){return function(a){var i=function(l){return function(_){return rn(function(s){return function(b){return function(){var d=_.ids(),o=_.ids();l.raiseId(d)();var m=Ql(e)(o)(rt.value)(a),V=s(Cn(gt)(A)([v(Y)(_.makePursx({id:d,parent:l.parent,cache:m.cache,dynFamily:l.dynFamily,pos:l.pos,pxScope:o,scope:l.scope,html:Kn(t)(u),verb:Kn(r)(n)})),m.element(l)(_),or(C(A))(function(et){return v(Y)(_.attributeParent({id:d,parent:et,pos:l.pos,dynFamily:l.dynFamily,ez:!1}))})(l.parent)]))(b)();return function(){return b(_.deleteFromCache({id:d}))(),V()}}}})}};return new h(i)}}}}}}}},re=function(t){return function(){return function(){return function(r){return Kl(t)({reflectType:function(){return"~"}})()()(r)(rt.value)}}}},xv=function(t){return function(){return function(r){return function(e){return re(t)()()(r)(e)({})}}}},jg=function(t){return function(r){return function(e){return bn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(){var n=Ar();return function(u){return function(a){return a.ids}(n(u))}}(),disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:it(qu)})}},toElt:function(n){return n}})(t)(r)(g()(e))}}},yr=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(a){var i=El(e)()(rt.value)(a),l=Ql(t)(n)(rt.value)(a);return{cache:io(Kn(r)(rt.value))(!1)(l.cache),element:function(_){return function(s){return Ct(lr)(jg({parent:new p(Kn(r)(rt.value)+("@!%"+n)),scope:_.scope,raiseId:function(b){return v(er)(void 0)},pos:_.pos,ez:!1,dynFamily:k.value})(s)(i))(l.element(_)(s))}}}}}}}}}}};var Yl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.Core (envy)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody
  (envy ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  ))`,Zl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,tp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable, envy)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, bus, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody
  (envy $ bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 :: Domable _ _
            p0 = index (Proxy :: _ 0) v

            p1 :: Domable _ _
            p1 = index (Proxy :: _ 1) v

            ev :: Boolean -> Event Boolean
            ev = fold (const not) event

            flips :: Boolean -> Domable _ _
            flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], flips false ]
            ]
  )
`,rp=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,ep=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn, bussed, insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, bus, keepLatest, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody
  ( bussed \\pushAction actionEvent -> do
      let
        accumulateTextAndEmitOnSubmit :: Event String
        accumulateTextAndEmitOnSubmit = compact
          ( mapAccum
              ( \\a b -> case a of
                  AddTodo -> b /\\ Just b
                  ChangeText s -> s /\\ Nothing
              )
              actionEvent
              ""
          )

        top :: Nut
        top =
          D.div_
            [ D.input
                ( oneOf
                    [ textInput $ pure (pushAction <<< ChangeText)
                    , keyUp $ pure \\evt -> do
                        when (code evt == "Enter") $ do
                          pushAction AddTodo
                    ]
                )
                []
            , D.button
                (click $ pure $ pushAction AddTodo)
                [ text_ "Add" ]
            ]
      D.div_
        [ top
        , dyn
            $ map
                ( \\txt -> keepLatest $ bus \\p' e' ->
                    ( pure $ insert_ $ D.div_
                        [ text_ txt
                        , D.button
                            (click $ pure (p' sendToTop))
                            [ text_ "Prioritize" ]
                        , D.button
                            (click $ pure (p' remove))
                            [ text_ "Delete" ]
                        ]
                    ) <|> e'
                )
                accumulateTextAndEmitOnSubmit
        ]
  )
`,np=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.Core (vbussed)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody
  ( vbussed (Proxy :: _ UIEvents) \\push event -> do
      let
        countUp :: Event Int
        countUp = fold
          (const (1 + _))
          (pure unit <|> event.buttonClicked)
          (-1)
      D.div_
        [ D.button
            (click_ (push.buttonClicked unit))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show <$> countUp
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,up=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.Core (bus, envy)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody
  (envy $ bus \\push -> lcmap (pure Initial <|> _)
      \\event -> do
        let
          split :: { left :: Event Unit, right :: Event String }
          split = separate $ compact $
            map
              ( case _ of
                  Loading -> Just $ Left unit
                  Result s -> Just $ Right s
                  _ -> Nothing
              )
              event
          { left: loading, right: result } = split
        D.div_
          [ D.div_
              [ D.button (pure (D.OnClick := clickCb push))
                  [ text
                      ( pure clickText
                          <|> (loading $> "Loading...")
                          <|> (result $> clickText)
                      )
                  ]
              ]
          , D.div
              ( (pure (D.Style := "display: none;")) <|>
                  ( compact
                      ( mapAccum
                          ( \\_ b -> (b && false) /\\
                              if b then Just unit else Nothing
                          )
                          result
                          true
                      ) $> (D.Style := "display: block;")
                  )
              )
              [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
          ]
  )
`,ap=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.Core (fixed)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  (fixed [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,op=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (pure unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,ip=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,fp=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function wv(t){return t.target}function ee(t){return function(){return t.preventDefault()}}function Iv(t,r,e){return t==null?r:e(t)}function cp(t){return t}var yo=or(null)(cp),le=function(t){return Iv(t,k.value,p.create)};var Rf=function(t){return le(wv(t))};var tC=function(){return rt.value}(),Pv=function(t){return re({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(tC)({code:kr(Jr([zr([nr(ap)])])),result:kr(br([Jl([nr("I do nothing")]),Xl(y(gr)(function(){var r=v(aa);return function(e){return jl(r(nr(e)))}}())(["A","B","C"])),br([oi(v(Y)(At(te)(Qr.value)("https://example.com")))([nr("foo ")]),Vl([nr(" bar ")]),Gu(v(Y)(At(lo)(he.value)("font-weight: 800;")))([nr(" baz")])]),br([br([br([du(v(Y)(At(xf)(Ma.value)("range")))([])])])])])),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(so.value)))(de)})),At(te)(Qr.value)(t.slug+"pursx1/")])})};function Ov(t,r,e,n,u){return function(a,i){var l=t.newXHR(),_=t.fixupUrl(u.url,l);if(l.open(u.method||"GET",_,!0,u.username,u.password),u.headers)try{for(var s=0,b;(b=u.headers[s])!=null;s++)l.setRequestHeader(b.field,b.value)}catch(d){a(d)}var T=function(d){return function(){a(new Error(d))}};return l.onerror=T(e),l.ontimeout=T(r),l.onload=function(){i({status:l.status,statusText:l.statusText,headers:l.getAllResponseHeaders().split(`\r
`).filter(function(d){return d.length>0}).map(function(d){var o=d.indexOf(":");return n(d.substring(0,o))(d.substring(o+2))}),body:l.response})},l.responseType=u.responseType,l.withCredentials=u.withCredentials,l.timeout=u.timeout,l.send(u.content),function(d,o,m){try{l.abort()}catch(V){return o(V)}return m()}}}var Nf="application/json",Rv="application/x-www-form-urlencoded";var Bv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Hv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Wv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Uv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),lp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zv=function(t){return t instanceof lp?new p(Rv):t instanceof pp?new p(Nf):k.value};var Bf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Hf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Jv=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Vv=function(t){if(t instanceof Bf)return Ar()(t.value0);if(t instanceof Hf)return Ar()(t.value0);if(t instanceof Jv)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var _p=function(t){if(t instanceof Bf)return"Accept";if(t instanceof Hf)return"Content-Type";if(t instanceof Jv)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var sp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Wf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jv=function(t){if(t instanceof sp)return"arraybuffer";if(t instanceof mp)return"blob";if(t instanceof vp)return"document";if(t instanceof fi||t instanceof Dp)return"text";if(t instanceof Wf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},Xv=function(t){return t instanceof fi?new p(Nf):k.value};var Gv=function(){return new fi(Bt(Ht))}(),Qv=function(){return new Wf(Bt(Ht))}();var Yv=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function go(t){return new Error(t)}function ci(t){return t.message}function li(t){return function(){throw t}}var Ln=function(t){return t.throwError};var gu=function(t){return t.catchError};var qf=function(t){return function(r){return gu(t)(y(t.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(_t.create)(r))(function(){var e=v(t.MonadThrow0().Monad0().Applicative0());return function(n){return e(Dt.create(n))}}())}};var ru=function(t){return t.state};var Co=function(t){return function(r){return ru(t)(function(e){var n=r(e);return new X(n,n)})}};var An=function(t){return t.liftEffect};var bp=function(t){return t};var dp=function(t){return t};var Xf=function(t){return function(r){return t(r)}},tD=function(t){return{map:function(r){return Xf(y(t)(y(za)(r)))}}};var Ap=function(t){return{Applicative0:function(){return Ia(t)},Bind1:function(){return kp(t)}}},kp=function(t){return{bind:function(r){return function(e){return kt(t.Bind1())(r)(pn(function(){var n=v(t.Applicative0());return function(u){return n(Dt.create(u))}}())(function(n){var u=e(n);return u}))}},Apply0:function(){return rD(t)}}},rD=function(t){return{apply:qe(Ap(t)),Functor0:function(){return tD(t.Bind1().Apply0().Functor0())}}},Ia=function(t){return{pure:function(){var r=v(t.Applicative0());return function(e){return bp(r(_t.create(e)))}}(),Apply0:function(){return rD(t)}}};var eD=function(t){return{throwError:function(){var r=v(t.Applicative0());return function(e){return bp(r(Dt.create(e)))}}(),Monad0:function(){return Ap(t)}}};var yp=function(t){return function(r){return{alt:function(e){return function(n){return kt(r.Bind1())(e)(function(u){if(u instanceof _t)return v(r.Applicative0())(new _t(u.value0));if(u instanceof Dt)return kt(r.Bind1())(n)(function(a){if(a instanceof _t)return v(r.Applicative0())(new _t(a.value0));if(a instanceof Dt)return v(r.Applicative0())(new Dt(z(t)(u.value0)(a.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[a.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[u.constructor.name])})}},Functor0:function(){return tD(r.Bind1().Apply0().Functor0())}}}};var nD=function(){var t=Ar();return function(r){return t(dp(r))}}();function gp(t){return JSON.stringify(t)}function Cp(t){return function(r){return JSON.stringify(r,null,t)}}var uD=zu;function oD(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var iD=function(t){return oD(Dt.create,_t.create,t)};var Qf=function(t){return function(r){return function(e){return e.replace(t,r)}}};var Sp=function(t){return function(r){return r.join(t)}};function bC(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}var lD=function(r,e,n){try{return e(bC(encodeURIComponent(n)).replace(/%20/g,"+"))}catch(u){return r(u)}};var Kf=function(){return Sl(lD)(S(k.value))(p.create)}();var kC=function(t){return t};var pD=function(){var t=function(n){if(n.value1 instanceof k)return Kf(n.value0);if(n.value1 instanceof p)return jt(ca)(y(Fr)(function(u){return function(a){return u+("="+a)}})(Kf(n.value0)))(Kf(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=y(Fr)(Sp("&")),e=ze(ba)(ie)(t);return function(n){return r(e(kC(n)))}}();var gC=function(){function t(){}return t.value=new t,t}(),bi=function(){function t(){}return t.value=new t,t}(),CC=function(){function t(){}return t.value=new t,t}(),_D=function(){function t(){}return t.value=new t,t}(),sD=function(){function t(){}return t.value=new t,t}(),mD=function(){function t(){}return t.value=new t,t}(),SC=function(){function t(){}return t.value=new t,t}(),hC=function(){function t(){}return t.value=new t,t}(),TC=function(){function t(){}return t.value=new t,t}(),EC=function(){function t(){}return t.value=new t,t}(),$C=function(){function t(){}return t.value=new t,t}(),FC=function(){function t(){}return t.value=new t,t}(),MC=function(){function t(){}return t.value=new t,t}(),xC=function(){function t(){}return t.value=new t,t}(),wC=function(){function t(){}return t.value=new t,t}(),vD=function(){function t(){}return t.value=new t,t}();var IC=function(t){return t},LC={show:function(t){if(t instanceof gC)return"OPTIONS";if(t instanceof bi)return"GET";if(t instanceof CC)return"HEAD";if(t instanceof _D)return"POST";if(t instanceof sD)return"PUT";if(t instanceof mD)return"DELETE";if(t instanceof SC)return"TRACE";if(t instanceof hC)return"CONNECT";if(t instanceof TC)return"PROPFIND";if(t instanceof EC)return"PROPPATCH";if(t instanceof $C)return"MKCOL";if(t instanceof FC)return"COPY";if(t instanceof MC)return"MOVE";if(t instanceof xC)return"LOCK";if(t instanceof wC)return"UNLOCK";if(t instanceof vD)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var DD=pn(dt(LC))(IC);var AD=function(){var t=af(al);return function(r){return of(t(r))}}();var kD=function(t){return t.value0};var Je=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",a="Async",i="Bind",l="Bracket",_="Fork",s="Sequential",b="Map",T="Apply",d="Alt",o="Cons",m="Resume",V="Release",et="Finalizer",nt="Finalized",at="Forked",Kt="Fiber",fr="Thunk";function lt(st,pr,Br,dr){this.tag=st,this._1=pr,this._2=Br,this._3=dr}function ur(st){var pr=function(Br,dr,Tt){return new lt(st,Br,dr,Tt)};return pr.tag=st,pr}function on(st){return new lt(r,void 0)}function ot(st){try{st()}catch(pr){setTimeout(function(){throw pr},0)}}function q(st,pr,Br){try{return pr(Br())}catch(dr){return st(dr)}}function x(st,pr,Br){try{return pr(Br)()}catch(dr){return Br(st(dr))(),on}}var ct=function(){var st=1024,pr=0,Br=0,dr=new Array(st),Tt=!1;function tt(){var mr;for(Tt=!0;pr!==0;)pr--,mr=dr[Br],dr[Br]=void 0,Br=(Br+1)%st,mr();Tt=!1}return{isDraining:function(){return Tt},enqueue:function(mr){var Vt,Rr;pr===st&&(Rr=Tt,tt(),Tt=Rr),dr[(Br+pr)%st]=mr,pr++,Tt||tt()}}}();function vt(st){var pr={},Br=0,dr=0;return{register:function(Tt){var tt=Br++;Tt.onComplete({rethrow:!0,handler:function(mr){return function(){dr--,delete pr[tt]}}})(),pr[tt]=Tt,dr++},isEmpty:function(){return dr===0},killAll:function(Tt,tt){return function(){if(dr===0)return tt();var mr=0,Vt={};function Rr(Sr){Vt[Sr]=pr[Sr].kill(Tt,function(jr){return function(){delete Vt[Sr],mr--,st.isLeft(jr)&&st.fromLeft(jr)&&setTimeout(function(){throw st.fromLeft(jr)},0),mr===0&&tt()}})()}for(var _e in pr)pr.hasOwnProperty(_e)&&(mr++,Rr(_e));return pr={},Br=0,dr=0,function(Sr){return new lt(u,function(){for(var jr in Vt)Vt.hasOwnProperty(jr)&&Vt[jr]()})}}}}}var Ee=0,Vr=1,On=2,Eu=3,Oa=4,Pe=5,To=6;function vc(st,pr,Br){var dr=0,Tt=Ee,tt=Br,mr=null,Vt=null,Rr=null,_e=null,Sr=null,jr=0,ra=0,fn=null,$u=!0;function Fu(Et){for(var Mt,tr,cr;;)switch(Mt=null,tr=null,cr=null,Tt){case On:Tt=Vr;try{tt=Rr(tt),_e===null?Rr=null:(Rr=_e._1,_e=_e._2)}catch(Ae){Tt=Pe,mr=st.left(Ae),tt=null}break;case Eu:st.isLeft(tt)?(Tt=Pe,mr=tt,tt=null):Rr===null?Tt=Pe:(Tt=On,tt=st.fromRight(tt));break;case Vr:switch(tt.tag){case i:Rr&&(_e=new lt(o,Rr,_e)),Rr=tt._2,Tt=Vr,tt=tt._1;break;case r:Rr===null?(Tt=Pe,tt=st.right(tt._1)):(Tt=On,tt=tt._1);break;case u:Tt=Eu,tt=q(st.left,st.right,tt._1);break;case a:Tt=Oa,tt=x(st.left,tt._1,function(Ae){return function(){dr===Et&&(dr++,ct.enqueue(function(){dr===Et+1&&(Tt=Eu,tt=Ae,Fu(dr))}))}});return;case e:Tt=Pe,mr=st.left(tt._1),tt=null;break;case n:Rr===null?Sr=new lt(o,tt,Sr,Vt):Sr=new lt(o,tt,new lt(o,new lt(m,Rr,_e),Sr,Vt),Vt),Rr=null,_e=null,Tt=Vr,tt=tt._1;break;case l:jr++,Rr===null?Sr=new lt(o,tt,Sr,Vt):Sr=new lt(o,tt,new lt(o,new lt(m,Rr,_e),Sr,Vt),Vt),Rr=null,_e=null,Tt=Vr,tt=tt._1;break;case _:Tt=Eu,Mt=vc(st,pr,tt._2),pr&&pr.register(Mt),tt._1&&Mt.run(),tt=st.right(Mt);break;case s:Tt=Vr,tt=Dd(st,pr,tt._1);break}break;case Pe:if(Rr=null,_e=null,Sr===null)Tt=To,tt=Vt||mr||tt;else switch(Mt=Sr._3,cr=Sr._1,Sr=Sr._2,cr.tag){case n:Vt&&Vt!==Mt&&jr===0?Tt=Pe:mr&&(Tt=Vr,tt=cr._2(st.fromLeft(mr)),mr=null);break;case m:Vt&&Vt!==Mt&&jr===0||mr?Tt=Pe:(Rr=cr._1,_e=cr._2,Tt=On,tt=st.fromRight(tt));break;case l:jr--,mr===null&&(tr=st.fromRight(tt),Sr=new lt(o,new lt(V,cr._2,tr),Sr,Mt),(Vt===Mt||jr>0)&&(Tt=Vr,tt=cr._3(tr)));break;case V:Sr=new lt(o,new lt(nt,tt,mr),Sr,Vt),Tt=Vr,Vt&&Vt!==Mt&&jr===0?tt=cr._1.killed(st.fromLeft(Vt))(cr._2):mr?tt=cr._1.failed(st.fromLeft(mr))(cr._2):tt=cr._1.completed(st.fromRight(tt))(cr._2),mr=null,jr++;break;case et:jr++,Sr=new lt(o,new lt(nt,tt,mr),Sr,Vt),Tt=Vr,tt=cr._1;break;case nt:jr--,Tt=Pe,tt=cr._1,mr=cr._2;break}break;case To:for(var Wr in fn)fn.hasOwnProperty(Wr)&&($u=$u&&fn[Wr].rethrow,ot(fn[Wr].handler(tt)));fn=null,Vt&&mr?setTimeout(function(){throw st.fromLeft(mr)},0):st.isLeft(tt)&&$u&&setTimeout(function(){if($u)throw st.fromLeft(tt)},0);return;case Ee:Tt=Vr;break;case Oa:return}}function Hr(Et){return function(){if(Tt===To)return $u=$u&&Et.rethrow,Et.handler(tt)(),function(){};var Mt=ra++;return fn=fn||{},fn[Mt]=Et,function(){fn!==null&&delete fn[Mt]}}}function wt(Et,Mt){return function(){if(Tt===To)return Mt(st.right(void 0))(),function(){};var tr=Hr({rethrow:!1,handler:function(){return Mt(st.right(void 0))}})();switch(Tt){case Ee:Vt=st.left(Et),Tt=To,tt=Vt,Fu(dr);break;case Oa:Vt===null&&(Vt=st.left(Et)),jr===0&&(Tt===Oa&&(Sr=new lt(o,new lt(et,tt(Et)),Sr,Vt)),Tt=Pe,tt=null,mr=null,Fu(++dr));break;default:Vt===null&&(Vt=st.left(Et)),jr===0&&(Tt=Pe,tt=null,mr=null)}return tr}}function Qt(Et){return function(){var Mt=Hr({rethrow:!1,handler:Et})();return Tt===Ee&&Fu(dr),Mt}}return{kill:wt,join:Qt,onComplete:Hr,isSuspended:function(){return Tt===Ee},run:function(){Tt===Ee&&(ct.isDraining()?Fu(dr):ct.enqueue(function(){Fu(dr)}))}}}function vd(st,pr,Br,dr){var Tt=0,tt={},mr=0,Vt={},Rr=new Error("[ParAff] Early exit"),_e=null,Sr=t;function jr(Hr,wt,Qt){var Et=wt,Mt=null,tr=null,cr=0,Wr={},Ae,Eo;t:for(;;)switch(Ae=null,Et.tag){case at:if(Et._3===t&&(Ae=tt[Et._1],Wr[cr++]=Ae.kill(Hr,function(bd){return function(){cr--,cr===0&&Qt(bd)()}})),Mt===null)break t;Et=Mt._2,tr===null?Mt=null:(Mt=tr._1,tr=tr._2);break;case b:Et=Et._2;break;case T:case d:Mt&&(tr=new lt(o,Mt,tr)),Mt=Et,Et=Et._1;break}if(cr===0)Qt(st.right(void 0))();else for(Eo=0,Ae=cr;Eo<Ae;Eo++)Wr[Eo]=Wr[Eo]();return Wr}function ra(Hr,wt,Qt){var Et,Mt,tr,cr,Wr,Ae;st.isLeft(Hr)?(Et=Hr,Mt=null):(Mt=Hr,Et=null);t:for(;;){if(tr=null,cr=null,Wr=null,Ae=null,_e!==null)return;if(wt===null){dr(Et||Mt)();return}if(wt._3!==t)return;switch(wt.tag){case b:Et===null?(wt._3=st.right(wt._1(st.fromRight(Mt))),Mt=wt._3):wt._3=Et;break;case T:if(tr=wt._1._3,cr=wt._2._3,Et){if(wt._3=Et,Wr=!0,Ae=mr++,Vt[Ae]=jr(Rr,Et===tr?wt._2:wt._1,function(){return function(){delete Vt[Ae],Wr?Wr=!1:Qt===null?ra(Et,null,null):ra(Et,Qt._1,Qt._2)}}),Wr){Wr=!1;return}}else{if(tr===t||cr===t)return;Mt=st.right(st.fromRight(tr)(st.fromRight(cr))),wt._3=Mt}break;case d:if(tr=wt._1._3,cr=wt._2._3,tr===t&&st.isLeft(cr)||cr===t&&st.isLeft(tr))return;if(tr!==t&&st.isLeft(tr)&&cr!==t&&st.isLeft(cr))Et=Mt===tr?cr:tr,Mt=null,wt._3=Et;else if(wt._3=Mt,Wr=!0,Ae=mr++,Vt[Ae]=jr(Rr,Mt===tr?wt._2:wt._1,function(){return function(){delete Vt[Ae],Wr?Wr=!1:Qt===null?ra(Mt,null,null):ra(Mt,Qt._1,Qt._2)}}),Wr){Wr=!1;return}break}Qt===null?wt=null:(wt=Qt._1,Qt=Qt._2)}}function fn(Hr){return function(wt){return function(){delete tt[Hr._1],Hr._3=wt,ra(wt,Hr._2._1,Hr._2._2)}}}function $u(){var Hr=Vr,wt=Br,Qt=null,Et=null,Mt,tr;t:for(;;)switch(Mt=null,tr=null,Hr){case Vr:switch(wt.tag){case b:Qt&&(Et=new lt(o,Qt,Et)),Qt=new lt(b,wt._1,t,t),wt=wt._2;break;case T:Qt&&(Et=new lt(o,Qt,Et)),Qt=new lt(T,t,wt._2,t),wt=wt._1;break;case d:Qt&&(Et=new lt(o,Qt,Et)),Qt=new lt(d,t,wt._2,t),wt=wt._1;break;default:tr=Tt++,Hr=Pe,Mt=wt,wt=new lt(at,tr,new lt(o,Qt,Et),t),Mt=vc(st,pr,Mt),Mt.onComplete({rethrow:!1,handler:fn(wt)})(),tt[tr]=Mt,pr&&pr.register(Mt)}break;case Pe:if(Qt===null)break t;Qt._1===t?(Qt._1=wt,Hr=Vr,wt=Qt._2,Qt._2=t):(Qt._2=wt,wt=Qt,Et===null?Qt=null:(Qt=Et._1,Et=Et._2))}for(Sr=wt,tr=0;tr<Tt;tr++)tt[tr].run()}function Fu(Hr,wt){_e=st.left(Hr);var Qt;for(var Et in Vt)if(Vt.hasOwnProperty(Et)){Qt=Vt[Et];for(Et in Qt)Qt.hasOwnProperty(Et)&&Qt[Et]()}Vt=null;var Mt=jr(Hr,Sr,wt);return function(tr){return new lt(a,function(cr){return function(){for(var Wr in Mt)Mt.hasOwnProperty(Wr)&&Mt[Wr]();return on}})}}return $u(),function(Hr){return new lt(a,function(wt){return function(){return Fu(Hr,wt)}})}}function Dd(st,pr,Br){return new lt(a,function(dr){return function(){return vd(st,pr,Br,dr)}})}return lt.EMPTY=t,lt.Pure=ur(r),lt.Throw=ur(e),lt.Catch=ur(n),lt.Sync=ur(u),lt.Async=ur(a),lt.Bind=ur(i),lt.Bracket=ur(l),lt.Fork=ur(_),lt.Seq=ur(s),lt.ParMap=ur(b),lt.ParApply=ur(T),lt.ParAlt=ur(d),lt.Fiber=vc,lt.Supervisor=vt,lt.Scheduler=ct,lt.nonCanceler=on,lt}(),gD=Je.Pure,CD=Je.Throw;function SD(t){return function(r){return Je.Catch(t,r)}}function hD(t){return function(r){return r.tag===Je.Pure.tag?Je.Pure(t(r._1)):Je.Bind(r,function(e){return Je.Pure(t(e))})}}function TD(t){return function(r){return Je.Bind(t,r)}}var ED=Je.Sync;var di=Je.Async;function $D(t,r){return function(){return Je.Fiber(t,null,r)}}var PC=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return Je.Async(function(u){return function(){var a=t(n,u(e()));return function(){return Je.Sync(function(){return e(r(n,a))})}}})}}(),OC=Je.Seq;var KC=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var $p={map:hD};var YC=function(){var t=function(n){if(n instanceof _t)return n.value0;if(n instanceof Dt)return Pu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof Dt)return n.value0;if(n instanceof _t)return Pu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof Dt)return!0;if(n instanceof _t)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:Dt.create,right:_t.create}}(),ZC=function(t){return $D(YC,t)},tS=function(t){return function(){var e=ZC(t)();return e.run(),e}},Fp=function(){var t=mt(H);return function(r){return t(tS(r))}}();var Mp={Applicative0:function(){return Yf},Bind1:function(){return xp}},xp={bind:TD,Apply0:function(){return ID(0)}},Yf={pure:gD,Apply0:function(){return ID(0)}},ID=KC("applyAff","Effect.Aff",function(){return{apply:qe(Mp),Functor0:function(){return $p}}});var Zf={liftEffect:ED,Monad0:function(){return Mp}};var rS={throwError:CD,Monad0:function(){return Mp}},LD={catchError:SD,MonadThrow0:function(){return rS}};var PD=S(v(Yf)(void 0));var OD=function(t){return di(function(r){return function(){var n=t(function(u){return r(Dt.create(u))()},function(u){return r(_t.create(u))()});return function(u){return di(function(a){return function(){return n(u,function(l){return a(Dt.create(l))()},function(l){return a(_t.create(l))()}),PD}})}}})};function rc(t){return Object.prototype.toString.call(t).slice(8,-1)}var RD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var ND=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Ne=function(t){return t};var ec=isFinite;var wp=Math.floor;var Ai=function(t){return function(r){return t%r}};var nc=function(){return ND(p.create)(k.value)}(),cS=function(t){if(!ec(t))return 0;if(t>=Ne(gn(ia)))return gn(ia);if(t<=Ne(Bn(ia)))return Bn(ia);if(Yr)return ge(0)(nc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var Lp=function(t){return cS(wp(t))};var Pp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),DS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),bS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ku=K,dS=K;var ac=function(t){if(t instanceof Pp)return t.value0;if(t instanceof DS)return"Error at array index "+(dt(ln)(t.value0)+(": "+ac(t.value1)));if(t instanceof bS)return"Error at property "+(dt(Qe)(t.value0)+(": "+ac(t.value1)));if(t instanceof jD)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var Op=function(t){var r=Ln(eD(t));return function(e){return r(AD(e))}};var Yu=function(t){return function(r){return function(e){if(rc(e)===r)return v(Ia(t))(dS(e));if(Yr)return Op(t)(new jD(r,rc(e)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[r.constructor.name,e.constructor.name])}}};var Rp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Np=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Bp=function(){function t(){}return t.value=new t,t}(),Hp=function(){function t(){}return t.value=new t,t}(),Wp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),XD=function(t){return function(r){var e=function(b){return b===""?v(Ia(Tr))(uD):pn(function(){var T=Op(Tr);return function(d){return T(Pp.create(d))}}())(v(Ia(Tr)))(iD(b))},n=function(){if(r.responseFormat instanceof sp)return Yu(Tr)("ArrayBuffer");if(r.responseFormat instanceof mp)return Yu(Tr)("Blob");if(r.responseFormat instanceof vp)return function(b){return Ct(yp(ul)(Tr))(Yu(Tr)("Document")(b))(Ct(yp(ul)(Tr))(Yu(Tr)("XMLDocument")(b))(Yu(Tr)("HTMLDocument")(b)))};if(r.responseFormat instanceof fi)return Mi(kp(Tr))(function(b){return r.responseFormat.value0(e(b))})(Yu(Tr)("String"));if(r.responseFormat instanceof Dp)return Yu(Tr)("String");if(r.responseFormat instanceof Wf)return S(r.responseFormat.value0(v(Ia(Tr))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(b){if(b instanceof Bv)return new _t(b.value0(Ku));if(b instanceof Hv)return new _t(Ku(b.value0));if(b instanceof Wv)return new _t(Ku(b.value0));if(b instanceof Uv)return new _t(Ku(b.value0));if(b instanceof qv)return new _t(Ku(b.value0));if(b instanceof lp)return kc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(y(Fr)(Ku)(pD(b.value0)));if(b instanceof pp)return new _t(Ku(gp(b.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[b.constructor.name])},a=function(b){return function(T){return b instanceof p&&!xu(gt)(Fe)($o(it(Nr))(_p)(b.value0))(T)?nf(T)(b.value0):T}},i=function(b){return a(y(Fr)(Hf.create)(fu($e)(zv)(b)))(a(y(Fr)(Bf.create)(Xv(r.responseFormat)))(r.headers))},l=function(b){return{method:DD(r.method),url:r.url,headers:y(gr)(function(T){return{field:_p(T),value:Vv(T)}})(i(r.content)),content:b,responseType:jv(r.responseFormat),username:yo(r.username),password:yo(r.password),withCredentials:r.withCredentials,timeout:ge(0)(y(Fr)(function(T){return T})(r.timeout))}},_=function(b){return je($p)(qf(LD)(OD(Ov(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",Yv.create,l(b)))))(function(T){if(T instanceof _t){var d=nD(n(T.value0.body));if(d instanceof Dt)return new Dt(new Np(kD(d.value0),T.value0));if(d instanceof _t)return new _t({body:d.value0,headers:T.value0.headers,status:T.value0.status,statusText:T.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[d.constructor.name])}if(T instanceof Dt)return new Dt(function(){var o=ci(T.value0),m=o==="AffjaxTimeoutErrorMessageIdent";if(m)return Bp.value;var V=o==="AffjaxRequestFailedMessageIdent";return V?Hp.value:new Wp(T.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[T.constructor.name])})};if(r.content instanceof k)return _(yo(k.value));if(r.content instanceof p){var s=u(r.content.value0);if(s instanceof _t)return _(yo(new p(s.value0)));if(s instanceof Dt)return v(Yf)(new Dt(new Rp(s.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[s.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},Up=function(t){if(t instanceof Rp)return"There was a problem with the request content: "+t.value0;if(t instanceof Np)return"There was a problem with the response body: "+ac(t.value0);if(t instanceof Bp)return"There was a problem making the request: timeout";if(t instanceof Hp)return"There was a problem making the request: request failed";if(t instanceof Wp)return"There was a problem making the request: "+ci(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Zu=function(){return{method:new Dt(bi.value),url:"/",headers:[],content:k.value,username:k.value,password:k.value,withCredentials:!1,responseFormat:Qv,timeout:k.value}}();var qp={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var QD=XD(qp);var YD=function(){function t(){}return t.value=new t,t}(),zp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),gS=function(){return rt.value}(),KD="Click to get some random user data.",CS=function(t){return Er(S(function(){return t(YD.value)(),Fp(kt(xp)(QD({method:new Dt(bi.value),url:"https://randomuser.me/api/",headers:Zu.headers,content:Zu.content,username:Zu.username,password:Zu.password,withCredentials:Zu.withCredentials,responseFormat:Gv,timeout:Zu.timeout}))(function(e){if(e instanceof Dt)return An(Zf)(t(new zp("GET /api response failed to decode: "+Up(e.value0))));if(e instanceof _t)return An(Zf)(t(new zp(Cp(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},ZD=function(t){return re({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(gS)({code:kr(Jr([zr([nr(up)])])),result:kr(fo(function(r){return function(e){var n=Re(Dn)(function(i){return i instanceof YD?new p(new Dt(void 0)):i instanceof zp?new p(new _t(i.value0)):k.value})(e),u=Re(Dn)(function(i){return i instanceof _t?new p(i.value0):k.value})(n),a=Re(Dn)(function(i){return i instanceof Dt?new p(void 0):k.value})(n);return br([br([Ie(v(Y)(At(Pr)($r.value)(CS(r))))([en(Ct(lr)(v(Y)(KD))(Ct(lr)(j(Dr)(a)("Loading..."))(j(Dr)(u)(KD))))])]),Ff(Ct(lr)(v(Y)(At(ql)(he.value)("display: none;")))(j(Dr)(vu(ri)(Wu(we)(function(i){return function(l){return new X(l&&!1,function(){return l?new p(void 0):k.value}())}})(u)(!0)))(At(ql)(he.value)("display: block;"))))([Jr([zr([en(Ct(lr)(v(Y)(""))(u))])])])])}})),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(mo.value)))(de)})),At(te)(Qr.value)(t.slug+"pursx2/")])})};var Jp=function(){function t(){}return t.value=new t,t}(),tb={attr:function(t){return function(r){return f({key:"controls",value:$(r)})}}};var yi=function(){function t(){}return t.value=new t,t}();var oc={attr:function(t){return function(r){return f({key:"input",value:G(r)})}}};var ic=function(){function t(){}return t.value=new t,t}();var Vp={attr:function(t){return function(r){return f({key:"keyup",value:G(r)})}}};var jp=function(){function t(){}return t.value=new t,t}();var nb={attr:function(t){return function(r){return f({key:"src",value:$(r)})}}};var Xp=function(){function t(){}return t.value=new t,t}(),ub={attr:function(t){return function(r){return f({key:"width",value:$(r)})}}};var ab=function(t){return function(r){return new h(L("p")(t)(g()(I(g()(w(P)(r))))))}},Gp=ab(C(A));var Qp=function(t){return function(r){return new h(L("source")(t)(g()(I(g()(w(P)(r))))))}};var Kp=function(t){return function(r){return new h(L("video")(t)(g()(I(g()(w(P)(r))))))}};function fc(t){return function(){return t.value}}function Yp(t){return function(){return t.valueAsNumber}}function ib(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var a=n;a!=null;){var i=Object.getPrototypeOf(a),l=i.constructor.name;if(l===e)return r(n);if(l==="Object")return t;a=i}return t}var ft=function(t){return function(r){return ib(k.value,p.create,t,r)}};var cc=ft("HTMLInputElement");function Zp(t){return t.code}var t_=ft("KeyboardEvent");var lc=function(){var t=Ct(lr)(v(Y)(At(xf)(Ma.value)("range"))),r=y(Dr)(function(e){return At(oc)(yi.value)(Er(function(n){return Ur(Lr)(ae)(kt($e)(Rf(n))(cc))(xi(va)(Yp)(e))}))});return function(e){return t(r(e))}}();var US=function(t){return y(Dr)(At(t)($r.value))},pc=function(t){var r=US(t),e=v(Y);return function(n){return r(e(n))}};var qS=function(){return rt.value}(),pb=function(t){return re({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(qS)({code:kr(Jr([zr([nr(np)])])),result:kr(Tf()(ao({reflectSymbol:function(){return"buttonClicked"}})()()(ao({reflectSymbol:function(){return"sliderMoved"}})()()(df)()())()())(rt.value)(function(r){return function(e){return br([Ie(pc(co)(r.buttonClicked(void 0)))([nr("Click")]),br([en(Ct(lr)(v(Y)("Val: 0"))(y(Dr)(function(){var n=z(ou)("Val: "),u=dt(ln);return function(a){return n(u(a))}}())(Hu(we)(S(Zr(Ge)(1)))(Ct(lr)(v(Y)(void 0))(e.buttonClicked))(-1))))]),br([du(lc(v(Y)(r.sliderMoved)))([]),br([en(Ct(lr)(v(Y)("Val: 50.0"))(y(Dr)(function(){var n=z(ou)("Val: "),u=dt(Lo);return function(a){return n(u(a))}}())(e.sliderMoved)))])])])}})),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(Do.value)))(de)})),At(te)(Qr.value)(t.slug+"effects/")])})};var JS=function(){function t(){}return t.value=new t,t}(),r_=function(){function t(){}return t.value=new t,t}(),_b=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),VS=function(){return rt.value}(),sb=function(t){return re({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(VS)({code:kr(Jr([zr([nr(ep)])])),result:kr(fo(function(r){return Ye(Ke)(function(e){return Ct(lr)(v(Y)(JS.value))(e)})(function(e){return br([br([du(wr(gt)(A)(v(Y))([At(yv)(he.value)("border-style:solid;border-width: 1px;border-color: black;"),At(oc)(yi.value)(Er(function(n){return Ur(Lr)(ae)(kt($e)(Rf(n))(cc))(xi(va)(fc)(function(u){return r(_b.create(u))}))})),At(Vp)(ic.value)(Er(function(n){return Ur(Lr)(ae)(t_(n))(function(u){return uu(Lr)(Zp(u)==="Enter")(r(r_.value))})}))]))([]),Ie(Ct(lr)(v(Y)(At($f)(he.value)("margin: 5px;")))(v(Y)(At(Pr)($r.value)(Er(S(r(r_.value)))))))([nr("Add")])]),ju(y(Dr)(function(n){return Ta(we)(Vu(function(u){return function(a){return Ct(lr)(v(Y)(Ju(br([Gu(v(Y)(At(lo)(he.value)("margin: 5px;")))([nr(n)]),Ie(Ct(lr)(v(Y)(At($f)(he.value)("margin: 5px;")))(v(Y)(At(Pr)($r.value)(Er(S(u(bv)))))))([nr("Prioritize")]),Ie(Ct(lr)(v(Y)(At($f)(he.value)("margin: 5px;")))(v(Y)(At(Pr)($r.value)(Er(S(u(Ul)))))))([nr("Delete")])]))))(a)}}))})(Re(Dn)(function(n){return n.value0?new p(n.value1):k.value})(Wu(we)(function(n){return function(u){return n instanceof _b?new X(n.value0,new X(!1,n.value0)):n instanceof r_?new X(u,new X(!0,u)):new X("",new X(!1,""))}})(e)(""))))])})})),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(Ao.value)))(de)})),At(te)(Qr.value)(t.slug+"portals/")])})};var XS=function(){return rt.value}(),mb=function(t){return re({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(XS)({code:kr(Jr([zr([nr(rp)])])),result:kr(br([nr("Hello world")])),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(_o.value)))(de)})),At(te)(Qr.value)(t.slug+"component/")])})};var QS=function(){return rt.value}(),vb=function(t){return re({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(ce()(Kr)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))(QS)({next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(po.value)))(de)})),At(te)(Qr.value)(t.slug+"hello/")])})};var YS=function(){return rt.value}(),Db=function(t){return re({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(YS)({code:kr(Jr([zr([nr(tp)])])),result:kr(ju(Vu(function(r){return Ye(Ke)(Ct(lr)(v(Y)(void 0)))(function(e){return v(Y)(Ju(Av()(y(Fa)(function(n){return Kp(wr(gt)(A)(v(Y))([At(tb)(Jp.value)("true"),At(ub)(Xp.value)("250")]))([Qp(wr(gt)(A)(v(Y))([At(nb)(jp.value)(n),At(Sv)(Ma.value)("video/mp4")]))([])])})(Il()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(Il()()("https://www.w3schools.com/jsref/movie.mp4")(tv))))(function(n){return function(u){var a=Cf()()()()()({reflectType:function(){return 1}})(rt.value)(n),i=Cf()()()()()({reflectType:function(){return 0}})(rt.value)(n),l=Hu(we)(S(_n(Fe)))(e),_=function(){var s=v(aa),b=Ef(function(T){return T?i:a});return function(T){return ii(s(b(l(T))))}}();return br([Ie(v(Y)(At(Pr)($r.value)(Er(S(r(void 0))))))([nr("Switch videos")]),br([_(!0),_(!1)])])}})))})}))),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(ko.value)))(de)})),At(te)(Qr.value)(t.slug+"ssr/")])})};var th=function(){return rt.value}(),rh=function(){return rt.value}(),bb=function(t){return re({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(th)({code:kr(Jr([zr([nr(Zl)])])),result:kr(xv({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Kr)(rh)),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(vo.value)))(de)})),At(te)(Qr.value)(t.slug+"events1/")])})};var nh=function(){return rt.value}(),uh=function(){return rt.value}(),db=function(t){return Kl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(rt.value)(nh)({code:kr(Jr([zr([nr(Yl)])])),result:kr(ju(Vu(function(r){return function(e){return v(Y)(Ju(re({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(ce()(yr()(Kr)({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}}))(uh)({myli:v(Y)(At(kv)(he.value)("background-color:rgb(200,240,210);")),somethingNew:kr(Ie(v(Y)(At(co)($r.value)(r(new p(void 0)))))([en(Ct(lr)(j(Dr)(vu(ri)(e))("Thanks for clicking me!"))(v(Y)("I was dynamically inserted")))]))})))}}))),next:wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(bo.value)))(de)})),At(te)(Qr.value)(t.slug+"events2/")])})};var e_=()=>document.documentElement.querySelector("[data-deku-root]");var n_=t=>()=>{t.hydrating=!0},u_=t=>()=>{t.hydrating=!1},Ab=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(a=>()=>t(r.dynFamily)(i=>()=>{for(var l=0,_=0,s;_<n.childNodes.length;){if(n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i){_+=1;break}_++}let b=d=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[d]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[d])):n.insertBefore(e.units[r.id].main,n.childNodes[d])};for(;_<n.childNodes.length;){var T;if((T=n.childNodes[_].$dekuId)&&t(e.units[T].dynFamily)(o=>()=>t(e.units[T].pos)(V=>()=>i===o&&a<=V?(b(_),!0):!1)())())return!0;if(l===a||n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue==="%-%"+i+"%-%")return b(_),!0;n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue.substring(0,3)==="%-%"&&!s&&(s=n.childNodes[_].nodeValue+"%-%"),s||l++,n.childNodes[_].nodeType===8&&n.childNodes[_].nodeValue===s&&(s=void 0,l++),_++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(i=>()=>(e.units[r.id].main?e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[i].endBeacon):(e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon),e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(i=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[i].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[i].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},a_=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),a;a=u.nextNode();)a.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[a.nodeValue.substring(3)]=a)}e(document.documentElement)},kb=t=>r=>e=>n=>()=>{var u,a,i=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(i),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(a=n.allBeacons[`${e.id}%-%`])?(n.units[i]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:a},u.$dekuId=i,a.$dekuId=i,!0):!1)()){let _=document.createComment(`%-%${e.id}`),s=document.createComment(`%-%${e.id}%-%`);n.units[i]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:_,endBeacon:s},_.$dekuId=i,s.$dekuId=i}};var yb=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),gb=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),Cb=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),Sb=t=>r=>e=>n=>()=>{var u,a=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(a),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${a}"]`))?(n.units[a]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=a,!0):!1)()){let l=document.createElement(e.tag);n.units[a]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:l},l.$dekuId=a}},hb=t=>r=>e=>n=>u=>()=>{var a=n.id,i;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(a),!t(n.parent)(_=>()=>{if(u.hydrating&&r&&(i=document.documentElement.querySelector(`[data-deku-ssr="${_}"]`))){for(var s=0;s<i.childNodes.length;s++){let o=a.split("@-@");if(i.childNodes[s].nodeType===8&&i.childNodes[s].nodeValue===o[0]){s=s-1;var b=s===-1,T=s>=0&&i.childNodes[s].nodeType===8;b&&i.prepend(document.createTextNode("")),T&&i.insertBefore(document.createTextNode(""),i.childNodes[s+1]);break}}let d=i.childNodes[s];return u.units[a]={main:d,pos:n.pos,parent:n.parent,scope:n.scope},d.$dekuId=a,!0}return!1})()){let _=document.createTextNode("");u.units[a]={main:_,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},_.$dekuId=a}};function o_(){return{units:{},scopes:{},allBeacons:{}}}var Tb=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},Eb=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var a=i=>u(i)();e.units[n].main.addEventListener(r.key,a),e.units[n].listeners[r.key]=a}}},$b=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},Fb=t=>r=>e=>n=>u=>()=>{var a,i,l=n.id,_=n.html,s=n.verb,b=n.cache,T=n.parent,d=n.scope,o=n.pxScope;let m=t(n.parent)(()=>()=>u.hydrating&&r&&(a=document.documentElement.querySelector(`[data-deku-ssr="${l}"]`))?(u.units[l]={listeners:{},pos:n.pos,scope:d,parent:T,main:a},a.$dekuId=l,!0):!1)();if(!m){let et=Object.entries(b);for(var V=0;V<et.length;V++){let nt=et[V][0];et[V][1]===!0?_=_.replace(s+nt+s,'data-deku-attr-internal="'+nt+'"'):_=_.replace(s+nt+s,'<span style="display:contents;" data-deku-elt-internal="'+nt+'"></span>')}i=document.createElement("div"),i.innerHTML=_.trim(),u.units[l]={listeners:{},pos:n.pos,scope:d,parent:T,main:i.firstChild},i.firstChild.$dekuId=l}u.scopes[d]||(u.scopes[d]=[]),u.scopes[d].push(l),i||(i=a),i.querySelectorAll("[data-deku-attr-internal]").forEach(function(et){var nt=et.getAttribute("data-deku-attr-internal");let at=nt+"@!%"+o;u.units[at]={listeners:{},main:et,scope:d},u.scopes[d].push(at)}),i.querySelectorAll("[data-deku-elt-internal]").forEach(function(et){var nt=et.getAttribute("data-deku-elt-internal");let at=nt+"@!%"+o;u.units[nt+"@!%"+o]={listeners:{},main:et,scope:d},u.scopes[d].push(at)}),m||u.units[l].main.remove()},Mb=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},i_=t=>r=>e=>n=>()=>{let u=(m,V,et)=>{if(n.units[m].startBeacon){var nt=n.units[m].startBeacon,at=nt.nextSibling;for(n.units[V].main.insertBefore(nt,et),nt=at;nt&&nt!==n.units[m].endBeacon;)at=nt.nextSibling,n.units[V].main.insertBefore(nt,et),nt=at}else n.units[V].main.insertBefore(n.units[m].main,et)},a=[];a.push(e);for(var i=0;i<a.length;i++){let m=a[i],V=m.id,et=m.parent;n.units[V].containingScope=m.scope;var l=void 0;r(m.pos)(at=>()=>(l=at,!0))(),l===void 0&&(l=Number.MAX_VALUE);let nt=n.units[et].main.childNodes;for(var _=0,s=!1,b=0;_<nt.length;){var T;if(T=nt[_].$dekuId){if(r(m.dynFamily)(Kt=>()=>s?!1:n.units[T].endBeacon===nt[_]&&Kt===T?(n.units[V].pos=t(b),u(V,et,nt[_]),!0):!1)()){s=!0;break}if(n.units[T].dynFamily!==n.units[V].dynFamily){_++;continue}if(s){_++;continue}b===l?(u(V,et,nt[_]),b++,s=!0):n.units[T].endBeacon!==nt[_]&&(n.units[T].pos=t(b),b++)}_++}if(s)return;if(n.units[V].main)n.units[et].main.appendChild(n.units[V].main);else{var d=n.units[V].startBeacon,o=d.nextSibling;for(n.units[et].main.appendChild(d),d=o;d&&d!==n.units[V].endBeacon;)o=d.nextSibling,n.units[et].main.appendChild(d),d=o}}},xb=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let a=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(a.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,a.appendChild(n),n=u}}},f_=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},wb=f_;var Ib=function(t){return t};var ph=1,c_=2147483647,_h=function(){return c_-1|0}(),l_=function(t){var r=function(e){return function(n){return function(u){var a=n-e|0,i=Po(Ii)(u)(a),l=i<e;return l?i+n|0:i}}};return r(ph)(_h)(t)};var sh=0,mh=48271,Lb=function(t){return function(r){return We()(nc(Ai(Ne(mh)*Ne(r)+Ne(t))(Ne(c_))))}},Pb=Lb(sh);var yh=function(){function t(i){this.fn=i}var r={},e=function(i,l){this.head=i,this.tail=l};function n(i){return new e(i,r)}function u(i){return function(l){return new e(i,l)}}function a(i){for(var l=[],_=i;_!==r;)l.push(_.head),_=_.tail;return l}return function(i){return function(l){return function(_){var s=function(T,d){return i(l(u)(_(T)))(d)},b=function(T,d,o){if(d===0)return T;var m=o[d-1];return new t(function(){var V=b(s(m,T),d-1,o);return V})};return function(T){for(var d=l(n)(_(T[T.length-1])),o=b(d,T.length-1,T);o instanceof t;)o=o.fn();return l(a)(o)}}}}}();var ho=function(t){return{map:function(r){return function(e){return function(n){return y(t)(function(u){return new X(r(u.value0),u.value1)})(e(n))}}}}};var s_=function(t){return{Applicative0:function(){return Su(t)},Bind1:function(){return _c(t)}}},_c=function(t){return{bind:function(r){return function(e){return function(n){return kt(t.Bind1())(r(n))(function(u){var a=e(u.value0);return a(u.value1)})}}},Apply0:function(){return sc(t)}}},sc=function(t){return{apply:qe(s_(t)),Functor0:function(){return ho(t.Bind1().Apply0().Functor0())}}},Su=function(t){return{pure:function(r){return function(e){return v(t.Applicative0())(new X(r,e))}},Apply0:function(){return sc(t)}}};var gi=function(t){return{state:function(r){var e=v(t.Applicative0());return function(n){return e(r(n))}},Monad0:function(){return s_(t)}}};var qb=function(t){return function(r){var e=t(r);return e.value1}},zb=function(t){return function(r){var e=t(r);return e.value0}};var Rh=function(t){return t};var Nh=function(){var t=function(r){return new X(Ib(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=Pb(r.newSeed),e}())};return ru(gi(Tr))(t)}();var Ci=ho(Un);var v_=function(t){return zb(Rh(t))};var jb=sc(Tr),Vb=function(t){return function(r){var e=Ne(r),n=Ne(t),u=function(l){return n+Ai(l)(e-n+1)},a=y(Ci)(Ne)(Nh),i=jt(jb)(y(Ci)(Zr(wo))(a))(y(Ci)(cn(wo)(2))(a));return y(Ci)(function(l){return Lp(u(l))})(i)}},Xb=function(t){return function(r){var e=t<=r;return e?Vb(t)(r):Vb(r)(t)}};var D_=function(t){return t.arbitrary};var b_=function(){return{arbitrary:Xb(-1e6)(1e6)}}();var un=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),an=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Be=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Te=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),nu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Pn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),d_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),A_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),k_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),y_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),g_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ve=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Hh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new Pn(t))])})(r))}},Wh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new nu(t))])})(r))}},Uh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Ve(new d_(t))])})(r))}},qh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Ve(new y_(t))])})(r))}},zh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new an(t))])})(r))}},Jh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Ve(new mc(t))])})(r))}},Vh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new kn(t))])})(r))}},jh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new un(t))])})(r))}},Xh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new Be(t)),new hu(new Te(t))])})(r))}},Gh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Ve(new A_(t))])})(r))}},Qh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Ve(new k_(t))])})(r))}},Kh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Ve(new g_(t))])})(r))}},Qb=function(t){return{ids:function(){var e=fe(t)(),n=dt(ln)(v_(D_(b_))({newSeed:l_(e),size:5}));return mt(Jt)(qr(Zr(Ge)(1))(t))(),n},makeElement:jh,attributeParent:function(r){return function(e){return v(er)(void 0)}},makeRoot:Jh,makeText:zh,makePursx:Vh,setProp:Wh,makeDynBeacon:Xh,setCb:function(r){return function(e){return v(er)(void 0)}},setText:Hh,sendToPos:Uh,deleteFromCache:Kh,removeDynBeacon:qh,giveNewParent:Gh,disconnectElement:Qh}},La=function(t){return function(r){return t instanceof p?r(t.value0):v(Lr)(!1)}},Yh=function(t){return function(r){return function(){var n=Cb(t.id)(r)(),u=gb(t.id)(r)(),a=yb(t.id)(r)(),i={scope:n,parent:u,dynFamily:a,id:t.id,pos:new p(t.pos),ez:!1};return i_(p.create)(La)(i)(r)()}}},Kb=function(t){return{ids:function(){var e=fe(t)(),n=dt(ln)(v_(D_(b_))({newSeed:l_(e),size:5}));return mt(Jt)(qr(Zr(Ge)(1))(t))(),n},makeElement:Sb(La)(!0),makeDynBeacon:kb(La)(!0),attributeParent:Ab(La),makeRoot:Mb,makeText:hb(La)(!0)(or(void 0)),makePursx:Fb(La)(!0)(or(void 0)),setProp:Tb(!0),setCb:Eb(!0),setText:$b,sendToPos:Yh,deleteFromCache:f_,removeDynBeacon:wb,giveNewParent:i_(p.create)(La),disconnectElement:xb}};var C_=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),S_=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let a=r,i=Object.entries(n);for(var l=0;l<i.length;l++){let T=i[l][0];i[l][1]===!0?a=a.replace(u+T+u,'data-deku-attr-internal="'+T+'" data-deku-ssr="'+T+"@!%"+e+'"'):a=a.replace(u+T+u,'<span style="display:contents;" data-deku-elt-internal="'+T+'" data-deku-ssr="'+T+"@!%"+e+'"></span>')}let _=a.indexOf(">"),s=a.indexOf("/>"),b=s==_-1?s:_;return a.slice(0,b)+' data-deku-ssr="'+t+'" '+a.slice(b)};var tT=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},ta=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Zb=function(t){var r=!1,e;function n(u){if(u.value1 instanceof St)return r=!0,new p(new X(u.value1.value0,new ta(u.value0,u.value1.value1)));if(u.value0 instanceof ir&&u.value1 instanceof ir)return r=!0,k.value;if(u.value1 instanceof ir){t=new ta(ir.value,ff(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Si=function(t){var r=!1,e;function n(u){if(u.value0 instanceof ir&&u.value1 instanceof ir)return r=!0,k.value;if(u.value0 instanceof ir){t=new ta(ff(u.value1),ir.value);return}if(u.value0 instanceof St)return r=!0,new p(new X(u.value0.value0,new ta(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Or=function(t){return function(r){return new ta(t.value0,new St(r,t.value1))}};var hi={map:function(t){return function(r){return new ta(y(no)(t)(r.value0),y(no)(t)(r.value1))}}},Pa={foldMap:function(t){return xc(Pa)(t)},foldr:function(t){return wc(Pa)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function l(_,s){var b=Si(s);if(b instanceof p){u=t(_)(b.value0.value0),n=b.value0.value1;return}if(b instanceof k)return a=!0,_;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[b.constructor.name])}for(;!a;)i=l(u,n);return i}};return r}},Tu={append:rr(Pa)(Or)},Le=function(){return new ta(ir.value,ir.value)}(),td={mempty:Le,Semigroup0:function(){return Tu}},rd=Or(Le),ed=function(t){return function(r){return Ir(t)(td)(rd)(r)}},h_={traverse:function(t){return function(r){var e=y(t.Apply0().Functor0())(rr(Pa)(Or)(Le)),n=rr(Pa)(function(u){var a=ke(t.Apply0())(Or)(u);return function(i){return a(r(i))}})(v(t)(Le));return function(u){return e(n(u))}}},sequence:function(t){return jc(h_)(t)},Functor0:function(){return hi},Foldable1:function(){return Pa}};var nd=function(t){return function(r){return new ta(new St(t,r.value0),r.value1)}},rT={Applicative0:function(){return T_},Bind1:function(){return eT}},eT={bind:Mr(Ir(Pa)(td)),Apply0:function(){return ud(0)}},T_={pure:rd,Apply0:function(){return ud(0)}},ud=tT("applyCatQueue","Data.CatQueue",function(){return{apply:qe(rT),Functor0:function(){return hi}}});var uT=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var aT=function(t){var r=function(e){return function(n){return function(u){return function(a){if(a instanceof k)return{acc:e,rest:[]};if(a instanceof p){if(a.value0.head instanceof Be){var i=r([])(new p({id:a.value0.head.value0.id,e:a.value0.head.value0}))(a.value0.tail);return r(z(Yt)(e)(i.acc))(n)(i.rest)}if(a.value0.head instanceof Te){if(n instanceof p)return{acc:[{pos:n.value0.e.pos,elt:new _t({o:n.value0.e,a:e,c:a.value0.head.value0})}],rest:a.value0.tail};if(n instanceof k)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var l=function(){if(a.value0.head instanceof un||a.value0.head instanceof an||a.value0.head instanceof kn||a.value0.head instanceof Be||a.value0.head instanceof Te)return a.value0.head.value0.pos;if(a.value0.head instanceof nu)return k.value;if(a.value0.head instanceof Pn)return k.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[a.value0.head.constructor.name])}();return r(z(Yt)(e)([{pos:l,elt:new Dt(a.value0.head)}]))(n)(a.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[a.constructor.name])}(Kc(u))}}};return r([])(k.value)(t).acc},ad=uT("sortSortableDyns","Deku.SSR",function(){var t=y(gr)(function(e){if(e.elt instanceof Dt)return e;if(e.elt instanceof _t)return{pos:e.pos,elt:new _t({o:e.elt.value0.o,c:e.elt.value0.c,a:ad(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=ef($o(Lt(fa(ye)))(function(){var e=Ar();return function(n){return function(u){return u.pos}(e(n))}}()));return function(e){return t(r(e))}}),oT=ad(39),od=function(t){return wi(Ua)(je(gr)(t)(function(){var r=Ar();return function(e){return function(n){if(n instanceof Dt)return[n.value0];if(n instanceof _t)return z(Yt)([new Be(n.value0.o)])(z(Yt)(od(n.value0.a))([new Te(n.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[n.constructor.name])}(function(n){return n.elt}(r(e)))}}()))},id=function(t){return function(r){var e=function(m){return function(V){return mt(ho(Un))(Co(gi(Tr))(function(et){var nt={};for(var at in et)({}).hasOwnProperty.call(et,at)&&(nt[at]=et[at]);return nt.idToActions=Qn(me)(function(Kt){if(Kt instanceof p)return new p(z(Yt)(Kt.value0)([V]));if(Kt instanceof k)return new p([V]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Kt.constructor.name])})(m)(et.idToActions),nt}))}},n=ge("deku-root")(jo(function(m){return m instanceof Ve&&m.value0 instanceof mc?new p(m.value0.value0.id):k.value})(r)),u=function(m){return function(V){return function(et){return Wa(qa)(_c(Tr))(mt(ho(Un))(Co(gi(Tr))(function(nt){var at={};for(var Kt in nt)({}).hasOwnProperty.call(nt,Kt)&&(at[Kt]=nt[Kt]);return at.parentToChild=Qn(me)(function(fr){if(fr instanceof p)return new p(z(Yt)(fr.value0)([V]));if(fr instanceof k)return new p([V]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[fr.constructor.name])})(m)(nt.parentToChild),at})))(function(){return e(V)(et)})}}},a=function(m){var V=function(ot){return function(q){return function(x){if(x instanceof un){var ct=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new p(x.value0.id));return ct?new un({id:x.value0.id,scope:x.value0.scope,parent:x.value0.parent,tag:x.value0.tag,pos:new p(q),dynFamily:x.value0.dynFamily}):x}if(x instanceof an){var vt=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new p(x.value0.id));return vt?new an({id:x.value0.id,pos:new p(q),scope:x.value0.scope,parent:x.value0.parent,dynFamily:x.value0.dynFamily}):x}if(x instanceof kn){var Ee=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new p(x.value0.id));return Ee?new kn({id:x.value0.id,parent:x.value0.parent,html:x.value0.html,scope:x.value0.scope,pos:new p(q),pxScope:x.value0.pxScope,verb:x.value0.verb,cache:x.value0.cache,dynFamily:x.value0.dynFamily}):x}if(x instanceof Be){var Vr=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new p(x.value0.id));return Vr?new Be({id:x.value0.id,parent:x.value0.parent,pos:new p(q),scope:x.value0.scope,dynFamily:x.value0.dynFamily}):x}if(x instanceof Te){var On=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new p(x.value0.id));return On?new Te({id:x.value0.id,parent:x.value0.parent,pos:new p(q),scope:x.value0.scope,dynFamily:x.value0.dynFamily}):x}if(x instanceof Pn||x instanceof nu)return x;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[x.constructor.name])}}},et=function(ot){return function(q){if(q instanceof un){var x=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new p(q.value0.id));return x?new un({id:q.value0.id,scope:q.value0.scope,parent:k.value,tag:q.value0.tag,pos:q.value0.pos,dynFamily:q.value0.dynFamily}):q}if(q instanceof an){var ct=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new p(q.value0.id));return ct?new an({id:q.value0.id,pos:q.value0.pos,scope:q.value0.scope,parent:k.value,dynFamily:q.value0.dynFamily}):q}if(q instanceof kn){var vt=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new p(q.value0.id));return vt?new kn({id:q.value0.id,parent:k.value,html:q.value0.html,scope:q.value0.scope,pos:q.value0.pos,pxScope:q.value0.pxScope,verb:q.value0.verb,cache:q.value0.cache,dynFamily:q.value0.dynFamily}):q}if(q instanceof Be){var Ee=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new p(q.value0.id));return Ee?new Be({id:q.value0.id,parent:k.value,pos:q.value0.pos,scope:q.value0.scope,dynFamily:q.value0.dynFamily}):q}if(q instanceof Te){var Vr=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new p(q.value0.id));return Vr?new Te({id:q.value0.id,parent:k.value,pos:q.value0.pos,scope:q.value0.scope,dynFamily:q.value0.dynFamily}):q}if(q instanceof Pn||q instanceof nu)return q;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[q.constructor.name])}},nt=function(ot){return function(q){return function(x){return function(ct){return function(vt){if(vt instanceof p&&vt.value0.value0 instanceof Be){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new p(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Le)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof p&&vt.value0.value0 instanceof Te){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new p(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Le)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof p&&vt.value0.value0 instanceof an){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new p(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Le)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof p&&vt.value0.value0 instanceof kn){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new p(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Le)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof p&&vt.value0.value0 instanceof un){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new p(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Le)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof p&&vt.value0.value0 instanceof nu)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1);if(vt instanceof p&&vt.value0.value0 instanceof Pn)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1);if(vt instanceof k)return z(Tu)(ot)(z(Tu)(v(T_)(new Te({id:x.id+"%-%",parent:x.parent,pos:x.pos,scope:x.scope,dynFamily:x.dynFamily})))(q));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[vt.constructor.name])}(Si(ct))}}}},at=function(ot){return function(q){return function(x){if(x instanceof p&&x.value0.value0 instanceof Te)return at(nt(Le)(Le)(x.value0.value0.value0)(ot))(x.value0.value1);if(x instanceof p)return at(nd(x.value0.value0)(ot))(x.value0.value1);if(x instanceof k)return ot;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[x.constructor.name])}(Zb(q))}},Kt=function(ot){return function(q){return function(x){return function(ct){if(ct instanceof p&&ct.value0.value0 instanceof un){var vt=ct.value0.value0.value0.id===q;return vt?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof p&&ct.value0.value0 instanceof an){var Ee=ct.value0.value0.value0.id===q;return Ee?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof p&&ct.value0.value0 instanceof kn){var Vr=ct.value0.value0.value0.id===q;return Vr?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof p&&ct.value0.value0 instanceof Be){var On=ct.value0.value0.value0.id===q;return On?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof p&&ct.value0.value0 instanceof Te){var Eu=ct.value0.value0.value0.id===q;return Eu?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof p&&ct.value0.value0 instanceof nu){var Oa=ct.value0.value0.value0.id===q;return Oa?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof p&&ct.value0.value0 instanceof Pn){var Pe=ct.value0.value0.value0.id===q;return Pe?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof k)return ot;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[ct.constructor.name])}(Si(x))}}},fr=function(ot){return function(q){return function(x){if(x instanceof p&&x.value0.value0 instanceof hu)return fr(Or(ot)(x.value0.value0.value0))(x.value0.value1);if(x instanceof p&&x.value0.value0 instanceof Ve&&x.value0.value0.value0 instanceof d_)return fr(y(hi)(V(x.value0.value0.value0.value0.id)(x.value0.value0.value0.value0.pos))(ot))(x.value0.value1);if(x instanceof p&&x.value0.value0 instanceof Ve&&x.value0.value0.value0 instanceof mc||x instanceof p&&x.value0.value0 instanceof Ve&&x.value0.value0.value0 instanceof A_)return fr(ot)(x.value0.value1);if(x instanceof p&&x.value0.value0 instanceof Ve&&x.value0.value0.value0 instanceof k_)return fr(y(hi)(et(x.value0.value0.value0.value0.id))(ot))(x.value0.value1);if(x instanceof p&&x.value0.value0 instanceof Ve&&x.value0.value0.value0 instanceof y_)return fr(Kt(Le)(x.value0.value0.value0.value0.id)(ot))(x.value0.value1);if(x instanceof p&&x.value0.value0 instanceof Ve&&x.value0.value0.value0 instanceof g_)return fr(Kt(Le)(x.value0.value0.value0.value0.id)(ot))(x.value0.value1);if(x instanceof k)return ot;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[x.constructor.name])}(Si(q))}},lt=ed(gt)(m),ur=fr(Le)(lt),on=at(Le)(ur);return on},i=a(r),l=function(m){return{parentToChild:je(Bu)(m.parentToChild)(function(){var V=y(gr)(function(at){if(at instanceof un||at instanceof an||at instanceof kn||at instanceof Be||at instanceof Te||at instanceof nu||at instanceof Pn)return at.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[at.constructor.name])}),et=vu(sf),nt=y(gr)(function(at){return kt($e)(Sa(me)(at)(m.idToActions))(Zc)});return function(at){return V(od(oT(aT(et(nt(at))))))}}()),idToActions:m.idToActions}}(qb(ze(h_)(Su(Tr))(function(m){if(m instanceof un)return Ur(Su(Tr))(ae)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof an)return Ur(Su(Tr))(ae)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof kn)return Ur(Su(Tr))(ae)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof Be)return Ur(Su(Tr))(ae)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof Te)return Ur(Su(Tr))(ae)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof nu||m instanceof Pn)return e(m.value0.id)(m);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[m.constructor.name])})(i))({parentToChild:Gn,idToActions:Gn})),_=function(m){return Ha(rl(function(V){return V instanceof un||V instanceof an||V instanceof Be||V instanceof Te})(m))},s=function(m){return ge("")(jo(function(V){return V instanceof un?new p(V.value0.tag):k.value})(m))},b=function(m){return cu(gt)(Oo)(" ")(Re(Tm)(function(V){return V instanceof nu?new p(V.value0.key+('="'+(V.value0.value+'"'))):k.value})(m))},T=function(m){return or("")(function(V){var et=function(lt){return ge("")(jo(function(ur){return ur instanceof Pn?new p(C_(ur.value0.text)+("<!--"+(m+"-->"))):k.value})(V))},nt=function(lt){return"<!--%-%"+(m+"-->")},at=function(lt){var ur=s(V),on=b(V);return"<"+(ur+(" "+(on+(' data-deku-ssr="'+(m+('">'+(d(m)+("</"+(ur+">")))))))))},Kt=function(lt){return"<!--%-%"+(m+"-->")},fr=wu(V)(0);return fr instanceof p&&fr.value0 instanceof Pn?et(void 0):fr instanceof p&&fr.value0 instanceof an?et(void 0):fr instanceof p&&fr.value0 instanceof Be?nt(void 0):fr instanceof p&&fr.value0 instanceof Te?Kt(void 0):fr instanceof p&&fr.value0 instanceof kn?S_(fr.value0.value0):at(void 0)})(Sa(me)(m)(l.idToActions))},d=function(m){var V=ge([])(Sa(me)(m)(l.parentToChild));return Ir(gt)(Oo)(T)(V)},o=function(m){return rr(be)(function(V){return function(et){var nt=_(et);if(nt)return V;if(!nt)return Qf("data-deku-ssr")(b(et)+" data-deku-ssr")(V);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[nt.constructor.name])}})(d(m))(l.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(o(n)+("</"+(t+">")))))))}};var fd=function(t){return function(r){return function(e){return bn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(){var n=Ar();return function(u){return function(a){return a.ids}(n(u))}}(),disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:it(qu)})}},toElt:function(n){return n}})(t)(r)(g()(e))}}},qT=function(t){return function(){var e=o_();a_(e)();var n=je(H)(sn($n)(Ce(0)))(Kb)();n_(e)();var u=e_(),a=kl(Ct(lr)(v(Y)(Ar()(n).makeRoot({id:"deku-root",root:u})))(fd({parent:new p("deku-root"),scope:new Uu("rootScope"),raiseId:function(i){return v(er)(void 0)},ez:!0,pos:k.value,dynFamily:k.value})(n)(t)))(function(i){return i(e)})();return u_(e)(),a}},cd=function(t){return mt(H)(qT(t))},zT=function(t){return function(r){return function(e){return y(Jt)(function(){var n=id(t);return function(u){return function(a){return r.head+a}(function(a){return a+r.tail}(n(u)))}}())(sn(xs)(function(){var u=Ce(0)(),a=Ce([])(),i=Qb(u);return mt(Jt)(zm(fd({parent:new p("deku-root"),scope:new Uu("rootScope"),raiseId:function(l){return v(er)(void 0)},ez:!0,pos:k.value,dynFamily:k.value})(i)(e))(function(l){return l(a)}))(),fe(a)()}))}}},ld=zT("body");var JT=function(){return rt.value}(),_d=function(){return Tf()(ao({reflectSymbol:function(){return"buttonClicked"}})()()(ao({reflectSymbol:function(){return"sliderMoved"}})()()(df)()())()())(rt.value)(function(t){return function(r){return br([Gp([nr(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),Ie(pc(co)(t.buttonClicked(void 0)))([nr("Click")]),br([en(Ct(lr)(v(Y)("Val: 0"))(y(Dr)(function(){var e=z(ou)("Val: "),n=dt(ln);return function(u){return e(n(u))}}())(Hu(we)(S(Zr(Ge)(1)))(Ct(lr)(v(Y)(void 0))(r.buttonClicked))(-1))))]),br([du(lc(v(Y)(t.sliderMoved)))([]),br([en(Ct(lr)(v(Y)("Val: 50"))(y(Dr)(function(){var e=z(ou)("Val: "),n=dt(Lo);return function(u){return e(n(u))}}())(r.sliderMoved)))])])])}})}(),sd=function(t){return re({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(yr()(yr()(yr()(yr()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}}))(JT)({code2:kr(Jr([zr([nr(fp)])])),code1:kr(Jr([zr([nr(ip)])])),code0:kr(Jr([zr([nr(op)])])),result:kr(_d),codegen:kr(Jr([zr([en(qm(function(r){return Zt(Ya)(kt(lu)(ld({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(_d))(r))(v(er)(v(er)(void 0)))}))])]))})};var md=function(t){var r=function(n){if(n instanceof If)return vb;if(n instanceof po)return mb;if(n instanceof _o)return Pv;if(n instanceof so)return bb;if(n instanceof vo)return pb;if(n instanceof Do)return ZD;if(n instanceof mo)return db;if(n instanceof bo)return sb;if(n instanceof Ao)return Db;if(n instanceof ko)return sd;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[n.constructor.name])},e=function(n){return function(u){return r(u)({dpage:n,slug:t.slug})}};return fo(function(n){return Ye(Ke)(function(u){return Ct(lr)(v(Y)(t.startsWith))(u)})(function(u){return br([br(y(gr)(function(a){return ii([oi(wr(gt)(A)(v(Y))([At(Pr)($r.value)(Er(function(i){return Zt(vr)(ee(i))(n(a.value0))})),At(gv)(he.value)("cursor:pointer;"),At(te)(Qr.value)(t.slug+a.value1.value1.value0)]))([nr(a.value1.value0)]),Gu(v(Y)(At(lo)(he.value)(function(){return a.value1.value1.value1?"":"display:none;"}())))([nr(" | ")])])})([new X(If.value,new X("Home",new X("",!0))),new X(po.value,new X("Hello world",new X("hello/",!0))),new X(_o.value,new X("Component",new X("simple/",!0))),new X(so.value,new X("Pursx 1",new X("pursx1/",!0))),new X(vo.value,new X("Events 1",new X("events1/",!0))),new X(Do.value,new X("Effects",new X("effects/",!0))),new X(mo.value,new X("Pursx 2",new X("pursx2/",!0))),new X(bo.value,new X("Events 2",new X("events2/",!0))),new X(Ao.value,new X("Portals",new X("portals/",!0))),new X(ko.value,new X("SSR",new X("ssr/",!1)))])),Ef(e(n))(u)])})})};var lAt=function(t){return function(){var e=or(li(go("could not ingest options: "+dt(Y_()()(dc({reflectSymbol:function(){return"slug"}})(dc({reflectSymbol:function(){return"startsWith"}})(Q_)(Qe))(Qe)))(t))))(v(Lr))(Mv(t.startsWith))();return cd(md({slug:t.slug,startsWith:e}))()}};export{lAt as main};
