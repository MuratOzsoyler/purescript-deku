var Qp=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),o=0,p=0;p<e;p++)for(var f=t[p],d=0;d<n;d++)u[o++]=f(r[d]);return u}};var Ou={compose:function(t){return function(r){return function(e){return t(r(e))}}}},Ru=function(t){return t.compose};var xt=function(t){return t.identity},wt={identity:function(t){return t},Semigroupoid0:function(){return Ou}};var de=!0;var tc=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},Tr=function(t){return function(r){return function(e){return t(e)(r)}}},T=function(t){return function(r){return t}};var ao=function(t){return function(r){return r(t)}};var Yp=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var j=function(){function t(){}return t.value=new t,t}();var D=function(t){return t.map},Xe=function(t){return function(r){return function(e){return D(t)(e)(r)}}},it=function(t){return D(t)(T(void 0))},B=function(t){return function(r){return function(e){return D(t)(T(e))(r)}}},ii=function(t){return function(r){return D(t)(T(r))}};var We={map:Ru(Ou)},Sr={map:Yp};var oo={apply:Qp,Functor0:function(){return Sr}},Ut=function(t){return t.apply};var At=function(t){return function(r){return function(e){return Ut(t)(D(t.Functor0())(T(xt(wt)))(r))(e)}}};var _=function(t){return t.pure};var Jn=function(t){return function(r){return function(e){if(r)return e;if(!r)return _(t)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[r.constructor.name,e.constructor.name])}}},io=function(t){return function(r){return function(e){return Ut(t.Apply0())(_(t)(r))(e)}}};var fo={pure:function(t){return[t]},Apply0:function(){return oo}};var r_=function(t){return function(r){return t+r}},e_=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Jr=function(t){return t.reflectSymbol};var we=function(t){return function(r){return r[t]}},Gn=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var u_={append:function(t){return function(r){return void 0}}},jn={append:r_};var Ar={append:e_};var z=function(t){return t.append};var st=function(t){return t.alt};var Xb=String.fromCharCode(65535),Kb=String.fromCharCode(0),Qb=Number.POSITIVE_INFINITY,Yb=Number.NEGATIVE_INFINITY;var a_=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var o_=a_;var i_=a_;var f_=function(t){return function(r){return t===r}};var c_=f_;var l_=f_;var mu={eq:l_};var co={eq:c_};var Mt=function(t){return t.eq};var Tt=function(){function t(){}return t.value=new t,t}(),Lt=function(){function t(){}return t.value=new t,t}(),It=function(){function t(){}return t.value=new t,t}();var p_=function(t){return function(r){return t-r|0}};var __=function(t){return function(r){return t+r|0}},s_=function(t){return function(r){return t*r|0}},v_=function(t){return function(r){return t+r}},m_=function(t){return function(r){return t*r}};var lo={add:v_,zero:0,mul:m_,one:1},Ze={add:__,zero:0,mul:s_,one:1};var Qe=function(t){return t.mul};var Ur=function(t){return t.add};var ec={sub:p_,Semiring0:function(){return Ze}};var ie=function(){return{compare:i_(Tt.value)(It.value)(Lt.value),Eq0:function(){return mu}}}();var Te=function(){return{compare:o_(Tt.value)(It.value)(Lt.value),Eq0:function(){return co}}}();var Ft=function(t){return t.compare};var Ye=function(t){return t.top};var Nu={top:2147483647,bottom:-2147483648,Ord0:function(){return Te}};var sn=function(t){return t.bottom};var b_=function(t){return t.toString()},d_=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var A_=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,o=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+o})+'"'};var k_=function(t){return function(r){return[t].concat(r)}},ci=function(t){return function(r){return r.join(t)}};var Se={show:A_},y_={showRecordFields:function(t){return function(r){return[]}}},g_=function(t){return t.showRecordFields},C_=function(){return function(){return function(t){return{show:function(r){var e=g_(t)(j.value)(r);return e.length===0?"{}":ci(" ")(["{",ci(", ")(e),"}"])}}}}};var _o={show:d_},tn={show:b_};var at=function(t){return t.show};var uc=function(t){return function(r){return function(e){return{showRecordFields:function(n){return function(u){var o=g_(r)(j.value)(u),p=Jr(t)(j.value),f=we(p)(u);return k_(ci(": ")([p,at(e)(f)]))(o)}}}}}};var L=function(){function t(){}return t.value=new t,t}(),h=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var rr=function(t){return function(r){return function(e){if(e instanceof L)return t;if(e instanceof h)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var pa=rr(!1)(T(!0));var dr={map:function(t){return function(r){return r instanceof h?new h(t(r.value0)):L.value}}};var ke=function(t){return rr(t)(xt(wt))},Ie=function(){return function(t){if(t instanceof h)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Bu={apply:function(t){return function(r){if(t instanceof h)return D(dr)(t.value0)(r);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return dr}},Le={bind:function(t){return function(r){if(t instanceof h)return r(t.value0);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return Bu}};var Xr=function(){return{pure:h.create,Apply0:function(){return Bu}}}();var bd={alt:function(t){return function(r){return t instanceof L?r:t}},Functor0:function(){return dr}},S_=function(){return{empty:L.value,Alt0:function(){return bd}}}();var E_=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=u-1;o>=0;o--)n=t(e[o])(n);return n}}},F_=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=0;o<u;o++)n=t(n)(e[o]);return n}}};var $_=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var Xt=function(t){return t.discard};var pi={bind:$_,Apply0:function(){return oo}},P=function(t){return t.bind},mn=function(t){return Tr(P(t))},_i=function(t){return function(r){return function(e){return function(n){return mn(t)(r)(e(n))}}}},si=function(t){return function(r){return function(e){return function(n){return P(t)(r(n))(e)}}}};var Kt={discard:function(t){return P(t)}};var Uu=function(t){return function(r){return P(t)(r)(xt(wt))}};var C=function(t){return t.empty};var _t=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ft=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var oc=function(t){return rr(new _t(t))(ft.create)};var _a={map:function(t){return function(r){if(r instanceof _t)return new _t(r.value0);if(r instanceof ft)return new ft(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[r.constructor.name])}}};var rn=function(t){return function(r){return function(e){if(e instanceof _t)return t(e.value0);if(e instanceof ft)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},ic=function(){return rn(T(L.value))(h.create)}();var Cd=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var w_={defer:function(t){return function(r){return t(void 0)(r)}}},sa=function(t){return t.defer},fc=function(t){return function(r){var e=Cd("go","Control.Lazy",function(){return sa(t)(function(u){return r(e(25))})}),n=e(25);return n}};var I_=function(t){return function(r){return t&&r}},L_=function(t){return function(r){return t||r}},P_=function(t){return!t};var en=function(t){return t.not};var ma=function(t){return t.ff};var Wu=function(t){return t.disj},ye={ff:!1,tt:!0,implies:function(t){return function(r){return Wu(ye)(en(ye)(t))(r)}},conj:I_,disj:L_,not:P_};var O_=function(t){return Math.min(Math.abs(t),2147483647)},R_=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},H_=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var N_={Ring0:function(){return ec}};var so=function(t){return t.mod};var vi={degree:O_,div:R_,mod:H_,CommutativeRing0:function(){return N_}};var Zu={mempty:void 0,Semigroup0:function(){return u_}},qu={mempty:"",Semigroup0:function(){return jn}};var Ht=function(t){return t.mempty};var q=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Kr=function(t){return t.value1};var zu={map:function(t){return function(r){return new q(r.value0,t(r.value1))}}};var bo=function(t){return t};var Rd=function(t){return{append:function(r){return function(e){return Wu(t)(r)(e)}}}};var _c=function(t){return{mempty:ma(t),Semigroup0:function(){return Rd(t)}}};var J=function(t){return t};var Sn=function(){return J};var Pr=Sn;var yi=function(){return function(){return function(){return function(){return function(t){return Sn()}}}}};var fr=function(t){return t.foldr};var da=function(t){return function(r){return fr(t)(st(r.Alt0()))(C(r))}},gr=function(t){return function(r){return function(e){return fr(t)(function(){var n=st(r.Alt0());return function(u){return n(e(u))}}())(C(r))}}},qe=function(t){return function(r){return function(e){return fr(r)(function(){var n=At(t.Apply0());return function(u){return n(e(u))}}())(_(t)(void 0))}}},Gr=function(t){return function(r){return Tr(qe(t)(r))}},gi=function(t){return function(r){return qe(t)(r)(xt(wt))}},cr=function(t){return t.foldl};var Kn=function(t){return function(r){return function(e){return function(n){var u=function(o){return function(p){return o.init?{init:!1,acc:p}:{init:!1,acc:z(r.Semigroup0())(o.acc)(z(r.Semigroup0())(e)(p))}}};return cr(t)(u)({init:!0,acc:Ht(r)})(n).acc}}}};var jr={foldr:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof h)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof h)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof L)return Ht(t);if(e instanceof h)return r(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[r.constructor.name,e.constructor.name])}}}};var Z_=function(t){return function(r){return function(e){return fr(t)(function(n){return function(u){return z(r.Semigroup0())(e(n))(u)}})(Ht(r))}}},mt={foldr:E_,foldl:F_,foldMap:function(t){return Z_(mt)(t)}};var Or=function(t){return t.foldMap};var bu=function(t){return function(r){return yi()()()()(bo)(Or(t)(_c(r)))}};var ve={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},Ci=function(t){return t.dimap},Oe=function(t){return function(r){return Ci(t)(r)(xt(wt))}};var q_=function(t){return function(){return t}},z_=function(t){return function(r){return function(){return r(t())()}}};var nn=function(t){return function(r){return function(e){return P(t.Bind1())(r)(function(n){return P(t.Bind1())(e)(function(u){return _(t.Applicative0())(n(u))})})}}};var V_=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Aa={Applicative0:function(){return me},Bind1:function(){return Au}},Au={bind:z_,Apply0:function(){return bc(0)}},me={pure:q_,Apply0:function(){return bc(0)}},J_=V_("functorEffect","Effect",function(){return{map:io(me)}}),bc=V_("applyEffect","Effect",function(){return{apply:nn(Aa),Functor0:function(){return J_(0)}}}),R=J_(20),mr=bc(23);var Zd=function(t){return t},yo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),go=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qd=function(t){return t},hi=Sn(),i=qd;var E=function(){return yo.create}();var Z=function(){return go.create}(),Dr=function(){var t=D(We)(D(R)(T(!0)));return function(r){return Zd(t(r))}}(),ct=function(t){return t.attr};function G_(t){return()=>t.slice()}function j_(t){return r=>e=>()=>{e[t]=r}}function X_(t){return()=>t.slice()}var dc=J;var Q_=function(t){return function(r){return function(){return t(r())}}},Y_=function(t){return function(){return t}},ts=function(t){return function(r){return function(){return r(t())()}}};function Ac(t){return function(r){return function(){for(;t();)r()}}}function Cr(t){return function(){return{value:t}}}var lr=function(t){return function(){return t.value}},rs=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Rr=function(t){return function(r){return function(){return r.value=t}}};var Fn=function(t){return t};var $n={map:function(t){return function(r){return t(r)}}};var es={apply:function(t){return function(r){return t(r)}},Functor0:function(){return $n}},Jd={bind:function(t){return function(r){return r(t)}},Apply0:function(){return es}},Gd={pure:Fn,Apply0:function(){return es}},yr={Applicative0:function(){return Gd},Bind1:function(){return Jd}};var ns=function(t){return function(){return{value:t}}};var xn=function(t){return function(){return t.value}},us=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},ka=function(t){return function(r){return function(){r.value=t}}};var ku=ns,Xd=us,kc=function(t){return Xd(function(r){var e=t(r);return{state:e,value:e}})},yc=function(t){return function(r){return it(R)(kc(t)(r))}};var Yr=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qr=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dn=function(t){return t.tailRecM};var as={tailRecM:function(t){return function(r){var e=function(n){if(n instanceof Qr)return n.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 113, column 30 - line 113, column 44): "+[n.constructor.name])};return function(){var u=mn(Au)(ku)(t(r))();return function(){for(;!function(){var p=xn(u)();if(p instanceof Yr){var f=t(p.value0)();return ka(f)(u)(),!1}if(p instanceof Qr)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 104, column 22 - line 109, column 28): "+[p.constructor.name])}(););return{}}(),D(R)(e)(xn(u))()}}},Monad0:function(){return Aa}};var tA=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},rA=rs,Wr=function(t){return rA(function(r){var e=t(r);return{state:e,value:e}})},nr={map:Q_},ho={Applicative0:function(){return De},Bind1:function(){return Qn}},Qn={bind:ts,Apply0:function(){return gc(0)}},De={pure:Y_,Apply0:function(){return gc(0)}},gc=tA("applyST","Control.Monad.ST.Internal",function(){return{apply:nn(ho),Functor0:function(){return nr}}}),is=gc(46),Cc={tailRecM:function(t){return function(r){var e=function(u){return u instanceof Yr},n=function(u){if(u instanceof Qr)return u.value0;throw new Error("Failed pattern match at Control.Monad.ST.Internal (line 69, column 32 - line 69, column 46): "+[u.constructor.name])};return P(Qn)(mn(Qn)(Cr)(t(r)))(function(u){return Xt(Kt)(Qn)(Ac(D(nr)(e)(lr(u)))(P(Qn)(lr(u))(function(o){if(o instanceof Yr)return P(Qn)(t(o.value0))(function(p){return it(nr)(Rr(p)(u))});if(o instanceof Qr)return _(De)(void 0);throw new Error("Failed pattern match at Control.Monad.ST.Internal (line 61, column 18 - line 65, column 28): "+[o.constructor.name])})))(function(){return D(nr)(n)(lr(u))})})}},Monad0:function(){return ho}};var fs={liftST:xt(wt),Monad0:function(){return ho}};var Q=function(t){return t.liftST};var eA=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},nA=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},Tc=typeof Array.prototype.fill=="function"?eA:nA,uA=function(){function t(u,o){this.head=u,this.tail=o}var r={};function e(u){return function(o){return new t(u,o)}}function n(u){for(var o=[],p=0,f=u;f!==r;)o[p++]=f.head,f=f.tail;return o}return function(u){return function(o){return n(u(e)(r)(o))}}}(),Mn=function(t){return t.length};var cs=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},ls=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var o=e(n[u]);if(r(o))return o}return t}}}},ps=function(t){return function(r){return function(e){return function(n){for(var u=0,o=n.length;u<o;u++)if(e(n[u]))return t(u);return r}}}};var _s=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var To=function(t){return function(r){return r.filter(t)}},Ti=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var o=r[u];t(o)?e.push(o):n.push(o)}return{yes:e,no:n}}};var aA=function(){function t(r,e,n,u,o,p){var f,d,m,k,y,b,a;for(f=o+(p-o>>1),f-o>1&&t(r,e,u,n,o,f),p-f>1&&t(r,e,u,n,f,p),d=o,m=f,k=o;d<f&&m<p;)y=u[d],b=u[m],a=e(r(y)(b)),a>0?(n[k++]=b,++m):(n[k++]=y,++d);for(;d<f;)n[k++]=u[d++];for(;m<p;)n[k++]=u[m++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var ss=function(t){return function(r){return t[r]}};function wn(){return[]}var Sc=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var Si=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},In=function(t){return function(){return t}};function vs(t){return function(){return t.slice()}}var Ei=vs,Ec=vs,iA=function(){function t(r,e,n,u,o,p){var f,d,m,k,y,b,a;for(f=o+(p-o>>1),f-o>1&&t(r,e,u,n,o,f),p-f>1&&t(r,e,u,n,f,p),d=o,m=f,k=o;d<f&&m<p;)y=u[d],b=u[m],a=e(r(y)(b)),a>0?(n[k++]=b,++m):(n[k++]=y,++d);for(;d<f;)n[k++]=u[d++];for(;m<p;)n[k++]=u[m++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var ds=function(t){return function(r){return function(){var n=Ec(r)();return t(n)(),In(n)()}}};var an=function(t){return Sc([t])};var lA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var pA=function(t){return function(){var e=lr(t.value1)();return Wr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var $i=function(t){return D(nr)(lA.create(t))(Cr(0))},xi=function(t){return function(r){return function(){for(var n=Cr(!1)();D(nr)(en(ye))(lr(n))();)(function(){var o=pA(t)();if(o instanceof h)return r(o.value0)();if(o instanceof L)return it(nr)(Rr(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[o.constructor.name])})();return{}}}};var ks=function(){function t(u){return[u]}function r(u){return function(o){return[u,o]}}function e(u){return function(o){return function(p){return[u,o,p]}}}function n(u){return function(o){return u.concat(o)}}return function(u){return function(o){return function(p){return function(f){return function(d){function m(k,y){switch(y-k){case 0:return p([]);case 1:return o(t)(f(d[k]));case 2:return u(o(r)(f(d[k])))(f(d[k+1]));case 3:return u(u(o(e)(f(d[k])))(f(d[k+1])))(f(d[k+2]));default:var b=k+Math.floor((y-k)/4)*2;return u(o(n)(m(k,b)))(m(b,y))}}return m(0,d.length)}}}}}}();var Ee=function(t){return t.traverse};var xs=function(t){return function(r){return Ee(t)(r)(xt(wt))}},tu={traverse:function(t){return ks(Ut(t.Apply0()))(D(t.Apply0().Functor0()))(_(t))},sequence:function(t){return xs(tu)(t)},Functor0:function(){return Sr},Foldable1:function(){return mt}};var Ps=function(){return ss};var Ri=function(t){return function(r){return ds(an(r))(t)()}},Os=function(t){return[t]};var ju=function(){return cs(h.create)(L.value)}(),Rc=function(t){return ju(t)(Mn(t)-1|0)};var Hi=function(){return ls(L.value)(pa)}();var Hc=function(){return ps(h.create)(L.value)}();var Nc=function(t){return function(r){return D(dr)(Ps()(r))(Hc(t)(r))}};var Rs=function(){return _s(h.create)(L.value)}(),Ni=function(t){return function(r){return function(e){return e.length===0?[]:rr(e)(function(n){return Ie()(Rs(n)(e))})(Hc(t(r))(e))}}};var Eo=function(t){return function(r){return z(Ar)([t])(r)}};var ok=Tr(P(pi)),Bc=function(t){return ok(function(){var r=rr([])(Os);return function(e){return r(t(e))}}())};var Hs=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var ru=function(t){return t.mapWithIndex};var ha={mapWithIndex:Hs,Functor0:function(){return Sr}};var Pn=function(t){return t.foldrWithIndex};var on=function(t){return t.foldlWithIndex};var eu=function(t){return t.foldMapWithIndex};var On=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Ui=function(t){return function(r){return new On(r,C(t))}};var hr=function(){function t(){}return t.value=new t,t}(),yt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Wi=function(t){return t},kk=function(t){return new yt(t.value0,t.value1)};var yk=function(t){var r=function(e){return function(n){var u=e,o=!1,p;function f(d,m){if(m instanceof yt&&m.value1 instanceof yt&&m.value1.value1 instanceof yt){u=new yt(m,d),n=m.value1.value1.value1;return}var k=function(b){return b instanceof yt&&b.value1 instanceof yt&&b.value1.value1 instanceof hr?new yt(t(b.value0),new yt(t(b.value1.value0),hr.value)):b instanceof yt&&b.value1 instanceof hr?new yt(t(b.value0),hr.value):hr.value},y=function(b){return function(a){var g=b,rt=!1,Nt;function or(Gt,Be){if(Gt instanceof yt&&Gt.value0 instanceof yt&&Gt.value0.value1 instanceof yt&&Gt.value0.value1.value1 instanceof yt){g=Gt.value1,a=new yt(t(Gt.value0.value0),new yt(t(Gt.value0.value1.value0),new yt(t(Gt.value0.value1.value1.value0),Be)));return}return rt=!0,Be}for(;!rt;)Nt=or(g,a);return Nt}};return o=!0,y(d)(k(m))}for(;!o;)p=f(u,n);return p}};return r(hr.value)},Wc={map:yk};var fn={foldr:function(t){return function(r){var e=function(){var u=function(o){return function(p){var f=o,d=!1,m;function k(y,b){if(b instanceof hr)return d=!0,y;if(b instanceof yt){f=new yt(b.value0,y),p=b.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[y.constructor.name,b.constructor.name])}for(;!d;)m=k(f,p);return m}};return u(hr.value)}(),n=cr(fn)(Tr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,o=!1,p;function f(d,m){if(m instanceof hr)return o=!0,d;if(m instanceof yt){u=t(d)(m.value0),n=m.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[m.constructor.name])}for(;!o;)p=f(u,n);return p}};return r},foldMap:function(t){return function(r){return cr(fn)(function(e){var n=z(t.Semigroup0())(e);return function(u){return n(r(u))}})(Ht(t))}}};var Fo={append:function(t){return function(r){return fr(fn)(yt.create)(r)(t)}}};var Zc={append:function(t){return function(r){return new On(t.value0,z(Fo)(t.value1)(kk(r)))}}};var Us={alt:z(Fo),Functor0:function(){return Wc}},qc=function(){return{empty:hr.value,Alt0:function(){return Us}}}();var Js=function(t){return t()};var Gs=function(t){throw new Error(t)};var js=function(){return Gs};var Bk=Js,An=function(t){return Bk(function(){return js()(t)})};var lt=function(){function t(){}return t.value=new t,t}(),gt=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Zt=function(){function t(r,e,n,u,o,p,f){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p,this.value6=f}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return function(f){return new t(r,e,n,u,o,p,f)}}}}}}},t}(),Cu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),nu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),hu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Rn=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Tu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),qi=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Qs=function(t){return function(r){return new gt(lt.value,t,r,lt.value)}};var Ea=function(t){return function(r){var e=Ft(t),n=function(u){var o=!1,p;function f(d){if(d instanceof lt)return o=!0,L.value;if(d instanceof gt){var m=e(r)(d.value1);if(m instanceof It)return o=!0,new h(d.value2);if(m instanceof Tt){u=d.value0;return}u=d.value3;return}if(d instanceof Zt){var k=e(r)(d.value1);if(k instanceof It)return o=!0,new h(d.value2);var y=e(r)(d.value4);if(y instanceof It)return o=!0,new h(d.value5);if(k instanceof Tt){u=d.value0;return}if(y instanceof Lt){u=d.value6;return}u=d.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[d.constructor.name])}for(;!o;)p=f(u);return p};return n}};var Hr=function(t){return function(r){return function(e){var n=t,u=r,o=!1,p;function f(d,m,k){if(m instanceof hr)return o=!0,k;if(m instanceof yt){if(m.value0 instanceof Cu){n=d,u=m.value1,e=new gt(k,m.value0.value0,m.value0.value1,m.value0.value2);return}if(m.value0 instanceof nu){n=d,u=m.value1,e=new gt(m.value0.value0,m.value0.value1,m.value0.value2,k);return}if(m.value0 instanceof hu){n=d,u=m.value1,e=new Zt(k,m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5);return}if(m.value0 instanceof Rn){n=d,u=m.value1,e=new Zt(m.value0.value0,m.value0.value1,m.value0.value2,k,m.value0.value3,m.value0.value4,m.value0.value5);return}if(m.value0 instanceof Tu){n=d,u=m.value1,e=new Zt(m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5,k);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[m.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[m.constructor.name,k.constructor.name])}for(;!o;)p=f(n,u,e);return p}}},Vi=function(t){return function(r){return function(e){var n=function(p){return function(f){var d=p,m=!1,k;function y(b,a){if(b instanceof hr)return m=!0,new gt(a.value0,a.value1,a.value2,a.value3);if(b instanceof yt){if(b.value0 instanceof Cu)return m=!0,Hr(t)(b.value1)(new Zt(a.value0,a.value1,a.value2,a.value3,b.value0.value0,b.value0.value1,b.value0.value2));if(b.value0 instanceof nu)return m=!0,Hr(t)(b.value1)(new Zt(b.value0.value0,b.value0.value1,b.value0.value2,a.value0,a.value1,a.value2,a.value3));if(b.value0 instanceof hu){d=b.value1,f=new qi(new gt(a.value0,a.value1,a.value2,a.value3),b.value0.value0,b.value0.value1,new gt(b.value0.value2,b.value0.value3,b.value0.value4,b.value0.value5));return}if(b.value0 instanceof Rn){d=b.value1,f=new qi(new gt(b.value0.value0,b.value0.value1,b.value0.value2,a.value0),a.value1,a.value2,new gt(a.value3,b.value0.value3,b.value0.value4,b.value0.value5));return}if(b.value0 instanceof Tu){d=b.value1,f=new qi(new gt(b.value0.value0,b.value0.value1,b.value0.value2,b.value0.value3),b.value0.value4,b.value0.value5,new gt(a.value0,a.value1,a.value2,a.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[b.value0.constructor.name,a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[b.constructor.name,a.constructor.name])}for(;!m;)k=y(d,f);return k}},u=Ft(t),o=function(p){return function(f){var d=p,m=!1,k;function y(b,a){if(a instanceof lt)return m=!0,n(b)(new qi(lt.value,r,e,lt.value));if(a instanceof gt){var g=u(r)(a.value1);if(g instanceof It)return m=!0,Hr(t)(b)(new gt(a.value0,r,e,a.value3));if(g instanceof Tt){d=new yt(new Cu(a.value1,a.value2,a.value3),b),f=a.value0;return}d=new yt(new nu(a.value0,a.value1,a.value2),b),f=a.value3;return}if(a instanceof Zt){var rt=u(r)(a.value1);if(rt instanceof It)return m=!0,Hr(t)(b)(new Zt(a.value0,r,e,a.value3,a.value4,a.value5,a.value6));var Nt=u(r)(a.value4);if(Nt instanceof It)return m=!0,Hr(t)(b)(new Zt(a.value0,a.value1,a.value2,a.value3,r,e,a.value6));if(rt instanceof Tt){d=new yt(new hu(a.value1,a.value2,a.value3,a.value4,a.value5,a.value6),b),f=a.value0;return}if(rt instanceof Lt&&Nt instanceof Tt){d=new yt(new Rn(a.value0,a.value1,a.value2,a.value4,a.value5,a.value6),b),f=a.value3;return}d=new yt(new Tu(a.value0,a.value1,a.value2,a.value3,a.value4,a.value5),b),f=a.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[b.constructor.name,a.constructor.name])}for(;!m;)k=y(d,f);return k}};return o(hr.value)}}},Jk=function(t){return function(r){var e=function(f){return function(d){var m=f,k=!1,y;function b(a,g){if(a instanceof hr)return k=!0,g;if(a instanceof yt){if(a.value0 instanceof Cu&&a.value0.value2 instanceof lt&&g instanceof lt)return k=!0,Hr(t)(a.value1)(new gt(lt.value,a.value0.value0,a.value0.value1,lt.value));if(a.value0 instanceof nu&&a.value0.value0 instanceof lt&&g instanceof lt)return k=!0,Hr(t)(a.value1)(new gt(lt.value,a.value0.value1,a.value0.value2,lt.value));if(a.value0 instanceof Cu&&a.value0.value2 instanceof gt){m=a.value1,d=new Zt(g,a.value0.value0,a.value0.value1,a.value0.value2.value0,a.value0.value2.value1,a.value0.value2.value2,a.value0.value2.value3);return}if(a.value0 instanceof nu&&a.value0.value0 instanceof gt){m=a.value1,d=new Zt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3,a.value0.value1,a.value0.value2,g);return}return a.value0 instanceof Cu&&a.value0.value2 instanceof Zt?(k=!0,Hr(t)(a.value1)(new gt(new gt(g,a.value0.value0,a.value0.value1,a.value0.value2.value0),a.value0.value2.value1,a.value0.value2.value2,new gt(a.value0.value2.value3,a.value0.value2.value4,a.value0.value2.value5,a.value0.value2.value6)))):a.value0 instanceof nu&&a.value0.value0 instanceof Zt?(k=!0,Hr(t)(a.value1)(new gt(new gt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3),a.value0.value0.value4,a.value0.value0.value5,new gt(a.value0.value0.value6,a.value0.value1,a.value0.value2,g)))):a.value0 instanceof hu&&a.value0.value2 instanceof lt&&a.value0.value5 instanceof lt&&g instanceof lt?(k=!0,Hr(t)(a.value1)(new Zt(lt.value,a.value0.value0,a.value0.value1,lt.value,a.value0.value3,a.value0.value4,lt.value))):a.value0 instanceof Rn&&a.value0.value0 instanceof lt&&a.value0.value5 instanceof lt&&g instanceof lt?(k=!0,Hr(t)(a.value1)(new Zt(lt.value,a.value0.value1,a.value0.value2,lt.value,a.value0.value3,a.value0.value4,lt.value))):a.value0 instanceof Tu&&a.value0.value0 instanceof lt&&a.value0.value3 instanceof lt&&g instanceof lt?(k=!0,Hr(t)(a.value1)(new Zt(lt.value,a.value0.value1,a.value0.value2,lt.value,a.value0.value4,a.value0.value5,lt.value))):a.value0 instanceof hu&&a.value0.value2 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(new Zt(g,a.value0.value0,a.value0.value1,a.value0.value2.value0,a.value0.value2.value1,a.value0.value2.value2,a.value0.value2.value3),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value0 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(new Zt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3,a.value0.value1,a.value0.value2,g),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value5 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(a.value0.value0,a.value0.value1,a.value0.value2,new Zt(g,a.value0.value3,a.value0.value4,a.value0.value5.value0,a.value0.value5.value1,a.value0.value5.value2,a.value0.value5.value3)))):a.value0 instanceof Tu&&a.value0.value3 instanceof gt?(k=!0,Hr(t)(a.value1)(new gt(a.value0.value0,a.value0.value1,a.value0.value2,new Zt(a.value0.value3.value0,a.value0.value3.value1,a.value0.value3.value2,a.value0.value3.value3,a.value0.value4,a.value0.value5,g)))):a.value0 instanceof hu&&a.value0.value2 instanceof Zt?(k=!0,Hr(t)(a.value1)(new Zt(new gt(g,a.value0.value0,a.value0.value1,a.value0.value2.value0),a.value0.value2.value1,a.value0.value2.value2,new gt(a.value0.value2.value3,a.value0.value2.value4,a.value0.value2.value5,a.value0.value2.value6),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value0 instanceof Zt?(k=!0,Hr(t)(a.value1)(new Zt(new gt(a.value0.value0.value0,a.value0.value0.value1,a.value0.value0.value2,a.value0.value0.value3),a.value0.value0.value4,a.value0.value0.value5,new gt(a.value0.value0.value6,a.value0.value1,a.value0.value2,g),a.value0.value3,a.value0.value4,a.value0.value5))):a.value0 instanceof Rn&&a.value0.value5 instanceof Zt?(k=!0,Hr(t)(a.value1)(new Zt(a.value0.value0,a.value0.value1,a.value0.value2,new gt(g,a.value0.value3,a.value0.value4,a.value0.value5.value0),a.value0.value5.value1,a.value0.value5.value2,new gt(a.value0.value5.value3,a.value0.value5.value4,a.value0.value5.value5,a.value0.value5.value6)))):a.value0 instanceof Tu&&a.value0.value3 instanceof Zt?(k=!0,Hr(t)(a.value1)(new Zt(a.value0.value0,a.value0.value1,a.value0.value2,new gt(a.value0.value3.value0,a.value0.value3.value1,a.value0.value3.value2,a.value0.value3.value3),a.value0.value3.value4,a.value0.value3.value5,new gt(a.value0.value3.value6,a.value0.value4,a.value0.value5,g)))):(k=!0,An("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[a.constructor.name])}for(;!k;)y=b(m,d);return y}},n=function(f){return function(d){var m=f,k=!1,y;function b(a,g){if(g instanceof gt&&g.value0 instanceof lt&&g.value3 instanceof lt)return k=!0,e(a)(lt.value);if(g instanceof gt){m=new yt(new nu(g.value0,g.value1,g.value2),a),d=g.value3;return}if(g instanceof Zt&&g.value0 instanceof lt&&g.value3 instanceof lt&&g.value6 instanceof lt)return k=!0,e(new yt(new nu(lt.value,g.value1,g.value2),a))(lt.value);if(g instanceof Zt){m=new yt(new Tu(g.value0,g.value1,g.value2,g.value3,g.value4,g.value5),a),d=g.value6;return}return k=!0,An("The impossible happened in partial function `removeMaxNode`.")}for(;!k;)y=b(m,d);return y}},u=function(f){var d=!1,m;function k(y){if(y instanceof gt&&y.value3 instanceof lt)return d=!0,{key:y.value1,value:y.value2};if(y instanceof gt){f=y.value3;return}if(y instanceof Zt&&y.value6 instanceof lt)return d=!0,{key:y.value4,value:y.value5};if(y instanceof Zt){f=y.value6;return}return d=!0,An("The impossible happened in partial function `maxNode`.")}for(;!d;)m=k(f);return m},o=Ft(t),p=function(f){return function(d){var m=f,k=!1,y;function b(a,g){if(g instanceof lt)return k=!0,L.value;if(g instanceof gt){var rt=o(r)(g.value1);if(g.value3 instanceof lt&&rt instanceof It)return k=!0,new h(new q(g.value2,e(a)(lt.value)));if(rt instanceof It){var Nt=u(g.value0);return k=!0,new h(new q(g.value2,n(new yt(new Cu(Nt.key,Nt.value,g.value3),a))(g.value0)))}if(rt instanceof Tt){m=new yt(new Cu(g.value1,g.value2,g.value3),a),d=g.value0;return}m=new yt(new nu(g.value0,g.value1,g.value2),a),d=g.value3;return}if(g instanceof Zt){var or=function(){return g.value0 instanceof lt&&g.value3 instanceof lt&&g.value6 instanceof lt}(),rt=o(r)(g.value4),Gt=o(r)(g.value1);if(or&&Gt instanceof It)return k=!0,new h(new q(g.value2,Hr(t)(a)(new gt(lt.value,g.value4,g.value5,lt.value))));if(or&&rt instanceof It)return k=!0,new h(new q(g.value5,Hr(t)(a)(new gt(lt.value,g.value1,g.value2,lt.value))));if(Gt instanceof It){var Nt=u(g.value0);return k=!0,new h(new q(g.value2,n(new yt(new hu(Nt.key,Nt.value,g.value3,g.value4,g.value5,g.value6),a))(g.value0)))}if(rt instanceof It){var Nt=u(g.value3);return k=!0,new h(new q(g.value5,n(new yt(new Rn(g.value0,g.value1,g.value2,Nt.key,Nt.value,g.value6),a))(g.value3)))}if(Gt instanceof Tt){m=new yt(new hu(g.value1,g.value2,g.value3,g.value4,g.value5,g.value6),a),d=g.value0;return}if(Gt instanceof Lt&&rt instanceof Tt){m=new yt(new Rn(g.value0,g.value1,g.value2,g.value4,g.value5,g.value6),a),d=g.value3;return}m=new yt(new Tu(g.value0,g.value1,g.value2,g.value3,g.value4,g.value5),a),d=g.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[g.constructor.name])}for(;!k;)y=b(m,d);return y}};return p(hr.value)}},ge={foldr:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return fr(ge)(t)(t(e.value2)(fr(ge)(t)(r)(e.value3)))(e.value0);if(e instanceof Zt)return fr(ge)(t)(t(e.value2)(fr(ge)(t)(t(e.value5)(fr(ge)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return cr(ge)(t)(t(cr(ge)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Zt)return cr(ge)(t)(t(cr(ge)(t)(t(cr(ge)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof lt)return Ht(t);if(e instanceof gt)return z(t.Semigroup0())(Or(ge)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(Or(ge)(t)(r)(e.value3)));if(e instanceof Zt)return z(t.Semigroup0())(Or(ge)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(z(t.Semigroup0())(Or(ge)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value5))(Or(ge)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[e.constructor.name])}}}},te={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return Pn(te)(t)(t(e.value1)(e.value2)(Pn(te)(t)(r)(e.value3)))(e.value0);if(e instanceof Zt)return Pn(te)(t)(t(e.value1)(e.value2)(Pn(te)(t)(t(e.value4)(e.value5)(Pn(te)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof lt)return r;if(e instanceof gt)return on(te)(t)(t(e.value1)(on(te)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Zt)return on(te)(t)(t(e.value4)(on(te)(t)(t(e.value1)(on(te)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){return function(r){return function(e){if(e instanceof lt)return Ht(t);if(e instanceof gt)return z(t.Semigroup0())(eu(te)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(eu(te)(t)(r)(e.value3)));if(e instanceof Zt)return z(t.Semigroup0())(eu(te)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(z(t.Semigroup0())(eu(te)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value4)(e.value5))(eu(te)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[e.constructor.name])}}},Foldable0:function(){return ge}},Ys=function(){return Pn(te)(function(t){return function(r){return function(e){return new yt(t,e)}}})(hr.value)}();var Hn=function(){return lt.value}();var jc=function(t){return function(r){return function(e){return rr(e)(Kr)(Jk(t)(r)(e))}}};var Nn=function(t){return function(r){return function(e){return function(n){var u=r(Ea(t)(e)(n));if(u instanceof L)return jc(t)(e)(n);if(u instanceof h)return Vi(t)(e)(u.value0)(n);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[u.constructor.name])}}}};var Gk=function(t){return function(r){return function(e){return function(n){var u=function(o){return function(p){return function(f){return Nn(t)(function(){var d=rr(f)(r(f));return function(m){return h.create(d(m))}}())(o)(p)}}};return on(te)(u)(n)(e)}}}};var tv=function(t){return Gk(t)(T)};var rv={compact:function(t){return function(){var e=wn(),n=$i(function(u){return ju(t)(u)})();return xi(n)(function(){var u=it(nr);return function(o){return u(function(p){if(p instanceof L)return _(De)(0);if(p instanceof h)return an(p.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[p.constructor.name])}(o))}}())(),In(e)()}()},separate:function(t){return function(){var e=wn(),n=wn(),u=$i(function(o){return ju(t)(o)})();return xi(u)(function(){var o=it(nr);return function(p){return o(function(f){if(f instanceof _t)return an(f.value0)(e);if(f instanceof ft)return an(f.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[f.constructor.name])}(p))}}())(),Ut(is)(D(nr)(function(o){return function(p){return{left:o,right:p}}})(In(e)))(In(n))()}()}};var Ku=function(t){return t.compact};var ev={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof _t)return{left:z(Ar)(e.left)([u.value0]),right:e.right};if(u instanceof ft)return{right:z(Ar)(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return cr(mt)(r)({left:[],right:[]})},partition:Ti,filterMap:Bc,filter:To,Compactable0:function(){return rv},Functor1:function(){return Sr}};var Fe=function(t){return t.filterMap};var nv=function(t){return t.filter};var ry=function(t){return function(r){return function(e){return tv(t)(r)(e)}}};var Xc=function(t){return Ys(t)};var av=function(t){return Qs(t)(void 0)};var Kc=function(t){return{append:ry(t)}};var ov={foldMap:function(t){return function(r){var e=Or(fn)(t)(r);return function(n){return e(Xc(n))}}},foldl:function(t){return function(r){var e=cr(fn)(t)(r);return function(n){return e(Xc(n))}}},foldr:function(t){return function(r){var e=fr(fn)(t)(r);return function(n){return e(Xc(n))}}}};var ey=Hn;var iv=function(t){return{mempty:ey,Semigroup0:function(){return Kc(t)}}};var fv=function(t){return function(r){return function(e){return jc(t)(r)(e)}}};function cv(t){return function(r){return function(){return setTimeout(r,t)}}}function lv(t){return function(){clearTimeout(t)}}var pv=cv;var ay={eq:function(t){return function(r){return t===r}}},Gi={compare:function(t){return function(r){return Ft(Te)(t)(r)}},Eq0:function(){return ay}};var _v=lv;var Qu=function(t){return t.keepLatest};var Su=function(t){return t.fold};var Yu=function(t){return function(r){return function(e){return function(n){return Fe(t.Filterable1())(Kr)(Su(t)(function(u){return function(o){return D(zu)(_(Xr))(r(u)(o.value0))}})(e)(new q(n,L.value)))}}}};var ji=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Xi=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ki=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),U={map:function(t){return function(r){return function(e,n,u,o){return r(e,n,u,function(p){return o(t(p))})}}}},uu={apply:function(t){return function(r){return function(e,n,u,o){return u(function(p){return t(e,n,u,function(f){return u(function(d){return r(e,n,u,function(m){return o(f(m))})})})})}}},Functor0:function(){return U}},cn={bind:function(t){return function(r){return function(e,n,u,o){return u(function(p){return t(e,n,u,function(f){var d=r(f);return u(function(m){return d(e,n,u,function(k){return o(k)})})})})}}},Apply0:function(){return uu}};var s={pure:function(t){return function(r,e,n,u){return u(t)}},Apply0:function(){return uu}},iy={Applicative0:function(){return s},Bind1:function(){return cn}};var Qc=function(t){var r=function(e){var n=!1,u;function o(p){var f=p(void 0);if(f instanceof ji){e=f.value0;return}if(f instanceof Xi){e=f.value0;return}if(f instanceof Ki)return n=!0,D(nr)(Yr.create)(f.value0);if(f instanceof Qi)return n=!0,_(De)(new Qr(f.value0));throw new Error("Failed pattern match at Hyrule.Zora (line 144, column 15 - line 148, column 30): "+[f.constructor.name])}for(;!n;)u=o(e);return u};return Dn(Cc)(r)(function(e){return t(function(n,u){return new Xi(n,u)},Ki.create,ji.create,Qi.create)})},W=function(t){var r=function(e){var n=!1,u;function o(p){var f=p(void 0);if(f instanceof ji){e=f.value0;return}if(f instanceof Xi)return n=!0,D(R)(Yr.create)(f.value1);if(f instanceof Ki)return n=!0,D(R)(Yr.create)(dc(f.value0));if(f instanceof Qi)return n=!0,_(me)(new Qr(f.value0));throw new Error("Failed pattern match at Hyrule.Zora (line 131, column 15 - line 135, column 30): "+[f.constructor.name])}for(;!n;)u=o(e);return u};return Dn(as)(r)(function(e){return t(function(n,u){return new Xi(n,u)},Ki.create,ji.create,Qi.create)})},ra=function(t){return function(r,e,n,u){return e(D(nr)(function(o){return function(p){return u(o)}})(t))}},G={liftST:ra,Monad0:function(){return iy}};var Yi=function(t){return function(r){return function(e,n,u,o){return e(function(p){return o(Ht(t))},D(R)(function(p){return function(f){return o(p)}})(r))}}};function Yc(t){return function(r){return t===r}}var tl=Yc;var py=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},_y=function(t){return t};var sv=function(t){return Ci(ve)(D(We)(ra))(function(){var r=D(U)(Qc);return function(e){return Qc(r(e))}}())(t)},vv=function(t){return Ci(ve)(D(We)(Yi(Zu)))(function(){var r=D(U)(W);return function(e){return W(r(e))}}())(t)},sy=function(t){return function(r){return function(e){return function(n){return function(u){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(o){return P(t.Monad0().Bind1())(e(function(p){return Q(t)(it(nr)(Rr(new h(p))(o)))}))(function(p){return P(t.Monad0().Bind1())(n(function(f){return P(t.Monad0().Bind1())(Q(t)(lr(o)))(qe(r)(jr)(function(d){return u(f(d))}))}))(function(f){return _(r)(At(r.Apply0())(p)(f))})})})}}}}},ur={map:function(t){return function(r){return function(e){return r(function(n){return e(t(n))})}}}};var vy=function(t){return function(r){return function(e){return function(n){return function(u){return P(t.Monad0().Bind1())(Q(t)(Cr(n)))(function(o){return e(function(p){return P(t.Monad0().Bind1())(Q(t)(Wr(r(p))(o)))(u)})})}}}}},Mo=function(t){return function(r){return function(e){return function(n){return e(function(u){var o=r(u);if(o instanceof h)return n(o.value0);if(o instanceof L)return _(t)(void 0);throw new Error("Failed pattern match at FRP.Event (line 189, column 13 - line 191, column 27): "+[o.constructor.name])})}}}},rl=function(t){return function(r){return Mo(t)(function(e){var n=r(e);if(n)return new h(e);if(!n)return L.value;throw new Error("Failed pattern match at FRP.Event (line 117, column 13 - line 119, column 25): "+[n.constructor.name])})}},wo=function(t){return{compact:Mo(t)(xt(wt)),separate:function(r){return{left:Mo(t)(function(e){if(e instanceof _t)return new h(e.value0);if(e instanceof ft)return L.value;throw new Error("Failed pattern match at FRP.Event (line 100, column 13 - line 102, column 33): "+[e.constructor.name])})(r),right:Mo(t)(function(e){if(e instanceof ft)return new h(e.value0);if(e instanceof _t)return L.value;throw new Error("Failed pattern match at FRP.Event (line 107, column 13 - line 109, column 32): "+[e.constructor.name])})(r)}}}},kn=function(t){return{filter:rl(t),filterMap:Mo(t),partition:function(r){return function(e){return{yes:rl(t)(r)(e),no:rl(t)(function(){var n=en(ye);return function(u){return n(r(u))}}())(e)}}},partitionMap:function(r){return function(e){return{left:Fe(kn(t))(function(){var n=rn(h.create)(T(L.value));return function(u){return n(r(u))}}())(e),right:Fe(kn(t))(function(n){return ic(r(n))})(e)}}},Compactable0:function(){return wo(t)},Functor1:function(){return ur}}},my=function(t){return function(r){return function(e){return function(n){return function(u){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(o){return P(t.Monad0().Bind1())(Q(t)(wn))(function(p){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(f){return P(t.Monad0().Bind1())(Q(t)(wn))(function(d){return P(t.Monad0().Bind1())(Q(t)(Cr(!0)))(function(m){return P(t.Monad0().Bind1())(e(function(k){return P(t.Monad0().Bind1())(Q(t)(lr(m)))(function(y){return y?Q(t)(it(nr)(an(k)(p))):P(t.Monad0().Bind1())(Q(t)(Rr(new h(k))(o)))(function(){return P(t.Monad0().Bind1())(Q(t)(lr(f)))(qe(r)(jr)(function(b){return u(b(k))}))})})}))(function(k){return P(t.Monad0().Bind1())(n(function(y){return P(t.Monad0().Bind1())(Q(t)(lr(m)))(function(b){return b?Q(t)(it(nr)(an(y)(d))):P(t.Monad0().Bind1())(Q(t)(Rr(new h(y))(f)))(function(){return P(t.Monad0().Bind1())(Q(t)(lr(o)))(qe(r)(jr)(function(a){return u(y(a))}))})})}))(function(y){return P(t.Monad0().Bind1())(Q(t)(Rr(!1)(m)))(function(){return P(t.Monad0().Bind1())(Q(t)(Ei(p)))(function(b){return P(t.Monad0().Bind1())(Q(t)(Ei(d)))(function(a){return Xt(Kt)(t.Monad0().Bind1())(function(){return b.length===0?it(r.Apply0().Functor0())(Q(t)(Rr(Rc(a))(f))):Gr(r)(mt)(b)(function(g){return P(t.Monad0().Bind1())(Q(t)(Rr(new h(g))(o)))(function(){return Gr(r)(mt)(a)(function(rt){return P(t.Monad0().Bind1())(Q(t)(Rr(new h(rt))(f)))(function(){return u(rt(g))})})})})}())(function(){return P(t.Monad0().Bind1())(Q(t)(Si(0)(Mn(b))([])(p)))(function(){return P(t.Monad0().Bind1())(Q(t)(Si(0)(Mn(a))([])(d)))(function(){return _(r)(At(r.Apply0())(k)(y))})})})})})})})})})})})})})}}}}},Zr=function(t){return function(r){return r}(tf(277).subscribe)(t)},le=function(t){return function(r){return r}(tf(300).makeEvent)(t)},$a=function(t){return function(r){return Xt(Kt)(t.Monad0().Bind1())(_(t.Monad0().Applicative0())(void 0))(function(){return function(e){return e(t)(r)}(tf(316).create)})}},tf=py("backdoor","FRP.Event",function(){return{makeEvent:_y,create:function(){var t=function(r){return function(e){return P(r.Monad0().Bind1())(Q(r)(Cr([])))(function(n){return _(r.Monad0().Applicative0())({event:function(u){return P(e.Monad0().Bind1())(Q(e)(Wr(function(o){return z(Ar)(o)([u])})(n)))(function(){return _(e.Monad0().Applicative0())(P(e.Monad0().Bind1())(Q(e)(Wr(Ni(tl)(u))(n)))(function(){return _(e.Monad0().Applicative0())(void 0)}))})},push:function(u){return P(e.Monad0().Bind1())(Q(e)(lr(n)))(qe(e.Monad0().Applicative0())(mt)(function(o){return o(u)}))}})})}};return t}(),subscribe:function(){var t=function(r){return function(e){return r(e)}};return t}(),bus:function(){var t=function(r){return function(e){return le(function(n){return P(r.Monad0().Bind1())($a(r)(r))(function(u){return Xt(Kt)(r.Monad0().Bind1())(n(e(u.push)(u.event)))(function(){return _(r.Monad0().Applicative0())(_(r.Monad0().Applicative0())(void 0))})})})}};return t}(),memoize:function(){var t=function(r){return function(e){return function(n){return le(function(u){return P(r.Monad0().Bind1())($a(r)(r))(function(o){return Xt(Kt)(r.Monad0().Bind1())(u(n(o.event)))(function(){return Zr(e)(o.push)})})})}}};return t}(),hot:function(){var t=function(r){return function(e){return P(r.Monad0().Bind1())($a(r)(r))(function(n){return P(r.Monad0().Bind1())(Zr(e)(n.push))(function(u){return _(r.Monad0().Applicative0())({event:n.event,unsubscribe:u})})})}};return t}(),mailboxed:function(){var t=function(r){return function(e){return function(n){return function(u){return le(function(o){return P(e.Monad0().Bind1())(Q(e)(Cr(Hn)))(function(p){return Xt(Kt)(e.Monad0().Bind1())(o(u(function(f){return le(function(d){return Xt(Kt)(e.Monad0().Bind1())(it(e.Monad0().Bind1().Apply0().Functor0())(Q(e)(Wr(Nn(r)(function(m){if(m instanceof L)return new h([d]);if(m instanceof h)return new h(z(Ar)(m.value0)([d]));throw new Error("Failed pattern match at FRP.Event (line 484, column 21 - line 486, column 55): "+[m.constructor.name])})(f))(p))))(function(){return _(e.Monad0().Applicative0())(it(e.Monad0().Bind1().Apply0().Functor0())(Q(e)(Wr(Nn(r)(function(m){if(m instanceof L)return L.value;if(m instanceof h)return new h(Ni(tl)(d)(m.value0));throw new Error("Failed pattern match at FRP.Event (line 493, column 21 - line 495, column 69): "+[m.constructor.name])})(f))(p))))})})})))(function(){return P(e.Monad0().Bind1())(Zr(n)(function(f){return P(e.Monad0().Bind1())(Q(e)(lr(p)))(function(d){var m=Ea(r)(f.address)(d);if(m instanceof L)return _(e.Monad0().Applicative0())(void 0);if(m instanceof h)return Gr(e.Monad0().Applicative0())(mt)(m.value0)(function(k){return k(f.payload)});throw new Error("Failed pattern match at FRP.Event (line 502, column 13 - line 504, column 49): "+[m.constructor.name])})}))(function(f){return _(e.Monad0().Applicative0())(Xt(Kt)(e.Monad0().Bind1())(it(e.Monad0().Bind1().Apply0().Functor0())(Q(e)(Rr(Hn)(p))))(function(){return f}))})})})})}}}};return t}(),delay:function(){var t=function(r){return function(e){return le(function(n){return function(){var o=ku(Ht(iv(Gi)))(),p=Zr(e)(function(f){return function(){var m=ku(L.value)(),k=pv(r)(function(){n(f)();var b=xn(m)();return rr(_(me)(void 0))(function(a){return yc(fv(Gi)(a))(o)})(b)()})();return ka(new h(k))(m)(),yc(z(Kc(Gi))(av(k)))(o)()}})();return function(){var d=xn(o)();return Gr(me)(ov)(d)(_v)(),p()}}})}};return t}()}}),mv=tf(417),el=function(t){return function(r){return function(e){return e(t)}(mv.bus)(r)}};var Dv=function(t){return function(r){return function(e){return e(t)}(mv.memoize)(r)}},Dy=function(t){return function(r){return function(e){return function(n){return P(r.Bind1())($a(t)(t))(function(u){var o=e(u.event);return P(r.Bind1())(Zr(o.input)(u.push))(function(p){return P(r.Bind1())(Zr(o.output)(n))(function(f){return _(r.Applicative0())(At(r.Bind1().Apply0())(p)(f))})})})}}}},by=function(t){return function(r){return function(e){return P(t.Monad0().Bind1())(Q(t)(Cr(L.value)))(function(n){return P(t.Monad0().Bind1())(r(function(u){return Xt(Kt)(t.Monad0().Bind1())(P(t.Monad0().Bind1())(Q(t)(lr(n)))(gi(t.Monad0().Applicative0())(jr)))(function(){return P(t.Monad0().Bind1())(Zr(u)(e))(function(o){return Q(t)(it(nr)(Rr(new h(o))(n)))})})}))(function(u){return _(t.Monad0().Applicative0())(Xt(Kt)(t.Monad0().Bind1())(P(t.Monad0().Bind1())(Q(t)(lr(n)))(gi(t.Monad0().Applicative0())(jr)))(function(){return u}))})})}}},dy=function(t){return{apply:function(r){return function(e){return my(t)(t.Monad0().Applicative0())(r)(D(ur)(ao)(e))}},Functor0:function(){return ur}}};var Y=function(t){return{pure:function(r){return function(e){return ii(t.Monad0().Bind1().Apply0().Functor0())(_(t.Monad0().Applicative0())(void 0))(e(r))}},Apply0:function(){return dy(t)}}};var Qt=function(t){return{alt:function(r){return function(e){return function(n){return Ut(t.Apply0())(D(t.Apply0().Functor0())(function(u){return function(o){return At(t.Apply0())(u)(o)}})(r(n)))(e(n))}}},Functor0:function(){return ur}}};var A=function(t){return{empty:function(r){return _(t)(_(t)(void 0))},Alt0:function(){return Qt(t)}}},Ay=function(t){return{Applicative0:function(){return Y(t)},Plus1:function(){return A(t.Monad0().Applicative0())}}},Ce=function(t){return{fold:vy(t),keepLatest:by(t),sampleOn:sy(t)(t.Monad0().Applicative0()),fix:Dy(t)(t.Monad0()),Alternative0:function(){return Ay(t)},Filterable1:function(){return kn(t.Monad0().Applicative0())}}};var nl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var rf=function(t){return function(){return function(){return function(r){return function(e){return function(n){return Gn(Jr(t)(r))(e)(n)}}}}}},ol=function(t){return function(){return function(r){return function(e){return we(Jr(t)(r))(e)}}}};var ef={vb:function(t){return function(r){return function(e){return function(n){return _(t.Monad0().Applicative0())(new q({},{}))}}}}},dv=function(t){return t.vb},Cy={vbus:function(){var t=function(){return function(e){return function(n){return function(u){return function(o){return le(function(p){return P(e.Monad0().Bind1())(dv(n)(e)(j.value)(j.value)(j.value))(function(f){return Xt(Kt)(e.Monad0().Bind1())(p(o(f.value0)(f.value1)))(function(){return _(e.Monad0().Applicative0())(_(e.Monad0().Applicative0())(void 0))})})})}}}}},r=function(){return function(e){return function(n){return t()(e)(n)}}};return r}()},fl=function(){return function(t){return function(r){return function(e){return function(n){return n()(t)(r)}(Cy.vbus)(e)}}}};var xa=function(t){return function(){return function(){return function(r){return function(){return function(){return{vb:function(e){return function(n){return function(u){return function(o){return P(e.Monad0().Bind1())(dv(r)(e)(j.value)(u)(o))(function(p){return P(e.Monad0().Bind1())($a(e)(e))(function(f){return _(e.Monad0().Applicative0())(new q(rf(t)()()(j.value)(f.push)(p.value0),rf(t)()()(j.value)(f.event)(p.value1)))})})}}}}}}}}}}};var Eu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),cl=function(){function t(){}return t.value=new t,t}();var Io=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Lo=function(){function t(){}return t.value=new t,t}(),uf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),af=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),of=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ma=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),S=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var wa={eq:function(t){return function(r){return t instanceof Eu&&r instanceof Eu?t.value0===r.value0:t instanceof cl&&r instanceof cl}}};var M=function(t){return new of(t)};var Av=function(t){return new af(t)};var kv=t=>r=>r[t];var Bn=function(t){return t.reflectType};var gv=function(t){return Bn(t)};var Ia=Sr;var ff=function(){return function(t){return t}};var ll=function(){return function(){return function(){return function(){return function(){return function(t){var r=gv(t);return function(e){return kv(r(e))}}}}}}};var Cv=[];var pl=function(){return function(){return function(t){return function(r){return Eo(t)(r)}}}};function hv(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var Fu={};function sl(t){return t()}function Tv(t){return function(r){return function(e){return function(n){var u=e;function o(f){return function(d){return r(d)(f)(n[f])}}for(var p in n)hasOwnProperty.call(n,p)&&(u=t(u)(o(p)));return u}}}}function cf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var My=Object.keys||cf(function(t){return function(){return t}});function vl(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var ml=function(t){return function(r){return function(){return delete r[t],r}}};var Ny=cf(function(t){return function(r){return r}});var By=hv;var Sv=function(t){return function(r){return sl(function(){var n=By(r)();return t(n)(),n})}};var La=function(t){return function(r){return Sv(vl(t)(r))}};var Ev=Tv(ao),Uy=function(t){return function(r){return Ev(function(e){return function(n){return function(u){return z(t.Semigroup0())(e)(r(n)(u))}}})(Ht(t))}},Fv={foldl:function(t){return Ev(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return fr(mt)(t)(r)(Ny(e))}}},foldMap:function(t){return function(r){return Uy(t)(T(r))}}};var Dl=function(t){return Sv(ml(t))};var $v=function(){function t(){}return t.value=new t,t}(),dl=function(){function t(){}return t.value=new t,t}(),Wy=function(){function t(){}return t.value=new t,t}();var xv=function(t){return function(r){return function(e){var n=function(u){var o=function(p){return function(f){return new q(f+1|0,new q(p,f))}};return Yu(Ce(t))(o)(u)(0)};return new af(Qu(Ce(t))(Dv(t)(n(e))(function(u){return D(ur)(function(o){return st(Qt(t.Monad0().Applicative0()))(_(Y(t))(new Io(r(o.value0))))(D(ur)(T(Lo.value))(nv(kn(t.Monad0().Applicative0()))(function(){var p=Mt(co)(o.value1+1|0);return function(f){return p(Kr(f))}}())(u)))})(u)})))}}};var Un=function(t){return function(r){return function(e){return function(n){return function(u){var o=function(p){return p(n)(u)};return function(p){if(p instanceof of)return gr(mt)(A(t))(Un(t)(r)(e)(n)(u))(p.value0);if(p instanceof Ma)return Qu(Ce(r))(D(ur)(Un(t)(r)(e)(n)(u))(p.value0));if(p instanceof S)return o(e.toElt(p.value0));if(p instanceof af)return le(function(f){return P(r.Monad0().Bind1())(Q(r)(Cr(Fu)))(function(d){return P(r.Monad0().Bind1())(Zr(p.value0)(function(m){return P(r.Monad0().Bind1())(e.ids(u))(function(k){return P(r.Monad0().Bind1())(Q(r)(Cr(_(t)(void 0))))(function(y){return P(r.Monad0().Bind1())(e.ids(u))(function(b){return P(r.Monad0().Bind1())(Q(r)(Cr(_(t)(void 0))))(function(a){return P(r.Monad0().Bind1())(Q(r)(Cr([])))(function(g){return P(r.Monad0().Bind1())(Q(r)(Cr(_(t)(void 0))))(function(rt){return P(r.Monad0().Bind1())(D(t.Apply0().Functor0())(Eu.create)(e.ids(u)))(function(Nt){return P(r.Monad0().Bind1())(Q(r)(Cr($v.value)))(function(or){return P(r.Monad0().Bind1())(Zr(m)(function(Gt){return P(r.Monad0().Bind1())(Q(r)(lr(or)))(function(Be){return Gt instanceof uf&&Be instanceof dl?P(r.Monad0().Bind1())(Q(r)(lr(g)))(qe(t)(mt)(function(){var _e=e.doLogic(Gt.value0)(u);return function(ot){return f(_e(ot))}}())):Gt instanceof Lo&&Be instanceof dl?Xt(Kt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Rr(Wy.value)(or))))(function(){var _e=At(t.Apply0())(At(t.Apply0())(At(t.Apply0())(At(t.Apply0())(P(r.Monad0().Bind1())(Q(r)(lr(g)))(qe(t)(mt)(function(ot){return Gr(t)(jr)(n.parent)(function(ue){return f(e.disconnectElement(u)({id:ot,parent:ue,scope:Nt}))})})))(Uu(r.Monad0().Bind1())(Q(r)(lr(y)))))(Uu(r.Monad0().Bind1())(Q(r)(lr(a)))))(it(t.Apply0().Functor0())(Q(r)(Wr(Dl(k))(d)))))(it(t.Apply0().Functor0())(Q(r)(Wr(Dl(b))(d))));return At(t.Apply0())(it(t.Apply0().Functor0())(Q(r)(Rr(_e)(rt))))(_e)}):Gt instanceof Io&&Be instanceof $v?Xt(Kt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Rr(dl.value)(or))))(function(){return P(r.Monad0().Bind1())(Zr(Un(t)(r)(e)(function(){var _e={};for(var ot in n)({}).hasOwnProperty.call(n,ot)&&(_e[ot]=n[ot]);return _e.scope=Nt,_e.raiseId=function(ue){return it(t.Apply0().Functor0())(Q(r)(Wr(z(Ar)([ue]))(g)))},_e}())(u)(Gt.value0))(f))(function(_e){return Xt(Kt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Wr(La(b)(_e))(d))))(function(){return it(t.Apply0().Functor0())(Q(r)(Rr(_e)(a)))})})}):_(t)(void 0)})}))(function(Gt){return Xt(Kt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Rr(Gt)(y))))(function(){return Xt(Kt)(r.Monad0().Bind1())(it(t.Apply0().Functor0())(Q(r)(Wr(La(k)(Gt))(d))))(function(){return Uu(r.Monad0().Bind1())(Q(r)(lr(rt)))})})})})})})})})})})})}))(function(m){return _(t)(Xt(Kt)(r.Monad0().Bind1())(P(r.Monad0().Bind1())(Q(r)(lr(d)))(cr(Fv)(At(t.Apply0()))(_(t)(void 0))))(function(){return m}))})})});throw new Error("Failed pattern match at Bolson.Control (line 531, column 17 - line 615, column 20): "+[p.constructor.name])}}}}}},Zy=function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(o){return function(p){var f=function(d){return function(m){return le(function(k){return P(t.Monad0().Bind1())(Q(t)(G_(D(Sr)(T(""))(ff()(o)))))(function(y){var b=da(mt)(A(t.Monad0().Applicative0()))(ru(ha)(function(a){return fc(w_)(function(g){return function(rt){return rt instanceof S?function(Nt){return Nt(function(){var or={};for(var Gt in d)({}).hasOwnProperty.call(d,Gt)&&(or[Gt]=d[Gt]);return or.parent=L.value,or.scope=e(d.scope),or.raiseId=function(Be){return Q(t)(j_(a)(Be)(y))},or}())(m)}(u.toElt(rt.value0)):g(u.wrapElt(rt))}})})(ff()(o)));return P(t.Monad0().Bind1())(Zr(b)(k))(function(a){return P(t.Monad0().Bind1())(Q(t)(Cr(_(t.Monad0().Applicative0())(void 0))))(function(g){return P(t.Monad0().Bind1())(D(t.Monad0().Bind1().Apply0().Functor0())(J)(Q(t)(X_(y))))(function(rt){var Nt=D(Ia)(function(Gt){return function(Be){return new S(u.fromEltO1(function(_e){return function(ot){return le(function(ue){return Xt(Kt)(t.Monad0().Bind1())(_e.raiseId(Gt))(function(){return Xt(Kt)(t.Monad0().Bind1())(Gr(t.Monad0().Applicative0())(jr)(_e.parent)(function(eo){return ue(u.giveNewParent(ot)({id:Gt,parent:eo,scope:_e.scope})(Be))}))(function(){return _(t.Monad0().Applicative0())(_(t.Monad0().Applicative0())(void 0))})})})}}))}})(rt),or=Un(t.Monad0().Applicative0())(t)(n)(d)(m)(p(Nt)(J));return P(t.Monad0().Bind1())(Zr(or)(k))(function(Gt){return Xt(Kt)(t.Monad0().Bind1())(it(t.Monad0().Bind1().Apply0().Functor0())(Q(t)(Rr(Gt)(g))))(function(){return _(t.Monad0().Applicative0())(Xt(Kt)(t.Monad0().Bind1())(a)(function(){return Xt(Kt)(t.Monad0().Bind1())(Jn(t.Monad0().Applicative0())(!r)(Gr(t.Monad0().Applicative0())(mt)(ff()(rt))(function(Be){return k(u.deleteFromCache(m)({id:Be}))})))(function(){return Uu(t.Monad0().Bind1())(Q(t)(lr(g)))})}))})})})})})})})}};return new S(u.fromEltO2(f))}}}}}}}};var Mv=function(){return function(t){return function(r){return function(e){return function(n){return function(u){return Zy()(t)(!1)(xt(wt))(r)(e)(n)(u)}}}}}};function Lv(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function Pv(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}var Ov=Ou;var Rv=function(){return function(){return function(t){return function(r){return function(e){return function(n){return Pv(Jr(t)(r))(e)(n)}}}}}};var Hv=wt,Nv=function(t){return function(r){return t(Lv(r))}};var tg=function(t){return t},rg=function(t){return t.mappingWithIndex};var eg=function(t){return t.mapping};var lf={mapRecordWithIndexBuilder:function(t){return function(r){return xt(Hv)}}},Bv=function(t){return t.mapRecordWithIndexBuilder},Pa=function(t){return function(r){return function(e){return function(){return function(){return{mapRecordWithIndexBuilder:function(n){return function(u){return Ru(Ov)(Rv()()(t)(j.value)(rg(r)(u)(j.value)))(Bv(e)(j.value)(u))}}}}}}}};var Uv=function(){return function(t){return{hmap:function(){var r=Bv(t)(j.value);return function(e){return Nv(r(tg(e)))}}()}}};var Wv=function(t){return t.hmap},Oa=function(t){return{mappingWithIndex:function(r){return function(e){return eg(t)(r)}}}};var ng=function(){function t(){}return t.value=new t,t}();var Ra={mapping:function(t){return D(We)(W)}},Zv=function(){return new uf(0)}();var yl=function(){return Lo.value}(),ea=function(){return Io.create}();var ug=function(t){return Wv(t)(ng.value)},pf=function(){return function(){return function(t){return function(r){return function(e){return function(n){return new Ma(fl()(G)(r)(e)(Oe(ve)(ug(Uv()(t)))(n)))}}}}}};var $u=function(t){return el(G)(Oe(ve)(D(We)(W))(t))};var Ha=function(t){return new Ma($u(t))};var ag=function(t){return t.makeText},og=function(t){return function(r){return function(e){return D(ur)(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},ig=function(t){return function(r){return function(e){return D(ur)(function(n){return function(u){if(u.value instanceof yo)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof go)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 88, column 26 - line 90, column 45): "+[u.value.constructor.name])}(hi(n))})(e)}}},fg=function(t){return t.makeElement},cg=function(t){return t.attributeParent},Je=function(t){var r=function(e){return function(n){return le(function(u){return P(cn)(n.ids)(function(o){return Xt(Kt)(cn)(e.raiseId(o))(function(){return D(U)(At(uu)(u(n.deleteFromCache({id:o}))))(Zr(da(mt)(A(s))([_(Y(G))(ag(n)({id:o,parent:e.parent,scope:e.scope})),og(n)(o)(t)]))(u))})})})}};return new S(r)},Jt=function(t){return Je(_(Y(G))(t))},_f=function(t){return function(r){return function(e){return t(C(A(s)))([xv(G)(r)(e)])}}};var qv=function(t){return{doLogic:function(r){return function(e){return function(n){return e.sendToPos({id:n,pos:r})}}},ids:function(){var r=Pr(t);return function(e){return function(n){return n.ids}(r(e))}}(),disconnectElement:function(r){return function(e){return r.disconnectElement({id:e.id,scope:e.scope,parent:e.parent,scopeEq:Mt(wa)})}},toElt:function(r){return r}}};var Na=function(t){return function(r){return t(C(A(s)))([Av(r)])}};var lg=Un(s)(G)(qv());var w=function(t){return function(r){return function(e){var n=function(u){return function(o){return le(function(p){return P(cn)(o.ids)(function(f){return Xt(Kt)(cn)(u.raiseId(f))(function(){return D(U)(function(d){return At(uu)(p(o.deleteFromCache({id:f})))(d)})(Zr(st(Qt(s))(da(mt)(A(s))(z(Ar)([_(Y(G))(fg(o)({id:f,parent:u.parent,scope:u.scope,tag:t})),ig(o)(f)(r)])(rr([])(function(d){return[_(Y(G))(cg(o)({id:f,parent:d,pos:u.pos}))]})(u.parent))))(lg({parent:new h(f),scope:u.scope,raiseId:function(d){return _(s)(void 0)},pos:L.value})(o)(e)))(p))})})})}};return n}}};var zv=function(){return function(t){return function(r){return Mv()(G)(qv())({fromEltO1:Sn(),fromEltO2:Sn(),toElt:Sn(),wrapElt:function(){var e=w("div")(C(A(s)));return function(n){return S.create(e(n))}}(),giveNewParent:function(e){return function(n){return function(u){return Pr()(e).giveNewParent(n)}}},deleteFromCache:function(){var e=Pr();return function(n){return function(u){return u.deleteFromCache}(e(n))}}()})(t)(Oe(ve)(D(Ia)(function(e){return e(void 0)}))(Sn()(r)))}}};var Nr=function(){function t(){}return t.value=new t,t}();var qr={attr:function(t){return function(r){return i({key:"href",value:E(r)})}}};var br=function(){function t(){}return t.value=new t,t}();var Ba={attr:function(t){return function(r){return i({key:"click",value:Z(T(B(R)(r)(!0)))})}}};var Er={attr:function(t){return function(r){return i({key:"click",value:Z(r)})}}};var be=function(){function t(){}return t.value=new t,t}();var Ua={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Vv={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Jv={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var gl={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var sf={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Gv={attr:function(t){return function(r){return i({key:"style",value:E(r)})}}};var Ro=function(t){return function(r){return new S(w("a")(t)(M(r)))}};var pn=function(t){return function(r){return new S(w("div")(t)(M(r)))}},ar=pn(C(A(s)));var Zn=function(t){return function(r){return new S(w("span")(t)(M(r)))}},Cl=Zn(C(A(s)));var na=function(){function t(){}return t.value=new t,t}();var Xv={attr:function(t){return function(r){return i({key:"type",value:E(r)})}}};var mf={attr:function(t){return function(r){return i({key:"type",value:E(r)})}}};var he=function(t){return function(r){return new S(w("button")(t)(M(r)))}},Tl=he(C(A(s)));var Kv=function(t){return function(r){return new S(w("code")(t)(M(r)))}},wr=Kv(C(A(s)));var Qv=function(t){return function(r){return new S(w("i")(t)(M(r)))}},Sl=Qv(C(A(s)));var iu=function(t){return function(r){return new S(w("input")(t)(M(r)))}};var Yv=function(t){return function(r){return new S(w("li")(t)(M(r)))}},El=Yv(C(A(s)));var tm=function(t){return function(r){return new S(w("pre")(t)(M(r)))}},Ir=tm(C(A(s)));var rm=function(t){return function(r){return new S(w("ul")(t)(M(r)))}},Fl=rm(C(A(s)));var bf=function(){function t(){}return t.value=new t,t}(),Wa=function(){function t(){}return t.value=new t,t}(),Za=function(){function t(){}return t.value=new t,t}(),qa=function(){function t(){}return t.value=new t,t}(),za=function(){function t(){}return t.value=new t,t}(),Va=function(){function t(){}return t.value=new t,t}(),Ja=function(){function t(){}return t.value=new t,t}(),Ga=function(){function t(){}return t.value=new t,t}(),ja=function(){function t(){}return t.value=new t,t}(),Xa=function(){function t(){}return t.value=new t,t}(),em=function(t){return t==="Intro"?_(Xr)(bf.value):t==="HelloWorld"?_(Xr)(Wa.value):t==="SimpleComponent"?_(Xr)(Za.value):t==="PURSX1"?_(Xr)(qa.value):t==="PURSX2"?_(Xr)(za.value):t==="Events"?_(Xr)(Va.value):t==="Effects"?_(Xr)(Ja.value):t==="Events2"?_(Xr)(Ga.value):t==="Portals"?_(Xr)(ja.value):t==="SSR"?_(Xr)(Xa.value):C(S_)};function $l(){window.scrollTo(0,0)}var pe=$l;var mg=function(t){return t};var Br={pursxToElement:function(t){return function(r){return function(e){return{cache:Fu,element:function(n){return function(u){return C(A(s))}}}}}}},xl=function(t){return t.pursxToElement},re=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(o){var p=xl(t)(n)(j.value)(o);return{cache:La(Bn(r)(j.value))(!0)(p.cache),element:function(f){return function(d){return st(Qt(s))(D(ur)(Oe(ve)(hi)(function(m){if(m.value instanceof yo)return d.setProp({id:Bn(r)(j.value)+("@!%"+n),key:m.key,value:m.value.value0});if(m.value instanceof go)return d.setCb({id:Bn(r)(j.value)+("@!%"+n),key:m.key,value:m.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4191, column 38 - line 4201, column 24): "+[m.value.constructor.name])}))(ol(e)()(j.value)(o)))(p.element(f)(d))}}}}}}}}}}};var pr=mg,Ml=function(t){return function(r){return function(){return function(){return function(e){return function(n){return function(u){return function(o){var p=function(f){return function(d){return le(function(m){return P(cn)(d.ids)(function(k){return P(cn)(d.ids)(function(y){return Xt(Kt)(cn)(f.raiseId(k))(function(){var b=xl(e)(y)(j.value)(o);return D(U)(At(uu)(m(d.deleteFromCache({id:k}))))(Zr(st(Qt(s))(_(Y(G))(d.makePursx({id:k,parent:f.parent,cache:b.cache,pxScope:y,scope:f.scope,html:Bn(t)(u),verb:Bn(r)(n)})))(b.element(f)(d)))(m))})})})})}};return new S(p)}}}}}}}},zr=function(t){return function(){return function(){return function(r){return Ml(t)({reflectType:function(){return"~"}})()()(r)(j.value)}}}},nm=function(t){return function(){return function(r){return function(e){return zr(t)()()(r)(e)({})}}}},Dg=Un(s)(G)({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Pr();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:Mt(wa)})}},toElt:function(t){return t}}),_r=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(o){var p=ol(e)()(j.value)(o),f=xl(t)(n)(j.value)(o);return{cache:La(Bn(r)(j.value))(!1)(f.cache),element:function(d){return function(m){return st(Qt(s))(Dg({parent:new h(Bn(r)(j.value)+("@!%"+n)),scope:d.scope,raiseId:function(k){return _(s)(void 0)},pos:d.pos})(m)(p))(f.element(d)(m))}}}}}}}}}}};var wl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody1
  ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  )`,Il=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Ll=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher_, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (AnEvent, bus, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 :: Domable _ _
            p0 = index (Proxy :: _ 0) v

            p1 :: Domable _ _
            p1 = index (Proxy :: _ 1) v

            ev :: Boolean -> AnEvent _ Boolean
            ev = fold (const not) event

            flips :: Boolean -> Domable _ _
            flips = switcher_ D.span (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], flips false ]
            ]
  )
`,Pl=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,Ol=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (dyn_, text_)
import Deku.Core (Nut, bussed, insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (AnEvent, bus, keepLatest, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody
  ( bussed \\pushAction actionEvent -> do
      let
        accumulateTextAndEmitOnSubmit :: AnEvent _ String
        accumulateTextAndEmitOnSubmit = compact
          ( mapAccum
              ( \\a b -> case a of
                  AddTodo -> b /\\ Just b
                  ChangeText s -> s /\\ Nothing
              )
              actionEvent
              ""
          )

        top :: Nut
        top =
          D.div_
            [ D.input
                ( oneOf
                    [ textInput $ pure (pushAction <<< ChangeText)
                    , keyUp $ pure \\evt -> do
                        when (code evt == "Enter") $ do
                          pushAction AddTodo
                    ]
                )
                []
            , D.button
                (click $ pure $ pushAction AddTodo)
                [ text_ "Add" ]
            ]
      D.div_
        [ top
        , dyn_ D.div $
            map
              ( \\txt -> keepLatest $ bus \\p' e' ->
                  ( pure $ insert_ $ D.div_
                      [ text_ txt
                      , D.button
                          (click $ pure (p' sendToTop))
                          [ text_ "Prioritize" ]
                      , D.button
                          (click $ pure (p' remove))
                          [ text_ "Delete" ]
                      ]
                  ) <|> e'
              )
              accumulateTextAndEmitOnSubmit
        ]
  )
`,Rl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.Core (vbussed)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (AnEvent, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody
  ( vbussed (Proxy :: _ UIEvents) \\push event -> do
      let
        countUp :: AnEvent _ Int
        countUp = fold
          (const (1 + _))
          (pure unit <|> event.buttonClicked)
          (-1)
      D.div_
        [ D.button
            (click_ (pure push.buttonClicked))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show <$> countUp
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,Hl=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.Core (bus)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (AnEvent, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure Initial <|> _)
      \\event -> do
        let
          split :: { left :: AnEvent _ Unit, right :: AnEvent _ String }
          split = separate $ compact $
            map
              ( case _ of
                  Loading -> Just $ Left unit
                  Result s -> Just $ Right s
                  _ -> Nothing
              )
              event
          { left: loading, right: result } = split
        D.div_
          [ D.div_
              [ D.button (pure (D.OnClick := clickCb push))
                  [ text
                      ( pure clickText
                          <|> (loading $> "Loading...")
                          <|> (result $> clickText)
                      )
                  ]
              ]
          , D.div
              ( (pure (D.Style := "display: none;")) <|>
                  ( compact
                      ( mapAccum
                          ( \\_ b -> (b && false) /\\
                              if b then Just unit else Nothing
                          )
                          result
                          true
                      ) $> (D.Style := "display: block;")
                  )
              )
              [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
          ]
  )
`,Nl=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBodyA)
import Effect (Effect)

main :: Effect Unit
main = runInBodyA
  ( [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,Bl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (pure push.buttonClicked))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (pure unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Ul=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,Wl=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function um(t){return t.target}function Vr(t){return function(){return t.preventDefault()}}function am(t,r,e){return t==null?r:e(t)}function Zl(t){return t}var Ka=rr(null)(Zl),ee=function(t){return am(t,L.value,h.create)};var kf=function(t){return ee(um(t))};var kg=function(){return j.value}(),im=function(t){return zr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(kg)({code:pr(Ir([wr([Jt(Nl)])])),result:pr(ar([Tl([Jt("I do nothing")]),Fl(D(Sr)(function(){var r=_(fo);return function(e){return El(r(Jt(e)))}}())(["A","B","C"])),ar([Ro(_(Y(G))(ct(qr)(Nr.value)("https://example.com")))([Jt("foo ")]),Sl([Jt(" bar ")]),Zn(_(Y(G))(ct(Ua)(be.value)("font-weight: 800;")))([Jt(" baz")])]),ar([ar([ar([iu(_(Y(G))(ct(mf)(na.value)("range")))([])])])])])),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(qa.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"pursx1/")])})};function fm(t,r,e,n,u){return function(o,p){var f=t.newXHR(),d=t.fixupUrl(u.url,f);if(f.open(u.method||"GET",d,!0,u.username,u.password),u.headers)try{for(var m=0,k;(k=u.headers[m])!=null;m++)f.setRequestHeader(k.field,k.value)}catch(b){o(b)}var y=function(b){return function(){o(new Error(b))}};return f.onerror=y(e),f.ontimeout=y(r),f.onload=function(){p({status:f.status,statusText:f.statusText,headers:f.getAllResponseHeaders().split(`\r
`).filter(function(b){return b.length>0}).map(function(b){var a=b.indexOf(":");return n(b.substring(0,a))(b.substring(a+2))}),body:f.response})},f.responseType=u.responseType,f.withCredentials=u.withCredentials,f.timeout=u.timeout,f.send(u.content),function(b,a,g){try{f.abort()}catch(rt){return a(rt)}return g()}}}var yf="application/json",cm="application/x-www-form-urlencoded";var pm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_m=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mm=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ql=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dm=function(t){return t instanceof ql?new h(cm):t instanceof zl?new h(yf):L.value};var gf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Cf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bm=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),dm=function(t){if(t instanceof gf)return Pr()(t.value0);if(t instanceof Cf)return Pr()(t.value0);if(t instanceof bm)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var Vl=function(t){if(t instanceof gf)return"Accept";if(t instanceof Cf)return"Content-Type";if(t instanceof bm)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var Jl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Gl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ho=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Xl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Am=function(t){if(t instanceof Jl)return"arraybuffer";if(t instanceof Gl)return"blob";if(t instanceof jl)return"document";if(t instanceof Ho||t instanceof Xl)return"text";if(t instanceof hf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},km=function(t){return t instanceof Ho?new h(yf):L.value};var ym=function(){return new Ho(xt(wt))}(),gm=function(){return new hf(xt(wt))}();var hm=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function Qa(t){return new Error(t)}function No(t){return t.message}function Bo(t){return function(){throw t}}var hn=function(t){return t.throwError};var pu=function(t){return t.catchError};var Sf=function(t){return function(r){return pu(t)(D(t.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(ft.create)(r))(function(){var e=_(t.MonadThrow0().Monad0().Applicative0());return function(n){return e(_t.create(n))}}())}};var zn=function(t){return t.state};var Ya=function(t){return function(r){return zn(t)(function(e){var n=r(e);return new q(n,n)})}};var _n=function(t){return t.liftEffect};var Kl=function(t){return t};var Ql=function(t){return t};var Mf=function(t){return function(r){return t(r)}},Sm=function(t){return{map:function(r){return Mf(D(t)(D(_a)(r)))}}};var Yl=function(t){return{Applicative0:function(){return oa(t)},Bind1:function(){return tp(t)}}},tp=function(t){return{bind:function(r){return function(e){return P(t.Bind1())(r)(rn(function(){var n=_(t.Applicative0());return function(u){return n(_t.create(u))}}())(function(n){var u=e(n);return u}))}},Apply0:function(){return Em(t)}}},Em=function(t){return{apply:nn(Yl(t)),Functor0:function(){return Sm(t.Bind1().Apply0().Functor0())}}},oa=function(t){return{pure:function(){var r=_(t.Applicative0());return function(e){return Kl(r(ft.create(e)))}}(),Apply0:function(){return Em(t)}}};var Fm=function(t){return{throwError:function(){var r=_(t.Applicative0());return function(e){return Kl(r(_t.create(e)))}}(),Monad0:function(){return Yl(t)}}};var rp=function(t){return function(r){return{alt:function(e){return function(n){return P(r.Bind1())(e)(function(u){if(u instanceof ft)return _(r.Applicative0())(new ft(u.value0));if(u instanceof _t)return P(r.Bind1())(n)(function(o){if(o instanceof ft)return _(r.Applicative0())(new ft(o.value0));if(o instanceof _t)return _(r.Applicative0())(new _t(z(t)(u.value0)(o.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[o.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[u.constructor.name])})}},Functor0:function(){return Sm(r.Bind1().Apply0().Functor0())}}}};var $m=function(){var t=Pr();return function(r){return t(Ql(r))}}();function ep(t){return JSON.stringify(t)}function np(t){return function(r){return JSON.stringify(r,null,t)}}var xm=Fu;function wm(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var Im=function(t){return wm(_t.create,ft.create,t)};var If=function(t){return function(r){return function(e){return e.replace(t,r)}}};var up=function(t){return function(r){return r.join(t)}};function Rg(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}var Om=function(r,e,n){try{return e(Rg(encodeURIComponent(n)).replace(/%20/g,"+"))}catch(u){return r(u)}};var Lf=function(){return nl(Om)(T(L.value))(h.create)}();var Bg=function(t){return t};var Rm=function(){var t=function(n){if(n.value1 instanceof L)return Lf(n.value0);if(n.value1 instanceof h)return Ut(Bu)(D(dr)(function(u){return function(o){return u+("="+o)}})(Lf(n.value0)))(Lf(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=D(dr)(up("&")),e=Ee(tu)(Xr)(t);return function(n){return r(e(Bg(n)))}}();var Wg=function(){function t(){}return t.value=new t,t}(),Jo=function(){function t(){}return t.value=new t,t}(),Zg=function(){function t(){}return t.value=new t,t}(),Hm=function(){function t(){}return t.value=new t,t}(),Nm=function(){function t(){}return t.value=new t,t}(),Bm=function(){function t(){}return t.value=new t,t}(),qg=function(){function t(){}return t.value=new t,t}(),zg=function(){function t(){}return t.value=new t,t}(),Vg=function(){function t(){}return t.value=new t,t}(),Jg=function(){function t(){}return t.value=new t,t}(),Gg=function(){function t(){}return t.value=new t,t}(),jg=function(){function t(){}return t.value=new t,t}(),Xg=function(){function t(){}return t.value=new t,t}(),Kg=function(){function t(){}return t.value=new t,t}(),Qg=function(){function t(){}return t.value=new t,t}(),Um=function(){function t(){}return t.value=new t,t}();var Yg=function(t){return t},tC={show:function(t){if(t instanceof Wg)return"OPTIONS";if(t instanceof Jo)return"GET";if(t instanceof Zg)return"HEAD";if(t instanceof Hm)return"POST";if(t instanceof Nm)return"PUT";if(t instanceof Bm)return"DELETE";if(t instanceof qg)return"TRACE";if(t instanceof zg)return"CONNECT";if(t instanceof Vg)return"PROPFIND";if(t instanceof Jg)return"PROPPATCH";if(t instanceof Gg)return"MKCOL";if(t instanceof jg)return"COPY";if(t instanceof Xg)return"MOVE";if(t instanceof Kg)return"LOCK";if(t instanceof Qg)return"UNLOCK";if(t instanceof Um)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Wm=rn(at(tC))(Yg);var zm=function(){var t=Ui(qc);return function(r){return Wi(t(r))}}();var Vm=function(t){return t.value0};var Ne=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",o="Async",p="Bind",f="Bracket",d="Fork",m="Sequential",k="Map",y="Apply",b="Alt",a="Cons",g="Resume",rt="Release",Nt="Finalizer",or="Finalized",Gt="Forked",Be="Fiber",_e="Thunk";function ot(ut,tr,$r,ir){this.tag=ut,this._1=tr,this._2=$r,this._3=ir}function ue(ut){var tr=function($r,ir,Dt){return new ot(ut,$r,ir,Dt)};return tr.tag=ut,tr}function eo(ut){return new ot(r,void 0)}function Ob(ut){try{ut()}catch(tr){setTimeout(function(){throw tr},0)}}function Rb(ut,tr,$r){try{return tr($r())}catch(ir){return ut(ir)}}function Hb(ut,tr,$r){try{return tr($r)()}catch(ir){return $r(ut(ir))(),eo}}var ni=function(){var ut=1024,tr=0,$r=0,ir=new Array(ut),Dt=!1;function K(){var er;for(Dt=!0;tr!==0;)tr--,er=ir[$r],ir[$r]=void 0,$r=($r+1)%ut,er();Dt=!1}return{isDraining:function(){return Dt},enqueue:function(er){var Rt,Fr;tr===ut&&(Fr=Dt,K(),Dt=Fr),ir[($r+tr)%ut]=er,tr++,Dt||K()}}}();function Nb(ut){var tr={},$r=0,ir=0;return{register:function(Dt){var K=$r++;Dt.onComplete({rethrow:!0,handler:function(er){return function(){ir--,delete tr[K]}}})(),tr[K]=Dt,ir++},isEmpty:function(){return ir===0},killAll:function(Dt,K){return function(){if(ir===0)return K();var er=0,Rt={};function Fr(sr){Rt[sr]=tr[sr].kill(Dt,function(Lr){return function(){delete Rt[sr],er--,ut.isLeft(Lr)&&ut.fromLeft(Lr)&&setTimeout(function(){throw ut.fromLeft(Lr)},0),er===0&&K()}})()}for(var ae in tr)tr.hasOwnProperty(ae)&&(er++,Fr(ae));return tr={},$r=0,ir=0,function(sr){return new ot(u,function(){for(var Lr in Rt)Rt.hasOwnProperty(Lr)&&Rt[Lr]()})}}}}}var fa=0,xe=1,ui=2,ai=3,oi=4,Ue=5,no=6;function Yf(ut,tr,$r){var ir=0,Dt=fa,K=$r,er=null,Rt=null,Fr=null,ae=null,sr=null,Lr=0,Pu=0,je=null,su=!0;function vu(bt){for(var dt,qt,Yt;;)switch(dt=null,qt=null,Yt=null,Dt){case ui:Dt=xe;try{K=Fr(K),ae===null?Fr=null:(Fr=ae._1,ae=ae._2)}catch(se){Dt=Ue,er=ut.left(se),K=null}break;case ai:ut.isLeft(K)?(Dt=Ue,er=K,K=null):Fr===null?Dt=Ue:(Dt=ui,K=ut.fromRight(K));break;case xe:switch(K.tag){case p:Fr&&(ae=new ot(a,Fr,ae)),Fr=K._2,Dt=xe,K=K._1;break;case r:Fr===null?(Dt=Ue,K=ut.right(K._1)):(Dt=ui,K=K._1);break;case u:Dt=ai,K=Rb(ut.left,ut.right,K._1);break;case o:Dt=oi,K=Hb(ut.left,K._1,function(se){return function(){ir===bt&&(ir++,ni.enqueue(function(){ir===bt+1&&(Dt=ai,K=se,vu(ir))}))}});return;case e:Dt=Ue,er=ut.left(K._1),K=null;break;case n:Fr===null?sr=new ot(a,K,sr,Rt):sr=new ot(a,K,new ot(a,new ot(g,Fr,ae),sr,Rt),Rt),Fr=null,ae=null,Dt=xe,K=K._1;break;case f:Lr++,Fr===null?sr=new ot(a,K,sr,Rt):sr=new ot(a,K,new ot(a,new ot(g,Fr,ae),sr,Rt),Rt),Fr=null,ae=null,Dt=xe,K=K._1;break;case d:Dt=ai,dt=Yf(ut,tr,K._2),tr&&tr.register(dt),K._1&&dt.run(),K=ut.right(dt);break;case m:Dt=xe,K=Ub(ut,tr,K._1);break}break;case Ue:if(Fr=null,ae=null,sr===null)Dt=no,K=Rt||er||K;else switch(dt=sr._3,Yt=sr._1,sr=sr._2,Yt.tag){case n:Rt&&Rt!==dt&&Lr===0?Dt=Ue:er&&(Dt=xe,K=Yt._2(ut.fromLeft(er)),er=null);break;case g:Rt&&Rt!==dt&&Lr===0||er?Dt=Ue:(Fr=Yt._1,ae=Yt._2,Dt=ui,K=ut.fromRight(K));break;case f:Lr--,er===null&&(qt=ut.fromRight(K),sr=new ot(a,new ot(rt,Yt._2,qt),sr,dt),(Rt===dt||Lr>0)&&(Dt=xe,K=Yt._3(qt)));break;case rt:sr=new ot(a,new ot(or,K,er),sr,Rt),Dt=xe,Rt&&Rt!==dt&&Lr===0?K=Yt._1.killed(ut.fromLeft(Rt))(Yt._2):er?K=Yt._1.failed(ut.fromLeft(er))(Yt._2):K=Yt._1.completed(ut.fromRight(K))(Yt._2),er=null,Lr++;break;case Nt:Lr++,sr=new ot(a,new ot(or,K,er),sr,Rt),Dt=xe,K=Yt._1;break;case or:Lr--,Dt=Ue,K=Yt._1,er=Yt._2;break}break;case no:for(var Mr in je)je.hasOwnProperty(Mr)&&(su=su&&je[Mr].rethrow,Ob(je[Mr].handler(K)));je=null,Rt&&er?setTimeout(function(){throw ut.fromLeft(er)},0):ut.isLeft(K)&&su&&setTimeout(function(){if(su)throw ut.fromLeft(K)},0);return;case fa:Dt=xe;break;case oi:return}}function xr(bt){return function(){if(Dt===no)return su=su&&bt.rethrow,bt.handler(K)(),function(){};var dt=Pu++;return je=je||{},je[dt]=bt,function(){je!==null&&delete je[dt]}}}function Ct(bt,dt){return function(){if(Dt===no)return dt(ut.right(void 0))(),function(){};var qt=xr({rethrow:!1,handler:function(){return dt(ut.right(void 0))}})();switch(Dt){case fa:Rt=ut.left(bt),Dt=no,K=Rt,vu(ir);break;case oi:Rt===null&&(Rt=ut.left(bt)),Lr===0&&(Dt===oi&&(sr=new ot(a,new ot(Nt,K(bt)),sr,Rt)),Dt=Ue,K=null,er=null,vu(++ir));break;default:Rt===null&&(Rt=ut.left(bt)),Lr===0&&(Dt=Ue,K=null,er=null)}return qt}}function Bt(bt){return function(){var dt=xr({rethrow:!1,handler:bt})();return Dt===fa&&vu(ir),dt}}return{kill:Ct,join:Bt,onComplete:xr,isSuspended:function(){return Dt===fa},run:function(){Dt===fa&&(ni.isDraining()?vu(ir):ni.enqueue(function(){vu(ir)}))}}}function Bb(ut,tr,$r,ir){var Dt=0,K={},er=0,Rt={},Fr=new Error("[ParAff] Early exit"),ae=null,sr=t;function Lr(xr,Ct,Bt){var bt=Ct,dt=null,qt=null,Yt=0,Mr={},se,uo;t:for(;;)switch(se=null,bt.tag){case Gt:if(bt._3===t&&(se=K[bt._1],Mr[Yt++]=se.kill(xr,function(Wb){return function(){Yt--,Yt===0&&Bt(Wb)()}})),dt===null)break t;bt=dt._2,qt===null?dt=null:(dt=qt._1,qt=qt._2);break;case k:bt=bt._2;break;case y:case b:dt&&(qt=new ot(a,dt,qt)),dt=bt,bt=bt._1;break}if(Yt===0)Bt(ut.right(void 0))();else for(uo=0,se=Yt;uo<se;uo++)Mr[uo]=Mr[uo]();return Mr}function Pu(xr,Ct,Bt){var bt,dt,qt,Yt,Mr,se;ut.isLeft(xr)?(bt=xr,dt=null):(dt=xr,bt=null);t:for(;;){if(qt=null,Yt=null,Mr=null,se=null,ae!==null)return;if(Ct===null){ir(bt||dt)();return}if(Ct._3!==t)return;switch(Ct.tag){case k:bt===null?(Ct._3=ut.right(Ct._1(ut.fromRight(dt))),dt=Ct._3):Ct._3=bt;break;case y:if(qt=Ct._1._3,Yt=Ct._2._3,bt){if(Ct._3=bt,Mr=!0,se=er++,Rt[se]=Lr(Fr,bt===qt?Ct._2:Ct._1,function(){return function(){delete Rt[se],Mr?Mr=!1:Bt===null?Pu(bt,null,null):Pu(bt,Bt._1,Bt._2)}}),Mr){Mr=!1;return}}else{if(qt===t||Yt===t)return;dt=ut.right(ut.fromRight(qt)(ut.fromRight(Yt))),Ct._3=dt}break;case b:if(qt=Ct._1._3,Yt=Ct._2._3,qt===t&&ut.isLeft(Yt)||Yt===t&&ut.isLeft(qt))return;if(qt!==t&&ut.isLeft(qt)&&Yt!==t&&ut.isLeft(Yt))bt=dt===qt?Yt:qt,dt=null,Ct._3=bt;else if(Ct._3=dt,Mr=!0,se=er++,Rt[se]=Lr(Fr,dt===qt?Ct._2:Ct._1,function(){return function(){delete Rt[se],Mr?Mr=!1:Bt===null?Pu(dt,null,null):Pu(dt,Bt._1,Bt._2)}}),Mr){Mr=!1;return}break}Bt===null?Ct=null:(Ct=Bt._1,Bt=Bt._2)}}function je(xr){return function(Ct){return function(){delete K[xr._1],xr._3=Ct,Pu(Ct,xr._2._1,xr._2._2)}}}function su(){var xr=xe,Ct=$r,Bt=null,bt=null,dt,qt;t:for(;;)switch(dt=null,qt=null,xr){case xe:switch(Ct.tag){case k:Bt&&(bt=new ot(a,Bt,bt)),Bt=new ot(k,Ct._1,t,t),Ct=Ct._2;break;case y:Bt&&(bt=new ot(a,Bt,bt)),Bt=new ot(y,t,Ct._2,t),Ct=Ct._1;break;case b:Bt&&(bt=new ot(a,Bt,bt)),Bt=new ot(b,t,Ct._2,t),Ct=Ct._1;break;default:qt=Dt++,xr=Ue,dt=Ct,Ct=new ot(Gt,qt,new ot(a,Bt,bt),t),dt=Yf(ut,tr,dt),dt.onComplete({rethrow:!1,handler:je(Ct)})(),K[qt]=dt,tr&&tr.register(dt)}break;case Ue:if(Bt===null)break t;Bt._1===t?(Bt._1=Ct,xr=xe,Ct=Bt._2,Bt._2=t):(Bt._2=Ct,Ct=Bt,bt===null?Bt=null:(Bt=bt._1,bt=bt._2))}for(sr=Ct,qt=0;qt<Dt;qt++)K[qt].run()}function vu(xr,Ct){ae=ut.left(xr);var Bt;for(var bt in Rt)if(Rt.hasOwnProperty(bt)){Bt=Rt[bt];for(bt in Bt)Bt.hasOwnProperty(bt)&&Bt[bt]()}Rt=null;var dt=Lr(xr,sr,Ct);return function(qt){return new ot(o,function(Yt){return function(){for(var Mr in dt)dt.hasOwnProperty(Mr)&&dt[Mr]();return eo}})}}return su(),function(xr){return new ot(o,function(Ct){return function(){return vu(xr,Ct)}})}}function Ub(ut,tr,$r){return new ot(o,function(ir){return function(){return Bb(ut,tr,$r,ir)}})}return ot.EMPTY=t,ot.Pure=ue(r),ot.Throw=ue(e),ot.Catch=ue(n),ot.Sync=ue(u),ot.Async=ue(o),ot.Bind=ue(p),ot.Bracket=ue(f),ot.Fork=ue(d),ot.Seq=ue(m),ot.ParMap=ue(k),ot.ParApply=ue(y),ot.ParAlt=ue(b),ot.Fiber=Yf,ot.Supervisor=Nb,ot.Scheduler=ni,ot.nonCanceler=eo,ot}(),Gm=Ne.Pure,jm=Ne.Throw;function Xm(t){return function(r){return Ne.Catch(t,r)}}function Km(t){return function(r){return r.tag===Ne.Pure.tag?Ne.Pure(t(r._1)):Ne.Bind(r,function(e){return Ne.Pure(t(e))})}}function Qm(t){return function(r){return Ne.Bind(t,r)}}var Ym=Ne.Sync;var Go=Ne.Async;function tD(t,r){return function(){return Ne.Fiber(t,null,r)}}var rC=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return Ne.Async(function(u){return function(){var o=t(n,u(e()));return function(){return Ne.Sync(function(){return e(r(n,o))})}}})}}(),eC=Ne.Seq;var bC=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var fp={map:Km};var dC=function(){var t=function(n){if(n instanceof ft)return n.value0;if(n instanceof _t)return An("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof _t)return n.value0;if(n instanceof ft)return An("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof _t)return!0;if(n instanceof ft)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:_t.create,right:ft.create}}(),AC=function(t){return tD(dC,t)},kC=function(t){return function(){var e=AC(t)();return e.run(),e}},cp=function(){var t=it(R);return function(r){return t(kC(r))}}();var lp={Applicative0:function(){return Pf},Bind1:function(){return pp}},pp={bind:Qm,Apply0:function(){return aD(0)}},Pf={pure:Gm,Apply0:function(){return aD(0)}},aD=bC("applyAff","Effect.Aff",function(){return{apply:nn(lp),Functor0:function(){return fp}}});var Of={liftEffect:Ym,Monad0:function(){return lp}};var yC={throwError:jm,Monad0:function(){return lp}},oD={catchError:Xm,MonadThrow0:function(){return yC}};var iD=T(_(Pf)(void 0));var _D=function(t){return Go(function(r){return function(){var n=t(function(u){return r(_t.create(u))()},function(u){return r(ft.create(u))()});return function(u){return Go(function(o){return function(){return n(u,function(f){return o(_t.create(f))()},function(f){return o(ft.create(f))()}),iD}})}}})};function Hf(t){return Object.prototype.toString.call(t).slice(8,-1)}var sD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var vD=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},$e=function(t){return t};var Nf=isFinite;var vp=Math.floor;var jo=function(t){return function(r){return t%r}};var Bf=function(){return vD(h.create)(L.value)}(),VC=function(t){if(!Nf(t))return 0;if(t>=$e(Ye(Nu)))return Ye(Nu);if(t<=$e(sn(Nu)))return sn(Nu);if(de)return ke(0)(Bf(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var Dp=function(t){return VC(vp(t))};var bp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),CD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),YC=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),th=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),wu=J,rh=J;var Wf=function(t){if(t instanceof bp)return t.value0;if(t instanceof YC)return"Error at array index "+(at(tn)(t.value0)+(": "+Wf(t.value1)));if(t instanceof th)return"Error at property "+(at(Se)(t.value0)+(": "+Wf(t.value1)));if(t instanceof CD)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var dp=function(t){var r=hn(Fm(t));return function(e){return r(zm(e))}};var Iu=function(t){return function(r){return function(e){if(Hf(e)===r)return _(oa(t))(rh(e));if(de)return dp(t)(new CD(r,Hf(e)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[r.constructor.name,e.constructor.name])}}};var Ap=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kp=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),yp=function(){function t(){}return t.value=new t,t}(),gp=function(){function t(){}return t.value=new t,t}(),Cp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hD=function(t){return function(r){var e=function(k){return k===""?_(oa(yr))(xm):rn(function(){var y=dp(yr);return function(b){return y(bp.create(b))}}())(_(oa(yr)))(Im(k))},n=function(){if(r.responseFormat instanceof Jl)return Iu(yr)("ArrayBuffer");if(r.responseFormat instanceof Gl)return Iu(yr)("Blob");if(r.responseFormat instanceof jl)return function(k){return st(rp(Zc)(yr))(Iu(yr)("Document")(k))(st(rp(Zc)(yr))(Iu(yr)("XMLDocument")(k))(Iu(yr)("HTMLDocument")(k)))};if(r.responseFormat instanceof Ho)return _i(tp(yr))(function(k){return r.responseFormat.value0(e(k))})(Iu(yr)("String"));if(r.responseFormat instanceof Xl)return Iu(yr)("String");if(r.responseFormat instanceof hf)return T(r.responseFormat.value0(_(oa(yr))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(k){if(k instanceof pm)return new ft(k.value0(wu));if(k instanceof _m)return new ft(wu(k.value0));if(k instanceof sm)return new ft(wu(k.value0));if(k instanceof vm)return new ft(wu(k.value0));if(k instanceof mm)return new ft(wu(k.value0));if(k instanceof ql)return oc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(D(dr)(wu)(Rm(k.value0)));if(k instanceof zl)return new ft(wu(ep(k.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[k.constructor.name])},o=function(k){return function(y){return k instanceof h&&!bu(mt)(ye)(tc(Mt(mu))(Vl)(k.value0))(y)?Ri(y)(k.value0):y}},p=function(k){return o(D(dr)(Cf.create)(mn(Le)(Dm)(k)))(o(D(dr)(gf.create)(km(r.responseFormat)))(r.headers))},f=function(k){return{method:Wm(r.method),url:r.url,headers:D(Sr)(function(y){return{field:Vl(y),value:dm(y)}})(p(r.content)),content:k,responseType:Am(r.responseFormat),username:Ka(r.username),password:Ka(r.password),withCredentials:r.withCredentials,timeout:ke(0)(D(dr)(function(y){return y})(r.timeout))}},d=function(k){return Xe(fp)(Sf(oD)(_D(fm(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",hm.create,f(k)))))(function(y){if(y instanceof ft){var b=$m(n(y.value0.body));if(b instanceof _t)return new _t(new kp(Vm(b.value0),y.value0));if(b instanceof ft)return new ft({body:b.value0,headers:y.value0.headers,status:y.value0.status,statusText:y.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[b.constructor.name])}if(y instanceof _t)return new _t(function(){var a=No(y.value0),g=a==="AffjaxTimeoutErrorMessageIdent";if(g)return yp.value;var rt=a==="AffjaxRequestFailedMessageIdent";return rt?gp.value:new Cp(y.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[y.constructor.name])})};if(r.content instanceof L)return d(Ka(L.value));if(r.content instanceof h){var m=u(r.content.value0);if(m instanceof ft)return d(Ka(new h(m.value0)));if(m instanceof _t)return _(Pf)(new _t(new Ap(m.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[m.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},hp=function(t){if(t instanceof Ap)return"There was a problem with the request content: "+t.value0;if(t instanceof kp)return"There was a problem with the response body: "+Wf(t.value0);if(t instanceof yp)return"There was a problem making the request: timeout";if(t instanceof gp)return"There was a problem making the request: request failed";if(t instanceof Cp)return"There was a problem making the request: "+No(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Lu=function(){return{method:new _t(Jo.value),url:"/",headers:[],content:L.value,username:L.value,password:L.value,withCredentials:!1,responseFormat:gm,timeout:L.value}}();var Tp={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var SD=hD(Tp);var FD=function(){function t(){}return t.value=new t,t}(),Sp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ah=function(){return j.value}(),ED="Click to get some random user data.",oh=function(t){return Dr(T(function(){return t(FD.value)(),cp(P(pp)(SD({method:new _t(Jo.value),url:"https://randomuser.me/api/",headers:Lu.headers,content:Lu.content,username:Lu.username,password:Lu.password,withCredentials:Lu.withCredentials,responseFormat:ym,timeout:Lu.timeout}))(function(e){if(e instanceof _t)return _n(Of)(t(new Sp("GET /api response failed to decode: "+hp(e.value0))));if(e instanceof ft)return _n(Of)(t(new Sp(np(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},$D=function(t){return zr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(ah)({code:pr(Ir([wr([Jt(Hl)])])),result:pr(Ha(function(r){return function(e){var n=Fe(kn(s))(function(p){return p instanceof FD?new h(new _t(void 0)):p instanceof Sp?new h(new ft(p.value0)):L.value})(e),u=Fe(kn(s))(function(p){return p instanceof ft?new h(p.value0):L.value})(n),o=Fe(kn(s))(function(p){return p instanceof _t?new h(void 0):L.value})(n);return ar([ar([he(_(Y(G))(ct(Er)(br.value)(oh(r))))([Je(st(Qt(s))(_(Y(G))(ED))(st(Qt(s))(B(ur)(o)("Loading..."))(B(ur)(u)(ED))))])]),pn(st(Qt(s))(_(Y(G))(ct(gl)(be.value)("display: none;")))(B(ur)(Ku(wo(s))(Yu(Ce(G))(function(p){return function(f){return new q(f&&!1,function(){return f?new h(void 0):L.value}())}})(u)(!0)))(ct(gl)(be.value)("display: block;"))))([Ir([wr([Je(st(Qt(s))(_(Y(G))(""))(u))])])])])}})),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(za.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"pursx2/")])})};var Ep=function(){function t(){}return t.value=new t,t}(),xD={attr:function(t){return function(r){return i({key:"controls",value:E(r)})}}};var Ko=function(){function t(){}return t.value=new t,t}();var Zf={attr:function(t){return function(r){return i({key:"input",value:Z(r)})}}};var qf=function(){function t(){}return t.value=new t,t}();var Fp={attr:function(t){return function(r){return i({key:"keyup",value:Z(r)})}}};var $p=function(){function t(){}return t.value=new t,t}();var ID={attr:function(t){return function(r){return i({key:"src",value:E(r)})}}};var xp=function(){function t(){}return t.value=new t,t}(),LD={attr:function(t){return function(r){return i({key:"width",value:E(r)})}}};var PD=function(t){return function(r){return new S(w("p")(t)(M(r)))}},Mp=PD(C(A(s)));var wp=function(t){return function(r){return new S(w("source")(t)(M(r)))}};var Ip=function(t){return function(r){return new S(w("video")(t)(M(r)))}};function zf(t){return function(){return t.value}}function Lp(t){return function(){return t.valueAsNumber}}function RD(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var o=n;o!=null;){var p=Object.getPrototypeOf(o),f=p.constructor.name;if(f===e)return r(n);if(f==="Object")return t;o=p}return t}var et=function(t){return function(r){return RD(L.value,h.create,t,r)}};var Vf=et("HTMLInputElement");function Pp(t){return t.code}var Op=et("KeyboardEvent");var Jf=function(){var t=st(Qt(s))(_(Y(G))(ct(mf)(na.value)("range"))),r=D(ur)(function(e){return ct(Zf)(Ko.value)(Dr(function(n){return Gr(me)(jr)(P(Le)(kf(n))(Vf))(si(Au)(Lp)(e))}))});return function(e){return t(r(e))}}();var Gf=function(t){return function(r){return function(e){return D(t)(function(){var n=ct(e)(br.value);return function(u){return n(function(o){return o(Ht(r))}(u))}}())}}};var hh=function(){return j.value}(),UD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(hh)({code:pr(Ir([wr([Jt(Rl)])])),result:pr(pf()()(Pa({reflectSymbol:function(){return"buttonClicked"}})(Oa(Ra))(Pa({reflectSymbol:function(){return"sliderMoved"}})(Oa(Ra))(lf)()())()())(xa({reflectSymbol:function(){return"buttonClicked"}})()()(xa({reflectSymbol:function(){return"sliderMoved"}})()()(ef)()())()())(j.value)(function(r){return function(e){return ar([he(Gf(ur)(Zu)(Ba)(_(Y(G))(r.buttonClicked)))([Jt("Click")]),ar([Je(st(Qt(s))(_(Y(G))("Val: 0"))(D(ur)(function(){var n=z(jn)("Val: "),u=at(tn);return function(o){return n(u(o))}}())(Su(Ce(G))(T(Ur(Ze)(1)))(st(Qt(s))(_(Y(G))(void 0))(e.buttonClicked))(-1))))]),ar([iu(Jf(_(Y(G))(r.sliderMoved)))([]),ar([Je(st(Qt(s))(_(Y(G))("Val: 50.0"))(D(ur)(function(){var n=z(jn)("Val: "),u=at(_o);return function(o){return n(u(o))}}())(e.sliderMoved)))])])])}})),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Ja.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"effects/")])})};var Sh=function(){function t(){}return t.value=new t,t}(),Rp=function(){function t(){}return t.value=new t,t}(),WD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Eh=function(){return j.value}(),ZD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Eh)({code:pr(Ir([wr([Jt(Ol)])])),result:pr(Ha(function(r){return Oe(ve)(function(e){return st(Qt(s))(_(Y(G))(Sh.value))(e)})(function(e){return ar([ar([iu(gr(mt)(A(s))(_(Y(G)))([ct(Jv)(be.value)("border-style:solid;border-width: 1px;border-color: black;"),ct(Zf)(Ko.value)(Dr(function(n){return Gr(me)(jr)(P(Le)(kf(n))(Vf))(si(Au)(zf)(function(u){return r(WD.create(u))}))})),ct(Fp)(qf.value)(Dr(function(n){return Gr(me)(jr)(Op(n))(function(u){return Jn(me)(Pp(u)==="Enter")(r(Rp.value))})}))]))([]),he(st(Qt(s))(_(Y(G))(ct(sf)(be.value)("margin: 5px;")))(_(Y(G))(ct(Er)(br.value)(Dr(T(r(Rp.value)))))))([Jt("Add")])]),Na(pn)(D(ur)(function(n){return Qu(Ce(G))($u(function(u){return function(o){return st(Qt(s))(_(Y(G))(ea(ar([Zn(_(Y(G))(ct(Ua)(be.value)("margin: 5px;")))([Jt(n)]),he(st(Qt(s))(_(Y(G))(ct(sf)(be.value)("margin: 5px;")))(_(Y(G))(ct(Er)(br.value)(Dr(T(u(Zv)))))))([Jt("Prioritize")]),he(st(Qt(s))(_(Y(G))(ct(sf)(be.value)("margin: 5px;")))(_(Y(G))(ct(Er)(br.value)(Dr(T(u(yl)))))))([Jt("Delete")])]))))(o)}}))})(Fe(kn(s))(function(n){return n.value0?new h(n.value1):L.value})(Yu(Ce(G))(function(n){return function(u){return n instanceof WD?new q(n.value0,new q(!1,n.value0)):n instanceof Rp?new q(u,new q(!0,u)):new q("",new q(!1,""))}})(e)(""))))])})})),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(ja.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"portals/")])})};var $h=function(){return j.value}(),qD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))($h)({code:pr(Ir([wr([Jt(Pl)])])),result:pr(ar([Jt("Hello world")])),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Za.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"component/")])})};var Mh=function(){return j.value}(),zD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(re()(Br)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))(Mh)({next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Wa.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"hello/")])})};var Ih=function(){return j.value}(),VD=function(t){return zr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Ih)({code:pr(Ir([wr([Jt(Ll)])])),result:pr(Na(pn)($u(function(r){return Oe(ve)(st(Qt(s))(_(Y(G))(void 0)))(function(e){return _(Y(G))(ea(zv()(D(Ia)(function(n){return Ip(gr(mt)(A(s))(_(Y(G)))([ct(xD)(Ep.value)("true"),ct(LD)(xp.value)("250")]))([wp(gr(mt)(A(s))(_(Y(G)))([ct(ID)($p.value)(n),ct(Xv)(na.value)("video/mp4")]))([])])})(pl()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(pl()()("https://www.w3schools.com/jsref/movie.mp4")(Cv))))(function(n){return function(u){var o=ll()()()()()({reflectType:function(){return 1}})(j.value)(n),p=ll()()()()()({reflectType:function(){return 0}})(j.value)(n),f=Su(Ce(G))(T(en(ye)))(e),d=function(){var m=_f(Zn)(function(k){return k?p:o});return function(k){return m(f(k))}}();return ar([he(_(Y(G))(ct(Er)(br.value)(Dr(T(r(void 0))))))([Jt("Switch videos")]),ar([d(!0),d(!1)])])}})))})}))),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Xa.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"ssr/")])})};var Ph=function(){return j.value}(),Oh=function(){return j.value}(),JD=function(t){return zr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(Ph)({code:pr(Ir([wr([Jt(Il)])])),result:pr(nm({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Br)(Oh)),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Va.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"events1/")])})};var Hh=function(){return j.value}(),Nh=function(){return j.value}(),GD=function(t){return Ml({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(_r()(re()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(j.value)(Hh)({code:pr(Ir([wr([Jt(wl)])])),result:pr(Na(pn)($u(function(r){return function(e){return _(Y(G))(ea(zr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(re()(_r()(Br)({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}}))(Nh)({myli:_(Y(G))(ct(Vv)(be.value)("background-color:rgb(200,240,210);")),somethingNew:pr(he(_(Y(G))(ct(Ba)(br.value)(r(new h(void 0)))))([Je(st(Qt(s))(B(ur)(Ku(wo(s))(e))("Thanks for clicking me!"))(_(Y(G))("I was dynamically inserted")))]))})))}}))),next:gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(r){return At(mr)(At(mr)(Vr(r))(t.dpage(Ga.value)))(pe)})),ct(qr)(Nr.value)(t.slug+"events2/")])})};var jD=(t,r,e,n)=>{t(u=>n.units[u].main.appendChild(n.units[r].main))(e)},Hp=t=>()=>{t.hydrating=!0},Np=t=>()=>{t.hydrating=!1},XD=t=>r=>()=>{r.units[t.id].main.parentNode||(typeof t.pos.value0=="number"&&r.units[t.parent].main.children[t.pos.value0]?r.units[t.parent].main.insertBefore(r.units[t.id].main,r.units[t.parent].main.children[t.pos.value0]):t.parent.indexOf("@!%")!==-1?r.units[t.parent].main.parentNode.replaceChild(r.units[t.id].main,r.units[t.parent].main):r.units[t.parent].main.appendChild(r.units[t.id].main))},KD=t=>r=>e=>()=>{var n,u=r.id;e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(u),e.hydrating&&t&&r.parent.value0&&(n=document.body.querySelectorAll("[data-deku-ssr-"+u+"]").item(0))?e.units[u]={listeners:{},parent:r.parent,scope:r.scope,main:n}:e.units[u]={listeners:{},parent:r.parent,scope:r.scope,main:document.createElement(r.tag)}},QD=t=>r=>e=>n=>()=>{var u=e.id,o;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(u),n.hydrating&&t&&e.parent.value0&&(o=document.body.querySelectorAll("[data-deku-ssr-"+e.parent.value0+"]").item(0))){var p=0;if(o.childNodes.length===1)o.prepend(document.createTextNode(""));else for(var p=0;p<o.childNodes.length;p++)if(o.childNodes[p].nodeType===8&&o.childNodes[p].nodeValue===u){p=p-1;break}n.units[u]={main:o.childNodes[p],parent:e.parent,scope:e.scope}}else n.units[u]={main:document.createTextNode(""),parent:e.parent,scope:e.scope},jD(r,u,e.parent,n)};function Bp(){return{units:{},scopes:{}}}var YD=t=>r=>e=>()=>{var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+n+"]").item(0))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":e.units[n].main.setAttribute(r.key,u)},tb=t=>r=>e=>()=>{var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+n+"]").item(0))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var o=p=>u(p)();e.units[n].main.addEventListener(r.key,o),e.units[n].listeners[r.key]=o}},rb=t=>r=>()=>{var e=t.id;r.units[e].main.nodeValue=t.text},eb=t=>r=>e=>n=>()=>{var u,o,p=e.id,f=e.html,d=e.verb,m=e.cache,k=e.parent,y=e.scope,b=e.pxScope;if(n.hydrating&&t&&e.parent.value0&&(u=document.body.querySelectorAll("[data-deku-ssr-"+p+"]").item(0)))n.units[p]={listeners:{},scope:y,parent:k,main:u};else{let g=Object.entries(m);for(var a=0;a<g.length;a++){let rt=g[a][0];g[a][1]===!0?f=f.replace(d+rt+d,'data-deku-attr-internal="'+rt+'"'):f=f.replace(d+rt+d,'<span style="display:contents;" data-deku-elt-internal="'+rt+'"></span>')}o=document.createElement("div"),o.innerHTML=f.trim(),n.units[p]={listeners:{},scope:y,parent:k,main:o.firstChild}}n.scopes[y]||(n.scopes[y]=[]),n.scopes[y].push(p),o||(o=u),o.querySelectorAll("[data-deku-attr-internal]").forEach(function(g){var rt=g.getAttribute("data-deku-attr-internal");let Nt=rt+"@!%"+b;n.units[Nt]={listeners:{},main:g,scope:y},n.scopes[y].push(Nt)}),o.querySelectorAll("[data-deku-elt-internal]").forEach(function(g){var rt=g.getAttribute("data-deku-elt-internal");let Nt=rt+"@!%"+b;n.units[rt+"@!%"+b]={listeners:{},main:g,scope:y},n.scopes[y].push(Nt)}),u||jD(r,p,k,n)},nb=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root}},ub=t=>r=>()=>{var e=t.id,n=t.parent;r.units[e].containingScope=t.scope,r.units[n].main.prepend(r.units[e].main)},ab=t=>r=>()=>{var e=t.id;r.units[e].noop||r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope)||r.units[e].main.remove()},ob=t=>r=>()=>{delete r.units[t.id]},ib=t=>r=>()=>{var e=t.id,n=t.pos,u=r.units[e].main.parentNode;u.insertBefore(r.units[e].main,u.children.length<=n?u.children[u.children.length-1]:n<0?u.children[0]:u.children[n])};var fb=function(t){return t};var zh=1,Up=2147483647,Vh=function(){return Up-1|0}(),Wp=function(t){var r=function(e){return function(n){return function(u){var o=n-e|0,p=so(vi)(u)(o),f=p<e;return f?p+n|0:p}}};return r(zh)(Vh)(t)};var Jh=0,Gh=48271,cb=function(t){return function(r){return Ie()(Bf(jo($e(Gh)*$e(r)+$e(t))($e(Up))))}},lb=cb(Jh);var rT=function(){function t(p){this.fn=p}var r={},e=function(p,f){this.head=p,this.tail=f};function n(p){return new e(p,r)}function u(p){return function(f){return new e(p,f)}}function o(p){for(var f=[],d=p;d!==r;)f.push(d.head),d=d.tail;return f}return function(p){return function(f){return function(d){var m=function(y,b){return p(f(u)(d(y)))(b)},k=function(y,b,a){if(b===0)return y;var g=a[b-1];return new t(function(){var rt=k(m(g,y),b-1,a);return rt})};return function(y){for(var b=f(n)(d(y[y.length-1])),a=k(b,y.length-1,y);a instanceof t;)a=a.fn();return f(o)(a)}}}}}();var ro=function(t){return{map:function(r){return function(e){return function(n){return D(t)(function(u){return new q(r(u.value0),u.value1)})(e(n))}}}}};var zp=function(t){return{Applicative0:function(){return ia(t)},Bind1:function(){return jf(t)}}},jf=function(t){return{bind:function(r){return function(e){return function(n){return P(t.Bind1())(r(n))(function(u){var o=e(u.value0);return o(u.value1)})}}},Apply0:function(){return Xf(t)}}},Xf=function(t){return{apply:nn(zp(t)),Functor0:function(){return ro(t.Bind1().Apply0().Functor0())}}},ia=function(t){return{pure:function(r){return function(e){return _(t.Applicative0())(new q(r,e))}},Apply0:function(){return Xf(t)}}};var Qo=function(t){return{state:function(r){var e=_(t.Applicative0());return function(n){return e(r(n))}},Monad0:function(){return zp(t)}}};var db=function(t){return function(r){var e=t(r);return e.value1}},Ab=function(t){return function(r){var e=t(r);return e.value0}};var bT=function(t){return t};var dT=function(){var t=function(r){return new q(fb(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=lb(r.newSeed),e}())};return zn(Qo(yr))(t)}();var Yo=ro($n);var Jp=function(t){return Ab(bT(t))};var gb=Xf(yr),yb=function(t){return function(r){var e=$e(r),n=$e(t),u=function(f){return n+jo(f)(e-n+1)},o=D(Yo)($e)(dT),p=Ut(gb)(D(Yo)(Ur(lo))(o))(D(Yo)(Qe(lo)(2))(o));return D(Yo)(function(f){return Dp(u(f))})(p)}},Cb=function(t){return function(r){var e=t<=r;return e?yb(t)(r):yb(r)(t)}};var Gp=function(t){return t.arbitrary};var jp=function(){return{arbitrary:Cb(-1e6)(1e6)}}();var ti=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ri=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Kf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ei=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kT=function(t){return function(r){return it(nr)(Wr(function(e){return z(Ar)(e)([new ei(t)])})(r))}},yT=function(t){return function(r){return it(nr)(Wr(function(e){return z(Ar)(e)([new Qf(t)])})(r))}},gT=function(t){return function(r){return it(nr)(Wr(function(e){return z(Ar)(e)([new ri(t)])})(r))}},CT=function(t){return function(r){return it(nr)(Wr(function(e){return z(Ar)(e)([new Kf(t)])})(r))}},hT=function(t){return function(r){return it(nr)(Wr(function(e){return z(Ar)(e)([new ti(t)])})(r))}},Tb=function(t){return{ids:ra(function(){var e=lr(t)(),n=at(tn)(Jp(Gp(jp))({newSeed:Wp(e),size:5}));return it(nr)(Wr(Ur(Ze)(1))(t))(),n}),makeElement:hT,attributeParent:function(r){return function(e){return _(De)(void 0)}},makeRoot:function(r){return function(e){return _(De)(void 0)}},makeText:gT,makePursx:CT,setProp:yT,setCb:function(r){return function(e){return _(De)(void 0)}},setText:kT,sendToPos:function(r){return function(e){return _(De)(void 0)}},deleteFromCache:function(r){return function(e){return _(De)(void 0)}},giveNewParent:function(r){return function(e){return _(De)(void 0)}},disconnectElement:function(r){return function(e){return _(De)(void 0)}}}},Sb=function(t){return{ids:Yi(qu)(function(){var e=xn(t)(),n=at(tn)(Jp(Gp(jp))({newSeed:Wp(e),size:5}));return it(R)(kc(Ur(Ze)(1))(t))(),n}),makeElement:KD(!0),attributeParent:XD,makeRoot:nb,makeText:QD(!0)(rr(void 0)),makePursx:eb(!0)(rr(void 0)),setProp:YD(!0),setCb:tb(!0),setText:rb,sendToPos:ib,deleteFromCache:ob,giveNewParent:ub,disconnectElement:ab}};var Xp=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),Kp=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let o=r,p=Object.entries(n);for(var f=0;f<p.length;f++){let y=p[f][0];p[f][1]===!0?o=o.replace(u+y+u,'data-deku-attr-internal="'+y+'" data-deku-ssr-'+y+"@!%"+e+'="true"'):o=o.replace(u+y+u,'<span style="display:contents;" data-deku-elt-internal="'+y+'" data-deku-ssr-'+y+"@!%"+e+'="true"></span>')}let d=o.indexOf(">"),m=o.indexOf("/>"),k=m==d-1?m:d;return o.slice(0,k)+" data-deku-ssr-"+t+'="true" '+o.slice(k)};var Fb=function(t){return function(r){var e=function(y){return function(b){return it(ro($n))(Ya(Qo(yr))(function(a){var g={};for(var rt in a)({}).hasOwnProperty.call(a,rt)&&(g[rt]=a[rt]);return g.idToActions=Nn(ie)(function(Nt){if(Nt instanceof h)return new h(z(Ar)(Nt.value0)([b]));if(Nt instanceof L)return new h([b]);throw new Error("Failed pattern match at Deku.SSR (line 46, column 17 - line 48, column 45): "+[Nt.constructor.name])})(y)(a.idToActions),g}))}},n=function(y){return function(b){return function(a){return Xt(Kt)(jf(yr))(it(ro($n))(Ya(Qo(yr))(function(g){var rt={};for(var Nt in g)({}).hasOwnProperty.call(g,Nt)&&(rt[Nt]=g[Nt]);return rt.parentToChild=Nn(ie)(function(or){if(or instanceof h)return new h(z(Ar)(or.value0)([b]));if(or instanceof L)return new h([b]);throw new Error("Failed pattern match at Deku.SSR (line 33, column 17 - line 35, column 41): "+[or.constructor.name])})(y)(g.parentToChild),rt})))(function(){return e(b)(a)})}}},u=db(Ee(tu)(ia(yr))(function(y){if(y instanceof ti)return Gr(ia(yr))(jr)(y.value0.parent)(function(b){return n(b)(y.value0.id)(y)});if(y instanceof ri)return Gr(ia(yr))(jr)(y.value0.parent)(function(b){return n(b)(y.value0.id)(y)});if(y instanceof Kf)return Gr(ia(yr))(jr)(y.value0.parent)(function(b){return n(b)(y.value0.id)(y)});if(y instanceof Qf||y instanceof ei)return e(y.value0.id)(y);throw new Error("Failed pattern match at Deku.SSR (line 56, column 17 - line 63, column 43): "+[y.constructor.name])})(r))({parentToChild:Hn,idToActions:Hn}),o=function(y){return pa(Nc(function(b){return b instanceof ti||b instanceof ri})(y))},p=function(y){return ke("")(Hi(function(b){return b instanceof ti?new h(b.value0.tag):L.value})(y))},f=function(y){return Kn(mt)(qu)(" ")(Fe(ev)(function(b){return b instanceof Qf?new h(b.value0.key+('="'+(b.value0.value+'"'))):L.value})(y))},d=function(y){return rr("")(function(b){var a=function(Nt){return ke("")(Hi(function(or){return or instanceof ei?new h(Xp(or.value0.text)+("<!--"+(y+"-->"))):L.value})(b))},g=function(Nt){var or=p(b),Gt=f(b);return"<"+(or+(" "+(Gt+(" data-deku-ssr-"+(y+('="true">'+(m(y)+("</"+(or+">")))))))))},rt=ju(b)(0);return rt instanceof h&&rt.value0 instanceof ei?a(void 0):rt instanceof h&&rt.value0 instanceof ri?a(void 0):rt instanceof h&&rt.value0 instanceof Kf?Kp(rt.value0.value0):g(void 0)})(Ea(ie)(y)(u.idToActions))},m=function(y){var b=ke([])(Ea(ie)(y)(u.parentToChild));return Or(mt)(qu)(d)(b)},k=function(y){return on(te)(function(b){return function(a){return function(g){var rt=o(g);if(rt)return a;if(!rt)return If("data-deku-ssr-"+b)(f(g)+(" data-deku-ssr-"+b))(a);throw new Error("Failed pattern match at Deku.SSR (line 83, column 19 - line 87, column 14): "+[rt.constructor.name])}}})(m(y))(u.idToActions)};return"<"+(t+(' data-deku-ssr-deku-root="true">'+(k("deku-root")+("</"+(t+">")))))}};var $b=Un(s)(G)({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Pr();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:Mt(wa)})}},toElt:function(t){return t}}),fS=function(t){return function(){var e=Bp(),n=Xe(R)(ku(0))(Sb)();Hp(e)();var u=Zr(vv($b({parent:new h("deku-root"),scope:new Eu("rootScope"),raiseId:function(o){return _(s)(void 0)},pos:L.value})(n)(t)))(function(o){return o(e)})();return Np(e)(),u}},xb=function(t){return it(R)(fS(t))},cS=function(t){return function(r){return function(e){return D(nr)(function(){var n=Fb(t);return function(u){return function(o){return r.head+o}(function(o){return o+r.tail}(n(u)))}}())(Q(fs)(function(){var u=Cr(0)(),o=Cr([])(),p=Tb(u);return it(nr)(Zr(sv($b({parent:new h("deku-root"),scope:new Eu("rootScope"),raiseId:function(f){return _(s)(void 0)},pos:L.value})(p)(e)))(function(f){return f(o)}))(),lr(o)()}))}}},Mb=cS("body");var lS=function(){return j.value}(),Ib=function(){return pf()()(Pa({reflectSymbol:function(){return"buttonClicked"}})(Oa(Ra))(Pa({reflectSymbol:function(){return"sliderMoved"}})(Oa(Ra))(lf)()())()())(xa({reflectSymbol:function(){return"buttonClicked"}})()()(xa({reflectSymbol:function(){return"sliderMoved"}})()()(ef)()())()())(j.value)(function(t){return function(r){return ar([Mp([Jt(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),he(Gf(ur)(Zu)(Ba)(_(Y(G))(t.buttonClicked)))([Jt("Click")]),ar([Je(st(Qt(s))(_(Y(G))("Val: 0"))(D(ur)(function(){var e=z(jn)("Val: "),n=at(tn);return function(u){return e(n(u))}}())(Su(Ce(G))(T(Ur(Ze)(1)))(st(Qt(s))(_(Y(G))(void 0))(r.buttonClicked))(-1))))]),ar([iu(Jf(_(Y(G))(t.sliderMoved)))([]),ar([Je(st(Qt(s))(_(Y(G))("Val: 50"))(D(ur)(function(){var e=z(jn)("Val: "),n=at(_o);return function(u){return e(n(u))}}())(r.sliderMoved)))])])])}})}(),Lb=function(t){return zr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(_r()(_r()(_r()(_r()(_r()(Br)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}}))(lS)({code2:pr(Ir([wr([Jt(Wl)])])),code1:pr(Ir([wr([Jt(Ul)])])),code0:pr(Ir([wr([Jt(Bl)])])),result:pr(Ib),codegen:pr(Ir([wr([Je(le(function(r){return At(uu)(P(cn)(ra(Mb({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Ib)))(r))(_(s)(_(s)(void 0)))}))])]))})};var Pb=function(t){var r=function(n){if(n instanceof bf)return zD;if(n instanceof Wa)return qD;if(n instanceof Za)return im;if(n instanceof qa)return JD;if(n instanceof Va)return UD;if(n instanceof Ja)return $D;if(n instanceof za)return GD;if(n instanceof Ga)return ZD;if(n instanceof ja)return VD;if(n instanceof Xa)return Lb;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[n.constructor.name])},e=function(n){return function(u){return r(u)({dpage:n,slug:t.slug})}};return Ha(function(n){return Oe(ve)(function(u){return st(Qt(s))(_(Y(G))(t.startsWith))(u)})(function(u){return ar([ar(D(Sr)(function(o){return Cl([Ro(gr(mt)(A(s))(_(Y(G)))([ct(Er)(br.value)(Dr(function(p){return At(mr)(Vr(p))(n(o.value0))})),ct(Gv)(be.value)("cursor:pointer;"),ct(qr)(Nr.value)(t.slug+o.value1.value1.value0)]))([Jt(o.value1.value0)]),Zn(_(Y(G))(ct(Ua)(be.value)(function(){return o.value1.value1.value1?"":"display:none;"}())))([Jt(" | ")])])})([new q(bf.value,new q("Home",new q("",!0))),new q(Wa.value,new q("Hello world",new q("hello/",!0))),new q(Za.value,new q("Component",new q("simple/",!0))),new q(qa.value,new q("Pursx 1",new q("pursx1/",!0))),new q(Va.value,new q("Events 1",new q("events1/",!0))),new q(Ja.value,new q("Effects",new q("effects/",!0))),new q(za.value,new q("Pursx 2",new q("pursx2/",!0))),new q(Ga.value,new q("Events 2",new q("events2/",!0))),new q(ja.value,new q("Portals",new q("portals/",!0))),new q(Xa.value,new q("SSR",new q("ssr/",!1)))])),_f(pn)(e(n))(u)])})})};var cAt=function(t){return function(){var e=rr(Bo(Qa("could not ingest options: "+at(C_()()(uc({reflectSymbol:function(){return"slug"}})(uc({reflectSymbol:function(){return"startsWith"}})(y_)(Se))(Se)))(t))))(_(me))(em(t.startsWith))();return xb(Pb({slug:t.slug,startsWith:e}))()}};export{cAt as main};
