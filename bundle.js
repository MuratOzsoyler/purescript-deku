var Rv=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),f=0,l=0;l<e;l++)for(var _=t[l],b=0;b<n;b++)u[f++]=_(r[b]);return u}};var _a={compose:function(t){return function(r){return function(e){return t(r(e))}}}},va=function(t){return t.compose},Li=function(t){var r=va(t);return function(e){return function(n){return r(n)(e)}}};var Ut=function(t){return t.identity},Wt={identity:function(t){return t},Semigroupoid0:function(){return _a}};var Ur=!0;var Pi=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},_r=function(t){return function(r){return function(e){return t(e)(r)}}},N=function(t){return function(r){return t}};var Oi=function(t){return function(r){return r(t)}};var Nv=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var et=function(){function t(){}return t.value=new t,t}();var R=function(t){return t.map},Ve=function(t){var r=R(t);return function(e){return function(n){return r(n)(e)}}},ar=function(t){return R(t)(N(void 0))},J=function(t){var r=R(t);return function(e){return function(n){return r(N(n))(e)}}};var xu={map:va(_a)},Dr={map:Nv};var By=Ut(Wt);var Ri={apply:Rv,Functor0:function(){return Dr}},Xt=function(t){return t.apply};var kr=function(t){var r=Xt(t),e=R(t.Functor0());return function(n){return function(u){return r(e(N(By))(n))(u)}}},Zr=function(t){var r=Xt(t),e=R(t.Functor0());return function(n){return function(u){return function(f){return r(e(n)(u))(f)}}}};var V=function(t){return t.pure};var uu=function(t){var r=V(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},Ni=function(t){var r=Xt(t.Apply0()),e=V(t);return function(n){return function(u){return r(e(n))(u)}}};var sa={pure:function(t){return[t]},Apply0:function(){return Ri}};var Uv=function(t){return function(r){return t+r}},Wv=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Xr=function(t){return t.reflectSymbol};var on=function(t){return function(r){return r[t]}},au=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var qv={append:function(t){return function(r){return void 0}}},Eu={append:Uv};var Jr={append:Wv};var at=function(t){return t.append};var Ht=function(t){return t.alt};var zy=String.fromCharCode(65535),Vy=String.fromCharCode(0),Gy=Number.POSITIVE_INFINITY,jy=Number.NEGATIVE_INFINITY;var zv=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var Vv=zv;var Gv=zv;var jv=function(t){return function(r){return t===r}};var Xv=jv;var Jv=jv;var Pn={eq:Jv};var Wa={eq:Xv};var Ct=function(t){return t.eq};var ht=function(){function t(){}return t.value=new t,t}(),Lt=function(){function t(){}return t.value=new t,t}(),Pt=function(){function t(){}return t.value=new t,t}();var Kv=function(t){return function(r){return t-r|0}};var Qv=function(t){return function(r){return t+r|0}},Yv=function(t){return function(r){return t*r|0}},Zv=function(t){return function(r){return t+r}},ts=function(t){return function(r){return t*r}};var Bi={add:Zv,zero:0,mul:ts,one:1},ma={add:Qv,zero:0,mul:Yv,one:1};var je=function(t){return t.mul};var ve=function(t){return t.add};var qc={sub:Kv,Semiring0:function(){return ma}};var Ee=function(){return{compare:Gv(ht.value)(Pt.value)(Lt.value),Eq0:function(){return Pn}}}();var me=function(){return{compare:Vv(ht.value)(Pt.value)(Lt.value),Eq0:function(){return Wa}}}();var Et=function(t){return t.compare};var Rn=function(t){return t.top};var Wi={top:2147483647,bottom:-2147483648,Ord0:function(){return me}};var ou=function(t){return t.bottom};var es=function(t){return t.toString()},ns=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var us=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,f=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+f})+'"'};var Xe={show:us};var as=function(t){return t.showRecordFields},is=function(){return function(){return function(t){var r=as(t);return{show:function(e){return"{"+(r(et.value)(e)+"}")}}}}};var Hi={show:ns},Dn={show:es};var Dt=function(t){return t.show};var os=function(t){var r=Xr(t);return function(e){var n=as(e);return function(u){var f=Dt(u);return{showRecordFields:function(l){return function(_){var b=n(et.value)(_),D=r(et.value),T=on(D)(_);return" "+(D+(": "+(f(T)+(","+b))))}}}}}},fs=function(t){var r=Xr(t);return function(e){var n=Dt(e);return{showRecordFields:function(u){return function(f){var l=r(et.value),_=on(l)(f);return" "+(l+(": "+(n(_)+" ")))}}}}};var lg=Ut(Wt),P=function(){function t(){}return t.value=new t,t}(),v=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var rr=function(t){return function(r){return function(e){if(e instanceof P)return t;if(e instanceof v)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var qa=rr(!1)(N(!0));var Fr={map:function(t){return function(r){return r instanceof v?new v(t(r.value0)):P.value}}},_g=R(Fr);var ue=function(t){return rr(t)(lg)},Ne=function(){return function(t){if(t instanceof v)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Iu=function(t){var r=Ct(t);return{eq:function(e){return function(n){return e instanceof P&&n instanceof P?!0:e instanceof v&&n instanceof v?r(e.value0)(n.value0):!1}}}},ba=function(t){var r=Et(t),e=Iu(t.Eq0());return{compare:function(n){return function(u){if(n instanceof P&&u instanceof P)return Pt.value;if(n instanceof P)return ht.value;if(u instanceof P)return Lt.value;if(n instanceof v&&u instanceof v)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var Da={apply:function(t){return function(r){if(t instanceof v)return _g(t.value0)(r);if(t instanceof P)return P.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return Fr}};var ye={bind:function(t){return function(r){if(t instanceof v)return r(t.value0);if(t instanceof P)return P.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return Da}};var Bn=function(){return{pure:v.create,Apply0:function(){return Da}}}();var vg={alt:function(t){return function(r){return t instanceof P?r:t}},Functor0:function(){return Fr}},ls=function(){return{empty:P.value,Alt0:function(){return vg}}}();var _s=function(t){return function(r){return function(e){for(var n=r,u=e.length,f=u-1;f>=0;f--)n=t(e[f])(n);return n}}},vs=function(t){return function(r){return function(e){for(var n=r,u=e.length,f=0;f<u;f++)n=t(n)(e[f]);return n}}};var ss=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var bg=Ut(Wt),za=function(t){return t.discard};var Va={bind:ss,Apply0:function(){return Ri}},yt=function(t){return t.bind},fu=function(t){return _r(yt(t))},Ko=function(t){var r=fu(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},Qo=function(t){var r=yt(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var Ga={discard:function(t){return yt(t)}};var Yo=function(t){var r=yt(t);return function(e){return r(e)(bg)}};var A=function(t){return t.empty};var pt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ct=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Gc=function(t){return rr(new pt(t))(ct.create)};var ka={map:function(t){return function(r){if(r instanceof pt)return new pt(r.value0);if(r instanceof ct)return new ct(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var ge=function(t){return function(r){return function(e){if(e instanceof pt)return t(e.value0);if(e instanceof ct)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},jc=function(){return ge(N(P.value))(v.create)}();var dg=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}};var Ds={defer:function(t){return function(r){return t(void 0)(r)}}},ja=function(t){return t.defer},Xc=function(t){var r=ja(t);return function(e){var n=dg("go","Control.Lazy",function(){return r(function(f){return e(n(25))})}),u=n(25);return u}};var ks=function(t){return function(r){return t&&r}},As=function(t){return function(r){return t||r}},ds=function(t){return!t};var Aa=function(t){return t.not};var Ja=function(t){return t.ff};var Lu=function(t){return t.disj},kn={ff:!1,tt:!0,implies:function(t){return function(r){return Lu(kn)(Aa(kn)(t))(r)}},conj:ks,disj:As,not:ds};var ys=function(t){return Math.min(Math.abs(t),2147483647)},gs=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},Ss=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var $s={Ring0:function(){return qc}};var qi=function(t){return t.mod};var tf={degree:ys,div:gs,mod:Ss,CommutativeRing0:function(){return $s}};var Jc={mempty:void 0,Semigroup0:function(){return qv}},Vi={mempty:"",Semigroup0:function(){return Eu}};var Vt=function(t){return t.mempty};var X=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var zr=function(t){return t.value1};var cu={map:function(t){return function(r){return new X(r.value0,t(r.value1))}}};var Pu=function(t){return function(r){return function(e){return t(new X(r,e))}}};var Ji=function(t){return t};var Ig=function(t){var r=Lu(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Zc=function(t){var r=Ig(t);return{mempty:Ja(t),Semigroup0:function(){return r}}};var nf=function(t){return t};var Lg=function(t){var r=va(t);return{append:function(e){return function(n){return r(e)(n)}}}};var tp=function(t){var r=Lg(t.Semigroupoid0());return{mempty:Ut(t),Semigroup0:function(){return r}}};var rt=function(t){return t};var d=function(){return rt};var ep=d(),uf=function(){return ep};var Tr=function(){return ep};var Ya=function(){return function(){return function(){return function(){return function(t){return ep}}}}};var Rg=Tr(),Ng=tp(Wt);var Bg=Ya()()()(),sr=function(t){return t.foldr};var An=function(t){var r=sr(t);return function(e){return r(Ht(e.Alt0()))(A(e))}},Lr=function(t){var r=sr(t);return function(e){var n=Ht(e.Alt0()),u=A(e);return function(f){return r(function(l){return n(f(l))})(u)}}},Za=function(t){var r=kr(t.Apply0()),e=V(t);return function(n){var u=sr(n);return function(f){return u(function(l){return r(f(l))})(e(void 0))}}},Ke=function(t){var r=Za(t);return function(e){return _r(r(e))}};var or=function(t){return t.foldl};var pu=function(t){var r=or(t);return function(e){var n=at(e.Semigroup0()),u=Vt(e);return function(f){return function(l){var _=function(b){return function(D){return b.init?{init:!1,acc:D}:{init:!1,acc:n(b.acc)(n(f)(D))}}};return r(_)({init:!0,acc:u})(l).acc}}}};var Qe={foldr:function(t){return function(r){return function(e){if(e instanceof P)return r;if(e instanceof v)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof P)return r;if(e instanceof v)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=Vt(t);return function(e){return function(n){if(n instanceof P)return r;if(n instanceof v)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var Ts=function(t){var r=sr(t);return function(e){var n=at(e.Semigroup0()),u=Vt(e);return function(f){return r(function(l){return function(_){return n(f(l))(_)}})(u)}}},Mt={foldr:_s,foldl:vs,foldMap:function(t){return Ts(Mt)(t)}},ap=function(t){var r=or(t);return function(e){var n=at(e.Semigroup0()),u=Vt(e);return function(f){return r(function(l){return function(_){return n(l)(f(_))}})(u)}}},Sr=function(t){return t.foldMap};var ip=function(t){var r=Sr(t)(Ng);return function(e){return function(n){return function(u){return Rg(r(function(f){return nf(e(f))})(u))(n)}}}};var Ou=function(t){var r=Sr(t);return function(e){return Bg(Ji)(r(Zc(e)))}};var Ug=Ut(Wt);var Se={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},ti=function(t){return t.dimap},Me=function(t){var r=ti(t);return function(e){return r(e)(Ug)}};var op=function(t){return function(){return t}},xs=function(t){return function(r){return function(){return r(t())()}}};var Be=function(t){var r=yt(t.Bind1()),e=V(t.Applicative0());return function(n){return function(u){return r(n)(function(f){return r(u)(function(l){return e(f(l))})})}}};var Es=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},ri={Applicative0:function(){return $e},Bind1:function(){return ga}},ga={bind:xs,Apply0:function(){return fp(0)}},$e={pure:op,Apply0:function(){return fp(0)}},Ms=Es("functorEffect","Effect",function(){return{map:Ni($e)}}),fp=Es("applyEffect","Effect",function(){return{apply:Be(ri),Functor0:function(){return Ms(0)}}}),z=Ms(20),Pr=fp(23),Hg=Zr(Pr),cp=function(t){return{append:Hg(at(t))}},pp=function(t){var r=cp(t.Semigroup0());return{mempty:op(Vt(t)),Semigroup0:function(){return r}}};var af=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},lp=(t,r)=>{for(let e in t)r(t[e])},_p=()=>({}),vp=(t,r,e)=>{e[t]=r},sp=(t,r)=>{delete r[t]};var ws=rt;var Is=function(t){return function(r){return function(){return t(r())}}},Ls=function(t){return function(){return t}},Ps=function(t){return function(r){return function(){return r(t())()}}};function ae(t){return function(){return{value:t}}}var Kr=function(t){return function(){return t.value}},Os=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},cn=function(t){return function(r){return function(){return r.value=t}}};var yn=function(t){return t};var lu={map:function(t){return function(r){return t(r)}}};var Rs={apply:function(t){return function(r){return t(r)}},Functor0:function(){return lu}},Gg={bind:function(t){return function(r){return r(t)}},Apply0:function(){return Rs}},Ns={pure:yn,Apply0:function(){return Rs}},Ue={Applicative0:function(){return Ns},Bind1:function(){return Gg}};var Bs=function(t){return function(){return{value:t}}};var te=function(t){return function(){return t.value}},Us=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},be=function(t){return function(r){return function(){r.value=t}}};var Xg=ar(z),Ce=Bs,Jg=Us,of=function(t){return Jg(function(r){var e=t(r);return{state:e,value:e}})},Yi=function(t){return function(r){return Xg(of(t)(r))}};var rS=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},eS=Os,xr=function(t){return eS(function(r){var e=t(r);return{state:e,value:e}})},ie={map:Is};var bp={Applicative0:function(){return gr},Bind1:function(){return Ru}},Ru={bind:Ps,Apply0:function(){return Dp(0)}},gr={pure:Ls,Apply0:function(){return Dp(0)}},Dp=rS("applyST","Control.Monad.ST.Internal",function(){return{apply:Be(bp),Functor0:function(){return ie}}}),Zi=Dp(47),nS=Zr(Zi);var Hs=function(t){return{append:nS(at(t))}};var ei={liftST:ws,Monad0:function(){return ri}},ni=function(t){return t.liftST};var cf=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,f=0;u!==r;)n[f++]=u,u+=e;return n[f]=u,n}},uS=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},aS=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},kp=typeof Array.prototype.fill=="function"?uS:aS,iS=function(){function t(u,f){this.head=u,this.tail=f}var r={};function e(u){return function(f){return new t(u,f)}}function n(u){for(var f=[],l=0,_=u;_!==r;)f[l++]=_.head,_=_.tail;return f}return function(u){return function(f){return n(u(e)(r)(f))}}}(),$n=function(t){return t.length},qs=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},zs=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},Vs=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var f=e(n[u]);if(r(f))return f}return t}}}},Gs=function(t){return function(r){return function(e){return function(n){for(var u=0,f=n.length;u<f;u++)if(e(n[u]))return t(u);return r}}}};var js=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var to=function(t){return function(r){return r.filter(t)}},pf=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var f=r[u];t(f)?e.push(f):n.push(f)}return{yes:e,no:n}}};var Xs=function(){function t(r,e,n,u,f,l){var _,b,D,T,O,U,B;for(_=f+(l-f>>1),_-f>1&&t(r,e,u,n,f,_),l-_>1&&t(r,e,u,n,_,l),b=f,D=_,T=f;b<_&&D<l;)O=u[b],U=u[D],B=e(r(O)(U)),B>0?(n[T++]=U,++D):(n[T++]=O,++b);for(;b<_;)n[T++]=u[b++];for(;D<l;)n[T++]=u[D++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var ro=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),f=0;f<n;f++)u[f]=t(r[f])(e[f]);return u}}};var Js=function(t){return function(r){return t[r]}};function Un(){return[]}var Ap=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var lf=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},Wn=function(t){return function(){return t}};function Ks(t){return function(){return t.slice()}}var _f=Ks,dp=Ks,fS=function(){function t(r,e,n,u,f,l){var _,b,D,T,O,U,B;for(_=f+(l-f>>1),_-f>1&&t(r,e,u,n,f,_),l-_>1&&t(r,e,u,n,_,l),b=f,D=_,T=f;b<_&&D<l;)O=u[b],U=u[D],B=e(r(O)(U)),B>0?(n[T++]=U,++D):(n[T++]=O,++b);for(;b<_;)n[T++]=u[b++];for(;D<l;)n[T++]=u[D++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var tm=function(t){return function(r){return function(){var n=dp(r)();return t(n)(),Wn(n)()}}};var pn=function(t){return Ap([t])};var rm=R(ie),lS=Aa(kn),_S=ar(ie),vS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var sS=function(t){return function(){var e=Kr(t.value1)();return xr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var sf=function(t){return rm(vS.create(t))(ae(0))},mf=function(t){return function(r){return function(){for(var n=ae(!1)();rm(lS)(Kr(n))();)(function(){var f=sS(t)();if(f instanceof v)return r(f.value0)();if(f instanceof P)return _S(cn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[f.constructor.name])})();return{}}}};var nm=function(){function t(u){return[u]}function r(u){return function(f){return[u,f]}}function e(u){return function(f){return function(l){return[u,f,l]}}}function n(u){return function(f){return u.concat(f)}}return function(u){return function(f){return function(l){return function(_){return function(b){function D(T,O){switch(O-T){case 0:return l([]);case 1:return f(t)(_(b[T]));case 2:return u(f(r)(_(b[T])))(_(b[T+1]));case 3:return u(u(f(e)(_(b[T])))(_(b[T+1])))(_(b[T+2]));default:var U=T+Math.floor((O-T)/4)*2;return u(f(n)(D(T,U)))(D(U,O))}}return D(0,b.length)}}}}}}();var jS=Ut(Wt),He=function(t){return t.traverse};var Fp=function(t){var r=He(t);return function(e){return r(e)(jS)}},Sa={traverse:function(t){var r=t.Apply0();return nm(Xt(r))(R(r.Functor0()))(V(t))},sequence:function(t){return Fp(Sa)(t)},Functor0:function(){return Dr},Foldable1:function(){return Mt}};var p$=R(Fr);var l$=Ne();var _$=at(Jr);var Mp=function(){return Js},v$=Mp(),wp=function(){return qs(N(P.value))(function(t){return function(r){return new v({head:t,tail:r})}})}();var gf=function(t){return Xs(t)(function(r){if(r instanceof Lt)return 1;if(r instanceof Pt)return 0;if(r instanceof ht)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var Sf=function(t){return function(r){return tm(pn(r))(t)()}},mm=function(t){return[t]};var h=function(t){return function(r){return ro(t)(cf(0)($n(r)-1|0))(r)}};var Nu=function(){return zs(v.create)(P.value)}(),Ip=function(t){return Nu(t)($n(t)-1|0)};var Lp=function(t){return Nu(t)(0)};var uo=function(){return Vs(P.value)(qa)}();var Pp=function(){return Gs(v.create)(P.value)}();var Op=function(t){return function(r){return p$(v$(r))(Pp(t)(r))}};var bm=function(){return js(v.create)(P.value)}(),Rp=function(t){return function(r){return function(e){return e.length===0?[]:rr(e)(function(n){return l$(bm(n)(e))})(Pp(t(r))(e))}}};var ao=function(t){return function(r){return _$([t])(r)}};var s$=_r(yt(Va)),Np=function(t){return s$(function(){var r=rr([])(mm);return function(e){return r(t(e))}}())};var Dm=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var _u=function(t){return t.mapWithIndex};var ha={mapWithIndex:Dm,Functor0:function(){return Dr}};var zn=function(t){return t.foldrWithIndex};var Vn=function(t){return t.foldlWithIndex};var vu=function(t){return t.foldMapWithIndex};var Gn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Cf=function(t){var r=A(t);return function(e){return new Gn(e,r)}};var er=function(){function t(){}return t.value=new t,t}(),dt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),hf=function(t){return t},T$=function(t){return new dt(t.value0,t.value1)};var x$=function(t){var r=function(e){return function(n){var u=e,f=!1,l;function _(b,D){if(D instanceof dt&&D.value1 instanceof dt&&D.value1.value1 instanceof dt){u=new dt(D,b),n=D.value1.value1.value1;return}var T=function(U){return U instanceof dt&&U.value1 instanceof dt&&U.value1.value1 instanceof er?new dt(t(U.value0),new dt(t(U.value1.value0),er.value)):U instanceof dt&&U.value1 instanceof er?new dt(t(U.value0),er.value):er.value},O=function(U){return function(B){var p=U,m=!1,Q;function ot(Z,tr){if(Z instanceof dt&&Z.value0 instanceof dt&&Z.value0.value1 instanceof dt&&Z.value0.value1.value1 instanceof dt){p=Z.value1,B=new dt(t(Z.value0.value0),new dt(t(Z.value0.value1.value0),new dt(t(Z.value0.value1.value1.value0),tr)));return}return m=!0,tr}for(;!m;)Q=ot(p,B);return Q}};return f=!0,O(b)(T(D))}for(;!f;)l=_(u,n);return l}};return r(er.value)},io={map:x$};var ln={foldr:function(t){return function(r){var e=function(){var u=function(f){return function(l){var _=f,b=!1,D;function T(O,U){if(U instanceof er)return b=!0,O;if(U instanceof dt){_=new dt(U.value0,O),l=U.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[O.constructor.name,U.constructor.name])}for(;!b;)D=T(_,l);return D}};return u(er.value)}(),n=or(ln)(_r(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,f=!1,l;function _(b,D){if(D instanceof er)return f=!0,b;if(D instanceof dt){u=t(b)(D.value0),n=D.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[D.constructor.name])}for(;!f;)l=_(u,n);return l}};return r},foldMap:function(t){var r=at(t.Semigroup0()),e=Vt(t);return function(n){return or(ln)(function(u){var f=r(u);return function(l){return f(n(l))}})(e)}}};var E$=sr(ln);var Ff={append:function(t){return function(r){return E$(dt.create)(r)(t)}}},Am=at(Ff);var dm={append:function(t){return function(r){return new Gn(t.value0,Am(t.value1)(T$(r)))}}};var ym={alt:Am,Functor0:function(){return io}},Up=function(){return{empty:er.value,Alt0:function(){return ym}}}();var Tf=function(){var t=function(r){return function(e){var n=r,u=!1,f;function l(_,b){if(b instanceof er)return u=!0,_;if(b instanceof dt){n=new dt(b.value0,_),e=b.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[_.constructor.name,b.constructor.name])}for(;!u;)f=l(n,e);return f}};return t(er.value)}();var Fm=function(t){return t()};var Tm=function(t){throw new Error(t)};var xm=function(){return Tm};var K$=xm(),Q$=Fm,Wu=function(t){return Q$(function(){return K$(t)})};var mt=function(){function t(){}return t.value=new t,t}(),Ft=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Jt=function(){function t(r,e,n,u,f,l,_){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l,this.value6=_}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return function(_){return new t(r,e,n,u,f,l,_)}}}}}}},t}(),Hu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),su=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),qu=function(){function t(r,e,n,u,f,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return new t(r,e,n,u,f,l)}}}}}},t}(),jn=function(){function t(r,e,n,u,f,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return new t(r,e,n,u,f,l)}}}}}},t}(),zu=function(){function t(r,e,n,u,f,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return new t(r,e,n,u,f,l)}}}}}},t}(),Ef=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Im=function(t){return function(r){return new Ft(mt.value,t,r,mt.value)}};var fo=function(t){var r=Et(t);return function(e){var n=function(u){var f=!1,l;function _(b){if(b instanceof mt)return f=!0,P.value;if(b instanceof Ft){var D=r(e)(b.value1);if(D instanceof Pt)return f=!0,new v(b.value2);if(D instanceof ht){u=b.value0;return}u=b.value3;return}if(b instanceof Jt){var T=r(e)(b.value1);if(T instanceof Pt)return f=!0,new v(b.value2);var O=r(e)(b.value4);if(O instanceof Pt)return f=!0,new v(b.value5);if(T instanceof ht){u=b.value0;return}if(O instanceof Lt){u=b.value6;return}u=b.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[b.constructor.name])}for(;!f;)l=_(u);return l};return n}};var Vu={map:function(t){return function(r){if(r instanceof mt)return mt.value;if(r instanceof Ft)return new Ft(R(Vu)(t)(r.value0),r.value1,t(r.value2),R(Vu)(t)(r.value3));if(r instanceof Jt)return new Jt(R(Vu)(t)(r.value0),r.value1,t(r.value2),R(Vu)(t)(r.value3),r.value4,t(r.value5),R(Vu)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var Lm=function(t){return function(r){return function(e){var n=t,u=r,f=!1,l;function _(b,D,T){if(D instanceof er)return f=!0,T;if(D instanceof dt){if(D.value0 instanceof Hu){n=b,u=D.value1,e=new Ft(T,D.value0.value0,D.value0.value1,D.value0.value2);return}if(D.value0 instanceof su){n=b,u=D.value1,e=new Ft(D.value0.value0,D.value0.value1,D.value0.value2,T);return}if(D.value0 instanceof qu){n=b,u=D.value1,e=new Jt(T,D.value0.value0,D.value0.value1,D.value0.value2,D.value0.value3,D.value0.value4,D.value0.value5);return}if(D.value0 instanceof jn){n=b,u=D.value1,e=new Jt(D.value0.value0,D.value0.value1,D.value0.value2,T,D.value0.value3,D.value0.value4,D.value0.value5);return}if(D.value0 instanceof zu){n=b,u=D.value1,e=new Jt(D.value0.value0,D.value0.value1,D.value0.value2,D.value0.value3,D.value0.value4,D.value0.value5,T);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[D.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[D.constructor.name,T.constructor.name])}for(;!f;)l=_(n,u,e);return l}}},wf=function(t){var r=Lm(t),e=Et(t);return function(n){return function(u){var f=function(_){return function(b){var D=_,T=!1,O;function U(B,p){if(B instanceof er)return T=!0,new Ft(p.value0,p.value1,p.value2,p.value3);if(B instanceof dt){if(B.value0 instanceof Hu)return T=!0,r(B.value1)(new Jt(p.value0,p.value1,p.value2,p.value3,B.value0.value0,B.value0.value1,B.value0.value2));if(B.value0 instanceof su)return T=!0,r(B.value1)(new Jt(B.value0.value0,B.value0.value1,B.value0.value2,p.value0,p.value1,p.value2,p.value3));if(B.value0 instanceof qu){D=B.value1,b=new Ef(new Ft(p.value0,p.value1,p.value2,p.value3),B.value0.value0,B.value0.value1,new Ft(B.value0.value2,B.value0.value3,B.value0.value4,B.value0.value5));return}if(B.value0 instanceof jn){D=B.value1,b=new Ef(new Ft(B.value0.value0,B.value0.value1,B.value0.value2,p.value0),p.value1,p.value2,new Ft(p.value3,B.value0.value3,B.value0.value4,B.value0.value5));return}if(B.value0 instanceof zu){D=B.value1,b=new Ef(new Ft(B.value0.value0,B.value0.value1,B.value0.value2,B.value0.value3),B.value0.value4,B.value0.value5,new Ft(p.value0,p.value1,p.value2,p.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[B.value0.constructor.name,p.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[B.constructor.name,p.constructor.name])}for(;!T;)O=U(D,b);return O}},l=function(_){return function(b){var D=_,T=!1,O;function U(B,p){if(p instanceof mt)return T=!0,f(B)(new Ef(mt.value,n,u,mt.value));if(p instanceof Ft){var m=e(n)(p.value1);if(m instanceof Pt)return T=!0,r(B)(new Ft(p.value0,n,u,p.value3));if(m instanceof ht){D=new dt(new Hu(p.value1,p.value2,p.value3),B),b=p.value0;return}D=new dt(new su(p.value0,p.value1,p.value2),B),b=p.value3;return}if(p instanceof Jt){var m=e(n)(p.value1);if(m instanceof Pt)return T=!0,r(B)(new Jt(p.value0,n,u,p.value3,p.value4,p.value5,p.value6));var Q=e(n)(p.value4);if(Q instanceof Pt)return T=!0,r(B)(new Jt(p.value0,p.value1,p.value2,p.value3,n,u,p.value6));if(m instanceof ht){D=new dt(new qu(p.value1,p.value2,p.value3,p.value4,p.value5,p.value6),B),b=p.value0;return}if(m instanceof Lt&&Q instanceof ht){D=new dt(new jn(p.value0,p.value1,p.value2,p.value4,p.value5,p.value6),B),b=p.value3;return}D=new dt(new zu(p.value0,p.value1,p.value2,p.value3,p.value4,p.value5),B),b=p.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[B.constructor.name,p.constructor.name])}for(;!T;)O=U(D,b);return O}};return l(er.value)}}},nC=function(t){var r=Lm(t),e=Et(t);return function(n){var u=function(b){return function(D){var T=b,O=!1,U;function B(p,m){if(p instanceof er)return O=!0,m;if(p instanceof dt){if(p.value0 instanceof Hu&&p.value0.value2 instanceof mt&&m instanceof mt)return O=!0,r(p.value1)(new Ft(mt.value,p.value0.value0,p.value0.value1,mt.value));if(p.value0 instanceof su&&p.value0.value0 instanceof mt&&m instanceof mt)return O=!0,r(p.value1)(new Ft(mt.value,p.value0.value1,p.value0.value2,mt.value));if(p.value0 instanceof Hu&&p.value0.value2 instanceof Ft){T=p.value1,D=new Jt(m,p.value0.value0,p.value0.value1,p.value0.value2.value0,p.value0.value2.value1,p.value0.value2.value2,p.value0.value2.value3);return}if(p.value0 instanceof su&&p.value0.value0 instanceof Ft){T=p.value1,D=new Jt(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3,p.value0.value1,p.value0.value2,m);return}return p.value0 instanceof Hu&&p.value0.value2 instanceof Jt?(O=!0,r(p.value1)(new Ft(new Ft(m,p.value0.value0,p.value0.value1,p.value0.value2.value0),p.value0.value2.value1,p.value0.value2.value2,new Ft(p.value0.value2.value3,p.value0.value2.value4,p.value0.value2.value5,p.value0.value2.value6)))):p.value0 instanceof su&&p.value0.value0 instanceof Jt?(O=!0,r(p.value1)(new Ft(new Ft(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3),p.value0.value0.value4,p.value0.value0.value5,new Ft(p.value0.value0.value6,p.value0.value1,p.value0.value2,m)))):p.value0 instanceof qu&&p.value0.value2 instanceof mt&&p.value0.value5 instanceof mt&&m instanceof mt?(O=!0,r(p.value1)(new Jt(mt.value,p.value0.value0,p.value0.value1,mt.value,p.value0.value3,p.value0.value4,mt.value))):p.value0 instanceof jn&&p.value0.value0 instanceof mt&&p.value0.value5 instanceof mt&&m instanceof mt?(O=!0,r(p.value1)(new Jt(mt.value,p.value0.value1,p.value0.value2,mt.value,p.value0.value3,p.value0.value4,mt.value))):p.value0 instanceof zu&&p.value0.value0 instanceof mt&&p.value0.value3 instanceof mt&&m instanceof mt?(O=!0,r(p.value1)(new Jt(mt.value,p.value0.value1,p.value0.value2,mt.value,p.value0.value4,p.value0.value5,mt.value))):p.value0 instanceof qu&&p.value0.value2 instanceof Ft?(O=!0,r(p.value1)(new Ft(new Jt(m,p.value0.value0,p.value0.value1,p.value0.value2.value0,p.value0.value2.value1,p.value0.value2.value2,p.value0.value2.value3),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof jn&&p.value0.value0 instanceof Ft?(O=!0,r(p.value1)(new Ft(new Jt(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3,p.value0.value1,p.value0.value2,m),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof jn&&p.value0.value5 instanceof Ft?(O=!0,r(p.value1)(new Ft(p.value0.value0,p.value0.value1,p.value0.value2,new Jt(m,p.value0.value3,p.value0.value4,p.value0.value5.value0,p.value0.value5.value1,p.value0.value5.value2,p.value0.value5.value3)))):p.value0 instanceof zu&&p.value0.value3 instanceof Ft?(O=!0,r(p.value1)(new Ft(p.value0.value0,p.value0.value1,p.value0.value2,new Jt(p.value0.value3.value0,p.value0.value3.value1,p.value0.value3.value2,p.value0.value3.value3,p.value0.value4,p.value0.value5,m)))):p.value0 instanceof qu&&p.value0.value2 instanceof Jt?(O=!0,r(p.value1)(new Jt(new Ft(m,p.value0.value0,p.value0.value1,p.value0.value2.value0),p.value0.value2.value1,p.value0.value2.value2,new Ft(p.value0.value2.value3,p.value0.value2.value4,p.value0.value2.value5,p.value0.value2.value6),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof jn&&p.value0.value0 instanceof Jt?(O=!0,r(p.value1)(new Jt(new Ft(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3),p.value0.value0.value4,p.value0.value0.value5,new Ft(p.value0.value0.value6,p.value0.value1,p.value0.value2,m),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof jn&&p.value0.value5 instanceof Jt?(O=!0,r(p.value1)(new Jt(p.value0.value0,p.value0.value1,p.value0.value2,new Ft(m,p.value0.value3,p.value0.value4,p.value0.value5.value0),p.value0.value5.value1,p.value0.value5.value2,new Ft(p.value0.value5.value3,p.value0.value5.value4,p.value0.value5.value5,p.value0.value5.value6)))):p.value0 instanceof zu&&p.value0.value3 instanceof Jt?(O=!0,r(p.value1)(new Jt(p.value0.value0,p.value0.value1,p.value0.value2,new Ft(p.value0.value3.value0,p.value0.value3.value1,p.value0.value3.value2,p.value0.value3.value3),p.value0.value3.value4,p.value0.value3.value5,new Ft(p.value0.value3.value6,p.value0.value4,p.value0.value5,m)))):(O=!0,Wu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[p.constructor.name])}for(;!O;)U=B(T,D);return U}},f=function(b){return function(D){var T=b,O=!1,U;function B(p,m){if(m instanceof Ft&&m.value0 instanceof mt&&m.value3 instanceof mt)return O=!0,u(p)(mt.value);if(m instanceof Ft){T=new dt(new su(m.value0,m.value1,m.value2),p),D=m.value3;return}if(m instanceof Jt&&m.value0 instanceof mt&&m.value3 instanceof mt&&m.value6 instanceof mt)return O=!0,u(new dt(new su(mt.value,m.value1,m.value2),p))(mt.value);if(m instanceof Jt){T=new dt(new zu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),p),D=m.value6;return}return O=!0,Wu("The impossible happened in partial function `removeMaxNode`.")}for(;!O;)U=B(T,D);return U}},l=function(b){var D=!1,T;function O(U){if(U instanceof Ft&&U.value3 instanceof mt)return D=!0,{key:U.value1,value:U.value2};if(U instanceof Ft){b=U.value3;return}if(U instanceof Jt&&U.value6 instanceof mt)return D=!0,{key:U.value4,value:U.value5};if(U instanceof Jt){b=U.value6;return}return D=!0,Wu("The impossible happened in partial function `maxNode`.")}for(;!D;)T=O(b);return T},_=function(b){return function(D){var T=b,O=!1,U;function B(p,m){if(m instanceof mt)return O=!0,P.value;if(m instanceof Ft){var Q=e(n)(m.value1);if(m.value3 instanceof mt&&Q instanceof Pt)return O=!0,new v(new X(m.value2,u(p)(mt.value)));if(Q instanceof Pt){var ot=l(m.value0);return O=!0,new v(new X(m.value2,f(new dt(new Hu(ot.key,ot.value,m.value3),p))(m.value0)))}if(Q instanceof ht){T=new dt(new Hu(m.value1,m.value2,m.value3),p),D=m.value0;return}T=new dt(new su(m.value0,m.value1,m.value2),p),D=m.value3;return}if(m instanceof Jt){var Z=function(){return m.value0 instanceof mt&&m.value3 instanceof mt&&m.value6 instanceof mt}(),Q=e(n)(m.value4),tr=e(n)(m.value1);if(Z&&tr instanceof Pt)return O=!0,new v(new X(m.value2,r(p)(new Ft(mt.value,m.value4,m.value5,mt.value))));if(Z&&Q instanceof Pt)return O=!0,new v(new X(m.value5,r(p)(new Ft(mt.value,m.value1,m.value2,mt.value))));if(tr instanceof Pt){var ot=l(m.value0);return O=!0,new v(new X(m.value2,f(new dt(new qu(ot.key,ot.value,m.value3,m.value4,m.value5,m.value6),p))(m.value0)))}if(Q instanceof Pt){var ot=l(m.value3);return O=!0,new v(new X(m.value5,f(new dt(new jn(m.value0,m.value1,m.value2,ot.key,ot.value,m.value6),p))(m.value3)))}if(tr instanceof ht){T=new dt(new qu(m.value1,m.value2,m.value3,m.value4,m.value5,m.value6),p),D=m.value0;return}if(tr instanceof Lt&&Q instanceof ht){T=new dt(new jn(m.value0,m.value1,m.value2,m.value4,m.value5,m.value6),p),D=m.value3;return}T=new dt(new zu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),p),D=m.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[m.constructor.name])}for(;!O;)U=B(T,D);return U}};return _(er.value)}},fe={foldr:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return sr(fe)(t)(t(e.value2)(sr(fe)(t)(r)(e.value3)))(e.value0);if(e instanceof Jt)return sr(fe)(t)(t(e.value2)(sr(fe)(t)(t(e.value5)(sr(fe)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return or(fe)(t)(t(or(fe)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Jt)return or(fe)(t)(t(or(fe)(t)(t(or(fe)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=Vt(t),e=at(t.Semigroup0());return function(n){return function(u){if(u instanceof mt)return r;if(u instanceof Ft)return e(Sr(fe)(t)(n)(u.value0))(e(n(u.value2))(Sr(fe)(t)(n)(u.value3)));if(u instanceof Jt)return e(Sr(fe)(t)(n)(u.value0))(e(n(u.value2))(e(Sr(fe)(t)(n)(u.value3))(e(n(u.value5))(Sr(fe)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},De={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return zn(De)(t)(t(e.value1)(e.value2)(zn(De)(t)(r)(e.value3)))(e.value0);if(e instanceof Jt)return zn(De)(t)(t(e.value1)(e.value2)(zn(De)(t)(t(e.value4)(e.value5)(zn(De)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return Vn(De)(t)(t(e.value1)(Vn(De)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Jt)return Vn(De)(t)(t(e.value4)(Vn(De)(t)(t(e.value1)(Vn(De)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=Vt(t),e=at(t.Semigroup0());return function(n){return function(u){if(u instanceof mt)return r;if(u instanceof Ft)return e(vu(De)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(vu(De)(t)(n)(u.value3)));if(u instanceof Jt)return e(vu(De)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(vu(De)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(vu(De)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return fe}},uC=zn(De),aC=Vn(De),Pm=function(){return uC(function(t){return function(r){return function(e){return new dt(t,e)}}})(er.value)}();var Xn=function(){return mt.value}();var Gp=function(t){var r=nC(t);return function(e){return function(n){return rr(n)(zr)(r(e)(n))}}};var Gu=function(t){var r=fo(t),e=Gp(t),n=wf(t);return function(u){return function(f){return function(l){var _=u(r(f)(l));if(_ instanceof P)return e(f)(l);if(_ instanceof v)return n(f)(_.value0)(l);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[_.constructor.name])}}}};var iC=function(t){var r=Gu(t);return function(e){return function(n){return function(u){var f=function(l){return function(_){return function(b){return r(function(){var D=rr(b)(e(b));return function(T){return v.create(D(T))}}())(l)(_)}}};return aC(f)(u)(n)}}}};var Om=function(t){return iC(t)(N)};var Rm=ar(ie),cC=V(gr),pC=Xt(Zi),lC=R(ie);var If={compact:function(t){return function(){var e=Un(),n=sf(function(u){return Nu(t)(u)})();return mf(n)(function(u){return Rm(function(f){if(f instanceof P)return cC(0);if(f instanceof v)return pn(f.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[f.constructor.name])}(u))})(),Wn(e)()}()},separate:function(t){return function(){var e=Un(),n=Un(),u=sf(function(f){return Nu(t)(f)})();return mf(u)(function(f){return Rm(function(l){if(l instanceof pt)return pn(l.value0)(e);if(l instanceof ct)return pn(l.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[l.constructor.name])}(f))})(),pC(lC(function(f){return function(l){return{left:f,right:l}}})(Wn(e)))(Wn(n))()}()}};var mu=function(t){return t.compact};var Nm=at(Jr),mC=or(Mt);var Bm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof pt)return{left:Nm(e.left)([u.value0]),right:e.right};if(u instanceof ct)return{right:Nm(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return mC(r)({left:[],right:[]})},partition:pf,filterMap:Np,filter:to,Compactable0:function(){return If},Functor1:function(){return Dr}};var Ze=function(t){return t.filterMap};var jp=function(t){return t.filter};var DC=Sr(ln),kC=or(ln),AC=sr(ln);var dC=function(t){var r=Om(t);return function(e){return function(n){return r(e)(n)}}};var Xp=function(t){return Pm(t)};var Wm=function(t){return Im(t)(void 0)};var Jp=function(t){return{append:dC(t)}};var Hm={foldMap:function(t){var r=DC(t);return function(e){var n=r(e);return function(u){return n(Xp(u))}}},foldl:function(t){return function(r){var e=kC(t)(r);return function(n){return e(Xp(n))}}},foldr:function(t){return function(r){var e=AC(t)(r);return function(n){return e(Xp(n))}}}};var yC=Xn;var qm=function(t){var r=Jp(t);return{mempty:yC,Semigroup0:function(){return r}}};var zm=function(t){var r=Gp(t);return function(e){return function(n){return r(e)(n)}}};function Vm(t){return function(r){return function(){return setTimeout(r,t)}}}function Gm(t){return function(){clearTimeout(t)}}var $C=Et(me);var jm=Vm;var CC={eq:function(t){return function(r){return t===r}}},Lf={compare:function(t){return function(r){return $C(t)(r)}},Eq0:function(){return CC}};var Xm=Gm;var bu=function(r){return function(e){return r(e)()}};var ii=function(r){return function(e){return function(){return r(e)}}};var HC=function(t){var r=at(cp(t));return{append:function(e){return function(n){return bu(function(u){return r(ii(e)(u))(ii(n)(u))})}}}};var Ym=function(t){var r=Vt(pp(t)),e=HC(t.Semigroup0());return{mempty:bu(function(n){return r}),Semigroup0:function(){return e}}};var qC=R(cu),zC=V(Bn),tb=function(t){return t.sampleOnRight};var Ma=function(t){return t.keepLatest};var rb=function(t){return t.fix},ju=function(t){var r=rb(t),e=tb(t),n=t.Alternative0(),u=Ht(n.Plus1().Alt0()),f=V(n.Applicative0()),l=R(t.Filterable1().Functor1());return function(_){return function(b){return function(D){return r(function(T){return e(u(T)(f(b)))(l(_r(_))(D))})}}}};var Xu=function(t){var r=Ze(t.Filterable1()),e=ju(t);return function(n){return function(u){return function(f){return r(zr)(e(function(l){return function(_){return qC(zC)(n(l.value0)(_))}})(new X(u,P.value))(f))}}}};function Qp(t){return function(r){return t===r}}var eb=Qp;var nb=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},ub=Ke($e),Pf=ub(Qe),wa=V($e),ab=Vt(Ym(Jc)),Ku=ni(ei),lo=ar(z),jC=at(Jr),XC=Vt(qm(Lf)),JC=zm(Lf),KC=at(Jp(Lf)),QC=ub(Hm),YC=Xt(Pr),ZC=R(z);var th=function(t){return function(r){return function(e,n){var u=Ce(P.value)(),f=t(e,function(_){return be(new v(_))(u)()}),l=r(e,function(_){var b=te(u)();return Pf(b)(function(D){return function(){return n(_(D))}})()});return function(){return f(),l()}}}},rh=function(t){return function(r){return function(e,n){var u=Ce(P.value)(),f=t(e,function(_){var b=te(u)();return Pf(b)(function(D){return function(){return n(D(_))}})()}),l=r(e,function(_){return be(new v(_))(u)()});return function(){return f(),l()}}}},eh=function(t){return function(r,e){var n=Ce(wa(void 0))(),u=t(r,function(f){var l=te(n)();l();var _=f(r,e);return be(_)(n)()});return function(){var l=te(n)();return l(),u()}}},Er={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},nh=R(Er),_o=function(t){return function(r){return function(e,n){return r(e,function(u){var f=t(u);if(f instanceof v)return n(f.value0);if(f instanceof P)return void 0;throw new Error("Failed pattern match at FRP.Event (line 201, column 31 - line 203, column 35): "+[f.constructor.name])})}}},Yp=function(t){return _o(function(r){var e=t(r);if(e)return new v(r);if(!e)return P.value;throw new Error("Failed pattern match at FRP.Event (line 129, column 13 - line 131, column 25): "+[e.constructor.name])})},ib=function(){var r=_p(),e=Ce(0)();return{event:function(n,u){var f=Ce(u)(),l=te(e)();return vp(l,f,r),Yi(function(_){return _+1|0})(e)(),function(){return be(ab)(f)(),sp(l,r),void 0}},push:function(n){return lp(r,function(u){var f=te(u)();return f(n)})}}},uh=function(t){return function(r,e){var n=ib(),u=t(n.event),f=n.event(r,e),l=u(r,n.push);return function(){return l(),f()}}},vo={compact:_o(Ut(Wt)),separate:function(t){return{left:_o(function(r){if(r instanceof pt)return new v(r.value0);if(r instanceof ct)return P.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 33): "+[r.constructor.name])})(t),right:_o(function(r){if(r instanceof ct)return new v(r.value0);if(r instanceof pt)return P.value;throw new Error("Failed pattern match at FRP.Event (line 119, column 13 - line 121, column 32): "+[r.constructor.name])})(t)}}},Jn={filter:Yp,filterMap:_o,partition:function(t){return function(r){return{yes:Yp(t)(r),no:Yp(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:Ze(Jn)(function(){var e=ge(v.create)(N(P.value));return function(n){return e(t(n))}}())(r),right:Ze(Jn)(function(e){return jc(t(e))})(r)}}},Compactable0:function(){return vo},Functor1:function(){return Er}},ah=function(t){return function(r){return function(e,n){var u=Ce(P.value)(),f=Ku(Un)(),l=Ce(P.value)(),_=Ku(Un)(),b=Ce(!0)(),D=t(e,function(B){var p=te(b)();if(p)return lo(Ku(pn(B)(f)))();be(new v(B))(u)();var m=te(l)();return Pf(m)(function(Q){return function(){return n(Q(B))}})()}),T=r(e,function(B){var p=te(b)();if(p)return lo(Ku(pn(B)(_)))();be(new v(B))(l)();var m=te(u)();return Pf(m)(function(Q){return function(){return n(B(Q))}})()});be(!1)(b)();var O=Ku(_f(f))(),U=Ku(_f(_))();return function(){return O.length===0?be(Ip(U))(l)():af(O,function(B){return be(new v(B))(u)(),af(U,function(p){return be(new v(p))(l)(),n(p(B))})})}(),Ku(lf(0)($n(O))([])(f))(),Ku(lf(0)($n(U))([])(_))(),function(){return D(),T()}}}},tl=function(t){return function(r){return r}(rl(321).subscribe)(t)},rl=nb("backdoor","FRP.Event",function(){var t=function(){var e=_p(),n=Ce(0)();return{event:function(u,f){var l=Ce(f)(),_=te(n)();return vp(_,l,e),Yi(function(b){return b+1|0})(n)(),function(){return be(ab)(l)(),sp(_,e),void 0}},push:function(u){return function(){return lp(e,function(f){var l=te(f)();return l(u)})}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?wa(void 0):e(function(f){return function(){return u(f)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?wa(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(f){return function(){return u(f)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var f=function(l){return function(_){return function(){return l(n,bu(_))}}};return e(f)(function(l){return function(){return u(l)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var f=function(l,_){return l(n,_)};return e(f,u)}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,bu(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,bu(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var f=Zp(722)();return u(e(f.push)(f.event)),wa(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,f){var l=ib();return f(n(l.event)),e(u,l.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Zp(740)(),f=tl(e)(u.push)();return{event:u.event,unsubscribe:f}}};return r}(),mailboxed:function(){var r=function(e){var n=Gu(e),u=fo(e);return function(f){return function(l){return function(_,b){var D=Ce(Xn)();b(l(function(O){return function(U,B){return lo(of(n(function(p){if(p instanceof P)return new v([B]);if(p instanceof v)return new v(jC(p.value0)([B]));throw new Error("Failed pattern match at FRP.Event (line 753, column 21 - line 755, column 55): "+[p.constructor.name])})(O))(D))(),lo(of(n(function(p){if(p instanceof P)return P.value;if(p instanceof v)return new v(Rp(eb)(B)(p.value0));throw new Error("Failed pattern match at FRP.Event (line 762, column 21 - line 764, column 69): "+[p.constructor.name])})(O))(D))}}));var T=f(_,function(O){var U=te(D)(),B=u(O.address)(U);if(B instanceof P)return void 0;if(B instanceof v)return af(B.value0,function(p){return p(O.payload)});throw new Error("Failed pattern match at FRP.Event (line 771, column 13 - line 773, column 99): "+[B.constructor.name])});return function(){return lo(be(Xn)(D))(),T()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,f){var l=Ce(XC)(),_=n(u,function(b){var D=Ce(P.value)(),T=jm(e)(function(){f(b);var U=te(D)();return rr(wa(void 0))(function(B){return Yi(JC(B))(l)})(U)()})();return be(new v(T))(D)(),Yi(KC(Wm(T)))(l)()});return function(){var D=te(l)();return QC(D)(Xm)(),_()}}}};return r}()}}),Zp=nb("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(rl(437).create)()}}),oi=rl(583),ob=Zp(434),el=function(t){return function(r){return r}(oi.bus)(t)};var fb=function(t){return function(r){return r}(oi.makeLemmingEvent)(t)},_n=function(t){return function(r){return r}(oi.makeLemmingEventO)(t)},cb=function(t){return function(r){return r}(oi.makePureEvent)(t)},Of=function(t){return function(r){return r}(oi.memoize)(t)};var pb=function(t){return function(r){return r}(oi.subscribePure)(t)};var ih={apply:function(t){return function(r){return ah(t)(nh(Oi)(r))}},Functor0:function(){return Er}};var Yt={pure:function(t){return function(r,e){return e(t),wa(void 0)}},Apply0:function(){return ih}};var $r={alt:function(t){return function(r){return function(e,n){return YC(ZC(function(u){return function(f){return function(){return u(),f()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Er}};var s={empty:function(t,r){return wa(void 0)},Alt0:function(){return $r}},oh={Applicative0:function(){return Yt},Plus1:function(){return s}},ke={keepLatest:eh,sampleOnRight:th,sampleOnLeft:rh,fix:uh,Alternative0:function(){return oh},Filterable1:function(){return Jn}};var fh=V(Yt);var ch=function(t){return t},so=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Rf=function(){function t(){}return t.value=new t,t}(),ph=function(t){return t};var Nf=d(),a=ph;var c=function(){return so.create}();var Y=function(){return mo.create}(),Ar=function(){var t=R(xu)(R(z)(N(!0)));return function(r){return ch(t(r))}}(),Rt=function(t){return t.attr};var Du=function(t){var r=Rt(t);return function(e){return function(n){return fh(r(e)(n))}}};function lb(t){return()=>t.slice()}function _b(t){return r=>e=>()=>{e[t]=r}}function vb(t){return()=>t.slice()}var nl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var il=function(t){var r=Xr(t);return function(){return function(){return function(e){return function(n){return function(u){return au(r(e))(n)(u)}}}}}},Bf=function(t){var r=Xr(t);return function(){return function(e){return function(n){return on(r(e))(n)}}}};var mb=V(gr);var Wf={vb:function(t){return mb(new X({},{}))}},bb=function(t){return t.vb},mh={vbus:function(){var t=function(){return function(n){var u=bb(n);return function(f){return function(l){return fb(function(_){return function(b){return function(){var T=u(et.value)();return b(l(T.value0)(T.value1))(),mb(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},ol=function(){return function(t){return function(r){return function(e){return e()(t)}(mh.vbus)(r)}}};var fi=function(t){var r=il(t)()();return function(){return function(){return function(e){var n=bb(e);return function(){return function(){return{vb:function(u){return function(){var l=n(et.value)(),_=ob();return new X(r(et.value)(_.push)(l.value0),r(et.value)(_.event)(l.value1))}}}}}}}}};var Qu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fl=function(){function t(){}return t.value=new t,t}();var bo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ci=function(){function t(){}return t.value=new t,t}(),qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),cl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ia=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),y=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Yu={eq:function(t){return function(r){return t instanceof Qu&&r instanceof Qu?t.value0===r.value0:t instanceof fl&&r instanceof fl}}};var S=function(t){return new pl(t)};var Db=function(t){return new cl(t)};var kb=t=>r=>r[t];var La=function(t){return t.reflectType};var db=function(t){return La(t)};var pi=Dr;var yb=function(){return function(t){return t}};var ll=function(){return function(){return function(){return function(){return function(){return function(t){var r=db(t);return function(e){return kb(r(e))}}}}}}};var gb=[];var Sb=function(){return function(){return function(t){return function(r){return ao(t)(r)}}}};function $b(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var Zu={};function vl(t){return t()}function Cb(t){return function(r){return function(e){return function(n){var u=e;function f(_){return function(b){return r(b)(_)(n[_])}}for(var l in n)hasOwnProperty.call(n,l)&&(u=t(u)(f(l)));return u}}}}function zf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var Sh=Object.keys||zf(function(t){return function(){return t}});function sl(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var ml=function(t){return function(r){return function(){return delete r[t],r}}};var Mh=sr(Mt);var wh=zf(function(t){return function(r){return r}});var Ih=$b;var hb=function(t){return function(r){return vl(function(){var n=Ih(r)();return t(n)(),n})}};var li=function(t){return function(r){return hb(sl(t)(r))}};var Fb=Cb(Oi),Lh=function(t){var r=at(t.Semigroup0()),e=Vt(t);return function(n){return Fb(function(u){return function(f){return function(l){return r(u)(n(f)(l))}}})(e)}},Tb={foldl:function(t){return Fb(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return Mh(t)(r)(wh(e))}}},foldMap:function(t){var r=Lh(t);return function(e){return r(N(e))}}};var bl=function(t){return hb(ml(t))};function xb(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function Eb(t){return function(r){return function(e){return e[t]=r,e}}}function Mb(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function wb(t){return function(r){return delete r[t],r}}var Ib=_a;var Lb=function(){return function(){return function(t){var r=Xr(t);return function(e){return function(n){return function(u){return Mb(r(e))(n)(u)}}}}}};var Pb=function(){return function(){return function(t){var r=Xr(t);return function(e){return function(n){return function(u){return Eb(r(e))(n)(u)}}}}}};var Ob=function(t){var r=Xr(t);return function(){return function(){return function(e){return function(n){return wb(r(e))(n)}}}}};var Rb=function(t){return function(r){return t(xb(r))}};var Rh=Ma(ke),Nh=R(Er),Bh=An(Mt)(s);var Uh=yt(Ru),Wh=R(Dr),kl=yb(),Hh=_u(ha),qh=Xc(Ds),_i=V(gr),Ub=R(ie),zh=R(pi),Wb=Ke(gr),Hb=Wb(Qe),Nb=Li(Ib),Vh=Pb()()({reflectSymbol:function(){return"id"}}),Gh=Lb()()({reflectSymbol:function(){return"parent"}}),jh=Ob({reflectSymbol:function(){return"raiseId"}})()(),Fn=ar(ie),Xh=uu(gr),qb=Wb(Mt),Jh=Ut(Wt),Kh=Lr(Mt)(s),Qh=Za(gr)(Mt),Yh=at(Jr),Zh=or(Tb),tF=kr(Zi),Bb=function(){function t(){}return t.value=new t,t}(),Al=function(){function t(){}return t.value=new t,t}(),rF=function(){function t(){}return t.value=new t,t}();var vn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof pl)return Kh(vn(t)(r)(e))(u.value0);if(u instanceof Ia)return Rh(Nh(vn(t)(r)(e))(u.value0));if(u instanceof y)return n(t.toElt(u.value0));if(u instanceof cl)return _n(function(f,l){var _=ae(Zu)(),b=f(u.value0,function(D){var T=t.ids(e)(),O=ae(_i(void 0))(),U=t.ids(e)(),B=ae(_i(void 0))(),p=ae([])(),m=ae(_i(void 0))(),Q=Ub(Qu.create)(t.ids(e))(),ot=ae(Bb.value)(),Z=f(D,function(Bt){var K=Kr(ot)();if(Bt instanceof qf&&K instanceof Al){var Cr=Kr(p)();return Qh(function(it){return function(){return l(t.doLogic(Bt.value0)(e)(it))}})(Cr)()}if(Bt instanceof ci&&K instanceof Al){Fn(cn(rF.value)(ot))();var qr=function(){var G=Kr(p)();qb(G)(function(_t){return Hb(r.parent)(function(Nr){return function(){return l(t.disconnectElement(e)({id:_t,parent:Nr,scope:Q}))}})})();var W=Kr(O)();W();var bt=Kr(B)();return bt(),Fn(xr(bl(T))(_))(),Fn(xr(bl(U))(_))()};return Fn(cn(qr)(m))(),qr()}if(Bt instanceof bo&&K instanceof Bb){Fn(cn(Al.value)(ot))();var Oe=f(vn(t)(function(){var it={};for(var G in r)({}).hasOwnProperty.call(r,G)&&(it[G]=r[G]);return it.scope=Q,it.raiseId=function(W){return Fn(xr(Yh([W]))(p))},it}())(e)(Bt.value0),l);return Fn(xr(li(U)(Oe))(_))(),Fn(cn(Oe)(B))()}return void 0});Fn(cn(Z)(O))(),Fn(xr(li(T)(Z))(_))();var tr=Kr(m)();return tr()});return function(){return Uh(Kr(_))(Zh(tF)(_i(void 0)))(),b()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},eF=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(f){var l=function(_){return function(b){return _n(function(D,T){var O=lb(Wh(N(""))(kl(u)))(),U=Bh(Hh(function(tr){return qh(function(Bt){return function(K){return K instanceof y?function(Cr){return Cr(function(){var qr={};for(var Oe in _)({}).hasOwnProperty.call(_,Oe)&&(qr[Oe]=_[Oe]);return qr.parent=P.value,qr.scope=r(_.scope),qr.raiseId=function(it){return _b(tr)(it)(O)},qr}())(b)}(n.toElt(K.value0)):Bt(n.wrapElt(K))}})})(kl(u))),B=D(U,T),p=ae(_i(void 0))(),m=Ub(rt)(vb(O))(),Q=zh(function(tr){return function(Bt){return new y(n.fromEltO1(function(K){return function(Cr){return _n(function(qr,Oe){return K.raiseId(tr)(),Hb(K.parent)(function(it){return function(){return Oe(n.giveNewParent(Cr)(Rb(Nb(Vh(et.value)(tr))(Nb(Gh(et.value)(N(it)))(jh(et.value))))(K))(Bt))}})(),_i(void 0)})}}))}})(m),ot=vn(e)(_)(b)(f(Q)(rt)),Z=D(ot,T);return Fn(cn(Z)(p))(),function(){B(),Xh(!t)(qb(kl(m))(function(K){return function(){return T(n.deleteFromCache(b)({id:K}))}}))();var Bt=Kr(p)();return Bt()}})}};return new y(n.fromEltO2(l))}}}}}}}}},nF=eF()()();var zb=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return nF(!1)(Jh)(t)(r)(e)(n)}}}}}}};var Kn=function(t){return t.state};var vi=function(t){var r=Kn(t);return function(e){return r(function(n){var u=e(n);return new X(u,u)})}};var Cl=d(),bF=ol(),DF=Me(Se),kF=R(Er),hl=Tr(),AF=Ct(Yu),dF=V(gr),$l=V(Yt),yF=A(s),gF=An(Mt)(s);var Gf=function(){return function(t){var r=bF(t);return function(e){return function(n){return new Ia(Cl(r(e)(n)))}}}};var Jb=function(t){return function(r){var e=function(n){return n instanceof y?new y(DF(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof Ia?new Ia(kF(e)(n.value0)):r};return e(r)}},$=function(t){return Jb(v.create(t))};var Fl=function(){return qf.create}(),Tl=function(){return ci.value}(),SF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(hl(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:AF})}},toElt:function(t){return t}}},$F=SF(),si=function(t){return new bo(hl(Jb(P.value)(t)))},Kb=function(t){return function(r){return new bo(hl($(t)(r)))}},ra=function(t){return el(t)};var mi=function(t){return new Ia(Cl(ra(t)))};var CF=function(t){return function(r){return function(e){return vn($F)(t)(r)(e)}}},hF=function(t){return function(r){var e=function(n){return function(u){return _n(function(f,l){var _=u.ids();n.raiseId(_)();var b=function(){if(n.parent instanceof P){var T=u.ids();return new X($l(u.makeElement({id:T,parent:P.value,scope:n.scope,tag:"div",pos:P.value,dynFamily:P.value})),T)}if(n.parent instanceof v)return new X(yF,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 348, column 34 - line 362, column 36): "+[n.parent.constructor.name])}(),D=f(gF([b.value0,$l(u.makeDynBeacon({id:_,parent:new v(b.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),$l(u.attributeParent({id:_,parent:b.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),CF({parent:new v(b.value1),scope:n.scope,ez:!1,raiseId:function(T){return dF(void 0)},pos:P.value,dynFamily:new v(_)})(u)(t(r))]),l);return function(){return l(u.removeDynBeacon({id:_})),D()}})}};return new y(e)}},ea=hF(Cl(Db));var Xf=R(Er),xl=An(Mt)(s),bi=V(Yt),Yb=A(s),FF=V(gr),TF=Xu(ke),xF=Ma(ke),EF=jp(Jn),MF=Ct(Wa),ko=d(),jf=Tr(),wF=Ct(Yu);var IF=Ht($r);var LF=at(Jr);var Qb=R(pi);var PF=uf(),OF=Me(Se);var RF=zb()()();var NF=function(t){return function(r){return function(e){return Xf(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},BF=function(t){return function(r){return function(e){return Xf(function(n){return function(u){if(u.value instanceof so)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof mo)return t.setCb({id:r,key:u.key,value:u.value.value0});if(u.value instanceof Rf)return t.unsetAttribute({id:r,key:u.key});throw new Error("Failed pattern match at Deku.Control (line 69, column 28 - line 72, column 47): "+[u.value.constructor.name])}(Nf(n))})(e)}}},tn=function(t){var r=function(e){return function(n){return _n(function(u,f){var l=n.ids();e.raiseId(l)();var _=u(xl([bi(n.makeText({id:l,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),NF(n)(l)(t),rr(Yb)(function(b){return bi(n.attributeParent({id:l,parent:b,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),f);return function(){return f(n.deleteFromCache({id:l})),_()}})}};return new y(r)},k=function(t){return tn(bi(t))},Jf=function(t){return function(r){var e=function(){var n=function(u){return function(f){return new X(u+1|0,new X(f,u))}};return TF(n)(0)}();return ea(xF(Of(e(r))(function(n){return Xf(function(u){return xl([Xf(N(ci.value))(EF(function(){var f=MF(u.value1+1|0);return function(l){return f(zr(l))}}())(n)),bi(si(ko(t(u.value0))))])})(n)})))}};var UF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(jf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:wF})}},toElt:function(t){return t}}},Zb=UF();var WF=function(t){return function(r){return function(e){return vn(Zb)(t)(r)(e)}}};var C=function(t){return function(r){return function(e){var n=function(u){return function(f){return _n(function(l,_){var b=f.ids();u.raiseId(b)();var D=l(IF(xl(LF([bi(f.makeElement({id:b,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),BF(f)(b)(r)])(rr([])(function(T){return[bi(f.attributeParent({id:b,parent:T,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(WF({parent:new v(b),scope:u.scope,ez:!0,raiseId:function(T){return FF(void 0)},pos:P.value,dynFamily:P.value})(f)(e)),_);return function(){return _(f.deleteFromCache({id:b})),D()}})}};return n}}};var tD=function(){return function(t){return function(r){return RF(Zb)({fromEltO1:ko,fromEltO2:ko,toElt:ko,wrapElt:function(e){return new y(C("div")(Yb)(PF(e)))},giveNewParent:function(e){return function(n){return function(u){return jf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(jf(e))}})(Qb(jf)(t))(OF(Qb(function(e){return e(void 0)}))(ko(Pu(r))))}}};var Hr=function(){function t(){}return t.value=new t,t}();var Qr={attr:function(t){return function(r){return a({key:"href",value:c(r)})}}};var HF=J(z),dr=function(){function t(){}return t.value=new t,t}();var na={attr:function(t){return function(r){return a({key:"click",value:Y(N(HF(r)(!0)))})}}};var Yr={attr:function(t){return function(r){return a({key:"click",value:Y(r)})}}};var Ae=function(){function t(){}return t.value=new t,t}();var Di={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var rD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var eD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var nD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var uD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var aD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var iD=d(),yo=function(t){return function(r){return new y(C("a")(t)(iD(S(iD(h($)(r))))))}};var fD=d(),Kf=function(t){return function(r){return new y(C("div")(t)(fD(S(fD(h($)(r))))))}},br=Kf(A(s));var cD=d(),aa=function(t){return function(r){return new y(C("span")(t)(cD(S(cD(h($)(r))))))}},go=aa(A(s));var El=function(){function t(){}return t.value=new t,t}();var pD={attr:function(t){return function(r){return a({key:"cx",value:c(r)})}}};var Ml=function(){function t(){}return t.value=new t,t}();var lD={attr:function(t){return function(r){return a({key:"cy",value:c(r)})}}};var wl=function(){function t(){}return t.value=new t,t}();var _D={attr:function(t){return function(r){return a({key:"fill",value:c(r)})}}};var Il=function(){function t(){}return t.value=new t,t}();var vD={attr:function(t){return function(r){return a({key:"height",value:c(r)})}}};var Ll=function(){function t(){}return t.value=new t,t}();var sD={attr:function(t){return function(r){return a({key:"r",value:c(r)})}}};var Pl=function(){function t(){}return t.value=new t,t}();var mD={attr:function(t){return function(r){return a({key:"stroke",value:c(r)})}}};var Ol=function(){function t(){}return t.value=new t,t}();var bD={attr:function(t){return function(r){return a({key:"stroke-width",value:c(r)})}}};var So=function(){function t(){}return t.value=new t,t}();var DD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var kD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var dD=d(),Fe=function(t){return function(r){return new y(C("button")(t)(dD(S(dD(h($)(r))))))}},Rl=Fe(A(s));var yD=d(),Nl=function(t){return function(r){return new y(C("circle")(t)(yD(S(yD(h($)(r))))))}};var gD=d(),SD=function(t){return function(r){return new y(C("code")(t)(gD(S(gD(h($)(r))))))}},Or=SD(A(s));var $D=d(),CD=function(t){return function(r){return new y(C("i")(t)($D(S($D(h($)(r))))))}},Bl=CD(A(s));var hD=d(),FD=function(t){return function(r){return new y(C("li")(t)(hD(S(hD(h($)(r))))))}},Ul=FD(A(s));var TD=d(),xD=function(t){return function(r){return new y(C("pre")(t)(TD(S(TD(h($)(r))))))}},Rr=xD(A(s));var ED=d(),Wl=function(t){return function(r){return new y(C("svg")(t)(ED(S(ED(h($)(r))))))}};var MD=d(),wD=function(t){return function(r){return new y(C("ul")(t)(MD(S(MD(h($)(r))))))}},Hl=wD(A(s));var Yn=V(Bn),rT=A(ls),Yf=function(){function t(){}return t.value=new t,t}(),ki=function(){function t(){}return t.value=new t,t}(),Ai=function(){function t(){}return t.value=new t,t}(),di=function(){function t(){}return t.value=new t,t}(),yi=function(){function t(){}return t.value=new t,t}(),gi=function(){function t(){}return t.value=new t,t}(),Si=function(){function t(){}return t.value=new t,t}(),$i=function(){function t(){}return t.value=new t,t}(),Ci=function(){function t(){}return t.value=new t,t}(),hi=function(){function t(){}return t.value=new t,t}(),ID=function(t){return t==="Intro"?Yn(Yf.value):t==="HelloWorld"?Yn(ki.value):t==="SimpleComponent"?Yn(Ai.value):t==="PURSX1"?Yn(di.value):t==="PURSX2"?Yn(yi.value):t==="Events"?Yn(gi.value):t==="Effects"?Yn(Si.value):t==="Events2"?Yn($i.value):t==="Portals"?Yn(Ci.value):t==="SSR"?Yn(hi.value):rT};function ql(){window.scrollTo(0,0)}var ce=ql;var PD=A(s),OD=Ht($r),nT=R(Er),uT=Me(Se),aT=An(Mt)(s),LD=V(Yt),iT=V(gr),oT={reflectType:function(){return"~"}},fT=Tr(),cT=Ct(Yu),pT=d();var Vr={pursxToElement:function(t){return function(r){return function(e){return{cache:Zu,element:function(n){return function(u){return PD}}}}}}},zl=function(t){return t.pursxToElement},pe=function(){return function(t){var r=zl(t);return function(e){var n=La(e);return function(u){var f=Bf(u)();return{pursxToElement:function(l){return function(_){return function(b){var D=r(l)(et.value)(b);return{cache:li(n(et.value))(!0)(D.cache),element:function(T){return function(O){return OD(nT(uT(Nf)(function(U){if(U.value instanceof so)return O.setProp({id:n(et.value)+("@!%"+l),key:U.key,value:U.value.value0});if(U.value instanceof mo)return O.setCb({id:n(et.value)+("@!%"+l),key:U.key,value:U.value.value0});if(U.value instanceof Rf)return O.unsetAttribute({id:n(et.value)+("@!%"+l),key:U.key});throw new Error("Failed pattern match at Deku.Pursx (line 4579, column 40 - line 4593, column 26): "+[U.value.constructor.name])}))(f(et.value)(b)))(D.element(T)(O))}}}}}}}}}}};var Vl=function(t){var r=La(t);return function(e){var n=La(e);return function(){return function(){return function(u){var f=zl(u);return function(l){return function(_){return function(b){var D=function(T){return function(O){return _n(function(U,B){var p=O.ids(),m=O.ids();T.raiseId(p)();var Q=f(m)(et.value)(b),ot=U(aT([LD(O.makePursx({id:p,parent:T.parent,cache:Q.cache,dynFamily:T.dynFamily,pos:T.pos,pxScope:m,scope:T.scope,html:r(_),verb:n(l)})),Q.element(T)(O),rr(PD)(function(Z){return LD(O.attributeParent({id:p,parent:Z,pos:T.pos,dynFamily:T.dynFamily,ez:!1}))})(T.parent)]),B);return function(){return B(O.deleteFromCache({id:p})),ot()}})}};return new y(D)}}}}}}}},Gr=function(t){var r=Vl(t)(oT)()();return function(){return function(){return function(e){return r(e)(et.value)}}}},RD=function(t){var r=Gr(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},lT=function(t){return function(r){return function(e){return vn({doLogic:function(n){return function(u){return function(f){return u.sendToPos({id:f,pos:n})}}},ids:function(n){return function(u){return u.ids}(fT(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:cT})}},toElt:function(n){return n}})(t)(r)(pT(e))}}},le=function(){return function(t){var r=zl(t);return function(e){var n=La(e);return function(u){var f=Bf(u)();return{pursxToElement:function(l){return function(_){return function(b){var D=f(et.value)(b),T=r(l)(et.value)(b);return{cache:li(n(et.value))(!1)(T.cache),element:function(O){return function(U){return OD(lT({parent:new v(n(et.value)+("@!%"+l)),scope:O.scope,raiseId:function(B){return iT(void 0)},pos:O.pos,ez:!1,dynFamily:P.value})(U)(D))(T.element(O)(U))}}}}}}}}}}};var Gl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState')
import Deku.Do as Deku
import Deku.Pursx ((~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState'
  myDom ~~
    { myli: pure (D.Style := "background-color:rgb(200,240,210);")
    , somethingNew:
        ( D.button (pure (D.OnClick := push (Just unit)))
            [ text
                $ (compact event $> "Thanks for clicking me!") <|>
                    pure "I was dynamically inserted"
            ]
        )
    }`,jl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Xl=`module Main where

import Prelude

import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState unit
  portal
    ( map
        ( \\i -> D.video
            (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
            [ D.source
                (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                []
            ]
        )
        ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
            : "https://www.w3schools.com/jsref/movie.mp4"
            : V.empty
        )
    )
    \\(v /\\ _) -> do
      let
        p0 :: Domable _ _
        p0 = index (Proxy :: _ 0) v

        p1 :: Domable _ _
        p1 = index (Proxy :: _ 1) v

        ev :: Boolean -> Event Boolean
        ev b = fold (\\a _ -> not a) b event

        flips :: Boolean -> Domable _ _
        flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
      D.div_
        [ D.button (pure $ D.OnClick := push unit)
            [ text_ "Switch videos" ]
        , D.div_ [ D.span_ [ flips true ], flips false ]
        ]
`,Jl=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,Kl=`module Main where

import Prelude

import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn)
import Deku.DOM as D
import Deku.Hooks (useDyn_, useState')
import Deku.Do as Deku
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

main :: Effect Unit
main = runInBody Deku.do
  pushAction /\\ actionEvent <- useState'
  let
    accumulateTextAndEmitOnSubmit :: Event String
    accumulateTextAndEmitOnSubmit = compact
      ( mapAccum
          ( \\a b -> case b of
              AddTodo -> a /\\ Just a
              ChangeText s -> s /\\ Nothing
          )
          ""
          actionEvent
      )

    top :: Nut
    top =
      D.div_
        [ D.input
            ( oneOf
                [ textInput $ pure (pushAction <<< ChangeText)
                , keyUp $ pure \\evt -> do
                    when (code evt == "Enter") $ do
                      pushAction AddTodo
                ]
            )
            []
        , D.button
            (click $ pure $ pushAction AddTodo)
            [ text_ "Add" ]
        ]
  D.div_
    [ top
    , dyn
        $ map
            ( \\txt -> Deku.do
                { remove, sendTo } <- useDyn_
                D.div_
                  [ text_ txt
                  , D.button
                      (click $ pure (sendTo 0))
                      [ text_ "Prioritize" ]
                  , D.button
                      (click $ pure remove)
                      [ text_ "Delete" ]
                  ]
            )
            accumulateTextAndEmitOnSubmit
    ]

`,Ql=`module Main where

import Prelude

import Data.Tuple.Nested ((/\\))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)

main :: Effect Unit
main = runInBody Deku.do
  setButtonClicked /\\ buttonClicked <- useState unit
  setSliderMoved /\\ sliderMoved <- useState 50.0
  let
    countUp :: Event Int
    countUp = fold (\\a _ -> 1 + a) (-1) buttonClicked
  D.div_
    [ D.button
        (click_ (setButtonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            (("Val: " <> _) <<< show <$> countUp)
        ]
    , D.div_
        [ D.input
            (slider (pure setSliderMoved))
            []
        , D.div_
            [ text
                (("Val: " <> _) <<< show <$> sliderMoved)
            ]
        ]
    ]
`,Yl=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody Deku.do
  setUIAction /\\ uiAction <- useState Initial
  let
    split :: { left :: Event Unit, right :: Event String }
    split = separate $ compact $
      map
        ( case _ of
            Loading -> Just $ Left unit
            Result s -> Just $ Right s
            _ -> Nothing
        )
        uiAction
    { left: loading, right: result } = split
  D.div_
    [ D.div_
        [ D.button (click_ (clickCb setUIAction))
            [ text
                ( pure clickText
                    <|> (loading $> "Loading...")
                    <|> (result $> clickText)
                )
            ]
        ]
    , D.div
        ( (pure (D.Style := "display: none;")) <|>
            ( compact
                ( mapAccum
                    ( \\b _ -> (b && false) /\\
                        if b then Just unit else Nothing
                    )
                    true
                    result
                ) $> (D.Style := "display: block;")
            )
        )
        [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
    ]
`,Zl=`module Main where

import Prelude

import Data.Foldable (oneOf)
import Deku.Attribute ((!:=), (:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  ( D.div_
      [ D.button_ [ text_ "I do nothing" ]
      , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
      , D.div_
          [ D.a (pure $ D.Href := "https://example.com")
              [ text_ "foo " ]
          , D.i_ [ text_ " bar " ]
          , D.span (pure $ D.Style := "font-weight: 800;")
              [ text_ " baz" ]
          ]
      , D.svg (oneOf [ D.Height !:= "100", D.Width !:= "100" ])
          [ D.circle
              ( oneOf
                  [ D.Cx !:= "50"
                  , D.Cy !:= "50"
                  , D.R !:= "40"
                  , D.Stroke !:= "black"
                  , D.StrokeWidth !:= "3"
                  , D.Fill !:= "red"
                  ]
              )
              []
          ]

      ]
  )`,t_=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,r_=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( pure
        """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>""" <> runSSR app <> pure "</html>"
    ) >>= log`,e_=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function ND(t){return t.target}function jr(t){return function(){return t.preventDefault()}}function BD(t,r,e){return t==null?r:e(t)}function n_(t){return t}var Fi=rr(null)(n_),re=function(t){return BD(t,P.value,v.create)};var ec=function(t){return re(ND(t))};var WD=le(),kT=Gr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(WD(pe()(WD(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),AT=R(Dr),dT=V(sa),u_=V(Yt),HD=Rt(Qr),yT=Rt(Di),qD=An(Mt)(s),gT=Du(vD),ST=Du(kD),$T=Du(pD),CT=Du(lD),hT=Du(sD),FT=Du(mD),TT=Du(bD),xT=Du(_D),ET=Lr(Mt)(s),MT=Rt(Yr),zD=kr(Pr),wT=function(){return et.value}(),VD=function(t){return kT(wT)({code:Rr([Or([k(Zl)])]),result:br([Rl([k("I do nothing")]),Hl(AT(function(r){return Ul(dT(k(r)))})(["A","B","C"])),br([yo(u_(HD(Hr.value)("https://example.com")))([k("foo ")]),Bl([k(" bar ")]),aa(u_(yT(Ae.value)("font-weight: 800;")))([k(" baz")])]),Wl(qD([gT(Il.value)("100"),ST(So.value)("100")]))([Nl(qD([$T(El.value)("50"),CT(Ml.value)("50"),hT(Ll.value)("40"),FT(Pl.value)("black"),TT(Ol.value)("3"),xT(wl.value)("red")]))([])])]),next:ET(u_)([MT(dr.value)(Ar(function(r){return zD(zD(jr(r))(t.dpage(di.value)))(ce)})),HD(Hr.value)(t.slug+"pursx1/")])})};function GD(t,r,e,n,u){return function(f,l){var _=t.newXHR(),b=t.fixupUrl(u.url,_);if(_.open(u.method||"GET",b,!0,u.username,u.password),u.headers)try{for(var D=0,T;(T=u.headers[D])!=null;D++)_.setRequestHeader(T.field,T.value)}catch(U){f(U)}var O=function(U){return function(){f(new Error(U))}};return _.onerror=O(e),_.ontimeout=O(r),_.onload=function(){l({status:_.status,statusText:_.statusText,headers:_.getAllResponseHeaders().split(`\r
`).filter(function(U){return U.length>0}).map(function(U){var B=U.indexOf(":");return n(U.substring(0,B))(U.substring(B+2))}),body:_.response})},_.responseType=u.responseType,_.withCredentials=u.withCredentials,_.timeout=u.timeout,_.send(u.content),function(U,B,p){try{_.abort()}catch(m){return B(m)}return p()}}}var nc="application/json",jD="application/x-www-form-urlencoded";var JD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),KD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),QD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),YD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ZD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),a_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),i_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),tk=function(t){return t instanceof a_?new v(jD):t instanceof i_?new v(nc):P.value};var rk=Tr();var uc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ac=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ek=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),nk=function(t){if(t instanceof uc||t instanceof ac)return rk(t.value0);if(t instanceof ek)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var o_=function(t){if(t instanceof uc)return"Accept";if(t instanceof ac)return"Content-Type";if(t instanceof ek)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var uk=Ut(Wt),f_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),c_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),p_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),$o=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),l_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ic=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ak=function(t){if(t instanceof f_)return"arraybuffer";if(t instanceof c_)return"blob";if(t instanceof p_)return"document";if(t instanceof $o||t instanceof l_)return"text";if(t instanceof ic)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},ik=function(t){return t instanceof $o?new v(nc):P.value};var ok=function(){return new $o(uk)}(),fk=function(){return new ic(uk)}();var pk=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function Ti(t){return new Error(t)}function Co(t){return t.message}function ho(t){return function(){throw t}}var En=function(t){return t.throwError};var gu=function(t){return t.catchError};var fc=function(t){var r=gu(t),e=t.MonadThrow0().Monad0(),n=R(e.Bind1().Apply0().Functor0()),u=V(e.Applicative0());return function(f){return r(n(ct.create)(f))(function(l){return u(pt.create(l))})}};var Mn=function(t){return t.liftEffect};var UT=R(ka);var __=function(t){return t};var v_=function(t){return t};var vc=function(t){return function(r){return t(r)}},_k=function(t){var r=R(t);return{map:function(e){return vc(r(UT(e)))}}};var s_=function(t){return{Applicative0:function(){return wo(t)},Bind1:function(){return m_(t)}}},m_=function(t){var r=yt(t.Bind1()),e=V(t.Applicative0());return{bind:function(n){return function(u){return r(n)(ge(function(f){return e(pt.create(f))})(function(f){var l=u(f);return l}))}},Apply0:function(){return vk(t)}}},vk=function(t){var r=_k(t.Bind1().Apply0().Functor0());return{apply:Be(s_(t)),Functor0:function(){return r}}},wo=function(t){return{pure:function(){var r=V(t.Applicative0());return function(e){return __(r(ct.create(e)))}}(),Apply0:function(){return vk(t)}}};var sk=function(t){var r=s_(t);return{throwError:function(){var e=V(t.Applicative0());return function(n){return __(e(pt.create(n)))}}(),Monad0:function(){return r}}};var mk=function(t){var r=at(t);return function(e){var n=e.Bind1(),u=yt(n),f=V(e.Applicative0()),l=_k(n.Apply0().Functor0());return{alt:function(_){return function(b){return u(_)(function(D){if(D instanceof ct)return f(new ct(D.value0));if(D instanceof pt)return u(b)(function(T){if(T instanceof ct)return f(new ct(T.value0));if(T instanceof pt)return f(new pt(r(D.value0)(T.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[T.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[D.constructor.name])})}},Functor0:function(){return l}}}};var HT=Tr();var bk=function(t){return HT(v_(t))};function b_(t){return JSON.stringify(t)}function D_(t){return function(r){return JSON.stringify(r,null,t)}}var Dk=Zu;function Ak(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var dk=function(t){return Ak(pt.create,ct.create,t)};var mc=function(t){return function(r){return function(e){return e.replace(t,r)}}};var k_=function(t){return function(r){return r.join(t)}};function QT(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function Sk(t,r,e){try{return r(QT(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var bc=function(){return nl(Sk)(N(P.value))(v.create)}();var tx=Xt(Da),$k=R(Fr),rx=He(Sa)(Bn);var ex=function(t){return t};var Ck=function(){var t=function(n){if(n.value1 instanceof P)return bc(n.value0);if(n.value1 instanceof v)return tx($k(function(u){return function(f){return u+("="+f)}})(bc(n.value0)))(bc(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=$k(k_("&")),e=rx(t);return function(n){return r(e(ex(n)))}}();var ux=function(){function t(){}return t.value=new t,t}(),Lo=function(){function t(){}return t.value=new t,t}(),ax=function(){function t(){}return t.value=new t,t}(),hk=function(){function t(){}return t.value=new t,t}(),Fk=function(){function t(){}return t.value=new t,t}(),Tk=function(){function t(){}return t.value=new t,t}(),ix=function(){function t(){}return t.value=new t,t}(),ox=function(){function t(){}return t.value=new t,t}(),fx=function(){function t(){}return t.value=new t,t}(),cx=function(){function t(){}return t.value=new t,t}(),px=function(){function t(){}return t.value=new t,t}(),lx=function(){function t(){}return t.value=new t,t}(),_x=function(){function t(){}return t.value=new t,t}(),vx=function(){function t(){}return t.value=new t,t}(),sx=function(){function t(){}return t.value=new t,t}(),xk=function(){function t(){}return t.value=new t,t}();var mx=function(t){return t},bx={show:function(t){if(t instanceof ux)return"OPTIONS";if(t instanceof Lo)return"GET";if(t instanceof ax)return"HEAD";if(t instanceof hk)return"POST";if(t instanceof Fk)return"PUT";if(t instanceof Tk)return"DELETE";if(t instanceof ix)return"TRACE";if(t instanceof ox)return"CONNECT";if(t instanceof fx)return"PROPFIND";if(t instanceof cx)return"PROPPATCH";if(t instanceof px)return"MKCOL";if(t instanceof lx)return"COPY";if(t instanceof _x)return"MOVE";if(t instanceof vx)return"LOCK";if(t instanceof sx)return"UNLOCK";if(t instanceof xk)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Ek=ge(Dt(bx))(mx);var Ik=function(){var t=Cf(Up);return function(r){return hf(t(r))}}();var Lk=function(t){return t.value0};var qe=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",f="Async",l="Bind",_="Bracket",b="Fork",D="Sequential",T="Map",O="Apply",U="Alt",B="Cons",p="Resume",m="Release",Q="Finalizer",ot="Finalized",Z="Forked",tr="Fiber",Bt="Thunk";function K(st,fr,Mr,lr){this.tag=st,this._1=fr,this._2=Mr,this._3=lr}function Cr(st){var fr=function(Mr,lr,gt){return new K(st,Mr,lr,gt)};return fr.tag=st,fr}function qr(st){return new K(r,void 0)}function Oe(st){try{st()}catch(fr){setTimeout(function(){throw fr},0)}}function it(st,fr,Mr){try{return fr(Mr())}catch(lr){return st(lr)}}function G(st,fr,Mr){try{return fr(Mr)()}catch(lr){return Mr(st(lr))(),qr}}var W=function(){var st=1024,fr=0,Mr=0,lr=new Array(st),gt=!1;function ut(){var pr;for(gt=!0;fr!==0;)fr--,pr=lr[Mr],lr[Mr]=void 0,Mr=(Mr+1)%st,pr();gt=!1}return{isDraining:function(){return gt},enqueue:function(pr){var jt,hr;fr===st&&(hr=gt,ut(),gt=hr),lr[(Mr+fr)%st]=pr,fr++,gt||ut()}}}();function bt(st){var fr={},Mr=0,lr=0;return{register:function(gt){var ut=Mr++;gt.onComplete({rethrow:!0,handler:function(pr){return function(){lr--,delete fr[ut]}}})(),fr[ut]=gt,lr++},isEmpty:function(){return lr===0},killAll:function(gt,ut){return function(){if(lr===0)return ut();var pr=0,jt={};function hr(mr){jt[mr]=fr[mr].kill(gt,function(Br){return function(){delete jt[mr],pr--,st.isLeft(Br)&&st.fromLeft(Br)&&setTimeout(function(){throw st.fromLeft(Br)},0),pr===0&&ut()}})()}for(var ne in fr)fr.hasOwnProperty(ne)&&(pr++,hr(ne));return fr={},Mr=0,lr=0,function(mr){return new K(u,function(){for(var Br in jt)jt.hasOwnProperty(Br)&&jt[Br]()})}}}}}var _t=0,Nr=1,In=2,Cu=3,Ua=4,xe=5,pa=6;function wi(st,fr,Mr){var lr=0,gt=_t,ut=Mr,pr=null,jt=null,hr=null,ne=null,mr=null,Br=0,la=0,an=null,hu=!0;function Fu(St){for(var Tt,Zt,nr;;)switch(Tt=null,Zt=null,nr=null,gt){case In:gt=Nr;try{ut=hr(ut),ne===null?hr=null:(hr=ne._1,ne=ne._2)}catch(_e){gt=xe,pr=st.left(_e),ut=null}break;case Cu:st.isLeft(ut)?(gt=xe,pr=ut,ut=null):hr===null?gt=xe:(gt=In,ut=st.fromRight(ut));break;case Nr:switch(ut.tag){case l:hr&&(ne=new K(B,hr,ne)),hr=ut._2,gt=Nr,ut=ut._1;break;case r:hr===null?(gt=xe,ut=st.right(ut._1)):(gt=In,ut=ut._1);break;case u:gt=Cu,ut=it(st.left,st.right,ut._1);break;case f:gt=Ua,ut=G(st.left,ut._1,function(_e){return function(){lr===St&&(lr++,W.enqueue(function(){lr===St+1&&(gt=Cu,ut=_e,Fu(lr))}))}});return;case e:gt=xe,pr=st.left(ut._1),ut=null;break;case n:hr===null?mr=new K(B,ut,mr,jt):mr=new K(B,ut,new K(B,new K(p,hr,ne),mr,jt),jt),hr=null,ne=null,gt=Nr,ut=ut._1;break;case _:Br++,hr===null?mr=new K(B,ut,mr,jt):mr=new K(B,ut,new K(B,new K(p,hr,ne),mr,jt),jt),hr=null,ne=null,gt=Nr,ut=ut._1;break;case b:gt=Cu,Tt=wi(st,fr,ut._2),fr&&fr.register(Tt),ut._1&&Tt.run(),ut=st.right(Tt);break;case D:gt=Nr,ut=Py(st,fr,ut._1);break}break;case xe:if(hr=null,ne=null,mr===null)gt=pa,ut=jt||pr||ut;else switch(Tt=mr._3,nr=mr._1,mr=mr._2,nr.tag){case n:jt&&jt!==Tt&&Br===0?gt=xe:pr&&(gt=Nr,ut=nr._2(st.fromLeft(pr)),pr=null);break;case p:jt&&jt!==Tt&&Br===0||pr?gt=xe:(hr=nr._1,ne=nr._2,gt=In,ut=st.fromRight(ut));break;case _:Br--,pr===null&&(Zt=st.fromRight(ut),mr=new K(B,new K(m,nr._2,Zt),mr,Tt),(jt===Tt||Br>0)&&(gt=Nr,ut=nr._3(Zt)));break;case m:mr=new K(B,new K(ot,ut,pr),mr,jt),gt=Nr,jt&&jt!==Tt&&Br===0?ut=nr._1.killed(st.fromLeft(jt))(nr._2):pr?ut=nr._1.failed(st.fromLeft(pr))(nr._2):ut=nr._1.completed(st.fromRight(ut))(nr._2),pr=null,Br++;break;case Q:Br++,mr=new K(B,new K(ot,ut,pr),mr,jt),gt=Nr,ut=nr._1;break;case ot:Br--,gt=xe,ut=nr._1,pr=nr._2;break}break;case pa:for(var Ir in an)an.hasOwnProperty(Ir)&&(hu=hu&&an[Ir].rethrow,Oe(an[Ir].handler(ut)));an=null,jt&&pr?setTimeout(function(){throw st.fromLeft(pr)},0):st.isLeft(ut)&&hu&&setTimeout(function(){if(hu)throw st.fromLeft(ut)},0);return;case _t:gt=Nr;break;case Ua:return}}function wr(St){return function(){if(gt===pa)return hu=hu&&St.rethrow,St.handler(ut)(),function(){};var Tt=la++;return an=an||{},an[Tt]=St,function(){an!==null&&delete an[Tt]}}}function wt(St,Tt){return function(){if(gt===pa)return Tt(st.right(void 0))(),function(){};var Zt=wr({rethrow:!1,handler:function(){return Tt(st.right(void 0))}})();switch(gt){case _t:jt=st.left(St),gt=pa,ut=jt,Fu(lr);break;case Ua:jt===null&&(jt=st.left(St)),Br===0&&(gt===Ua&&(mr=new K(B,new K(Q,ut(St)),mr,jt)),gt=xe,ut=null,pr=null,Fu(++lr));break;default:jt===null&&(jt=st.left(St)),Br===0&&(gt=xe,ut=null,pr=null)}return Zt}}function Kt(St){return function(){var Tt=wr({rethrow:!1,handler:St})();return gt===_t&&Fu(lr),Tt}}return{kill:wt,join:Kt,onComplete:wr,isSuspended:function(){return gt===_t},run:function(){gt===_t&&(W.isDraining()?Fu(lr):W.enqueue(function(){Fu(lr)}))}}}function Ly(st,fr,Mr,lr){var gt=0,ut={},pr=0,jt={},hr=new Error("[ParAff] Early exit"),ne=null,mr=t;function Br(wr,wt,Kt){var St=wt,Tt=null,Zt=null,nr=0,Ir={},_e,Ii;t:for(;;)switch(_e=null,St.tag){case Z:if(St._3===t&&(_e=ut[St._1],Ir[nr++]=_e.kill(wr,function(Oy){return function(){nr--,nr===0&&Kt(Oy)()}})),Tt===null)break t;St=Tt._2,Zt===null?Tt=null:(Tt=Zt._1,Zt=Zt._2);break;case T:St=St._2;break;case O:case U:Tt&&(Zt=new K(B,Tt,Zt)),Tt=St,St=St._1;break}if(nr===0)Kt(st.right(void 0))();else for(Ii=0,_e=nr;Ii<_e;Ii++)Ir[Ii]=Ir[Ii]();return Ir}function la(wr,wt,Kt){var St,Tt,Zt,nr,Ir,_e;st.isLeft(wr)?(St=wr,Tt=null):(Tt=wr,St=null);t:for(;;){if(Zt=null,nr=null,Ir=null,_e=null,ne!==null)return;if(wt===null){lr(St||Tt)();return}if(wt._3!==t)return;switch(wt.tag){case T:St===null?(wt._3=st.right(wt._1(st.fromRight(Tt))),Tt=wt._3):wt._3=St;break;case O:if(Zt=wt._1._3,nr=wt._2._3,St){if(wt._3=St,Ir=!0,_e=pr++,jt[_e]=Br(hr,St===Zt?wt._2:wt._1,function(){return function(){delete jt[_e],Ir?Ir=!1:Kt===null?la(St,null,null):la(St,Kt._1,Kt._2)}}),Ir){Ir=!1;return}}else{if(Zt===t||nr===t)return;Tt=st.right(st.fromRight(Zt)(st.fromRight(nr))),wt._3=Tt}break;case U:if(Zt=wt._1._3,nr=wt._2._3,Zt===t&&st.isLeft(nr)||nr===t&&st.isLeft(Zt))return;if(Zt!==t&&st.isLeft(Zt)&&nr!==t&&st.isLeft(nr))St=Tt===Zt?nr:Zt,Tt=null,wt._3=St;else if(wt._3=Tt,Ir=!0,_e=pr++,jt[_e]=Br(hr,Tt===Zt?wt._2:wt._1,function(){return function(){delete jt[_e],Ir?Ir=!1:Kt===null?la(Tt,null,null):la(Tt,Kt._1,Kt._2)}}),Ir){Ir=!1;return}break}Kt===null?wt=null:(wt=Kt._1,Kt=Kt._2)}}function an(wr){return function(wt){return function(){delete ut[wr._1],wr._3=wt,la(wt,wr._2._1,wr._2._2)}}}function hu(){var wr=Nr,wt=Mr,Kt=null,St=null,Tt,Zt;t:for(;;)switch(Tt=null,Zt=null,wr){case Nr:switch(wt.tag){case T:Kt&&(St=new K(B,Kt,St)),Kt=new K(T,wt._1,t,t),wt=wt._2;break;case O:Kt&&(St=new K(B,Kt,St)),Kt=new K(O,t,wt._2,t),wt=wt._1;break;case U:Kt&&(St=new K(B,Kt,St)),Kt=new K(U,t,wt._2,t),wt=wt._1;break;default:Zt=gt++,wr=xe,Tt=wt,wt=new K(Z,Zt,new K(B,Kt,St),t),Tt=wi(st,fr,Tt),Tt.onComplete({rethrow:!1,handler:an(wt)})(),ut[Zt]=Tt,fr&&fr.register(Tt)}break;case xe:if(Kt===null)break t;Kt._1===t?(Kt._1=wt,wr=Nr,wt=Kt._2,Kt._2=t):(Kt._2=wt,wt=Kt,St===null?Kt=null:(Kt=St._1,St=St._2))}for(mr=wt,Zt=0;Zt<gt;Zt++)ut[Zt].run()}function Fu(wr,wt){ne=st.left(wr);var Kt;for(var St in jt)if(jt.hasOwnProperty(St)){Kt=jt[St];for(St in Kt)Kt.hasOwnProperty(St)&&Kt[St]()}jt=null;var Tt=Br(wr,mr,wt);return function(Zt){return new K(f,function(nr){return function(){for(var Ir in Tt)Tt.hasOwnProperty(Ir)&&Tt[Ir]();return qr}})}}return hu(),function(wr){return new K(f,function(wt){return function(){return Fu(wr,wt)}})}}function Py(st,fr,Mr){return new K(f,function(lr){return function(){return Ly(st,fr,Mr,lr)}})}return K.EMPTY=t,K.Pure=Cr(r),K.Throw=Cr(e),K.Catch=Cr(n),K.Sync=Cr(u),K.Async=Cr(f),K.Bind=Cr(l),K.Bracket=Cr(_),K.Fork=Cr(b),K.Seq=Cr(D),K.ParMap=Cr(T),K.ParApply=Cr(O),K.ParAlt=Cr(U),K.Fiber=wi,K.Supervisor=bt,K.Scheduler=W,K.nonCanceler=qr,K}(),Ok=qe.Pure,Rk=qe.Throw;function Nk(t){return function(r){return qe.Catch(t,r)}}function Bk(t){return function(r){return r.tag===qe.Pure.tag?qe.Pure(t(r._1)):qe.Bind(r,function(e){return qe.Pure(t(e))})}}function Uk(t){return function(r){return qe.Bind(t,r)}}var Wk=qe.Sync;var Po=qe.Async;function Hk(t,r){return function(){return qe.Fiber(t,null,r)}}var Dx=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return qe.Async(function(u){return function(){var f=t(n,u(e()));return function(){return qe.Sync(function(){return e(r(n,f))})}}})}}(),kx=qe.Seq;var Ex=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}};var Mx=ar(z);var y_={map:Bk};var wx=function(){var t=function(n){if(n instanceof ct)return n.value0;if(n instanceof pt)return Wu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof pt)return n.value0;if(n instanceof ct)return Wu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof pt)return!0;if(n instanceof ct)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:pt.create,right:ct.create}}(),Ix=function(t){return Hk(wx,t)},Lx=function(t){return function(){var e=Ix(t)();return e.run(),e}},g_=function(t){return Mx(Lx(t))};var S_={Applicative0:function(){return Dc},Bind1:function(){return $_}},$_={bind:Uk,Apply0:function(){return Gk(0)}},Dc={pure:Ok,Apply0:function(){return Gk(0)}},Gk=Ex("applyAff","Effect.Aff",function(){return{apply:Be(S_),Functor0:function(){return y_}}});var Px=V(Dc);var C_={liftEffect:Wk,Monad0:function(){return S_}};var Ox={throwError:Rk,Monad0:function(){return S_}},jk={catchError:Nk,MonadThrow0:function(){return Ox}};var Xk=N(Px(void 0));var Jk=function(t){return Po(function(r){return function(){var n=t(function(u){return r(pt.create(u))()},function(u){return r(ct.create(u))()});return function(u){return Po(function(f){return function(){return n(u,function(_){return f(pt.create(_))()},function(_){return f(ct.create(_))()}),Xk}})}}})};function Ac(t){return Object.prototype.toString.call(t).slice(8,-1)}var Kk=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var Qk=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},we=function(t){return t};var dc=isFinite;var h_=Math.floor;var Oo=function(t){return function(r){return t%r}};var Yk=Rn(Wi),Zk=ou(Wi);var yc=function(){return Qk(v.create)(P.value)}(),zx=function(t){if(!dc(t))return 0;if(t>=we(Yk))return Yk;if(t<=we(Zk))return Zk;if(Ur)return ue(0)(yc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var T_=function(t){return zx(h_(t))};var Qx=Dt(Xe),Yx=Dt(Dn);var x_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Zx=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),tE=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),oa=rt,rE=rt;var Sc=function(t){if(t instanceof x_)return t.value0;if(t instanceof Zx)return"Error at array index "+(Yx(t.value0)+(": "+Sc(t.value1)));if(t instanceof tE)return"Error at property "+(Qx(t.value0)+(": "+Sc(t.value1)));if(t instanceof fA)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var E_=function(t){var r=En(sk(t));return function(e){return r(Ik(e))}};var cA=function(t){var r=V(wo(t)),e=E_(t);return function(n){return function(u){if(Ac(u)===n)return r(rE(u));if(Ur)return e(new fA(n,Ac(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var M_=V(wo(Ue)),nE=E_(Ue),Oa=cA(Ue),pA=Ht(mk(dm)(Ue)),uE=Ko(m_(Ue)),$c=R(Fr),aE=Ou(Mt)(kn),iE=Ct(Pn),oE=fu(ye),fE=R(Dr),cE=Ve(y_),pE=fc(jk),lE=V(Dc);var w_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),I_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),L_=function(){function t(){}return t.value=new t,t}(),P_=function(){function t(){}return t.value=new t,t}(),O_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),lA=function(t){return function(r){var e=function(T){return T===""?M_(Dk):ge(function(O){return nE(x_.create(O))})(M_)(dk(T))},n=function(){if(r.responseFormat instanceof f_)return Oa("ArrayBuffer");if(r.responseFormat instanceof c_)return Oa("Blob");if(r.responseFormat instanceof p_)return function(T){return pA(Oa("Document")(T))(pA(Oa("XMLDocument")(T))(Oa("HTMLDocument")(T)))};if(r.responseFormat instanceof $o)return uE(function(T){return r.responseFormat.value0(e(T))})(Oa("String"));if(r.responseFormat instanceof l_)return Oa("String");if(r.responseFormat instanceof ic)return N(r.responseFormat.value0(M_(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(T){if(T instanceof JD)return new ct(T.value0(oa));if(T instanceof KD)return new ct(oa(T.value0));if(T instanceof QD)return new ct(oa(T.value0));if(T instanceof YD)return new ct(oa(T.value0));if(T instanceof ZD)return new ct(oa(T.value0));if(T instanceof a_)return Gc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")($c(oa)(Ck(T.value0)));if(T instanceof i_)return new ct(oa(b_(T.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[T.constructor.name])},f=function(T){return function(O){return T instanceof v&&!aE(Pi(iE)(o_)(T.value0))(O)?Sf(O)(T.value0):O}},l=function(T){return f($c(ac.create)(oE(tk)(T)))(f($c(uc.create)(ik(r.responseFormat)))(r.headers))},_=function(T){return{method:Ek(r.method),url:r.url,headers:fE(function(O){return{field:o_(O),value:nk(O)}})(l(r.content)),content:T,responseType:ak(r.responseFormat),username:Fi(r.username),password:Fi(r.password),withCredentials:r.withCredentials,timeout:ue(0)($c(function(O){return O})(r.timeout))}},b=function(T){return cE(pE(Jk(GD(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",pk.create,_(T)))))(function(O){if(O instanceof ct){var U=bk(n(O.value0.body));if(U instanceof pt)return new pt(new I_(Lk(U.value0),O.value0));if(U instanceof ct)return new ct({body:U.value0,headers:O.value0.headers,status:O.value0.status,statusText:O.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[U.constructor.name])}if(O instanceof pt)return new pt(function(){var B=Co(O.value0),p=B==="AffjaxTimeoutErrorMessageIdent";if(p)return L_.value;var m=B==="AffjaxRequestFailedMessageIdent";return m?P_.value:new O_(O.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[O.constructor.name])})};if(r.content instanceof P)return b(Fi(P.value));if(r.content instanceof v){var D=u(r.content.value0);if(D instanceof ct)return b(Fi(new v(D.value0)));if(D instanceof pt)return lE(new pt(new w_(D.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[D.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},R_=function(t){if(t instanceof w_)return"There was a problem with the request content: "+t.value0;if(t instanceof I_)return"There was a problem with the response body: "+Sc(t.value0);if(t instanceof L_)return"There was a problem making the request: timeout";if(t instanceof P_)return"There was a problem making the request: request failed";if(t instanceof O_)return"There was a problem making the request: "+Co(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},fa=function(){return{method:new pt(Lo.value),url:"/",headers:[],content:P.value,username:P.value,password:P.value,withCredentials:!1,responseFormat:fk,timeout:P.value}}();var N_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var vA=lA(N_);var sE=yt($_),sA=Mn(C_),mA=le(),mE=Gr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(mA(pe()(mA(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),B_=Ze(Jn),No=V(Yt),bA=Rt(Yr),Cc=Ht($r),U_=J(Er),DA=Rt(nD),bE=mu(vo),DE=Xu(ke),kE=Lr(Mt)(s),kA=kr(Pr),AE=Rt(Qr);var dA=function(){function t(){}return t.value=new t,t}(),W_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),dE=function(){return et.value}(),AA="Click to get some random user data.",yE=function(t){return Ar(N(function(){return t(dA.value)(),g_(sE(vA({method:new pt(Lo.value),url:"https://randomuser.me/api/",headers:fa.headers,content:fa.content,username:fa.username,password:fa.password,withCredentials:fa.withCredentials,responseFormat:ok,timeout:fa.timeout}))(function(e){if(e instanceof pt)return sA(t(new W_("GET /api response failed to decode: "+R_(e.value0))));if(e instanceof ct)return sA(t(new W_(D_(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},yA=function(t){return mE(dE)({code:Rr([Or([k(Yl)])]),result:mi(function(r){return function(e){var n=B_(function(l){return l instanceof dA?new v(new pt(void 0)):l instanceof W_?new v(new ct(l.value0)):P.value})(e),u=B_(function(l){return l instanceof ct?new v(l.value0):P.value})(n),f=B_(function(l){return l instanceof pt?new v(void 0):P.value})(n);return br([br([Fe(No(bA(dr.value)(yE(r))))([tn(Cc(No(AA))(Cc(U_(f)("Loading..."))(U_(u)(AA))))])]),Kf(Cc(No(DA(Ae.value)("display: none;")))(U_(bE(DE(function(l){return function(_){return new X(l&&!1,function(){return l?new v(void 0):P.value}())}})(!0)(u)))(DA(Ae.value)("display: block;"))))([Rr([Or([tn(Cc(No(""))(u))])])])])}}),next:kE(No)([bA(dr.value)(Ar(function(r){return kA(kA(jr(r))(t.dpage(yi.value)))(ce)})),AE(Hr.value)(t.slug+"pursx2/")])})};var gA=d(),Ra=function(t){return function(r){return new y(C("input")(t)(gA(S(gA(h($)(r))))))}};var q_=function(){function t(){}return t.value=new t,t}(),SA={attr:function(t){return function(r){return a({key:"controls",value:c(r)})}}};var Bo=function(){function t(){}return t.value=new t,t}();var hc={attr:function(t){return function(r){return a({key:"input",value:Y(r)})}}};var Fc=function(){function t(){}return t.value=new t,t}();var z_={attr:function(t){return function(r){return a({key:"keyup",value:Y(r)})}}};var V_=function(){function t(){}return t.value=new t,t}();var hA={attr:function(t){return function(r){return a({key:"src",value:c(r)})}}};var Uo=function(){function t(){}return t.value=new t,t}();var FA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var TA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var EA=d(),MA=function(t){return function(r){return new y(C("p")(t)(EA(S(EA(h($)(r))))))}},G_=MA(A(s));var wA=d(),j_=function(t){return function(r){return new y(C("source")(t)(wA(S(wA(h($)(r))))))}};var IA=d(),X_=function(t){return function(r){return new y(C("video")(t)(IA(S(IA(h($)(r))))))}};function Tc(t){return function(){return t.value}}function J_(t){return function(){return t.valueAsNumber}}function PA(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var f=n;f!=null;){var l=Object.getPrototypeOf(f),_=l.constructor.name;if(_===e)return r(n);if(_==="Object")return t;f=l}return t}var lt=function(t){return function(r){return PA(P.value,v.create,t,r)}};var xc=lt("HTMLInputElement");function K_(t){return t.code}var Q_=lt("KeyboardEvent");var NA=R(Er),BE=Rt(hc),UE=Ke($e)(Qe),WE=yt(ye),HE=Qo(ga),BA=V(Yt),qE=Ht($r),zE=Rt(TA);var Ec=function(){var t=qE(BA(zE(Uo.value)("range"))),r=NA(function(e){return BE(Bo.value)(Ar(function(n){return UE(WE(ec(n))(xc))(HE(J_)(e))}))});return function(e){return t(r(e))}}();var Y_=function(t){return NA(Rt(t)(dr.value))},Mc=function(t){var r=Y_(t);return function(e){return r(BA(e))}};var UA=le(),VE=Gr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(UA(pe()(UA(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),GE=Gf()(fi({reflectSymbol:function(){return"buttonClicked"}})()()(fi({reflectSymbol:function(){return"sliderMoved"}})()()(Wf)()())()()),jE=Mc(na),tv=Ht($r),Wo=V(Yt),WA=R(Er),HA=at(Eu),XE=Dt(Dn),JE=ju(ke),KE=Dt(Hi),QE=Lr(Mt)(s),YE=Rt(Yr),qA=kr(Pr),ZE=Rt(Qr),tM=function(){return et.value}(),zA=function(t){return VE(tM)({code:Rr([Or([k(Ql)])]),result:GE(et.value)(function(r){return function(e){return br([Fe(jE(r.buttonClicked(void 0)))([k("Click")]),br([tn(tv(Wo("Val: 0"))(WA(function(){var n=HA("Val: ");return function(u){return n(XE(u))}}())(JE(function(n){return function(u){return 1+n|0}})(-1)(tv(Wo(void 0))(e.buttonClicked)))))]),br([Ra(Ec(Wo(r.sliderMoved)))([]),br([tn(tv(Wo("Val: 50.0"))(WA(function(){var n=HA("Val: ");return function(u){return n(KE(u))}}())(e.sliderMoved)))])])])}}),next:QE(Wo)([YE(dr.value)(Ar(function(r){return qA(qA(jr(r))(t.dpage(Si.value)))(ce)})),ZE(Hr.value)(t.slug+"effects/")])})};var wc=function(t){return function(r){return t(r)}};var eM=Ht($r),nM=V(Yt);var uM=Ma(ke);var aM=function(t){return function(r){return uM(wc(function(e){return ra(Pu(e))})(function(e){return eM(nM(Kb(t)(r({remove:e.value0(Tl),sendTo:function(n){return e.value0(Fl(n))}}))))(e.value1)}))}},GA=aM(0);var jA=le(),oM=Gr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(jA(pe()(jA(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),fM=Me(Se),Ic=Ht($r),eu=V(Yt),XA=Lr(Mt)(s),cM=Rt(eD),pM=Rt(hc),JA=Ke($e)(Qe),lM=yt(ye),_M=Qo(ga),vM=Rt(z_),sM=uu($e),rv=Rt(uD),KA=Rt(Yr),mM=R(Er),bM=Rt(Di),QA=Y_(na),DM=Ze(Jn),kM=Xu(ke),YA=kr(Pr),AM=Rt(Qr);var dM=function(){function t(){}return t.value=new t,t}(),ev=function(){function t(){}return t.value=new t,t}(),ZA=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yM=function(){return et.value}(),td=function(t){return oM(yM)({code:Rr([Or([k(Kl)])]),result:mi(function(r){return fM(function(e){return Ic(eu(dM.value))(e)})(function(e){return br([br([Ra(XA(eu)([cM(Ae.value)("border-style:solid;border-width: 1px;border-color: black;"),pM(Bo.value)(Ar(function(n){return JA(lM(ec(n))(xc))(_M(Tc)(function(u){return r(ZA.create(u))}))})),vM(Fc.value)(Ar(function(n){return JA(Q_(n))(function(u){return sM(K_(u)==="Enter")(r(ev.value))})}))]))([]),Fe(Ic(eu(rv(Ae.value)("margin: 5px;")))(eu(KA(dr.value)(Ar(N(r(ev.value)))))))([k("Add")])]),ea(mM(function(n){return wc(GA)(function(u){return br([aa(eu(bM(Ae.value)("margin: 5px;")))([k(n)]),Fe(Ic(eu(rv(Ae.value)("margin: 5px;")))(QA(eu(u.sendTo(0)))))([k("Prioritize")]),Fe(Ic(eu(rv(Ae.value)("margin: 5px;")))(QA(eu(u.remove))))([k("Delete")])])})})(DM(function(n){return n.value0?new v(n.value1):P.value})(kM(function(n){return function(u){return u instanceof ZA?new X(u.value0,new X(!1,u.value0)):u instanceof ev?new X(n,new X(!0,n)):new X("",new X(!1,""))}})("")(e))))])})}),next:XA(eu)([KA(dr.value)(Ar(function(r){return YA(YA(jr(r))(t.dpage(Ci.value)))(ce)})),AM(Hr.value)(t.slug+"portals/")])})};var rd=le(),SM=Gr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(rd(pe()(rd(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),$M=Lr(Mt)(s),CM=V(Yt),hM=Rt(Yr),ed=kr(Pr),FM=Rt(Qr),TM=function(){return et.value}(),nd=function(t){return SM(TM)({code:Rr([Or([k(Jl)])]),result:br([k("Hello world")]),next:$M(CM)([hM(dr.value)(Ar(function(r){return ed(ed(jr(r))(t.dpage(Ai.value)))(ce)})),FM(Hr.value)(t.slug+"component/")])})};var EM=Gr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(pe()(Vr)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),MM=Lr(Mt)(s),wM=V(Yt),IM=Rt(Yr),ud=kr(Pr),LM=Rt(Qr),PM=function(){return et.value}(),ad=function(t){return EM(PM)({next:MM(wM)([IM(dr.value)(Ar(function(r){return ud(ud(jr(r))(t.dpage(ki.value)))(ce)})),LM(Hr.value)(t.slug+"hello/")])})};var id=le(),RM=Gr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(id(pe()(id(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),NM=Me(Se),BM=Ht($r),Ei=V(Yt),UM=tD(),WM=R(pi),nv=Lr(Mt)(s),HM=Rt(SA),qM=Rt(DD),zM=Rt(hA),VM=Rt(FA),od=Sb()(),pd=ll()()()()(),GM=pd({reflectType:function(){return 1}}),jM=pd({reflectType:function(){return 0}}),XM=ju(ke),JM=V(sa),fd=Rt(Yr),cd=kr(Pr),KM=Rt(Qr);var QM=function(){return et.value}(),ld=function(t){return RM(QM)({code:Rr([Or([k(Xl)])]),result:ea(ra(function(r){return NM(BM(Ei(void 0)))(function(e){return Ei(si(UM(WM(function(n){return X_(nv(Ei)([HM(q_.value)("true"),qM(So.value)("250")]))([j_(nv(Ei)([zM(V_.value)(n),VM(Uo.value)("video/mp4")]))([])])})(od("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(od("https://www.w3schools.com/jsref/movie.mp4")(gb))))(function(n){var u=GM(et.value)(n.value0),f=jM(et.value)(n.value0),l=function(b){return XM(function(D){return function(T){return!D}})(b)(e)},_=function(){var b=Jf(function(D){return D?f:u});return function(D){return go(JM(b(l(D))))}}();return br([Fe(Ei(fd(dr.value)(Ar(N(r(void 0))))))([k("Switch videos")]),br([_(!0),_(!1)])])})))})})),next:nv(Ei)([fd(dr.value)(Ar(function(r){return cd(cd(jr(r))(t.dpage(hi.value)))(ce)})),KM(Hr.value)(t.slug+"ssr/")])})};var _d=le(),ZM=Gr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(_d(pe()(_d(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),tw=RD({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <svg height="100" width="100">
      <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
    </svg> 
    </div>
`}})()(Vr),rw=Lr(Mt)(s),ew=V(Yt),nw=Rt(Yr),vd=kr(Pr),uw=Rt(Qr),aw=function(){return et.value}(),iw=function(){return et.value}(),sd=function(t){return ZM(aw)({code:Rr([Or([k(jl)])]),result:tw(iw),next:rw(ew)([nw(dr.value)(Ar(function(r){return vd(vd(jr(r))(t.dpage(gi.value)))(ce)})),uw(Hr.value)(t.slug+"events1/")])})};var bd=le(),Dd=pe(),kd=bd(Vr),fw=Vl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(bd(Dd(kd({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Ho=V(Yt),cw=Gr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(Dd(kd({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),pw=Rt(rD),lw=Rt(na),_w=Ht($r),vw=J(Er),sw=mu(vo),mw=Lr(Mt)(s),bw=Rt(Yr),md=kr(Pr),Dw=Rt(Qr),kw=function(){return et.value}(),Aw=function(){return et.value}(),Ad=function(t){return fw(et.value)(kw)({code:Rr([Or([k(Gl)])]),result:ea(ra(function(r){return function(e){return Ho(si(cw(Aw)({myli:Ho(pw(Ae.value)("background-color:rgb(200,240,210);")),somethingNew:Fe(Ho(lw(dr.value)(r(new v(void 0)))))([tn(_w(vw(sw(e))("Thanks for clicking me!"))(Ho("I was dynamically inserted")))])})))}})),next:mw(Ho)([bw(dr.value)(Ar(function(r){return md(md(jr(r))(t.dpage($i.value)))(ce)})),Dw(Hr.value)(t.slug+"events2/")])})};var uv=()=>document.documentElement.querySelector("[data-deku-root]");var av=t=>()=>{t.hydrating=!0},iv=t=>()=>{t.hydrating=!1},dd=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(f=>()=>t(r.dynFamily)(l=>()=>{for(var _=0,b=0,D;b<n.childNodes.length;){if(n.childNodes[b].nodeType===8&&n.childNodes[b].nodeValue==="%-%"+l){b+=1;break}b++}let T=U=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[U]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[U])):n.insertBefore(e.units[r.id].main,n.childNodes[U])};for(;b<n.childNodes.length;){var O;if((O=n.childNodes[b].$dekuId)&&t(e.units[O].dynFamily)(B=>()=>t(e.units[O].pos)(m=>()=>l===B&&f<=m?(T(b),!0):!1)())())return!0;if(_===f||n.childNodes[b].nodeType===8&&n.childNodes[b].nodeValue==="%-%"+l+"%-%")return T(b),!0;n.childNodes[b].nodeType===8&&n.childNodes[b].nodeValue.substring(0,3)==="%-%"&&!D&&(D=n.childNodes[b].nodeValue+"%-%"),D||_++,n.childNodes[b].nodeType===8&&n.childNodes[b].nodeValue===D&&(D=void 0,_++),b++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(l=>()=>(e.units[r.id].main?e.units[l].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[l].endBeacon):(e.units[l].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[l].endBeacon),e.units[l].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(l=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[l].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[l].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[l].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},ov=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),f;f=u.nextNode();)f.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[f.nodeValue.substring(3)]=f)}e(document.documentElement)},yd=t=>r=>e=>n=>()=>{var u,f,l=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(l),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(f=n.allBeacons[`${e.id}%-%`])?(n.units[l]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:f},u.$dekuId=l,f.$dekuId=l,!0):!1)()){let b=document.createComment(`%-%${e.id}`),D=document.createComment(`%-%${e.id}%-%`);n.units[l]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:b,endBeacon:D},b.$dekuId=l,D.$dekuId=l}},gw=new Set(["animate","animateMotion","animateTransform","circle","clipPath","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","title","tspan","use","view"]);var gd=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),Sd=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),$d=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),Cd=t=>r=>e=>n=>()=>{var u,f=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(f),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${f}"]`))?(n.units[f]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=f,!0):!1)()){let _=gw.has(e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag);n.units[f]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:_},_.$dekuId=f}},hd=t=>r=>e=>n=>u=>()=>{var f=n.id,l;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(f),!t(n.parent)(b=>()=>{if(u.hydrating&&r&&(l=document.documentElement.querySelector(`[data-deku-ssr="${b}"]`))){for(var D=0;D<l.childNodes.length;D++){let B=f.split("@-@");if(l.childNodes[D].nodeType===8&&l.childNodes[D].nodeValue===B[0]){D=D-1;var T=D===-1,O=D>=0&&l.childNodes[D].nodeType===8;T&&l.prepend(document.createTextNode("")),O&&l.insertBefore(document.createTextNode(""),l.childNodes[D+1]);break}}let U=l.childNodes[D];return u.units[f]={main:U,pos:n.pos,parent:n.parent,scope:n.scope},U.$dekuId=f,!0}return!1})()){let b=document.createTextNode("");u.units[f]={main:b,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},b.$dekuId=f}};function fv(){return{units:{},scopes:{},allBeacons:{}}}var Fd=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"||e.units[n].main.tagName==="TEXTAREA"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},Td=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var f=l=>u(l)();e.units[n].main.addEventListener(r.key,f),e.units[n].listeners[r.key]=f}}},xd=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.removeAttribute(r.key)}},Ed=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},Md=t=>r=>e=>n=>u=>()=>{var f,l,_=n.id,b=n.html,D=n.verb,T=n.cache,O=n.parent,U=n.scope,B=n.pxScope;let p=t(n.parent)(()=>()=>u.hydrating&&r&&(f=document.documentElement.querySelector(`[data-deku-ssr="${_}"]`))?(u.units[_]={listeners:{},pos:n.pos,scope:U,parent:O,main:f},f.$dekuId=_,!0):!1)();if(!p){let Q=Object.entries(T);for(var m=0;m<Q.length;m++){let ot=Q[m][0];Q[m][1]===!0?b=b.replace(D+ot+D,'data-deku-attr-internal="'+ot+'"'):b=b.replace(D+ot+D,'<span style="display:contents;" data-deku-elt-internal="'+ot+'"></span>')}l=document.createElement("div"),l.innerHTML=b.trim(),u.units[_]={listeners:{},pos:n.pos,scope:U,parent:O,main:l.firstChild},l.firstChild.$dekuId=_}u.scopes[U]||(u.scopes[U]=[]),u.scopes[U].push(_),l||(l=f),l.querySelectorAll("[data-deku-attr-internal]").forEach(function(Q){var ot=Q.getAttribute("data-deku-attr-internal");let Z=ot+"@!%"+B;u.units[Z]={listeners:{},main:Q,scope:U},u.scopes[U].push(Z)}),l.querySelectorAll("[data-deku-elt-internal]").forEach(function(Q){var ot=Q.getAttribute("data-deku-elt-internal");let Z=ot+"@!%"+B;u.units[ot+"@!%"+B]={listeners:{},main:Q,scope:U},u.scopes[U].push(Z)}),p||u.units[_].main.remove()},wd=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},cv=t=>r=>e=>n=>()=>{let u=(p,m,Q)=>{if(n.units[p].startBeacon){var ot=n.units[p].startBeacon,Z=ot.nextSibling;for(n.units[m].main.insertBefore(ot,Q),ot=Z;ot&&ot!==n.units[p].endBeacon;)Z=ot.nextSibling,n.units[m].main.insertBefore(ot,Q),ot=Z}else n.units[m].main.insertBefore(n.units[p].main,Q)},f=[];f.push(e);for(var l=0;l<f.length;l++){let p=f[l],m=p.id,Q=p.parent;n.units[m].containingScope=p.scope;var _=void 0;r(p.pos)(Z=>()=>(_=Z,!0))(),_===void 0&&(_=Number.MAX_VALUE);let ot=n.units[Q].main.childNodes;for(var b=0,D=!1,T=0;b<ot.length;){var O;if(O=ot[b].$dekuId){if(r(p.dynFamily)(tr=>()=>D?!1:n.units[O].endBeacon===ot[b]&&tr===O?(n.units[m].pos=t(T),u(m,Q,ot[b]),!0):!1)()){D=!0;break}if(n.units[O].dynFamily!==n.units[m].dynFamily){b++;continue}if(D){b++;continue}T===_?(u(m,Q,ot[b]),T++,D=!0):n.units[O].endBeacon!==ot[b]&&(n.units[O].pos=t(T),T++)}b++}if(D)return;if(n.units[m].main)n.units[Q].main.appendChild(n.units[m].main);else{var U=n.units[m].startBeacon,B=U.nextSibling;for(n.units[Q].main.appendChild(U),U=B;U&&U!==n.units[m].endBeacon;)B=U.nextSibling,n.units[Q].main.appendChild(U),U=B}}},Id=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let f=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(f.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,f.appendChild(n),n=u;n===r.units[e].endBeacon&&f.appendChild(n)}}},pv=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},Ld=pv;var Fw=qi(tf),Tw=Ne();var Pd=function(t){return t};var xw=1,lv=2147483647,Ew=function(){return lv-1|0}(),_v=function(t){var r=function(e){return function(n){return function(u){var f=n-e|0,l=Fw(u)(f),_=l<e;return _?l+n|0:l}}};return r(xw)(Ew)(t)};var Mw=0,ww=48271,Od=function(t){return function(r){return Tw(yc(Oo(we(ww)*we(r)+we(t))(we(lv))))}},Rd=Od(Mw);var Bw=function(){function t(l){this.fn=l}var r={},e=function(l,_){this.head=l,this.tail=_};function n(l){return new e(l,r)}function u(l){return function(_){return new e(l,_)}}function f(l){for(var _=[],b=l;b!==r;)_.push(b.head),b=b.tail;return _}return function(l){return function(_){return function(b){var D=function(O,U){return l(_(u)(b(O)))(U)},T=function(O,U,B){if(U===0)return O;var p=B[U-1];return new t(function(){var m=T(D(p,O),U-1,B);return m})};return function(O){for(var U=_(n)(b(O[O.length-1])),B=T(U,O.length-1,O);B instanceof t;)B=B.fn();return _(f)(B)}}}}}();var qo=function(t){var r=R(t);return{map:function(e){return function(n){return function(u){return r(function(f){return new X(e(f.value0),f.value1)})(n(u))}}}}};var mv=function(t){return{Applicative0:function(){return Oc(t)},Bind1:function(){return Lc(t)}}},Lc=function(t){var r=yt(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(f){var l=n(f.value0);return l(f.value1)})}}},Apply0:function(){return Pc(t)}}},Pc=function(t){var r=qo(t.Bind1().Apply0().Functor0());return{apply:Be(mv(t)),Functor0:function(){return r}}},Oc=function(t){var r=V(t.Applicative0());return{pure:function(e){return function(n){return r(new X(e,n))}},Apply0:function(){return Pc(t)}}};var Rc=function(t){var r=V(t.Applicative0()),e=mv(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var Vd=function(t){return function(r){var e=t(r);return e.value1}},Gd=function(t){return function(r){var e=t(r);return e.value0}};var r0=Rc(Ue),e0=Kn(r0);var n0=qo(lu);var u0=je(Bi);var a0=ve(Bi);var i0=function(t){return t};var o0=function(){var t=function(r){return new X(Pd(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=Rd(r.newSeed),e}())};return e0(t)}();var Jd=n0,Nc=R(Jd);var Dv=function(t){return Gd(i0(t))};var Kd=Pc(Ue),f0=Xt(Kd),Xd=function(t){return function(r){var e=we(r),n=we(t),u=function(_){return n+Oo(_)(e-n+1)},f=Nc(we)(o0),l=f0(Nc(a0)(f))(Nc(u0(2))(f));return Nc(function(_){return T_(u(_))})(l)}},Qd=function(t){return function(r){var e=t<=r;return e?Xd(t)(r):Xd(r)(t)}};var Zd=function(t){return t.arbitrary};var ty=function(){return{arbitrary:Qd(-1e6)(1e6)}}();var Ie=ar(ie),en=at(Jr),ey=Dt(Dn),ny=Zd(ty),uy=ve(ma),ry=V(gr),p0=V($e),nn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),un=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Le=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),de=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),wn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),$u=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Bc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Av=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),dv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),gv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),nu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ze=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),l0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new $u(t))])})(r))}},_0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new wn(t))])})(r))}},v0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new bn(t))])})(r))}},s0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new ze(new kv(t))])})(r))}},m0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new ze(new yv(t))])})(r))}},b0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new un(t))])})(r))}},D0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new ze(new Bc(t))])})(r))}},k0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new mn(t))])})(r))}},A0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new nn(t))])})(r))}},d0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new nu(new Le(t)),new nu(new de(t))])})(r))}},y0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new ze(new Av(t))])})(r))}},g0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new ze(new dv(t))])})(r))}},S0=function(t){return function(r){return Ie(xr(function(e){return en(e)([new ze(new gv(t))])})(r))}},ay=function(t){return{ids:function(){var e=Kr(t)(),n=ey(Dv(ny)({newSeed:_v(e),size:5}));return Ie(xr(uy(1))(t))(),n},makeElement:A0,attributeParent:function(r){return function(e){return ry(void 0)}},makeRoot:D0,makeText:b0,makePursx:k0,setProp:v0,unsetAttribute:l0,makeDynBeacon:d0,setCb:function(r){return function(e){return ry(void 0)}},setText:_0,sendToPos:s0,deleteFromCache:S0,removeDynBeacon:m0,giveNewParent:y0,disconnectElement:g0}},Na=function(t){return function(r){return t instanceof v?r(t.value0):p0(!1)}},$0=function(t){return function(r){return function(){var n=$d(t.id)(r)(),u=Sd(t.id)(r)(),f=gd(t.id)(r)(),l={scope:n,parent:u,dynFamily:f,id:t.id,pos:new v(t.pos),ez:!1};return cv(v.create)(Na)(l)(r)()}}},iy=function(t){return{ids:function(){var e=Kr(t)(),n=ey(Dv(ny)({newSeed:_v(e),size:5}));return Ie(xr(uy(1))(t))(),n},makeElement:Cd(Na)(!0),makeDynBeacon:yd(Na)(!0),attributeParent:dd(Na),makeRoot:wd,makeText:hd(Na)(!0)(rr(void 0)),makePursx:Md(Na)(!0)(rr(void 0)),setProp:Fd(!0),setCb:Td(!0),unsetAttribute:xd(!0),setText:Ed,sendToPos:$0,deleteFromCache:pv,removeDynBeacon:Ld,giveNewParent:cv(v.create)(Na),disconnectElement:Id}};var Sv=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),$v=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let f=r,l=Object.entries(n);for(var _=0;_<l.length;_++){let O=l[_][0];l[_][1]===!0?f=f.replace(u+O+u,'data-deku-attr-internal="'+O+'" data-deku-ssr="'+O+"@!%"+e+'"'):f=f.replace(u+O+u,'<span style="display:contents;" data-deku-elt-internal="'+O+'" data-deku-ssr="'+O+"@!%"+e+'"></span>')}let b=f.indexOf(">"),D=f.indexOf("/>"),T=D==b-1?D:b;return f.slice(0,T)+' data-deku-ssr="'+t+'" '+f.slice(T)};var h0=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},fy=R(io),ca=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),cy=function(t){var r=!1,e;function n(u){if(u.value1 instanceof dt)return r=!0,new v(new X(u.value1.value0,new ca(u.value0,u.value1.value1)));if(u.value0 instanceof er&&u.value1 instanceof er)return r=!0,P.value;if(u.value1 instanceof er){t=new ca(er.value,Tf(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Vo=function(t){var r=!1,e;function n(u){if(u.value0 instanceof er&&u.value1 instanceof er)return r=!0,P.value;if(u.value0 instanceof er){t=new ca(Tf(u.value1),er.value);return}if(u.value0 instanceof dt)return r=!0,new v(new X(u.value0.value0,new ca(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},yr=function(t){return function(r){return new ca(t.value0,new dt(r,t.value1))}};var Uc={map:function(t){return function(r){return new ca(fy(t)(r.value0),fy(t)(r.value1))}}},zo={foldMap:function(t){return ap(zo)(t)},foldr:function(t){return ip(zo)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,f=!1,l;function _(b,D){var T=Vo(D);if(T instanceof v){u=t(b)(T.value0.value0),n=T.value0.value1;return}if(T instanceof P)return f=!0,b;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[T.constructor.name])}for(;!f;)l=_(u,n);return l}};return r}},Cv=or(zo),hv={append:Cv(yr)},Te=function(){return new ca(er.value,er.value)}(),py={mempty:Te,Semigroup0:function(){return hv}},ly=yr(Te),_y=function(t){var r=Sr(t)(py);return function(e){return r(ly)(e)}},Fv={traverse:function(t){var r=t.Apply0(),e=R(r.Functor0()),n=Zr(r),u=V(t);return function(f){var l=e(Cv(yr)(Te)),_=Cv(function(b){var D=n(yr)(b);return function(T){return D(f(T))}})(u(Te));return function(b){return l(_(b))}}},sequence:function(t){return Fp(Fv)(t)},Functor0:function(){return Uc},Foldable1:function(){return zo}};var vy=function(t){return function(r){return new ca(new dt(t,r.value0),r.value1)}},F0={Applicative0:function(){return Tv},Bind1:function(){return T0}},T0={bind:_r(Sr(zo)(py)),Apply0:function(){return sy(0)}},Tv={pure:ly,Apply0:function(){return sy(0)}},sy=h0("applyCatQueue","Data.CatQueue",function(){return{apply:Be(F0),Functor0:function(){return Uc}}});var E0=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},Mi=at(Jr),Dy=Tr(),Iv=R(Dr),M0=Yo(Va),w0=Ve(Dr),xv=ar(qo(lu)),Ev=vi(Rc(Ue)),Mv=Gu(Ee),my=Ze(Bm),I0=za(Ga)(Lc(Ue)),Pe=Ct(Iu(Pn)),Ba=at(hv),L0=V(Tv),by=R(Uc),P0=_y(Mt),O0=Ve(Vu),R0=yt(ye),wv=fo(Ee),N0=mu(If),ky=Oc(Ue),B0=He(Fv)(ky),Go=Ke(ky)(Qe),U0=pu(Mt)(Vi),W0=Sr(Mt)(Vi),H0=or(fe);var q0=function(t){var r=function(e){return function(n){return function(u){return function(f){if(f instanceof P)return{acc:e,rest:[]};if(f instanceof v){if(f.value0.head instanceof Le){var l=r([])(new v({id:f.value0.head.value0.id,e:f.value0.head.value0}))(f.value0.tail);return r(Mi(e)(l.acc))(n)(l.rest)}if(f.value0.head instanceof de){if(n instanceof v)return{acc:[{pos:n.value0.e.pos,elt:new ct({o:n.value0.e,a:e,c:f.value0.head.value0})}],rest:f.value0.tail};if(n instanceof P)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var _=function(){if(f.value0.head instanceof nn||f.value0.head instanceof un||f.value0.head instanceof mn||f.value0.head instanceof Le||f.value0.head instanceof de)return f.value0.head.value0.pos;if(f.value0.head instanceof bn)return P.value;if(f.value0.head instanceof $u)return P.value;if(f.value0.head instanceof wn)return P.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 75, column 33): "+[f.value0.head.constructor.name])}();return r(Mi(e)([{pos:_,elt:new pt(f.value0.head)}]))(n)(f.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 77, column 15): "+[f.constructor.name])}(wp(u))}}};return r([])(P.value)(t).acc},Ay=E0("sortSortableDyns","Deku.SSR",function(){var t=Iv(function(e){if(e.elt instanceof pt)return e;if(e.elt instanceof ct)return{pos:e.pos,elt:new ct({o:e.elt.value0.o,c:e.elt.value0.c,a:Ay(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=gf(Pi(Et(ba(me)))(function(e){return function(n){return n.pos}(Dy(e))}));return function(e){return t(r(e))}}),z0=Ay(39),dy=function(t){return M0(w0(t)(function(r){return function(e){if(e instanceof pt)return[e.value0];if(e instanceof ct)return Mi([new Le(e.value0.o)])(Mi(dy(e.value0.a))([new de(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[e.constructor.name])}(function(e){return e.elt}(Dy(r)))}))},yy=function(t){return function(r){var e=function(m){return function(Q){return xv(Ev(function(ot){var Z={};for(var tr in ot)({}).hasOwnProperty.call(ot,tr)&&(Z[tr]=ot[tr]);return Z.idToActions=Mv(function(Bt){if(Bt instanceof v)return new v(my(function(K){if(K instanceof bn){if(K.value0.key===Q)return P.value;if(Ur)return new v(new bn(K.value0))}return new v(K)})(Bt.value0));if(Bt instanceof P)return P.value;throw new Error("Failed pattern match at Deku.SSR (line 294, column 17 - line 305, column 37): "+[Bt.constructor.name])})(m)(ot.idToActions),Z}))}},n=function(m){return function(Q){return xv(Ev(function(ot){var Z={};for(var tr in ot)({}).hasOwnProperty.call(ot,tr)&&(Z[tr]=ot[tr]);return Z.idToActions=Mv(function(Bt){if(Bt instanceof v)return new v(Mi(Bt.value0)([Q]));if(Bt instanceof P)return new v([Q]);throw new Error("Failed pattern match at Deku.SSR (line 315, column 17 - line 317, column 45): "+[Bt.constructor.name])})(m)(ot.idToActions),Z}))}},u=ue("deku-root")(uo(function(m){return m instanceof ze&&m.value0 instanceof Bc?new v(m.value0.value0.id):P.value})(r)),f=function(m){return function(Q){return function(ot){return I0(xv(Ev(function(Z){var tr={};for(var Bt in Z)({}).hasOwnProperty.call(Z,Bt)&&(tr[Bt]=Z[Bt]);return tr.parentToChild=Mv(function(K){if(K instanceof v)return new v(Mi(K.value0)([Q]));if(K instanceof P)return new v([Q]);throw new Error("Failed pattern match at Deku.SSR (line 281, column 19 - line 283, column 43): "+[K.constructor.name])})(m)(Z.parentToChild),tr})))(function(){return n(Q)(ot)})}}},l=function(m){var Q=function(it){return function(G){return function(W){if(W instanceof nn){var bt=W.value0.id===it||Pe(W.value0.dynFamily)(new v(W.value0.id));return bt?new nn({id:W.value0.id,scope:W.value0.scope,parent:W.value0.parent,tag:W.value0.tag,pos:new v(G),dynFamily:W.value0.dynFamily}):W}if(W instanceof un){var _t=W.value0.id===it||Pe(W.value0.dynFamily)(new v(W.value0.id));return _t?new un({id:W.value0.id,pos:new v(G),scope:W.value0.scope,parent:W.value0.parent,dynFamily:W.value0.dynFamily}):W}if(W instanceof mn){var Nr=W.value0.id===it||Pe(W.value0.dynFamily)(new v(W.value0.id));return Nr?new mn({id:W.value0.id,parent:W.value0.parent,html:W.value0.html,scope:W.value0.scope,pos:new v(G),pxScope:W.value0.pxScope,verb:W.value0.verb,cache:W.value0.cache,dynFamily:W.value0.dynFamily}):W}if(W instanceof Le){var In=W.value0.id===it||Pe(W.value0.dynFamily)(new v(W.value0.id));return In?new Le({id:W.value0.id,parent:W.value0.parent,pos:new v(G),scope:W.value0.scope,dynFamily:W.value0.dynFamily}):W}if(W instanceof de){var Cu=W.value0.id===it||Pe(W.value0.dynFamily)(new v(W.value0.id));return Cu?new de({id:W.value0.id,parent:W.value0.parent,pos:new v(G),scope:W.value0.scope,dynFamily:W.value0.dynFamily}):W}if(W instanceof wn||W instanceof bn||W instanceof $u)return W;throw new Error("Failed pattern match at Deku.SSR (line 199, column 24 - line 222, column 36): "+[W.constructor.name])}}},ot=function(it){return function(G){if(G instanceof nn){var W=G.value0.id===it||Pe(G.value0.dynFamily)(new v(G.value0.id));return W?new nn({id:G.value0.id,scope:G.value0.scope,parent:P.value,tag:G.value0.tag,pos:G.value0.pos,dynFamily:G.value0.dynFamily}):G}if(G instanceof un){var bt=G.value0.id===it||Pe(G.value0.dynFamily)(new v(G.value0.id));return bt?new un({id:G.value0.id,pos:G.value0.pos,scope:G.value0.scope,parent:P.value,dynFamily:G.value0.dynFamily}):G}if(G instanceof mn){var _t=G.value0.id===it||Pe(G.value0.dynFamily)(new v(G.value0.id));return _t?new mn({id:G.value0.id,parent:P.value,html:G.value0.html,scope:G.value0.scope,pos:G.value0.pos,pxScope:G.value0.pxScope,verb:G.value0.verb,cache:G.value0.cache,dynFamily:G.value0.dynFamily}):G}if(G instanceof Le){var Nr=G.value0.id===it||Pe(G.value0.dynFamily)(new v(G.value0.id));return Nr?new Le({id:G.value0.id,parent:P.value,pos:G.value0.pos,scope:G.value0.scope,dynFamily:G.value0.dynFamily}):G}if(G instanceof de){var In=G.value0.id===it||Pe(G.value0.dynFamily)(new v(G.value0.id));return In?new de({id:G.value0.id,parent:P.value,pos:G.value0.pos,scope:G.value0.scope,dynFamily:G.value0.dynFamily}):G}if(G instanceof wn||G instanceof bn||G instanceof $u)return G;throw new Error("Failed pattern match at Deku.SSR (line 223, column 24 - line 246, column 36): "+[G.constructor.name])}},Z=function(it){return function(G){return function(W){return function(bt){return function(_t){if(_t instanceof v&&_t.value0.value0 instanceof Le){if(Pe(_t.value0.value0.value0.dynFamily)(new v(W.id)))return Z(yr(Ba(it)(G))(_t.value0.value0))(Te)(W)(_t.value0.value1);if(Ur)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1)}if(_t instanceof v&&_t.value0.value0 instanceof de){if(Pe(_t.value0.value0.value0.dynFamily)(new v(W.id)))return Z(yr(Ba(it)(G))(_t.value0.value0))(Te)(W)(_t.value0.value1);if(Ur)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1)}if(_t instanceof v&&_t.value0.value0 instanceof un){if(Pe(_t.value0.value0.value0.dynFamily)(new v(W.id)))return Z(yr(Ba(it)(G))(_t.value0.value0))(Te)(W)(_t.value0.value1);if(Ur)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1)}if(_t instanceof v&&_t.value0.value0 instanceof mn){if(Pe(_t.value0.value0.value0.dynFamily)(new v(W.id)))return Z(yr(Ba(it)(G))(_t.value0.value0))(Te)(W)(_t.value0.value1);if(Ur)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1)}if(_t instanceof v&&_t.value0.value0 instanceof nn){if(Pe(_t.value0.value0.value0.dynFamily)(new v(W.id)))return Z(yr(Ba(it)(G))(_t.value0.value0))(Te)(W)(_t.value0.value1);if(Ur)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1)}if(_t instanceof v&&_t.value0.value0 instanceof bn)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1);if(_t instanceof v&&_t.value0.value0 instanceof $u)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1);if(_t instanceof v&&_t.value0.value0 instanceof wn)return Z(it)(yr(G)(_t.value0.value0))(W)(_t.value0.value1);if(_t instanceof P)return Ba(it)(Ba(L0(new de({id:W.id+"%-%",parent:W.parent,pos:W.pos,scope:W.scope,dynFamily:W.dynFamily})))(G));throw new Error("Failed pattern match at Deku.SSR (line 121, column 63 - line 176, column 20): "+[_t.constructor.name])}(Vo(bt))}}}},tr=function(it){return function(G){return function(W){if(W instanceof v&&W.value0.value0 instanceof de)return tr(Z(Te)(Te)(W.value0.value0.value0)(it))(W.value0.value1);if(W instanceof v)return tr(vy(W.value0.value0)(it))(W.value0.value1);if(W instanceof P)return it;throw new Error("Failed pattern match at Deku.SSR (line 108, column 45 - line 113, column 20): "+[W.constructor.name])}(cy(G))}},Bt=function(it){return function(G){return function(W){return function(bt){if(bt instanceof v&&bt.value0.value0 instanceof nn){var _t=bt.value0.value0.value0.id===G;return _t?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof un){var Nr=bt.value0.value0.value0.id===G;return Nr?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof mn){var In=bt.value0.value0.value0.id===G;return In?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof Le){var Cu=bt.value0.value0.value0.id===G;return Cu?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof de){var Ua=bt.value0.value0.value0.id===G;return Ua?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof bn){var xe=bt.value0.value0.value0.id===G;return xe?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof wn){var pa=bt.value0.value0.value0.id===G;return pa?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof v&&bt.value0.value0 instanceof $u){var wi=bt.value0.value0.value0.id===G;return wi?Bt(it)(G)(bt.value0.value1):Bt(yr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof P)return it;throw new Error("Failed pattern match at Deku.SSR (line 248, column 49 - line 273, column 20): "+[bt.constructor.name])}(Vo(W))}}},K=function(it){return function(G){return function(W){if(W instanceof v&&W.value0.value0 instanceof nu)return K(yr(it)(W.value0.value0.value0))(W.value0.value1);if(W instanceof v&&W.value0.value0 instanceof ze&&W.value0.value0.value0 instanceof kv)return K(by(Q(W.value0.value0.value0.value0.id)(W.value0.value0.value0.value0.pos))(it))(W.value0.value1);if(W instanceof v&&W.value0.value0 instanceof ze&&W.value0.value0.value0 instanceof Bc||W instanceof v&&W.value0.value0 instanceof ze&&W.value0.value0.value0 instanceof Av)return K(it)(W.value0.value1);if(W instanceof v&&W.value0.value0 instanceof ze&&W.value0.value0.value0 instanceof dv)return K(by(ot(W.value0.value0.value0.value0.id))(it))(W.value0.value1);if(W instanceof v&&W.value0.value0 instanceof ze&&W.value0.value0.value0 instanceof yv)return K(Bt(Te)(W.value0.value0.value0.value0.id)(it))(W.value0.value1);if(W instanceof v&&W.value0.value0 instanceof ze&&W.value0.value0.value0 instanceof gv)return K(Bt(Te)(W.value0.value0.value0.value0.id)(it))(W.value0.value1);if(W instanceof P)return it;throw new Error("Failed pattern match at Deku.SSR (line 177, column 42 - line 198, column 20): "+[W.constructor.name])}(Vo(G))}},Cr=P0(m),qr=K(Te)(Cr),Oe=tr(Te)(qr);return Oe},_=l(r),b=function(m){return{parentToChild:O0(m.parentToChild)(function(){var Q=Iv(function(Z){if(Z instanceof nn||Z instanceof un||Z instanceof mn||Z instanceof Le||Z instanceof de||Z instanceof bn||Z instanceof wn||Z instanceof $u)return Z.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 334, column 23 - line 342, column 52): "+[Z.constructor.name])}),ot=Iv(function(Z){return R0(wv(Z)(m.idToActions))(Lp)});return function(Z){return Q(dy(z0(q0(N0(ot(Z))))))}}()),idToActions:m.idToActions}}(Vd(B0(function(m){if(m instanceof nn)return Go(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof un)return Go(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof mn)return Go(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof Le)return Go(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof de)return Go(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof bn||m instanceof wn)return n(m.value0.id)(m);if(m instanceof $u)return e(m.value0.id)(m.value0.key);throw new Error("Failed pattern match at Deku.SSR (line 350, column 19 - line 362, column 61): "+[m.constructor.name])})(_))({parentToChild:Xn,idToActions:Xn})),D=function(m){return qa(Op(function(Q){return Q instanceof nn||Q instanceof un||Q instanceof Le||Q instanceof de})(m))},T=function(m){return ue("")(uo(function(Q){return Q instanceof nn?new v(Q.value0.tag):P.value})(m))},O=function(m){return U0(" ")(my(function(Q){return Q instanceof bn?new v(Q.value0.key+('="'+(Q.value0.value+'"'))):P.value})(m))},U=function(m){return rr("")(function(Q){var ot=function(Cr){return ue("")(uo(function(qr){return qr instanceof wn?new v(Sv(qr.value0.text)+("<!--"+(m+"-->"))):P.value})(Q))},Z=function(Cr){return"<!--%-%"+(m+"-->")},tr=function(Cr){var qr=T(Q),Oe=O(Q);return"<"+(qr+(" "+(Oe+(' data-deku-ssr="'+(m+('">'+(B(m)+("</"+(qr+">")))))))))},Bt=function(Cr){return"<!--%-%"+(m+"-->")},K=Nu(Q)(0);return K instanceof v&&K.value0 instanceof wn?ot(void 0):K instanceof v&&K.value0 instanceof un?ot(void 0):K instanceof v&&K.value0 instanceof Le?Z(void 0):K instanceof v&&K.value0 instanceof de?Bt(void 0):K instanceof v&&K.value0 instanceof mn?$v(K.value0.value0):tr(void 0)})(wv(m)(b.idToActions))},B=function(m){var Q=ue([])(wv(m)(b.parentToChild));return W0(U)(Q)},p=function(m){return H0(function(Q){return function(ot){var Z=D(ot);if(Z)return Q;if(!Z)return mc("data-deku-ssr")(O(ot)+" data-deku-ssr")(Q);throw new Error("Failed pattern match at Deku.SSR (line 384, column 17 - line 388, column 14): "+[Z.constructor.name])}})(B(m))(b.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(u+('">'+(p(u)+("</"+(t+">")))))))}};var TI=Ve(z),xI=ni(ei);var EI=ar(z),gy=Tr(),MI=Ct(Yu),wI=d(),II=Ht($r),LI=V(Yt),Sy=V(gr),PI=R(ie),OI=ar(ie);var $y=function(t){return function(r){return function(e){return vn({doLogic:function(n){return function(u){return function(f){return u.sendToPos({id:f,pos:n})}}},ids:function(n){return function(u){return u.ids}(gy(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:MI})}},toElt:function(n){return n}})(t)(r)(wI(e))}}},RI=function(t){return function(){var e=fv();ov(e)();var n=TI(xI(ae(0)))(iy)();av(e)();var u=uv(),f=tl(II(LI(gy(n).makeRoot({id:"deku-root",root:u})))($y({parent:new v("deku-root"),scope:new Qu("rootScope"),raiseId:function(l){return Sy(void 0)},ez:!0,pos:P.value,dynFamily:P.value})(n)(t)))(function(l){return l(e)})();return iv(e)(),f}},Cy=function(t){return EI(RI(t))},NI=function(t){var r=function(e){return PI(yy(t))(function(){var u=ae(0)(),f=ae([])(),l=ay(u);return OI(pb($y({parent:new v("deku-root"),scope:new Qu("rootScope"),raiseId:function(_){return Sy(void 0)},ez:!0,pos:P.value,dynFamily:P.value})(l)(e))(function(_){return _(f)}))(),Kr(f)()})};return r},hy=NI("body");var BI=Mc(na),Lv=Ht($r),Wc=V(Yt),Ty=R(Er),xy=at(Eu),UI=Dt(Dn),WI=ju(ke),HI=Dt(Hi),jo=le(),qI=Gr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(jo(jo(jo(jo(jo(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),zI=yt(Ru),Ey=at(Hs(Eu)),Pv=V(gr),VI=function(){return et.value}(),My=function(){return Gf()(fi({reflectSymbol:function(){return"buttonClicked"}})()()(fi({reflectSymbol:function(){return"sliderMoved"}})()()(Wf)()())()())(et.value)(function(t){return function(r){return br([G_([k(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),Fe(BI(t.buttonClicked(void 0)))([k("Click")]),br([tn(Lv(Wc("Val: 0"))(Ty(function(){var e=xy("Val: ");return function(n){return e(UI(n))}}())(WI(function(e){return function(n){return 1+e|0}})(-1)(Lv(Wc(void 0))(r.buttonClicked)))))]),br([Ra(Ec(Wc(t.sliderMoved)))([]),br([tn(Lv(Wc("Val: 50"))(Ty(function(){var e=xy("Val: ");return function(n){return e(HI(n))}}())(r.sliderMoved)))])])])}})}(),wy=function(t){return qI(VI)({code2:Rr([Or([k(e_)])]),code1:Rr([Or([k(r_)])]),code0:Rr([Or([k(t_)])]),result:My,codegen:Rr([Or([tn(cb(function(r){return function(){return zI(Ey(Pv('<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>'))(Ey(hy(My))(Pv("</html>"))))(r)(),Pv(void 0)}}))])])})};var jI=Me(Se),XI=Ht($r),Ov=V(Yt),JI=R(Dr),KI=Lr(Mt)(s),QI=Rt(Yr),YI=kr(Pr),ZI=Rt(aD),tL=Rt(Qr),rL=Rt(Di),Iy=function(t){return mi(function(r){return jI(function(e){return XI(Ov(t.startsWith))(e)})(function(e){var n=function(f){if(f instanceof Yf)return ad;if(f instanceof ki)return nd;if(f instanceof Ai)return VD;if(f instanceof di)return sd;if(f instanceof gi)return zA;if(f instanceof Si)return yA;if(f instanceof yi)return Ad;if(f instanceof $i)return td;if(f instanceof Ci)return ld;if(f instanceof hi)return wy;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 33, column 7 - line 33, column 34): "+[f.constructor.name])},u=function(f){return function(l){return n(l)({dpage:f,slug:t.slug})}};return br([br(JI(function(f){return go([yo(KI(Ov)([QI(dr.value)(Ar(function(l){return YI(jr(l))(r(f.value0))})),ZI(Ae.value)("cursor:pointer;"),tL(Hr.value)(t.slug+f.value1.value1.value0)]))([k(f.value1.value0)]),aa(Ov(rL(Ae.value)(function(){return f.value1.value1.value1?"":"display:none;"}())))([k(" | ")])])})([new X(Yf.value,new X("Home",new X("",!0))),new X(ki.value,new X("Hello world",new X("hello/",!0))),new X(Ai.value,new X("Component",new X("simple/",!0))),new X(di.value,new X("Pursx 1",new X("pursx1/",!0))),new X(gi.value,new X("Events 1",new X("events1/",!0))),new X(Si.value,new X("Effects",new X("effects/",!0))),new X(yi.value,new X("Pursx 2",new X("pursx2/",!0))),new X($i.value,new X("Events 2",new X("events2/",!0))),new X(Ci.value,new X("Portals",new X("portals/",!0))),new X(hi.value,new X("SSR",new X("ssr/",!1)))])),Jf(u(r))(e)])})})};var nL=Dt(is()()(os({reflectSymbol:function(){return"slug"}})(fs({reflectSymbol:function(){return"startsWith"}})(Xe))(Xe))),uL=V($e),B5t=function(t){return function(){var e=rr(ho(Ti("could not ingest options: "+nL(t))))(uL)(ID(t.startsWith))();return Cy(Iy({slug:t.slug,startsWith:e}))()}};export{B5t as main};
