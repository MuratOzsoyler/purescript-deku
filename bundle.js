var h_=function(n){return function(t){for(var r=n.length,e=t.length,a=new Array(r*e),u=0,i=0;i<r;i++)for(var c=n[i],m=0;m<e;m++)a[u++]=c(t[m]);return a}};var Ta={compose:function(n){return function(t){return function(r){return n(t(r))}}}},ra=function(n){return n.compose};var en=function(n){return n.identity},X={identity:function(n){return n},Semigroupoid0:function(){return Ta}};var or=!0;var qf=function(n){return function(t){return function(r){return function(e){return n(t(r))(t(e))}}}},_t=function(n){return function(t){return function(r){return n(r)(t)}}},S=function(n){return function(t){return n}};var Yo=function(n){return function(t){return t(n)}};var E_=function(n){return function(t){for(var r=t.length,e=new Array(r),a=0;a<r;a++)e[a]=n(t[a]);return e}};var M=function(){function n(){}return n.value=new n,n}();var d=function(n){return n.map},Zr=function(n){return function(t){return function(r){return d(n)(r)(t)}}},K=function(n){return d(n)(S(void 0))},Hr=function(n){return function(t){return function(r){return d(n)(S(r))(t)}}},ri=function(n){return function(t){return d(n)(S(t))}};var Br={map:ra(Ta)},st={map:E_};var Zo={apply:h_,Functor0:function(){return st}},bn=function(n){return n.apply};var tn=function(n){return function(t){return function(r){return bn(n)(d(n.Functor0())(S(en(X)))(t))(r)}}},sr=function(n){return function(t){return function(r){return function(e){return bn(n)(d(n.Functor0())(t)(r))(e)}}}};var f=function(n){return n.pure};var Le=function(n){return function(t){return function(r){if(t)return r;if(!t)return f(n)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[t.constructor.name,r.constructor.name])}}},Ko=function(n){return function(t){return function(r){return bn(n.Apply0())(f(n)(t))(r)}}};var nu={pure:function(n){return[n]},Apply0:function(){return Zo}};var M_=function(n){return function(t){return n+t}},w_=function(n){return function(t){return n.length===0?t:t.length===0?n:n.concat(t)}};var Nt=function(n){return n.reflectSymbol};var Er=function(n){return function(t){return t[n]}},Ie=function(n){return function(t){return function(r){var e={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e[n]=t,e}}};var x_={append:function(n){return function(t){return void 0}}},Se={append:M_};var ct={append:w_};var F=function(n){return n.append};var z=function(n){return n.alt};var CD=String.fromCharCode(65535),TD=String.fromCharCode(0),hD=Number.POSITIVE_INFINITY,ED=Number.NEGATIVE_INFINITY;var L_=function(n){return function(t){return function(r){return function(e){return function(a){return e<a?n:e===a?t:r}}}}};var I_=L_;var S_=L_;var $_=function(n){return function(t){return n===t}};var P_=$_;var N_=$_;var ea={eq:N_};var tu={eq:P_};var pn=function(n){return n.eq};var fn=function(){function n(){}return n.value=new n,n}(),dn=function(){function n(){}return n.value=new n,n}(),vn=function(){function n(){}return n.value=new n,n}();var R_=function(n){return function(t){return n-t|0}};var k_=function(n){return function(t){return n+t|0}},O_=function(n){return function(t){return n*t|0}},W_=function(n){return function(t){return n+t}},U_=function(n){return function(t){return n*t}};var ru={add:W_,zero:0,mul:U_,one:1},$r={add:k_,zero:0,mul:O_,one:1};var Kr=function(n){return n.mul};var Rt=function(n){return n.add};var Vf={sub:R_,Semiring0:function(){return $r}};var Xt=function(){return{compare:S_(fn.value)(vn.value)(dn.value),Eq0:function(){return ea}}}();var Fr=function(){return{compare:I_(fn.value)(vn.value)(dn.value),Eq0:function(){return tu}}}();var mn=function(n){return n.compare};var zr=function(n){return n.top};var ha={top:2147483647,bottom:-2147483648,Ord0:function(){return Fr}};var ne=function(n){return n.bottom};var B_=function(n){return n.toString()},q_=function(n){var t=n.toString();return isNaN(t+".0")?t:t+".0"};var z_=function(n){var t=n.length;return'"'+n.replace(/[\0-\x1F\x7F"\\]/g,function(r,e){switch(r){case'"':case"\\":return"\\"+r;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var a=e+1,u=a<t&&n[a]>="0"&&n[a]<="9"?"\\&":"";return"\\"+r.charCodeAt(0).toString(10)+u})+'"'};var V_=function(n){return function(t){return[n].concat(t)}},ai=function(n){return function(t){return t.join(n)}};var pr={show:z_},J_={showRecordFields:function(n){return function(t){return[]}}},j_=function(n){return n.showRecordFields},G_=function(){return function(){return function(n){return{show:function(t){var r=j_(n)(M.value)(t);return r.length===0?"{}":ai(" ")(["{",ai(", ")(r),"}"])}}}}};var au={show:q_},Vr={show:B_};var k=function(n){return n.show};var jf=function(n){return function(t){return function(r){return{showRecordFields:function(e){return function(a){var u=j_(t)(M.value)(a),i=Nt(n)(M.value),c=Er(i)(a);return V_(ai(": ")([i,k(r)(c)]))(u)}}}}}};var y=function(){function n(){}return n.value=new n,n}(),D=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var zn=function(n){return function(t){return function(r){if(r instanceof y)return n;if(r instanceof D)return t(r.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}};var Qa=zn(!1)(S(!0));var rt={map:function(n){return function(t){return t instanceof D?new D(n(t.value0)):y.value}}};var ir=function(n){return zn(n)(en(X))},Mr=function(){return function(n){if(n instanceof D)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[n.constructor.name])}};var Ea={apply:function(n){return function(t){if(n instanceof D)return d(rt)(n.value0)(t);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,t.constructor.name])}},Functor0:function(){return rt}},wr={bind:function(n){return function(t){if(n instanceof D)return t(n.value0);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,t.constructor.name])}},Apply0:function(){return Ea}};var Ot=function(){return{pure:D.create,Apply0:function(){return Ea}}}();var BD={alt:function(n){return function(t){return n instanceof y?t:n}},Functor0:function(){return rt}},Y_=function(){return{empty:y.value,Alt0:function(){return BD}}}();var Z_=function(n){return Math.min(Math.abs(n),2147483647)},K_=function(n){return function(t){return t===0?0:t>0?Math.floor(n/t):-Math.floor(n/-t)}},ns=function(n){return function(t){if(t===0)return 0;var r=Math.abs(t);return(n%r+r)%r}};var ts={Ring0:function(){return Vf}};var ou=function(n){return n.mod};var ui={degree:Z_,div:K_,mod:ns,CommutativeRing0:function(){return ts}};var Jr={mempty:void 0,Semigroup0:function(){return x_}},uu={mempty:"",Semigroup0:function(){return Se}};var Cn=function(n){return n.mempty};var Ya=function(n){return{always:S(Cn(n)),Monoid0:function(){return n}}},Za=function(n){return{always:en(X),Monoid0:function(){return n}}},iu=function(n){return n.always};var B=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),W=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Xf=function(n){return zn(new B(n))(W.create)};var Ka={map:function(n){return function(t){if(t instanceof B)return new B(t.value0);if(t instanceof W)return new W(n(t.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[t.constructor.name])}}};var jr=function(n){return function(t){return function(r){if(r instanceof B)return n(r.value0);if(r instanceof W)return t(r.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},Qf=function(){return jr(S(y.value))(D.create)}();var Dn=function(n){return n.empty};var es=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=a-1;u>=0;u--)e=n(r[u])(e);return e}}},as=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=0;u<a;u++)e=n(e)(r[u]);return e}}};var os=function(n){return function(t){for(var r=[],e=0,a=n.length;e<a;e++)Array.prototype.push.apply(r,t(n[e]));return r}};var Vn=function(n){return n.discard};var fi={bind:os,Apply0:function(){return Zo}},g=function(n){return n.bind},Pe=function(n){return _t(g(n))},ci=function(n){return function(t){return function(r){return function(e){return Pe(n)(t)(r(e))}}}},li=function(n){return function(t){return function(r){return function(e){return g(n)(t(e))(r)}}}};var Jn={discard:function(n){return g(n)}};var Fa=function(n){return function(t){return g(n)(t)(en(X))}};var ZD=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var fs={defer:function(n){return function(t){return n(void 0)(t)}}},no=function(n){return n.defer},Zf=function(n){return function(t){var r=ZD("go","Control.Lazy",function(){return no(n)(function(a){return t(r(25))})}),e=r(25);return e}};var cs=function(n){return function(t){return n&&t}},ls=function(n){return function(t){return n||t}},_s=function(n){return!n};var Gr=function(n){return n.not};var ro=function(n){return n.ff};var Ma=function(n){return n.disj},fr={ff:!1,tt:!0,implies:function(n){return function(t){return Ma(fr)(Gr(fr)(n))(t)}},conj:cs,disj:ls,not:_s};var T=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var Wt=function(n){return n.value1};var wa={map:function(n){return function(t){return new T(t.value0,n(t.value1))}}};var _u=function(n){return n};var fy=function(n){return{append:function(t){return function(r){return Ma(n)(t)(r)}}}};var tc=function(n){return{mempty:ro(n),Semigroup0:function(){return fy(n)}}};var cy=function(n){return{append:function(t){return function(r){return ra(n)(t)(r)}}}};var xa=function(n){return{mempty:en(n),Semigroup0:function(){return cy(n.Semigroupoid0())}}};var E=function(n){return n};var de=function(){return E};var ht=de;var Di=function(){return function(){return function(){return function(){return function(n){return de()}}}}};var Xn=function(n){return n.foldr};var oo=function(n){return function(t){return Xn(n)(z(t.Alt0()))(Dn(t))}},lt=function(n){return function(t){return function(r){return Xn(n)(function(){var e=z(t.Alt0());return function(a){return e(r(a))}}())(Dn(t))}}},Pr=function(n){return function(t){return function(r){return Xn(t)(function(){var e=tn(n.Apply0());return function(a){return e(r(a))}}())(f(n)(void 0))}}},Qt=function(n){return function(t){return _t(Pr(n)(t))}},yi=function(n){return function(t){return Pr(n)(t)(en(X))}},Qn=function(n){return n.foldl};var Ne=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:F(t.Semigroup0())(u.acc)(F(t.Semigroup0())(r)(i))}}};return Qn(n)(a)({init:!0,acc:Cn(t)})(e).acc}}}};var kt={foldr:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof D)return n(r.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof D)return n(t)(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof y)return Cn(n);if(r instanceof D)return t(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name])}}}};var vs=function(n){return function(t){return function(r){return Xn(n)(function(e){return function(a){return F(t.Semigroup0())(r(e))(a)}})(Cn(t))}}},J={foldr:es,foldl:as,foldMap:function(n){return vs(J)(n)}};var Lt=function(n){return n.foldMap};var ua=function(n){return function(t){return Di()()()()(_u)(Lt(n)(tc(t)))}};var ds=function(n){return function(t){for(var r=t.length,e=Array(r),a=0;a<r;a++)e[a]=n(a)(t[a]);return e}};var De=function(n){return n};var ye={map:function(n){return function(t){return n(t)}}};var gs={apply:function(n){return function(t){return n(t)}},Functor0:function(){return ye}},py={bind:function(n){return function(t){return t(n)}},Apply0:function(){return gs}},my={pure:De,Apply0:function(){return gs}},ot={Applicative0:function(){return my},Bind1:function(){return py}};var ke=function(n){return n.mapWithIndex};var io={mapWithIndex:ds,Functor0:function(){return st}};var Oe=function(n){return n.foldrWithIndex};var re=function(n){return n.foldlWithIndex};var We=function(n){return n.foldMapWithIndex};var Fs=function(){function n(a){return[a]}function t(a){return function(u){return[a,u]}}function r(a){return function(u){return function(i){return[a,u,i]}}}function e(a){return function(u){return a.concat(u)}}return function(a){return function(u){return function(i){return function(c){return function(m){function p(s,l){switch(l-s){case 0:return i([]);case 1:return u(n)(c(m[s]));case 2:return a(u(t)(c(m[s])))(c(m[s+1]));case 3:return a(a(u(r)(c(m[s])))(c(m[s+1])))(c(m[s+2]));default:var _=s+Math.floor((l-s)/4)*2;return a(u(e)(p(s,_)))(p(_,l))}}return p(0,m.length)}}}}}}();var mr=function(n){return n.traverse};var As=function(n){return function(t){return mr(n)(t)(en(X))}},Ue={traverse:function(n){return Fs(bn(n.Apply0()))(d(n.Apply0().Functor0()))(f(n))},sequence:function(n){return As(Ue)(n)},Functor0:function(){return st},Foldable1:function(){return J}};var be=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var wi=function(n){return function(t){return new be(t,Dn(n))}};var pt=function(){function n(){}return n.value=new n,n}(),an=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Ai=function(n){return n},dg=function(n){return new an(n.value0,n.value1)};var Dg=function(n){var t=function(r){return function(e){var a=r,u=!1,i;function c(m,p){if(p instanceof an&&p.value1 instanceof an&&p.value1.value1 instanceof an){a=new an(p,m),e=p.value1.value1.value1;return}var s=function(_){return _ instanceof an&&_.value1 instanceof an&&_.value1.value1 instanceof pt?new an(n(_.value0),new an(n(_.value1.value0),pt.value)):_ instanceof an&&_.value1 instanceof pt?new an(n(_.value0),pt.value):pt.value},l=function(_){return function(o){var v=_,I=!1,hn;function Bn(Pn,Ir){if(Pn instanceof an&&Pn.value0 instanceof an&&Pn.value0.value1 instanceof an&&Pn.value0.value1.value1 instanceof an){v=Pn.value1,o=new an(n(Pn.value0.value0),new an(n(Pn.value0.value1.value0),new an(n(Pn.value0.value1.value1.value0),Ir)));return}return I=!0,Ir}for(;!I;)hn=Bn(v,o);return hn}};return u=!0,l(m)(s(p))}for(;!u;)i=c(a,e);return i}};return t(pt.value)},pc={map:Dg};var He={foldr:function(n){return function(t){var r=function(){var a=function(u){return function(i){var c=u,m=!1,p;function s(l,_){if(_ instanceof pt)return m=!0,l;if(_ instanceof an){c=new an(_.value0,l),i=_.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[l.constructor.name,_.constructor.name])}for(;!m;)p=s(c,i);return p}};return a(pt.value)}(),e=Qn(He)(_t(n))(t);return function(a){return e(r(a))}}},foldl:function(n){var t=function(r){return function(e){var a=r,u=!1,i;function c(m,p){if(p instanceof pt)return u=!0,m;if(p instanceof an){a=n(m)(p.value0),e=p.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[p.constructor.name])}for(;!u;)i=c(a,e);return i}};return t},foldMap:function(n){return function(t){return Qn(He)(function(r){var e=F(n.Semigroup0())(r);return function(a){return e(t(a))}})(Cn(n))}}};var vu={append:function(n){return function(t){return Xn(He)(an.create)(t)(n)}}};var mc={append:function(n){return function(t){return new be(n.value0,F(vu)(n.value1)(dg(t)))}}};var Ss={alt:F(vu),Functor0:function(){return pc}},vc=function(){return{empty:pt.value,Alt0:function(){return Ss}}}();var $s=function(n){return n()};var Ps=function(n){throw new Error(n)};var Ns=function(){return Ps};var Cg=$s,ae=function(n){return Cg(function(){return Ns()(n)})};function Os(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}function Ws(n){return function(t){return function(r){return r[n]=t(r[n]),r}}}var Dc=function(n){return function(t){return function(r){return function(e){return n(t,r,e)}}}};var Hs=Ta;var Bs=function(){return function(){return function(n){return function(t){return function(r){return function(e){return Ws(Nt(n)(t))(r)(e)}}}}}};var qs=X,zs=function(n){return function(t){return n(Os(t))}};var kg=function(n){return n},Og=function(n){return n.mappingWithIndex};var Wg=function(n){return n.mapping};var xi={mapRecordWithIndexBuilder:function(n){return function(t){return en(qs)}}},Vs=function(n){return n.mapRecordWithIndexBuilder},lo=function(n){return function(t){return function(r){return function(){return function(){return{mapRecordWithIndexBuilder:function(e){return function(a){return ra(Hs)(Bs()()(n)(M.value)(Og(t)(a)(M.value)))(Vs(r)(M.value)(a))}}}}}}}};var Js=function(){return function(n){return{hmap:function(){var t=Vs(n)(M.value);return function(r){return zs(t(kg(r)))}}()}}};var js=function(n){return n.hmap},_o=function(n){return{mappingWithIndex:function(t){return function(r){return Wg(n)(t)}}}};var Ug=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),so=function(n){return function(t){return{mapping:function(r){return d(Br)(iu(n))}}}},Gs=function(n){return function(t){return js(n)(new Ug(t))}};var Xs=E;var Qs=function(n){return function(t){return function(){return n(t())}}},Ys=function(n){return function(){return n}},Zs=function(n){return function(t){return function(){return t(n())()}}};function yt(n){return function(){return{value:n}}}var ut=function(n){return function(){return n.value}},Ks=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}},Ht=function(n){return function(t){return function(){return t.value=n}}};var Xr=function(n){return function(t){return function(r){return g(n.Bind1())(t)(function(e){return g(n.Bind1())(r)(function(a){return f(n.Applicative0())(e(a))})})}}};var Cc=function(n){return function(){return n}},np=function(n){return function(t){return function(){return t(n())()}}};var tp=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},po={Applicative0:function(){return vr},Bind1:function(){return $a}},$a={bind:np,Apply0:function(){return Tc(0)}},vr={pure:Cc,Apply0:function(){return Tc(0)}},rp=tp("functorEffect","Effect",function(){return{map:Ko(vr)}}),Tc=tp("applyEffect","Effect",function(){return{apply:Xr(po),Functor0:function(){return rp(0)}}}),In=rp(20),Yn=Tc(23),ep=function(n){return{append:sr(Yn)(F(n))}},ue=function(n){return{mempty:Cc(Cn(n)),Semigroup0:function(){return ep(n.Semigroup0())}}};var ap=function(n){return function(){return{value:n}}};var mo=function(n){return function(){return n.value}},op=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}};var Du=ap,Vg=op,up=function(n){return Vg(function(t){var r=n(t);return{state:r,value:r}})};var Qg=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},Yg=Ks,Bt=function(n){return Yg(function(t){var r=n(t);return{state:r,value:r}})},mt={map:Qs},Ii={Applicative0:function(){return cr},Bind1:function(){return Si}},Si={bind:Zs,Apply0:function(){return Ec(0)}},cr={pure:Ys,Apply0:function(){return Ec(0)}},Ec=Qg("applyST","Control.Monad.ST.Internal",function(){return{apply:Xr(Ii),Functor0:function(){return mt}}}),fp=Ec(46);var cp={liftST:en(X),Monad0:function(){return Ii}},lp={liftST:Xs,Monad0:function(){return po}},N=function(n){return n.liftST};var Zg=function(n){return function(t){if(n<1)return[];var r=new Array(n);return r.fill(t)}},Kg=function(n){return function(t){for(var r=[],e=0,a=0;a<n;a++)r[e++]=t;return r}},Fc=typeof Array.prototype.fill=="function"?Zg:Kg,nb=function(){function n(a,u){this.head=a,this.tail=u}var t={};function r(a){return function(u){return new n(a,u)}}function e(a){for(var u=[],i=0,c=a;c!==t;)u[i++]=c.head,c=c.tail;return u}return function(a){return function(u){return e(a(r)(t)(u))}}}(),Be=function(n){return n.length};var _p=function(n){return function(t){return function(r){return function(e){return e<0||e>=r.length?t:n(r[e])}}}},sp=function(n){return function(t){return function(r){return function(e){for(var a=0;a<e.length;a++){var u=r(e[a]);if(t(u))return u}return n}}}},pp=function(n){return function(t){return function(r){return function(e){for(var a=0,u=e.length;a<u;a++)if(r(e[a]))return n(a);return t}}}};var mp=function(n){return function(t){return function(r){return function(e){if(r<0||r>=e.length)return t;var a=e.slice();return a.splice(r,1),n(a)}}}};var gu=function(n){return function(t){return t.filter(n)}},Pi=function(n){return function(t){for(var r=[],e=[],a=0;a<t.length;a++){var u=t[a];n(u)?r.push(u):e.push(u)}return{yes:r,no:e}}};var tb=function(){function n(t,r,e,a,u,i){var c,m,p,s,l,_,o;for(c=u+(i-u>>1),c-u>1&&n(t,r,a,e,u,c),i-c>1&&n(t,r,a,e,c,i),m=u,p=c,s=u;m<c&&p<i;)l=a[m],_=a[p],o=r(t(l)(_)),o>0?(e[s++]=_,++p):(e[s++]=l,++m);for(;m<c;)e[s++]=a[m++];for(;p<i;)e[s++]=a[p++]}return function(t){return function(r){return function(e){var a;return e.length<2?e:(a=e.slice(0),n(t,r,a,e.slice(0),0,e.length),a)}}}}();var vp=function(n){return function(t){return n[t]}};function Te(){return[]}var Mc=function(n){return function(t){return function(){return t.push.apply(t,n)}}};var Ni=function(n){return function(t){return function(r){return function(e){return function(){return e.splice.apply(e,[n,t].concat(r))}}}}},he=function(n){return function(){return n}};function dp(n){return function(){return n.slice()}}var Ri=dp,wc=dp,eb=function(){function n(t,r,e,a,u,i){var c,m,p,s,l,_,o;for(c=u+(i-u>>1),c-u>1&&n(t,r,a,e,u,c),i-c>1&&n(t,r,a,e,c,i),m=u,p=c,s=u;m<c&&p<i;)l=a[m],_=a[p],o=r(t(l)(_)),o>0?(e[s++]=_,++p):(e[s++]=l,++m);for(;m<c;)e[s++]=a[m++];for(;p<i;)e[s++]=a[p++]}return function(t){return function(r){return function(e){return function(){return e.length<2||n(t,r,e,e.slice(0),0,e.length),e}}}}}();var bp=function(n){return function(t){return function(){var e=wc(t)();return n(e)(),he(e)()}}};var Qr=function(n){return Mc([n])};var ub=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var ib=function(n){return function(){var r=ut(n.value1)();return Bt(function(e){return e+1|0})(n.value1)(),n.value0(r)}};var ki=function(n){return d(mt)(ub.create(n))(yt(0))},Oi=function(n){return function(t){return function(){for(var e=yt(!1)();d(mt)(Gr(fr))(ut(e))();)(function(){var u=ib(n)();if(u instanceof D)return t(u.value0)();if(u instanceof y)return K(mt)(Ht(!0)(e))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[u.constructor.name])})();return{}}}};var Fp=function(){return vp};var Wi=function(n){return function(t){return bp(Qr(t))(n)()}},Mp=function(n){return[n]};var Do=function(){return _p(D.create)(y.value)}();var Ui=function(){return sp(y.value)(Qa)}();var Lc=function(){return pp(D.create)(y.value)}();var Ic=function(n){return function(t){return d(rt)(Fp()(t))(Lc(n)(t))}};var wp=function(){return mp(D.create)(y.value)}(),Sc=function(n){return function(t){return function(r){return r.length===0?[]:zn(r)(function(e){return Mr()(wp(e)(r))})(Lc(n(t))(r))}}};var bu=function(n){return function(t){return F(ct)([n])(t)}};var pb=_t(g(fi)),$c=function(n){return pb(function(){var t=zn([])(Mp);return function(r){return t(n(r))}}())};var q=function(){function n(){}return n.value=new n,n}(),on=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}(),wn=function(){function n(t,r,e,a,u,i,c){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i,this.value6=c}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return function(c){return new n(t,r,e,a,u,i,c)}}}}}}},n}(),ca=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),qe=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),la=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),Ee=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),_a=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),Bi=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}();var Tu=function(n){return function(t){var r=mn(n),e=function(a){var u=!1,i;function c(m){if(m instanceof q)return u=!0,y.value;if(m instanceof on){var p=r(t)(m.value1);if(p instanceof vn)return u=!0,new D(m.value2);if(p instanceof fn){a=m.value0;return}a=m.value3;return}if(m instanceof wn){var s=r(t)(m.value1);if(s instanceof vn)return u=!0,new D(m.value2);var l=r(t)(m.value4);if(l instanceof vn)return u=!0,new D(m.value5);if(s instanceof fn){a=m.value0;return}if(l instanceof dn){a=m.value6;return}a=m.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[m.constructor.name])}for(;!u;)i=c(a);return i};return e}};var Ft=function(n){return function(t){return function(r){var e=n,a=t,u=!1,i;function c(m,p,s){if(p instanceof pt)return u=!0,s;if(p instanceof an){if(p.value0 instanceof ca){e=m,a=p.value1,r=new on(s,p.value0.value0,p.value0.value1,p.value0.value2);return}if(p.value0 instanceof qe){e=m,a=p.value1,r=new on(p.value0.value0,p.value0.value1,p.value0.value2,s);return}if(p.value0 instanceof la){e=m,a=p.value1,r=new wn(s,p.value0.value0,p.value0.value1,p.value0.value2,p.value0.value3,p.value0.value4,p.value0.value5);return}if(p.value0 instanceof Ee){e=m,a=p.value1,r=new wn(p.value0.value0,p.value0.value1,p.value0.value2,s,p.value0.value3,p.value0.value4,p.value0.value5);return}if(p.value0 instanceof _a){e=m,a=p.value1,r=new wn(p.value0.value0,p.value0.value1,p.value0.value2,p.value0.value3,p.value0.value4,p.value0.value5,s);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[p.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[p.constructor.name,s.constructor.name])}for(;!u;)i=c(e,a,r);return i}}},zi=function(n){return function(t){return function(r){var e=function(i){return function(c){var m=i,p=!1,s;function l(_,o){if(_ instanceof pt)return p=!0,new on(o.value0,o.value1,o.value2,o.value3);if(_ instanceof an){if(_.value0 instanceof ca)return p=!0,Ft(n)(_.value1)(new wn(o.value0,o.value1,o.value2,o.value3,_.value0.value0,_.value0.value1,_.value0.value2));if(_.value0 instanceof qe)return p=!0,Ft(n)(_.value1)(new wn(_.value0.value0,_.value0.value1,_.value0.value2,o.value0,o.value1,o.value2,o.value3));if(_.value0 instanceof la){m=_.value1,c=new Bi(new on(o.value0,o.value1,o.value2,o.value3),_.value0.value0,_.value0.value1,new on(_.value0.value2,_.value0.value3,_.value0.value4,_.value0.value5));return}if(_.value0 instanceof Ee){m=_.value1,c=new Bi(new on(_.value0.value0,_.value0.value1,_.value0.value2,o.value0),o.value1,o.value2,new on(o.value3,_.value0.value3,_.value0.value4,_.value0.value5));return}if(_.value0 instanceof _a){m=_.value1,c=new Bi(new on(_.value0.value0,_.value0.value1,_.value0.value2,_.value0.value3),_.value0.value4,_.value0.value5,new on(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[_.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[_.constructor.name,o.constructor.name])}for(;!p;)s=l(m,c);return s}},a=mn(n),u=function(i){return function(c){var m=i,p=!1,s;function l(_,o){if(o instanceof q)return p=!0,e(_)(new Bi(q.value,t,r,q.value));if(o instanceof on){var v=a(t)(o.value1);if(v instanceof vn)return p=!0,Ft(n)(_)(new on(o.value0,t,r,o.value3));if(v instanceof fn){m=new an(new ca(o.value1,o.value2,o.value3),_),c=o.value0;return}m=new an(new qe(o.value0,o.value1,o.value2),_),c=o.value3;return}if(o instanceof wn){var I=a(t)(o.value1);if(I instanceof vn)return p=!0,Ft(n)(_)(new wn(o.value0,t,r,o.value3,o.value4,o.value5,o.value6));var hn=a(t)(o.value4);if(hn instanceof vn)return p=!0,Ft(n)(_)(new wn(o.value0,o.value1,o.value2,o.value3,t,r,o.value6));if(I instanceof fn){m=new an(new la(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),_),c=o.value0;return}if(I instanceof dn&&hn instanceof fn){m=new an(new Ee(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),_),c=o.value3;return}m=new an(new _a(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),_),c=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[_.constructor.name,o.constructor.name])}for(;!p;)s=l(m,c);return s}};return u(pt.value)}}},$b=function(n){return function(t){var r=function(c){return function(m){var p=c,s=!1,l;function _(o,v){if(o instanceof pt)return s=!0,v;if(o instanceof an){if(o.value0 instanceof ca&&o.value0.value2 instanceof q&&v instanceof q)return s=!0,Ft(n)(o.value1)(new on(q.value,o.value0.value0,o.value0.value1,q.value));if(o.value0 instanceof qe&&o.value0.value0 instanceof q&&v instanceof q)return s=!0,Ft(n)(o.value1)(new on(q.value,o.value0.value1,o.value0.value2,q.value));if(o.value0 instanceof ca&&o.value0.value2 instanceof on){p=o.value1,m=new wn(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof qe&&o.value0.value0 instanceof on){p=o.value1,m=new wn(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v);return}return o.value0 instanceof ca&&o.value0.value2 instanceof wn?(s=!0,Ft(n)(o.value1)(new on(new on(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new on(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof qe&&o.value0.value0 instanceof wn?(s=!0,Ft(n)(o.value1)(new on(new on(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new on(o.value0.value0.value6,o.value0.value1,o.value0.value2,v)))):o.value0 instanceof la&&o.value0.value2 instanceof q&&o.value0.value5 instanceof q&&v instanceof q?(s=!0,Ft(n)(o.value1)(new wn(q.value,o.value0.value0,o.value0.value1,q.value,o.value0.value3,o.value0.value4,q.value))):o.value0 instanceof Ee&&o.value0.value0 instanceof q&&o.value0.value5 instanceof q&&v instanceof q?(s=!0,Ft(n)(o.value1)(new wn(q.value,o.value0.value1,o.value0.value2,q.value,o.value0.value3,o.value0.value4,q.value))):o.value0 instanceof _a&&o.value0.value0 instanceof q&&o.value0.value3 instanceof q&&v instanceof q?(s=!0,Ft(n)(o.value1)(new wn(q.value,o.value0.value1,o.value0.value2,q.value,o.value0.value4,o.value0.value5,q.value))):o.value0 instanceof la&&o.value0.value2 instanceof on?(s=!0,Ft(n)(o.value1)(new on(new wn(v,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Ee&&o.value0.value0 instanceof on?(s=!0,Ft(n)(o.value1)(new on(new wn(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Ee&&o.value0.value5 instanceof on?(s=!0,Ft(n)(o.value1)(new on(o.value0.value0,o.value0.value1,o.value0.value2,new wn(v,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof _a&&o.value0.value3 instanceof on?(s=!0,Ft(n)(o.value1)(new on(o.value0.value0,o.value0.value1,o.value0.value2,new wn(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,v)))):o.value0 instanceof la&&o.value0.value2 instanceof wn?(s=!0,Ft(n)(o.value1)(new wn(new on(v,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new on(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Ee&&o.value0.value0 instanceof wn?(s=!0,Ft(n)(o.value1)(new wn(new on(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new on(o.value0.value0.value6,o.value0.value1,o.value0.value2,v),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Ee&&o.value0.value5 instanceof wn?(s=!0,Ft(n)(o.value1)(new wn(o.value0.value0,o.value0.value1,o.value0.value2,new on(v,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new on(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof _a&&o.value0.value3 instanceof wn?(s=!0,Ft(n)(o.value1)(new wn(o.value0.value0,o.value0.value1,o.value0.value2,new on(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new on(o.value0.value3.value6,o.value0.value4,o.value0.value5,v)))):(s=!0,ae("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!s;)l=_(p,m);return l}},e=function(c){return function(m){var p=c,s=!1,l;function _(o,v){if(v instanceof on&&v.value0 instanceof q&&v.value3 instanceof q)return s=!0,r(o)(q.value);if(v instanceof on){p=new an(new qe(v.value0,v.value1,v.value2),o),m=v.value3;return}if(v instanceof wn&&v.value0 instanceof q&&v.value3 instanceof q&&v.value6 instanceof q)return s=!0,r(new an(new qe(q.value,v.value1,v.value2),o))(q.value);if(v instanceof wn){p=new an(new _a(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),m=v.value6;return}return s=!0,ae("The impossible happened in partial function `removeMaxNode`.")}for(;!s;)l=_(p,m);return l}},a=function(c){var m=!1,p;function s(l){if(l instanceof on&&l.value3 instanceof q)return m=!0,{key:l.value1,value:l.value2};if(l instanceof on){c=l.value3;return}if(l instanceof wn&&l.value6 instanceof q)return m=!0,{key:l.value4,value:l.value5};if(l instanceof wn){c=l.value6;return}return m=!0,ae("The impossible happened in partial function `maxNode`.")}for(;!m;)p=s(c);return p},u=mn(n),i=function(c){return function(m){var p=c,s=!1,l;function _(o,v){if(v instanceof q)return s=!0,y.value;if(v instanceof on){var I=u(t)(v.value1);if(v.value3 instanceof q&&I instanceof vn)return s=!0,new D(new T(v.value2,r(o)(q.value)));if(I instanceof vn){var hn=a(v.value0);return s=!0,new D(new T(v.value2,e(new an(new ca(hn.key,hn.value,v.value3),o))(v.value0)))}if(I instanceof fn){p=new an(new ca(v.value1,v.value2,v.value3),o),m=v.value0;return}p=new an(new qe(v.value0,v.value1,v.value2),o),m=v.value3;return}if(v instanceof wn){var Bn=function(){return v.value0 instanceof q&&v.value3 instanceof q&&v.value6 instanceof q}(),I=u(t)(v.value4),Pn=u(t)(v.value1);if(Bn&&Pn instanceof vn)return s=!0,new D(new T(v.value2,Ft(n)(o)(new on(q.value,v.value4,v.value5,q.value))));if(Bn&&I instanceof vn)return s=!0,new D(new T(v.value5,Ft(n)(o)(new on(q.value,v.value1,v.value2,q.value))));if(Pn instanceof vn){var hn=a(v.value0);return s=!0,new D(new T(v.value2,e(new an(new la(hn.key,hn.value,v.value3,v.value4,v.value5,v.value6),o))(v.value0)))}if(I instanceof vn){var hn=a(v.value3);return s=!0,new D(new T(v.value5,e(new an(new Ee(v.value0,v.value1,v.value2,hn.key,hn.value,v.value6),o))(v.value3)))}if(Pn instanceof fn){p=new an(new la(v.value1,v.value2,v.value3,v.value4,v.value5,v.value6),o),m=v.value0;return}if(Pn instanceof dn&&I instanceof fn){p=new an(new Ee(v.value0,v.value1,v.value2,v.value4,v.value5,v.value6),o),m=v.value3;return}p=new an(new _a(v.value0,v.value1,v.value2,v.value3,v.value4,v.value5),o),m=v.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[v.constructor.name])}for(;!s;)l=_(p,m);return l}};return i(pt.value)}},lr={foldr:function(n){return function(t){return function(r){if(r instanceof q)return t;if(r instanceof on)return Xn(lr)(n)(n(r.value2)(Xn(lr)(n)(t)(r.value3)))(r.value0);if(r instanceof wn)return Xn(lr)(n)(n(r.value2)(Xn(lr)(n)(n(r.value5)(Xn(lr)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof q)return t;if(r instanceof on)return Qn(lr)(n)(n(Qn(lr)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof wn)return Qn(lr)(n)(n(Qn(lr)(n)(n(Qn(lr)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof q)return Cn(n);if(r instanceof on)return F(n.Semigroup0())(Lt(lr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value2))(Lt(lr)(n)(t)(r.value3)));if(r instanceof wn)return F(n.Semigroup0())(Lt(lr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value2))(F(n.Semigroup0())(Lt(lr)(n)(t)(r.value3))(F(n.Semigroup0())(t(r.value5))(Lt(lr)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[r.constructor.name])}}}},ar={foldrWithIndex:function(n){return function(t){return function(r){if(r instanceof q)return t;if(r instanceof on)return Oe(ar)(n)(n(r.value1)(r.value2)(Oe(ar)(n)(t)(r.value3)))(r.value0);if(r instanceof wn)return Oe(ar)(n)(n(r.value1)(r.value2)(Oe(ar)(n)(n(r.value4)(r.value5)(Oe(ar)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[r.constructor.name])}}},foldlWithIndex:function(n){return function(t){return function(r){if(r instanceof q)return t;if(r instanceof on)return re(ar)(n)(n(r.value1)(re(ar)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof wn)return re(ar)(n)(n(r.value4)(re(ar)(n)(n(r.value1)(re(ar)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[r.constructor.name])}}},foldMapWithIndex:function(n){return function(t){return function(r){if(r instanceof q)return Cn(n);if(r instanceof on)return F(n.Semigroup0())(We(ar)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value1)(r.value2))(We(ar)(n)(t)(r.value3)));if(r instanceof wn)return F(n.Semigroup0())(We(ar)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value1)(r.value2))(F(n.Semigroup0())(We(ar)(n)(t)(r.value3))(F(n.Semigroup0())(t(r.value4)(r.value5))(We(ar)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[r.constructor.name])}}},Foldable0:function(){return lr}};var Na=function(){return q.value}();var Np=function(n){return function(t){return function(r){return zn(r)(Wt)($b(n)(t)(r))}}};var Ra=function(n){return function(t){return function(r){return function(e){var a=t(Tu(n)(r)(e));if(a instanceof y)return Np(n)(r)(e);if(a instanceof D)return zi(n)(r)(a.value0)(e);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[a.constructor.name])}}}};var Rp={compact:function(n){return function(){var r=Te(),e=ki(function(a){return Do(n)(a)})();return Oi(e)(function(){var a=K(mt);return function(u){return a(function(i){if(i instanceof y)return f(cr)(0);if(i instanceof D)return Qr(i.value0)(r);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[i.constructor.name])}(u))}}())(),he(r)()}()},separate:function(n){return function(){var r=Te(),e=Te(),a=ki(function(u){return Do(n)(u)})();return Oi(a)(function(){var u=K(mt);return function(i){return u(function(c){if(c instanceof B)return Qr(c.value0)(r);if(c instanceof W)return Qr(c.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[c.constructor.name])}(i))}}())(),bn(fp)(d(mt)(function(u){return function(i){return{left:u,right:i}}})(he(r)))(he(e))()}()}};var ka=function(n){return n.compact};var kp={partitionMap:function(n){var t=function(r){return function(e){var a=n(e);if(a instanceof B)return{left:F(ct)(r.left)([a.value0]),right:r.right};if(a instanceof W)return{right:F(ct)(r.right)([a.value0]),left:r.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[a.constructor.name])}};return Qn(J)(t)({left:[],right:[]})},partition:Pi,filterMap:$c,filter:gu,Compactable0:function(){return Rp},Functor1:function(){return st}};var dr=function(n){return n.filterMap};var Op=function(n){return n.filter};var Dr={dimap:function(n){return function(t){return function(r){return function(e){return t(r(n(e)))}}}}},Wp=function(n){return n.dimap},xr=function(n){return function(t){return Wp(n)(t)(en(X))}};var bo=function(n){return n.keepLatest};var pa=function(n){return n.fold};var Oa=function(n){return function(t){return function(r){return function(e){return dr(n.Filterable1())(Wt)(pa(n)(function(a){return function(u){return d(wa)(f(Ot))(t(a)(u.value0))}})(r)(new T(e,y.value)))}}}};var Hp=function(){return function(n){return f(n)}};function kc(n){return function(t){return n===t}}var Bp=kc;var jb=function(n){return n};var Zt=function(n){return function(t){return n(t)}},Gb=function(n){return function(t){return function(r){return function(e){return function(a){return g(n.Monad0().Bind1())(N(n)(yt(y.value)))(function(u){return g(n.Monad0().Bind1())(r(function(i){return N(n)(K(mt)(Ht(new D(i))(u)))}))(function(i){return g(n.Monad0().Bind1())(e(function(c){return g(n.Monad0().Bind1())(N(n)(ut(u)))(Pr(t)(kt)(function(m){return a(c(m))}))}))(function(c){return f(t)(tn(t.Apply0())(i)(c))})})})}}}}},yr=jb;var Xb=function(n){return function(t){return function(r){return g(n.Monad0().Bind1())(N(n)(yt(y.value)))(function(e){return g(n.Monad0().Bind1())(t(function(a){return Vn(Jn)(n.Monad0().Bind1())(g(n.Monad0().Bind1())(N(n)(ut(e)))(yi(n.Monad0().Applicative0())(kt)))(function(){return g(n.Monad0().Bind1())(Zt(a)(r))(function(u){return N(n)(K(mt)(Ht(new D(u))(e)))})})}))(function(a){return f(n.Monad0().Applicative0())(Vn(Jn)(n.Monad0().Bind1())(g(n.Monad0().Bind1())(N(n)(ut(e)))(yi(n.Monad0().Applicative0())(kt)))(function(){return a}))})})}}},Wn={map:function(n){return function(t){return function(r){return t(function(e){return r(n(e))})}}}};var Qb=function(n){return function(t){return function(r){return function(e){return function(a){return g(n.Monad0().Bind1())(N(n)(yt(e)))(function(u){return r(function(i){return g(n.Monad0().Bind1())(N(n)(Bt(t(i))(u)))(a)})})}}}}},Eu=function(n){return function(t){return function(r){return function(e){return r(function(a){var u=t(a);if(u instanceof D)return e(u.value0);if(u instanceof y)return f(n)(void 0);throw new Error("Failed pattern match at FRP.Event (line 159, column 13 - line 161, column 27): "+[u.constructor.name])})}}}},Oc=function(n){return function(t){return Eu(n)(function(r){var e=t(r);if(e)return new D(r);if(!e)return y.value;throw new Error("Failed pattern match at FRP.Event (line 93, column 13 - line 95, column 25): "+[e.constructor.name])})}};var Wc=function(n){return function(t){return g(n.Monad0().Bind1())(N(n)(yt([])))(function(r){return f(n.Monad0().Applicative0())({event:function(e){return g(t.Monad0().Bind1())(N(t)(Bt(function(a){return F(ct)(a)([e])})(r)))(function(){return f(t.Monad0().Applicative0())(g(t.Monad0().Bind1())(N(t)(Bt(Sc(Bp)(e))(r)))(function(){return f(t.Monad0().Applicative0())(void 0)}))})},push:function(e){return g(t.Monad0().Bind1())(N(t)(ut(r)))(Pr(t.Monad0().Applicative0())(J)(function(a){return a(e)}))}})})}},Yb=function(n){return function(t){return function(r){return function(e){return g(t.Bind1())(Wc(n)(n))(function(a){var u=r(a.event);return g(t.Bind1())(Zt(u.input)(a.push))(function(i){return g(t.Bind1())(Zt(u.output)(e))(function(c){return f(t.Applicative0())(tn(t.Bind1().Apply0())(i)(c))})})})}}}};var qp=function(n){return function(t){return function(r){return yr(function(e){return g(n.Monad0().Bind1())(Wc(n)(n))(function(a){return Vn(Jn)(n.Monad0().Bind1())(e(r(a.event)))(function(){return Zt(t)(a.push)})})})}}},Fu=function(n){return{compact:Eu(n)(en(X)),separate:function(t){return{left:Eu(n)(function(r){if(r instanceof B)return new D(r.value0);if(r instanceof W)return y.value;throw new Error("Failed pattern match at FRP.Event (line 76, column 13 - line 78, column 33): "+[r.constructor.name])})(t),right:Eu(n)(function(r){if(r instanceof W)return new D(r.value0);if(r instanceof B)return y.value;throw new Error("Failed pattern match at FRP.Event (line 83, column 13 - line 85, column 32): "+[r.constructor.name])})(t)}}}},_e=function(n){return{filter:Oc(n),filterMap:Eu(n),partition:function(t){return function(r){return{yes:Oc(n)(t)(r),no:Oc(n)(function(){var e=Gr(fr);return function(a){return e(t(a))}}())(r)}}},partitionMap:function(t){return function(r){return{left:dr(_e(n))(function(){var e=jr(D.create)(S(y.value));return function(a){return e(t(a))}}())(r),right:dr(_e(n))(function(e){return Qf(t(e))})(r)}}},Compactable0:function(){return Fu(n)},Functor1:function(){return Wn}}},Uc=function(n){return function(t){return yr(function(r){return g(n.Monad0().Bind1())(Wc(n)(n))(function(e){return Vn(Jn)(n.Monad0().Bind1())(r(t(e.push)(e.event)))(function(){return f(n.Monad0().Applicative0())(f(n.Monad0().Applicative0())(void 0))})})})}},Zb=function(n){return function(t){return function(r){return function(e){return function(a){return g(n.Monad0().Bind1())(N(n)(yt(y.value)))(function(u){return g(n.Monad0().Bind1())(N(n)(Te))(function(i){return g(n.Monad0().Bind1())(N(n)(yt(y.value)))(function(c){return g(n.Monad0().Bind1())(N(n)(Te))(function(m){return g(n.Monad0().Bind1())(N(n)(yt(!0)))(function(p){return g(n.Monad0().Bind1())(r(function(s){return g(n.Monad0().Bind1())(N(n)(ut(p)))(function(l){return l?N(n)(K(mt)(Qr(s)(i))):g(n.Monad0().Bind1())(N(n)(Ht(new D(s))(u)))(function(){return g(n.Monad0().Bind1())(N(n)(ut(c)))(Pr(t)(kt)(function(_){return a(_(s))}))})})}))(function(s){return g(n.Monad0().Bind1())(e(function(l){return g(n.Monad0().Bind1())(N(n)(ut(p)))(function(_){return _?N(n)(K(mt)(Qr(l)(m))):g(n.Monad0().Bind1())(N(n)(Ht(new D(l))(c)))(function(){return g(n.Monad0().Bind1())(N(n)(ut(u)))(Pr(t)(kt)(function(o){return a(l(o))}))})})}))(function(l){return g(n.Monad0().Bind1())(N(n)(Ht(!1)(p)))(function(){return g(n.Monad0().Bind1())(N(n)(Ri(i)))(function(_){return g(n.Monad0().Bind1())(N(n)(Ri(m)))(function(o){return Vn(Jn)(n.Monad0().Bind1())(Qt(t)(J)(_)(function(v){return g(n.Monad0().Bind1())(N(n)(Ht(new D(v))(u)))(function(){return Qt(t)(J)(o)(function(I){return g(n.Monad0().Bind1())(N(n)(Ht(new D(I))(c)))(function(){return a(I(v))})})})}))(function(){return g(n.Monad0().Bind1())(N(n)(Ni(0)(Be(_))([])(i)))(function(){return g(n.Monad0().Bind1())(N(n)(Ni(0)(Be(o))([])(m)))(function(){return f(t)(tn(t.Apply0())(s)(l))})})})})})})})})})})})})})}}}}},Kb=function(n){return{apply:function(t){return function(r){return Zb(n)(n.Monad0().Applicative0())(t)(d(Wn)(Yo)(r))}},Functor0:function(){return Wn}}};var x=function(n){return{pure:function(t){return function(r){return ri(n.Monad0().Bind1().Apply0().Functor0())(f(n.Monad0().Applicative0())(void 0))(r(t))}},Apply0:function(){return Kb(n)}}};var Nn=function(n){return{alt:function(t){return function(r){return function(e){return bn(n.Apply0())(d(n.Apply0().Functor0())(function(a){return function(u){return tn(n.Apply0())(a)(u)}})(t(e)))(r(e))}}},Functor0:function(){return Wn}}},V=function(n){return{empty:function(t){return f(n)(f(n)(void 0))},Alt0:function(){return Nn(n)}}},nC=function(n){return{Applicative0:function(){return x(n)},Plus1:function(){return V(n.Monad0().Applicative0())}}},gr=function(n){return{fold:Qb(n),keepLatest:Xb(n),sampleOn:Gb(n)(n.Monad0().Applicative0()),fix:Yb(n)(n.Monad0()),Alternative0:function(){return nC(n)},Filterable1:function(){return _e(n.Monad0().Applicative0())}}};var zp="_____$__$_$$_vbus";function Hc(n){return()=>{for(let t in n)delete n[t]}}function Bc(n){return()=>{let t=(u,i,c,m)=>{let p=Object.keys(m);for(var s=0;s<p.length;s++)if(m[p[s]]instanceof Object&&m[p[s]][zp]===zp){let l={},_={};t(u,l,_,m[p[s]]),i[p[s]]=l,c[p[s]]=_}else{let l=`${Math.random()}`;u[l]={},i[p[s]]=_=>()=>{let o=Object.values(u[l]);for(var v=0;v<o.length;v++)o[v](_)()},c[p[s]]=_=>()=>{let o=`${Math.random()}`;return u[l][o]=_,()=>{u[l]&&u[l][o]&&delete u[l][o]}}}},r={},e={},a={};return t(r,e,a,n),{p:e,e:a,s:r}}}var qc=function(n){return function(){return function(){return function(t){return function(r){return function(e){return Ie(Nt(n)(t))(r)(e)}}}}}},zc=function(n){return function(){return function(t){return function(r){return Er(Nt(n)(t))(r)}}}};var Ji={vb:function(n){return function(t){return function(r){return{}}}}},Vp=function(n){return n.vb},Jc=function(){return function(n){return function(t){return function(r){return function(e){var a=Vp(t)(M.value)(M.value)(M.value);return yr(function(u){return g(n.Monad0().Bind1())(Bc(a))(function(i){return Vn(Jn)(n.Monad0().Bind1())(u(e(i.p)(i.e)))(function(){return f(n.Monad0().Applicative0())(Hc(i.s))})})})}}}}};var To=function(n){return function(){return function(){return function(t){return function(){return function(){return function(){return function(){return{vb:function(r){return function(e){return function(a){return qc(n)()()(M.value)(void 0)(Vp(t)(M.value)(M.value)(M.value))}}}}}}}}}}}};var ma=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),jc=function(){function n(){}return n.value=new n,n}();var Mu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),wu=function(){function n(){}return n.value=new n,n}(),Gi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Xi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Qi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ho=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Sn=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Eo={eq:function(n){return function(t){return n instanceof ma&&t instanceof ma?n.value0===t.value0:n instanceof jc&&t instanceof jc}}};var it=function(n){return new Qi(n)};var Jp=function(n){return new Xi(n)};var Yi={Always0:function(){return Ya(ue(Jr))},Always1:function(){return Ya(ue(ue(Jr)))},Always2:function(){return Ya(ue(Jr))},Always3:function(){return Ya(xa(X))},Always4:function(){return Ya(xa(X))},MonadST5:function(){return cp}},Zi={Always0:function(){return Za(ue(Jr))},Always1:function(){return Za(ue(ue(Jr)))},Always2:function(){return Za(ue(Jr))},Always3:function(){return Za(xa(X))},Always4:function(){return Za(xa(X))},MonadST5:function(){return lp}},Ki=function(){return function(n){return function(){return function(t){return function(r){return function(e){return function(a){return new ho(Jc()(n.MonadST5())(r)(e)(xr(Dr)(Gs(Js()(t))(M.value))(a)))}}}}}}};var jp=function(){return new Gi(0)}();var Gp=function(){return wu.value}(),Fo=function(){return Mu.create}();var Wa=function(n){return function(t){return function(r){return Uc(n.MonadST5())(xr(Dr)(d(Br)(iu(t)))(r))}}};var Mo=function(n){return function(t){return function(r){return new ho(Wa(n)(t)(r))}}};function Xp(n){return()=>n.slice()}function Qp(n){return t=>r=>()=>{r[n]=t}}function Yp(n){return()=>n.slice()}var Zp=n=>t=>t[n];var Fe=function(n){return n.reflectType};var nm=function(n){return Fe(n)};var wo=st;var nf=function(){return function(n){return n}};var Gc=function(){return function(){return function(){return function(){return function(){return function(n){var t=nm(n);return function(r){return Zp(t(r))}}}}}}};var tm=[];var Xc=function(){return function(){return function(n){return function(t){return bu(n)(t)}}}};function rm(n){return function(){var t={};for(var r in n)hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}}var va={};function Yc(n){return n()}function em(n){return function(t){return function(r){return function(e){var a=r;function u(c){return function(m){return t(m)(c)(e[c])}}for(var i in e)hasOwnProperty.call(e,i)&&(a=n(a)(u(i)));return a}}}}function tf(n){return function(t){var r=[];for(var e in t)hasOwnProperty.call(t,e)&&r.push(n(e)(t[e]));return r}}var _C=Object.keys||tf(function(n){return function(){return n}});function Zc(n){return function(t){return function(r){return function(){return r[n]=t,r}}}}var Kc=function(n){return function(t){return function(){return delete t[n],t}}};var gC=tf(function(n){return function(t){return t}});var bC=rm;var am=function(n){return function(t){return Yc(function(){var e=bC(t)();return n(e)(),e})}};var Ao=function(n){return function(t){return am(Zc(n)(t))}};var om=em(Yo),CC=function(n){return function(t){return om(function(r){return function(e){return function(a){return F(n.Semigroup0())(r)(t(e)(a))}}})(Cn(n))}},um={foldl:function(n){return om(function(t){return function(r){return n(t)}})},foldr:function(n){return function(t){return function(r){return Xn(J)(n)(t)(gC(r))}}},foldMap:function(n){return function(t){return CC(n)(S(t))}}};var nl=function(n){return am(Kc(n))};var im=function(){function n(){}return n.value=new n,n}(),rl=function(){function n(){}return n.value=new n,n}(),TC=function(){function n(){}return n.value=new n,n}();var Au=function(n){return function(t){return function(r){var e=function(a){var u=function(i){return function(c){return new T(c+1|0,new T(i,c))}};return Oa(gr(n))(u)(a)(0)};return new Xi(bo(gr(n))(qp(n)(e(r))(function(a){return d(Wn)(function(u){return z(Nn(n.Monad0().Applicative0()))(Hp()(x(n))(new Mu(t(u.value0))))(d(Wn)(S(wu.value))(Op(_e(n.Monad0().Applicative0()))(function(){var i=pn(tu)(u.value1+1|0);return function(c){return i(Wt(c))}}())(a)))})(a)})))}}};var Me=function(n){return function(t){return function(r){return function(e){return function(a){var u=function(i){return i(e)(a)};return function(i){if(i instanceof Qi)return lt(J)(V(n))(Me(n)(t)(r)(e)(a))(i.value0);if(i instanceof ho)return bo(gr(t))(d(Wn)(Me(n)(t)(r)(e)(a))(i.value0));if(i instanceof Sn)return u(r.toElt(i.value0));if(i instanceof Xi)return yr(function(c){return g(t.Monad0().Bind1())(N(t)(yt(va)))(function(m){return g(t.Monad0().Bind1())(Zt(i.value0)(function(p){return g(t.Monad0().Bind1())(r.ids(a))(function(s){return g(t.Monad0().Bind1())(N(t)(yt(f(n)(void 0))))(function(l){return g(t.Monad0().Bind1())(r.ids(a))(function(_){return g(t.Monad0().Bind1())(N(t)(yt(f(n)(void 0))))(function(o){return g(t.Monad0().Bind1())(N(t)(yt([])))(function(v){return g(t.Monad0().Bind1())(N(t)(yt(f(n)(void 0))))(function(I){return g(t.Monad0().Bind1())(d(n.Apply0().Functor0())(ma.create)(r.ids(a)))(function(hn){return g(t.Monad0().Bind1())(N(t)(yt(im.value)))(function(Bn){return g(t.Monad0().Bind1())(Zt(p)(function(Pn){return g(t.Monad0().Bind1())(N(t)(ut(Bn)))(function(Ir){return Pn instanceof Gi&&Ir instanceof rl?g(t.Monad0().Bind1())(N(t)(ut(v)))(Pr(n)(J)(function(){var rr=r.doLogic(Pn.value0)(a);return function(O){return c(rr(O))}}())):Pn instanceof wu&&Ir instanceof rl?Vn(Jn)(t.Monad0().Bind1())(K(n.Apply0().Functor0())(N(t)(Ht(TC.value)(Bn))))(function(){var rr=tn(n.Apply0())(tn(n.Apply0())(tn(n.Apply0())(tn(n.Apply0())(g(t.Monad0().Bind1())(N(t)(ut(v)))(Pr(n)(J)(function(O){return Qt(n)(kt)(e.parent)(function(Jt){return c(r.disconnectElement(a)({id:O,parent:Jt,scope:hn}))})})))(Fa(t.Monad0().Bind1())(N(t)(ut(l)))))(Fa(t.Monad0().Bind1())(N(t)(ut(o)))))(K(n.Apply0().Functor0())(N(t)(Bt(nl(s))(m)))))(K(n.Apply0().Functor0())(N(t)(Bt(nl(_))(m))));return tn(n.Apply0())(K(n.Apply0().Functor0())(N(t)(Ht(rr)(I))))(rr)}):Pn instanceof Mu&&Ir instanceof im?Vn(Jn)(t.Monad0().Bind1())(K(n.Apply0().Functor0())(N(t)(Ht(rl.value)(Bn))))(function(){return g(t.Monad0().Bind1())(Zt(Me(n)(t)(r)(function(){var rr={};for(var O in e)({}).hasOwnProperty.call(e,O)&&(rr[O]=e[O]);return rr.scope=hn,rr.raiseId=function(Jt){return K(n.Apply0().Functor0())(N(t)(Bt(F(ct)([Jt]))(v)))},rr}())(a)(Pn.value0))(c))(function(rr){return Vn(Jn)(t.Monad0().Bind1())(K(n.Apply0().Functor0())(N(t)(Bt(Ao(_)(rr))(m))))(function(){return K(n.Apply0().Functor0())(N(t)(Ht(rr)(o)))})})}):f(n)(void 0)})}))(function(Pn){return Vn(Jn)(t.Monad0().Bind1())(K(n.Apply0().Functor0())(N(t)(Ht(Pn)(l))))(function(){return Vn(Jn)(t.Monad0().Bind1())(K(n.Apply0().Functor0())(N(t)(Bt(Ao(s)(Pn))(m))))(function(){return Fa(t.Monad0().Bind1())(N(t)(ut(I)))})})})})})})})})})})})}))(function(p){return f(n)(Vn(Jn)(t.Monad0().Bind1())(g(t.Monad0().Bind1())(N(t)(ut(m)))(Qn(um)(tn(n.Apply0()))(f(n)(void 0))))(function(){return p}))})})});throw new Error("Failed pattern match at Bolson.Control (line 531, column 17 - line 615, column 20): "+[i.constructor.name])}}}}}},hC=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return function(u){return function(i){var c=function(m){return function(p){return yr(function(s){return g(n.Monad0().Bind1())(Xp(d(st)(S(""))(nf()(u))))(function(l){var _=oo(J)(V(n.Monad0().Applicative0()))(ke(io)(function(o){return Zf(fs)(function(v){return function(I){return I instanceof Sn?function(hn){return hn(function(){var Bn={};for(var Pn in m)({}).hasOwnProperty.call(m,Pn)&&(Bn[Pn]=m[Pn]);return Bn.parent=y.value,Bn.scope=r(m.scope),Bn.raiseId=function(Ir){return Qp(o)(Ir)(l)},Bn}())(p)}(a.toElt(I.value0)):v(a.wrapElt(I))}})})(nf()(u)));return g(n.Monad0().Bind1())(Zt(_)(s))(function(o){return g(n.Monad0().Bind1())(N(n)(yt(f(n.Monad0().Applicative0())(void 0))))(function(v){return g(n.Monad0().Bind1())(d(n.Monad0().Bind1().Apply0().Functor0())(E)(Yp(l)))(function(I){var hn=d(wo)(function(Pn){return function(Ir){return new Sn(a.fromEltO1(function(rr){return function(O){return yr(function(Jt){return Vn(Jn)(n.Monad0().Bind1())(rr.raiseId(Pn))(function(){return Vn(Jn)(n.Monad0().Bind1())(Qt(n.Monad0().Applicative0())(kt)(rr.parent)(function(Go){return Jt(a.giveNewParent(O)({id:Pn,parent:Go,scope:rr.scope})(Ir))}))(function(){return f(n.Monad0().Applicative0())(f(n.Monad0().Applicative0())(void 0))})})})}}))}})(I),Bn=Me(n.Monad0().Applicative0())(n)(e)(m)(p)(i(hn)(E));return g(n.Monad0().Bind1())(Zt(Bn)(s))(function(Pn){return Vn(Jn)(n.Monad0().Bind1())(K(n.Monad0().Bind1().Apply0().Functor0())(N(n)(Ht(Pn)(v))))(function(){return f(n.Monad0().Applicative0())(Vn(Jn)(n.Monad0().Bind1())(o)(function(){return Vn(Jn)(n.Monad0().Bind1())(Le(n.Monad0().Applicative0())(!t)(Qt(n.Monad0().Applicative0())(J)(nf()(I))(function(Ir){return s(a.deleteFromCache(p)({id:Ir}))})))(function(){return Fa(n.Monad0().Bind1())(N(n)(ut(v)))})}))})})})})})})})}};return new Sn(a.fromEltO2(c))}}}}}}}};var fm=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return hC()(n)(!1)(en(X))(t)(r)(e)(a)}}}}}};var EC=function(n){return n},Lu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Iu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),FC=function(n){return n},rf=de(),vt=FC;var nr=function(){return Lu.create}();var Ua=function(){return Iu.create}(),nt=function(){var n=d(Br)(d(In)(S(!0)));return function(t){return EC(n(t))}}(),U=function(n){return n.attr};var MC=function(n){return n.makeText},wC=function(n){return function(t){return function(r){return d(Wn)(function(e){return n.setText(function(a){return{id:t,text:a}}(e))})(r)}}},AC=function(n){return function(t){return function(r){return d(Wn)(function(e){return function(a){if(a.value instanceof Lu)return n.setProp({id:t,key:a.key,value:a.value.value0});if(a.value instanceof Iu)return n.setCb({id:t,key:a.key,value:a.value.value0});throw new Error("Failed pattern match at Deku.Control (line 83, column 26 - line 85, column 45): "+[a.value.constructor.name])}(rf(e))})(r)}}},xC=function(n){return n.makeElement},LC=function(n){return n.attributeParent},Or=function(n){return function(t){var r=function(e){return function(a){return yr(function(u){return g(n.Monad0().Bind1())(a.ids)(function(i){return Vn(Jn)(n.Monad0().Bind1())(e.raiseId(i))(function(){return d(n.Monad0().Bind1().Apply0().Functor0())(tn(n.Monad0().Bind1().Apply0())(u(a.deleteFromCache({id:i}))))(Zt(oo(J)(V(n.Monad0().Applicative0()))([f(x(n))(MC(a)({id:i,parent:e.parent,scope:e.scope})),wC(a)(i)(t)]))(u))})})})}};return new Sn(r)}},$n=function(n){return function(t){return Or(n)(f(x(n))(t))}},cm=function(n){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=ht(n);return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:pn(Eo)})}},toElt:function(t){return t}}};var xo=function(n){return function(t){return function(r){return t(Dn(V(n.MonadST5().Monad0().Applicative0())))([Jp(r)])}}};var IC=function(n){return Me(n.MonadST5().Monad0().Applicative0())(n.MonadST5())(cm())};var ft=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return yr(function(c){return g(n.MonadST5().Monad0().Bind1())(i.ids)(function(m){return Vn(Jn)(n.MonadST5().Monad0().Bind1())(u.raiseId(m))(function(){return d(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(p){return tn(n.MonadST5().Monad0().Bind1().Apply0())(c(i.deleteFromCache({id:m})))(p)})(Zt(z(Nn(n.MonadST5().Monad0().Applicative0()))(oo(J)(V(n.MonadST5().Monad0().Applicative0()))(F(ct)([f(x(n.MonadST5()))(xC(i)({id:m,parent:u.parent,scope:u.scope,tag:t})),AC(i)(m)(r)])(zn([])(function(p){return[f(x(n.MonadST5()))(LC(i)({id:m,parent:p,pos:u.pos}))]})(u.parent))))(IC(n)({parent:new D(m),scope:u.scope,raiseId:function(p){return f(n.MonadST5().Monad0().Applicative0())(void 0)},pos:y.value})(i)(e)))(c))})})})}};return a}}}};var lm=function(){return function(n){return function(t){return function(r){return fm()(n.MonadST5())(cm())({fromEltO1:de(),fromEltO2:de(),toElt:de(),wrapElt:function(){var e=ft(n)("div")(Dn(V(n.MonadST5().Monad0().Applicative0())));return function(a){return Sn.create(e(a))}}(),giveNewParent:function(e){return function(a){return function(u){return ht()(e).giveNewParent(a)}}},deleteFromCache:function(){var e=ht();return function(a){return function(u){return u.deleteFromCache}(e(a))}}()})(t)(xr(Dr)(d(wo)(function(e){return e(void 0)}))(de()(r)))}}}};var It=function(){function n(){}return n.value=new n,n}();var St={attr:function(n){return function(t){return vt({key:"href",value:nr(t)})}}};var et=function(){function n(){}return n.value=new n,n}(),Lo={attr:function(n){return function(t){return vt({key:"click",value:Ua(S(Hr(In)(t)(!0)))})}}};var dt={attr:function(n){return function(t){return vt({key:"click",value:Ua(t)})}}};var _r=function(){function n(){}return n.value=new n,n}();var Io={attr:function(n){return function(t){return vt({key:"style",value:nr(t)})}}};var _m={attr:function(n){return function(t){return vt({key:"style",value:nr(t)})}}};var sm={attr:function(n){return function(t){return vt({key:"style",value:nr(t)})}}};var el={attr:function(n){return function(t){return vt({key:"style",value:nr(t)})}}};var ef={attr:function(n){return function(t){return vt({key:"style",value:nr(t)})}}};var pm={attr:function(n){return function(t){return vt({key:"style",value:nr(t)})}}};var af=function(n){return function(t){return function(r){return new Sn(ft(n)("a")(t)(it(r)))}}};var Ve=function(n){return function(t){return function(r){return new Sn(ft(n)("div")(t)(it(r)))}}},Hn=function(n){return Ve(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var Ha=function(n){return function(t){return function(r){return new Sn(ft(n)("span")(t)(it(r)))}}},$u=function(n){return Ha(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var So=function(){function n(){}return n.value=new n,n}();var vm={attr:function(n){return function(t){return vt({key:"type",value:nr(t)})}}};var uf={attr:function(n){return function(t){return vt({key:"type",value:nr(t)})}}};var br=function(n){return function(t){return function(r){return new Sn(ft(n)("button")(t)(it(r)))}}},dm=function(n){return br(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var SC=function(n){return function(t){return function(r){return new Sn(ft(n)("code")(t)(it(r)))}}},wt=function(n){return SC(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var $C=function(n){return function(t){return function(r){return new Sn(ft(n)("i")(t)(it(r)))}}},Dm=function(n){return $C(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var da=function(n){return function(t){return function(r){return new Sn(ft(n)("input")(t)(it(r)))}}};var NC=function(n){return function(t){return function(r){return new Sn(ft(n)("li")(t)(it(r)))}}},ym=function(n){return NC(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var kC=function(n){return function(t){return function(r){return new Sn(ft(n)("pre")(t)(it(r)))}}},At=function(n){return kC(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var OC=function(n){return function(t){return function(r){return new Sn(ft(n)("ul")(t)(it(r)))}}},gm=function(n){return OC(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var cf=function(){function n(){}return n.value=new n,n}(),$o=function(){function n(){}return n.value=new n,n}(),Po=function(){function n(){}return n.value=new n,n}(),No=function(){function n(){}return n.value=new n,n}(),Ro=function(){function n(){}return n.value=new n,n}(),ko=function(){function n(){}return n.value=new n,n}(),Oo=function(){function n(){}return n.value=new n,n}(),Wo=function(){function n(){}return n.value=new n,n}(),Uo=function(){function n(){}return n.value=new n,n}(),Ho=function(){function n(){}return n.value=new n,n}(),bm=function(n){return n==="Intro"?f(Ot)(cf.value):n==="HelloWorld"?f(Ot)($o.value):n==="SimpleComponent"?f(Ot)(Po.value):n==="PURSX1"?f(Ot)(No.value):n==="PURSX2"?f(Ot)(Ro.value):n==="Events"?f(Ot)(ko.value):n==="Effects"?f(Ot)(Oo.value):n==="Events2"?f(Ot)(Wo.value):n==="Portals"?f(Ot)(Uo.value):n==="SSR"?f(Ot)(Ho.value):Dn(Y_)};function ol(){window.scrollTo(0,0)}var tr=ol;var HC=function(n){return n};var xt=function(n){return{pursxToElement:function(t){return function(r){return function(e){return{cache:va,element:function(a){return function(u){return Dn(V(n))}}}}}}}},ul=function(n){return n.pursxToElement},qt=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var c=ul(n)(a)(M.value)(i);return{cache:Ao(Fe(t)(M.value))(!0)(c.cache),element:function(m){return function(p){return z(Nn(e.MonadST5().Monad0().Applicative0()))(d(Wn)(xr(Dr)(rf)(function(s){if(s.value instanceof Lu)return p.setProp({id:Fe(t)(M.value)+a,key:s.key,value:s.value.value0});if(s.value instanceof Iu)return p.setCb({id:Fe(t)(M.value)+a,key:s.key,value:s.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4475, column 38 - line 4485, column 24): "+[s.value.constructor.name])}))(zc(r)()(M.value)(i)))(c.element(m)(p))}}}}}}}}}}}};var jn=HC,il=function(n){return function(t){return function(){return function(){return function(r){return function(e){return function(a){return function(u){return function(i){var c=function(m){return function(p){return yr(function(s){return g(r.MonadST5().Monad0().Bind1())(p.ids)(function(l){return g(r.MonadST5().Monad0().Bind1())(p.ids)(function(_){return Vn(Jn)(r.MonadST5().Monad0().Bind1())(m.raiseId(l))(function(){var o=ul(e)(_)(M.value)(i);return d(r.MonadST5().Monad0().Bind1().Apply0().Functor0())(tn(r.MonadST5().Monad0().Bind1().Apply0())(s(p.deleteFromCache({id:l}))))(Zt(z(Nn(r.MonadST5().Monad0().Applicative0()))(f(x(r.MonadST5()))(p.makePursx({id:l,parent:m.parent,cache:o.cache,pxScope:_,scope:m.scope,html:Fe(n)(u),verb:Fe(t)(a)})))(o.element(m)(p)))(s))})})})})}};return new Sn(c)}}}}}}}}},$t=function(n){return function(){return function(){return function(t){return function(r){return il(n)({reflectType:function(){return"~"}})()()(r)(t)(M.value)}}}}},Cm=function(n){return function(){return function(t){return function(r){return function(e){return $t(n)()()(r)(t)(e)({})}}}}},BC=function(n){return Me(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=ht();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:pn(Eo)})}},toElt:function(t){return t}})},Gn=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var c=zc(r)()(M.value)(i),m=ul(n)(a)(M.value)(i);return{cache:Ao(Fe(t)(M.value))(!1)(m.cache),element:function(p){return function(s){return z(Nn(e.MonadST5().Monad0().Applicative0()))(BC(e)({parent:new D(Fe(t)(M.value)+a),scope:p.scope,raiseId:function(l){return f(e.MonadST5().Monad0().Applicative0())(void 0)},pos:p.pos})(s)(c))(m.element(p)(s))}}}}}}}}}}}};var fl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody1
  ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  )`,cl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,ll=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\), type (/\\))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (Event, bus, fold, mapAccum)
import Type.Prelude (Proxy(..))

counter :: forall a. Event a \u2192 Event (a /\\ Int)
counter event = mapAccum f event 0
  where
  f a b = (b + 1) /\\ (a /\\ b)

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 = index (Proxy :: _ 0) v
            p1 = index (Proxy :: _ 1) v
            ev = fold (const not) event
            flips = switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], D.span_ [ flips false ] ]
            ]
  )
`,_l=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,sl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (filterMap)
import Data.Foldable (for_, oneOfMap)
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (cb, (:=))
import Deku.Control (dyn_, text_)
import Deku.Core (insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus, keepLatest, mapAccum)
import Web.Event.Event (target)
import Web.HTML.HTMLInputElement (fromEventTarget, value)
import Web.UIEvent.KeyboardEvent (code, fromEvent)

data MainUIAction
  = UIShown
  | AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure UIShown <|> _) \\event -> do
      let
        top =
          [ D.input
              ( oneOfMap pure
                  [ D.OnInput := cb \\e -> for_
                      ( target e
                          >>= fromEventTarget
                      )
                      ( value
                          >=> push <<< ChangeText
                      )
                  , D.OnKeyup := cb
                      \\e -> for_ (fromEvent e) \\evt -> do
                        when (code evt == "Enter") $ do
                          push AddTodo
                  ]
              )
              []
          , D.button
              (pure $ D.OnClick := push AddTodo)
              [ text_ "Add" ]
          ]
      D.div_
        [ D.div_ top
        , dyn_ D.div $
            map
              ( \\txt -> keepLatest $ bus \\p' e' ->
                  ( pure $ insert_ $ D.div_
                      [ text_ txt
                      , D.button
                          ( pure
                              $ D.OnClick := p' sendToTop
                          )
                          [ text_ "Prioritize" ]
                      , D.button
                          ( pure
                              $ D.OnClick := p' remove
                          )
                          [ text_ "Delete" ]
                      ]
                  ) <|> e'
              )
              ( filterMap
                  ( \\(tf /\\ s) ->
                      if tf then Just s else Nothing
                  )
                  ( mapAccum
                      ( \\a b -> case a of
                          ChangeText s -> s /\\ (false /\\ s)
                          AddTodo -> b /\\ (true /\\ b)
                          _ -> "" /\\ (false /\\ "")
                      )
                      event
                      ""
                  )
              )
        ]
  )
`,pl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (fold)
import FRP.Event.VBus (V, vbus)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody1
  ( vbus (Proxy :: _ UIEvents) \\push event -> do
      D.div_
        [ D.button
            (click_ (pure push.buttonClicked))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show
                        <$> fold
                          (const (add 1))
                          (pure unit <|> event.buttonClicked)
                          (-1)
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,ml=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, filterMap)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (bus, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (pure Initial <|> _)
      \\event ->
        let
          loadingOrResult = filterMap
            ( case _ of
                Loading -> Just $ Left unit
                Result s -> Just $ Right s
                _ -> Nothing
            )
            event
          loading = filterMap
            ( case _ of
                Left _ -> Just unit
                _ -> Nothing
            )
            loadingOrResult
          result = filterMap
            ( case _ of
                Right s -> Just s
                _ -> Nothing
            )
            loadingOrResult
        in
          D.div_
            [ D.div_
                [ D.button (pure (D.OnClick := clickCb push))
                    [ text
                        ( pure clickText
                            <|> (loading $> "Loading...")
                            <|> (result $> clickText)
                        )
                    ]
                ]
            , D.div
                ( (pure (D.Style := "display: none;")) <|>
                    ( compact
                        ( mapAccum
                            ( \\_ b -> (b && false) /\\
                                if b then Just unit else Nothing
                            )
                            result
                            true
                        ) $> (D.Style := "display: block;")
                    )
                )
                [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
            ]
  )
`,vl=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBodyA)
import Effect (Effect)

main :: Effect Unit
main = runInBodyA
  ( [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,dl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (pure push.buttonClicked))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (pure unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Dl=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  runSSR
    ( Template
        { head:
            """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
        , tail: "</html>"
        }
    )
    app >>= log`,yl=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function Tm(n){return n.target}function Pt(n){return function(){return n.preventDefault()}}function hm(n,t,r){return n==null?t:r(n)}function gl(n){return n}var Bo=zn(null)(gl),zt=function(n){return hm(n,y.value,D.create)};var sf=function(n){return zt(Tm(n))};var JC=function(){return M.value}(),Fm=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(JC)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(vl)])])),result:jn(Hn(t)([dm(t)([$n(t.MonadST5())("I do nothing")]),gm(t)(d(st)(function(){var r=ym(t),e=f(nu),a=$n(t.MonadST5());return function(u){return r(e(a(u)))}}())(["A","B","C"])),Hn(t)([af(t)(f(x(t.MonadST5()))(U(St)(It.value)("https://example.com")))([$n(t.MonadST5())("foo ")]),Dm(t)([$n(t.MonadST5())(" bar ")]),Ha(t)(f(x(t.MonadST5()))(U(Io)(_r.value)("font-weight: 800;")))([$n(t.MonadST5())(" baz")])]),Hn(t)([Hn(t)([Hn(t)([da(t)(f(x(t.MonadST5()))(U(uf)(So.value)("range")))([])])])])])),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(No.value)))(tr)})),U(St)(It.value)(n.slug+"pursx1/")])})}};function Mm(n,t,r,e,a){return function(u,i){var c=n.newXHR(),m=n.fixupUrl(a.url,c);if(c.open(a.method||"GET",m,!0,a.username,a.password),a.headers)try{for(var p=0,s;(s=a.headers[p])!=null;p++)c.setRequestHeader(s.field,s.value)}catch(_){u(_)}var l=function(_){return function(){u(new Error(_))}};return c.onerror=l(r),c.ontimeout=l(t),c.onload=function(){i({status:c.status,statusText:c.statusText,headers:c.getAllResponseHeaders().split(`\r
`).filter(function(_){return _.length>0}).map(function(_){var o=_.indexOf(":");return e(_.substring(0,o))(_.substring(o+2))}),body:c.response})},c.responseType=a.responseType,c.withCredentials=a.withCredentials,c.timeout=a.timeout,c.send(a.content),function(_,o,v){try{c.abort()}catch(I){return o(I)}return v()}}}var pf="application/json",wm="application/x-www-form-urlencoded";var xm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Lm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Im=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Sm=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),$m=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),bl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Cl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Pm=function(n){return n instanceof bl?new D(wm):n instanceof Cl?new D(pf):y.value};var mf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),vf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Nm=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Rm=function(n){if(n instanceof mf)return ht()(n.value0);if(n instanceof vf)return ht()(n.value0);if(n instanceof Nm)return n.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[n.constructor.name])};var Tl=function(n){if(n instanceof mf)return"Accept";if(n instanceof vf)return"Content-Type";if(n instanceof Nm)return n.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[n.constructor.name])};var hl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),El=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Fl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Pu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Ml=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),df=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),km=function(n){if(n instanceof hl)return"arraybuffer";if(n instanceof El)return"blob";if(n instanceof Fl)return"document";if(n instanceof Pu||n instanceof Ml)return"text";if(n instanceof df)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[n.constructor.name])},Om=function(n){return n instanceof Pu?new D(pf):y.value};var Wm=function(){return new Pu(en(X))}(),Um=function(){return new df(en(X))}();var Bm=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();function qo(n){return new Error(n)}function Nu(n){return n.message}function Ru(n){return function(){throw n}}var me=function(n){return n.throwError};var Ye=function(n){return n.catchError};var yf=function(n){return function(t){return Ye(n)(d(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(W.create)(t))(function(){var r=f(n.MonadThrow0().Monad0().Applicative0());return function(e){return r(B.create(e))}}())}};var xe=function(n){return n.state};var zo=function(n){return function(t){return xe(n)(function(r){var e=t(r);return new T(e,e)})}};var ve=function(n){return n.liftEffect};var wl=function(n){return n};var Al=function(n){return n};var hf=function(n){return function(t){return n(t)}},zm=function(n){return{map:function(t){return hf(d(n)(d(Ka)(t)))}}};var xl=function(n){return{Applicative0:function(){return za(n)},Bind1:function(){return Ll(n)}}},Ll=function(n){return{bind:function(t){return function(r){return g(n.Bind1())(t)(jr(function(){var e=f(n.Applicative0());return function(a){return e(B.create(a))}}())(function(e){var a=r(e);return a}))}},Apply0:function(){return Vm(n)}}},Vm=function(n){return{apply:Xr(xl(n)),Functor0:function(){return zm(n.Bind1().Apply0().Functor0())}}},za=function(n){return{pure:function(){var t=f(n.Applicative0());return function(r){return wl(t(W.create(r)))}}(),Apply0:function(){return Vm(n)}}};var Jm=function(n){return{throwError:function(){var t=f(n.Applicative0());return function(r){return wl(t(B.create(r)))}}(),Monad0:function(){return xl(n)}}};var Il=function(n){return function(t){return{alt:function(r){return function(e){return g(t.Bind1())(r)(function(a){if(a instanceof W)return f(t.Applicative0())(new W(a.value0));if(a instanceof B)return g(t.Bind1())(e)(function(u){if(u instanceof W)return f(t.Applicative0())(new W(u.value0));if(u instanceof B)return f(t.Applicative0())(new B(F(n)(a.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[a.constructor.name])})}},Functor0:function(){return zm(t.Bind1().Apply0().Functor0())}}}};var jm=function(){var n=ht();return function(t){return n(Al(t))}}();function Sl(n){return JSON.stringify(n)}function $l(n){return function(t){return JSON.stringify(t,null,n)}}var Gm=va;function Qm(n,t,r){try{return t(JSON.parse(r))}catch(e){return n(e.message)}}var Ym=function(n){return Qm(B.create,W.create,n)};var Ff=function(n){return function(t){return function(r){return r.replace(n,t)}}};var Pl=function(n){return function(t){return t.join(n)}};function cT(n){return n.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}var nv=function(t,r,e){try{return r(cT(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(a){return t(a)}};var Mf=function(){return Dc(nv)(S(y.value))(D.create)}();var sT=function(n){return n};var tv=function(){var n=function(e){if(e.value1 instanceof y)return Mf(e.value0);if(e.value1 instanceof D)return bn(Ea)(d(rt)(function(a){return function(u){return a+("="+u)}})(Mf(e.value0)))(Mf(e.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[e.constructor.name])},t=d(rt)(Pl("&")),r=mr(Ue)(Ot)(n);return function(e){return t(r(sT(e)))}}();var mT=function(){function n(){}return n.value=new n,n}(),qu=function(){function n(){}return n.value=new n,n}(),vT=function(){function n(){}return n.value=new n,n}(),rv=function(){function n(){}return n.value=new n,n}(),ev=function(){function n(){}return n.value=new n,n}(),av=function(){function n(){}return n.value=new n,n}(),dT=function(){function n(){}return n.value=new n,n}(),DT=function(){function n(){}return n.value=new n,n}(),yT=function(){function n(){}return n.value=new n,n}(),gT=function(){function n(){}return n.value=new n,n}(),bT=function(){function n(){}return n.value=new n,n}(),CT=function(){function n(){}return n.value=new n,n}(),TT=function(){function n(){}return n.value=new n,n}(),hT=function(){function n(){}return n.value=new n,n}(),ET=function(){function n(){}return n.value=new n,n}(),ov=function(){function n(){}return n.value=new n,n}();var FT=function(n){return n},MT={show:function(n){if(n instanceof mT)return"OPTIONS";if(n instanceof qu)return"GET";if(n instanceof vT)return"HEAD";if(n instanceof rv)return"POST";if(n instanceof ev)return"PUT";if(n instanceof av)return"DELETE";if(n instanceof dT)return"TRACE";if(n instanceof DT)return"CONNECT";if(n instanceof yT)return"PROPFIND";if(n instanceof gT)return"PROPPATCH";if(n instanceof bT)return"MKCOL";if(n instanceof CT)return"COPY";if(n instanceof TT)return"MOVE";if(n instanceof hT)return"LOCK";if(n instanceof ET)return"UNLOCK";if(n instanceof ov)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[n.constructor.name])}};var uv=jr(k(MT))(FT);var cv=function(){var n=wi(vc);return function(t){return Ai(n(t))}}();var lv=function(n){return n.value0};var Lr=function(){var n={},t="Pure",r="Throw",e="Catch",a="Sync",u="Async",i="Bind",c="Bracket",m="Fork",p="Sequential",s="Map",l="Apply",_="Alt",o="Cons",v="Resume",I="Release",hn="Finalizer",Bn="Finalized",Pn="Forked",Ir="Fiber",rr="Thunk";function O(R,kn,bt,qn){this.tag=R,this._1=kn,this._2=bt,this._3=qn}function Jt(R){var kn=function(bt,qn,j){return new O(R,bt,qn,j)};return kn.tag=R,kn}function Go(R){return new O(t,void 0)}function iD(R){try{R()}catch(kn){setTimeout(function(){throw kn},0)}}function fD(R,kn,bt){try{return kn(bt())}catch(qn){return R(qn)}}function cD(R,kn,bt){try{return kn(bt)()}catch(qn){return bt(R(qn))(),Go}}var Zu=function(){var R=1024,kn=0,bt=0,qn=new Array(R),j=!1;function A(){var On;for(j=!0;kn!==0;)kn--,On=qn[bt],qn[bt]=void 0,bt=(bt+1)%R,On();j=!1}return{isDraining:function(){return j},enqueue:function(On){var gn,Dt;kn===R&&(Dt=j,A(),j=Dt),qn[(bt+kn)%R]=On,kn++,j||A()}}}();function lD(R){var kn={},bt=0,qn=0;return{register:function(j){var A=bt++;j.onComplete({rethrow:!0,handler:function(On){return function(){qn--,delete kn[A]}}})(),kn[A]=j,qn++},isEmpty:function(){return qn===0},killAll:function(j,A){return function(){if(qn===0)return A();var On=0,gn={};function Dt(Zn){gn[Zn]=kn[Zn].kill(j,function(Et){return function(){delete gn[Zn],On--,R.isLeft(Et)&&R.fromLeft(Et)&&setTimeout(function(){throw R.fromLeft(Et)},0),On===0&&A()}})()}for(var jt in kn)kn.hasOwnProperty(jt)&&(On++,Dt(jt));return kn={},bt=0,qn=0,function(Zn){return new O(a,function(){for(var Et in gn)gn.hasOwnProperty(Et)&&gn[Et]()})}}}}}var Ja=0,Tr=1,Ku=2,ni=3,ti=4,Sr=5,Xo=6;function Bf(R,kn,bt){var qn=0,j=Ja,A=bt,On=null,gn=null,Dt=null,jt=null,Zn=null,Et=0,Ca=0,Ur=null,na=!0;function ta(G){for(var Y,An,Rn;;)switch(Y=null,An=null,Rn=null,j){case Ku:j=Tr;try{A=Dt(A),jt===null?Dt=null:(Dt=jt._1,jt=jt._2)}catch(er){j=Sr,On=R.left(er),A=null}break;case ni:R.isLeft(A)?(j=Sr,On=A,A=null):Dt===null?j=Sr:(j=Ku,A=R.fromRight(A));break;case Tr:switch(A.tag){case i:Dt&&(jt=new O(o,Dt,jt)),Dt=A._2,j=Tr,A=A._1;break;case t:Dt===null?(j=Sr,A=R.right(A._1)):(j=Ku,A=A._1);break;case a:j=ni,A=fD(R.left,R.right,A._1);break;case u:j=ti,A=cD(R.left,A._1,function(er){return function(){qn===G&&(qn++,Zu.enqueue(function(){qn===G+1&&(j=ni,A=er,ta(qn))}))}});return;case r:j=Sr,On=R.left(A._1),A=null;break;case e:Dt===null?Zn=new O(o,A,Zn,gn):Zn=new O(o,A,new O(o,new O(v,Dt,jt),Zn,gn),gn),Dt=null,jt=null,j=Tr,A=A._1;break;case c:Et++,Dt===null?Zn=new O(o,A,Zn,gn):Zn=new O(o,A,new O(o,new O(v,Dt,jt),Zn,gn),gn),Dt=null,jt=null,j=Tr,A=A._1;break;case m:j=ni,Y=Bf(R,kn,A._2),kn&&kn.register(Y),A._1&&Y.run(),A=R.right(Y);break;case p:j=Tr,A=sD(R,kn,A._1);break}break;case Sr:if(Dt=null,jt=null,Zn===null)j=Xo,A=gn||On||A;else switch(Y=Zn._3,Rn=Zn._1,Zn=Zn._2,Rn.tag){case e:gn&&gn!==Y&&Et===0?j=Sr:On&&(j=Tr,A=Rn._2(R.fromLeft(On)),On=null);break;case v:gn&&gn!==Y&&Et===0||On?j=Sr:(Dt=Rn._1,jt=Rn._2,j=Ku,A=R.fromRight(A));break;case c:Et--,On===null&&(An=R.fromRight(A),Zn=new O(o,new O(I,Rn._2,An),Zn,Y),(gn===Y||Et>0)&&(j=Tr,A=Rn._3(An)));break;case I:Zn=new O(o,new O(Bn,A,On),Zn,gn),j=Tr,gn&&gn!==Y&&Et===0?A=Rn._1.killed(R.fromLeft(gn))(Rn._2):On?A=Rn._1.failed(R.fromLeft(On))(Rn._2):A=Rn._1.completed(R.fromRight(A))(Rn._2),On=null,Et++;break;case hn:Et++,Zn=new O(o,new O(Bn,A,On),Zn,gn),j=Tr,A=Rn._1;break;case Bn:Et--,j=Sr,A=Rn._1,On=Rn._2;break}break;case Xo:for(var Tt in Ur)Ur.hasOwnProperty(Tt)&&(na=na&&Ur[Tt].rethrow,iD(Ur[Tt].handler(A)));Ur=null,gn&&On?setTimeout(function(){throw R.fromLeft(On)},0):R.isLeft(A)&&na&&setTimeout(function(){if(na)throw R.fromLeft(A)},0);return;case Ja:j=Tr;break;case ti:return}}function Ct(G){return function(){if(j===Xo)return na=na&&G.rethrow,G.handler(A)(),function(){};var Y=Ca++;return Ur=Ur||{},Ur[Y]=G,function(){Ur!==null&&delete Ur[Y]}}}function rn(G,Y){return function(){if(j===Xo)return Y(R.right(void 0))(),function(){};var An=Ct({rethrow:!1,handler:function(){return Y(R.right(void 0))}})();switch(j){case Ja:gn=R.left(G),j=Xo,A=gn,ta(qn);break;case ti:gn===null&&(gn=R.left(G)),Et===0&&(j===ti&&(Zn=new O(o,new O(hn,A(G)),Zn,gn)),j=Sr,A=null,On=null,ta(++qn));break;default:gn===null&&(gn=R.left(G)),Et===0&&(j=Sr,A=null,On=null)}return An}}function En(G){return function(){var Y=Ct({rethrow:!1,handler:G})();return j===Ja&&ta(qn),Y}}return{kill:rn,join:En,onComplete:Ct,isSuspended:function(){return j===Ja},run:function(){j===Ja&&(Zu.isDraining()?ta(qn):Zu.enqueue(function(){ta(qn)}))}}}function _D(R,kn,bt,qn){var j=0,A={},On=0,gn={},Dt=new Error("[ParAff] Early exit"),jt=null,Zn=n;function Et(Ct,rn,En){var G=rn,Y=null,An=null,Rn=0,Tt={},er,Qo;n:for(;;)switch(er=null,G.tag){case Pn:if(G._3===n&&(er=A[G._1],Tt[Rn++]=er.kill(Ct,function(pD){return function(){Rn--,Rn===0&&En(pD)()}})),Y===null)break n;G=Y._2,An===null?Y=null:(Y=An._1,An=An._2);break;case s:G=G._2;break;case l:case _:Y&&(An=new O(o,Y,An)),Y=G,G=G._1;break}if(Rn===0)En(R.right(void 0))();else for(Qo=0,er=Rn;Qo<er;Qo++)Tt[Qo]=Tt[Qo]();return Tt}function Ca(Ct,rn,En){var G,Y,An,Rn,Tt,er;R.isLeft(Ct)?(G=Ct,Y=null):(Y=Ct,G=null);n:for(;;){if(An=null,Rn=null,Tt=null,er=null,jt!==null)return;if(rn===null){qn(G||Y)();return}if(rn._3!==n)return;switch(rn.tag){case s:G===null?(rn._3=R.right(rn._1(R.fromRight(Y))),Y=rn._3):rn._3=G;break;case l:if(An=rn._1._3,Rn=rn._2._3,G){if(rn._3=G,Tt=!0,er=On++,gn[er]=Et(Dt,G===An?rn._2:rn._1,function(){return function(){delete gn[er],Tt?Tt=!1:En===null?Ca(G,null,null):Ca(G,En._1,En._2)}}),Tt){Tt=!1;return}}else{if(An===n||Rn===n)return;Y=R.right(R.fromRight(An)(R.fromRight(Rn))),rn._3=Y}break;case _:if(An=rn._1._3,Rn=rn._2._3,An===n&&R.isLeft(Rn)||Rn===n&&R.isLeft(An))return;if(An!==n&&R.isLeft(An)&&Rn!==n&&R.isLeft(Rn))G=Y===An?Rn:An,Y=null,rn._3=G;else if(rn._3=Y,Tt=!0,er=On++,gn[er]=Et(Dt,Y===An?rn._2:rn._1,function(){return function(){delete gn[er],Tt?Tt=!1:En===null?Ca(Y,null,null):Ca(Y,En._1,En._2)}}),Tt){Tt=!1;return}break}En===null?rn=null:(rn=En._1,En=En._2)}}function Ur(Ct){return function(rn){return function(){delete A[Ct._1],Ct._3=rn,Ca(rn,Ct._2._1,Ct._2._2)}}}function na(){var Ct=Tr,rn=bt,En=null,G=null,Y,An;n:for(;;)switch(Y=null,An=null,Ct){case Tr:switch(rn.tag){case s:En&&(G=new O(o,En,G)),En=new O(s,rn._1,n,n),rn=rn._2;break;case l:En&&(G=new O(o,En,G)),En=new O(l,n,rn._2,n),rn=rn._1;break;case _:En&&(G=new O(o,En,G)),En=new O(_,n,rn._2,n),rn=rn._1;break;default:An=j++,Ct=Sr,Y=rn,rn=new O(Pn,An,new O(o,En,G),n),Y=Bf(R,kn,Y),Y.onComplete({rethrow:!1,handler:Ur(rn)})(),A[An]=Y,kn&&kn.register(Y)}break;case Sr:if(En===null)break n;En._1===n?(En._1=rn,Ct=Tr,rn=En._2,En._2=n):(En._2=rn,rn=En,G===null?En=null:(En=G._1,G=G._2))}for(Zn=rn,An=0;An<j;An++)A[An].run()}function ta(Ct,rn){jt=R.left(Ct);var En;for(var G in gn)if(gn.hasOwnProperty(G)){En=gn[G];for(G in En)En.hasOwnProperty(G)&&En[G]()}gn=null;var Y=Et(Ct,Zn,rn);return function(An){return new O(u,function(Rn){return function(){for(var Tt in Y)Y.hasOwnProperty(Tt)&&Y[Tt]();return Go}})}}return na(),function(Ct){return new O(u,function(rn){return function(){return ta(Ct,rn)}})}}function sD(R,kn,bt){return new O(u,function(qn){return function(){return _D(R,kn,bt,qn)}})}return O.EMPTY=n,O.Pure=Jt(t),O.Throw=Jt(r),O.Catch=Jt(e),O.Sync=Jt(a),O.Async=Jt(u),O.Bind=Jt(i),O.Bracket=Jt(c),O.Fork=Jt(m),O.Seq=Jt(p),O.ParMap=Jt(s),O.ParApply=Jt(l),O.ParAlt=Jt(_),O.Fiber=Bf,O.Supervisor=lD,O.Scheduler=Zu,O.nonCanceler=Go,O}(),sv=Lr.Pure,pv=Lr.Throw;function mv(n){return function(t){return Lr.Catch(n,t)}}function vv(n){return function(t){return t.tag===Lr.Pure.tag?Lr.Pure(n(t._1)):Lr.Bind(t,function(r){return Lr.Pure(n(r))})}}function dv(n){return function(t){return Lr.Bind(n,t)}}var Dv=Lr.Sync;var zu=Lr.Async;function yv(n,t){return function(){return Lr.Fiber(n,null,t)}}var wT=function(){function n(r,e){return r===0&&typeof setImmediate<"u"?setImmediate(e):setTimeout(e,r)}function t(r,e){return r===0&&typeof clearImmediate<"u"?clearImmediate(e):clearTimeout(e)}return function(r,e){return Lr.Async(function(a){return function(){var u=n(e,a(r()));return function(){return Lr.Sync(function(){return r(t(e,u))})}}})}}(),AT=Lr.Seq;var Jo={proof:function(n){return n},Coercible0:function(){}};var BT=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var Wl={map:vv};var qT=function(){var n=function(e){if(e instanceof W)return e.value0;if(e instanceof B)return ae("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[e.constructor.name])},t=function(e){if(e instanceof B)return e.value0;if(e instanceof W)return ae("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[e.constructor.name])},r=function(e){if(e instanceof B)return!0;if(e instanceof W)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[e.constructor.name])};return{isLeft:r,fromLeft:t,fromRight:n,left:B.create,right:W.create}}(),zT=function(n){return yv(qT,n)},VT=function(n){return function(){var r=zT(n)();return r.run(),r}},hv=function(){var n=K(In);return function(t){return n(VT(t))}}();var Ul={Applicative0:function(){return wf},Bind1:function(){return Hl}},Hl={bind:dv,Apply0:function(){return Ev(0)}},wf={pure:sv,Apply0:function(){return Ev(0)}},Ev=BT("applyAff","Effect.Aff",function(){return{apply:Xr(Ul),Functor0:function(){return Wl}}});var Bl={liftEffect:Dv,Monad0:function(){return Ul}};var JT={throwError:pv,Monad0:function(){return Ul}},Fv={catchError:mv,MonadThrow0:function(){return JT}};var Mv=S(f(wf)(void 0));var Iv=function(n){return zu(function(t){return function(){var e=n(function(a){return t(B.create(a))()},function(a){return t(W.create(a))()});return function(a){return zu(function(u){return function(){return e(a,function(c){return u(B.create(c))()},function(c){return u(W.create(c))()}),Mv}})}}})};function Af(n){return Object.prototype.toString.call(n).slice(8,-1)}var Sv=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var $v=function(n){return function(t){return function(r){return(r|0)===r?n(r):t}}},Cr=function(n){return n};var xf=isFinite;var Jl=Math.floor;var Vu=function(n){return function(t){return n%t}};var Lf=function(){return $v(D.create)(y.value)}(),dh=function(n){if(!xf(n))return 0;if(n>=Cr(zr(ha)))return zr(ha);if(n<=Cr(ne(ha)))return ne(ha);if(or)return ir(0)(Lf(n));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[n.constructor.name])};var Gl=function(n){return dh(Jl(n))};var Xl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Bv=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),hh=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Eh=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),ya=E,Fh=E;var Sf=function(n){if(n instanceof Xl)return n.value0;if(n instanceof hh)return"Error at array index "+(k(Vr)(n.value0)+(": "+Sf(n.value1)));if(n instanceof Eh)return"Error at property "+(k(pr)(n.value0)+(": "+Sf(n.value1)));if(n instanceof Bv)return"Type mismatch: expected "+(n.value0+(", found "+n.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[n.constructor.name])};var Ql=function(n){var t=me(Jm(n));return function(r){return t(cv(r))}};var ga=function(n){return function(t){return function(r){if(Af(r)===t)return f(za(n))(Fh(r));if(or)return Ql(n)(new Bv(t,Af(r)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[t.constructor.name,r.constructor.name])}}};var Yl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Zl=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Kl=function(){function n(){}return n.value=new n,n}(),n_=function(){function n(){}return n.value=new n,n}(),t_=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),qv=function(n){return function(t){var r=function(s){return s===""?f(za(ot))(Gm):jr(function(){var l=Ql(ot);return function(_){return l(Xl.create(_))}}())(f(za(ot)))(Ym(s))},e=function(){if(t.responseFormat instanceof hl)return ga(ot)("ArrayBuffer");if(t.responseFormat instanceof El)return ga(ot)("Blob");if(t.responseFormat instanceof Fl)return function(s){return z(Il(mc)(ot))(ga(ot)("Document")(s))(z(Il(mc)(ot))(ga(ot)("XMLDocument")(s))(ga(ot)("HTMLDocument")(s)))};if(t.responseFormat instanceof Pu)return ci(Ll(ot))(function(s){return t.responseFormat.value0(r(s))})(ga(ot)("String"));if(t.responseFormat instanceof Ml)return ga(ot)("String");if(t.responseFormat instanceof df)return S(t.responseFormat.value0(f(za(ot))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[t.responseFormat.constructor.name])}(),a=function(s){if(s instanceof xm)return new W(s.value0(ya));if(s instanceof Lm)return new W(ya(s.value0));if(s instanceof Im)return new W(ya(s.value0));if(s instanceof Sm)return new W(ya(s.value0));if(s instanceof $m)return new W(ya(s.value0));if(s instanceof bl)return Xf("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(d(rt)(ya)(tv(s.value0)));if(s instanceof Cl)return new W(ya(Sl(s.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[s.constructor.name])},u=function(s){return function(l){return s instanceof D&&!ua(J)(fr)(qf(pn(ea))(Tl)(s.value0))(l)?Wi(l)(s.value0):l}},i=function(s){return u(d(rt)(vf.create)(Pe(wr)(Pm)(s)))(u(d(rt)(mf.create)(Om(t.responseFormat)))(t.headers))},c=function(s){return{method:uv(t.method),url:t.url,headers:d(st)(function(l){return{field:Tl(l),value:Rm(l)}})(i(t.content)),content:s,responseType:km(t.responseFormat),username:Bo(t.username),password:Bo(t.password),withCredentials:t.withCredentials,timeout:ir(0)(d(rt)(function(l){return l})(t.timeout))}},m=function(s){return Zr(Wl)(yf(Fv)(Iv(Mm(n,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",Bm.create,c(s)))))(function(l){if(l instanceof W){var _=jm(e(l.value0.body));if(_ instanceof B)return new B(new Zl(lv(_.value0),l.value0));if(_ instanceof W)return new W({body:_.value0,headers:l.value0.headers,status:l.value0.status,statusText:l.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[_.constructor.name])}if(l instanceof B)return new B(function(){var o=Nu(l.value0),v=o==="AffjaxTimeoutErrorMessageIdent";if(v)return Kl.value;var I=o==="AffjaxRequestFailedMessageIdent";return I?n_.value:new t_(l.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[l.constructor.name])})};if(t.content instanceof y)return m(Bo(y.value));if(t.content instanceof D){var p=a(t.content.value0);if(p instanceof W)return m(Bo(new D(p.value0)));if(p instanceof B)return f(wf)(new B(new Yl(p.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[p.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[t.content.constructor.name])}},r_=function(n){if(n instanceof Yl)return"There was a problem with the request content: "+n.value0;if(n instanceof Zl)return"There was a problem with the response body: "+Sf(n.value0);if(n instanceof Kl)return"There was a problem making the request: timeout";if(n instanceof n_)return"There was a problem making the request: request failed";if(n instanceof t_)return"There was a problem making the request: "+Nu(n.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[n.constructor.name])},ba=function(){return{method:new B(qu.value),url:"/",headers:[],content:y.value,username:y.value,password:y.value,withCredentials:!1,responseFormat:Um,timeout:y.value}}();var e_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(n){return n||"/"}};var Vv=qv(e_);var jv=function(){function n(){}return n.value=new n,n}(),a_=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),xh=function(){return M.value}(),Jv="Click to get some random user data.",Lh=function(n){return nt(S(function(){return n(jv.value)(),hv(g(Hl)(Vv({method:new B(qu.value),url:"https://randomuser.me/api/",headers:ba.headers,content:ba.content,username:ba.username,password:ba.password,withCredentials:ba.withCredentials,responseFormat:Wm,timeout:ba.timeout}))(function(r){if(r instanceof B)return ve(Bl)(n(new a_("GET /api response failed to decode: "+r_(r.value0))));if(r instanceof W)return ve(Bl)(n(new a_($l(2)(r.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[r.constructor.name])}))()}))},Gv=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(xh)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(ml)])])),result:jn(Mo(t)(t.Always2())(function(r){return function(e){var a=dr(_e(t.MonadST5().Monad0().Applicative0()))(function(c){return c instanceof jv?new D(new B(void 0)):c instanceof a_?new D(new W(c.value0)):y.value})(e),u=dr(_e(t.MonadST5().Monad0().Applicative0()))(function(c){return c instanceof W?new D(c.value0):y.value})(a),i=dr(_e(t.MonadST5().Monad0().Applicative0()))(function(c){return c instanceof B?new D(void 0):y.value})(a);return Hn(t)([Hn(t)([br(t)(f(x(t.MonadST5()))(U(dt)(et.value)(Lh(r))))([Or(t.MonadST5())(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(Jv))(z(Nn(t.MonadST5().Monad0().Applicative0()))(Hr(Wn)(i)("Loading..."))(Hr(Wn)(u)(Jv))))])]),Ve(t)(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(U(el)(_r.value)("display: none;")))(Hr(Wn)(ka(Fu(t.MonadST5().Monad0().Applicative0()))(Oa(gr(t.MonadST5()))(function(c){return function(m){return new T(m&&!1,function(){return m?new D(void 0):y.value}())}})(u)(!0)))(U(el)(_r.value)("display: block;"))))([At(t)([wt(t)([Or(t.MonadST5())(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(""))(u))])])])])}})),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(Ro.value)))(tr)})),U(St)(It.value)(n.slug+"pursx2/")])})}};var $f=function(){function n(){}return n.value=new n,n}();var Pf={attr:function(n){return function(t){return vt({key:"input",value:Ua(t)})}}};function o_(n){return function(){return n.value}}function u_(n){return function(){return n.valueAsNumber}}function Yv(n,t,r,e){if(typeof window<"u"){var a=window[r];if(a!=null&&e instanceof a)return t(e)}for(var u=e;u!=null;){var i=Object.getPrototypeOf(u),c=i.constructor.name;if(c===r)return t(e);if(c==="Object")return n;u=i}return n}var $=function(n){return function(t){return Yv(y.value,D.create,n,t)}};var Nf=$("HTMLInputElement");var Rf=function(n){var t=z(Nn(n.Monad0().Applicative0()))(f(x(n))(U(uf)(So.value)("range"))),r=d(Wn)(function(e){return U(Pf)($f.value)(nt(function(a){return Qt(vr)(kt)(g(wr)(sf(a))(Nf))(li($a)(u_)(e))}))});return function(e){return t(r(e))}},kf=function(n){return function(t){return function(r){return d(n)(function(){var e=U(r)(et.value);return function(a){return e(function(u){return u(Cn(t))}(a))}}())}}};var Nh=function(){return M.value}(),nd=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Nh)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(pl)])])),result:jn(Ki()(t)()(lo({reflectSymbol:function(){return"buttonClicked"}})(_o(so(t.Always2())(Jo)))(lo({reflectSymbol:function(){return"sliderMoved"}})(_o(so(t.Always2())(Jo)))(xi)()())()())(To({reflectSymbol:function(){return"buttonClicked"}})()()(To({reflectSymbol:function(){return"sliderMoved"}})()()(Ji)()()()())()()()())(M.value)(function(r){return function(e){return Hn(t)([br(t)(kf(Wn)(Jr)(Lo)(f(x(t.MonadST5()))(r.buttonClicked)))([$n(t.MonadST5())("Click")]),Hn(t)([Or(t.MonadST5())(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))("Val: 0"))(d(Wn)(function(){var a=F(Se)("Val: "),u=k(Vr);return function(i){return a(u(i))}}())(pa(gr(t.MonadST5()))(S(Rt($r)(1)))(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(void 0))(e.buttonClicked))(-1))))]),Hn(t)([da(t)(Rf(t.MonadST5())(f(x(t.MonadST5()))(r.sliderMoved)))([]),Hn(t)([Or(t.MonadST5())(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))("Val: 50.0"))(d(Wn)(function(){var a=F(Se)("Val: "),u=k(au);return function(i){return a(u(i))}}())(e.sliderMoved)))])])])}})),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(Oo.value)))(tr)})),U(St)(It.value)(n.slug+"effects/")])})}};var td=function(){function n(){}return n.value=new n,n}();var rd={attr:function(n){return function(t){return vt({key:"keyup",value:Ua(t)})}}};function i_(n){return n.code}var ed=$("KeyboardEvent");var Hh=function(){function n(){}return n.value=new n,n}(),f_=function(){function n(){}return n.value=new n,n}(),ad=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Bh=function(){return M.value}(),od=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Bh)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(sl)])])),result:jn(Mo(t)(t.Always2())(function(r){return xr(Dr)(function(e){return z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(Hh.value))(e)})(function(e){return Hn(t)([Hn(t)([da(t)(lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(sm)(_r.value)("border-style:solid;border-width: 1px;border-color: black;"),U(Pf)($f.value)(nt(function(a){return Qt(vr)(kt)(g(wr)(sf(a))(Nf))(li($a)(o_)(function(u){return r(ad.create(u))}))})),U(rd)(td.value)(nt(function(a){return Qt(vr)(kt)(ed(a))(function(u){return Le(vr)(i_(u)==="Enter")(r(f_.value))})}))]))([]),br(t)(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(U(ef)(_r.value)("margin: 5px;")))(f(x(t.MonadST5()))(U(dt)(et.value)(nt(S(r(f_.value)))))))([$n(t.MonadST5())("Add")])]),xo(t)(Ve(t))(d(Wn)(function(a){return bo(gr(t.MonadST5()))(Wa(t)(t.Always2())(function(u){return function(i){return z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(Fo(Hn(t)([Ha(t)(f(x(t.MonadST5()))(U(Io)(_r.value)("margin: 5px;")))([$n(t.MonadST5())(a)]),br(t)(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(U(ef)(_r.value)("margin: 5px;")))(f(x(t.MonadST5()))(U(dt)(et.value)(nt(S(u(jp)))))))([$n(t.MonadST5())("Prioritize")]),br(t)(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(U(ef)(_r.value)("margin: 5px;")))(f(x(t.MonadST5()))(U(dt)(et.value)(nt(S(u(Gp)))))))([$n(t.MonadST5())("Delete")])]))))(i)}}))})(dr(_e(t.MonadST5().Monad0().Applicative0()))(function(a){return a.value0?new D(a.value1):y.value})(Oa(gr(t.MonadST5()))(function(a){return function(u){return a instanceof ad?new T(a.value0,new T(!1,a.value0)):a instanceof f_?new T(u,new T(!0,u)):new T("",new T(!1,""))}})(e)(""))))])})})),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(Uo.value)))(tr)})),U(St)(It.value)(n.slug+"portals/")])})}};var zh=function(){return M.value}(),ud=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(zh)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(_l)])])),result:jn(Hn(t)([$n(t.MonadST5())("Hello world")])),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(Po.value)))(tr)})),U(St)(It.value)(n.slug+"component/")])})}};var Jh=function(){return M.value}(),id=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(qt()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))(t)(Jh)({next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage($o.value)))(tr)})),U(St)(It.value)(n.slug+"hello/")])})}};var fd=function(){function n(){}return n.value=new n,n}(),cd={attr:function(n){return function(t){return vt({key:"controls",value:nr(t)})}}};var ld=function(){function n(){}return n.value=new n,n}();var _d={attr:function(n){return function(t){return vt({key:"src",value:nr(t)})}}};var sd=function(){function n(){}return n.value=new n,n}(),pd={attr:function(n){return function(t){return vt({key:"width",value:nr(t)})}}};var md=function(n){return function(t){return function(r){return new Sn(ft(n)("source")(t)(it(r)))}}};var vd=function(n){return function(t){return function(r){return new Sn(ft(n)("video")(t)(it(r)))}}};var Kh=function(){return M.value}(),dd=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Kh)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(ll)])])),result:jn(xo(t)(Ve(t))(Wa(t)(t.Always2())(function(r){return xr(Dr)(z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(void 0)))(function(e){return f(x(t.MonadST5()))(Fo(lm()(t)(d(wo)(function(a){return vd(t)(lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(cd)(fd.value)("true"),U(pd)(sd.value)("250")]))([md(t)(lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(_d)(ld.value)(a),U(vm)(So.value)("video/mp4")]))([])])})(Xc()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(Xc()()("https://www.w3schools.com/jsref/movie.mp4")(tm))))(function(a){return function(u){var i=Gc()()()()()({reflectType:function(){return 1}})(M.value)(a),c=Gc()()()()()({reflectType:function(){return 0}})(M.value)(a),m=pa(gr(t.MonadST5()))(S(Gr(fr)))(e),p=function(){var s=Au(t.MonadST5())(function(l){return l?c:i});return function(l){return s(m(l))}}();return Hn(t)([br(t)(f(x(t.MonadST5()))(U(dt)(et.value)(nt(S(r(void 0))))))([$n(t.MonadST5())("Switch videos")]),Hn(t)([$u(t)([p(!0)]),$u(t)([p(!1)])])])}})))})}))),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(Ho.value)))(tr)})),U(St)(It.value)(n.slug+"ssr/")])})}};var tE=function(){return M.value}(),rE=function(){return M.value}(),Dd=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(tE)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(cl)])])),result:jn(Cm({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(t)(xt(t.MonadST5().Monad0().Applicative0()))(rE)),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(ko.value)))(tr)})),U(St)(It.value)(n.slug+"events1/")])})}};var aE=function(){return M.value}(),oE=function(){return M.value}(),yd=function(n){return function(t){return il({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(t)(Gn()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(M.value)(aE)({code:jn(At(t)([wt(t)([$n(t.MonadST5())(fl)])])),result:jn(xo(t)(Ve(t))(Wa(t)(t.Always2())(function(r){return function(e){return f(x(t.MonadST5()))(Fo($t({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(qt()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}})(t))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})(t))(t)(oE)({myli:f(x(t.MonadST5()))(U(_m)(_r.value)("background-color:rgb(200,240,210);")),somethingNew:jn(br(t)(f(x(t.MonadST5()))(U(Lo)(et.value)(r(new D(void 0)))))([Or(t.MonadST5())(z(Nn(t.MonadST5().Monad0().Applicative0()))(Hr(Wn)(ka(Fu(t.MonadST5().Monad0().Applicative0()))(e))("Thanks for clicking me!"))(f(x(t.MonadST5()))("I was dynamically inserted")))]))})))}}))),next:lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(r){return tn(Yn)(tn(Yn)(Pt(r))(n.dpage(Wo.value)))(tr)})),U(St)(It.value)(n.slug+"events2/")])})}};var iE=function(n){return function(t){return function(r){return new Sn(ft(n)("p")(t)(it(r)))}}},gd=function(n){return iE(n)(Dn(V(n.MonadST5().Monad0().Applicative0())))};var bd=(n,t,r,e)=>{n(a=>e.units[a].main.appendChild(e.units[t].main))(r)},c_=n=>()=>{n.hydrating=!0},l_=n=>()=>{n.hydrating=!1},Cd=n=>t=>()=>{t.units[n.id].main.parentNode||(typeof n.pos.value0=="number"&&t.units[n.parent].main.children[n.pos.value0]?t.units[n.parent].main.insertBefore(t.units[n.id].main,t.units[n.parent].main.children[n.pos.value0]):t.units[n.parent].main.appendChild(t.units[n.id].main))},Td=n=>t=>r=>()=>{var e,a=t.id;r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(a),r.hydrating&&n&&t.parent.value0&&(e=document.body.querySelectorAll("[data-deku-ssr-"+a+"]").item(0))?r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:e}:r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:document.createElement(t.tag)}},hd=n=>t=>r=>e=>()=>{var a=r.id,u;if(e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(a),e.hydrating&&n&&r.parent.value0&&(u=document.body.querySelectorAll("[data-deku-ssr-"+r.parent.value0+"]").item(0))){var i=0;if(u.childNodes.length===1)u.prepend(document.createTextNode(""));else for(var i=0;i<u.childNodes.length;i++)if(u.childNodes[i].nodeType===8&&u.childNodes[i].nodeValue===a){i=i-1;break}e.units[a]={main:u.childNodes[i],parent:r.parent,scope:r.scope}}else e.units[a]={main:document.createTextNode(""),parent:r.parent,scope:r.scope},bd(t,a,r.parent,e)};function __(){return{units:{},scopes:{}}}var Ed=n=>t=>r=>()=>{var e=t.id,a=t.value;r.hydrating&&n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),r.units[e].main.tagName==="INPUT"&&t.key==="value"?r.units[e].main.value=a:r.units[e].main.tagName==="INPUT"&&t.key==="checked"?r.units[e].main.checked=a==="true":r.units[e].main.setAttribute(t.key,a)},Fd=n=>t=>r=>()=>{var e=t.id,a=t.value;if(r.hydrating&&n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),t.key==="@self@")a(r.units[e].main)();else{r.units[e].listeners[t.key]&&r.units[e].main.removeEventListener(t.key,r.units[e].listeners[t.key]);var u=i=>a(i)();r.units[e].main.addEventListener(t.key,u),r.units[e].listeners[t.key]=u}},Md=n=>t=>()=>{var r=n.id;t.units[r].main.nodeValue=n.text},wd=n=>t=>r=>e=>()=>{var a,u,i=r.id,c=r.html,m=r.verb,p=r.cache,s=r.parent,l=r.scope,_=r.pxScope;if(e.hydrating&&n&&r.parent.value0&&(a=document.body.querySelectorAll("[data-deku-ssr-"+i+"]").item(0)))e.units[i]={listeners:{},scope:l,parent:s,main:a};else{let v=Object.entries(p);for(var o=0;o<v.length;o++){let I=v[o][0];v[o][1]===!0?c=c.replace(m+I+m,'data-deku-attr-internal="'+I+'"'):c=c.replace(m+I+m,'<span style="display:contents;" data-deku-elt-internal="'+I+'"></span>')}u=document.createElement("div"),u.innerHTML=c.trim(),e.units[i]={listeners:{},scope:l,parent:s,main:u.firstChild}}e.scopes[l]||(e.scopes[l]=[]),e.scopes[l].push(i),u||(u=a),u.querySelectorAll("[data-deku-attr-internal]").forEach(function(v){var I=v.getAttribute("data-deku-attr-internal");let hn=I+_;e.units[hn]={listeners:{},main:v,scope:l},e.scopes[l].push(hn)}),u.querySelectorAll("[data-deku-elt-internal]").forEach(function(v){var I=v.getAttribute("data-deku-elt-internal");let hn=I+_;e.units[I+_]={listeners:{},main:v,scope:l},e.scopes[l].push(hn)}),a||bd(t,i,s,e)},Ad=n=>t=>()=>{var r=n.id;t.units[r]={main:n.root}},xd=n=>t=>()=>{var r=n.id,e=n.parent;t.units[r].containingScope=n.scope,t.units[e].main.prepend(t.units[r].main)},Ld=n=>t=>()=>{var r=n.id;t.units[r].noop||t.units[r].containingScope&&!n.scopeEq(t.units[r].containingScope)(n.scope)||t.units[r].main.remove()},Id=n=>t=>()=>{delete t.units[n.id]},Sd=n=>t=>()=>{var r=n.id,e=n.pos,a=t.units[r].main.parentNode;a.insertBefore(t.units[r].main,a.children.length<=e?a.children[a.children.length-1]:e<0?a.children[0]:a.children[e])};var $d=function(n){return n};var pE=1,s_=2147483647,mE=function(){return s_-1|0}(),p_=function(n){var t=function(r){return function(e){return function(a){var u=e-r|0,i=ou(ui)(a)(u),c=i<r;return c?i+e|0:i}}};return t(pE)(mE)(n)};var vE=0,dE=48271,Pd=function(n){return function(t){return Mr()(Lf(Vu(Cr(dE)*Cr(t)+Cr(n))(Cr(s_))))}},Nd=Pd(vE);var hE=function(){function n(i){this.fn=i}var t={},r=function(i,c){this.head=i,this.tail=c};function e(i){return new r(i,t)}function a(i){return function(c){return new r(i,c)}}function u(i){for(var c=[],m=i;m!==t;)c.push(m.head),m=m.tail;return c}return function(i){return function(c){return function(m){var p=function(l,_){return i(c(a)(m(l)))(_)},s=function(l,_,o){if(_===0)return l;var v=o[_-1];return new n(function(){var I=s(p(v,l),_-1,o);return I})};return function(l){for(var _=c(e)(m(l[l.length-1])),o=s(_,l.length-1,l);o instanceof n;)o=o.fn();return c(u)(o)}}}}}();var jo=function(n){return{map:function(t){return function(r){return function(e){return d(n)(function(a){return new T(t(a.value0),a.value1)})(r(e))}}}}};var d_=function(n){return{Applicative0:function(){return Va(n)},Bind1:function(){return Of(n)}}},Of=function(n){return{bind:function(t){return function(r){return function(e){return g(n.Bind1())(t(e))(function(a){var u=r(a.value0);return u(a.value1)})}}},Apply0:function(){return Wf(n)}}},Wf=function(n){return{apply:Xr(d_(n)),Functor0:function(){return jo(n.Bind1().Apply0().Functor0())}}},Va=function(n){return{pure:function(t){return function(r){return f(n.Applicative0())(new T(t,r))}},Apply0:function(){return Wf(n)}}};var ju=function(n){return{state:function(t){var r=f(n.Applicative0());return function(e){return r(t(e))}},Monad0:function(){return d_(n)}}};var qd=function(n){return function(t){var r=n(t);return r.value1}},zd=function(n){return function(t){var r=n(t);return r.value0}};var WE=function(n){return n};var UE=function(){var n=function(t){return new T($d(t.newSeed),function(){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.newSeed=Nd(t.newSeed),r}())};return xe(ju(ot))(n)}();var Gu=jo(ye);var y_=function(n){return zd(WE(n))};var jd=Wf(ot),Jd=function(n){return function(t){var r=Cr(t),e=Cr(n),a=function(c){return e+Vu(c)(r-e+1)},u=d(Gu)(Cr)(UE),i=bn(jd)(d(Gu)(Rt(ru))(u))(d(Gu)(Kr(ru)(2))(u));return d(Gu)(function(c){return Gl(a(c))})(i)}},Gd=function(n){return function(t){var r=n<=t;return r?Jd(n)(t):Jd(t)(n)}};var g_=function(n){return n.arbitrary};var b_=function(){return{arbitrary:Gd(-1e6)(1e6)}}();var Xu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Qu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Uf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Hf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Yu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),BE=function(n){return function(t){return K(mt)(Bt(function(r){return F(ct)(r)([new Yu(n)])})(t))}},qE=function(n){return function(t){return K(mt)(Bt(function(r){return F(ct)(r)([new Hf(n)])})(t))}},zE=function(n){return function(t){return K(mt)(Bt(function(r){return F(ct)(r)([new Qu(n)])})(t))}},VE=function(n){return function(t){return K(mt)(Bt(function(r){return F(ct)(r)([new Uf(n)])})(t))}},JE=function(n){return function(t){return K(mt)(Bt(function(r){return F(ct)(r)([new Xu(n)])})(t))}},Qd=function(n){return{ids:function(){var r=ut(n)(),e=k(Vr)(y_(g_(b_))({newSeed:p_(r),size:5}));return K(mt)(Bt(Rt($r)(1))(n))(),e},makeElement:JE,attributeParent:function(t){return function(r){return f(cr)(void 0)}},makeRoot:function(t){return function(r){return f(cr)(void 0)}},makeText:zE,makePursx:VE,setProp:qE,setCb:function(t){return function(r){return f(cr)(void 0)}},setText:BE,sendToPos:function(t){return function(r){return f(cr)(void 0)}},deleteFromCache:function(t){return function(r){return f(cr)(void 0)}},giveNewParent:function(t){return function(r){return f(cr)(void 0)}},disconnectElement:function(t){return function(r){return f(cr)(void 0)}}}},Yd=function(n){return{ids:function(){var r=mo(n)(),e=k(Vr)(y_(g_(b_))({newSeed:p_(r),size:5}));return K(In)(up(Rt($r)(1))(n))(),e},makeElement:Td(!0),attributeParent:Cd,makeRoot:Ad,makeText:hd(!0)(zn(void 0)),makePursx:wd(!0)(zn(void 0)),setProp:Ed(!0),setCb:Fd(!0),setText:Md,sendToPos:Sd,deleteFromCache:Id,giveNewParent:xd,disconnectElement:Ld}};var C_=n=>n.replace(/[\u00A0-\u9999<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"}),T_=({id:n,html:t,pxScope:r,cache:e,verb:a})=>{let u=t,i=Object.entries(e);for(var c=0;c<i.length;c++){let l=i[c][0];i[c][1]===!0?u=u.replace(a+l+a,'data-deku-attr-internal="'+l+'" data-deku-ssr-'+l+r+'="true"'):u=u.replace(a+l+a,'<span style="display:contents;" data-deku-elt-internal="'+l+'" data-deku-ssr-'+l+r+'="true"></span>')}let m=u.indexOf(">"),p=u.indexOf("/>"),s=p==m-1?p:m;return u.slice(0,s)+" data-deku-ssr-"+n+'="true" '+u.slice(s)};var Kd=function(n){return function(t){var r=function(l){return function(_){return K(jo(ye))(zo(ju(ot))(function(o){var v={};for(var I in o)({}).hasOwnProperty.call(o,I)&&(v[I]=o[I]);return v.idToActions=Ra(Xt)(function(hn){if(hn instanceof D)return new D(F(ct)(hn.value0)([_]));if(hn instanceof y)return new D([_]);throw new Error("Failed pattern match at Deku.SSR (line 46, column 17 - line 48, column 45): "+[hn.constructor.name])})(l)(o.idToActions),v}))}},e=function(l){return function(_){return function(o){return Vn(Jn)(Of(ot))(K(jo(ye))(zo(ju(ot))(function(v){var I={};for(var hn in v)({}).hasOwnProperty.call(v,hn)&&(I[hn]=v[hn]);return I.parentToChild=Ra(Xt)(function(Bn){if(Bn instanceof D)return new D(F(ct)(Bn.value0)([_]));if(Bn instanceof y)return new D([_]);throw new Error("Failed pattern match at Deku.SSR (line 33, column 17 - line 35, column 41): "+[Bn.constructor.name])})(l)(v.parentToChild),I})))(function(){return r(_)(o)})}}},a=qd(mr(Ue)(Va(ot))(function(l){if(l instanceof Xu)return Qt(Va(ot))(kt)(l.value0.parent)(function(_){return e(_)(l.value0.id)(l)});if(l instanceof Qu)return Qt(Va(ot))(kt)(l.value0.parent)(function(_){return e(_)(l.value0.id)(l)});if(l instanceof Uf)return Qt(Va(ot))(kt)(l.value0.parent)(function(_){return e(_)(l.value0.id)(l)});if(l instanceof Hf||l instanceof Yu)return r(l.value0.id)(l);throw new Error("Failed pattern match at Deku.SSR (line 56, column 17 - line 63, column 43): "+[l.constructor.name])})(t))({parentToChild:Na,idToActions:Na}),u=function(l){return Qa(Ic(function(_){return _ instanceof Xu||_ instanceof Qu})(l))},i=function(l){return ir("")(Ui(function(_){return _ instanceof Xu?new D(_.value0.tag):y.value})(l))},c=function(l){return Ne(J)(uu)(" ")(dr(kp)(function(_){return _ instanceof Hf?new D(_.value0.key+('="'+(_.value0.value+'"'))):y.value})(l))},m=function(l){return zn("")(function(_){var o=function(hn){return ir("")(Ui(function(Bn){return Bn instanceof Yu?new D(C_(Bn.value0.text)+("<!--"+(l+"-->"))):y.value})(_))},v=function(hn){var Bn=i(_),Pn=c(_);return"<"+(Bn+(" "+(Pn+(" data-deku-ssr-"+(l+('="true">'+(p(l)+("</"+(Bn+">")))))))))},I=Do(_)(0);return I instanceof D&&I.value0 instanceof Yu?o(void 0):I instanceof D&&I.value0 instanceof Qu?o(void 0):I instanceof D&&I.value0 instanceof Uf?T_(I.value0.value0):v(void 0)})(Tu(Xt)(l)(a.idToActions))},p=function(l){var _=ir([])(Tu(Xt)(l)(a.parentToChild));return Lt(J)(uu)(m)(_)},s=function(l){return re(ar)(function(_){return function(o){return function(v){var I=u(v);if(I)return o;if(!I)return Ff("data-deku-ssr-"+_)(c(v)+(" data-deku-ssr-"+_))(o);throw new Error("Failed pattern match at Deku.SSR (line 83, column 19 - line 85, column 136): "+[I.constructor.name])}}})(p(l))(a.idToActions)};return"<"+(n+(' data-deku-ssr-deku-root="true">'+(s("deku-root")+("</"+(n+">")))))}};var nD=function(n){return Me(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=ht();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:pn(Eo)})}},toElt:function(t){return t}})},LF=function(n){return function(){var r=__(),e=Zr(In)(Du(0))(Yd)();c_(r)();var a=Zt(nD(Zi)({parent:new D("deku-root"),scope:new ma("rootScope"),raiseId:function(u){return f(vr)(void 0)},pos:y.value})(e)(n))(function(u){return u(r)})();return l_(r)(),a}},tD=function(n){return K(In)(LF(n))},IF=function(n){return function(t){return function(r){return function(e){return d(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(){var a=Kd(t);return function(u){return function(i){return r.head+i}(function(i){return i+r.tail}(a(u)))}}())(N(n.MonadST5())(function(){var u=yt(0)(),i=yt([])(),c=Qd(u);return K(mt)(Zt(nD(Yi)({parent:new D("deku-root"),scope:new ma("rootScope"),raiseId:function(m){return f(cr)(void 0)},pos:y.value})(c)(e))(function(m){return m(i)}))(),ut(i)()}))}}}},rD=function(n){return IF(n)("body")};var SF=function(){return M.value}(),aD=function(n){return Ki()(n)()(lo({reflectSymbol:function(){return"buttonClicked"}})(_o(so(n.Always2())(Jo)))(lo({reflectSymbol:function(){return"sliderMoved"}})(_o(so(n.Always2())(Jo)))(xi)()())()())(To({reflectSymbol:function(){return"buttonClicked"}})()()(To({reflectSymbol:function(){return"sliderMoved"}})()()(Ji)()()()())()()()())(M.value)(function(t){return function(r){return Hn(n)([gd(n)([$n(n.MonadST5())(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),br(n)(kf(Wn)(Jr)(Lo)(f(x(n.MonadST5()))(t.buttonClicked)))([$n(n.MonadST5())("Click")]),Hn(n)([Or(n.MonadST5())(z(Nn(n.MonadST5().Monad0().Applicative0()))(f(x(n.MonadST5()))("Val: 0"))(d(Wn)(function(){var e=F(Se)("Val: "),a=k(Vr);return function(u){return e(a(u))}}())(pa(gr(n.MonadST5()))(S(Rt($r)(1)))(z(Nn(n.MonadST5().Monad0().Applicative0()))(f(x(n.MonadST5()))(void 0))(r.buttonClicked))(-1))))]),Hn(n)([da(n)(Rf(n.MonadST5())(f(x(n.MonadST5()))(t.sliderMoved)))([]),Hn(n)([Or(n.MonadST5())(z(Nn(n.MonadST5().Monad0().Applicative0()))(f(x(n.MonadST5()))("Val: 50"))(d(Wn)(function(){var e=F(Se)("Val: "),a=k(au);return function(u){return e(a(u))}}())(r.sliderMoved)))])])])}})},oD=function(n){return function(t){return $t({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Gn()(Gn()(Gn()(Gn()(Gn()(xt(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}})(t))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}})(t))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}})(t))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})(t))(t)(SF)({code2:jn(At(t)([wt(t)([$n(t.MonadST5())(yl)])])),code1:jn(At(t)([wt(t)([$n(t.MonadST5())(Dl)])])),code0:jn(At(t)([wt(t)([$n(t.MonadST5())(dl)])])),result:jn(aD(t)),codegen:jn(At(t)([wt(t)([Or(t.MonadST5())(yr(function(r){return tn(t.MonadST5().Monad0().Bind1().Apply0())(g(t.MonadST5().Monad0().Bind1())(rD(t)({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(aD(Yi)))(r))(f(t.MonadST5().Monad0().Applicative0())(f(t.MonadST5().Monad0().Applicative0())(void 0)))}))])]))})}};var uD=function(n){return function(t){var r=function(a){if(a instanceof cf)return id;if(a instanceof $o)return ud;if(a instanceof Po)return Fm;if(a instanceof No)return Dd;if(a instanceof ko)return nd;if(a instanceof Oo)return Gv;if(a instanceof Ro)return yd;if(a instanceof Wo)return od;if(a instanceof Uo)return dd;if(a instanceof Ho)return oD;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[a.constructor.name])},e=function(a){return function(u){return r(u)({dpage:a,slug:n.slug})(t)}};return Mo(t)(t.Always2())(function(a){return xr(Dr)(function(u){return z(Nn(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5()))(n.startsWith))(u)})(function(u){return Hn(t)([Hn(t)(d(st)(function(i){return $u(t)([af(t)(lt(J)(V(t.MonadST5().Monad0().Applicative0()))(f(x(t.MonadST5())))([U(dt)(et.value)(nt(function(c){return tn(Yn)(Pt(c))(a(i.value0))})),U(pm)(_r.value)("cursor:pointer;"),U(St)(It.value)(n.slug+i.value1.value1.value0)]))([$n(t.MonadST5())(i.value1.value0)]),Ha(t)(f(x(t.MonadST5()))(U(Io)(_r.value)(function(){return i.value1.value1.value1?"":"display:none;"}())))([$n(t.MonadST5())(" | ")])])})([new T(cf.value,new T("Home",new T("",!0))),new T($o.value,new T("Hello world",new T("hello/",!0))),new T(Po.value,new T("Component",new T("simple/",!0))),new T(No.value,new T("Pursx 1",new T("pursx1/",!0))),new T(ko.value,new T("Events 1",new T("events1/",!0))),new T(Oo.value,new T("Effects",new T("effects/",!0))),new T(Ro.value,new T("Pursx 2",new T("pursx2/",!0))),new T(Wo.value,new T("Events 2",new T("events2/",!0))),new T(Uo.value,new T("Portals",new T("portals/",!0))),new T(Ho.value,new T("SSR",new T("ssr/",!1)))])),Hn(t)([Au(t.MonadST5())(e(a))(u)])])})})}};var m8=function(n){return function(){var r=zn(Ru(qo("could not ingest options: "+k(G_()()(jf({reflectSymbol:function(){return"slug"}})(jf({reflectSymbol:function(){return"startsWith"}})(J_)(pr))(pr)))(n))))(f(vr))(bm(n.startsWith))();return tD(uD({slug:n.slug,startsWith:r})(Zi))()}};export{m8 as main};
