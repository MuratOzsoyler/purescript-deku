var E_=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),a=0,i=0;i<e;i++)for(var c=t[i],p=0;p<n;p++)u[a++]=c(r[p]);return u}};var ea={compose:function(t){return function(r){return function(e){return t(r(e))}}}},na=function(t){return t.compose},Ti=function(t){return function(r){return function(e){return na(t)(e)(r)}}};var Bt=function(t){return t.identity},Ht={identity:function(t){return t},Semigroupoid0:function(){return ea}};var Yr=!0;var $o=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},hr=function(t){return function(r){return function(e){return t(e)(r)}}},h=function(t){return function(r){return t}};var Fo=function(t){return function(r){return r(t)}};var $_=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var rt=function(){function t(){}return t.value=new t,t}();var y=function(t){return t.map},Ve=function(t){return function(r){return function(e){return y(t)(e)(r)}}},mt=function(t){return y(t)(h(void 0))},j=function(t){return function(r){return function(e){return y(t)(h(e))(r)}}};var ua={map:na(ea)},gr={map:$_};var Mo={apply:E_,Functor0:function(){return gr}},jt=function(t){return t.apply};var Zt=function(t){return function(r){return function(e){return jt(t)(y(t.Functor0())(h(Bt(Ht)))(r))(e)}}},de=function(t){return function(r){return function(e){return function(n){return jt(t)(y(t.Functor0())(r)(e))(n)}}}};var v=function(t){return t.pure};var nu=function(t){return function(r){return function(e){if(r)return e;if(!r)return v(t)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[r.constructor.name,e.constructor.name])}}},xo=function(t){return function(r){return function(e){return jt(t.Apply0())(v(t)(r))(e)}}};var aa={pure:function(t){return[t]},Apply0:function(){return Mo}};var M_=function(t){return function(r){return t+r}},x_=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var ae=function(t){return t.reflectSymbol};var An=function(t){return function(r){return r[t]}},uu=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var I_={append:function(t){return function(r){return void 0}}},au={append:M_};var Yt={append:x_};var z=function(t){return t.append};var yt=function(t){return t.alt};var Ed=String.fromCharCode(65535),$d=String.fromCharCode(0),Fd=Number.POSITIVE_INFINITY,Md=Number.NEGATIVE_INFINITY;var L_=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var P_=L_;var O_=L_;var R_=function(t){return function(r){return t===r}};var N_=R_;var B_=R_;var Nr={eq:B_};var Ra={eq:N_};var it=function(t){return t.eq};var xt=function(){function t(){}return t.value=new t,t}(),Ot=function(){function t(){}return t.value=new t,t}(),Rt=function(){function t(){}return t.value=new t,t}();var H_=function(t){return function(r){return t-r|0}};var W_=function(t){return function(r){return t+r|0}},U_=function(t){return function(r){return t*r|0}},q_=function(t){return function(r){return t+r}},z_=function(t){return function(r){return t*r}};var wo={add:q_,zero:0,mul:z_,one:1},ou={add:W_,zero:0,mul:U_,one:1};var fn=function(t){return t.mul};var Ae=function(t){return t.add};var Dc={sub:H_,Semiring0:function(){return ou}};var se=function(){return{compare:O_(xt.value)(Rt.value)(Ot.value),Eq0:function(){return Nr}}}();var ke=function(){return{compare:P_(xt.value)(Rt.value)(Ot.value),Eq0:function(){return Ra}}}();var Lt=function(t){return t.compare};var kn=function(t){return t.top};var ia={top:2147483647,bottom:-2147483648,Ord0:function(){return ke}};var Rn=function(t){return t.bottom};var V_=function(t){return t.toString()},j_=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var X_=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,a=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+a})+'"'};var G_=function(t){return function(r){return[t].concat(r)}},$i=function(t){return function(r){return r.join(t)}};var Xe={show:X_},Q_={showRecordFields:function(t){return function(r){return[]}}},K_=function(t){return t.showRecordFields},Y_=function(){return function(){return function(t){return{show:function(r){var e=K_(t)(rt.value)(r);return e.length===0?"{}":$i(" ")(["{",$i(", ")(e),"}"])}}}}};var Lo={show:j_},cn={show:V_};var dt=function(t){return t.show};var dc=function(t){return function(r){return function(e){return{showRecordFields:function(n){return function(u){var a=K_(r)(rt.value)(u),i=ae(t)(rt.value),c=An(i)(u);return G_($i(": ")([i,dt(e)(c)]))(a)}}}}}};var k=function(){function t(){}return t.value=new t,t}(),_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var or=function(t){return function(r){return function(e){if(e instanceof k)return t;if(e instanceof _)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ba=or(!1)(h(!0));var Mr={map:function(t){return function(r){return r instanceof _?new _(t(r.value0)):k.value}}};var ye=function(t){return or(t)(Bt(Ht))},He=function(){return function(t){if(t instanceof _)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Xr=function(t){return{eq:function(r){return function(e){return r instanceof k&&e instanceof k?!0:r instanceof _&&e instanceof _?it(t)(r.value0)(e.value0):!1}}}},fa=function(t){return{compare:function(r){return function(e){if(r instanceof k&&e instanceof k)return Rt.value;if(r instanceof k)return xt.value;if(e instanceof k)return Ot.value;if(r instanceof _&&e instanceof _)return Lt(t)(r.value0)(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 212, column 1 - line 212, column 51): "+[r.constructor.name,e.constructor.name])}},Eq0:function(){return Xr(t.Eq0())}}};var ca={apply:function(t){return function(r){if(t instanceof _)return y(Mr)(t.value0)(r);if(t instanceof k)return k.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return Mr}},Fe={bind:function(t){return function(r){if(t instanceof _)return r(t.value0);if(t instanceof k)return k.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return ca}};var oe=function(){return{pure:_.create,Apply0:function(){return ca}}}();var Xd={alt:function(t){return function(r){return t instanceof k?r:t}},Functor0:function(){return Mr}},rs=function(){return{empty:k.value,Alt0:function(){return Xd}}}();var es=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=u-1;a>=0;a--)n=t(e[a])(n);return n}}},ns=function(t){return function(r){return function(e){for(var n=r,u=e.length,a=0;a<u;a++)n=t(n)(e[a]);return n}}};var us=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var Ha=function(t){return t.discard};var Wa={bind:us,Apply0:function(){return Mo}},kt=function(t){return t.bind},fu=function(t){return hr(kt(t))},Mi=function(t){return function(r){return function(e){return function(n){return fu(t)(r)(e(n))}}}},xi=function(t){return function(r){return function(e){return function(n){return kt(t)(r(n))(e)}}}};var Ua={discard:function(t){return kt(t)}};var wi=function(t){return function(r){return kt(t)(r)(Bt(Ht))}};var C=function(t){return t.empty};var Dt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_t=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var kc=function(t){return or(new Dt(t))(_t.create)};var qa={map:function(t){return function(r){if(r instanceof Dt)return new Dt(r.value0);if(r instanceof _t)return new _t(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[r.constructor.name])}}};var ln=function(t){return function(r){return function(e){if(e instanceof Dt)return t(e.value0);if(e instanceof _t)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},yc=function(){return ln(h(k.value))(_.create)}();var tA=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var is={defer:function(t){return function(r){return t(void 0)(r)}}},za=function(t){return t.defer},gc=function(t){return function(r){var e=tA("go","Control.Lazy",function(){return za(t)(function(u){return r(e(25))})}),n=e(25);return n}};var fs=function(t){return function(r){return t&&r}},cs=function(t){return function(r){return t||r}},ls=function(t){return!t};var Bn=function(t){return t.not};var Va=function(t){return t.ff};var la=function(t){return t.disj},We={ff:!1,tt:!0,implies:function(t){return function(r){return la(We)(Bn(We)(t))(r)}},conj:fs,disj:cs,not:ls};var ps=function(t){return Math.min(Math.abs(t),2147483647)},_s=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},ss=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var ms={Ring0:function(){return Dc}};var Po=function(t){return t.mod};var Ii={degree:ps,div:_s,mod:ss,CommutativeRing0:function(){return ms}};var Pi={mempty:void 0,Semigroup0:function(){return I_}},Oo={mempty:"",Semigroup0:function(){return au}};var qt=function(t){return t.mempty};var X=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var ne=function(t){return t.value1};var pa={map:function(t){return function(r){return new X(r.value0,t(r.value1))}}};var Ho=function(t){return t};var mA=function(t){return{append:function(r){return function(e){return la(t)(r)(e)}}}};var Tc=function(t){return{mempty:Va(t),Semigroup0:function(){return mA(t)}}};var Bi=function(t){return t};var vA=function(t){return{append:function(r){return function(e){return na(t)(r)(e)}}}};var Ec=function(t){return{mempty:Bt(t),Semigroup0:function(){return vA(t.Semigroupoid0())}}};var K=function(t){return t};var g=function(){return K};var Hi=g,Ar=g;var Wi=function(){return function(){return function(){return function(){return function(t){return g()}}}}};var Cr=function(t){return t.foldr};var yn=function(t){return function(r){return Cr(t)(yt(r.Alt0()))(C(r))}},wr=function(t){return function(r){return function(e){return Cr(t)(function(){var n=yt(r.Alt0());return function(u){return n(e(u))}}())(C(r))}}},Ga=function(t){return function(r){return function(e){return Cr(r)(function(){var n=Zt(t.Apply0());return function(u){return n(e(u))}}())(v(t)(void 0))}}},Br=function(t){return function(r){return hr(Ga(t)(r))}};var rr=function(t){return t.foldl};var cu=function(t){return function(r){return function(e){return function(n){var u=function(a){return function(i){return a.init?{init:!1,acc:i}:{init:!1,acc:z(r.Semigroup0())(a.acc)(z(r.Semigroup0())(e)(i))}}};return rr(t)(u)({init:!0,acc:qt(r)})(n).acc}}}};var Zr={foldr:function(t){return function(r){return function(e){if(e instanceof k)return r;if(e instanceof _)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof k)return r;if(e instanceof _)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof k)return qt(t);if(e instanceof _)return r(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[r.constructor.name,e.constructor.name])}}}};var bs=function(t){return function(r){return function(e){return Cr(t)(function(n){return function(u){return z(r.Semigroup0())(e(n))(u)}})(qt(r))}}},Ct={foldr:es,foldl:ns,foldMap:function(t){return bs(Ct)(t)}},xc=function(t){return function(r){return function(e){return rr(t)(function(n){return function(u){return z(r.Semigroup0())(n)(e(u))}})(qt(r))}}},Lr=function(t){return t.foldMap};var wc=function(t){return function(r){return function(e){return function(n){return Ar()(Lr(t)(Ec(Ht))(function(u){return Bi(r(u))})(n))(e)}}}};var xu=function(t){return function(r){return Wi()()()()(Ho)(Lr(t)(Tc(r)))}};var Qe={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},ds=function(t){return t.dimap},Ke=function(t){return function(r){return ds(t)(r)(Bt(Ht))}};var Ic=function(t){return function(){return t}},As=function(t){return function(r){return function(){return r(t())()}}};var ma=function(t){return function(r){return function(){for(var e=0,n=t.length;e<n;e++)r(t[e])()}}};var Ue=function(t){return function(r){return function(e){return kt(t.Bind1())(r)(function(n){return kt(t.Bind1())(e)(function(u){return v(t.Applicative0())(n(u))})})}}};var ks=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},Qa={Applicative0:function(){return Ir},Bind1:function(){return va}},va={bind:As,Apply0:function(){return Lc(0)}},Ir={pure:Ic,Apply0:function(){return Lc(0)}},ys=ks("functorEffect","Effect",function(){return{map:xo(Ir)}}),Lc=ks("applyEffect","Effect",function(){return{apply:Ue(Qa),Functor0:function(){return ys(0)}}}),H=ys(20),vr=Lc(23),Pc=function(t){return{append:de(vr)(z(t))}},Oc=function(t){return{mempty:Ic(qt(t)),Semigroup0:function(){return Pc(t.Semigroup0())}}};var gs=K;var Cs=function(t){return function(r){return function(){return t(r())}}},Ss=function(t){return function(){return t}},hs=function(t){return function(r){return function(){return r(t())()}}};function ge(t){return function(){return{value:t}}}var ie=function(t){return function(){return t.value}},Ts=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Cn=function(t){return function(r){return function(){return r.value=t}}};var Hn=function(t){return t};var Wn={map:function(t){return function(r){return t(r)}}};var Es={apply:function(t){return function(r){return t(r)}},Functor0:function(){return Wn}},yA={bind:function(t){return function(r){return r(t)}},Apply0:function(){return Es}},gA={pure:Hn,Apply0:function(){return Es}},Er={Applicative0:function(){return gA},Bind1:function(){return yA}};var $s=function(t){return function(){return{value:t}}};var fe=function(t){return function(){return t.value}},Fs=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Ce=function(t){return function(r){return function(){r.value=t}}};var Me=$s,SA=Fs,Ka=function(t){return SA(function(r){var e=t(r);return{state:e,value:e}})},qo=function(t){return function(r){return mt(H)(Ka(t)(r))}};var MA=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},xA=Ts,qr=function(t){return xA(function(r){var e=t(r);return{state:e,value:e}})},Jt={map:Cs},Ui={Applicative0:function(){return er},Bind1:function(){return lu}},lu={bind:hs,Apply0:function(){return Nc(0)}},er={pure:Ss,Apply0:function(){return Nc(0)}},Nc=MA("applyST","Control.Monad.ST.Internal",function(){return{apply:Ue(Ui),Functor0:function(){return Jt}}}),Ya=Nc(46);var xs={liftST:Bt(Ht),Monad0:function(){return Ui}},Tn={liftST:gs,Monad0:function(){return Qa}},pn=function(t){return t.liftST};var qi=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,a=0;u!==r;)n[a++]=u,u+=e;return n[a]=u,n}},wA=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},IA=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},Bc=typeof Array.prototype.fill=="function"?wA:IA,LA=function(){function t(u,a){this.head=u,this.tail=a}var r={};function e(u){return function(a){return new t(u,a)}}function n(u){for(var a=[],i=0,c=u;c!==r;)a[i++]=c.head,c=c.tail;return a}return function(u){return function(a){return n(u(e)(r)(a))}}}(),En=function(t){return t.length},Is=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},Ls=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},Ps=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var a=e(n[u]);if(r(a))return a}return t}}}},Os=function(t){return function(r){return function(e){return function(n){for(var u=0,a=n.length;u<a;u++)if(e(n[u]))return t(u);return r}}}};var Rs=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var zo=function(t){return function(r){return r.filter(t)}},zi=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var a=r[u];t(a)?e.push(a):n.push(a)}return{yes:e,no:n}}};var Ns=function(){function t(r,e,n,u,a,i){var c,p,s,b,T,d,o;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),p=a,s=c,b=a;p<c&&s<i;)T=u[p],d=u[s],o=e(r(T)(d)),o>0?(n[b++]=d,++s):(n[b++]=T,++p);for(;p<c;)n[b++]=u[p++];for(;s<i;)n[b++]=u[s++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var Jo=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),a=0;a<n;a++)u[a]=t(r[a])(e[a]);return u}}};var Bs=function(t){return function(r){return t[r]}};function Un(){return[]}var Hc=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var Ji=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},qn=function(t){return function(){return t}};function Hs(t){return function(){return t.slice()}}var Vi=Hs,Wc=Hs,OA=function(){function t(r,e,n,u,a,i){var c,p,s,b,T,d,o;for(c=a+(i-a>>1),c-a>1&&t(r,e,u,n,a,c),i-c>1&&t(r,e,u,n,c,i),p=a,s=c,b=a;p<c&&s<i;)T=u[p],d=u[s],o=e(r(T)(d)),o>0?(n[b++]=d,++s):(n[b++]=T,++p);for(;p<c;)n[b++]=u[p++];for(;s<i;)n[b++]=u[s++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var zs=function(t){return function(r){return function(){var n=Wc(r)();return t(n)(),qn(n)()}}};var _n=function(t){return Hc([t])};var BA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var HA=function(t){return function(){var e=ie(t.value1)();return qr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var Xi=function(t){return y(Jt)(BA.create(t))(ge(0))},Gi=function(t){return function(r){return function(){for(var n=ge(!1)();y(Jt)(Bn(We))(ie(n))();)(function(){var a=HA(t)();if(a instanceof _)return r(a.value0)();if(a instanceof k)return mt(Jt)(Cn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[a.constructor.name])})();return{}}}};var Vs=function(){function t(u){return[u]}function r(u){return function(a){return[u,a]}}function e(u){return function(a){return function(i){return[u,a,i]}}}function n(u){return function(a){return u.concat(a)}}return function(u){return function(a){return function(i){return function(c){return function(p){function s(b,T){switch(T-b){case 0:return i([]);case 1:return a(t)(c(p[b]));case 2:return u(a(r)(c(p[b])))(c(p[b+1]));case 3:return u(u(a(e)(c(p[b])))(c(p[b+1])))(c(p[b+2]));default:var d=b+Math.floor((T-b)/4)*2;return u(a(n)(s(b,d)))(s(d,T))}}return s(0,p.length)}}}}}}();var qe=function(t){return t.traverse};var jc=function(t){return function(r){return qe(t)(r)(Bt(Ht))}},Da={traverse:function(t){return Vs(jt(t.Apply0()))(y(t.Apply0().Functor0()))(v(t))},sequence:function(t){return jc(Da)(t)},Functor0:function(){return gr},Foldable1:function(){return Ct}};var am=function(){return Bs},Kc=function(){return Is(h(k.value))(function(t){return function(r){return new _({head:t,tail:r})}})}();var ef=function(t){return Ns(t)(function(r){if(r instanceof Ot)return 1;if(r instanceof Rt)return 0;if(r instanceof xt)return-1;throw new Error("Failed pattern match at Data.Array (line 829, column 31 - line 832, column 11): "+[r.constructor.name])})};var nf=function(t){return function(r){return zs(_n(r))(t)()}},om=function(t){return[t]};var w=function(t){return function(r){return Jo(t)(qi(0)(En(r)-1|0))(r)}};var wu=function(){return Ls(_.create)(k.value)}(),Yc=function(t){return wu(t)(En(t)-1|0)};var Zc=function(t){return wu(t)(0)};var jo=function(){return Ps(k.value)(Ba)}();var tl=function(){return Os(_.create)(k.value)}();var rl=function(t){return function(r){return y(Mr)(am()(r))(tl(t)(r))}};var im=function(){return Rs(_.create)(k.value)}(),Xo=function(t){return function(r){return function(e){return e.length===0?[]:or(e)(function(n){return He()(im(n)(e))})(tl(t(r))(e))}}};var Go=function(t){return function(r){return z(Yt)([t])(r)}};var Pk=hr(kt(Wa)),el=function(t){return Pk(function(){var r=or([])(om);return function(e){return r(t(e))}}())};var fm=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var Iu=function(t){return t.mapWithIndex};var eo={mapWithIndex:fm,Functor0:function(){return gr}};var zn=function(t){return t.foldrWithIndex};var Jn=function(t){return t.foldlWithIndex};var su=function(t){return t.foldMapWithIndex};var Vn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var af=function(t){return function(r){return new Vn(r,C(t))}};var ir=function(){function t(){}return t.value=new t,t}(),St=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),of=function(t){return t},Gk=function(t){return new St(t.value0,t.value1)};var Qk=function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(p,s){if(s instanceof St&&s.value1 instanceof St&&s.value1.value1 instanceof St){u=new St(s,p),n=s.value1.value1.value1;return}var b=function(d){return d instanceof St&&d.value1 instanceof St&&d.value1.value1 instanceof ir?new St(t(d.value0),new St(t(d.value1.value0),ir.value)):d instanceof St&&d.value1 instanceof ir?new St(t(d.value0),ir.value):ir.value},T=function(d){return function(o){var m=d,V=!1,et;function nt(at,Kt){if(at instanceof St&&at.value0 instanceof St&&at.value0.value1 instanceof St&&at.value0.value1.value1 instanceof St){m=at.value1,o=new St(t(at.value0.value0),new St(t(at.value0.value1.value0),new St(t(at.value0.value1.value1.value0),Kt)));return}return V=!0,Kt}for(;!V;)et=nt(m,o);return et}};return a=!0,T(p)(b(s))}for(;!a;)i=c(u,n);return i}};return r(ir.value)},no={map:Qk};var sn={foldr:function(t){return function(r){var e=function(){var u=function(a){return function(i){var c=a,p=!1,s;function b(T,d){if(d instanceof ir)return p=!0,T;if(d instanceof St){c=new St(d.value0,T),i=d.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[T.constructor.name,d.constructor.name])}for(;!p;)s=b(c,i);return s}};return u(ir.value)}(),n=rr(sn)(hr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(p,s){if(s instanceof ir)return a=!0,p;if(s instanceof St){u=t(p)(s.value0),n=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[s.constructor.name])}for(;!a;)i=c(u,n);return i}};return r},foldMap:function(t){return function(r){return rr(sn)(function(e){var n=z(t.Semigroup0())(e);return function(u){return n(r(u))}})(qt(t))}}};var Qo={append:function(t){return function(r){return Cr(sn)(St.create)(r)(t)}}};var ul={append:function(t){return function(r){return new Vn(t.value0,z(Qo)(t.value1)(Gk(r)))}}};var pm={alt:z(Qo),Functor0:function(){return no}},al=function(){return{empty:ir.value,Alt0:function(){return pm}}}();var ff=function(){var t=function(r){return function(e){var n=r,u=!1,a;function i(c,p){if(p instanceof ir)return u=!0,c;if(p instanceof St){n=new St(p.value0,c),e=p.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[c.constructor.name,p.constructor.name])}for(;!u;)a=i(n,e);return a}};return t(ir.value)}();var bm=function(t){return t()};var dm=function(t){throw new Error(t)};var Am=function(){return dm};var Dy=bm,Pu=function(t){return Dy(function(){return Am()(t)})};var bt=function(){function t(){}return t.value=new t,t}(),Ft=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Gt=function(){function t(r,e,n,u,a,i,c){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i,this.value6=c}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return function(c){return new t(r,e,n,u,a,i,c)}}}}}}},t}(),Ou=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),mu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),Ru=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),jn=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),Nu=function(){function t(r,e,n,u,a,i){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=a,this.value5=i}return t.create=function(r){return function(e){return function(n){return function(u){return function(a){return function(i){return new t(r,e,n,u,a,i)}}}}}},t}(),lf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Cm=function(t){return function(r){return new Ft(bt.value,t,r,bt.value)}};var Ca=function(t){return function(r){var e=Lt(t),n=function(u){var a=!1,i;function c(p){if(p instanceof bt)return a=!0,k.value;if(p instanceof Ft){var s=e(r)(p.value1);if(s instanceof Rt)return a=!0,new _(p.value2);if(s instanceof xt){u=p.value0;return}u=p.value3;return}if(p instanceof Gt){var b=e(r)(p.value1);if(b instanceof Rt)return a=!0,new _(p.value2);var T=e(r)(p.value4);if(T instanceof Rt)return a=!0,new _(p.value5);if(b instanceof xt){u=p.value0;return}if(T instanceof Ot){u=p.value6;return}u=p.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[p.constructor.name])}for(;!a;)i=c(u);return i};return n}};var Bu={map:function(t){return function(r){if(r instanceof bt)return bt.value;if(r instanceof Ft)return new Ft(y(Bu)(t)(r.value0),r.value1,t(r.value2),y(Bu)(t)(r.value3));if(r instanceof Gt)return new Gt(y(Bu)(t)(r.value0),r.value1,t(r.value2),y(Bu)(t)(r.value3),r.value4,t(r.value5),y(Bu)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var Gr=function(t){return function(r){return function(e){var n=t,u=r,a=!1,i;function c(p,s,b){if(s instanceof ir)return a=!0,b;if(s instanceof St){if(s.value0 instanceof Ou){n=p,u=s.value1,e=new Ft(b,s.value0.value0,s.value0.value1,s.value0.value2);return}if(s.value0 instanceof mu){n=p,u=s.value1,e=new Ft(s.value0.value0,s.value0.value1,s.value0.value2,b);return}if(s.value0 instanceof Ru){n=p,u=s.value1,e=new Gt(b,s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof jn){n=p,u=s.value1,e=new Gt(s.value0.value0,s.value0.value1,s.value0.value2,b,s.value0.value3,s.value0.value4,s.value0.value5);return}if(s.value0 instanceof Nu){n=p,u=s.value1,e=new Gt(s.value0.value0,s.value0.value1,s.value0.value2,s.value0.value3,s.value0.value4,s.value0.value5,b);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[s.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[s.constructor.name,b.constructor.name])}for(;!a;)i=c(n,u,e);return i}}},_f=function(t){return function(r){return function(e){var n=function(i){return function(c){var p=i,s=!1,b;function T(d,o){if(d instanceof ir)return s=!0,new Ft(o.value0,o.value1,o.value2,o.value3);if(d instanceof St){if(d.value0 instanceof Ou)return s=!0,Gr(t)(d.value1)(new Gt(o.value0,o.value1,o.value2,o.value3,d.value0.value0,d.value0.value1,d.value0.value2));if(d.value0 instanceof mu)return s=!0,Gr(t)(d.value1)(new Gt(d.value0.value0,d.value0.value1,d.value0.value2,o.value0,o.value1,o.value2,o.value3));if(d.value0 instanceof Ru){p=d.value1,c=new lf(new Ft(o.value0,o.value1,o.value2,o.value3),d.value0.value0,d.value0.value1,new Ft(d.value0.value2,d.value0.value3,d.value0.value4,d.value0.value5));return}if(d.value0 instanceof jn){p=d.value1,c=new lf(new Ft(d.value0.value0,d.value0.value1,d.value0.value2,o.value0),o.value1,o.value2,new Ft(o.value3,d.value0.value3,d.value0.value4,d.value0.value5));return}if(d.value0 instanceof Nu){p=d.value1,c=new lf(new Ft(d.value0.value0,d.value0.value1,d.value0.value2,d.value0.value3),d.value0.value4,d.value0.value5,new Ft(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[d.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[d.constructor.name,o.constructor.name])}for(;!s;)b=T(p,c);return b}},u=Lt(t),a=function(i){return function(c){var p=i,s=!1,b;function T(d,o){if(o instanceof bt)return s=!0,n(d)(new lf(bt.value,r,e,bt.value));if(o instanceof Ft){var m=u(r)(o.value1);if(m instanceof Rt)return s=!0,Gr(t)(d)(new Ft(o.value0,r,e,o.value3));if(m instanceof xt){p=new St(new Ou(o.value1,o.value2,o.value3),d),c=o.value0;return}p=new St(new mu(o.value0,o.value1,o.value2),d),c=o.value3;return}if(o instanceof Gt){var V=u(r)(o.value1);if(V instanceof Rt)return s=!0,Gr(t)(d)(new Gt(o.value0,r,e,o.value3,o.value4,o.value5,o.value6));var et=u(r)(o.value4);if(et instanceof Rt)return s=!0,Gr(t)(d)(new Gt(o.value0,o.value1,o.value2,o.value3,r,e,o.value6));if(V instanceof xt){p=new St(new Ru(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),d),c=o.value0;return}if(V instanceof Ot&&et instanceof xt){p=new St(new jn(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),d),c=o.value3;return}p=new St(new Nu(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),d),c=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[d.constructor.name,o.constructor.name])}for(;!s;)b=T(p,c);return b}};return a(ir.value)}}},gy=function(t){return function(r){var e=function(c){return function(p){var s=c,b=!1,T;function d(o,m){if(o instanceof ir)return b=!0,m;if(o instanceof St){if(o.value0 instanceof Ou&&o.value0.value2 instanceof bt&&m instanceof bt)return b=!0,Gr(t)(o.value1)(new Ft(bt.value,o.value0.value0,o.value0.value1,bt.value));if(o.value0 instanceof mu&&o.value0.value0 instanceof bt&&m instanceof bt)return b=!0,Gr(t)(o.value1)(new Ft(bt.value,o.value0.value1,o.value0.value2,bt.value));if(o.value0 instanceof Ou&&o.value0.value2 instanceof Ft){s=o.value1,p=new Gt(m,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof mu&&o.value0.value0 instanceof Ft){s=o.value1,p=new Gt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,m);return}return o.value0 instanceof Ou&&o.value0.value2 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Ft(new Ft(m,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ft(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof mu&&o.value0.value0 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Ft(new Ft(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ft(o.value0.value0.value6,o.value0.value1,o.value0.value2,m)))):o.value0 instanceof Ru&&o.value0.value2 instanceof bt&&o.value0.value5 instanceof bt&&m instanceof bt?(b=!0,Gr(t)(o.value1)(new Gt(bt.value,o.value0.value0,o.value0.value1,bt.value,o.value0.value3,o.value0.value4,bt.value))):o.value0 instanceof jn&&o.value0.value0 instanceof bt&&o.value0.value5 instanceof bt&&m instanceof bt?(b=!0,Gr(t)(o.value1)(new Gt(bt.value,o.value0.value1,o.value0.value2,bt.value,o.value0.value3,o.value0.value4,bt.value))):o.value0 instanceof Nu&&o.value0.value0 instanceof bt&&o.value0.value3 instanceof bt&&m instanceof bt?(b=!0,Gr(t)(o.value1)(new Gt(bt.value,o.value0.value1,o.value0.value2,bt.value,o.value0.value4,o.value0.value5,bt.value))):o.value0 instanceof Ru&&o.value0.value2 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(new Gt(m,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof jn&&o.value0.value0 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(new Gt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,m),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof jn&&o.value0.value5 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(o.value0.value0,o.value0.value1,o.value0.value2,new Gt(m,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Nu&&o.value0.value3 instanceof Ft?(b=!0,Gr(t)(o.value1)(new Ft(o.value0.value0,o.value0.value1,o.value0.value2,new Gt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,m)))):o.value0 instanceof Ru&&o.value0.value2 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(new Ft(m,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Ft(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof jn&&o.value0.value0 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(new Ft(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Ft(o.value0.value0.value6,o.value0.value1,o.value0.value2,m),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof jn&&o.value0.value5 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(o.value0.value0,o.value0.value1,o.value0.value2,new Ft(m,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new Ft(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Nu&&o.value0.value3 instanceof Gt?(b=!0,Gr(t)(o.value1)(new Gt(o.value0.value0,o.value0.value1,o.value0.value2,new Ft(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new Ft(o.value0.value3.value6,o.value0.value4,o.value0.value5,m)))):(b=!0,Pu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!b;)T=d(s,p);return T}},n=function(c){return function(p){var s=c,b=!1,T;function d(o,m){if(m instanceof Ft&&m.value0 instanceof bt&&m.value3 instanceof bt)return b=!0,e(o)(bt.value);if(m instanceof Ft){s=new St(new mu(m.value0,m.value1,m.value2),o),p=m.value3;return}if(m instanceof Gt&&m.value0 instanceof bt&&m.value3 instanceof bt&&m.value6 instanceof bt)return b=!0,e(new St(new mu(bt.value,m.value1,m.value2),o))(bt.value);if(m instanceof Gt){s=new St(new Nu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),o),p=m.value6;return}return b=!0,Pu("The impossible happened in partial function `removeMaxNode`.")}for(;!b;)T=d(s,p);return T}},u=function(c){var p=!1,s;function b(T){if(T instanceof Ft&&T.value3 instanceof bt)return p=!0,{key:T.value1,value:T.value2};if(T instanceof Ft){c=T.value3;return}if(T instanceof Gt&&T.value6 instanceof bt)return p=!0,{key:T.value4,value:T.value5};if(T instanceof Gt){c=T.value6;return}return p=!0,Pu("The impossible happened in partial function `maxNode`.")}for(;!p;)s=b(c);return s},a=Lt(t),i=function(c){return function(p){var s=c,b=!1,T;function d(o,m){if(m instanceof bt)return b=!0,k.value;if(m instanceof Ft){var V=a(r)(m.value1);if(m.value3 instanceof bt&&V instanceof Rt)return b=!0,new _(new X(m.value2,e(o)(bt.value)));if(V instanceof Rt){var et=u(m.value0);return b=!0,new _(new X(m.value2,n(new St(new Ou(et.key,et.value,m.value3),o))(m.value0)))}if(V instanceof xt){s=new St(new Ou(m.value1,m.value2,m.value3),o),p=m.value0;return}s=new St(new mu(m.value0,m.value1,m.value2),o),p=m.value3;return}if(m instanceof Gt){var nt=function(){return m.value0 instanceof bt&&m.value3 instanceof bt&&m.value6 instanceof bt}(),V=a(r)(m.value4),at=a(r)(m.value1);if(nt&&at instanceof Rt)return b=!0,new _(new X(m.value2,Gr(t)(o)(new Ft(bt.value,m.value4,m.value5,bt.value))));if(nt&&V instanceof Rt)return b=!0,new _(new X(m.value5,Gr(t)(o)(new Ft(bt.value,m.value1,m.value2,bt.value))));if(at instanceof Rt){var et=u(m.value0);return b=!0,new _(new X(m.value2,n(new St(new Ru(et.key,et.value,m.value3,m.value4,m.value5,m.value6),o))(m.value0)))}if(V instanceof Rt){var et=u(m.value3);return b=!0,new _(new X(m.value5,n(new St(new jn(m.value0,m.value1,m.value2,et.key,et.value,m.value6),o))(m.value3)))}if(at instanceof xt){s=new St(new Ru(m.value1,m.value2,m.value3,m.value4,m.value5,m.value6),o),p=m.value0;return}if(at instanceof Ot&&V instanceof xt){s=new St(new jn(m.value0,m.value1,m.value2,m.value4,m.value5,m.value6),o),p=m.value3;return}s=new St(new Nu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),o),p=m.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[m.constructor.name])}for(;!b;)T=d(s,p);return T}};return i(ir.value)}},ve={foldr:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return Cr(ve)(t)(t(e.value2)(Cr(ve)(t)(r)(e.value3)))(e.value0);if(e instanceof Gt)return Cr(ve)(t)(t(e.value2)(Cr(ve)(t)(t(e.value5)(Cr(ve)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return rr(ve)(t)(t(rr(ve)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Gt)return rr(ve)(t)(t(rr(ve)(t)(t(rr(ve)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){return function(r){return function(e){if(e instanceof bt)return qt(t);if(e instanceof Ft)return z(t.Semigroup0())(Lr(ve)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(Lr(ve)(t)(r)(e.value3)));if(e instanceof Gt)return z(t.Semigroup0())(Lr(ve)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value2))(z(t.Semigroup0())(Lr(ve)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value5))(Lr(ve)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[e.constructor.name])}}}},Se={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return zn(Se)(t)(t(e.value1)(e.value2)(zn(Se)(t)(r)(e.value3)))(e.value0);if(e instanceof Gt)return zn(Se)(t)(t(e.value1)(e.value2)(zn(Se)(t)(t(e.value4)(e.value5)(zn(Se)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof bt)return r;if(e instanceof Ft)return Jn(Se)(t)(t(e.value1)(Jn(Se)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Gt)return Jn(Se)(t)(t(e.value4)(Jn(Se)(t)(t(e.value1)(Jn(Se)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){return function(r){return function(e){if(e instanceof bt)return qt(t);if(e instanceof Ft)return z(t.Semigroup0())(su(Se)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(su(Se)(t)(r)(e.value3)));if(e instanceof Gt)return z(t.Semigroup0())(su(Se)(t)(r)(e.value0))(z(t.Semigroup0())(r(e.value1)(e.value2))(z(t.Semigroup0())(su(Se)(t)(r)(e.value3))(z(t.Semigroup0())(r(e.value4)(e.value5))(su(Se)(t)(r)(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[e.constructor.name])}}},Foldable0:function(){return ve}},Sm=function(){return zn(Se)(function(t){return function(r){return function(e){return new St(t,e)}}})(ir.value)}();var Xn=function(){return bt.value}();var pl=function(t){return function(r){return function(e){return or(e)(ne)(gy(t)(r)(e))}}};var Gn=function(t){return function(r){return function(e){return function(n){var u=r(Ca(t)(e)(n));if(u instanceof k)return pl(t)(e)(n);if(u instanceof _)return _f(t)(e)(u.value0)(n);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[u.constructor.name])}}}};var Cy=function(t){return function(r){return function(e){return function(n){var u=function(a){return function(i){return function(c){return Gn(t)(function(){var p=or(c)(r(c));return function(s){return _.create(p(s))}}())(a)(i)}}};return Jn(Se)(u)(n)(e)}}}};var hm=function(t){return Cy(t)(h)};var sf={compact:function(t){return function(){var e=Un(),n=Xi(function(u){return wu(t)(u)})();return Gi(n)(function(){var u=mt(Jt);return function(a){return u(function(i){if(i instanceof k)return v(er)(0);if(i instanceof _)return _n(i.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[i.constructor.name])}(a))}}())(),qn(e)()}()},separate:function(t){return function(){var e=Un(),n=Un(),u=Xi(function(a){return wu(t)(a)})();return Gi(u)(function(){var a=mt(Jt);return function(i){return a(function(c){if(c instanceof Dt)return _n(c.value0)(e);if(c instanceof _t)return _n(c.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[c.constructor.name])}(i))}}())(),jt(Ya)(y(Jt)(function(a){return function(i){return{left:a,right:i}}})(qn(e)))(qn(n))()}()}};var vu=function(t){return t.compact};var Tm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof Dt)return{left:z(Yt)(e.left)([u.value0]),right:e.right};if(u instanceof _t)return{right:z(Yt)(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return rr(Ct)(r)({left:[],right:[]})},partition:zi,filterMap:el,filter:zo,Compactable0:function(){return sf},Functor1:function(){return gr}};var Oe=function(t){return t.filterMap};var _l=function(t){return t.filter};var My=function(t){return function(r){return function(e){return hm(t)(r)(e)}}};var sl=function(t){return Sm(t)};var $m=function(t){return Cm(t)(void 0)};var ml=function(t){return{append:My(t)}};var Fm={foldMap:function(t){return function(r){var e=Lr(sn)(t)(r);return function(n){return e(sl(n))}}},foldl:function(t){return function(r){var e=rr(sn)(t)(r);return function(n){return e(sl(n))}}},foldr:function(t){return function(r){var e=Cr(sn)(t)(r);return function(n){return e(sl(n))}}}};var xy=Xn;var Mm=function(t){return{mempty:xy,Semigroup0:function(){return ml(t)}}};var xm=function(t){return function(r){return function(e){return pl(t)(r)(e)}}};function wm(t){return function(r){return function(){return setTimeout(r,t)}}}function Im(t){return function(){clearTimeout(t)}}var Lm=wm;var Ly={eq:function(t){return function(r){return t===r}}},mf={compare:function(t){return function(r){return Lt(ke)(t)(r)}},Eq0:function(){return Ly}};var Pm=Im;var Du=function(r){return function(e){return r(e)()}};var uo=function(r){return function(e){return function(){return r(e)}}};var Ky=function(t){return{append:function(r){return function(e){return Du(function(n){return z(Pc(t))(uo(r)(n))(uo(e)(n))})}}}};var Dl=function(t){return{mempty:Du(function(r){return qt(Oc(t))}),Semigroup0:function(){return Ky(t.Semigroup0())}}};var Hm=function(t){return t.sampleOnRight};var ha=function(t){return t.keepLatest};var Wm=function(t){return t.fix},Hu=function(t){return function(r){return function(e){return function(n){return Wm(t)(function(u){return Hm(t)(yt(t.Alternative0().Plus1().Alt0())(u)(v(t.Alternative0().Applicative0())(e)))(y(t.Filterable1().Functor1())(hr(r))(n))})}}}};var Wu=function(t){return function(r){return function(e){return function(n){return Oe(t.Filterable1())(ne)(Hu(t)(function(u){return function(a){return y(pa)(v(oe))(r(u.value0)(a))}})(new X(e,k.value))(n))}}}};function bl(t){return function(r){return t===r}}var vf=bl;var Um=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var rg=function(t){return function(r){return function(e,n){var u=Me(k.value)(),a=t(e,function(c){return Ce(new _(c))(u)()}),i=r(e,function(c){var p=fe(u)();return Br(Ir)(Zr)(p)(function(s){return function(){return n(c(s))}})()});return function(){return a(),i()}}}},eg=function(t){return function(r){return function(e,n){var u=Me(k.value)(),a=t(e,function(c){var p=fe(u)();return Br(Ir)(Zr)(p)(function(s){return function(){return n(s(c))}})()}),i=r(e,function(c){return Ce(new _(c))(u)()});return function(){return a(),i()}}}},ng=function(t){return function(r,e){var n=Me(v(Ir)(void 0))(),u=t(r,function(a){var i=fe(n)();i();var c=a(r,e);return Ce(c)(n)()});return function(){var i=fe(n)();return i(),u()}}},Dr={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},ti=function(t){return function(r){return function(e,n){return r(e,function(u){var a=t(u);if(a instanceof _)return n(a.value0);if(a instanceof k)return void 0;throw new Error("Failed pattern match at FRP.Event (line 190, column 31 - line 192, column 35): "+[a.constructor.name])})}}},dl=function(t){return ti(function(r){var e=t(r);if(e)return new _(r);if(!e)return k.value;throw new Error("Failed pattern match at FRP.Event (line 117, column 13 - line 119, column 25): "+[e.constructor.name])})},qm=function(){var r=Me([])();return{event:function(e,n){var u=Me(n)();return qo(function(a){return z(Yt)(a)([u])})(r)(),function(){return Ce(qt(Dl(Pi)))(u)(),Ka(Xo(vf)(u))(r)(),void 0}},push:function(e){var n=fe(r)();return ma(n)(function(u){return function(){var i=fe(u)();return i(e)}})()}}},ug=function(t){return function(r,e){var n=qm(),u=t(n.event),a=u(r,n.push),i=n.event(r,e);return function(){return a(),i()}}},ri={compact:ti(Bt(Ht)),separate:function(t){return{left:ti(function(r){if(r instanceof Dt)return new _(r.value0);if(r instanceof _t)return k.value;throw new Error("Failed pattern match at FRP.Event (line 100, column 13 - line 102, column 33): "+[r.constructor.name])})(t),right:ti(function(r){if(r instanceof _t)return new _(r.value0);if(r instanceof Dt)return k.value;throw new Error("Failed pattern match at FRP.Event (line 107, column 13 - line 109, column 32): "+[r.constructor.name])})(t)}}},mn={filter:dl,filterMap:ti,partition:function(t){return function(r){return{yes:dl(t)(r),no:dl(function(){var e=Bn(We);return function(n){return e(t(n))}}())(r)}}},partitionMap:function(t){return function(r){return{left:Oe(mn)(function(){var e=ln(_.create)(h(k.value));return function(n){return e(t(n))}}())(r),right:Oe(mn)(function(e){return yc(t(e))})(r)}}},Compactable0:function(){return ri},Functor1:function(){return Dr}},ag=function(t){return function(r){return function(e,n){var u=Me(k.value)(),a=pn(Tn)(Un)(),i=Me(k.value)(),c=pn(Tn)(Un)(),p=Me(!0)(),s=t(e,function(o){var m=fe(p)();if(m)return mt(H)(pn(Tn)(_n(o)(a)))();Ce(new _(o))(u)();var V=fe(i)();return Br(Ir)(Zr)(V)(function(et){return function(){return n(et(o))}})()}),b=r(e,function(o){var m=fe(p)();if(m)return mt(H)(pn(Tn)(_n(o)(c)))();Ce(new _(o))(i)();var V=fe(u)();return Br(Ir)(Zr)(V)(function(et){return function(){return n(o(et))}})()});Ce(!1)(p)();var T=pn(Tn)(Vi(a))(),d=pn(Tn)(Vi(c))();return function(){return T.length===0?Ce(Yc(d))(i)():ma(T)(function(o){return function(){return Ce(new _(o))(u)(),ma(d)(function(V){return function(){return Ce(new _(V))(i)(),n(V(o))}})()}})()}(),pn(Tn)(Ji(0)(En(T))([])(a))(),pn(Tn)(Ji(0)(En(d))([])(c))(),function(){return s(),b()}}}},kl=function(t){return function(r){return r}(yl(311).subscribe)(t)},yl=Um("backdoor","FRP.Event",function(){var t=function(){var e=Me([])();return{event:function(n,u){var a=Me(u)();return qo(function(i){return z(Yt)(i)([a])})(e)(),function(){return Ce(qt(Dl(Pi)))(a)(),Ka(Xo(vf)(a))(e)(),void 0}},push:function(n){return function(){var a=fe(e)();return ma(a)(function(i){return function(){var p=fe(i)();return p(n)}})()}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?v(Ir)(void 0):e(function(a){return function(){return u(a)}})()}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(a){return function(){return u(a)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var a=function(i){return function(c){return function(){return i(n,Du(c))}}};return e(a)(function(i){return function(){return u(i)}})()}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,Du(n))}}};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,Du(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var a=Al(609)();return u(e(a.push)(a.event)),v(Ir)(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,a){var i=qm();return a(n(i.event)),e(u,i.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Al(627)(),a=kl(e)(u.push)();return{event:u.event,unsubscribe:a}}};return r}(),mailboxed:function(){var r=function(e){return function(n){return function(u){return function(a,i){var c=Me(Xn)();i(u(function(s){return function(b,T){return mt(H)(Ka(Gn(e)(function(d){if(d instanceof k)return new _([T]);if(d instanceof _)return new _(z(Yt)(d.value0)([T]));throw new Error("Failed pattern match at FRP.Event (line 640, column 21 - line 642, column 55): "+[d.constructor.name])})(s))(c))(),mt(H)(Ka(Gn(e)(function(d){if(d instanceof k)return k.value;if(d instanceof _)return new _(Xo(vf)(T)(d.value0));throw new Error("Failed pattern match at FRP.Event (line 649, column 21 - line 651, column 69): "+[d.constructor.name])})(s))(c))}}));var p=n(a,function(s){var b=fe(c)(),T=Ca(e)(s.address)(b);if(T instanceof k)return void 0;if(T instanceof _)return ma(T.value0)(function(d){return function(){return d(s.payload)}})();throw new Error("Failed pattern match at FRP.Event (line 658, column 13 - line 660, column 70): "+[T.constructor.name])});return function(){return mt(H)(Ce(Xn)(c))(),p()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,a){var i=Me(qt(Mm(mf)))(),c=n(u,function(p){var s=Me(k.value)(),b=Lm(e)(function(){a(p);var d=fe(s)();return or(v(Ir)(void 0))(function(o){return qo(xm(mf)(o))(i)})(d)()})();return Ce(new _(b))(s)(),qo(z(ml(mf))($m(b)))(i)()});return function(){var s=fe(i)();return Br(Ir)(Fm)(s)(Pm)(),c()}}}};return r}()}}),Al=Um("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(yl(388).create)()}}),ei=yl(520),zm=Al(385),gl=function(t){return function(r){return r}(ei.bus)(t)};var tn=function(t){return function(r){return r}(ei.makeLemmingEvent)(t)},Jm=function(t){return function(r){return r}(ei.makePureEvent)(t)},Cl=function(t){return function(r){return r}(ei.memoize)(t)},Vm=function(t){return function(r){return r}(ei.subscribePure)(t)},og={apply:function(t){return function(r){return ag(t)(y(Dr)(Fo)(r))}},Functor0:function(){return Dr}};var Y={pure:function(t){return function(r,e){return e(t),v(Ir)(void 0)}},Apply0:function(){return og}};var lr={alt:function(t){return function(r){return function(e,n){return jt(vr)(y(H)(function(u){return function(a){return function(){return u(),a()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Dr}};var A={empty:function(t,r){return v(Ir)(void 0)},Alt0:function(){return lr}},ig={Applicative0:function(){return Y},Plus1:function(){return A}},xe={keepLatest:ng,sampleOnRight:rg,sampleOnLeft:eg,fix:ug,Alternative0:function(){return ig},Filterable1:function(){return mn}};var fg=function(t){return t},ni=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ui=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),cg=function(t){return t},Df=g(),f=cg;var $=function(){return ni.create}();var G=function(){return ui.create}(),$r=function(){var t=y(ua)(y(H)(h(!0)));return function(r){return fg(t(r))}}(),At=function(t){return t.attr};function jm(t){return()=>t.slice()}function Xm(t){return r=>e=>()=>{e[t]=r}}function Gm(t){return()=>t.slice()}var Sl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var bf=function(t){return function(){return function(){return function(r){return function(e){return function(n){return uu(ae(t)(r))(e)(n)}}}}}},El=function(t){return function(){return function(r){return function(e){return An(ae(t)(r))(e)}}}};var df={vb:function(t){return v(er)(new X({},{}))}},Km=function(t){return t.vb},mg={vbus:function(){var t=function(){return function(e){return function(n){return function(u){return tn(function(a){return function(i){return function(){var p=Km(e)(rt.value)();return i(u(p.value0)(p.value1))(),v(er)(void 0)}}})}}}},r=function(){return function(e){return t()(e)}};return r}()},Fl=function(){return function(t){return function(r){return function(e){return e()(t)}(mg.vbus)(r)}}};var ao=function(t){return function(){return function(){return function(r){return function(){return function(){return{vb:function(e){return function(){var u=Km(r)(rt.value)(),a=zm();return new X(bf(t)()()(rt.value)(a.push)(u.value0),bf(t)()()(rt.value)(a.event)(u.value1))}}}}}}}}};var Uu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ml=function(){function t(){}return t.value=new t,t}();var kf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),oo=function(){function t(){}return t.value=new t,t}(),yf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),xl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),wl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ea=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),S=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var qu={eq:function(t){return function(r){return t instanceof Uu&&r instanceof Uu?t.value0===r.value0:t instanceof Ml&&r instanceof Ml}}};var I=function(t){return new wl(t)};var Ym=function(t){return new xl(t)};var Zm=t=>r=>r[t];var Qn=function(t){return t.reflectType};var rv=function(t){return Qn(t)};var $a=gr;var gf=function(){return function(t){return t}};var Cf=function(){return function(){return function(){return function(){return function(){return function(t){var r=rv(t);return function(e){return Zm(r(e))}}}}}}};var ev=[];var Il=function(){return function(){return function(t){return function(r){return Go(t)(r)}}}};function nv(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var zu={};function Pl(t){return t()}function uv(t){return function(r){return function(e){return function(n){var u=e;function a(c){return function(p){return r(p)(c)(n[c])}}for(var i in n)hasOwnProperty.call(n,i)&&(u=t(u)(a(i)));return u}}}}function Sf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var gg=Object.keys||Sf(function(t){return function(){return t}});function Ol(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var Rl=function(t){return function(r){return function(){return delete r[t],r}}};var Mg=Sf(function(t){return function(r){return r}});var xg=nv;var av=function(t){return function(r){return Pl(function(){var n=xg(r)();return t(n)(),n})}};var io=function(t){return function(r){return av(Ol(t)(r))}};var ov=uv(Fo),wg=function(t){return function(r){return ov(function(e){return function(n){return function(u){return z(t.Semigroup0())(e)(r(n)(u))}}})(qt(t))}},iv={foldl:function(t){return ov(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return Cr(Ct)(t)(r)(Mg(e))}}},foldMap:function(t){return function(r){return wg(t)(h(r))}}};var Nl=function(t){return av(Rl(t))};function fv(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function cv(t){return function(r){return function(e){return e[t]=r,e}}}function lv(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function pv(t){return function(r){return delete r[t],r}}var Hl=ea;var _v=function(){return function(){return function(t){return function(r){return function(e){return function(n){return lv(ae(t)(r))(e)(n)}}}}}};var sv=function(){return function(){return function(t){return function(r){return function(e){return function(n){return cv(ae(t)(r))(e)(n)}}}}}};var mv=function(t){return function(){return function(){return function(r){return function(e){return pv(ae(t)(r))(e)}}}}};var vv=function(t){return function(r){return t(fv(r))}};var Dv=function(){function t(){}return t.value=new t,t}(),Wl=function(){function t(){}return t.value=new t,t}(),Pg=function(){function t(){}return t.value=new t,t}();var vn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof wl)return wr(Ct)(A)(vn(t)(r)(e))(u.value0);if(u instanceof Ea)return ha(xe)(y(Dr)(vn(t)(r)(e))(u.value0));if(u instanceof S)return n(t.toElt(u.value0));if(u instanceof xl)return tn(function(a){return function(i){return function(){var p=ge(zu)(),s=a(u.value0)(function(b){return function(){var d=t.ids(e)(),o=ge(v(er)(void 0))(),m=t.ids(e)(),V=ge(v(er)(void 0))(),et=ge([])(),nt=ge(v(er)(void 0))(),at=y(Jt)(Uu.create)(t.ids(e))(),Kt=ge(Dv.value)(),fr=a(b)(function(ur){return function(){var ot=ie(Kt)();if(ur instanceof yf&&ot instanceof Wl)return kt(lu)(ie(et))(Ga(er)(Ct)(function(){var ct=t.doLogic(ur.value0)(e);return function(vt){return i(ct(vt))}}()))();if(ur instanceof oo&&ot instanceof Wl){mt(Jt)(Cn(Pg.value)(Kt))();var q=function(){var vt=ie(et)();Br(er)(Ct)(vt)(function(Ln){return Br(er)(Zr)(r.parent)(function(Eu){return i(t.disconnectElement(e)({id:Ln,parent:Eu,scope:at}))})})();var Ee=ie(o)();Ee();var Vr=ie(V)();return Vr(),mt(Jt)(qr(Nl(d))(p))(),mt(Jt)(qr(Nl(m))(p))()};return mt(Jt)(Cn(q)(nt))(),q()}if(ur instanceof kf&&ot instanceof Dv){mt(Jt)(Cn(Wl.value)(Kt))();var x=a(vn(t)(function(){var ct={};for(var vt in r)({}).hasOwnProperty.call(r,vt)&&(ct[vt]=r[vt]);return ct.scope=at,ct.raiseId=function(Ee){return mt(Jt)(qr(z(Yt)([Ee]))(et))},ct}())(e)(ur.value0))(i)();return mt(Jt)(qr(io(m)(x))(p))(),mt(Jt)(Cn(x)(V))()}return void 0}})();mt(Jt)(Cn(fr)(o))(),mt(Jt)(qr(io(d)(fr))(p))();var lt=ie(nt)();return lt()}})();return function(){return kt(lu)(ie(p))(rr(iv)(Zt(Ya))(v(er)(void 0)))(),s()}}}});throw new Error("Failed pattern match at Bolson.Control (line 543, column 17 - line 628, column 20): "+[u.constructor.name])}}}},Og=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(a){var i=function(c){return function(p){return tn(function(s){return function(b){return function(){var d=jm(y(gr)(h(""))(gf()(u)))(),o=yn(Ct)(A)(Iu(eo)(function(fr){return gc(is)(function(lt){return function(ur){return ur instanceof S?function(an){return an(function(){var ot={};for(var q in c)({}).hasOwnProperty.call(c,q)&&(ot[q]=c[q]);return ot.parent=k.value,ot.scope=r(c.scope),ot.raiseId=function(x){return Xm(fr)(x)(d)},ot}())(p)}(n.toElt(ur.value0)):lt(n.wrapElt(ur))}})})(gf()(u))),m=s(o)(b)(),V=ge(v(er)(void 0))(),et=y(Jt)(K)(Gm(d))(),nt=y($a)(function(fr){return function(lt){return new S(n.fromEltO1(function(ur){return function(an){return tn(function(ot){return function(q){return function(){return ur.raiseId(fr)(),Br(er)(Zr)(ur.parent)(function(ct){return q(n.giveNewParent(an)(vv(Ti(Hl)(sv()()({reflectSymbol:function(){return"id"}})(rt.value)(fr))(Ti(Hl)(_v()()({reflectSymbol:function(){return"parent"}})(rt.value)(h(ct)))(mv({reflectSymbol:function(){return"raiseId"}})()()(rt.value))))(ur))(lt))})(),v(er)(void 0)}}})}}))}})(et),at=vn(e)(c)(p)(a(nt)(K)),Kt=s(at)(b)();return mt(Jt)(Cn(Kt)(V))(),function(){m(),nu(er)(!t)(Br(er)(Ct)(gf()(et))(function(ur){return b(n.deleteFromCache(p)({id:ur}))}))();var lt=ie(V)();return lt()}}}})}};return new S(n.fromEltO2(i))}}}}}}}}};var bv=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return Og()()()(!1)(Bt(Ht))(t)(r)(e)(n)}}}}}}};var Tf=function(){return function(t){return function(r){return function(e){return new Ea(g()(Fl()(t)(r)(e)))}}}};var dv=function(t){return function(r){var e=function(n){return n instanceof S?new S(Ke(Qe)(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof Ea?new Ea(y(Dr)(e)(n.value0)):r};return e(r)}},P=function(t){return dv(_.create(t))},Av=function(){return new yf(0)}();var Ul=function(){return oo.value}(),Ng=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Ar();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:it(qu)})}},toElt:function(t){return t}}},Ju=function(t){return new kf(Ar()(dv(k.value)(t)))};var Vu=function(t){return gl(t)};var fo=function(t){return new Ea(g()(Vu(t)))};var Bg=function(t){return function(r){return function(e){return vn(Ng())(t)(r)(e)}}},Hg=function(t){return function(r){var e=function(n){return function(u){return tn(function(a){return function(i){return function(){var p=u.ids();n.raiseId(p)();var s=function(){if(n.parent instanceof k){var T=u.ids();return new X(v(Y)(u.makeElement({id:T,parent:k.value,scope:n.scope,tag:"div",pos:k.value,dynFamily:k.value})),T)}if(n.parent instanceof _)return new X(C(A),n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 338, column 34 - line 352, column 36): "+[n.parent.constructor.name])}(),b=a(yn(Ct)(A)([s.value0,v(Y)(u.makeDynBeacon({id:p,parent:new _(s.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),v(Y)(u.attributeParent({id:p,parent:s.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),Bg({parent:new _(s.value1),scope:n.scope,ez:!1,raiseId:function(T){return v(er)(void 0)},pos:k.value,dynFamily:new _(p)})(u)(t(r))]))(i)();return function(){return i(u.removeDynBeacon({id:p}))(),b()}}}})}};return new S(e)}},ju=Hg(g()(Ym));var Wg=function(t){return function(r){return function(e){return y(Dr)(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},Ug=function(t){return function(r){return function(e){return y(Dr)(function(n){return function(u){if(u.value instanceof ni)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof ui)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 61, column 26 - line 63, column 45): "+[u.value.constructor.name])}(Df(n))})(e)}}},rn=function(t){var r=function(e){return function(n){return tn(function(u){return function(a){return function(){var c=n.ids();e.raiseId(c)();var p=u(yn(Ct)(A)([v(Y)(n.makeText({id:c,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),Wg(n)(c)(t),or(C(A))(function(s){return v(Y)(n.attributeParent({id:c,parent:s,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]))(a)();return function(){return a(n.deleteFromCache({id:c}))(),p()}}}})}};return new S(r)},nr=function(t){return rn(v(Y)(t))},Ef=function(t){return function(r){var e=function(){var n=function(u){return function(a){return new X(u+1|0,new X(a,u))}};return Wu(xe)(n)(0)}();return ju(ha(xe)(Cl(e(r))(function(n){return y(Dr)(function(u){return yn(Ct)(A)([y(Dr)(h(oo.value))(_l(mn)(function(){var a=it(Ra)(u.value1+1|0);return function(i){return a(ne(i))}}())(n)),v(Y)(Ju(g()(t(u.value0))))])})(n)})))}},kv=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(){var t=Ar();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:it(qu)})}},toElt:function(t){return t}}};var qg=function(t){return function(r){return function(e){return vn(kv())(t)(r)(e)}}};var L=function(t){return function(r){return function(e){var n=function(u){return function(a){return tn(function(i){return function(c){return function(){var s=a.ids();u.raiseId(s)();var b=i(yt(lr)(yn(Ct)(A)(z(Yt)([v(Y)(a.makeElement({id:s,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),Ug(a)(s)(r)])(or([])(function(T){return[v(Y)(a.attributeParent({id:s,parent:T,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(qg({parent:new _(s),scope:u.scope,ez:!0,raiseId:function(T){return v(er)(void 0)},pos:k.value,dynFamily:k.value})(a)(e)))(c)();return function(){return c(a.deleteFromCache({id:s}))(),b()}}}})}};return n}}};var yv=function(){return function(t){return function(r){return bv()()()(kv())({fromEltO1:g(),fromEltO2:g(),toElt:g(),wrapElt:function(e){return new S(L("div")(C(A))(Hi()(e)))},giveNewParent:function(e){return function(n){return function(u){return Ar()(e).giveNewParent(n)}}},deleteFromCache:function(){var e=Ar();return function(n){return function(u){return u.deleteFromCache}(e(n))}}()})(y($a)(Ar())(t))(Ke(Qe)(y($a)(function(e){return e(void 0)}))(g()(r)))}}};var Qr=function(){function t(){}return t.value=new t,t}();var te={attr:function(t){return function(r){return f({key:"href",value:$(r)})}}};var Fr=function(){function t(){}return t.value=new t,t}(),co={attr:function(t){return function(r){return f({key:"click",value:G(h(j(H)(r)(!0)))})}}};var Pr={attr:function(t){return function(r){return f({key:"click",value:G(r)})}}};var he=function(){function t(){}return t.value=new t,t}();var lo={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var gv={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var Cv={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var ql={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var $f={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var Sv={attr:function(t){return function(r){return f({key:"style",value:$(r)})}}};var oi=function(t){return function(r){return new S(L("a")(t)(g()(I(g()(w(P)(r))))))}};var Ff=function(t){return function(r){return new S(L("div")(t)(g()(I(g()(w(P)(r))))))}},br=Ff(C(A));var Gu=function(t){return function(r){return new S(L("span")(t)(g()(I(g()(w(P)(r))))))}},ii=Gu(C(A));var Fa=function(){function t(){}return t.value=new t,t}();var Tv={attr:function(t){return function(r){return f({key:"type",value:$(r)})}}};var xf={attr:function(t){return function(r){return f({key:"type",value:$(r)})}}};var we=function(t){return function(r){return new S(L("button")(t)(g()(I(g()(w(P)(r))))))}},Jl=we(C(A));var Ev=function(t){return function(r){return new S(L("code")(t)(g()(I(g()(w(P)(r))))))}},zr=Ev(C(A));var $v=function(t){return function(r){return new S(L("i")(t)(g()(I(g()(w(P)(r))))))}},Vl=$v(C(A));var du=function(t){return function(r){return new S(L("input")(t)(g()(I(g()(w(P)(r))))))}};var Fv=function(t){return function(r){return new S(L("li")(t)(g()(I(g()(w(P)(r))))))}},jl=Fv(C(A));var Mv=function(t){return function(r){return new S(L("pre")(t)(g()(I(g()(w(P)(r))))))}},Jr=Mv(C(A));var xv=function(t){return function(r){return new S(L("ul")(t)(g()(I(g()(w(P)(r))))))}},Xl=xv(C(A));var If=function(){function t(){}return t.value=new t,t}(),po=function(){function t(){}return t.value=new t,t}(),_o=function(){function t(){}return t.value=new t,t}(),so=function(){function t(){}return t.value=new t,t}(),mo=function(){function t(){}return t.value=new t,t}(),vo=function(){function t(){}return t.value=new t,t}(),Do=function(){function t(){}return t.value=new t,t}(),bo=function(){function t(){}return t.value=new t,t}(),Ao=function(){function t(){}return t.value=new t,t}(),ko=function(){function t(){}return t.value=new t,t}(),wv=function(t){return t==="Intro"?v(oe)(If.value):t==="HelloWorld"?v(oe)(po.value):t==="SimpleComponent"?v(oe)(_o.value):t==="PURSX1"?v(oe)(so.value):t==="PURSX2"?v(oe)(mo.value):t==="Events"?v(oe)(vo.value):t==="Effects"?v(oe)(Do.value):t==="Events2"?v(oe)(bo.value):t==="Portals"?v(oe)(Ao.value):t==="SSR"?v(oe)(ko.value):C(rs)};function Gl(){window.scrollTo(0,0)}var De=Gl;var Xg=function(t){return t};var Kr={pursxToElement:function(t){return function(r){return function(e){return{cache:zu,element:function(n){return function(u){return C(A)}}}}}}},Ql=function(t){return t.pursxToElement},ce=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(a){var i=Ql(t)(n)(rt.value)(a);return{cache:io(Qn(r)(rt.value))(!0)(i.cache),element:function(c){return function(p){return yt(lr)(y(Dr)(Ke(Qe)(Df)(function(s){if(s.value instanceof ni)return p.setProp({id:Qn(r)(rt.value)+("@!%"+n),key:s.key,value:s.value.value0});if(s.value instanceof ui)return p.setCb({id:Qn(r)(rt.value)+("@!%"+n),key:s.key,value:s.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4195, column 38 - line 4205, column 24): "+[s.value.constructor.name])}))(El(e)()(rt.value)(a)))(i.element(c)(p))}}}}}}}}}}};var kr=Xg,Kl=function(t){return function(r){return function(){return function(){return function(e){return function(n){return function(u){return function(a){var i=function(c){return function(p){return tn(function(s){return function(b){return function(){var d=p.ids(),o=p.ids();c.raiseId(d)();var m=Ql(e)(o)(rt.value)(a),V=s(yn(Ct)(A)([v(Y)(p.makePursx({id:d,parent:c.parent,cache:m.cache,dynFamily:c.dynFamily,pos:c.pos,pxScope:o,scope:c.scope,html:Qn(t)(u),verb:Qn(r)(n)})),m.element(c)(p),or(C(A))(function(et){return v(Y)(p.attributeParent({id:d,parent:et,pos:c.pos,dynFamily:c.dynFamily,ez:!1}))})(c.parent)]))(b)();return function(){return b(p.deleteFromCache({id:d}))(),V()}}}})}};return new S(i)}}}}}}}},re=function(t){return function(){return function(){return function(r){return Kl(t)({reflectType:function(){return"~"}})()()(r)(rt.value)}}}},Iv=function(t){return function(){return function(r){return function(e){return re(t)()()(r)(e)({})}}}},Gg=function(t){return function(r){return function(e){return vn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(){var n=Ar();return function(u){return function(a){return a.ids}(n(u))}}(),disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:it(qu)})}},toElt:function(n){return n}})(t)(r)(g()(e))}}},yr=function(){return function(t){return function(r){return function(e){return{pursxToElement:function(n){return function(u){return function(a){var i=El(e)()(rt.value)(a),c=Ql(t)(n)(rt.value)(a);return{cache:io(Qn(r)(rt.value))(!1)(c.cache),element:function(p){return function(s){return yt(lr)(Gg({parent:new _(Qn(r)(rt.value)+("@!%"+n)),scope:p.scope,raiseId:function(b){return v(er)(void 0)},pos:p.pos,ez:!1,dynFamily:k.value})(s)(i))(c.element(p)(s))}}}}}}}}}}};var Yl=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.Core (envy)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (bus)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody
  (envy ( bus \\push event -> myDom ~~
      { myli: pure (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (pure (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                      pure "I was dynamically inserted"
              ]
          )
      }
  ))`,Zl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,tp=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable, envy)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, bus, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody
  (envy $ bus \\push -> lcmap (pure unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
                [ D.source
                    (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 :: Domable _ _
            p0 = index (Proxy :: _ 0) v

            p1 :: Domable _ _
            p1 = index (Proxy :: _ 1) v

            ev :: Boolean -> Event Boolean
            ev b = fold (\\a _ -> not a) b event

            flips :: Boolean -> Domable _ _
            flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (pure $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [ flips true ], flips false ]
            ]
  )
`,rp=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,ep=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn, bussed, insert_, remove, sendToTop)
import Deku.DOM as D
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, bus, keepLatest, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody
  ( bussed \\pushAction actionEvent -> do
      let
        accumulateTextAndEmitOnSubmit :: Event String
        accumulateTextAndEmitOnSubmit = compact
          ( mapAccum
              ( \\a b -> case b of
                  AddTodo -> a /\\ Just a
                  ChangeText s -> s /\\ Nothing
              )
              ""
              actionEvent
          )

        top :: Nut
        top =
          D.div_
            [ D.input
                ( oneOf
                    [ textInput $ pure (pushAction <<< ChangeText)
                    , keyUp $ pure \\evt -> do
                        when (code evt == "Enter") $ do
                          pushAction AddTodo
                    ]
                )
                []
            , D.button
                (click $ pure $ pushAction AddTodo)
                [ text_ "Add" ]
            ]
      D.div_
        [ top
        , dyn
            $ map
                ( \\txt -> keepLatest $ bus \\p' e' ->
                    ( pure $ insert_ $ D.div_
                        [ text_ txt
                        , D.button
                            (click $ pure (p' sendToTop))
                            [ text_ "Prioritize" ]
                        , D.button
                            (click $ pure (p' remove))
                            [ text_ "Delete" ]
                        ]
                    ) <|> e'
                )
                accumulateTextAndEmitOnSubmit
        ]
  )
`,np=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.Core (vbussed)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody
  ( vbussed (Proxy :: _ UIEvents) \\push event -> do
      let
        countUp :: Event Int
        countUp = fold
          (\\a _ -> 1 + a)
          (-1)
          (pure unit <|> event.buttonClicked)
      D.div_
        [ D.button
            (click_ (push.buttonClicked unit))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( pure "Val: 0" <|>
                    ( append "Val: " <<< show <$> countUp
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (pure push.sliderMoved))
                []
            , D.div_
                [ text
                    ( pure "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`,up=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.Core (bus, envy)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody
  (envy $ bus \\push -> lcmap (pure Initial <|> _)
      \\event -> do
        let
          split :: { left :: Event Unit, right :: Event String }
          split = separate $ compact $
            map
              ( case _ of
                  Loading -> Just $ Left unit
                  Result s -> Just $ Right s
                  _ -> Nothing
              )
              event
          { left: loading, right: result } = split
        D.div_
          [ D.div_
              [ D.button (pure (D.OnClick := clickCb push))
                  [ text
                      ( pure clickText
                          <|> (loading $> "Loading...")
                          <|> (result $> clickText)
                      )
                  ]
              ]
          , D.div
              ( (pure (D.Style := "display: none;")) <|>
                  ( compact
                      ( mapAccum
                          ( \\b _ -> (b && false) /\\
                              if b then Just unit else Nothing
                          )
                          true
                          result
                      ) $> (D.Style := "display: block;")
                  )
              )
              [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
          ]
  )
`,ap=`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.Core (fixed)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  (fixed [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (pure $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (pure $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (pure $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`,op=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,ip=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,fp=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function Lv(t){return t.target}function ee(t){return function(){return t.preventDefault()}}function Pv(t,r,e){return t==null?r:e(t)}function cp(t){return t}var yo=or(null)(cp),le=function(t){return Pv(t,k.value,_.create)};var Rf=function(t){return le(Lv(t))};var eC=function(){return rt.value}(),Rv=function(t){return re({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(eC)({code:kr(Jr([zr([nr(ap)])])),result:kr(br([Jl([nr("I do nothing")]),Xl(y(gr)(function(){var r=v(aa);return function(e){return jl(r(nr(e)))}}())(["A","B","C"])),br([oi(v(Y)(At(te)(Qr.value)("https://example.com")))([nr("foo ")]),Vl([nr(" bar ")]),Gu(v(Y)(At(lo)(he.value)("font-weight: 800;")))([nr(" baz")])]),br([br([br([du(v(Y)(At(xf)(Fa.value)("range")))([])])])])])),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(so.value)))(De)})),At(te)(Qr.value)(t.slug+"pursx1/")])})};function Nv(t,r,e,n,u){return function(a,i){var c=t.newXHR(),p=t.fixupUrl(u.url,c);if(c.open(u.method||"GET",p,!0,u.username,u.password),u.headers)try{for(var s=0,b;(b=u.headers[s])!=null;s++)c.setRequestHeader(b.field,b.value)}catch(d){a(d)}var T=function(d){return function(){a(new Error(d))}};return c.onerror=T(e),c.ontimeout=T(r),c.onload=function(){i({status:c.status,statusText:c.statusText,headers:c.getAllResponseHeaders().split(`\r
`).filter(function(d){return d.length>0}).map(function(d){var o=d.indexOf(":");return n(d.substring(0,o))(d.substring(o+2))}),body:c.response})},c.responseType=u.responseType,c.withCredentials=u.withCredentials,c.timeout=u.timeout,c.send(u.content),function(d,o,m){try{c.abort()}catch(V){return o(V)}return m()}}}var Nf="application/json",Bv="application/x-www-form-urlencoded";var Wv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Uv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Jv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),lp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Vv=function(t){return t instanceof lp?new _(Bv):t instanceof pp?new _(Nf):k.value};var Bf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Hf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jv=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Xv=function(t){if(t instanceof Bf)return Ar()(t.value0);if(t instanceof Hf)return Ar()(t.value0);if(t instanceof jv)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var _p=function(t){if(t instanceof Bf)return"Accept";if(t instanceof Hf)return"Content-Type";if(t instanceof jv)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var sp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fi=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Wf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Gv=function(t){if(t instanceof sp)return"arraybuffer";if(t instanceof mp)return"blob";if(t instanceof vp)return"document";if(t instanceof fi||t instanceof Dp)return"text";if(t instanceof Wf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},Qv=function(t){return t instanceof fi?new _(Nf):k.value};var Kv=function(){return new fi(Bt(Ht))}(),Yv=function(){return new Wf(Bt(Ht))}();var tD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function go(t){return new Error(t)}function ci(t){return t.message}function li(t){return function(){throw t}}var wn=function(t){return t.throwError};var gu=function(t){return t.catchError};var qf=function(t){return function(r){return gu(t)(y(t.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(_t.create)(r))(function(){var e=v(t.MonadThrow0().Monad0().Applicative0());return function(n){return e(Dt.create(n))}}())}};var tu=function(t){return t.state};var Co=function(t){return function(r){return tu(t)(function(e){var n=r(e);return new X(n,n)})}};var bn=function(t){return t.liftEffect};var bp=function(t){return t};var dp=function(t){return t};var Xf=function(t){return function(r){return t(r)}},eD=function(t){return{map:function(r){return Xf(y(t)(y(qa)(r)))}}};var Ap=function(t){return{Applicative0:function(){return wa(t)},Bind1:function(){return kp(t)}}},kp=function(t){return{bind:function(r){return function(e){return kt(t.Bind1())(r)(ln(function(){var n=v(t.Applicative0());return function(u){return n(Dt.create(u))}}())(function(n){var u=e(n);return u}))}},Apply0:function(){return nD(t)}}},nD=function(t){return{apply:Ue(Ap(t)),Functor0:function(){return eD(t.Bind1().Apply0().Functor0())}}},wa=function(t){return{pure:function(){var r=v(t.Applicative0());return function(e){return bp(r(_t.create(e)))}}(),Apply0:function(){return nD(t)}}};var uD=function(t){return{throwError:function(){var r=v(t.Applicative0());return function(e){return bp(r(Dt.create(e)))}}(),Monad0:function(){return Ap(t)}}};var yp=function(t){return function(r){return{alt:function(e){return function(n){return kt(r.Bind1())(e)(function(u){if(u instanceof _t)return v(r.Applicative0())(new _t(u.value0));if(u instanceof Dt)return kt(r.Bind1())(n)(function(a){if(a instanceof _t)return v(r.Applicative0())(new _t(a.value0));if(a instanceof Dt)return v(r.Applicative0())(new Dt(z(t)(u.value0)(a.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[a.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[u.constructor.name])})}},Functor0:function(){return eD(r.Bind1().Apply0().Functor0())}}}};var aD=function(){var t=Ar();return function(r){return t(dp(r))}}();function gp(t){return JSON.stringify(t)}function Cp(t){return function(r){return JSON.stringify(r,null,t)}}var oD=zu;function fD(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var cD=function(t){return fD(Dt.create,_t.create,t)};var Qf=function(t){return function(r){return function(e){return e.replace(t,r)}}};var Sp=function(t){return function(r){return r.join(t)}};function AC(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}var _D=function(r,e,n){try{return e(AC(encodeURIComponent(n)).replace(/%20/g,"+"))}catch(u){return r(u)}};var Kf=function(){return Sl(_D)(h(k.value))(_.create)}();var gC=function(t){return t};var sD=function(){var t=function(n){if(n.value1 instanceof k)return Kf(n.value0);if(n.value1 instanceof _)return jt(ca)(y(Mr)(function(u){return function(a){return u+("="+a)}})(Kf(n.value0)))(Kf(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=y(Mr)(Sp("&")),e=qe(Da)(oe)(t);return function(n){return r(e(gC(n)))}}();var SC=function(){function t(){}return t.value=new t,t}(),bi=function(){function t(){}return t.value=new t,t}(),hC=function(){function t(){}return t.value=new t,t}(),mD=function(){function t(){}return t.value=new t,t}(),vD=function(){function t(){}return t.value=new t,t}(),DD=function(){function t(){}return t.value=new t,t}(),TC=function(){function t(){}return t.value=new t,t}(),EC=function(){function t(){}return t.value=new t,t}(),$C=function(){function t(){}return t.value=new t,t}(),FC=function(){function t(){}return t.value=new t,t}(),MC=function(){function t(){}return t.value=new t,t}(),xC=function(){function t(){}return t.value=new t,t}(),wC=function(){function t(){}return t.value=new t,t}(),IC=function(){function t(){}return t.value=new t,t}(),LC=function(){function t(){}return t.value=new t,t}(),bD=function(){function t(){}return t.value=new t,t}();var PC=function(t){return t},OC={show:function(t){if(t instanceof SC)return"OPTIONS";if(t instanceof bi)return"GET";if(t instanceof hC)return"HEAD";if(t instanceof mD)return"POST";if(t instanceof vD)return"PUT";if(t instanceof DD)return"DELETE";if(t instanceof TC)return"TRACE";if(t instanceof EC)return"CONNECT";if(t instanceof $C)return"PROPFIND";if(t instanceof FC)return"PROPPATCH";if(t instanceof MC)return"MKCOL";if(t instanceof xC)return"COPY";if(t instanceof wC)return"MOVE";if(t instanceof IC)return"LOCK";if(t instanceof LC)return"UNLOCK";if(t instanceof bD)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var dD=ln(dt(OC))(PC);var yD=function(){var t=af(al);return function(r){return of(t(r))}}();var gD=function(t){return t.value0};var ze=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",a="Async",i="Bind",c="Bracket",p="Fork",s="Sequential",b="Map",T="Apply",d="Alt",o="Cons",m="Resume",V="Release",et="Finalizer",nt="Finalized",at="Forked",Kt="Fiber",fr="Thunk";function lt(st,pr,Hr,dr){this.tag=st,this._1=pr,this._2=Hr,this._3=dr}function ur(st){var pr=function(Hr,dr,Tt){return new lt(st,Hr,dr,Tt)};return pr.tag=st,pr}function an(st){return new lt(r,void 0)}function ot(st){try{st()}catch(pr){setTimeout(function(){throw pr},0)}}function q(st,pr,Hr){try{return pr(Hr())}catch(dr){return st(dr)}}function x(st,pr,Hr){try{return pr(Hr)()}catch(dr){return Hr(st(dr))(),an}}var ct=function(){var st=1024,pr=0,Hr=0,dr=new Array(st),Tt=!1;function tt(){var mr;for(Tt=!0;pr!==0;)pr--,mr=dr[Hr],dr[Hr]=void 0,Hr=(Hr+1)%st,mr();Tt=!1}return{isDraining:function(){return Tt},enqueue:function(mr){var Vt,Rr;pr===st&&(Rr=Tt,tt(),Tt=Rr),dr[(Hr+pr)%st]=mr,pr++,Tt||tt()}}}();function vt(st){var pr={},Hr=0,dr=0;return{register:function(Tt){var tt=Hr++;Tt.onComplete({rethrow:!0,handler:function(mr){return function(){dr--,delete pr[tt]}}})(),pr[tt]=Tt,dr++},isEmpty:function(){return dr===0},killAll:function(Tt,tt){return function(){if(dr===0)return tt();var mr=0,Vt={};function Rr(Sr){Vt[Sr]=pr[Sr].kill(Tt,function(jr){return function(){delete Vt[Sr],mr--,st.isLeft(jr)&&st.fromLeft(jr)&&setTimeout(function(){throw st.fromLeft(jr)},0),mr===0&&tt()}})()}for(var _e in pr)pr.hasOwnProperty(_e)&&(mr++,Rr(_e));return pr={},Hr=0,dr=0,function(Sr){return new lt(u,function(){for(var jr in Vt)Vt.hasOwnProperty(jr)&&Vt[jr]()})}}}}}var Ee=0,Vr=1,Ln=2,Eu=3,Pa=4,Le=5,To=6;function vc(st,pr,Hr){var dr=0,Tt=Ee,tt=Hr,mr=null,Vt=null,Rr=null,_e=null,Sr=null,jr=0,ra=0,on=null,$u=!0;function Fu(Et){for(var Mt,tr,cr;;)switch(Mt=null,tr=null,cr=null,Tt){case Ln:Tt=Vr;try{tt=Rr(tt),_e===null?Rr=null:(Rr=_e._1,_e=_e._2)}catch(be){Tt=Le,mr=st.left(be),tt=null}break;case Eu:st.isLeft(tt)?(Tt=Le,mr=tt,tt=null):Rr===null?Tt=Le:(Tt=Ln,tt=st.fromRight(tt));break;case Vr:switch(tt.tag){case i:Rr&&(_e=new lt(o,Rr,_e)),Rr=tt._2,Tt=Vr,tt=tt._1;break;case r:Rr===null?(Tt=Le,tt=st.right(tt._1)):(Tt=Ln,tt=tt._1);break;case u:Tt=Eu,tt=q(st.left,st.right,tt._1);break;case a:Tt=Pa,tt=x(st.left,tt._1,function(be){return function(){dr===Et&&(dr++,ct.enqueue(function(){dr===Et+1&&(Tt=Eu,tt=be,Fu(dr))}))}});return;case e:Tt=Le,mr=st.left(tt._1),tt=null;break;case n:Rr===null?Sr=new lt(o,tt,Sr,Vt):Sr=new lt(o,tt,new lt(o,new lt(m,Rr,_e),Sr,Vt),Vt),Rr=null,_e=null,Tt=Vr,tt=tt._1;break;case c:jr++,Rr===null?Sr=new lt(o,tt,Sr,Vt):Sr=new lt(o,tt,new lt(o,new lt(m,Rr,_e),Sr,Vt),Vt),Rr=null,_e=null,Tt=Vr,tt=tt._1;break;case p:Tt=Eu,Mt=vc(st,pr,tt._2),pr&&pr.register(Mt),tt._1&&Mt.run(),tt=st.right(Mt);break;case s:Tt=Vr,tt=dd(st,pr,tt._1);break}break;case Le:if(Rr=null,_e=null,Sr===null)Tt=To,tt=Vt||mr||tt;else switch(Mt=Sr._3,cr=Sr._1,Sr=Sr._2,cr.tag){case n:Vt&&Vt!==Mt&&jr===0?Tt=Le:mr&&(Tt=Vr,tt=cr._2(st.fromLeft(mr)),mr=null);break;case m:Vt&&Vt!==Mt&&jr===0||mr?Tt=Le:(Rr=cr._1,_e=cr._2,Tt=Ln,tt=st.fromRight(tt));break;case c:jr--,mr===null&&(tr=st.fromRight(tt),Sr=new lt(o,new lt(V,cr._2,tr),Sr,Mt),(Vt===Mt||jr>0)&&(Tt=Vr,tt=cr._3(tr)));break;case V:Sr=new lt(o,new lt(nt,tt,mr),Sr,Vt),Tt=Vr,Vt&&Vt!==Mt&&jr===0?tt=cr._1.killed(st.fromLeft(Vt))(cr._2):mr?tt=cr._1.failed(st.fromLeft(mr))(cr._2):tt=cr._1.completed(st.fromRight(tt))(cr._2),mr=null,jr++;break;case et:jr++,Sr=new lt(o,new lt(nt,tt,mr),Sr,Vt),Tt=Vr,tt=cr._1;break;case nt:jr--,Tt=Le,tt=cr._1,mr=cr._2;break}break;case To:for(var Ur in on)on.hasOwnProperty(Ur)&&($u=$u&&on[Ur].rethrow,ot(on[Ur].handler(tt)));on=null,Vt&&mr?setTimeout(function(){throw st.fromLeft(mr)},0):st.isLeft(tt)&&$u&&setTimeout(function(){if($u)throw st.fromLeft(tt)},0);return;case Ee:Tt=Vr;break;case Pa:return}}function Wr(Et){return function(){if(Tt===To)return $u=$u&&Et.rethrow,Et.handler(tt)(),function(){};var Mt=ra++;return on=on||{},on[Mt]=Et,function(){on!==null&&delete on[Mt]}}}function wt(Et,Mt){return function(){if(Tt===To)return Mt(st.right(void 0))(),function(){};var tr=Wr({rethrow:!1,handler:function(){return Mt(st.right(void 0))}})();switch(Tt){case Ee:Vt=st.left(Et),Tt=To,tt=Vt,Fu(dr);break;case Pa:Vt===null&&(Vt=st.left(Et)),jr===0&&(Tt===Pa&&(Sr=new lt(o,new lt(et,tt(Et)),Sr,Vt)),Tt=Le,tt=null,mr=null,Fu(++dr));break;default:Vt===null&&(Vt=st.left(Et)),jr===0&&(Tt=Le,tt=null,mr=null)}return tr}}function Qt(Et){return function(){var Mt=Wr({rethrow:!1,handler:Et})();return Tt===Ee&&Fu(dr),Mt}}return{kill:wt,join:Qt,onComplete:Wr,isSuspended:function(){return Tt===Ee},run:function(){Tt===Ee&&(ct.isDraining()?Fu(dr):ct.enqueue(function(){Fu(dr)}))}}}function bd(st,pr,Hr,dr){var Tt=0,tt={},mr=0,Vt={},Rr=new Error("[ParAff] Early exit"),_e=null,Sr=t;function jr(Wr,wt,Qt){var Et=wt,Mt=null,tr=null,cr=0,Ur={},be,Eo;t:for(;;)switch(be=null,Et.tag){case at:if(Et._3===t&&(be=tt[Et._1],Ur[cr++]=be.kill(Wr,function(Ad){return function(){cr--,cr===0&&Qt(Ad)()}})),Mt===null)break t;Et=Mt._2,tr===null?Mt=null:(Mt=tr._1,tr=tr._2);break;case b:Et=Et._2;break;case T:case d:Mt&&(tr=new lt(o,Mt,tr)),Mt=Et,Et=Et._1;break}if(cr===0)Qt(st.right(void 0))();else for(Eo=0,be=cr;Eo<be;Eo++)Ur[Eo]=Ur[Eo]();return Ur}function ra(Wr,wt,Qt){var Et,Mt,tr,cr,Ur,be;st.isLeft(Wr)?(Et=Wr,Mt=null):(Mt=Wr,Et=null);t:for(;;){if(tr=null,cr=null,Ur=null,be=null,_e!==null)return;if(wt===null){dr(Et||Mt)();return}if(wt._3!==t)return;switch(wt.tag){case b:Et===null?(wt._3=st.right(wt._1(st.fromRight(Mt))),Mt=wt._3):wt._3=Et;break;case T:if(tr=wt._1._3,cr=wt._2._3,Et){if(wt._3=Et,Ur=!0,be=mr++,Vt[be]=jr(Rr,Et===tr?wt._2:wt._1,function(){return function(){delete Vt[be],Ur?Ur=!1:Qt===null?ra(Et,null,null):ra(Et,Qt._1,Qt._2)}}),Ur){Ur=!1;return}}else{if(tr===t||cr===t)return;Mt=st.right(st.fromRight(tr)(st.fromRight(cr))),wt._3=Mt}break;case d:if(tr=wt._1._3,cr=wt._2._3,tr===t&&st.isLeft(cr)||cr===t&&st.isLeft(tr))return;if(tr!==t&&st.isLeft(tr)&&cr!==t&&st.isLeft(cr))Et=Mt===tr?cr:tr,Mt=null,wt._3=Et;else if(wt._3=Mt,Ur=!0,be=mr++,Vt[be]=jr(Rr,Mt===tr?wt._2:wt._1,function(){return function(){delete Vt[be],Ur?Ur=!1:Qt===null?ra(Mt,null,null):ra(Mt,Qt._1,Qt._2)}}),Ur){Ur=!1;return}break}Qt===null?wt=null:(wt=Qt._1,Qt=Qt._2)}}function on(Wr){return function(wt){return function(){delete tt[Wr._1],Wr._3=wt,ra(wt,Wr._2._1,Wr._2._2)}}}function $u(){var Wr=Vr,wt=Hr,Qt=null,Et=null,Mt,tr;t:for(;;)switch(Mt=null,tr=null,Wr){case Vr:switch(wt.tag){case b:Qt&&(Et=new lt(o,Qt,Et)),Qt=new lt(b,wt._1,t,t),wt=wt._2;break;case T:Qt&&(Et=new lt(o,Qt,Et)),Qt=new lt(T,t,wt._2,t),wt=wt._1;break;case d:Qt&&(Et=new lt(o,Qt,Et)),Qt=new lt(d,t,wt._2,t),wt=wt._1;break;default:tr=Tt++,Wr=Le,Mt=wt,wt=new lt(at,tr,new lt(o,Qt,Et),t),Mt=vc(st,pr,Mt),Mt.onComplete({rethrow:!1,handler:on(wt)})(),tt[tr]=Mt,pr&&pr.register(Mt)}break;case Le:if(Qt===null)break t;Qt._1===t?(Qt._1=wt,Wr=Vr,wt=Qt._2,Qt._2=t):(Qt._2=wt,wt=Qt,Et===null?Qt=null:(Qt=Et._1,Et=Et._2))}for(Sr=wt,tr=0;tr<Tt;tr++)tt[tr].run()}function Fu(Wr,wt){_e=st.left(Wr);var Qt;for(var Et in Vt)if(Vt.hasOwnProperty(Et)){Qt=Vt[Et];for(Et in Qt)Qt.hasOwnProperty(Et)&&Qt[Et]()}Vt=null;var Mt=jr(Wr,Sr,wt);return function(tr){return new lt(a,function(cr){return function(){for(var Ur in Mt)Mt.hasOwnProperty(Ur)&&Mt[Ur]();return an}})}}return $u(),function(Wr){return new lt(a,function(wt){return function(){return Fu(Wr,wt)}})}}function dd(st,pr,Hr){return new lt(a,function(dr){return function(){return bd(st,pr,Hr,dr)}})}return lt.EMPTY=t,lt.Pure=ur(r),lt.Throw=ur(e),lt.Catch=ur(n),lt.Sync=ur(u),lt.Async=ur(a),lt.Bind=ur(i),lt.Bracket=ur(c),lt.Fork=ur(p),lt.Seq=ur(s),lt.ParMap=ur(b),lt.ParApply=ur(T),lt.ParAlt=ur(d),lt.Fiber=vc,lt.Supervisor=vt,lt.Scheduler=ct,lt.nonCanceler=an,lt}(),SD=ze.Pure,hD=ze.Throw;function TD(t){return function(r){return ze.Catch(t,r)}}function ED(t){return function(r){return r.tag===ze.Pure.tag?ze.Pure(t(r._1)):ze.Bind(r,function(e){return ze.Pure(t(e))})}}function $D(t){return function(r){return ze.Bind(t,r)}}var FD=ze.Sync;var di=ze.Async;function MD(t,r){return function(){return ze.Fiber(t,null,r)}}var RC=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return ze.Async(function(u){return function(){var a=t(n,u(e()));return function(){return ze.Sync(function(){return e(r(n,a))})}}})}}(),NC=ze.Seq;var ZC=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var $p={map:ED};var tS=function(){var t=function(n){if(n instanceof _t)return n.value0;if(n instanceof Dt)return Pu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof Dt)return n.value0;if(n instanceof _t)return Pu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof Dt)return!0;if(n instanceof _t)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:Dt.create,right:_t.create}}(),rS=function(t){return MD(tS,t)},eS=function(t){return function(){var e=rS(t)();return e.run(),e}},Fp=function(){var t=mt(H);return function(r){return t(eS(r))}}();var Mp={Applicative0:function(){return Yf},Bind1:function(){return xp}},xp={bind:$D,Apply0:function(){return PD(0)}},Yf={pure:SD,Apply0:function(){return PD(0)}},PD=ZC("applyAff","Effect.Aff",function(){return{apply:Ue(Mp),Functor0:function(){return $p}}});var Zf={liftEffect:FD,Monad0:function(){return Mp}};var nS={throwError:hD,Monad0:function(){return Mp}},OD={catchError:TD,MonadThrow0:function(){return nS}};var RD=h(v(Yf)(void 0));var ND=function(t){return di(function(r){return function(){var n=t(function(u){return r(Dt.create(u))()},function(u){return r(_t.create(u))()});return function(u){return di(function(a){return function(){return n(u,function(c){return a(Dt.create(c))()},function(c){return a(_t.create(c))()}),RD}})}}})};function rc(t){return Object.prototype.toString.call(t).slice(8,-1)}var BD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var HD=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Re=function(t){return t};var ec=isFinite;var wp=Math.floor;var Ai=function(t){return function(r){return t%r}};var nc=function(){return HD(_.create)(k.value)}(),pS=function(t){if(!ec(t))return 0;if(t>=Re(kn(ia)))return kn(ia);if(t<=Re(Rn(ia)))return Rn(ia);if(Yr)return ye(0)(nc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var Lp=function(t){return pS(wp(t))};var Pp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),GD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),dS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),AS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ku=K,kS=K;var ac=function(t){if(t instanceof Pp)return t.value0;if(t instanceof dS)return"Error at array index "+(dt(cn)(t.value0)+(": "+ac(t.value1)));if(t instanceof AS)return"Error at property "+(dt(Xe)(t.value0)+(": "+ac(t.value1)));if(t instanceof GD)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var Op=function(t){var r=wn(uD(t));return function(e){return r(yD(e))}};var Yu=function(t){return function(r){return function(e){if(rc(e)===r)return v(wa(t))(kS(e));if(Yr)return Op(t)(new GD(r,rc(e)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[r.constructor.name,e.constructor.name])}}};var Rp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Np=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Bp=function(){function t(){}return t.value=new t,t}(),Hp=function(){function t(){}return t.value=new t,t}(),Wp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),QD=function(t){return function(r){var e=function(b){return b===""?v(wa(Er))(oD):ln(function(){var T=Op(Er);return function(d){return T(Pp.create(d))}}())(v(wa(Er)))(cD(b))},n=function(){if(r.responseFormat instanceof sp)return Yu(Er)("ArrayBuffer");if(r.responseFormat instanceof mp)return Yu(Er)("Blob");if(r.responseFormat instanceof vp)return function(b){return yt(yp(ul)(Er))(Yu(Er)("Document")(b))(yt(yp(ul)(Er))(Yu(Er)("XMLDocument")(b))(Yu(Er)("HTMLDocument")(b)))};if(r.responseFormat instanceof fi)return Mi(kp(Er))(function(b){return r.responseFormat.value0(e(b))})(Yu(Er)("String"));if(r.responseFormat instanceof Dp)return Yu(Er)("String");if(r.responseFormat instanceof Wf)return h(r.responseFormat.value0(v(wa(Er))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(b){if(b instanceof Wv)return new _t(b.value0(Ku));if(b instanceof Uv)return new _t(Ku(b.value0));if(b instanceof qv)return new _t(Ku(b.value0));if(b instanceof zv)return new _t(Ku(b.value0));if(b instanceof Jv)return new _t(Ku(b.value0));if(b instanceof lp)return kc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(y(Mr)(Ku)(sD(b.value0)));if(b instanceof pp)return new _t(Ku(gp(b.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[b.constructor.name])},a=function(b){return function(T){return b instanceof _&&!xu(Ct)(We)($o(it(Nr))(_p)(b.value0))(T)?nf(T)(b.value0):T}},i=function(b){return a(y(Mr)(Hf.create)(fu(Fe)(Vv)(b)))(a(y(Mr)(Bf.create)(Qv(r.responseFormat)))(r.headers))},c=function(b){return{method:dD(r.method),url:r.url,headers:y(gr)(function(T){return{field:_p(T),value:Xv(T)}})(i(r.content)),content:b,responseType:Gv(r.responseFormat),username:yo(r.username),password:yo(r.password),withCredentials:r.withCredentials,timeout:ye(0)(y(Mr)(function(T){return T})(r.timeout))}},p=function(b){return Ve($p)(qf(OD)(ND(Nv(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",tD.create,c(b)))))(function(T){if(T instanceof _t){var d=aD(n(T.value0.body));if(d instanceof Dt)return new Dt(new Np(gD(d.value0),T.value0));if(d instanceof _t)return new _t({body:d.value0,headers:T.value0.headers,status:T.value0.status,statusText:T.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[d.constructor.name])}if(T instanceof Dt)return new Dt(function(){var o=ci(T.value0),m=o==="AffjaxTimeoutErrorMessageIdent";if(m)return Bp.value;var V=o==="AffjaxRequestFailedMessageIdent";return V?Hp.value:new Wp(T.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[T.constructor.name])})};if(r.content instanceof k)return p(yo(k.value));if(r.content instanceof _){var s=u(r.content.value0);if(s instanceof _t)return p(yo(new _(s.value0)));if(s instanceof Dt)return v(Yf)(new Dt(new Rp(s.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[s.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},Up=function(t){if(t instanceof Rp)return"There was a problem with the request content: "+t.value0;if(t instanceof Np)return"There was a problem with the response body: "+ac(t.value0);if(t instanceof Bp)return"There was a problem making the request: timeout";if(t instanceof Hp)return"There was a problem making the request: request failed";if(t instanceof Wp)return"There was a problem making the request: "+ci(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Zu=function(){return{method:new Dt(bi.value),url:"/",headers:[],content:k.value,username:k.value,password:k.value,withCredentials:!1,responseFormat:Yv,timeout:k.value}}();var qp={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var YD=QD(qp);var tb=function(){function t(){}return t.value=new t,t}(),zp=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),SS=function(){return rt.value}(),ZD="Click to get some random user data.",hS=function(t){return $r(h(function(){return t(tb.value)(),Fp(kt(xp)(YD({method:new Dt(bi.value),url:"https://randomuser.me/api/",headers:Zu.headers,content:Zu.content,username:Zu.username,password:Zu.password,withCredentials:Zu.withCredentials,responseFormat:Kv,timeout:Zu.timeout}))(function(e){if(e instanceof Dt)return bn(Zf)(t(new zp("GET /api response failed to decode: "+Up(e.value0))));if(e instanceof _t)return bn(Zf)(t(new zp(Cp(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},rb=function(t){return re({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(SS)({code:kr(Jr([zr([nr(up)])])),result:kr(fo(function(r){return function(e){var n=Oe(mn)(function(i){return i instanceof tb?new _(new Dt(void 0)):i instanceof zp?new _(new _t(i.value0)):k.value})(e),u=Oe(mn)(function(i){return i instanceof _t?new _(i.value0):k.value})(n),a=Oe(mn)(function(i){return i instanceof Dt?new _(void 0):k.value})(n);return br([br([we(v(Y)(At(Pr)(Fr.value)(hS(r))))([rn(yt(lr)(v(Y)(ZD))(yt(lr)(j(Dr)(a)("Loading..."))(j(Dr)(u)(ZD))))])]),Ff(yt(lr)(v(Y)(At(ql)(he.value)("display: none;")))(j(Dr)(vu(ri)(Wu(xe)(function(i){return function(c){return new X(i&&!1,function(){return i?new _(void 0):k.value}())}})(!0)(u)))(At(ql)(he.value)("display: block;"))))([Jr([zr([rn(yt(lr)(v(Y)(""))(u))])])])])}})),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(mo.value)))(De)})),At(te)(Qr.value)(t.slug+"pursx2/")])})};var Jp=function(){function t(){}return t.value=new t,t}(),eb={attr:function(t){return function(r){return f({key:"controls",value:$(r)})}}};var yi=function(){function t(){}return t.value=new t,t}();var oc={attr:function(t){return function(r){return f({key:"input",value:G(r)})}}};var ic=function(){function t(){}return t.value=new t,t}();var Vp={attr:function(t){return function(r){return f({key:"keyup",value:G(r)})}}};var jp=function(){function t(){}return t.value=new t,t}();var ab={attr:function(t){return function(r){return f({key:"src",value:$(r)})}}};var Xp=function(){function t(){}return t.value=new t,t}(),ob={attr:function(t){return function(r){return f({key:"width",value:$(r)})}}};var ib=function(t){return function(r){return new S(L("p")(t)(g()(I(g()(w(P)(r))))))}},Gp=ib(C(A));var Qp=function(t){return function(r){return new S(L("source")(t)(g()(I(g()(w(P)(r))))))}};var Kp=function(t){return function(r){return new S(L("video")(t)(g()(I(g()(w(P)(r))))))}};function fc(t){return function(){return t.value}}function Yp(t){return function(){return t.valueAsNumber}}function cb(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var a=n;a!=null;){var i=Object.getPrototypeOf(a),c=i.constructor.name;if(c===e)return r(n);if(c==="Object")return t;a=i}return t}var ft=function(t){return function(r){return cb(k.value,_.create,t,r)}};var cc=ft("HTMLInputElement");function Zp(t){return t.code}var t_=ft("KeyboardEvent");var lc=function(){var t=yt(lr)(v(Y)(At(xf)(Fa.value)("range"))),r=y(Dr)(function(e){return At(oc)(yi.value)($r(function(n){return Br(Ir)(Zr)(kt(Fe)(Rf(n))(cc))(xi(va)(Yp)(e))}))});return function(e){return t(r(e))}}();var zS=function(t){return y(Dr)(At(t)(Fr.value))},pc=function(t){var r=zS(t),e=v(Y);return function(n){return r(e(n))}};var JS=function(){return rt.value}(),sb=function(t){return re({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(JS)({code:kr(Jr([zr([nr(np)])])),result:kr(Tf()(ao({reflectSymbol:function(){return"buttonClicked"}})()()(ao({reflectSymbol:function(){return"sliderMoved"}})()()(df)()())()())(rt.value)(function(r){return function(e){return br([we(pc(co)(r.buttonClicked(void 0)))([nr("Click")]),br([rn(yt(lr)(v(Y)("Val: 0"))(y(Dr)(function(){var n=z(au)("Val: "),u=dt(cn);return function(a){return n(u(a))}}())(Hu(xe)(function(n){return function(u){return 1+n|0}})(-1)(yt(lr)(v(Y)(void 0))(e.buttonClicked)))))]),br([du(lc(v(Y)(r.sliderMoved)))([]),br([rn(yt(lr)(v(Y)("Val: 50.0"))(y(Dr)(function(){var n=z(au)("Val: "),u=dt(Lo);return function(a){return n(u(a))}}())(e.sliderMoved)))])])])}})),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(Do.value)))(De)})),At(te)(Qr.value)(t.slug+"effects/")])})};var jS=function(){function t(){}return t.value=new t,t}(),r_=function(){function t(){}return t.value=new t,t}(),mb=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),XS=function(){return rt.value}(),vb=function(t){return re({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(XS)({code:kr(Jr([zr([nr(ep)])])),result:kr(fo(function(r){return Ke(Qe)(function(e){return yt(lr)(v(Y)(jS.value))(e)})(function(e){return br([br([du(wr(Ct)(A)(v(Y))([At(Cv)(he.value)("border-style:solid;border-width: 1px;border-color: black;"),At(oc)(yi.value)($r(function(n){return Br(Ir)(Zr)(kt(Fe)(Rf(n))(cc))(xi(va)(fc)(function(u){return r(mb.create(u))}))})),At(Vp)(ic.value)($r(function(n){return Br(Ir)(Zr)(t_(n))(function(u){return nu(Ir)(Zp(u)==="Enter")(r(r_.value))})}))]))([]),we(yt(lr)(v(Y)(At($f)(he.value)("margin: 5px;")))(v(Y)(At(Pr)(Fr.value)($r(h(r(r_.value)))))))([nr("Add")])]),ju(y(Dr)(function(n){return ha(xe)(Vu(function(u){return function(a){return yt(lr)(v(Y)(Ju(br([Gu(v(Y)(At(lo)(he.value)("margin: 5px;")))([nr(n)]),we(yt(lr)(v(Y)(At($f)(he.value)("margin: 5px;")))(v(Y)(At(Pr)(Fr.value)($r(h(u(Av)))))))([nr("Prioritize")]),we(yt(lr)(v(Y)(At($f)(he.value)("margin: 5px;")))(v(Y)(At(Pr)(Fr.value)($r(h(u(Ul)))))))([nr("Delete")])]))))(a)}}))})(Oe(mn)(function(n){return n.value0?new _(n.value1):k.value})(Wu(xe)(function(n){return function(u){return u instanceof mb?new X(u.value0,new X(!1,u.value0)):u instanceof r_?new X(n,new X(!0,n)):new X("",new X(!1,""))}})("")(e))))])})})),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(Ao.value)))(De)})),At(te)(Qr.value)(t.slug+"portals/")])})};var QS=function(){return rt.value}(),Db=function(t){return re({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(QS)({code:kr(Jr([zr([nr(rp)])])),result:kr(br([nr("Hello world")])),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(_o.value)))(De)})),At(te)(Qr.value)(t.slug+"component/")])})};var YS=function(){return rt.value}(),bb=function(t){return re({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(ce()(Kr)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))(YS)({next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(po.value)))(De)})),At(te)(Qr.value)(t.slug+"hello/")])})};var th=function(){return rt.value}(),db=function(t){return re({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(th)({code:kr(Jr([zr([nr(tp)])])),result:kr(ju(Vu(function(r){return Ke(Qe)(yt(lr)(v(Y)(void 0)))(function(e){return v(Y)(Ju(yv()(y($a)(function(n){return Kp(wr(Ct)(A)(v(Y))([At(eb)(Jp.value)("true"),At(ob)(Xp.value)("250")]))([Qp(wr(Ct)(A)(v(Y))([At(ab)(jp.value)(n),At(Tv)(Fa.value)("video/mp4")]))([])])})(Il()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(Il()()("https://www.w3schools.com/jsref/movie.mp4")(ev))))(function(n){return function(u){var a=Cf()()()()()({reflectType:function(){return 1}})(rt.value)(n),i=Cf()()()()()({reflectType:function(){return 0}})(rt.value)(n),c=function(s){return Hu(xe)(function(b){return function(T){return!b}})(s)(e)},p=function(){var s=v(aa),b=Ef(function(T){return T?i:a});return function(T){return ii(s(b(c(T))))}}();return br([we(v(Y)(At(Pr)(Fr.value)($r(h(r(void 0))))))([nr("Switch videos")]),br([p(!0),p(!1)])])}})))})}))),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(ko.value)))(De)})),At(te)(Qr.value)(t.slug+"ssr/")])})};var eh=function(){return rt.value}(),nh=function(){return rt.value}(),Ab=function(t){return re({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(eh)({code:kr(Jr([zr([nr(Zl)])])),result:kr(Iv({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(Kr)(nh)),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(vo.value)))(De)})),At(te)(Qr.value)(t.slug+"events1/")])})};var ah=function(){return rt.value}(),oh=function(){return rt.value}(),kb=function(t){return Kl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(yr()(ce()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}}))(rt.value)(ah)({code:kr(Jr([zr([nr(Yl)])])),result:kr(ju(Vu(function(r){return function(e){return v(Y)(Ju(re({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(ce()(yr()(Kr)({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}}))(oh)({myli:v(Y)(At(gv)(he.value)("background-color:rgb(200,240,210);")),somethingNew:kr(we(v(Y)(At(co)(Fr.value)(r(new _(void 0)))))([rn(yt(lr)(j(Dr)(vu(ri)(e))("Thanks for clicking me!"))(v(Y)("I was dynamically inserted")))]))})))}}))),next:wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(r){return Zt(vr)(Zt(vr)(ee(r))(t.dpage(bo.value)))(De)})),At(te)(Qr.value)(t.slug+"events2/")])})};var e_=()=>document.documentElement.querySelector("[data-deku-root]");var n_=t=>()=>{t.hydrating=!0},u_=t=>()=>{t.hydrating=!1},yb=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(a=>()=>t(r.dynFamily)(i=>()=>{for(var c=0,p=0,s;p<n.childNodes.length;){if(n.childNodes[p].nodeType===8&&n.childNodes[p].nodeValue==="%-%"+i){p+=1;break}p++}let b=d=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[d]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[d])):n.insertBefore(e.units[r.id].main,n.childNodes[d])};for(;p<n.childNodes.length;){var T;if((T=n.childNodes[p].$dekuId)&&t(e.units[T].dynFamily)(o=>()=>t(e.units[T].pos)(V=>()=>i===o&&a<=V?(b(p),!0):!1)())())return!0;if(c===a||n.childNodes[p].nodeType===8&&n.childNodes[p].nodeValue==="%-%"+i+"%-%")return b(p),!0;n.childNodes[p].nodeType===8&&n.childNodes[p].nodeValue.substring(0,3)==="%-%"&&!s&&(s=n.childNodes[p].nodeValue+"%-%"),s||c++,n.childNodes[p].nodeType===8&&n.childNodes[p].nodeValue===s&&(s=void 0,c++),p++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(i=>()=>(e.units[r.id].main?e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[i].endBeacon):(e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon),e.units[i].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(i=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[i].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[i].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[i].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},a_=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),a;a=u.nextNode();)a.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[a.nodeValue.substring(3)]=a)}e(document.documentElement)},gb=t=>r=>e=>n=>()=>{var u,a,i=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(i),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(a=n.allBeacons[`${e.id}%-%`])?(n.units[i]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:a},u.$dekuId=i,a.$dekuId=i,!0):!1)()){let p=document.createComment(`%-%${e.id}`),s=document.createComment(`%-%${e.id}%-%`);n.units[i]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:p,endBeacon:s},p.$dekuId=i,s.$dekuId=i}};var Cb=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),Sb=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),hb=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),Tb=t=>r=>e=>n=>()=>{var u,a=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(a),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${a}"]`))?(n.units[a]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=a,!0):!1)()){let c=document.createElement(e.tag);n.units[a]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:c},c.$dekuId=a}},Eb=t=>r=>e=>n=>u=>()=>{var a=n.id,i;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(a),!t(n.parent)(p=>()=>{if(u.hydrating&&r&&(i=document.documentElement.querySelector(`[data-deku-ssr="${p}"]`))){for(var s=0;s<i.childNodes.length;s++){let o=a.split("@-@");if(i.childNodes[s].nodeType===8&&i.childNodes[s].nodeValue===o[0]){s=s-1;var b=s===-1,T=s>=0&&i.childNodes[s].nodeType===8;b&&i.prepend(document.createTextNode("")),T&&i.insertBefore(document.createTextNode(""),i.childNodes[s+1]);break}}let d=i.childNodes[s];return u.units[a]={main:d,pos:n.pos,parent:n.parent,scope:n.scope},d.$dekuId=a,!0}return!1})()){let p=document.createTextNode("");u.units[a]={main:p,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},p.$dekuId=a}};function o_(){return{units:{},scopes:{},allBeacons:{}}}var $b=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},Fb=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var a=i=>u(i)();e.units[n].main.addEventListener(r.key,a),e.units[n].listeners[r.key]=a}}},Mb=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},xb=t=>r=>e=>n=>u=>()=>{var a,i,c=n.id,p=n.html,s=n.verb,b=n.cache,T=n.parent,d=n.scope,o=n.pxScope;let m=t(n.parent)(()=>()=>u.hydrating&&r&&(a=document.documentElement.querySelector(`[data-deku-ssr="${c}"]`))?(u.units[c]={listeners:{},pos:n.pos,scope:d,parent:T,main:a},a.$dekuId=c,!0):!1)();if(!m){let et=Object.entries(b);for(var V=0;V<et.length;V++){let nt=et[V][0];et[V][1]===!0?p=p.replace(s+nt+s,'data-deku-attr-internal="'+nt+'"'):p=p.replace(s+nt+s,'<span style="display:contents;" data-deku-elt-internal="'+nt+'"></span>')}i=document.createElement("div"),i.innerHTML=p.trim(),u.units[c]={listeners:{},pos:n.pos,scope:d,parent:T,main:i.firstChild},i.firstChild.$dekuId=c}u.scopes[d]||(u.scopes[d]=[]),u.scopes[d].push(c),i||(i=a),i.querySelectorAll("[data-deku-attr-internal]").forEach(function(et){var nt=et.getAttribute("data-deku-attr-internal");let at=nt+"@!%"+o;u.units[at]={listeners:{},main:et,scope:d},u.scopes[d].push(at)}),i.querySelectorAll("[data-deku-elt-internal]").forEach(function(et){var nt=et.getAttribute("data-deku-elt-internal");let at=nt+"@!%"+o;u.units[nt+"@!%"+o]={listeners:{},main:et,scope:d},u.scopes[d].push(at)}),m||u.units[c].main.remove()},wb=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},i_=t=>r=>e=>n=>()=>{let u=(m,V,et)=>{if(n.units[m].startBeacon){var nt=n.units[m].startBeacon,at=nt.nextSibling;for(n.units[V].main.insertBefore(nt,et),nt=at;nt&&nt!==n.units[m].endBeacon;)at=nt.nextSibling,n.units[V].main.insertBefore(nt,et),nt=at}else n.units[V].main.insertBefore(n.units[m].main,et)},a=[];a.push(e);for(var i=0;i<a.length;i++){let m=a[i],V=m.id,et=m.parent;n.units[V].containingScope=m.scope;var c=void 0;r(m.pos)(at=>()=>(c=at,!0))(),c===void 0&&(c=Number.MAX_VALUE);let nt=n.units[et].main.childNodes;for(var p=0,s=!1,b=0;p<nt.length;){var T;if(T=nt[p].$dekuId){if(r(m.dynFamily)(Kt=>()=>s?!1:n.units[T].endBeacon===nt[p]&&Kt===T?(n.units[V].pos=t(b),u(V,et,nt[p]),!0):!1)()){s=!0;break}if(n.units[T].dynFamily!==n.units[V].dynFamily){p++;continue}if(s){p++;continue}b===c?(u(V,et,nt[p]),b++,s=!0):n.units[T].endBeacon!==nt[p]&&(n.units[T].pos=t(b),b++)}p++}if(s)return;if(n.units[V].main)n.units[et].main.appendChild(n.units[V].main);else{var d=n.units[V].startBeacon,o=d.nextSibling;for(n.units[et].main.appendChild(d),d=o;d&&d!==n.units[V].endBeacon;)o=d.nextSibling,n.units[et].main.appendChild(d),d=o}}},Ib=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let a=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(a.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,a.appendChild(n),n=u}}},f_=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},Lb=f_;var Pb=function(t){return t};var sh=1,c_=2147483647,mh=function(){return c_-1|0}(),l_=function(t){var r=function(e){return function(n){return function(u){var a=n-e|0,i=Po(Ii)(u)(a),c=i<e;return c?i+n|0:i}}};return r(sh)(mh)(t)};var vh=0,Dh=48271,Ob=function(t){return function(r){return He()(nc(Ai(Re(Dh)*Re(r)+Re(t))(Re(c_))))}},Rb=Ob(vh);var Ch=function(){function t(i){this.fn=i}var r={},e=function(i,c){this.head=i,this.tail=c};function n(i){return new e(i,r)}function u(i){return function(c){return new e(i,c)}}function a(i){for(var c=[],p=i;p!==r;)c.push(p.head),p=p.tail;return c}return function(i){return function(c){return function(p){var s=function(T,d){return i(c(u)(p(T)))(d)},b=function(T,d,o){if(d===0)return T;var m=o[d-1];return new t(function(){var V=b(s(m,T),d-1,o);return V})};return function(T){for(var d=c(n)(p(T[T.length-1])),o=b(d,T.length-1,T);o instanceof t;)o=o.fn();return c(a)(o)}}}}}();var ho=function(t){return{map:function(r){return function(e){return function(n){return y(t)(function(u){return new X(r(u.value0),u.value1)})(e(n))}}}}};var s_=function(t){return{Applicative0:function(){return Su(t)},Bind1:function(){return _c(t)}}},_c=function(t){return{bind:function(r){return function(e){return function(n){return kt(t.Bind1())(r(n))(function(u){var a=e(u.value0);return a(u.value1)})}}},Apply0:function(){return sc(t)}}},sc=function(t){return{apply:Ue(s_(t)),Functor0:function(){return ho(t.Bind1().Apply0().Functor0())}}},Su=function(t){return{pure:function(r){return function(e){return v(t.Applicative0())(new X(r,e))}},Apply0:function(){return sc(t)}}};var gi=function(t){return{state:function(r){var e=v(t.Applicative0());return function(n){return e(r(n))}},Monad0:function(){return s_(t)}}};var Jb=function(t){return function(r){var e=t(r);return e.value1}},Vb=function(t){return function(r){var e=t(r);return e.value0}};var Bh=function(t){return t};var Hh=function(){var t=function(r){return new X(Pb(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=Rb(r.newSeed),e}())};return tu(gi(Er))(t)}();var Ci=ho(Wn);var v_=function(t){return Vb(Bh(t))};var Gb=sc(Er),Xb=function(t){return function(r){var e=Re(r),n=Re(t),u=function(c){return n+Ai(c)(e-n+1)},a=y(Ci)(Re)(Hh),i=jt(Gb)(y(Ci)(Ae(wo))(a))(y(Ci)(fn(wo)(2))(a));return y(Ci)(function(c){return Lp(u(c))})(i)}},Qb=function(t){return function(r){var e=t<=r;return e?Xb(t)(r):Xb(r)(t)}};var D_=function(t){return t.arbitrary};var b_=function(){return{arbitrary:Qb(-1e6)(1e6)}}();var nn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),un=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ne=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Te=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),dn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),eu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),In=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),d_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),A_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),k_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),y_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),g_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Je=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Uh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new In(t))])})(r))}},qh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new eu(t))])})(r))}},zh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Je(new d_(t))])})(r))}},Jh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Je(new y_(t))])})(r))}},Vh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new un(t))])})(r))}},jh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Je(new mc(t))])})(r))}},Xh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new dn(t))])})(r))}},Gh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new nn(t))])})(r))}},Qh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new hu(new Ne(t)),new hu(new Te(t))])})(r))}},Kh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Je(new A_(t))])})(r))}},Yh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Je(new k_(t))])})(r))}},Zh=function(t){return function(r){return mt(Jt)(qr(function(e){return z(Yt)(e)([new Je(new g_(t))])})(r))}},Yb=function(t){return{ids:function(){var e=ie(t)(),n=dt(cn)(v_(D_(b_))({newSeed:l_(e),size:5}));return mt(Jt)(qr(Ae(ou)(1))(t))(),n},makeElement:Gh,attributeParent:function(r){return function(e){return v(er)(void 0)}},makeRoot:jh,makeText:Vh,makePursx:Xh,setProp:qh,makeDynBeacon:Qh,setCb:function(r){return function(e){return v(er)(void 0)}},setText:Uh,sendToPos:zh,deleteFromCache:Zh,removeDynBeacon:Jh,giveNewParent:Kh,disconnectElement:Yh}},Ia=function(t){return function(r){return t instanceof _?r(t.value0):v(Ir)(!1)}},tT=function(t){return function(r){return function(){var n=hb(t.id)(r)(),u=Sb(t.id)(r)(),a=Cb(t.id)(r)(),i={scope:n,parent:u,dynFamily:a,id:t.id,pos:new _(t.pos),ez:!1};return i_(_.create)(Ia)(i)(r)()}}},Zb=function(t){return{ids:function(){var e=ie(t)(),n=dt(cn)(v_(D_(b_))({newSeed:l_(e),size:5}));return mt(Jt)(qr(Ae(ou)(1))(t))(),n},makeElement:Tb(Ia)(!0),makeDynBeacon:gb(Ia)(!0),attributeParent:yb(Ia),makeRoot:wb,makeText:Eb(Ia)(!0)(or(void 0)),makePursx:xb(Ia)(!0)(or(void 0)),setProp:$b(!0),setCb:Fb(!0),setText:Mb,sendToPos:tT,deleteFromCache:f_,removeDynBeacon:Lb,giveNewParent:i_(_.create)(Ia),disconnectElement:Ib}};var C_=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),S_=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let a=r,i=Object.entries(n);for(var c=0;c<i.length;c++){let T=i[c][0];i[c][1]===!0?a=a.replace(u+T+u,'data-deku-attr-internal="'+T+'" data-deku-ssr="'+T+"@!%"+e+'"'):a=a.replace(u+T+u,'<span style="display:contents;" data-deku-elt-internal="'+T+'" data-deku-ssr="'+T+"@!%"+e+'"></span>')}let p=a.indexOf(">"),s=a.indexOf("/>"),b=s==p-1?s:p;return a.slice(0,b)+' data-deku-ssr="'+t+'" '+a.slice(b)};var eT=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}},ta=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),rd=function(t){var r=!1,e;function n(u){if(u.value1 instanceof St)return r=!0,new _(new X(u.value1.value0,new ta(u.value0,u.value1.value1)));if(u.value0 instanceof ir&&u.value1 instanceof ir)return r=!0,k.value;if(u.value1 instanceof ir){t=new ta(ir.value,ff(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Si=function(t){var r=!1,e;function n(u){if(u.value0 instanceof ir&&u.value1 instanceof ir)return r=!0,k.value;if(u.value0 instanceof ir){t=new ta(ff(u.value1),ir.value);return}if(u.value0 instanceof St)return r=!0,new _(new X(u.value0.value0,new ta(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Or=function(t){return function(r){return new ta(t.value0,new St(r,t.value1))}};var hi={map:function(t){return function(r){return new ta(y(no)(t)(r.value0),y(no)(t)(r.value1))}}},La={foldMap:function(t){return xc(La)(t)},foldr:function(t){return wc(La)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,a=!1,i;function c(p,s){var b=Si(s);if(b instanceof _){u=t(p)(b.value0.value0),n=b.value0.value1;return}if(b instanceof k)return a=!0,p;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[b.constructor.name])}for(;!a;)i=c(u,n);return i}};return r}},Tu={append:rr(La)(Or)},Ie=function(){return new ta(ir.value,ir.value)}(),ed={mempty:Ie,Semigroup0:function(){return Tu}},nd=Or(Ie),ud=function(t){return function(r){return Lr(t)(ed)(nd)(r)}},h_={traverse:function(t){return function(r){var e=y(t.Apply0().Functor0())(rr(La)(Or)(Ie)),n=rr(La)(function(u){var a=de(t.Apply0())(Or)(u);return function(i){return a(r(i))}})(v(t)(Ie));return function(u){return e(n(u))}}},sequence:function(t){return jc(h_)(t)},Functor0:function(){return hi},Foldable1:function(){return La}};var ad=function(t){return function(r){return new ta(new St(t,r.value0),r.value1)}},nT={Applicative0:function(){return T_},Bind1:function(){return uT}},uT={bind:hr(Lr(La)(ed)),Apply0:function(){return od(0)}},T_={pure:nd,Apply0:function(){return od(0)}},od=eT("applyCatQueue","Data.CatQueue",function(){return{apply:Ue(nT),Functor0:function(){return hi}}});var oT=function(t,r,e){var n=0,u;return function(a){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+a+")",r,a);return n=1,u=e(),n=2,u}};var iT=function(t){var r=function(e){return function(n){return function(u){return function(a){if(a instanceof k)return{acc:e,rest:[]};if(a instanceof _){if(a.value0.head instanceof Ne){var i=r([])(new _({id:a.value0.head.value0.id,e:a.value0.head.value0}))(a.value0.tail);return r(z(Yt)(e)(i.acc))(n)(i.rest)}if(a.value0.head instanceof Te){if(n instanceof _)return{acc:[{pos:n.value0.e.pos,elt:new _t({o:n.value0.e,a:e,c:a.value0.head.value0})}],rest:a.value0.tail};if(n instanceof k)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var c=function(){if(a.value0.head instanceof nn||a.value0.head instanceof un||a.value0.head instanceof dn||a.value0.head instanceof Ne||a.value0.head instanceof Te)return a.value0.head.value0.pos;if(a.value0.head instanceof eu)return k.value;if(a.value0.head instanceof In)return k.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[a.value0.head.constructor.name])}();return r(z(Yt)(e)([{pos:c,elt:new Dt(a.value0.head)}]))(n)(a.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[a.constructor.name])}(Kc(u))}}};return r([])(k.value)(t).acc},id=oT("sortSortableDyns","Deku.SSR",function(){var t=y(gr)(function(e){if(e.elt instanceof Dt)return e;if(e.elt instanceof _t)return{pos:e.pos,elt:new _t({o:e.elt.value0.o,c:e.elt.value0.c,a:id(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=ef($o(Lt(fa(ke)))(function(){var e=Ar();return function(n){return function(u){return u.pos}(e(n))}}()));return function(e){return t(r(e))}}),fT=id(39),fd=function(t){return wi(Wa)(Ve(gr)(t)(function(){var r=Ar();return function(e){return function(n){if(n instanceof Dt)return[n.value0];if(n instanceof _t)return z(Yt)([new Ne(n.value0.o)])(z(Yt)(fd(n.value0.a))([new Te(n.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[n.constructor.name])}(function(n){return n.elt}(r(e)))}}()))},cd=function(t){return function(r){var e=function(m){return function(V){return mt(ho(Wn))(Co(gi(Er))(function(et){var nt={};for(var at in et)({}).hasOwnProperty.call(et,at)&&(nt[at]=et[at]);return nt.idToActions=Gn(se)(function(Kt){if(Kt instanceof _)return new _(z(Yt)(Kt.value0)([V]));if(Kt instanceof k)return new _([V]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Kt.constructor.name])})(m)(et.idToActions),nt}))}},n=ye("deku-root")(jo(function(m){return m instanceof Je&&m.value0 instanceof mc?new _(m.value0.value0.id):k.value})(r)),u=function(m){return function(V){return function(et){return Ha(Ua)(_c(Er))(mt(ho(Wn))(Co(gi(Er))(function(nt){var at={};for(var Kt in nt)({}).hasOwnProperty.call(nt,Kt)&&(at[Kt]=nt[Kt]);return at.parentToChild=Gn(se)(function(fr){if(fr instanceof _)return new _(z(Yt)(fr.value0)([V]));if(fr instanceof k)return new _([V]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[fr.constructor.name])})(m)(nt.parentToChild),at})))(function(){return e(V)(et)})}}},a=function(m){var V=function(ot){return function(q){return function(x){if(x instanceof nn){var ct=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new _(x.value0.id));return ct?new nn({id:x.value0.id,scope:x.value0.scope,parent:x.value0.parent,tag:x.value0.tag,pos:new _(q),dynFamily:x.value0.dynFamily}):x}if(x instanceof un){var vt=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new _(x.value0.id));return vt?new un({id:x.value0.id,pos:new _(q),scope:x.value0.scope,parent:x.value0.parent,dynFamily:x.value0.dynFamily}):x}if(x instanceof dn){var Ee=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new _(x.value0.id));return Ee?new dn({id:x.value0.id,parent:x.value0.parent,html:x.value0.html,scope:x.value0.scope,pos:new _(q),pxScope:x.value0.pxScope,verb:x.value0.verb,cache:x.value0.cache,dynFamily:x.value0.dynFamily}):x}if(x instanceof Ne){var Vr=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new _(x.value0.id));return Vr?new Ne({id:x.value0.id,parent:x.value0.parent,pos:new _(q),scope:x.value0.scope,dynFamily:x.value0.dynFamily}):x}if(x instanceof Te){var Ln=x.value0.id===ot||it(Xr(Nr))(x.value0.dynFamily)(new _(x.value0.id));return Ln?new Te({id:x.value0.id,parent:x.value0.parent,pos:new _(q),scope:x.value0.scope,dynFamily:x.value0.dynFamily}):x}if(x instanceof In||x instanceof eu)return x;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[x.constructor.name])}}},et=function(ot){return function(q){if(q instanceof nn){var x=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new _(q.value0.id));return x?new nn({id:q.value0.id,scope:q.value0.scope,parent:k.value,tag:q.value0.tag,pos:q.value0.pos,dynFamily:q.value0.dynFamily}):q}if(q instanceof un){var ct=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new _(q.value0.id));return ct?new un({id:q.value0.id,pos:q.value0.pos,scope:q.value0.scope,parent:k.value,dynFamily:q.value0.dynFamily}):q}if(q instanceof dn){var vt=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new _(q.value0.id));return vt?new dn({id:q.value0.id,parent:k.value,html:q.value0.html,scope:q.value0.scope,pos:q.value0.pos,pxScope:q.value0.pxScope,verb:q.value0.verb,cache:q.value0.cache,dynFamily:q.value0.dynFamily}):q}if(q instanceof Ne){var Ee=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new _(q.value0.id));return Ee?new Ne({id:q.value0.id,parent:k.value,pos:q.value0.pos,scope:q.value0.scope,dynFamily:q.value0.dynFamily}):q}if(q instanceof Te){var Vr=q.value0.id===ot||it(Xr(Nr))(q.value0.dynFamily)(new _(q.value0.id));return Vr?new Te({id:q.value0.id,parent:k.value,pos:q.value0.pos,scope:q.value0.scope,dynFamily:q.value0.dynFamily}):q}if(q instanceof In||q instanceof eu)return q;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[q.constructor.name])}},nt=function(ot){return function(q){return function(x){return function(ct){return function(vt){if(vt instanceof _&&vt.value0.value0 instanceof Ne){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new _(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Ie)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof _&&vt.value0.value0 instanceof Te){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new _(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Ie)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof _&&vt.value0.value0 instanceof un){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new _(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Ie)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof _&&vt.value0.value0 instanceof dn){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new _(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Ie)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof _&&vt.value0.value0 instanceof nn){if(it(Xr(Nr))(vt.value0.value0.value0.dynFamily)(new _(x.id)))return nt(Or(z(Tu)(ot)(q))(vt.value0.value0))(Ie)(x)(vt.value0.value1);if(Yr)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1)}if(vt instanceof _&&vt.value0.value0 instanceof eu)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1);if(vt instanceof _&&vt.value0.value0 instanceof In)return nt(ot)(Or(q)(vt.value0.value0))(x)(vt.value0.value1);if(vt instanceof k)return z(Tu)(ot)(z(Tu)(v(T_)(new Te({id:x.id+"%-%",parent:x.parent,pos:x.pos,scope:x.scope,dynFamily:x.dynFamily})))(q));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[vt.constructor.name])}(Si(ct))}}}},at=function(ot){return function(q){return function(x){if(x instanceof _&&x.value0.value0 instanceof Te)return at(nt(Ie)(Ie)(x.value0.value0.value0)(ot))(x.value0.value1);if(x instanceof _)return at(ad(x.value0.value0)(ot))(x.value0.value1);if(x instanceof k)return ot;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[x.constructor.name])}(rd(q))}},Kt=function(ot){return function(q){return function(x){return function(ct){if(ct instanceof _&&ct.value0.value0 instanceof nn){var vt=ct.value0.value0.value0.id===q;return vt?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof _&&ct.value0.value0 instanceof un){var Ee=ct.value0.value0.value0.id===q;return Ee?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof _&&ct.value0.value0 instanceof dn){var Vr=ct.value0.value0.value0.id===q;return Vr?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof _&&ct.value0.value0 instanceof Ne){var Ln=ct.value0.value0.value0.id===q;return Ln?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof _&&ct.value0.value0 instanceof Te){var Eu=ct.value0.value0.value0.id===q;return Eu?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof _&&ct.value0.value0 instanceof eu){var Pa=ct.value0.value0.value0.id===q;return Pa?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof _&&ct.value0.value0 instanceof In){var Le=ct.value0.value0.value0.id===q;return Le?Kt(ot)(q)(ct.value0.value1):Kt(Or(ot)(ct.value0.value0))(q)(ct.value0.value1)}if(ct instanceof k)return ot;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[ct.constructor.name])}(Si(x))}}},fr=function(ot){return function(q){return function(x){if(x instanceof _&&x.value0.value0 instanceof hu)return fr(Or(ot)(x.value0.value0.value0))(x.value0.value1);if(x instanceof _&&x.value0.value0 instanceof Je&&x.value0.value0.value0 instanceof d_)return fr(y(hi)(V(x.value0.value0.value0.value0.id)(x.value0.value0.value0.value0.pos))(ot))(x.value0.value1);if(x instanceof _&&x.value0.value0 instanceof Je&&x.value0.value0.value0 instanceof mc||x instanceof _&&x.value0.value0 instanceof Je&&x.value0.value0.value0 instanceof A_)return fr(ot)(x.value0.value1);if(x instanceof _&&x.value0.value0 instanceof Je&&x.value0.value0.value0 instanceof k_)return fr(y(hi)(et(x.value0.value0.value0.value0.id))(ot))(x.value0.value1);if(x instanceof _&&x.value0.value0 instanceof Je&&x.value0.value0.value0 instanceof y_)return fr(Kt(Ie)(x.value0.value0.value0.value0.id)(ot))(x.value0.value1);if(x instanceof _&&x.value0.value0 instanceof Je&&x.value0.value0.value0 instanceof g_)return fr(Kt(Ie)(x.value0.value0.value0.value0.id)(ot))(x.value0.value1);if(x instanceof k)return ot;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[x.constructor.name])}(Si(q))}},lt=ud(Ct)(m),ur=fr(Ie)(lt),an=at(Ie)(ur);return an},i=a(r),c=function(m){return{parentToChild:Ve(Bu)(m.parentToChild)(function(){var V=y(gr)(function(at){if(at instanceof nn||at instanceof un||at instanceof dn||at instanceof Ne||at instanceof Te||at instanceof eu||at instanceof In)return at.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[at.constructor.name])}),et=vu(sf),nt=y(gr)(function(at){return kt(Fe)(Ca(se)(at)(m.idToActions))(Zc)});return function(at){return V(fd(fT(iT(et(nt(at))))))}}()),idToActions:m.idToActions}}(Jb(qe(h_)(Su(Er))(function(m){if(m instanceof nn)return Br(Su(Er))(Zr)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof un)return Br(Su(Er))(Zr)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof dn)return Br(Su(Er))(Zr)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof Ne)return Br(Su(Er))(Zr)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof Te)return Br(Su(Er))(Zr)(m.value0.parent)(function(V){return u(V)(m.value0.id)(m)});if(m instanceof eu||m instanceof In)return e(m.value0.id)(m);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[m.constructor.name])})(i))({parentToChild:Xn,idToActions:Xn})),p=function(m){return Ba(rl(function(V){return V instanceof nn||V instanceof un||V instanceof Ne||V instanceof Te})(m))},s=function(m){return ye("")(jo(function(V){return V instanceof nn?new _(V.value0.tag):k.value})(m))},b=function(m){return cu(Ct)(Oo)(" ")(Oe(Tm)(function(V){return V instanceof eu?new _(V.value0.key+('="'+(V.value0.value+'"'))):k.value})(m))},T=function(m){return or("")(function(V){var et=function(lt){return ye("")(jo(function(ur){return ur instanceof In?new _(C_(ur.value0.text)+("<!--"+(m+"-->"))):k.value})(V))},nt=function(lt){return"<!--%-%"+(m+"-->")},at=function(lt){var ur=s(V),an=b(V);return"<"+(ur+(" "+(an+(' data-deku-ssr="'+(m+('">'+(d(m)+("</"+(ur+">")))))))))},Kt=function(lt){return"<!--%-%"+(m+"-->")},fr=wu(V)(0);return fr instanceof _&&fr.value0 instanceof In?et(void 0):fr instanceof _&&fr.value0 instanceof un?et(void 0):fr instanceof _&&fr.value0 instanceof Ne?nt(void 0):fr instanceof _&&fr.value0 instanceof Te?Kt(void 0):fr instanceof _&&fr.value0 instanceof dn?S_(fr.value0.value0):at(void 0)})(Ca(se)(m)(c.idToActions))},d=function(m){var V=ye([])(Ca(se)(m)(c.parentToChild));return Lr(Ct)(Oo)(T)(V)},o=function(m){return rr(ve)(function(V){return function(et){var nt=p(et);if(nt)return V;if(!nt)return Qf("data-deku-ssr")(b(et)+" data-deku-ssr")(V);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[nt.constructor.name])}})(d(m))(c.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(o(n)+("</"+(t+">")))))))}};var ld=function(t){return function(r){return function(e){return vn({doLogic:function(n){return function(u){return function(a){return u.sendToPos({id:a,pos:n})}}},ids:function(){var n=Ar();return function(u){return function(a){return a.ids}(n(u))}}(),disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:it(qu)})}},toElt:function(n){return n}})(t)(r)(g()(e))}}},JT=function(t){return function(){var e=o_();a_(e)();var n=Ve(H)(pn(Tn)(ge(0)))(Zb)();n_(e)();var u=e_(),a=kl(yt(lr)(v(Y)(Ar()(n).makeRoot({id:"deku-root",root:u})))(ld({parent:new _("deku-root"),scope:new Uu("rootScope"),raiseId:function(i){return v(er)(void 0)},ez:!0,pos:k.value,dynFamily:k.value})(n)(t)))(function(i){return i(e)})();return u_(e)(),a}},pd=function(t){return mt(H)(JT(t))},VT=function(t){return function(r){return function(e){return y(Jt)(function(){var n=cd(t);return function(u){return function(a){return r.head+a}(function(a){return a+r.tail}(n(u)))}}())(pn(xs)(function(){var u=ge(0)(),a=ge([])(),i=Yb(u);return mt(Jt)(Vm(ld({parent:new _("deku-root"),scope:new Uu("rootScope"),raiseId:function(c){return v(er)(void 0)},ez:!0,pos:k.value,dynFamily:k.value})(i)(e))(function(c){return c(a)}))(),ie(a)()}))}}},_d=VT("body");var jT=function(){return rt.value}(),md=function(){return Tf()(ao({reflectSymbol:function(){return"buttonClicked"}})()()(ao({reflectSymbol:function(){return"sliderMoved"}})()()(df)()())()())(rt.value)(function(t){return function(r){return br([Gp([nr(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),we(pc(co)(t.buttonClicked(void 0)))([nr("Click")]),br([rn(yt(lr)(v(Y)("Val: 0"))(y(Dr)(function(){var e=z(au)("Val: "),n=dt(cn);return function(u){return e(n(u))}}())(Hu(xe)(function(e){return function(n){return 1+e|0}})(-1)(yt(lr)(v(Y)(void 0))(r.buttonClicked)))))]),br([du(lc(v(Y)(t.sliderMoved)))([]),br([rn(yt(lr)(v(Y)("Val: 50"))(y(Dr)(function(){var e=z(au)("Val: "),n=dt(Lo);return function(u){return e(n(u))}}())(r.sliderMoved)))])])])}})}(),vd=function(t){return re({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(yr()(yr()(yr()(yr()(yr()(Kr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}}))(jT)({code2:kr(Jr([zr([nr(fp)])])),code1:kr(Jr([zr([nr(ip)])])),code0:kr(Jr([zr([nr(op)])])),result:kr(md),codegen:kr(Jr([zr([rn(Jm(function(r){return Zt(Ya)(kt(lu)(_d({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(md))(r))(v(er)(v(er)(void 0)))}))])]))})};var Dd=function(t){var r=function(n){if(n instanceof If)return bb;if(n instanceof po)return Db;if(n instanceof _o)return Rv;if(n instanceof so)return Ab;if(n instanceof vo)return sb;if(n instanceof Do)return rb;if(n instanceof mo)return kb;if(n instanceof bo)return vb;if(n instanceof Ao)return db;if(n instanceof ko)return vd;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 95, column 3 - line 95, column 25): "+[n.constructor.name])},e=function(n){return function(u){return r(u)({dpage:n,slug:t.slug})}};return fo(function(n){return Ke(Qe)(function(u){return yt(lr)(v(Y)(t.startsWith))(u)})(function(u){return br([br(y(gr)(function(a){return ii([oi(wr(Ct)(A)(v(Y))([At(Pr)(Fr.value)($r(function(i){return Zt(vr)(ee(i))(n(a.value0))})),At(Sv)(he.value)("cursor:pointer;"),At(te)(Qr.value)(t.slug+a.value1.value1.value0)]))([nr(a.value1.value0)]),Gu(v(Y)(At(lo)(he.value)(function(){return a.value1.value1.value1?"":"display:none;"}())))([nr(" | ")])])})([new X(If.value,new X("Home",new X("",!0))),new X(po.value,new X("Hello world",new X("hello/",!0))),new X(_o.value,new X("Component",new X("simple/",!0))),new X(so.value,new X("Pursx 1",new X("pursx1/",!0))),new X(vo.value,new X("Events 1",new X("events1/",!0))),new X(Do.value,new X("Effects",new X("effects/",!0))),new X(mo.value,new X("Pursx 2",new X("pursx2/",!0))),new X(bo.value,new X("Events 2",new X("events2/",!0))),new X(Ao.value,new X("Portals",new X("portals/",!0))),new X(ko.value,new X("SSR",new X("ssr/",!1)))])),Ef(e(n))(u)])})})};var lAt=function(t){return function(){var e=or(li(go("could not ingest options: "+dt(Y_()()(dc({reflectSymbol:function(){return"slug"}})(dc({reflectSymbol:function(){return"startsWith"}})(Q_)(Xe))(Xe)))(t))))(v(Ir))(wv(t.startsWith))();return pd(Dd({slug:t.slug,startsWith:e}))()}};export{lAt as main};
