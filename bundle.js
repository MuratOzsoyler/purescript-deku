var gv=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),o=0,p=0;p<e;p++)for(var l=t[p],s=0;s<n;s++)u[o++]=l(r[s]);return u}};var ra={compose:function(t){return function(r){return function(e){return t(r(e))}}}},ea=function(t){return t.compose},Oc=function(t){var r=ea(t);return function(e){return function(n){return r(n)(e)}}};var Nt=function(t){return t.identity},Bt={identity:function(t){return t},Semigroupoid0:function(){return ra}};var Wr=!0;var Ti=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},sr=function(t){return function(r){return function(e){return t(e)(r)}}},R=function(t){return function(r){return t}};var xi=function(t){return function(r){return r(t)}};var Sv=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var tt=function(){function t(){}return t.value=new t,t}();var O=function(t){return t.map},Ue=function(t){var r=O(t);return function(e){return function(n){return r(n)(e)}}},or=function(t){return O(t)(R(void 0))},J=function(t){var r=O(t);return function(e){return function(n){return r(R(n))(e)}}};var na={map:ea(ra)},br={map:Sv};var $y=Nt(Bt);var Ei={apply:gv,Functor0:function(){return br}},jt=function(t){return t.apply};var pr=function(t){var r=jt(t),e=O(t.Functor0());return function(n){return function(u){return r(e(R($y))(n))(u)}}},re=function(t){var r=jt(t),e=O(t.Functor0());return function(n){return function(u){return function(o){return r(e(n)(u))(o)}}}};var z=function(t){return t.pure};var Zn=function(t){var r=z(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},Mi=function(t){var r=jt(t.Apply0()),e=z(t);return function(n){return function(u){return r(e(n))(u)}}};var ua={pure:function(t){return[t]},Apply0:function(){return Ei}};var Cv=function(t){return function(r){return t+r}},hv=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var zr=function(t){return t.reflectSymbol};var rn=function(t){return function(r){return r[t]}},tu=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var Tv={append:function(t){return function(r){return void 0}}},aa={append:Cv};var Vr={append:hv};var ut=function(t){return t.append};var Wt=function(t){return t.alt};var xy=String.fromCharCode(65535),Ey=String.fromCharCode(0),My=Number.POSITIVE_INFINITY,wy=Number.NEGATIVE_INFINITY;var xv=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var Ev=xv;var Mv=xv;var wv=function(t){return function(r){return t===r}};var Iv=wv;var Lv=wv;var En={eq:Lv};var Ra={eq:Iv};var ht=function(t){return t.eq};var St=function(){function t(){}return t.value=new t,t}(),wt=function(){function t(){}return t.value=new t,t}(),It=function(){function t(){}return t.value=new t,t}();var Pv=function(t){return function(r){return t-r|0}};var Ov=function(t){return function(r){return t+r|0}},Rv=function(t){return function(r){return t*r|0}},Nv=function(t){return function(r){return t+r}},Bv=function(t){return function(r){return t*r}};var wi={add:Nv,zero:0,mul:Bv,one:1},ia={add:Ov,zero:0,mul:Rv,one:1};var en=function(t){return t.mul};var ke=function(t){return t.add};var Nc={sub:Pv,Semiring0:function(){return ia}};var Fe=function(){return{compare:Mv(St.value)(It.value)(wt.value),Eq0:function(){return En}}}();var pe=function(){return{compare:Ev(St.value)(It.value)(wt.value),Eq0:function(){return Ra}}}();var Et=function(t){return t.compare};var wn=function(t){return t.top};var Li={top:2147483647,bottom:-2147483648,Ord0:function(){return pe}};var eu=function(t){return t.bottom};var Hv=function(t){return t.toString()},Uv=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var qv=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,o=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+o})+'"'};var ze={show:qv};var zv=function(t){return t.showRecordFields},Vv=function(){return function(){return function(t){var r=zv(t);return{show:function(e){return"{"+(r(tt.value)(e)+"}")}}}}};var Pi={show:Uv},sn={show:Hv};var vt=function(t){return t.show};var Gv=function(t){var r=zr(t);return function(e){var n=zv(e);return function(u){var o=vt(u);return{showRecordFields:function(p){return function(l){var s=n(tt.value)(l),b=r(tt.value),g=rn(b)(l);return" "+(b+(": "+(o(g)+(","+s))))}}}}}},jv=function(t){var r=zr(t);return function(e){var n=vt(e);return{showRecordFields:function(u){return function(o){var p=r(tt.value),l=rn(p)(o);return" "+(p+(": "+(n(l)+" ")))}}}}};var Ky=Nt(Bt),L=function(){function t(){}return t.value=new t,t}(),v=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var tr=function(t){return function(r){return function(e){if(e instanceof L)return t;if(e instanceof v)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ba=tr(!1)(R(!0));var hr={map:function(t){return function(r){return r instanceof v?new v(t(r.value0)):L.value}}},Qy=O(hr);var le=function(t){return tr(t)(Ky)},Ie=function(){return function(t){if(t instanceof v)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var $u=function(t){var r=ht(t);return{eq:function(e){return function(n){return e instanceof L&&n instanceof L?!0:e instanceof v&&n instanceof v?r(e.value0)(n.value0):!1}}}},fa=function(t){var r=Et(t),e=$u(t.Eq0());return{compare:function(n){return function(u){if(n instanceof L&&u instanceof L)return It.value;if(n instanceof L)return St.value;if(u instanceof L)return wt.value;if(n instanceof v&&u instanceof v)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var ca={apply:function(t){return function(r){if(t instanceof v)return Qy(t.value0)(r);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return hr}};var de={bind:function(t){return function(r){if(t instanceof v)return r(t.value0);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return ca}};var Ln=function(){return{pure:v.create,Apply0:function(){return ca}}}();var Yy={alt:function(t){return function(r){return t instanceof L?r:t}},Functor0:function(){return hr}},Kv=function(){return{empty:L.value,Alt0:function(){return Yy}}}();var Qv=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=u-1;o>=0;o--)n=t(e[o])(n);return n}}},Yv=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=0;o<u;o++)n=t(n)(e[o]);return n}}};var Zv=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var rg=Nt(Bt),Wa=function(t){return t.discard};var Ha={bind:Zv,Apply0:function(){return Ei}},dt=function(t){return t.bind},nu=function(t){return sr(dt(t))},Ho=function(t){var r=nu(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},Uo=function(t){var r=dt(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var Ua={discard:function(t){return dt(t)}};var qo=function(t){var r=dt(t);return function(e){return r(e)(rg)}};var D=function(t){return t.empty};var lt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ct=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Hc=function(t){return tr(new lt(t))(ct.create)};var qa={map:function(t){return function(r){if(r instanceof lt)return new lt(r.value0);if(r instanceof ct)return new ct(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var nn=function(t){return function(r){return function(e){if(e instanceof lt)return t(e.value0);if(e instanceof ct)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},Uc=function(){return nn(R(L.value))(v.create)}();var ag=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var es={defer:function(t){return function(r){return t(void 0)(r)}}},za=function(t){return t.defer},qc=function(t){var r=za(t);return function(e){var n=ag("go","Control.Lazy",function(){return r(function(o){return e(n(25))})}),u=n(25);return u}};var ns=function(t){return function(r){return t&&r}},us=function(t){return function(r){return t||r}},as=function(t){return!t};var pa=function(t){return t.not};var Ga=function(t){return t.ff};var la=function(t){return t.disj},mn={ff:!1,tt:!0,implies:function(t){return function(r){return la(mn)(pa(mn)(t))(r)}},conj:ns,disj:us,not:as};var is=function(t){return Math.min(Math.abs(t),2147483647)},os=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},fs=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var cs={Ring0:function(){return Nc}};var Oi=function(t){return t.mod};var zo={degree:is,div:os,mod:fs,CommutativeRing0:function(){return cs}};var Vc={mempty:void 0,Semigroup0:function(){return Tv}},Ri={mempty:"",Semigroup0:function(){return aa}};var zt=function(t){return t.mempty};var j=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Gr=function(t){return t.value1};var Cu={map:function(t){return function(r){return new j(r.value0,t(r.value1))}}};var ja=function(t){return function(r){return function(e){return t(new j(r,e))}}};var Hi=function(t){return t};var Ag=function(t){var r=la(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Xc=function(t){var r=Ag(t);return{mempty:Ga(t),Semigroup0:function(){return r}}};var Jo=function(t){return t};var dg=function(t){var r=ea(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Jc=function(t){var r=dg(t.Semigroupoid0());return{mempty:Nt(t),Semigroup0:function(){return r}}};var Y=function(t){return t};var k=function(){return Y};var Qc=k(),Ko=function(){return Qc};var Fr=function(){return Qc};var Qo=function(){return function(){return function(){return function(){return function(t){return Qc}}}}};var Sg=Fr(),$g=Jc(Bt);var Cg=Qo()()()(),_r=function(t){return t.foldr};var bn=function(t){var r=_r(t);return function(e){return r(Wt(e.Alt0()))(D(e))}},wr=function(t){var r=_r(t);return function(e){var n=Wt(e.Alt0()),u=D(e);return function(o){return r(function(p){return n(o(p))})(u)}}},Ka=function(t){var r=pr(t.Apply0()),e=z(t);return function(n){var u=_r(n);return function(o){return u(function(p){return r(o(p))})(e(void 0))}}},Ve=function(t){var r=Ka(t);return function(e){return sr(r(e))}};var ur=function(t){return t.foldl};var uu=function(t){var r=ur(t);return function(e){var n=ut(e.Semigroup0()),u=zt(e);return function(o){return function(p){var l=function(s){return function(b){return s.init?{init:!1,acc:b}:{init:!1,acc:n(s.acc)(n(o)(b))}}};return r(l)({init:!0,acc:u})(p).acc}}}};var Ge={foldr:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof v)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof v)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=zt(t);return function(e){return function(n){if(n instanceof L)return r;if(n instanceof v)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var _s=function(t){var r=_r(t);return function(e){var n=ut(e.Semigroup0()),u=zt(e);return function(o){return r(function(p){return function(l){return n(o(p))(l)}})(u)}}},Ft={foldr:Qv,foldl:Yv,foldMap:function(t){return _s(Ft)(t)}},tp=function(t){var r=ur(t);return function(e){var n=ut(e.Semigroup0()),u=zt(e);return function(o){return r(function(p){return function(l){return n(p)(o(l))}})(u)}}},gr=function(t){return t.foldMap};var rp=function(t){var r=gr(t)($g);return function(e){return function(n){return function(u){return Sg(r(function(o){return Jo(e(o))})(u))(n)}}}};var hu=function(t){var r=gr(t);return function(e){return Cg(Hi)(r(Xc(e)))}};var hg=Nt(Bt);var Le={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},vs=function(t){return t.dimap},Pe=function(t){var r=vs(t);return function(e){return r(e)(hg)}};var ep=function(t){return function(){return t}},ss=function(t){return function(r){return function(){return r(t())()}}};var Oe=function(t){var r=dt(t.Bind1()),e=z(t.Applicative0());return function(n){return function(u){return r(n)(function(o){return r(u)(function(p){return e(o(p))})})}}};var ms=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Qa={Applicative0:function(){return ye},Bind1:function(){return va}},va={bind:ss,Apply0:function(){return np(0)}},ye={pure:ep,Apply0:function(){return np(0)}},bs=ms("functorEffect","Effect",function(){return{map:Mi(ye)}}),np=ms("applyEffect","Effect",function(){return{apply:Oe(Qa),Functor0:function(){return bs(0)}}}),q=bs(20),Ir=np(23),Tg=re(Ir),up=function(t){return{append:Tg(ut(t))}},ap=function(t){var r=up(t.Semigroup0());return{mempty:ep(zt(t)),Semigroup0:function(){return r}}};var Yo=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},ip=(t,r)=>{for(let e in t)r(t[e])},op=()=>({}),fp=(t,r,e)=>{e[t]=r},cp=(t,r)=>{delete r[t]};var Ds=Y;var ks=function(t){return function(r){return function(){return t(r())}}},As=function(t){return function(){return t}},ds=function(t){return function(r){return function(){return r(t())()}}};function ee(t){return function(){return{value:t}}}var Xr=function(t){return function(){return t.value}},ys=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},an=function(t){return function(r){return function(){return r.value=t}}};var Pn=function(t){return t};var au={map:function(t){return function(r){return t(r)}}};var gs={apply:function(t){return function(r){return t(r)}},Functor0:function(){return au}},wg={bind:function(t){return function(r){return r(t)}},Apply0:function(){return gs}},Ig={pure:Pn,Apply0:function(){return gs}},Re={Applicative0:function(){return Ig},Bind1:function(){return wg}};var Ss=function(t){return function(){return{value:t}}};var Qr=function(t){return function(){return t.value}},$s=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},_e=function(t){return function(r){return function(){r.value=t}}};var Pg=or(q),ge=Ss,Og=$s,Zo=function(t){return Og(function(r){var e=t(r);return{state:e,value:e}})},zi=function(t){return function(r){return Pg(Zo(t)(r))}};var Ug=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},qg=ys,Lr=function(t){return qg(function(r){var e=t(r);return{state:e,value:e}})},ve={map:ks};var tf={Applicative0:function(){return yr},Bind1:function(){return Tu}},Tu={bind:ds,Apply0:function(){return lp(0)}},yr={pure:As,Apply0:function(){return lp(0)}},lp=Ug("applyST","Control.Monad.ST.Internal",function(){return{apply:Oe(tf),Functor0:function(){return ve}}}),sa=lp(47);var hs={liftST:Nt(Bt),Monad0:function(){return tf}},Ya={liftST:Ds,Monad0:function(){return Qa}},ma=function(t){return t.liftST};var ef=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,o=0;u!==r;)n[o++]=u,u+=e;return n[o]=u,n}},zg=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},Vg=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},_p=typeof Array.prototype.fill=="function"?zg:Vg,Gg=function(){function t(u,o){this.head=u,this.tail=o}var r={};function e(u){return function(o){return new t(u,o)}}function n(u){for(var o=[],p=0,l=u;l!==r;)o[p++]=l.head,l=l.tail;return o}return function(u){return function(o){return n(u(e)(r)(o))}}}(),dn=function(t){return t.length},Fs=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},Ts=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},xs=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var o=e(n[u]);if(r(o))return o}return t}}}},Es=function(t){return function(r){return function(e){return function(n){for(var u=0,o=n.length;u<o;u++)if(e(n[u]))return t(u);return r}}}};var Ms=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var Vi=function(t){return function(r){return r.filter(t)}},nf=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var o=r[u];t(o)?e.push(o):n.push(o)}return{yes:e,no:n}}};var ws=function(){function t(r,e,n,u,o,p){var l,s,b,g,P,B,N;for(l=o+(p-o>>1),l-o>1&&t(r,e,u,n,o,l),p-l>1&&t(r,e,u,n,l,p),s=o,b=l,g=o;s<l&&b<p;)P=u[s],B=u[b],N=e(r(P)(B)),N>0?(n[g++]=B,++b):(n[g++]=P,++s);for(;s<l;)n[g++]=u[s++];for(;b<p;)n[g++]=u[b++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var Gi=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),o=0;o<n;o++)u[o]=t(r[o])(e[o]);return u}}};var Is=function(t){return function(r){return t[r]}};function On(){return[]}var vp=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var uf=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},Rn=function(t){return function(){return t}};function Ls(t){return function(){return t.slice()}}var af=Ls,sp=Ls,Xg=function(){function t(r,e,n,u,o,p){var l,s,b,g,P,B,N;for(l=o+(p-o>>1),l-o>1&&t(r,e,u,n,o,l),p-l>1&&t(r,e,u,n,l,p),s=o,b=l,g=o;s<l&&b<p;)P=u[s],B=u[b],N=e(r(P)(B)),N>0?(n[g++]=B,++b):(n[g++]=P,++s);for(;s<l;)n[g++]=u[s++];for(;b<p;)n[g++]=u[b++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var Ns=function(t){return function(r){return function(){var n=sp(r)();return t(n)(),Rn(n)()}}};var on=function(t){return vp([t])};var Bs=O(ve),Qg=pa(mn),Yg=or(ve),Zg=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var tS=function(t){return function(){var e=Xr(t.value1)();return Lr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var ff=function(t){return Bs(Zg.create(t))(ee(0))},cf=function(t){return function(r){return function(){for(var n=ee(!1)();Bs(Qg)(Xr(n))();)(function(){var o=tS(t)();if(o instanceof v)return r(o.value0)();if(o instanceof L)return Yg(an(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[o.constructor.name])})();return{}}}};var Hs=function(){function t(u){return[u]}function r(u){return function(o){return[u,o]}}function e(u){return function(o){return function(p){return[u,o,p]}}}function n(u){return function(o){return u.concat(o)}}return function(u){return function(o){return function(p){return function(l){return function(s){function b(g,P){switch(P-g){case 0:return p([]);case 1:return o(t)(l(s[g]));case 2:return u(o(r)(l(s[g])))(l(s[g+1]));case 3:return u(u(o(e)(l(s[g])))(l(s[g+1])))(l(s[g+2]));default:var B=g+Math.floor((P-g)/4)*2;return u(o(n)(b(g,B)))(b(B,P))}}return b(0,s.length)}}}}}}();var IS=Nt(Bt),Ne=function(t){return t.traverse};var dp=function(t){var r=Ne(t);return function(e){return r(e)(IS)}},ba={traverse:function(t){var r=t.Apply0();return Hs(jt(r))(O(r.Functor0()))(z(t))},sequence:function(t){return dp(ba)(t)},Functor0:function(){return br},Foldable1:function(){return Ft}};var KS=O(hr);var QS=Ie();var YS=ut(Vr);var $p=function(){return Is},ZS=$p(),Cp=function(){return Fs(R(L.value))(function(t){return function(r){return new v({head:t,tail:r})}})}();var bf=function(t){return ws(t)(function(r){if(r instanceof wt)return 1;if(r instanceof It)return 0;if(r instanceof St)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var Df=function(t){return function(r){return Ns(on(r))(t)()}},tm=function(t){return[t]};var h=function(t){return function(r){return Gi(t)(ef(0)(dn(r)-1|0))(r)}};var xu=function(){return Ts(v.create)(L.value)}(),hp=function(t){return xu(t)(dn(t)-1|0)};var Fp=function(t){return xu(t)(0)};var Ji=function(){return xs(L.value)(Ba)}();var Tp=function(){return Es(v.create)(L.value)}();var xp=function(t){return function(r){return KS(ZS(r))(Tp(t)(r))}};var rm=function(){return Ms(v.create)(L.value)}(),Ep=function(t){return function(r){return function(e){return e.length===0?[]:tr(e)(function(n){return QS(rm(n)(e))})(Tp(t(r))(e))}}};var Ki=function(t){return function(r){return YS([t])(r)}};var t$=sr(dt(Ha)),Mp=function(t){return t$(function(){var r=tr([])(tm);return function(e){return r(t(e))}}())};var em=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var ou=function(t){return t.mapWithIndex};var Aa={mapWithIndex:em,Functor0:function(){return br}};var Bn=function(t){return t.foldrWithIndex};var Wn=function(t){return t.foldlWithIndex};var fu=function(t){return t.foldMapWithIndex};var Hn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Af=function(t){var r=D(t);return function(e){return new Hn(e,r)}};var rr=function(){function t(){}return t.value=new t,t}(),Dt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),df=function(t){return t},s$=function(t){return new Dt(t.value0,t.value1)};var m$=function(t){var r=function(e){return function(n){var u=e,o=!1,p;function l(s,b){if(b instanceof Dt&&b.value1 instanceof Dt&&b.value1.value1 instanceof Dt){u=new Dt(b,s),n=b.value1.value1.value1;return}var g=function(B){return B instanceof Dt&&B.value1 instanceof Dt&&B.value1.value1 instanceof rr?new Dt(t(B.value0),new Dt(t(B.value1.value0),rr.value)):B instanceof Dt&&B.value1 instanceof rr?new Dt(t(B.value0),rr.value):rr.value},P=function(B){return function(N){var f=B,d=!1,at;function X(Ot,Rt){if(Ot instanceof Dt&&Ot.value0 instanceof Dt&&Ot.value0.value1 instanceof Dt&&Ot.value0.value1.value1 instanceof Dt){f=Ot.value1,N=new Dt(t(Ot.value0.value0),new Dt(t(Ot.value0.value1.value0),new Dt(t(Ot.value0.value1.value1.value0),Rt)));return}return d=!0,Rt}for(;!d;)at=X(f,N);return at}};return o=!0,P(s)(g(b))}for(;!o;)p=l(u,n);return p}};return r(rr.value)},Qi={map:m$};var fn={foldr:function(t){return function(r){var e=function(){var u=function(o){return function(p){var l=o,s=!1,b;function g(P,B){if(B instanceof rr)return s=!0,P;if(B instanceof Dt){l=new Dt(B.value0,P),p=B.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[P.constructor.name,B.constructor.name])}for(;!s;)b=g(l,p);return b}};return u(rr.value)}(),n=ur(fn)(sr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,o=!1,p;function l(s,b){if(b instanceof rr)return o=!0,s;if(b instanceof Dt){u=t(s)(b.value0),n=b.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[b.constructor.name])}for(;!o;)p=l(u,n);return p}};return r},foldMap:function(t){var r=ut(t.Semigroup0()),e=zt(t);return function(n){return ur(fn)(function(u){var o=r(u);return function(p){return o(n(p))}})(e)}}};var b$=_r(fn);var yf={append:function(t){return function(r){return b$(Dt.create)(r)(t)}}},am=ut(yf);var im={append:function(t){return function(r){return new Hn(t.value0,am(t.value1)(s$(r)))}}};var om={alt:am,Functor0:function(){return Qi}},wp=function(){return{empty:rr.value,Alt0:function(){return om}}}();var gf=function(){var t=function(r){return function(e){var n=r,u=!1,o;function p(l,s){if(s instanceof rr)return u=!0,l;if(s instanceof Dt){n=new Dt(s.value0,l),e=s.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,s.constructor.name])}for(;!u;)o=p(n,e);return o}};return t(rr.value)}();var vm=function(t){return t()};var sm=function(t){throw new Error(t)};var mm=function(){return sm};var O$=mm(),R$=vm,wu=function(t){return R$(function(){return O$(t)})};var _t=function(){function t(){}return t.value=new t,t}(),$t=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Xt=function(){function t(r,e,n,u,o,p,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p,this.value6=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return function(l){return new t(r,e,n,u,o,p,l)}}}}}}},t}(),Iu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),cu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),Lu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Un=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Pu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),$f=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Am=function(t){return function(r){return new $t(_t.value,t,r,_t.value)}};var Zi=function(t){var r=Et(t);return function(e){var n=function(u){var o=!1,p;function l(s){if(s instanceof _t)return o=!0,L.value;if(s instanceof $t){var b=r(e)(s.value1);if(b instanceof It)return o=!0,new v(s.value2);if(b instanceof St){u=s.value0;return}u=s.value3;return}if(s instanceof Xt){var g=r(e)(s.value1);if(g instanceof It)return o=!0,new v(s.value2);var P=r(e)(s.value4);if(P instanceof It)return o=!0,new v(s.value5);if(g instanceof St){u=s.value0;return}if(P instanceof wt){u=s.value6;return}u=s.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[s.constructor.name])}for(;!o;)p=l(u);return p};return n}};var Ou={map:function(t){return function(r){if(r instanceof _t)return _t.value;if(r instanceof $t)return new $t(O(Ou)(t)(r.value0),r.value1,t(r.value2),O(Ou)(t)(r.value3));if(r instanceof Xt)return new Xt(O(Ou)(t)(r.value0),r.value1,t(r.value2),O(Ou)(t)(r.value3),r.value4,t(r.value5),O(Ou)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var dm=function(t){return function(r){return function(e){var n=t,u=r,o=!1,p;function l(s,b,g){if(b instanceof rr)return o=!0,g;if(b instanceof Dt){if(b.value0 instanceof Iu){n=s,u=b.value1,e=new $t(g,b.value0.value0,b.value0.value1,b.value0.value2);return}if(b.value0 instanceof cu){n=s,u=b.value1,e=new $t(b.value0.value0,b.value0.value1,b.value0.value2,g);return}if(b.value0 instanceof Lu){n=s,u=b.value1,e=new Xt(g,b.value0.value0,b.value0.value1,b.value0.value2,b.value0.value3,b.value0.value4,b.value0.value5);return}if(b.value0 instanceof Un){n=s,u=b.value1,e=new Xt(b.value0.value0,b.value0.value1,b.value0.value2,g,b.value0.value3,b.value0.value4,b.value0.value5);return}if(b.value0 instanceof Pu){n=s,u=b.value1,e=new Xt(b.value0.value0,b.value0.value1,b.value0.value2,b.value0.value3,b.value0.value4,b.value0.value5,g);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[b.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[b.constructor.name,g.constructor.name])}for(;!o;)p=l(n,u,e);return p}}},hf=function(t){var r=dm(t),e=Et(t);return function(n){return function(u){var o=function(l){return function(s){var b=l,g=!1,P;function B(N,f){if(N instanceof rr)return g=!0,new $t(f.value0,f.value1,f.value2,f.value3);if(N instanceof Dt){if(N.value0 instanceof Iu)return g=!0,r(N.value1)(new Xt(f.value0,f.value1,f.value2,f.value3,N.value0.value0,N.value0.value1,N.value0.value2));if(N.value0 instanceof cu)return g=!0,r(N.value1)(new Xt(N.value0.value0,N.value0.value1,N.value0.value2,f.value0,f.value1,f.value2,f.value3));if(N.value0 instanceof Lu){b=N.value1,s=new $f(new $t(f.value0,f.value1,f.value2,f.value3),N.value0.value0,N.value0.value1,new $t(N.value0.value2,N.value0.value3,N.value0.value4,N.value0.value5));return}if(N.value0 instanceof Un){b=N.value1,s=new $f(new $t(N.value0.value0,N.value0.value1,N.value0.value2,f.value0),f.value1,f.value2,new $t(f.value3,N.value0.value3,N.value0.value4,N.value0.value5));return}if(N.value0 instanceof Pu){b=N.value1,s=new $f(new $t(N.value0.value0,N.value0.value1,N.value0.value2,N.value0.value3),N.value0.value4,N.value0.value5,new $t(f.value0,f.value1,f.value2,f.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[N.value0.constructor.name,f.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[N.constructor.name,f.constructor.name])}for(;!g;)P=B(b,s);return P}},p=function(l){return function(s){var b=l,g=!1,P;function B(N,f){if(f instanceof _t)return g=!0,o(N)(new $f(_t.value,n,u,_t.value));if(f instanceof $t){var d=e(n)(f.value1);if(d instanceof It)return g=!0,r(N)(new $t(f.value0,n,u,f.value3));if(d instanceof St){b=new Dt(new Iu(f.value1,f.value2,f.value3),N),s=f.value0;return}b=new Dt(new cu(f.value0,f.value1,f.value2),N),s=f.value3;return}if(f instanceof Xt){var d=e(n)(f.value1);if(d instanceof It)return g=!0,r(N)(new Xt(f.value0,n,u,f.value3,f.value4,f.value5,f.value6));var at=e(n)(f.value4);if(at instanceof It)return g=!0,r(N)(new Xt(f.value0,f.value1,f.value2,f.value3,n,u,f.value6));if(d instanceof St){b=new Dt(new Lu(f.value1,f.value2,f.value3,f.value4,f.value5,f.value6),N),s=f.value0;return}if(d instanceof wt&&at instanceof St){b=new Dt(new Un(f.value0,f.value1,f.value2,f.value4,f.value5,f.value6),N),s=f.value3;return}b=new Dt(new Pu(f.value0,f.value1,f.value2,f.value3,f.value4,f.value5),N),s=f.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[N.constructor.name,f.constructor.name])}for(;!g;)P=B(b,s);return P}};return p(rr.value)}}},q$=function(t){var r=dm(t),e=Et(t);return function(n){var u=function(s){return function(b){var g=s,P=!1,B;function N(f,d){if(f instanceof rr)return P=!0,d;if(f instanceof Dt){if(f.value0 instanceof Iu&&f.value0.value2 instanceof _t&&d instanceof _t)return P=!0,r(f.value1)(new $t(_t.value,f.value0.value0,f.value0.value1,_t.value));if(f.value0 instanceof cu&&f.value0.value0 instanceof _t&&d instanceof _t)return P=!0,r(f.value1)(new $t(_t.value,f.value0.value1,f.value0.value2,_t.value));if(f.value0 instanceof Iu&&f.value0.value2 instanceof $t){g=f.value1,b=new Xt(d,f.value0.value0,f.value0.value1,f.value0.value2.value0,f.value0.value2.value1,f.value0.value2.value2,f.value0.value2.value3);return}if(f.value0 instanceof cu&&f.value0.value0 instanceof $t){g=f.value1,b=new Xt(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3,f.value0.value1,f.value0.value2,d);return}return f.value0 instanceof Iu&&f.value0.value2 instanceof Xt?(P=!0,r(f.value1)(new $t(new $t(d,f.value0.value0,f.value0.value1,f.value0.value2.value0),f.value0.value2.value1,f.value0.value2.value2,new $t(f.value0.value2.value3,f.value0.value2.value4,f.value0.value2.value5,f.value0.value2.value6)))):f.value0 instanceof cu&&f.value0.value0 instanceof Xt?(P=!0,r(f.value1)(new $t(new $t(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3),f.value0.value0.value4,f.value0.value0.value5,new $t(f.value0.value0.value6,f.value0.value1,f.value0.value2,d)))):f.value0 instanceof Lu&&f.value0.value2 instanceof _t&&f.value0.value5 instanceof _t&&d instanceof _t?(P=!0,r(f.value1)(new Xt(_t.value,f.value0.value0,f.value0.value1,_t.value,f.value0.value3,f.value0.value4,_t.value))):f.value0 instanceof Un&&f.value0.value0 instanceof _t&&f.value0.value5 instanceof _t&&d instanceof _t?(P=!0,r(f.value1)(new Xt(_t.value,f.value0.value1,f.value0.value2,_t.value,f.value0.value3,f.value0.value4,_t.value))):f.value0 instanceof Pu&&f.value0.value0 instanceof _t&&f.value0.value3 instanceof _t&&d instanceof _t?(P=!0,r(f.value1)(new Xt(_t.value,f.value0.value1,f.value0.value2,_t.value,f.value0.value4,f.value0.value5,_t.value))):f.value0 instanceof Lu&&f.value0.value2 instanceof $t?(P=!0,r(f.value1)(new $t(new Xt(d,f.value0.value0,f.value0.value1,f.value0.value2.value0,f.value0.value2.value1,f.value0.value2.value2,f.value0.value2.value3),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof Un&&f.value0.value0 instanceof $t?(P=!0,r(f.value1)(new $t(new Xt(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3,f.value0.value1,f.value0.value2,d),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof Un&&f.value0.value5 instanceof $t?(P=!0,r(f.value1)(new $t(f.value0.value0,f.value0.value1,f.value0.value2,new Xt(d,f.value0.value3,f.value0.value4,f.value0.value5.value0,f.value0.value5.value1,f.value0.value5.value2,f.value0.value5.value3)))):f.value0 instanceof Pu&&f.value0.value3 instanceof $t?(P=!0,r(f.value1)(new $t(f.value0.value0,f.value0.value1,f.value0.value2,new Xt(f.value0.value3.value0,f.value0.value3.value1,f.value0.value3.value2,f.value0.value3.value3,f.value0.value4,f.value0.value5,d)))):f.value0 instanceof Lu&&f.value0.value2 instanceof Xt?(P=!0,r(f.value1)(new Xt(new $t(d,f.value0.value0,f.value0.value1,f.value0.value2.value0),f.value0.value2.value1,f.value0.value2.value2,new $t(f.value0.value2.value3,f.value0.value2.value4,f.value0.value2.value5,f.value0.value2.value6),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof Un&&f.value0.value0 instanceof Xt?(P=!0,r(f.value1)(new Xt(new $t(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3),f.value0.value0.value4,f.value0.value0.value5,new $t(f.value0.value0.value6,f.value0.value1,f.value0.value2,d),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof Un&&f.value0.value5 instanceof Xt?(P=!0,r(f.value1)(new Xt(f.value0.value0,f.value0.value1,f.value0.value2,new $t(d,f.value0.value3,f.value0.value4,f.value0.value5.value0),f.value0.value5.value1,f.value0.value5.value2,new $t(f.value0.value5.value3,f.value0.value5.value4,f.value0.value5.value5,f.value0.value5.value6)))):f.value0 instanceof Pu&&f.value0.value3 instanceof Xt?(P=!0,r(f.value1)(new Xt(f.value0.value0,f.value0.value1,f.value0.value2,new $t(f.value0.value3.value0,f.value0.value3.value1,f.value0.value3.value2,f.value0.value3.value3),f.value0.value3.value4,f.value0.value3.value5,new $t(f.value0.value3.value6,f.value0.value4,f.value0.value5,d)))):(P=!0,wu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[f.constructor.name])}for(;!P;)B=N(g,b);return B}},o=function(s){return function(b){var g=s,P=!1,B;function N(f,d){if(d instanceof $t&&d.value0 instanceof _t&&d.value3 instanceof _t)return P=!0,u(f)(_t.value);if(d instanceof $t){g=new Dt(new cu(d.value0,d.value1,d.value2),f),b=d.value3;return}if(d instanceof Xt&&d.value0 instanceof _t&&d.value3 instanceof _t&&d.value6 instanceof _t)return P=!0,u(new Dt(new cu(_t.value,d.value1,d.value2),f))(_t.value);if(d instanceof Xt){g=new Dt(new Pu(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),f),b=d.value6;return}return P=!0,wu("The impossible happened in partial function `removeMaxNode`.")}for(;!P;)B=N(g,b);return B}},p=function(s){var b=!1,g;function P(B){if(B instanceof $t&&B.value3 instanceof _t)return b=!0,{key:B.value1,value:B.value2};if(B instanceof $t){s=B.value3;return}if(B instanceof Xt&&B.value6 instanceof _t)return b=!0,{key:B.value4,value:B.value5};if(B instanceof Xt){s=B.value6;return}return b=!0,wu("The impossible happened in partial function `maxNode`.")}for(;!b;)g=P(s);return g},l=function(s){return function(b){var g=s,P=!1,B;function N(f,d){if(d instanceof _t)return P=!0,L.value;if(d instanceof $t){var at=e(n)(d.value1);if(d.value3 instanceof _t&&at instanceof It)return P=!0,new v(new j(d.value2,u(f)(_t.value)));if(at instanceof It){var X=p(d.value0);return P=!0,new v(new j(d.value2,o(new Dt(new Iu(X.key,X.value,d.value3),f))(d.value0)))}if(at instanceof St){g=new Dt(new Iu(d.value1,d.value2,d.value3),f),b=d.value0;return}g=new Dt(new cu(d.value0,d.value1,d.value2),f),b=d.value3;return}if(d instanceof Xt){var Ot=function(){return d.value0 instanceof _t&&d.value3 instanceof _t&&d.value6 instanceof _t}(),at=e(n)(d.value4),Rt=e(n)(d.value1);if(Ot&&Rt instanceof It)return P=!0,new v(new j(d.value2,r(f)(new $t(_t.value,d.value4,d.value5,_t.value))));if(Ot&&at instanceof It)return P=!0,new v(new j(d.value5,r(f)(new $t(_t.value,d.value1,d.value2,_t.value))));if(Rt instanceof It){var X=p(d.value0);return P=!0,new v(new j(d.value2,o(new Dt(new Lu(X.key,X.value,d.value3,d.value4,d.value5,d.value6),f))(d.value0)))}if(at instanceof It){var X=p(d.value3);return P=!0,new v(new j(d.value5,o(new Dt(new Un(d.value0,d.value1,d.value2,X.key,X.value,d.value6),f))(d.value3)))}if(Rt instanceof St){g=new Dt(new Lu(d.value1,d.value2,d.value3,d.value4,d.value5,d.value6),f),b=d.value0;return}if(Rt instanceof wt&&at instanceof St){g=new Dt(new Un(d.value0,d.value1,d.value2,d.value4,d.value5,d.value6),f),b=d.value3;return}g=new Dt(new Pu(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),f),b=d.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[d.constructor.name])}for(;!P;)B=N(g,b);return B}};return l(rr.value)}},ue={foldr:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof $t)return _r(ue)(t)(t(e.value2)(_r(ue)(t)(r)(e.value3)))(e.value0);if(e instanceof Xt)return _r(ue)(t)(t(e.value2)(_r(ue)(t)(t(e.value5)(_r(ue)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof $t)return ur(ue)(t)(t(ur(ue)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Xt)return ur(ue)(t)(t(ur(ue)(t)(t(ur(ue)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=zt(t),e=ut(t.Semigroup0());return function(n){return function(u){if(u instanceof _t)return r;if(u instanceof $t)return e(gr(ue)(t)(n)(u.value0))(e(n(u.value2))(gr(ue)(t)(n)(u.value3)));if(u instanceof Xt)return e(gr(ue)(t)(n)(u.value0))(e(n(u.value2))(e(gr(ue)(t)(n)(u.value3))(e(n(u.value5))(gr(ue)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},se={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof $t)return Bn(se)(t)(t(e.value1)(e.value2)(Bn(se)(t)(r)(e.value3)))(e.value0);if(e instanceof Xt)return Bn(se)(t)(t(e.value1)(e.value2)(Bn(se)(t)(t(e.value4)(e.value5)(Bn(se)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof $t)return Wn(se)(t)(t(e.value1)(Wn(se)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Xt)return Wn(se)(t)(t(e.value4)(Wn(se)(t)(t(e.value1)(Wn(se)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=zt(t),e=ut(t.Semigroup0());return function(n){return function(u){if(u instanceof _t)return r;if(u instanceof $t)return e(fu(se)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(fu(se)(t)(n)(u.value3)));if(u instanceof Xt)return e(fu(se)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(fu(se)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(fu(se)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return ue}},z$=Bn(se),V$=Wn(se),ym=function(){return z$(function(t){return function(r){return function(e){return new Dt(t,e)}}})(rr.value)}();var qn=function(){return _t.value}();var Np=function(t){var r=q$(t);return function(e){return function(n){return tr(n)(Gr)(r(e)(n))}}};var Ru=function(t){var r=Zi(t),e=Np(t),n=hf(t);return function(u){return function(o){return function(p){var l=u(r(o)(p));if(l instanceof L)return e(o)(p);if(l instanceof v)return n(o)(l.value0)(p);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[l.constructor.name])}}}};var G$=function(t){var r=Ru(t);return function(e){return function(n){return function(u){var o=function(p){return function(l){return function(s){return r(function(){var b=tr(s)(e(s));return function(g){return v.create(b(g))}}())(p)(l)}}};return V$(o)(u)(n)}}}};var gm=function(t){return G$(t)(R)};var Sm=or(ve),J$=z(yr),K$=jt(sa),Q$=O(ve);var Ff={compact:function(t){return function(){var e=On(),n=ff(function(u){return xu(t)(u)})();return cf(n)(function(u){return Sm(function(o){if(o instanceof L)return J$(0);if(o instanceof v)return on(o.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[o.constructor.name])}(u))})(),Rn(e)()}()},separate:function(t){return function(){var e=On(),n=On(),u=ff(function(o){return xu(t)(o)})();return cf(u)(function(o){return Sm(function(p){if(p instanceof lt)return on(p.value0)(e);if(p instanceof ct)return on(p.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[p.constructor.name])}(o))})(),K$(Q$(function(o){return function(p){return{left:o,right:p}}})(Rn(e)))(Rn(n))()}()}};var pu=function(t){return t.compact};var $m=ut(Vr),rC=ur(Ft);var Cm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof lt)return{left:$m(e.left)([u.value0]),right:e.right};if(u instanceof ct)return{right:$m(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return rC(r)({left:[],right:[]})},partition:nf,filterMap:Mp,filter:Vi,Compactable0:function(){return Ff},Functor1:function(){return br}};var Je=function(t){return t.filterMap};var Bp=function(t){return t.filter};var nC=gr(fn),uC=ur(fn),aC=_r(fn);var iC=function(t){var r=gm(t);return function(e){return function(n){return r(e)(n)}}};var Wp=function(t){return ym(t)};var Fm=function(t){return Am(t)(void 0)};var Hp=function(t){return{append:iC(t)}};var Tm={foldMap:function(t){var r=nC(t);return function(e){var n=r(e);return function(u){return n(Wp(u))}}},foldl:function(t){return function(r){var e=uC(t)(r);return function(n){return e(Wp(n))}}},foldr:function(t){return function(r){var e=aC(t)(r);return function(n){return e(Wp(n))}}}};var oC=qn;var xm=function(t){var r=Hp(t);return{mempty:oC,Semigroup0:function(){return r}}};var Em=function(t){var r=Np(t);return function(e){return function(n){return r(e)(n)}}};function Mm(t){return function(r){return function(){return setTimeout(r,t)}}}function wm(t){return function(){clearTimeout(t)}}var pC=Et(pe);var Im=Mm;var lC={eq:function(t){return function(r){return t===r}}},Tf={compare:function(t){return function(r){return pC(t)(r)}},Eq0:function(){return lC}};var Lm=wm;var lu=function(r){return function(e){return r(e)()}};var ri=function(r){return function(e){return function(){return r(e)}}};var TC=function(t){var r=ut(up(t));return{append:function(e){return function(n){return lu(function(u){return r(ri(e)(u))(ri(n)(u))})}}}};var Nm=function(t){var r=zt(ap(t)),e=TC(t.Semigroup0());return{mempty:lu(function(n){return r}),Semigroup0:function(){return e}}};var xC=O(Cu),EC=z(Ln),Wm=function(t){return t.sampleOnRight};var $a=function(t){return t.keepLatest};var Hm=function(t){return t.fix},Nu=function(t){var r=Hm(t),e=Wm(t),n=t.Alternative0(),u=Wt(n.Plus1().Alt0()),o=z(n.Applicative0()),p=O(t.Filterable1().Functor1());return function(l){return function(s){return function(b){return r(function(g){return e(u(g)(o(s)))(p(sr(l))(b))})}}}};var Bu=function(t){var r=Je(t.Filterable1()),e=Nu(t);return function(n){return function(u){return function(o){return r(Gr)(e(function(p){return function(l){return xC(EC)(n(p.value0)(l))}})(new j(u,L.value))(o))}}}};function qp(t){return function(r){return t===r}}var Um=qp;var qm=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},zm=Ve(ye),xf=zm(Ge),Ca=z(ye),Vm=zt(Nm(Vc)),Hu=ma(Ya),eo=or(q),IC=ut(Vr),LC=zt(xm(Tf)),PC=Em(Tf),OC=ut(Hp(Tf)),RC=zm(Tm),NC=jt(Ir),BC=O(q);var WC=function(t){return function(r){return function(e,n){var u=ge(L.value)(),o=t(e,function(l){return _e(new v(l))(u)()}),p=r(e,function(l){var s=Qr(u)();return xf(s)(function(b){return function(){return n(l(b))}})()});return function(){return o(),p()}}}},HC=function(t){return function(r){return function(e,n){var u=ge(L.value)(),o=t(e,function(l){var s=Qr(u)();return xf(s)(function(b){return function(){return n(b(l))}})()}),p=r(e,function(l){return _e(new v(l))(u)()});return function(){return o(),p()}}}},UC=function(t){return function(r,e){var n=ge(Ca(void 0))(),u=t(r,function(o){var p=Qr(n)();p();var l=o(r,e);return _e(l)(n)()});return function(){var p=Qr(n)();return p(),u()}}},Tr={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},qC=O(Tr),no=function(t){return function(r){return function(e,n){return r(e,function(u){var o=t(u);if(o instanceof v)return n(o.value0);if(o instanceof L)return void 0;throw new Error("Failed pattern match at FRP.Event (line 201, column 31 - line 203, column 35): "+[o.constructor.name])})}}},zp=function(t){return no(function(r){var e=t(r);if(e)return new v(r);if(!e)return L.value;throw new Error("Failed pattern match at FRP.Event (line 129, column 13 - line 131, column 25): "+[e.constructor.name])})},Gm=function(){var r=op(),e=ge(0)();return{event:function(n,u){var o=ge(u)(),p=Qr(e)();return fp(p,o,r),zi(function(l){return l+1|0})(e)(),function(){return _e(Vm)(o)(),cp(p,r),void 0}},push:function(n){return ip(r,function(u){var o=Qr(u)();return o(n)})}}},zC=function(t){return function(r,e){var n=Gm(),u=t(n.event),o=n.event(r,e),p=u(r,n.push);return function(){return p(),o()}}},uo={compact:no(Nt(Bt)),separate:function(t){return{left:no(function(r){if(r instanceof lt)return new v(r.value0);if(r instanceof ct)return L.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 33): "+[r.constructor.name])})(t),right:no(function(r){if(r instanceof ct)return new v(r.value0);if(r instanceof lt)return L.value;throw new Error("Failed pattern match at FRP.Event (line 119, column 13 - line 121, column 32): "+[r.constructor.name])})(t)}}},zn={filter:zp,filterMap:no,partition:function(t){return function(r){return{yes:zp(t)(r),no:zp(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:Je(zn)(function(){var e=nn(v.create)(R(L.value));return function(n){return e(t(n))}}())(r),right:Je(zn)(function(e){return Uc(t(e))})(r)}}},Compactable0:function(){return uo},Functor1:function(){return Tr}},VC=function(t){return function(r){return function(e,n){var u=ge(L.value)(),o=Hu(On)(),p=ge(L.value)(),l=Hu(On)(),s=ge(!0)(),b=t(e,function(N){var f=Qr(s)();if(f)return eo(Hu(on(N)(o)))();_e(new v(N))(u)();var d=Qr(p)();return xf(d)(function(at){return function(){return n(at(N))}})()}),g=r(e,function(N){var f=Qr(s)();if(f)return eo(Hu(on(N)(l)))();_e(new v(N))(p)();var d=Qr(u)();return xf(d)(function(at){return function(){return n(N(at))}})()});_e(!1)(s)();var P=Hu(af(o))(),B=Hu(af(l))();return function(){return P.length===0?_e(hp(B))(p)():Yo(P,function(N){return _e(new v(N))(u)(),Yo(B,function(f){return _e(new v(f))(p)(),n(f(N))})})}(),Hu(uf(0)(dn(P))([])(o))(),Hu(uf(0)(dn(B))([])(l))(),function(){return b(),g()}}}},Gp=function(t){return function(r){return r}(jp(321).subscribe)(t)},jp=qm("backdoor","FRP.Event",function(){var t=function(){var e=op(),n=ge(0)();return{event:function(u,o){var p=ge(o)(),l=Qr(n)();return fp(l,p,e),zi(function(s){return s+1|0})(n)(),function(){return _e(Vm)(p)(),cp(l,e),void 0}},push:function(u){return function(){return ip(e,function(o){var p=Qr(o)();return p(u)})}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?Ca(void 0):e(function(o){return function(){return u(o)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?Ca(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(o){return function(){return u(o)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var o=function(p){return function(l){return function(){return p(n,lu(l))}}};return e(o)(function(p){return function(){return u(p)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var o=function(p,l){return p(n,l)};return e(o,u)}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,lu(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,lu(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var o=Vp(722)();return u(e(o.push)(o.event)),Ca(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,o){var p=Gm();return o(n(p.event)),e(u,p.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Vp(740)(),o=Gp(e)(u.push)();return{event:u.event,unsubscribe:o}}};return r}(),mailboxed:function(){var r=function(e){var n=Ru(e),u=Zi(e);return function(o){return function(p){return function(l,s){var b=ge(qn)();s(p(function(P){return function(B,N){return eo(Zo(n(function(f){if(f instanceof L)return new v([N]);if(f instanceof v)return new v(IC(f.value0)([N]));throw new Error("Failed pattern match at FRP.Event (line 753, column 21 - line 755, column 55): "+[f.constructor.name])})(P))(b))(),eo(Zo(n(function(f){if(f instanceof L)return L.value;if(f instanceof v)return new v(Ep(Um)(N)(f.value0));throw new Error("Failed pattern match at FRP.Event (line 762, column 21 - line 764, column 69): "+[f.constructor.name])})(P))(b))}}));var g=o(l,function(P){var B=Qr(b)(),N=u(P.address)(B);if(N instanceof L)return void 0;if(N instanceof v)return Yo(N.value0,function(f){return f(P.payload)});throw new Error("Failed pattern match at FRP.Event (line 771, column 13 - line 773, column 99): "+[N.constructor.name])});return function(){return eo(_e(qn)(b))(),g()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,o){var p=ge(LC)(),l=n(u,function(s){var b=ge(L.value)(),g=Im(e)(function(){o(s);var B=Qr(b)();return tr(Ca(void 0))(function(N){return zi(PC(N))(p)})(B)()})();return _e(new v(g))(b)(),zi(OC(Fm(g)))(p)()});return function(){var b=Qr(p)();return RC(b)(Lm)(),l()}}}};return r}()}}),Vp=qm("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(jp(437).create)()}}),ei=jp(583),jm=Vp(434),Xp=function(t){return function(r){return r}(ei.bus)(t)};var Xm=function(t){return function(r){return r}(ei.makeLemmingEvent)(t)},cn=function(t){return function(r){return r}(ei.makeLemmingEventO)(t)},Jm=function(t){return function(r){return r}(ei.makePureEvent)(t)},Ef=function(t){return function(r){return r}(ei.memoize)(t)};var Km=function(t){return function(r){return r}(ei.subscribePure)(t)};var GC={apply:function(t){return function(r){return VC(t)(qC(xi)(r))}},Functor0:function(){return Tr}};var Qt={pure:function(t){return function(r,e){return e(t),Ca(void 0)}},Apply0:function(){return GC}};var Sr={alt:function(t){return function(r){return function(e,n){return NC(BC(function(u){return function(o){return function(){return u(),o()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Tr}};var _={empty:function(t,r){return Ca(void 0)},Alt0:function(){return Sr}},jC={Applicative0:function(){return Qt},Plus1:function(){return _}},me={keepLatest:UC,sampleOnRight:WC,sampleOnLeft:HC,fix:zC,Alternative0:function(){return jC},Filterable1:function(){return zn}};var XC=z(Qt);var JC=function(t){return t},ao=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),io=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),KC=function(t){return t},Mf=k(),a=KC;var c=function(){return ao.create}();var K=function(){return io.create}(),kr=function(){var t=O(na)(O(q)(R(!0)));return function(r){return JC(t(r))}}(),Lt=function(t){return t.attr};var _u=function(t){var r=Lt(t);return function(e){return function(n){return XC(r(e)(n))}}};function Qm(t){return()=>t.slice()}function Ym(t){return r=>e=>()=>{e[t]=r}}function Zm(t){return()=>t.slice()}var Jp=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var Yp=function(t){var r=zr(t);return function(){return function(){return function(e){return function(n){return function(u){return tu(r(e))(n)(u)}}}}}},wf=function(t){var r=zr(t);return function(){return function(e){return function(n){return rn(r(e))(n)}}}};var rb=z(yr);var Lf={vb:function(t){return rb(new j({},{}))}},eb=function(t){return t.vb},rh={vbus:function(){var t=function(){return function(n){var u=eb(n);return function(o){return function(p){return Xm(function(l){return function(s){return function(){var g=u(tt.value)();return s(p(g.value0)(g.value1))(),rb(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},Zp=function(){return function(t){return function(r){return function(e){return e()(t)}(rh.vbus)(r)}}};var ni=function(t){var r=Yp(t)()();return function(){return function(){return function(e){var n=eb(e);return function(){return function(){return{vb:function(u){return function(){var p=n(tt.value)(),l=jm();return new j(r(tt.value)(l.push)(p.value0),r(tt.value)(l.event)(p.value1))}}}}}}}}};var Uu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),tl=function(){function t(){}return t.value=new t,t}();var oo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ui=function(){function t(){}return t.value=new t,t}(),Of=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),rl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),el=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ha=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),A=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var qu={eq:function(t){return function(r){return t instanceof Uu&&r instanceof Uu?t.value0===r.value0:t instanceof tl&&r instanceof tl}}};var S=function(t){return new el(t)};var nb=function(t){return new rl(t)};var ub=t=>r=>r[t];var Fa=function(t){return t.reflectType};var ib=function(t){return Fa(t)};var ai=br;var ob=function(){return function(t){return t}};var nl=function(){return function(){return function(){return function(){return function(){return function(t){var r=ib(t);return function(e){return ub(r(e))}}}}}}};var fb=[];var cb=function(){return function(){return function(t){return function(r){return Ki(t)(r)}}}};function pb(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var zu={};function al(t){return t()}function lb(t){return function(r){return function(e){return function(n){var u=e;function o(l){return function(s){return r(s)(l)(n[l])}}for(var p in n)hasOwnProperty.call(n,p)&&(u=t(u)(o(p)));return u}}}}function Rf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var ch=Object.keys||Rf(function(t){return function(){return t}});function il(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var ol=function(t){return function(r){return function(){return delete r[t],r}}};var Dh=_r(Ft);var kh=Rf(function(t){return function(r){return r}});var Ah=pb;var _b=function(t){return function(r){return al(function(){var n=Ah(r)();return t(n)(),n})}};var ii=function(t){return function(r){return _b(il(t)(r))}};var vb=lb(xi),dh=function(t){var r=ut(t.Semigroup0()),e=zt(t);return function(n){return vb(function(u){return function(o){return function(p){return r(u)(n(o)(p))}}})(e)}},sb={foldl:function(t){return vb(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return Dh(t)(r)(kh(e))}}},foldMap:function(t){var r=dh(t);return function(e){return r(R(e))}}};var fl=function(t){return _b(ol(t))};function mb(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function bb(t){return function(r){return function(e){return e[t]=r,e}}}function Db(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function kb(t){return function(r){return delete r[t],r}}var Ab=ra;var db=function(){return function(){return function(t){var r=zr(t);return function(e){return function(n){return function(u){return Db(r(e))(n)(u)}}}}}};var yb=function(){return function(){return function(t){var r=zr(t);return function(e){return function(n){return function(u){return bb(r(e))(n)(u)}}}}}};var gb=function(t){var r=zr(t);return function(){return function(){return function(e){return function(n){return kb(r(e))(n)}}}}};var Sb=function(t){return function(r){return t(mb(r))}};var Sh=$a(me),$h=O(Tr),Ch=bn(Ft)(_);var hh=dt(Tu),Fh=O(br),pl=ob(),Th=ou(Aa),xh=qc(es),oi=z(yr),hb=O(ve),Eh=O(ai),Fb=Ve(yr),Tb=Fb(Ge),$b=Oc(Ab),Mh=yb()()({reflectSymbol:function(){return"id"}}),wh=db()()({reflectSymbol:function(){return"parent"}}),Ih=gb({reflectSymbol:function(){return"raiseId"}})()(),Sn=or(ve),Lh=Zn(yr),xb=Fb(Ft),Ph=Nt(Bt),Oh=wr(Ft)(_),Rh=Ka(yr)(Ft),Nh=ut(Vr),Bh=ur(sb),Wh=pr(sa),Cb=function(){function t(){}return t.value=new t,t}(),ll=function(){function t(){}return t.value=new t,t}(),Hh=function(){function t(){}return t.value=new t,t}();var pn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof el)return Oh(pn(t)(r)(e))(u.value0);if(u instanceof ha)return Sh($h(pn(t)(r)(e))(u.value0));if(u instanceof A)return n(t.toElt(u.value0));if(u instanceof rl)return cn(function(o,p){var l=ee(zu)(),s=o(u.value0,function(b){var g=t.ids(e)(),P=ee(oi(void 0))(),B=t.ids(e)(),N=ee(oi(void 0))(),f=ee([])(),d=ee(oi(void 0))(),at=hb(Uu.create)(t.ids(e))(),X=ee(Cb.value)(),Ot=o(b,function(Kt){var et=Xr(X)();if(Kt instanceof Of&&et instanceof ll){var dr=Xr(f)();return Rh(function(V){return function(){return p(t.doLogic(Kt.value0)(e)(V))}})(dr)()}if(Kt instanceof ui&&et instanceof ll){Sn(an(Hh.value)(X))();var fe=function(){var H=Xr(f)();xb(H)(function(Me){return Tb(r.parent)(function(Rr){return function(){return p(t.disconnectElement(e)({id:Me,parent:Rr,scope:at}))}})})();var st=Xr(P)();st();var kt=Xr(N)();return kt(),Sn(Lr(fl(g))(l))(),Sn(Lr(fl(B))(l))()};return Sn(an(fe)(d))(),fe()}if(Kt instanceof oo&&et instanceof Cb){Sn(an(ll.value)(X))();var ot=o(pn(t)(function(){var V={};for(var H in r)({}).hasOwnProperty.call(r,H)&&(V[H]=r[H]);return V.scope=at,V.raiseId=function(st){return Sn(Lr(Nh([st]))(f))},V}())(e)(Kt.value0),p);return Sn(Lr(ii(B)(ot))(l))(),Sn(an(ot)(N))()}return void 0});Sn(an(Ot)(P))(),Sn(Lr(ii(g)(Ot))(l))();var Rt=Xr(d)();return Rt()});return function(){return hh(Xr(l))(Bh(Wh)(oi(void 0)))(),s()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},Uh=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(o){var p=function(l){return function(s){return cn(function(b,g){var P=Qm(Fh(R(""))(pl(u)))(),B=Ch(Th(function(Rt){return xh(function(Kt){return function(et){return et instanceof A?function(dr){return dr(function(){var fe={};for(var ot in l)({}).hasOwnProperty.call(l,ot)&&(fe[ot]=l[ot]);return fe.parent=L.value,fe.scope=r(l.scope),fe.raiseId=function(V){return Ym(Rt)(V)(P)},fe}())(s)}(n.toElt(et.value0)):Kt(n.wrapElt(et))}})})(pl(u))),N=b(B,g),f=ee(oi(void 0))(),d=hb(Y)(Zm(P))(),at=Eh(function(Rt){return function(Kt){return new A(n.fromEltO1(function(et){return function(dr){return cn(function(fe,ot){return et.raiseId(Rt)(),Tb(et.parent)(function(V){return function(){return ot(n.giveNewParent(dr)(Sb($b(Mh(tt.value)(Rt))($b(wh(tt.value)(R(V)))(Ih(tt.value))))(et))(Kt))}})(),oi(void 0)})}}))}})(d),X=pn(e)(l)(s)(o(at)(Y)),Ot=b(X,g);return Sn(an(Ot)(f))(),function(){N(),Lh(!t)(xb(pl(d))(function(et){return function(){return g(n.deleteFromCache(s)({id:et}))}}))();var Kt=Xr(f)();return Kt()}})}};return new A(n.fromEltO2(p))}}}}}}}}},qh=Uh()()();var Eb=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return qh(!1)(Ph)(t)(r)(e)(n)}}}}}}};var vl=k(),zh=Zp(),Vh=Pe(Le),Gh=O(Tr),sl=Fr(),jh=ht(qu),Xh=z(yr),_l=z(Qt),Jh=D(_),Kh=bn(Ft)(_);var Bf=function(){return function(t){var r=zh(t);return function(e){return function(n){return new ha(vl(r(e)(n)))}}}};var wb=function(t){return function(r){var e=function(n){return n instanceof A?new A(Vh(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof ha?new ha(Gh(e)(n.value0)):r};return e(r)}},$=function(t){return wb(v.create(t))};var ml=function(){return Of.create}(),bl=function(){return ui.value}(),Qh=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(sl(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:jh})}},toElt:function(t){return t}}},Yh=Qh(),fi=function(t){return new oo(sl(wb(L.value)(t)))},Ib=function(t){return function(r){return new oo(sl($(t)(r)))}},Vu=function(t){return Xp(t)};var ci=function(t){return new ha(vl(Vu(t)))};var Zh=function(t){return function(r){return function(e){return pn(Yh)(t)(r)(e)}}},tF=function(t){return function(r){var e=function(n){return function(u){return cn(function(o,p){var l=u.ids();n.raiseId(l)();var s=function(){if(n.parent instanceof L){var g=u.ids();return new j(_l(u.makeElement({id:g,parent:L.value,scope:n.scope,tag:"div",pos:L.value,dynFamily:L.value})),g)}if(n.parent instanceof v)return new j(Jh,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 339, column 34 - line 353, column 36): "+[n.parent.constructor.name])}(),b=o(Kh([s.value0,_l(u.makeDynBeacon({id:l,parent:new v(s.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),_l(u.attributeParent({id:l,parent:s.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),Zh({parent:new v(s.value1),scope:n.scope,ez:!1,raiseId:function(g){return Xh(void 0)},pos:L.value,dynFamily:new v(l)})(u)(t(r))]),p);return function(){return p(u.removeDynBeacon({id:l})),b()}})}};return new A(e)}},Gu=tF(vl(nb));var Hf=O(Tr),Dl=bn(Ft)(_),pi=z(Qt),Pb=D(_),rF=z(yr),eF=Bu(me),nF=$a(me),uF=Bp(zn),aF=ht(Ra),fo=k(),Wf=Fr(),iF=ht(qu);var oF=Wt(Sr);var fF=ut(Vr);var Lb=O(ai);var cF=Ko(),pF=Pe(Le);var lF=Eb()()();var _F=function(t){return function(r){return function(e){return Hf(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},vF=function(t){return function(r){return function(e){return Hf(function(n){return function(u){if(u.value instanceof ao)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof io)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 62, column 26 - line 64, column 45): "+[u.value.constructor.name])}(Mf(n))})(e)}}},Ke=function(t){var r=function(e){return function(n){return cn(function(u,o){var p=n.ids();e.raiseId(p)();var l=u(Dl([pi(n.makeText({id:p,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),_F(n)(p)(t),tr(Pb)(function(s){return pi(n.attributeParent({id:p,parent:s,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),o);return function(){return o(n.deleteFromCache({id:p})),l()}})}};return new A(r)},m=function(t){return Ke(pi(t))},Uf=function(t){return function(r){var e=function(){var n=function(u){return function(o){return new j(u+1|0,new j(o,u))}};return eF(n)(0)}();return Gu(nF(Ef(e(r))(function(n){return Hf(function(u){return Dl([Hf(R(ui.value))(uF(function(){var o=aF(u.value1+1|0);return function(p){return o(Gr(p))}}())(n)),pi(fi(fo(t(u.value0))))])})(n)})))}},sF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Wf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:iF})}},toElt:function(t){return t}}},Ob=sF();var mF=function(t){return function(r){return function(e){return pn(Ob)(t)(r)(e)}}};var C=function(t){return function(r){return function(e){var n=function(u){return function(o){return cn(function(p,l){var s=o.ids();u.raiseId(s)();var b=p(oF(Dl(fF([pi(o.makeElement({id:s,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),vF(o)(s)(r)])(tr([])(function(g){return[pi(o.attributeParent({id:s,parent:g,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(mF({parent:new v(s),scope:u.scope,ez:!0,raiseId:function(g){return rF(void 0)},pos:L.value,dynFamily:L.value})(o)(e)),l);return function(){return l(o.deleteFromCache({id:s})),b()}})}};return n}}};var Rb=function(){return function(t){return function(r){return lF(Ob)({fromEltO1:fo,fromEltO2:fo,toElt:fo,wrapElt:function(e){return new A(C("div")(Pb)(cF(e)))},giveNewParent:function(e){return function(n){return function(u){return Wf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(Wf(e))}})(Lb(Wf)(t))(pF(Lb(function(e){return e(void 0)}))(fo(r)))}}};var Br=function(){function t(){}return t.value=new t,t}();var Jr={attr:function(t){return function(r){return a({key:"href",value:c(r)})}}};var bF=J(q),Ar=function(){function t(){}return t.value=new t,t}(),ju={attr:function(t){return function(r){return a({key:"click",value:K(R(bF(r)(!0)))})}}};var Kr={attr:function(t){return function(r){return a({key:"click",value:K(r)})}}};var be=function(){function t(){}return t.value=new t,t}();var li={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Nb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Bb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Wb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Hb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Ub={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var qb=k(),po=function(t){return function(r){return new A(C("a")(t)(qb(S(qb(h($)(r))))))}};var Vb=k(),qf=function(t){return function(r){return new A(C("div")(t)(Vb(S(Vb(h($)(r))))))}},mr=qf(D(_));var Gb=k(),Ju=function(t){return function(r){return new A(C("span")(t)(Gb(S(Gb(h($)(r))))))}},lo=Ju(D(_));var kl=function(){function t(){}return t.value=new t,t}();var jb={attr:function(t){return function(r){return a({key:"cx",value:c(r)})}}};var Al=function(){function t(){}return t.value=new t,t}();var Xb={attr:function(t){return function(r){return a({key:"cy",value:c(r)})}}};var dl=function(){function t(){}return t.value=new t,t}();var Jb={attr:function(t){return function(r){return a({key:"fill",value:c(r)})}}};var yl=function(){function t(){}return t.value=new t,t}();var Kb={attr:function(t){return function(r){return a({key:"height",value:c(r)})}}};var gl=function(){function t(){}return t.value=new t,t}();var Qb={attr:function(t){return function(r){return a({key:"r",value:c(r)})}}};var Sl=function(){function t(){}return t.value=new t,t}();var Yb={attr:function(t){return function(r){return a({key:"stroke",value:c(r)})}}};var $l=function(){function t(){}return t.value=new t,t}();var Zb={attr:function(t){return function(r){return a({key:"stroke-width",value:c(r)})}}};var _o=function(){function t(){}return t.value=new t,t}(),tD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var rD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var nD=k(),$e=function(t){return function(r){return new A(C("button")(t)(nD(S(nD(h($)(r))))))}},Cl=$e(D(_));var uD=k(),hl=function(t){return function(r){return new A(C("circle")(t)(uD(S(uD(h($)(r))))))}};var aD=k(),iD=function(t){return function(r){return new A(C("code")(t)(aD(S(aD(h($)(r))))))}},Pr=iD(D(_));var oD=k(),fD=function(t){return function(r){return new A(C("i")(t)(oD(S(oD(h($)(r))))))}},Fl=fD(D(_));var cD=k(),pD=function(t){return function(r){return new A(C("li")(t)(cD(S(cD(h($)(r))))))}},Tl=pD(D(_));var lD=k(),_D=function(t){return function(r){return new A(C("pre")(t)(lD(S(lD(h($)(r))))))}},Or=_D(D(_));var vD=k(),xl=function(t){return function(r){return new A(C("svg")(t)(vD(S(vD(h($)(r))))))}};var sD=k(),mD=function(t){return function(r){return new A(C("ul")(t)(sD(S(sD(h($)(r))))))}},El=mD(D(_));var Gn=z(Ln),xF=D(Kv),Vf=function(){function t(){}return t.value=new t,t}(),_i=function(){function t(){}return t.value=new t,t}(),vi=function(){function t(){}return t.value=new t,t}(),si=function(){function t(){}return t.value=new t,t}(),mi=function(){function t(){}return t.value=new t,t}(),bi=function(){function t(){}return t.value=new t,t}(),Di=function(){function t(){}return t.value=new t,t}(),ki=function(){function t(){}return t.value=new t,t}(),Ai=function(){function t(){}return t.value=new t,t}(),di=function(){function t(){}return t.value=new t,t}(),bD=function(t){return t==="Intro"?Gn(Vf.value):t==="HelloWorld"?Gn(_i.value):t==="SimpleComponent"?Gn(vi.value):t==="PURSX1"?Gn(si.value):t==="PURSX2"?Gn(mi.value):t==="Events"?Gn(bi.value):t==="Effects"?Gn(Di.value):t==="Events2"?Gn(ki.value):t==="Portals"?Gn(Ai.value):t==="SSR"?Gn(di.value):xF};function Ml(){window.scrollTo(0,0)}var ae=Ml;var kD=D(_),AD=Wt(Sr),MF=O(Tr),wF=Pe(Le),IF=bn(Ft)(_),DD=z(Qt),LF=z(yr),PF={reflectType:function(){return"~"}},OF=Fr(),RF=ht(qu),NF=k();var Hr={pursxToElement:function(t){return function(r){return function(e){return{cache:zu,element:function(n){return function(u){return kD}}}}}}},wl=function(t){return t.pursxToElement},ie=function(){return function(t){var r=wl(t);return function(e){var n=Fa(e);return function(u){var o=wf(u)();return{pursxToElement:function(p){return function(l){return function(s){var b=r(p)(tt.value)(s);return{cache:ii(n(tt.value))(!0)(b.cache),element:function(g){return function(P){return AD(MF(wF(Mf)(function(B){if(B.value instanceof ao)return P.setProp({id:n(tt.value)+("@!%"+p),key:B.key,value:B.value.value0});if(B.value instanceof io)return P.setCb({id:n(tt.value)+("@!%"+p),key:B.key,value:B.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4578, column 38 - line 4588, column 24): "+[B.value.constructor.name])}))(o(tt.value)(s)))(b.element(g)(P))}}}}}}}}}}};var Il=function(t){var r=Fa(t);return function(e){var n=Fa(e);return function(){return function(){return function(u){var o=wl(u);return function(p){return function(l){return function(s){var b=function(g){return function(P){return cn(function(B,N){var f=P.ids(),d=P.ids();g.raiseId(f)();var at=o(d)(tt.value)(s),X=B(IF([DD(P.makePursx({id:f,parent:g.parent,cache:at.cache,dynFamily:g.dynFamily,pos:g.pos,pxScope:d,scope:g.scope,html:r(l),verb:n(p)})),at.element(g)(P),tr(kD)(function(Ot){return DD(P.attributeParent({id:f,parent:Ot,pos:g.pos,dynFamily:g.dynFamily,ez:!1}))})(g.parent)]),N);return function(){return N(P.deleteFromCache({id:f})),X()}})}};return new A(b)}}}}}}}},Ur=function(t){var r=Il(t)(PF)()();return function(){return function(){return function(e){return r(e)(tt.value)}}}},dD=function(t){var r=Ur(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},BF=function(t){return function(r){return function(e){return pn({doLogic:function(n){return function(u){return function(o){return u.sendToPos({id:o,pos:n})}}},ids:function(n){return function(u){return u.ids}(OF(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:RF})}},toElt:function(n){return n}})(t)(r)(NF(e))}}},oe=function(){return function(t){var r=wl(t);return function(e){var n=Fa(e);return function(u){var o=wf(u)();return{pursxToElement:function(p){return function(l){return function(s){var b=o(tt.value)(s),g=r(p)(tt.value)(s);return{cache:ii(n(tt.value))(!1)(g.cache),element:function(P){return function(B){return AD(BF({parent:new v(n(tt.value)+("@!%"+p)),scope:P.scope,raiseId:function(N){return LF(void 0)},pos:P.pos,ez:!1,dynFamily:L.value})(B)(b))(g.element(P)(B))}}}}}}}}}}};var Ll=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState')
import Deku.Do as Deku
import Deku.Pursx ((~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState'
  myDom ~~
    { myli: pure (D.Style := "background-color:rgb(200,240,210);")
    , somethingNew:
        ( D.button (pure (D.OnClick := push (Just unit)))
            [ text
                $ (compact event $> "Thanks for clicking me!") <|>
                    pure "I was dynamically inserted"
            ]
        )
    }`,Pl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Ol=`module Main where

import Prelude

import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState unit
  portal
    ( map
        ( \\i -> D.video
            (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
            [ D.source
                (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                []
            ]
        )
        ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
            : "https://www.w3schools.com/jsref/movie.mp4"
            : V.empty
        )
    )
    \\v _ -> do
      let
        p0 :: Domable _ _
        p0 = index (Proxy :: _ 0) v

        p1 :: Domable _ _
        p1 = index (Proxy :: _ 1) v

        ev :: Boolean -> Event Boolean
        ev b = fold (\\a _ -> not a) b event

        flips :: Boolean -> Domable _ _
        flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
      D.div_
        [ D.button (pure $ D.OnClick := push unit)
            [ text_ "Switch videos" ]
        , D.div_ [ D.span_ [ flips true ], flips false ]
        ]
`,Rl=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,Nl=`module Main where

import Prelude

import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn)
import Deku.DOM as D
import Deku.Hooks (useDyn_, useState')
import Deku.Do as Deku
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

main :: Effect Unit
main = runInBody Deku.do
  pushAction /\\ actionEvent <- useState'
  let
    accumulateTextAndEmitOnSubmit :: Event String
    accumulateTextAndEmitOnSubmit = compact
      ( mapAccum
          ( \\a b -> case b of
              AddTodo -> a /\\ Just a
              ChangeText s -> s /\\ Nothing
          )
          ""
          actionEvent
      )

    top :: Nut
    top =
      D.div_
        [ D.input
            ( oneOf
                [ textInput $ pure (pushAction <<< ChangeText)
                , keyUp $ pure \\evt -> do
                    when (code evt == "Enter") $ do
                      pushAction AddTodo
                ]
            )
            []
        , D.button
            (click $ pure $ pushAction AddTodo)
            [ text_ "Add" ]
        ]
  D.div_
    [ top
    , dyn
        $ map
            ( \\txt -> Deku.do
                { remove, sendTo } <- useDyn_
                D.div_
                  [ text_ txt
                  , D.button
                      (click $ pure (sendTo 0))
                      [ text_ "Prioritize" ]
                  , D.button
                      (click $ pure remove)
                      [ text_ "Delete" ]
                  ]
            )
            accumulateTextAndEmitOnSubmit
    ]

`,Bl=`module Main where

import Prelude

import Data.Tuple.Nested ((/\\))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)

main :: Effect Unit
main = runInBody Deku.do
  setButtonClicked /\\ buttonClicked <- useState unit
  setSliderMoved /\\ sliderMoved <- useState 50.0
  let
    countUp :: Event Int
    countUp = fold (\\a _ -> 1 + a) (-1) buttonClicked
  D.div_
    [ D.button
        (click_ (setButtonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            (("Val: " <> _) <<< show <$> countUp)
        ]
    , D.div_
        [ D.input
            (slider (pure setSliderMoved))
            []
        , D.div_
            [ text
                (("Val: " <> _) <<< show <$> sliderMoved)
            ]
        ]
    ]
`,Wl=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody Deku.do
  setUIAction /\\ uiAction <- useState Initial
  let
    split :: { left :: Event Unit, right :: Event String }
    split = separate $ compact $
      map
        ( case _ of
            Loading -> Just $ Left unit
            Result s -> Just $ Right s
            _ -> Nothing
        )
        uiAction
    { left: loading, right: result } = split
  D.div_
    [ D.div_
        [ D.button (click_ (clickCb setUIAction))
            [ text
                ( pure clickText
                    <|> (loading $> "Loading...")
                    <|> (result $> clickText)
                )
            ]
        ]
    , D.div
        ( (pure (D.Style := "display: none;")) <|>
            ( compact
                ( mapAccum
                    ( \\b _ -> (b && false) /\\
                        if b then Just unit else Nothing
                    )
                    true
                    result
                ) $> (D.Style := "display: block;")
            )
        )
        [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
    ]
`,Hl=`module Main where

import Prelude

import Data.Foldable (oneOf)
import Deku.Attribute ((!:=), (:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  ( D.div_
      [ D.button_ [ text_ "I do nothing" ]
      , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
      , D.div_
          [ D.a (pure $ D.Href := "https://example.com")
              [ text_ "foo " ]
          , D.i_ [ text_ " bar " ]
          , D.span (pure $ D.Style := "font-weight: 800;")
              [ text_ " baz" ]
          ]
      , D.svg (oneOf [ D.Height !:= "100", D.Width !:= "100" ])
          [ D.circle
              ( oneOf
                  [ D.Cx !:= "50"
                  , D.Cy !:= "50"
                  , D.R !:= "40"
                  , D.Stroke !:= "black"
                  , D.StrokeWidth !:= "3"
                  , D.Fill !:= "red"
                  ]
              )
              []
          ]

      ]
  )`,Ul=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,ql=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,zl=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function yD(t){return t.target}function qr(t){return function(){return t.preventDefault()}}function gD(t,r,e){return t==null?r:e(t)}function Vl(t){return t}var yi=tr(null)(Vl),Yr=function(t){return gD(t,L.value,v.create)};var Jf=function(t){return Yr(yD(t))};var $D=oe(),GF=Ur({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()($D(ie()($D(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),jF=O(br),XF=z(ua),Gl=z(Qt),CD=Lt(Jr),JF=Lt(li),hD=bn(Ft)(_),KF=_u(Kb),QF=_u(rD),YF=_u(jb),ZF=_u(Xb),tT=_u(Qb),rT=_u(Yb),eT=_u(Zb),nT=_u(Jb),uT=wr(Ft)(_),aT=Lt(Kr),FD=pr(Ir),iT=function(){return tt.value}(),TD=function(t){return GF(iT)({code:Or([Pr([m(Hl)])]),result:mr([Cl([m("I do nothing")]),El(jF(function(r){return Tl(XF(m(r)))})(["A","B","C"])),mr([po(Gl(CD(Br.value)("https://example.com")))([m("foo ")]),Fl([m(" bar ")]),Ju(Gl(JF(be.value)("font-weight: 800;")))([m(" baz")])]),xl(hD([KF(yl.value)("100"),QF(_o.value)("100")]))([hl(hD([YF(kl.value)("50"),ZF(Al.value)("50"),tT(gl.value)("40"),rT(Sl.value)("black"),eT($l.value)("3"),nT(dl.value)("red")]))([])])]),next:uT(Gl)([aT(Ar.value)(kr(function(r){return FD(FD(qr(r))(t.dpage(si.value)))(ae)})),CD(Br.value)(t.slug+"pursx1/")])})};function xD(t,r,e,n,u){return function(o,p){var l=t.newXHR(),s=t.fixupUrl(u.url,l);if(l.open(u.method||"GET",s,!0,u.username,u.password),u.headers)try{for(var b=0,g;(g=u.headers[b])!=null;b++)l.setRequestHeader(g.field,g.value)}catch(B){o(B)}var P=function(B){return function(){o(new Error(B))}};return l.onerror=P(e),l.ontimeout=P(r),l.onload=function(){p({status:l.status,statusText:l.statusText,headers:l.getAllResponseHeaders().split(`\r
`).filter(function(B){return B.length>0}).map(function(B){var N=B.indexOf(":");return n(B.substring(0,N))(B.substring(N+2))}),body:l.response})},l.responseType=u.responseType,l.withCredentials=u.withCredentials,l.timeout=u.timeout,l.send(u.content),function(B,N,f){try{l.abort()}catch(d){return N(d)}return f()}}}var Kf="application/json",ED="application/x-www-form-urlencoded";var wD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ID=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),LD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),PD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),OD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Xl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),RD=function(t){return t instanceof jl?new v(ED):t instanceof Xl?new v(Kf):L.value};var ND=Fr();var Qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Yf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),BD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),WD=function(t){if(t instanceof Qf||t instanceof Yf)return ND(t.value0);if(t instanceof BD)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var Jl=function(t){if(t instanceof Qf)return"Accept";if(t instanceof Yf)return"Content-Type";if(t instanceof BD)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var HD=Nt(Bt),Kl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ql=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Yl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Zl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Zf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),UD=function(t){if(t instanceof Kl)return"arraybuffer";if(t instanceof Ql)return"blob";if(t instanceof Yl)return"document";if(t instanceof vo||t instanceof Zl)return"text";if(t instanceof Zf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},qD=function(t){return t instanceof vo?new v(Kf):L.value};var zD=function(){return new vo(HD)}(),VD=function(){return new Zf(HD)}();var jD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function gi(t){return new Error(t)}function so(t){return t.message}function mo(t){return function(){throw t}}var hn=function(t){return t.throwError};var Du=function(t){return t.catchError};var rc=function(t){var r=Du(t),e=t.MonadThrow0().Monad0(),n=O(e.Bind1().Apply0().Functor0()),u=z(e.Applicative0());return function(o){return r(n(ct.create)(o))(function(p){return u(lt.create(p))})}};var Jn=function(t){return t.state};var ko=function(t){var r=Jn(t);return function(e){return r(function(n){var u=e(n);return new j(u,u)})}};var Fn=function(t){return t.liftEffect};var sT=O(qa);var t_=function(t){return t};var r_=function(t){return t};var ic=function(t){return function(r){return t(r)}},JD=function(t){var r=O(t);return{map:function(e){return ic(r(sT(e)))}}};var e_=function(t){return{Applicative0:function(){return So(t)},Bind1:function(){return n_(t)}}},n_=function(t){var r=dt(t.Bind1()),e=z(t.Applicative0());return{bind:function(n){return function(u){return r(n)(nn(function(o){return e(lt.create(o))})(function(o){var p=u(o);return p}))}},Apply0:function(){return KD(t)}}},KD=function(t){var r=JD(t.Bind1().Apply0().Functor0());return{apply:Oe(e_(t)),Functor0:function(){return r}}},So=function(t){return{pure:function(){var r=z(t.Applicative0());return function(e){return t_(r(ct.create(e)))}}(),Apply0:function(){return KD(t)}}};var QD=function(t){var r=e_(t);return{throwError:function(){var e=z(t.Applicative0());return function(n){return t_(e(lt.create(n)))}}(),Monad0:function(){return r}}};var YD=function(t){var r=ut(t);return function(e){var n=e.Bind1(),u=dt(n),o=z(e.Applicative0()),p=JD(n.Apply0().Functor0());return{alt:function(l){return function(s){return u(l)(function(b){if(b instanceof ct)return o(new ct(b.value0));if(b instanceof lt)return u(s)(function(g){if(g instanceof ct)return o(new ct(g.value0));if(g instanceof lt)return o(new lt(r(b.value0)(g.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[g.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[b.constructor.name])})}},Functor0:function(){return p}}}};var bT=Fr();var ZD=function(t){return bT(r_(t))};function u_(t){return JSON.stringify(t)}function a_(t){return function(r){return JSON.stringify(r,null,t)}}var tk=zu;function ek(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var nk=function(t){return ek(lt.create,ct.create,t)};var fc=function(t){return function(r){return function(e){return e.replace(t,r)}}};var i_=function(t){return function(r){return r.join(t)}};function CT(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function ik(t,r,e){try{return r(CT(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var cc=function(){return Jp(ik)(R(L.value))(v.create)}();var TT=jt(ca),ok=O(hr),xT=Ne(ba)(Ln);var ET=function(t){return t};var fk=function(){var t=function(n){if(n.value1 instanceof L)return cc(n.value0);if(n.value1 instanceof v)return TT(ok(function(u){return function(o){return u+("="+o)}})(cc(n.value0)))(cc(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=ok(i_("&")),e=xT(t);return function(n){return r(e(ET(n)))}}();var wT=function(){function t(){}return t.value=new t,t}(),Co=function(){function t(){}return t.value=new t,t}(),IT=function(){function t(){}return t.value=new t,t}(),ck=function(){function t(){}return t.value=new t,t}(),pk=function(){function t(){}return t.value=new t,t}(),lk=function(){function t(){}return t.value=new t,t}(),LT=function(){function t(){}return t.value=new t,t}(),PT=function(){function t(){}return t.value=new t,t}(),OT=function(){function t(){}return t.value=new t,t}(),RT=function(){function t(){}return t.value=new t,t}(),NT=function(){function t(){}return t.value=new t,t}(),BT=function(){function t(){}return t.value=new t,t}(),WT=function(){function t(){}return t.value=new t,t}(),HT=function(){function t(){}return t.value=new t,t}(),UT=function(){function t(){}return t.value=new t,t}(),_k=function(){function t(){}return t.value=new t,t}();var qT=function(t){return t},zT={show:function(t){if(t instanceof wT)return"OPTIONS";if(t instanceof Co)return"GET";if(t instanceof IT)return"HEAD";if(t instanceof ck)return"POST";if(t instanceof pk)return"PUT";if(t instanceof lk)return"DELETE";if(t instanceof LT)return"TRACE";if(t instanceof PT)return"CONNECT";if(t instanceof OT)return"PROPFIND";if(t instanceof RT)return"PROPPATCH";if(t instanceof NT)return"MKCOL";if(t instanceof BT)return"COPY";if(t instanceof WT)return"MOVE";if(t instanceof HT)return"LOCK";if(t instanceof UT)return"UNLOCK";if(t instanceof _k)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var vk=nn(vt(zT))(qT);var bk=function(){var t=Af(wp);return function(r){return df(t(r))}}();var Dk=function(t){return t.value0};var Be=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",o="Async",p="Bind",l="Bracket",s="Fork",b="Sequential",g="Map",P="Apply",B="Alt",N="Cons",f="Resume",d="Release",at="Finalizer",X="Finalized",Ot="Forked",Rt="Fiber",Kt="Thunk";function et(pt,ar,xr,cr){this.tag=pt,this._1=ar,this._2=xr,this._3=cr}function dr(pt){var ar=function(xr,cr,yt){return new et(pt,xr,cr,yt)};return ar.tag=pt,ar}function fe(pt){return new et(r,void 0)}function ot(pt){try{pt()}catch(ar){setTimeout(function(){throw ar},0)}}function V(pt,ar,xr){try{return ar(xr())}catch(cr){return pt(cr)}}function H(pt,ar,xr){try{return ar(xr)()}catch(cr){return xr(pt(cr))(),fe}}var st=function(){var pt=1024,ar=0,xr=0,cr=new Array(pt),yt=!1;function rt(){var fr;for(yt=!0;ar!==0;)ar--,fr=cr[xr],cr[xr]=void 0,xr=(xr+1)%pt,fr();yt=!1}return{isDraining:function(){return yt},enqueue:function(fr){var Gt,Cr;ar===pt&&(Cr=yt,rt(),yt=Cr),cr[(xr+ar)%pt]=fr,ar++,yt||rt()}}}();function kt(pt){var ar={},xr=0,cr=0;return{register:function(yt){var rt=xr++;yt.onComplete({rethrow:!0,handler:function(fr){return function(){cr--,delete ar[rt]}}})(),ar[rt]=yt,cr++},isEmpty:function(){return cr===0},killAll:function(yt,rt){return function(){if(cr===0)return rt();var fr=0,Gt={};function Cr(vr){Gt[vr]=ar[vr].kill(yt,function(Nr){return function(){delete Gt[vr],fr--,pt.isLeft(Nr)&&pt.fromLeft(Nr)&&setTimeout(function(){throw pt.fromLeft(Nr)},0),fr===0&&rt()}})()}for(var te in ar)ar.hasOwnProperty(te)&&(fr++,Cr(te));return ar={},xr=0,cr=0,function(vr){return new et(u,function(){for(var Nr in Gt)Gt.hasOwnProperty(Nr)&&Gt[Nr]()})}}}}}var Me=0,Rr=1,du=2,La=3,Pa=4,he=5,hi=6;function Pc(pt,ar,xr){var cr=0,yt=Me,rt=xr,fr=null,Gt=null,Cr=null,te=null,vr=null,Nr=0,ta=0,tn=null,yu=!0;function gu(gt){for(var Ct,Yt,er;;)switch(Ct=null,Yt=null,er=null,yt){case du:yt=Rr;try{rt=Cr(rt),te===null?Cr=null:(Cr=te._1,te=te._2)}catch(ce){yt=he,fr=pt.left(ce),rt=null}break;case La:pt.isLeft(rt)?(yt=he,fr=rt,rt=null):Cr===null?yt=he:(yt=du,rt=pt.fromRight(rt));break;case Rr:switch(rt.tag){case p:Cr&&(te=new et(N,Cr,te)),Cr=rt._2,yt=Rr,rt=rt._1;break;case r:Cr===null?(yt=he,rt=pt.right(rt._1)):(yt=du,rt=rt._1);break;case u:yt=La,rt=V(pt.left,pt.right,rt._1);break;case o:yt=Pa,rt=H(pt.left,rt._1,function(ce){return function(){cr===gt&&(cr++,st.enqueue(function(){cr===gt+1&&(yt=La,rt=ce,gu(cr))}))}});return;case e:yt=he,fr=pt.left(rt._1),rt=null;break;case n:Cr===null?vr=new et(N,rt,vr,Gt):vr=new et(N,rt,new et(N,new et(f,Cr,te),vr,Gt),Gt),Cr=null,te=null,yt=Rr,rt=rt._1;break;case l:Nr++,Cr===null?vr=new et(N,rt,vr,Gt):vr=new et(N,rt,new et(N,new et(f,Cr,te),vr,Gt),Gt),Cr=null,te=null,yt=Rr,rt=rt._1;break;case s:yt=La,Ct=Pc(pt,ar,rt._2),ar&&ar.register(Ct),rt._1&&Ct.run(),rt=pt.right(Ct);break;case b:yt=Rr,rt=dy(pt,ar,rt._1);break}break;case he:if(Cr=null,te=null,vr===null)yt=hi,rt=Gt||fr||rt;else switch(Ct=vr._3,er=vr._1,vr=vr._2,er.tag){case n:Gt&&Gt!==Ct&&Nr===0?yt=he:fr&&(yt=Rr,rt=er._2(pt.fromLeft(fr)),fr=null);break;case f:Gt&&Gt!==Ct&&Nr===0||fr?yt=he:(Cr=er._1,te=er._2,yt=du,rt=pt.fromRight(rt));break;case l:Nr--,fr===null&&(Yt=pt.fromRight(rt),vr=new et(N,new et(d,er._2,Yt),vr,Ct),(Gt===Ct||Nr>0)&&(yt=Rr,rt=er._3(Yt)));break;case d:vr=new et(N,new et(X,rt,fr),vr,Gt),yt=Rr,Gt&&Gt!==Ct&&Nr===0?rt=er._1.killed(pt.fromLeft(Gt))(er._2):fr?rt=er._1.failed(pt.fromLeft(fr))(er._2):rt=er._1.completed(pt.fromRight(rt))(er._2),fr=null,Nr++;break;case at:Nr++,vr=new et(N,new et(X,rt,fr),vr,Gt),yt=Rr,rt=er._1;break;case X:Nr--,yt=he,rt=er._1,fr=er._2;break}break;case hi:for(var Mr in tn)tn.hasOwnProperty(Mr)&&(yu=yu&&tn[Mr].rethrow,ot(tn[Mr].handler(rt)));tn=null,Gt&&fr?setTimeout(function(){throw pt.fromLeft(fr)},0):pt.isLeft(rt)&&yu&&setTimeout(function(){if(yu)throw pt.fromLeft(rt)},0);return;case Me:yt=Rr;break;case Pa:return}}function Er(gt){return function(){if(yt===hi)return yu=yu&&gt.rethrow,gt.handler(rt)(),function(){};var Ct=ta++;return tn=tn||{},tn[Ct]=gt,function(){tn!==null&&delete tn[Ct]}}}function Tt(gt,Ct){return function(){if(yt===hi)return Ct(pt.right(void 0))(),function(){};var Yt=Er({rethrow:!1,handler:function(){return Ct(pt.right(void 0))}})();switch(yt){case Me:Gt=pt.left(gt),yt=hi,rt=Gt,gu(cr);break;case Pa:Gt===null&&(Gt=pt.left(gt)),Nr===0&&(yt===Pa&&(vr=new et(N,new et(at,rt(gt)),vr,Gt)),yt=he,rt=null,fr=null,gu(++cr));break;default:Gt===null&&(Gt=pt.left(gt)),Nr===0&&(yt=he,rt=null,fr=null)}return Yt}}function Jt(gt){return function(){var Ct=Er({rethrow:!1,handler:gt})();return yt===Me&&gu(cr),Ct}}return{kill:Tt,join:Jt,onComplete:Er,isSuspended:function(){return yt===Me},run:function(){yt===Me&&(st.isDraining()?gu(cr):st.enqueue(function(){gu(cr)}))}}}function Ay(pt,ar,xr,cr){var yt=0,rt={},fr=0,Gt={},Cr=new Error("[ParAff] Early exit"),te=null,vr=t;function Nr(Er,Tt,Jt){var gt=Tt,Ct=null,Yt=null,er=0,Mr={},ce,Fi;t:for(;;)switch(ce=null,gt.tag){case Ot:if(gt._3===t&&(ce=rt[gt._1],Mr[er++]=ce.kill(Er,function(yy){return function(){er--,er===0&&Jt(yy)()}})),Ct===null)break t;gt=Ct._2,Yt===null?Ct=null:(Ct=Yt._1,Yt=Yt._2);break;case g:gt=gt._2;break;case P:case B:Ct&&(Yt=new et(N,Ct,Yt)),Ct=gt,gt=gt._1;break}if(er===0)Jt(pt.right(void 0))();else for(Fi=0,ce=er;Fi<ce;Fi++)Mr[Fi]=Mr[Fi]();return Mr}function ta(Er,Tt,Jt){var gt,Ct,Yt,er,Mr,ce;pt.isLeft(Er)?(gt=Er,Ct=null):(Ct=Er,gt=null);t:for(;;){if(Yt=null,er=null,Mr=null,ce=null,te!==null)return;if(Tt===null){cr(gt||Ct)();return}if(Tt._3!==t)return;switch(Tt.tag){case g:gt===null?(Tt._3=pt.right(Tt._1(pt.fromRight(Ct))),Ct=Tt._3):Tt._3=gt;break;case P:if(Yt=Tt._1._3,er=Tt._2._3,gt){if(Tt._3=gt,Mr=!0,ce=fr++,Gt[ce]=Nr(Cr,gt===Yt?Tt._2:Tt._1,function(){return function(){delete Gt[ce],Mr?Mr=!1:Jt===null?ta(gt,null,null):ta(gt,Jt._1,Jt._2)}}),Mr){Mr=!1;return}}else{if(Yt===t||er===t)return;Ct=pt.right(pt.fromRight(Yt)(pt.fromRight(er))),Tt._3=Ct}break;case B:if(Yt=Tt._1._3,er=Tt._2._3,Yt===t&&pt.isLeft(er)||er===t&&pt.isLeft(Yt))return;if(Yt!==t&&pt.isLeft(Yt)&&er!==t&&pt.isLeft(er))gt=Ct===Yt?er:Yt,Ct=null,Tt._3=gt;else if(Tt._3=Ct,Mr=!0,ce=fr++,Gt[ce]=Nr(Cr,Ct===Yt?Tt._2:Tt._1,function(){return function(){delete Gt[ce],Mr?Mr=!1:Jt===null?ta(Ct,null,null):ta(Ct,Jt._1,Jt._2)}}),Mr){Mr=!1;return}break}Jt===null?Tt=null:(Tt=Jt._1,Jt=Jt._2)}}function tn(Er){return function(Tt){return function(){delete rt[Er._1],Er._3=Tt,ta(Tt,Er._2._1,Er._2._2)}}}function yu(){var Er=Rr,Tt=xr,Jt=null,gt=null,Ct,Yt;t:for(;;)switch(Ct=null,Yt=null,Er){case Rr:switch(Tt.tag){case g:Jt&&(gt=new et(N,Jt,gt)),Jt=new et(g,Tt._1,t,t),Tt=Tt._2;break;case P:Jt&&(gt=new et(N,Jt,gt)),Jt=new et(P,t,Tt._2,t),Tt=Tt._1;break;case B:Jt&&(gt=new et(N,Jt,gt)),Jt=new et(B,t,Tt._2,t),Tt=Tt._1;break;default:Yt=yt++,Er=he,Ct=Tt,Tt=new et(Ot,Yt,new et(N,Jt,gt),t),Ct=Pc(pt,ar,Ct),Ct.onComplete({rethrow:!1,handler:tn(Tt)})(),rt[Yt]=Ct,ar&&ar.register(Ct)}break;case he:if(Jt===null)break t;Jt._1===t?(Jt._1=Tt,Er=Rr,Tt=Jt._2,Jt._2=t):(Jt._2=Tt,Tt=Jt,gt===null?Jt=null:(Jt=gt._1,gt=gt._2))}for(vr=Tt,Yt=0;Yt<yt;Yt++)rt[Yt].run()}function gu(Er,Tt){te=pt.left(Er);var Jt;for(var gt in Gt)if(Gt.hasOwnProperty(gt)){Jt=Gt[gt];for(gt in Jt)Jt.hasOwnProperty(gt)&&Jt[gt]()}Gt=null;var Ct=Nr(Er,vr,Tt);return function(Yt){return new et(o,function(er){return function(){for(var Mr in Ct)Ct.hasOwnProperty(Mr)&&Ct[Mr]();return fe}})}}return yu(),function(Er){return new et(o,function(Tt){return function(){return gu(Er,Tt)}})}}function dy(pt,ar,xr){return new et(o,function(cr){return function(){return Ay(pt,ar,xr,cr)}})}return et.EMPTY=t,et.Pure=dr(r),et.Throw=dr(e),et.Catch=dr(n),et.Sync=dr(u),et.Async=dr(o),et.Bind=dr(p),et.Bracket=dr(l),et.Fork=dr(s),et.Seq=dr(b),et.ParMap=dr(g),et.ParApply=dr(P),et.ParAlt=dr(B),et.Fiber=Pc,et.Supervisor=kt,et.Scheduler=st,et.nonCanceler=fe,et}(),Ak=Be.Pure,dk=Be.Throw;function yk(t){return function(r){return Be.Catch(t,r)}}function gk(t){return function(r){return r.tag===Be.Pure.tag?Be.Pure(t(r._1)):Be.Bind(r,function(e){return Be.Pure(t(e))})}}function Sk(t){return function(r){return Be.Bind(t,r)}}var $k=Be.Sync;var ho=Be.Async;function Ck(t,r){return function(){return Be.Fiber(t,null,r)}}var VT=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return Be.Async(function(u){return function(){var o=t(n,u(e()));return function(){return Be.Sync(function(){return e(r(n,o))})}}})}}(),GT=Be.Seq;var ox=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var fx=or(q);var p_={map:gk};var cx=function(){var t=function(n){if(n instanceof ct)return n.value0;if(n instanceof lt)return wu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof lt)return n.value0;if(n instanceof ct)return wu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof lt)return!0;if(n instanceof ct)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:lt.create,right:ct.create}}(),px=function(t){return Ck(cx,t)},lx=function(t){return function(){var e=px(t)();return e.run(),e}},l_=function(t){return fx(lx(t))};var __={Applicative0:function(){return pc},Bind1:function(){return v_}},v_={bind:Sk,Apply0:function(){return Ek(0)}},pc={pure:Ak,Apply0:function(){return Ek(0)}},Ek=ox("applyAff","Effect.Aff",function(){return{apply:Oe(__),Functor0:function(){return p_}}});var _x=z(pc);var s_={liftEffect:$k,Monad0:function(){return __}};var vx={throwError:dk,Monad0:function(){return __}},Mk={catchError:yk,MonadThrow0:function(){return vx}};var wk=R(_x(void 0));var Ik=function(t){return ho(function(r){return function(){var n=t(function(u){return r(lt.create(u))()},function(u){return r(ct.create(u))()});return function(u){return ho(function(o){return function(){return n(u,function(l){return o(lt.create(l))()},function(l){return o(ct.create(l))()}),wk}})}}})};function _c(t){return Object.prototype.toString.call(t).slice(8,-1)}var Lk=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var Pk=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Te=function(t){return t};var vc=isFinite;var m_=Math.floor;var Fo=function(t){return function(r){return t%r}};var Ok=wn(Li),Rk=eu(Li);var sc=function(){return Pk(v.create)(L.value)}(),yx=function(t){if(!vc(t))return 0;if(t>=Te(Ok))return Ok;if(t<=Te(Rk))return Rk;if(Wr)return le(0)(sc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var D_=function(t){return yx(m_(t))};var Tx=vt(ze),xx=vt(sn);var k_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Gk=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ex=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Mx=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Qu=Y,wx=Y;var bc=function(t){if(t instanceof k_)return t.value0;if(t instanceof Ex)return"Error at array index "+(xx(t.value0)+(": "+bc(t.value1)));if(t instanceof Mx)return"Error at property "+(Tx(t.value0)+(": "+bc(t.value1)));if(t instanceof Gk)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var A_=function(t){var r=hn(QD(t));return function(e){return r(bk(e))}};var jk=function(t){var r=z(So(t)),e=A_(t);return function(n){return function(u){if(_c(u)===n)return r(wx(u));if(Wr)return e(new Gk(n,_c(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var d_=z(So(Re)),Lx=A_(Re),Ea=jk(Re),Xk=Wt(YD(im)(Re)),Px=Ho(n_(Re)),Dc=O(hr),Ox=hu(Ft)(mn),Rx=ht(En),Nx=nu(de),Bx=O(br),Wx=Ue(p_),Hx=rc(Mk),Ux=z(pc);var y_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),g_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),S_=function(){function t(){}return t.value=new t,t}(),$_=function(){function t(){}return t.value=new t,t}(),C_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Jk=function(t){return function(r){var e=function(g){return g===""?d_(tk):nn(function(P){return Lx(k_.create(P))})(d_)(nk(g))},n=function(){if(r.responseFormat instanceof Kl)return Ea("ArrayBuffer");if(r.responseFormat instanceof Ql)return Ea("Blob");if(r.responseFormat instanceof Yl)return function(g){return Xk(Ea("Document")(g))(Xk(Ea("XMLDocument")(g))(Ea("HTMLDocument")(g)))};if(r.responseFormat instanceof vo)return Px(function(g){return r.responseFormat.value0(e(g))})(Ea("String"));if(r.responseFormat instanceof Zl)return Ea("String");if(r.responseFormat instanceof Zf)return R(r.responseFormat.value0(d_(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(g){if(g instanceof wD)return new ct(g.value0(Qu));if(g instanceof ID)return new ct(Qu(g.value0));if(g instanceof LD)return new ct(Qu(g.value0));if(g instanceof PD)return new ct(Qu(g.value0));if(g instanceof OD)return new ct(Qu(g.value0));if(g instanceof jl)return Hc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(Dc(Qu)(fk(g.value0)));if(g instanceof Xl)return new ct(Qu(u_(g.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[g.constructor.name])},o=function(g){return function(P){return g instanceof v&&!Ox(Ti(Rx)(Jl)(g.value0))(P)?Df(P)(g.value0):P}},p=function(g){return o(Dc(Yf.create)(Nx(RD)(g)))(o(Dc(Qf.create)(qD(r.responseFormat)))(r.headers))},l=function(g){return{method:vk(r.method),url:r.url,headers:Bx(function(P){return{field:Jl(P),value:WD(P)}})(p(r.content)),content:g,responseType:UD(r.responseFormat),username:yi(r.username),password:yi(r.password),withCredentials:r.withCredentials,timeout:le(0)(Dc(function(P){return P})(r.timeout))}},s=function(g){return Wx(Hx(Ik(xD(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",jD.create,l(g)))))(function(P){if(P instanceof ct){var B=ZD(n(P.value0.body));if(B instanceof lt)return new lt(new g_(Dk(B.value0),P.value0));if(B instanceof ct)return new ct({body:B.value0,headers:P.value0.headers,status:P.value0.status,statusText:P.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[B.constructor.name])}if(P instanceof lt)return new lt(function(){var N=so(P.value0),f=N==="AffjaxTimeoutErrorMessageIdent";if(f)return S_.value;var d=N==="AffjaxRequestFailedMessageIdent";return d?$_.value:new C_(P.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[P.constructor.name])})};if(r.content instanceof L)return s(yi(L.value));if(r.content instanceof v){var b=u(r.content.value0);if(b instanceof ct)return s(yi(new v(b.value0)));if(b instanceof lt)return Ux(new lt(new y_(b.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[b.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},h_=function(t){if(t instanceof y_)return"There was a problem with the request content: "+t.value0;if(t instanceof g_)return"There was a problem with the response body: "+bc(t.value0);if(t instanceof S_)return"There was a problem making the request: timeout";if(t instanceof $_)return"There was a problem making the request: request failed";if(t instanceof C_)return"There was a problem making the request: "+so(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},Yu=function(){return{method:new lt(Co.value),url:"/",headers:[],content:L.value,username:L.value,password:L.value,withCredentials:!1,responseFormat:VD,timeout:L.value}}();var F_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var Qk=Jk(F_);var Vx=dt(v_),Yk=Fn(s_),Zk=oe(),Gx=Ur({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Zk(ie()(Zk(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),T_=Je(zn),xo=z(Qt),tA=Lt(Kr),kc=Wt(Sr),x_=J(Tr),rA=Lt(Wb),jx=pu(uo),Xx=Bu(me),Jx=wr(Ft)(_),eA=pr(Ir),Kx=Lt(Jr);var uA=function(){function t(){}return t.value=new t,t}(),E_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Qx=function(){return tt.value}(),nA="Click to get some random user data.",Yx=function(t){return kr(R(function(){return t(uA.value)(),l_(Vx(Qk({method:new lt(Co.value),url:"https://randomuser.me/api/",headers:Yu.headers,content:Yu.content,username:Yu.username,password:Yu.password,withCredentials:Yu.withCredentials,responseFormat:zD,timeout:Yu.timeout}))(function(e){if(e instanceof lt)return Yk(t(new E_("GET /api response failed to decode: "+h_(e.value0))));if(e instanceof ct)return Yk(t(new E_(a_(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},aA=function(t){return Gx(Qx)({code:Or([Pr([m(Wl)])]),result:ci(function(r){return function(e){var n=T_(function(p){return p instanceof uA?new v(new lt(void 0)):p instanceof E_?new v(new ct(p.value0)):L.value})(e),u=T_(function(p){return p instanceof ct?new v(p.value0):L.value})(n),o=T_(function(p){return p instanceof lt?new v(void 0):L.value})(n);return mr([mr([$e(xo(tA(Ar.value)(Yx(r))))([Ke(kc(xo(nA))(kc(x_(o)("Loading..."))(x_(u)(nA))))])]),qf(kc(xo(rA(be.value)("display: none;")))(x_(jx(Xx(function(p){return function(l){return new j(p&&!1,function(){return p?new v(void 0):L.value}())}})(!0)(u)))(rA(be.value)("display: block;"))))([Or([Pr([Ke(kc(xo(""))(u))])])])])}}),next:Jx(xo)([tA(Ar.value)(kr(function(r){return eA(eA(qr(r))(t.dpage(mi.value)))(ae)})),Kx(Br.value)(t.slug+"pursx2/")])})};var iA=k(),Ma=function(t){return function(r){return new A(C("input")(t)(iA(S(iA(h($)(r))))))}};var w_=function(){function t(){}return t.value=new t,t}(),oA={attr:function(t){return function(r){return a({key:"controls",value:c(r)})}}};var Eo=function(){function t(){}return t.value=new t,t}();var Ac={attr:function(t){return function(r){return a({key:"input",value:K(r)})}}};var dc=function(){function t(){}return t.value=new t,t}();var I_={attr:function(t){return function(r){return a({key:"keyup",value:K(r)})}}};var L_=function(){function t(){}return t.value=new t,t}();var pA={attr:function(t){return function(r){return a({key:"src",value:c(r)})}}};var Mo=function(){function t(){}return t.value=new t,t}();var lA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var _A={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var sA=k(),mA=function(t){return function(r){return new A(C("p")(t)(sA(S(sA(h($)(r))))))}},P_=mA(D(_));var bA=k(),O_=function(t){return function(r){return new A(C("source")(t)(bA(S(bA(h($)(r))))))}};var DA=k(),R_=function(t){return function(r){return new A(C("video")(t)(DA(S(DA(h($)(r))))))}};function yc(t){return function(){return t.value}}function N_(t){return function(){return t.valueAsNumber}}function AA(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var o=n;o!=null;){var p=Object.getPrototypeOf(o),l=p.constructor.name;if(l===e)return r(n);if(l==="Object")return t;o=p}return t}var it=function(t){return function(r){return AA(L.value,v.create,t,r)}};var gc=it("HTMLInputElement");function B_(t){return t.code}var W_=it("KeyboardEvent");var gA=O(Tr),bE=Lt(Ac),DE=Ve(ye)(Ge),kE=dt(de),AE=Uo(va),dE=Wt(Sr),SA=z(Qt),yE=Lt(_A);var Sc=function(){var t=dE(SA(yE(Mo.value)("range"))),r=gA(function(e){return bE(Eo.value)(kr(function(n){return DE(kE(Jf(n))(gc))(AE(N_)(e))}))});return function(e){return t(r(e))}}();var H_=function(t){return gA(Lt(t)(Ar.value))},$c=function(t){var r=H_(t);return function(e){return r(SA(e))}};var $A=oe(),gE=Ur({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()($A(ie()($A(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),SE=Bf()(ni({reflectSymbol:function(){return"buttonClicked"}})()()(ni({reflectSymbol:function(){return"sliderMoved"}})()()(Lf)()())()()),$E=$c(ju),q_=Wt(Sr),wo=z(Qt),CA=O(Tr),hA=ut(aa),CE=vt(sn),hE=Nu(me),FE=vt(Pi),TE=wr(Ft)(_),xE=Lt(Kr),FA=pr(Ir),EE=Lt(Jr),ME=function(){return tt.value}(),TA=function(t){return gE(ME)({code:Or([Pr([m(Bl)])]),result:SE(tt.value)(function(r){return function(e){return mr([$e($E(r.buttonClicked(void 0)))([m("Click")]),mr([Ke(q_(wo("Val: 0"))(CA(function(){var n=hA("Val: ");return function(u){return n(CE(u))}}())(hE(function(n){return function(u){return 1+n|0}})(-1)(q_(wo(void 0))(e.buttonClicked)))))]),mr([Ma(Sc(wo(r.sliderMoved)))([]),mr([Ke(q_(wo("Val: 50.0"))(CA(function(){var n=hA("Val: ");return function(u){return n(FE(u))}}())(e.sliderMoved)))])])])}}),next:TE(wo)([xE(Ar.value)(kr(function(r){return FA(FA(qr(r))(t.dpage(Di.value)))(ae)})),EE(Br.value)(t.slug+"effects/")])})};var Cc=function(t){return function(r){return t(r)}};var IE=Wt(Sr),LE=z(Qt);var PE=$a(me);var OE=function(t){return function(r){return PE(Cc(function(e){return Vu(ja(e))})(function(e){return IE(LE(Ib(t)(r({remove:e.value0(bl),sendTo:function(n){return e.value0(ml(n))}}))))(e.value1)}))}},EA=OE(0);var MA=oe(),NE=Ur({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(MA(ie()(MA(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),BE=Pe(Le),hc=Wt(Sr),Qn=z(Qt),wA=wr(Ft)(_),WE=Lt(Bb),HE=Lt(Ac),IA=Ve(ye)(Ge),UE=dt(de),qE=Uo(va),zE=Lt(I_),VE=Zn(ye),z_=Lt(Hb),LA=Lt(Kr),GE=O(Tr),jE=Lt(li),PA=H_(ju),XE=Je(zn),JE=Bu(me),OA=pr(Ir),KE=Lt(Jr);var QE=function(){function t(){}return t.value=new t,t}(),V_=function(){function t(){}return t.value=new t,t}(),RA=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),YE=function(){return tt.value}(),NA=function(t){return NE(YE)({code:Or([Pr([m(Nl)])]),result:ci(function(r){return BE(function(e){return hc(Qn(QE.value))(e)})(function(e){return mr([mr([Ma(wA(Qn)([WE(be.value)("border-style:solid;border-width: 1px;border-color: black;"),HE(Eo.value)(kr(function(n){return IA(UE(Jf(n))(gc))(qE(yc)(function(u){return r(RA.create(u))}))})),zE(dc.value)(kr(function(n){return IA(W_(n))(function(u){return VE(B_(u)==="Enter")(r(V_.value))})}))]))([]),$e(hc(Qn(z_(be.value)("margin: 5px;")))(Qn(LA(Ar.value)(kr(R(r(V_.value)))))))([m("Add")])]),Gu(GE(function(n){return Cc(EA)(function(u){return mr([Ju(Qn(jE(be.value)("margin: 5px;")))([m(n)]),$e(hc(Qn(z_(be.value)("margin: 5px;")))(PA(Qn(u.sendTo(0)))))([m("Prioritize")]),$e(hc(Qn(z_(be.value)("margin: 5px;")))(PA(Qn(u.remove))))([m("Delete")])])})})(XE(function(n){return n.value0?new v(n.value1):L.value})(JE(function(n){return function(u){return u instanceof RA?new j(u.value0,new j(!1,u.value0)):u instanceof V_?new j(n,new j(!0,n)):new j("",new j(!1,""))}})("")(e))))])})}),next:wA(Qn)([LA(Ar.value)(kr(function(r){return OA(OA(qr(r))(t.dpage(Ai.value)))(ae)})),KE(Br.value)(t.slug+"portals/")])})};var BA=oe(),tM=Ur({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(BA(ie()(BA(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),rM=wr(Ft)(_),eM=z(Qt),nM=Lt(Kr),WA=pr(Ir),uM=Lt(Jr),aM=function(){return tt.value}(),HA=function(t){return tM(aM)({code:Or([Pr([m(Rl)])]),result:mr([m("Hello world")]),next:rM(eM)([nM(Ar.value)(kr(function(r){return WA(WA(qr(r))(t.dpage(vi.value)))(ae)})),uM(Br.value)(t.slug+"component/")])})};var oM=Ur({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(ie()(Hr)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),fM=wr(Ft)(_),cM=z(Qt),pM=Lt(Kr),UA=pr(Ir),lM=Lt(Jr),_M=function(){return tt.value}(),qA=function(t){return oM(_M)({next:fM(cM)([pM(Ar.value)(kr(function(r){return UA(UA(qr(r))(t.dpage(_i.value)))(ae)})),lM(Br.value)(t.slug+"hello/")])})};var zA=oe(),sM=Ur({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(zA(ie()(zA(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),mM=Pe(Le),bM=Wt(Sr),$i=z(Qt),DM=Rb(),kM=O(ai),G_=wr(Ft)(_),AM=Lt(oA),dM=Lt(tD),yM=Lt(pA),gM=Lt(lA),VA=cb()(),XA=nl()()()()(),SM=XA({reflectType:function(){return 1}}),$M=XA({reflectType:function(){return 0}}),CM=Nu(me),hM=z(ua),GA=Lt(Kr),jA=pr(Ir),FM=Lt(Jr);var TM=function(){return tt.value}(),JA=function(t){return sM(TM)({code:Or([Pr([m(Ol)])]),result:Gu(Vu(function(r){return mM(bM($i(void 0)))(function(e){return $i(fi(DM(kM(function(n){return R_(G_($i)([AM(w_.value)("true"),dM(_o.value)("250")]))([O_(G_($i)([yM(L_.value)(n),gM(Mo.value)("video/mp4")]))([])])})(VA("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(VA("https://www.w3schools.com/jsref/movie.mp4")(fb))))(function(n){return function(u){var o=SM(tt.value)(n),p=$M(tt.value)(n),l=function(b){return CM(function(g){return function(P){return!g}})(b)(e)},s=function(){var b=Uf(function(g){return g?p:o});return function(g){return lo(hM(b(l(g))))}}();return mr([$e($i(GA(Ar.value)(kr(R(r(void 0))))))([m("Switch videos")]),mr([s(!0),s(!1)])])}})))})})),next:G_($i)([GA(Ar.value)(kr(function(r){return jA(jA(qr(r))(t.dpage(di.value)))(ae)})),FM(Br.value)(t.slug+"ssr/")])})};var KA=oe(),EM=Ur({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(KA(ie()(KA(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),MM=dD({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <svg height="100" width="100">
      <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
    </svg> 
    </div>
`}})()(Hr),wM=wr(Ft)(_),IM=z(Qt),LM=Lt(Kr),QA=pr(Ir),PM=Lt(Jr),OM=function(){return tt.value}(),RM=function(){return tt.value}(),YA=function(t){return EM(OM)({code:Or([Pr([m(Pl)])]),result:MM(RM),next:wM(IM)([LM(Ar.value)(kr(function(r){return QA(QA(qr(r))(t.dpage(bi.value)))(ae)})),PM(Br.value)(t.slug+"events1/")])})};var td=oe(),rd=ie(),ed=td(Hr),BM=Il({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(td(rd(ed({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Io=z(Qt),WM=Ur({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(rd(ed({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),HM=Lt(Nb),UM=Lt(ju),qM=Wt(Sr),zM=J(Tr),VM=pu(uo),GM=wr(Ft)(_),jM=Lt(Kr),ZA=pr(Ir),XM=Lt(Jr),JM=function(){return tt.value}(),KM=function(){return tt.value}(),nd=function(t){return BM(tt.value)(JM)({code:Or([Pr([m(Ll)])]),result:Gu(Vu(function(r){return function(e){return Io(fi(WM(KM)({myli:Io(HM(be.value)("background-color:rgb(200,240,210);")),somethingNew:$e(Io(UM(Ar.value)(r(new v(void 0)))))([Ke(qM(zM(VM(e))("Thanks for clicking me!"))(Io("I was dynamically inserted")))])})))}})),next:GM(Io)([jM(Ar.value)(kr(function(r){return ZA(ZA(qr(r))(t.dpage(ki.value)))(ae)})),XM(Br.value)(t.slug+"events2/")])})};var j_=()=>document.documentElement.querySelector("[data-deku-root]");var X_=t=>()=>{t.hydrating=!0},J_=t=>()=>{t.hydrating=!1},ud=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(o=>()=>t(r.dynFamily)(p=>()=>{for(var l=0,s=0,b;s<n.childNodes.length;){if(n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue==="%-%"+p){s+=1;break}s++}let g=B=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[B]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[B])):n.insertBefore(e.units[r.id].main,n.childNodes[B])};for(;s<n.childNodes.length;){var P;if((P=n.childNodes[s].$dekuId)&&t(e.units[P].dynFamily)(N=>()=>t(e.units[P].pos)(d=>()=>p===N&&o<=d?(g(s),!0):!1)())())return!0;if(l===o||n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue==="%-%"+p+"%-%")return g(s),!0;n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue.substring(0,3)==="%-%"&&!b&&(b=n.childNodes[s].nodeValue+"%-%"),b||l++,n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue===b&&(b=void 0,l++),s++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(p=>()=>(e.units[r.id].main?e.units[p].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[p].endBeacon):(e.units[p].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[p].endBeacon),e.units[p].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(p=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[p].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[p].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[p].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},K_=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),o;o=u.nextNode();)o.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[o.nodeValue.substring(3)]=o)}e(document.documentElement)},ad=t=>r=>e=>n=>()=>{var u,o,p=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(p),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(o=n.allBeacons[`${e.id}%-%`])?(n.units[p]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:o},u.$dekuId=p,o.$dekuId=p,!0):!1)()){let s=document.createComment(`%-%${e.id}`),b=document.createComment(`%-%${e.id}%-%`);n.units[p]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:s,endBeacon:b},s.$dekuId=p,b.$dekuId=p}},ZM=new Set(["animate","animateMotion","animateTransform","circle","clipPath","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","title","tspan","use","view"]);var id=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),od=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),fd=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),cd=t=>r=>e=>n=>()=>{var u,o=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(o),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${o}"]`))?(n.units[o]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=o,!0):!1)()){let l=ZM.has(e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag);n.units[o]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:l},l.$dekuId=o}},pd=t=>r=>e=>n=>u=>()=>{var o=n.id,p;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(o),!t(n.parent)(s=>()=>{if(u.hydrating&&r&&(p=document.documentElement.querySelector(`[data-deku-ssr="${s}"]`))){for(var b=0;b<p.childNodes.length;b++){let N=o.split("@-@");if(p.childNodes[b].nodeType===8&&p.childNodes[b].nodeValue===N[0]){b=b-1;var g=b===-1,P=b>=0&&p.childNodes[b].nodeType===8;g&&p.prepend(document.createTextNode("")),P&&p.insertBefore(document.createTextNode(""),p.childNodes[b+1]);break}}let B=p.childNodes[b];return u.units[o]={main:B,pos:n.pos,parent:n.parent,scope:n.scope},B.$dekuId=o,!0}return!1})()){let s=document.createTextNode("");u.units[o]={main:s,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},s.$dekuId=o}};function Q_(){return{units:{},scopes:{},allBeacons:{}}}var ld=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"||e.units[n].main.tagName==="TEXTAREA"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},_d=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var o=p=>u(p)();e.units[n].main.addEventListener(r.key,o),e.units[n].listeners[r.key]=o}}},vd=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},sd=t=>r=>e=>n=>u=>()=>{var o,p,l=n.id,s=n.html,b=n.verb,g=n.cache,P=n.parent,B=n.scope,N=n.pxScope;let f=t(n.parent)(()=>()=>u.hydrating&&r&&(o=document.documentElement.querySelector(`[data-deku-ssr="${l}"]`))?(u.units[l]={listeners:{},pos:n.pos,scope:B,parent:P,main:o},o.$dekuId=l,!0):!1)();if(!f){let at=Object.entries(g);for(var d=0;d<at.length;d++){let X=at[d][0];at[d][1]===!0?s=s.replace(b+X+b,'data-deku-attr-internal="'+X+'"'):s=s.replace(b+X+b,'<span style="display:contents;" data-deku-elt-internal="'+X+'"></span>')}p=document.createElement("div"),p.innerHTML=s.trim(),u.units[l]={listeners:{},pos:n.pos,scope:B,parent:P,main:p.firstChild},p.firstChild.$dekuId=l}u.scopes[B]||(u.scopes[B]=[]),u.scopes[B].push(l),p||(p=o),p.querySelectorAll("[data-deku-attr-internal]").forEach(function(at){var X=at.getAttribute("data-deku-attr-internal");let Ot=X+"@!%"+N;u.units[Ot]={listeners:{},main:at,scope:B},u.scopes[B].push(Ot)}),p.querySelectorAll("[data-deku-elt-internal]").forEach(function(at){var X=at.getAttribute("data-deku-elt-internal");let Ot=X+"@!%"+N;u.units[X+"@!%"+N]={listeners:{},main:at,scope:B},u.scopes[B].push(Ot)}),f||u.units[l].main.remove()},md=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},Y_=t=>r=>e=>n=>()=>{let u=(f,d,at)=>{if(n.units[f].startBeacon){var X=n.units[f].startBeacon,Ot=X.nextSibling;for(n.units[d].main.insertBefore(X,at),X=Ot;X&&X!==n.units[f].endBeacon;)Ot=X.nextSibling,n.units[d].main.insertBefore(X,at),X=Ot}else n.units[d].main.insertBefore(n.units[f].main,at)},o=[];o.push(e);for(var p=0;p<o.length;p++){let f=o[p],d=f.id,at=f.parent;n.units[d].containingScope=f.scope;var l=void 0;r(f.pos)(Ot=>()=>(l=Ot,!0))(),l===void 0&&(l=Number.MAX_VALUE);let X=n.units[at].main.childNodes;for(var s=0,b=!1,g=0;s<X.length;){var P;if(P=X[s].$dekuId){if(r(f.dynFamily)(Rt=>()=>b?!1:n.units[P].endBeacon===X[s]&&Rt===P?(n.units[d].pos=t(g),u(d,at,X[s]),!0):!1)()){b=!0;break}if(n.units[P].dynFamily!==n.units[d].dynFamily){s++;continue}if(b){s++;continue}g===l?(u(d,at,X[s]),g++,b=!0):n.units[P].endBeacon!==X[s]&&(n.units[P].pos=t(g),g++)}s++}if(b)return;if(n.units[d].main)n.units[at].main.appendChild(n.units[d].main);else{var B=n.units[d].startBeacon,N=B.nextSibling;for(n.units[at].main.appendChild(B),B=N;B&&B!==n.units[d].endBeacon;)N=B.nextSibling,n.units[at].main.appendChild(B),B=N}}},bd=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let o=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(o.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,o.appendChild(n),n=u}}},Z_=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},Dd=Z_;var uw=Oi(zo),aw=Ie();var kd=function(t){return t};var iw=1,tv=2147483647,ow=function(){return tv-1|0}(),rv=function(t){var r=function(e){return function(n){return function(u){var o=n-e|0,p=uw(u)(o),l=p<e;return l?p+n|0:p}}};return r(iw)(ow)(t)};var fw=0,cw=48271,Ad=function(t){return function(r){return aw(sc(Fo(Te(cw)*Te(r)+Te(t))(Te(tv))))}},dd=Ad(fw);var bw=function(){function t(p){this.fn=p}var r={},e=function(p,l){this.head=p,this.tail=l};function n(p){return new e(p,r)}function u(p){return function(l){return new e(p,l)}}function o(p){for(var l=[],s=p;s!==r;)l.push(s.head),s=s.tail;return l}return function(p){return function(l){return function(s){var b=function(P,B){return p(l(u)(s(P)))(B)},g=function(P,B,N){if(B===0)return P;var f=N[B-1];return new t(function(){var d=g(b(f,P),B-1,N);return d})};return function(P){for(var B=l(n)(s(P[P.length-1])),N=g(B,P.length-1,P);N instanceof t;)N=N.fn();return l(o)(N)}}}}}();var Lo=function(t){var r=O(t);return{map:function(e){return function(n){return function(u){return r(function(o){return new j(e(o.value0),o.value1)})(n(u))}}}}};var uv=function(t){return{Applicative0:function(){return xc(t)},Bind1:function(){return Fc(t)}}},Fc=function(t){var r=dt(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(o){var p=n(o.value0);return p(o.value1)})}}},Apply0:function(){return Tc(t)}}},Tc=function(t){var r=Lo(t.Bind1().Apply0().Functor0());return{apply:Oe(uv(t)),Functor0:function(){return r}}},xc=function(t){var r=z(t.Applicative0());return{pure:function(e){return function(n){return r(new j(e,n))}},Apply0:function(){return Tc(t)}}};var Ec=function(t){var r=z(t.Applicative0()),e=uv(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var Td=function(t){return function(r){var e=t(r);return e.value1}},xd=function(t){return function(r){var e=t(r);return e.value0}};var ww=Ec(Re),Iw=Jn(ww);var Lw=Lo(au);var Pw=en(wi);var Ow=ke(wi);var Rw=function(t){return t};var Nw=function(){var t=function(r){return new j(kd(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=dd(r.newSeed),e}())};return Iw(t)}();var wd=Lw,Mc=O(wd);var iv=function(t){return xd(Rw(t))};var Id=Tc(Re),Bw=jt(Id),Md=function(t){return function(r){var e=Te(r),n=Te(t),u=function(l){return n+Fo(l)(e-n+1)},o=Mc(Te)(Nw),p=Bw(Mc(Ow)(o))(Mc(Pw(2))(o));return Mc(function(l){return D_(u(l))})(p)}},Ld=function(t){return function(r){var e=t<=r;return e?Md(t)(r):Md(r)(t)}};var Od=function(t){return t.arbitrary};var Rd=function(){return{arbitrary:Ld(-1e6)(1e6)}}();var We=or(ve),_n=ut(Vr),Bd=vt(sn),Wd=Od(Rd),Hd=ke(ia),Nd=z(yr),Hw=z(ye),Ye=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ze=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),xe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),De=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Yn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Tn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ov=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),wc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),cv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),lv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Au=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),He=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Uw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new Au(new Tn(t))])})(r))}},qw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new Au(new Yn(t))])})(r))}},zw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new He(new ov(t))])})(r))}},Vw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new He(new pv(t))])})(r))}},Gw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new Au(new Ze(t))])})(r))}},jw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new He(new wc(t))])})(r))}},Xw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new Au(new vn(t))])})(r))}},Jw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new Au(new Ye(t))])})(r))}},Kw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new Au(new xe(t)),new Au(new De(t))])})(r))}},Qw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new He(new fv(t))])})(r))}},Yw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new He(new cv(t))])})(r))}},Zw=function(t){return function(r){return We(Lr(function(e){return _n(e)([new He(new lv(t))])})(r))}},Ud=function(t){return{ids:function(){var e=Xr(t)(),n=Bd(iv(Wd)({newSeed:rv(e),size:5}));return We(Lr(Hd(1))(t))(),n},makeElement:Jw,attributeParent:function(r){return function(e){return Nd(void 0)}},makeRoot:jw,makeText:Gw,makePursx:Xw,setProp:qw,makeDynBeacon:Kw,setCb:function(r){return function(e){return Nd(void 0)}},setText:Uw,sendToPos:zw,deleteFromCache:Zw,removeDynBeacon:Vw,giveNewParent:Qw,disconnectElement:Yw}},wa=function(t){return function(r){return t instanceof v?r(t.value0):Hw(!1)}},t0=function(t){return function(r){return function(){var n=fd(t.id)(r)(),u=od(t.id)(r)(),o=id(t.id)(r)(),p={scope:n,parent:u,dynFamily:o,id:t.id,pos:new v(t.pos),ez:!1};return Y_(v.create)(wa)(p)(r)()}}},qd=function(t){return{ids:function(){var e=Xr(t)(),n=Bd(iv(Wd)({newSeed:rv(e),size:5}));return We(Lr(Hd(1))(t))(),n},makeElement:cd(wa)(!0),makeDynBeacon:ad(wa)(!0),attributeParent:ud(wa),makeRoot:md,makeText:pd(wa)(!0)(tr(void 0)),makePursx:sd(wa)(!0)(tr(void 0)),setProp:ld(!0),setCb:_d(!0),setText:vd,sendToPos:t0,deleteFromCache:Z_,removeDynBeacon:Dd,giveNewParent:Y_(v.create)(wa),disconnectElement:bd}};var _v=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),vv=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let o=r,p=Object.entries(n);for(var l=0;l<p.length;l++){let P=p[l][0];p[l][1]===!0?o=o.replace(u+P+u,'data-deku-attr-internal="'+P+'" data-deku-ssr="'+P+"@!%"+e+'"'):o=o.replace(u+P+u,'<span style="display:contents;" data-deku-elt-internal="'+P+'" data-deku-ssr="'+P+"@!%"+e+'"></span>')}let s=o.indexOf(">"),b=o.indexOf("/>"),g=b==s-1?b:s;return o.slice(0,g)+' data-deku-ssr="'+t+'" '+o.slice(g)};var e0=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Vd=O(Qi),Zu=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Gd=function(t){var r=!1,e;function n(u){if(u.value1 instanceof Dt)return r=!0,new v(new j(u.value1.value0,new Zu(u.value0,u.value1.value1)));if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,L.value;if(u.value1 instanceof rr){t=new Zu(rr.value,gf(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Oo=function(t){var r=!1,e;function n(u){if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,L.value;if(u.value0 instanceof rr){t=new Zu(gf(u.value1),rr.value);return}if(u.value0 instanceof Dt)return r=!0,new v(new j(u.value0.value0,new Zu(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},$r=function(t){return function(r){return new Zu(t.value0,new Dt(r,t.value1))}};var Ic={map:function(t){return function(r){return new Zu(Vd(t)(r.value0),Vd(t)(r.value1))}}},Po={foldMap:function(t){return tp(Po)(t)},foldr:function(t){return rp(Po)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,o=!1,p;function l(s,b){var g=Oo(b);if(g instanceof v){u=t(s)(g.value0.value0),n=g.value0.value1;return}if(g instanceof L)return o=!0,s;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[g.constructor.name])}for(;!o;)p=l(u,n);return p}};return r}},sv=ur(Po),mv={append:sv($r)},Ce=function(){return new Zu(rr.value,rr.value)}(),jd={mempty:Ce,Semigroup0:function(){return mv}},Xd=$r(Ce),Jd=function(t){var r=gr(t)(jd);return function(e){return r(Xd)(e)}},bv={traverse:function(t){var r=t.Apply0(),e=O(r.Functor0()),n=re(r),u=z(t);return function(o){var p=e(sv($r)(Ce)),l=sv(function(s){var b=n($r)(s);return function(g){return b(o(g))}})(u(Ce));return function(s){return p(l(s))}}},sequence:function(t){return dp(bv)(t)},Functor0:function(){return Ic},Foldable1:function(){return Po}};var Kd=function(t){return function(r){return new Zu(new Dt(t,r.value0),r.value1)}},n0={Applicative0:function(){return Dv},Bind1:function(){return u0}},u0={bind:sr(gr(Po)(jd)),Apply0:function(){return Qd(0)}},Dv={pure:Xd,Apply0:function(){return Qd(0)}},Qd=e0("applyCatQueue","Data.CatQueue",function(){return{apply:Oe(n0),Functor0:function(){return Ic}}});var i0=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Ci=ut(Vr),ey=Fr(),Av=O(br),o0=qo(Ha),f0=Ue(br),Yd=or(Lo(au)),Zd=ko(Ec(Re)),ty=Ru(Fe),c0=Wa(Ua)(Fc(Re)),Ee=ht($u(En)),Ia=ut(mv),p0=z(Dv),ry=O(Ic),l0=Jd(Ft),_0=Ue(Ou),v0=dt(de),kv=Zi(Fe),s0=pu(Ff),ny=xc(Re),m0=Ne(bv)(ny),Ro=Ve(ny)(Ge),b0=uu(Ft)(Ri),D0=Je(Cm),k0=gr(Ft)(Ri),A0=ur(ue);var d0=function(t){var r=function(e){return function(n){return function(u){return function(o){if(o instanceof L)return{acc:e,rest:[]};if(o instanceof v){if(o.value0.head instanceof xe){var p=r([])(new v({id:o.value0.head.value0.id,e:o.value0.head.value0}))(o.value0.tail);return r(Ci(e)(p.acc))(n)(p.rest)}if(o.value0.head instanceof De){if(n instanceof v)return{acc:[{pos:n.value0.e.pos,elt:new ct({o:n.value0.e,a:e,c:o.value0.head.value0})}],rest:o.value0.tail};if(n instanceof L)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var l=function(){if(o.value0.head instanceof Ye||o.value0.head instanceof Ze||o.value0.head instanceof vn||o.value0.head instanceof xe||o.value0.head instanceof De)return o.value0.head.value0.pos;if(o.value0.head instanceof Yn)return L.value;if(o.value0.head instanceof Tn)return L.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[o.value0.head.constructor.name])}();return r(Ci(e)([{pos:l,elt:new lt(o.value0.head)}]))(n)(o.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[o.constructor.name])}(Cp(u))}}};return r([])(L.value)(t).acc},uy=i0("sortSortableDyns","Deku.SSR",function(){var t=Av(function(e){if(e.elt instanceof lt)return e;if(e.elt instanceof ct)return{pos:e.pos,elt:new ct({o:e.elt.value0.o,c:e.elt.value0.c,a:uy(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=bf(Ti(Et(fa(pe)))(function(e){return function(n){return n.pos}(ey(e))}));return function(e){return t(r(e))}}),y0=uy(39),ay=function(t){return o0(f0(t)(function(r){return function(e){if(e instanceof lt)return[e.value0];if(e instanceof ct)return Ci([new xe(e.value0.o)])(Ci(ay(e.value0.a))([new De(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[e.constructor.name])}(function(e){return e.elt}(ey(r)))}))},iy=function(t){return function(r){var e=function(f){return function(d){return Yd(Zd(function(at){var X={};for(var Ot in at)({}).hasOwnProperty.call(at,Ot)&&(X[Ot]=at[Ot]);return X.idToActions=ty(function(Rt){if(Rt instanceof v)return new v(Ci(Rt.value0)([d]));if(Rt instanceof L)return new v([d]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Rt.constructor.name])})(f)(at.idToActions),X}))}},n=le("deku-root")(Ji(function(f){return f instanceof He&&f.value0 instanceof wc?new v(f.value0.value0.id):L.value})(r)),u=function(f){return function(d){return function(at){return c0(Yd(Zd(function(X){var Ot={};for(var Rt in X)({}).hasOwnProperty.call(X,Rt)&&(Ot[Rt]=X[Rt]);return Ot.parentToChild=ty(function(Kt){if(Kt instanceof v)return new v(Ci(Kt.value0)([d]));if(Kt instanceof L)return new v([d]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[Kt.constructor.name])})(f)(X.parentToChild),Ot})))(function(){return e(d)(at)})}}},o=function(f){var d=function(ot){return function(V){return function(H){if(H instanceof Ye){var st=H.value0.id===ot||Ee(H.value0.dynFamily)(new v(H.value0.id));return st?new Ye({id:H.value0.id,scope:H.value0.scope,parent:H.value0.parent,tag:H.value0.tag,pos:new v(V),dynFamily:H.value0.dynFamily}):H}if(H instanceof Ze){var kt=H.value0.id===ot||Ee(H.value0.dynFamily)(new v(H.value0.id));return kt?new Ze({id:H.value0.id,pos:new v(V),scope:H.value0.scope,parent:H.value0.parent,dynFamily:H.value0.dynFamily}):H}if(H instanceof vn){var Me=H.value0.id===ot||Ee(H.value0.dynFamily)(new v(H.value0.id));return Me?new vn({id:H.value0.id,parent:H.value0.parent,html:H.value0.html,scope:H.value0.scope,pos:new v(V),pxScope:H.value0.pxScope,verb:H.value0.verb,cache:H.value0.cache,dynFamily:H.value0.dynFamily}):H}if(H instanceof xe){var Rr=H.value0.id===ot||Ee(H.value0.dynFamily)(new v(H.value0.id));return Rr?new xe({id:H.value0.id,parent:H.value0.parent,pos:new v(V),scope:H.value0.scope,dynFamily:H.value0.dynFamily}):H}if(H instanceof De){var du=H.value0.id===ot||Ee(H.value0.dynFamily)(new v(H.value0.id));return du?new De({id:H.value0.id,parent:H.value0.parent,pos:new v(V),scope:H.value0.scope,dynFamily:H.value0.dynFamily}):H}if(H instanceof Tn||H instanceof Yn)return H;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[H.constructor.name])}}},at=function(ot){return function(V){if(V instanceof Ye){var H=V.value0.id===ot||Ee(V.value0.dynFamily)(new v(V.value0.id));return H?new Ye({id:V.value0.id,scope:V.value0.scope,parent:L.value,tag:V.value0.tag,pos:V.value0.pos,dynFamily:V.value0.dynFamily}):V}if(V instanceof Ze){var st=V.value0.id===ot||Ee(V.value0.dynFamily)(new v(V.value0.id));return st?new Ze({id:V.value0.id,pos:V.value0.pos,scope:V.value0.scope,parent:L.value,dynFamily:V.value0.dynFamily}):V}if(V instanceof vn){var kt=V.value0.id===ot||Ee(V.value0.dynFamily)(new v(V.value0.id));return kt?new vn({id:V.value0.id,parent:L.value,html:V.value0.html,scope:V.value0.scope,pos:V.value0.pos,pxScope:V.value0.pxScope,verb:V.value0.verb,cache:V.value0.cache,dynFamily:V.value0.dynFamily}):V}if(V instanceof xe){var Me=V.value0.id===ot||Ee(V.value0.dynFamily)(new v(V.value0.id));return Me?new xe({id:V.value0.id,parent:L.value,pos:V.value0.pos,scope:V.value0.scope,dynFamily:V.value0.dynFamily}):V}if(V instanceof De){var Rr=V.value0.id===ot||Ee(V.value0.dynFamily)(new v(V.value0.id));return Rr?new De({id:V.value0.id,parent:L.value,pos:V.value0.pos,scope:V.value0.scope,dynFamily:V.value0.dynFamily}):V}if(V instanceof Tn||V instanceof Yn)return V;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[V.constructor.name])}},X=function(ot){return function(V){return function(H){return function(st){return function(kt){if(kt instanceof v&&kt.value0.value0 instanceof xe){if(Ee(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Ia(ot)(V))(kt.value0.value0))(Ce)(H)(kt.value0.value1);if(Wr)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof De){if(Ee(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Ia(ot)(V))(kt.value0.value0))(Ce)(H)(kt.value0.value1);if(Wr)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof Ze){if(Ee(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Ia(ot)(V))(kt.value0.value0))(Ce)(H)(kt.value0.value1);if(Wr)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof vn){if(Ee(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Ia(ot)(V))(kt.value0.value0))(Ce)(H)(kt.value0.value1);if(Wr)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof Ye){if(Ee(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Ia(ot)(V))(kt.value0.value0))(Ce)(H)(kt.value0.value1);if(Wr)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof Yn)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1);if(kt instanceof v&&kt.value0.value0 instanceof Tn)return X(ot)($r(V)(kt.value0.value0))(H)(kt.value0.value1);if(kt instanceof L)return Ia(ot)(Ia(p0(new De({id:H.id+"%-%",parent:H.parent,pos:H.pos,scope:H.scope,dynFamily:H.dynFamily})))(V));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[kt.constructor.name])}(Oo(st))}}}},Ot=function(ot){return function(V){return function(H){if(H instanceof v&&H.value0.value0 instanceof De)return Ot(X(Ce)(Ce)(H.value0.value0.value0)(ot))(H.value0.value1);if(H instanceof v)return Ot(Kd(H.value0.value0)(ot))(H.value0.value1);if(H instanceof L)return ot;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[H.constructor.name])}(Gd(V))}},Rt=function(ot){return function(V){return function(H){return function(st){if(st instanceof v&&st.value0.value0 instanceof Ye){var kt=st.value0.value0.value0.id===V;return kt?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof Ze){var Me=st.value0.value0.value0.id===V;return Me?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof vn){var Rr=st.value0.value0.value0.id===V;return Rr?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof xe){var du=st.value0.value0.value0.id===V;return du?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof De){var La=st.value0.value0.value0.id===V;return La?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof Yn){var Pa=st.value0.value0.value0.id===V;return Pa?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof Tn){var he=st.value0.value0.value0.id===V;return he?Rt(ot)(V)(st.value0.value1):Rt($r(ot)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof L)return ot;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[st.constructor.name])}(Oo(H))}}},Kt=function(ot){return function(V){return function(H){if(H instanceof v&&H.value0.value0 instanceof Au)return Kt($r(ot)(H.value0.value0.value0))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof He&&H.value0.value0.value0 instanceof ov)return Kt(ry(d(H.value0.value0.value0.value0.id)(H.value0.value0.value0.value0.pos))(ot))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof He&&H.value0.value0.value0 instanceof wc||H instanceof v&&H.value0.value0 instanceof He&&H.value0.value0.value0 instanceof fv)return Kt(ot)(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof He&&H.value0.value0.value0 instanceof cv)return Kt(ry(at(H.value0.value0.value0.value0.id))(ot))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof He&&H.value0.value0.value0 instanceof pv)return Kt(Rt(Ce)(H.value0.value0.value0.value0.id)(ot))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof He&&H.value0.value0.value0 instanceof lv)return Kt(Rt(Ce)(H.value0.value0.value0.value0.id)(ot))(H.value0.value1);if(H instanceof L)return ot;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[H.constructor.name])}(Oo(V))}},et=l0(f),dr=Kt(Ce)(et),fe=Ot(Ce)(dr);return fe},p=o(r),l=function(f){return{parentToChild:_0(f.parentToChild)(function(){var d=Av(function(X){if(X instanceof Ye||X instanceof Ze||X instanceof vn||X instanceof xe||X instanceof De||X instanceof Yn||X instanceof Tn)return X.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[X.constructor.name])}),at=Av(function(X){return v0(kv(X)(f.idToActions))(Fp)});return function(X){return d(ay(y0(d0(s0(at(X))))))}}()),idToActions:f.idToActions}}(Td(m0(function(f){if(f instanceof Ye)return Ro(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof Ze)return Ro(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof vn)return Ro(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof xe)return Ro(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof De)return Ro(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof Yn||f instanceof Tn)return e(f.value0.id)(f);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[f.constructor.name])})(p))({parentToChild:qn,idToActions:qn})),s=function(f){return Ba(xp(function(d){return d instanceof Ye||d instanceof Ze||d instanceof xe||d instanceof De})(f))},b=function(f){return le("")(Ji(function(d){return d instanceof Ye?new v(d.value0.tag):L.value})(f))},g=function(f){return b0(" ")(D0(function(d){return d instanceof Yn?new v(d.value0.key+('="'+(d.value0.value+'"'))):L.value})(f))},P=function(f){return tr("")(function(d){var at=function(et){return le("")(Ji(function(dr){return dr instanceof Tn?new v(_v(dr.value0.text)+("<!--"+(f+"-->"))):L.value})(d))},X=function(et){return"<!--%-%"+(f+"-->")},Ot=function(et){var dr=b(d),fe=g(d);return"<"+(dr+(" "+(fe+(' data-deku-ssr="'+(f+('">'+(B(f)+("</"+(dr+">")))))))))},Rt=function(et){return"<!--%-%"+(f+"-->")},Kt=xu(d)(0);return Kt instanceof v&&Kt.value0 instanceof Tn?at(void 0):Kt instanceof v&&Kt.value0 instanceof Ze?at(void 0):Kt instanceof v&&Kt.value0 instanceof xe?X(void 0):Kt instanceof v&&Kt.value0 instanceof De?Rt(void 0):Kt instanceof v&&Kt.value0 instanceof vn?vv(Kt.value0.value0):Ot(void 0)})(kv(f)(l.idToActions))},B=function(f){var d=le([])(kv(f)(l.parentToChild));return k0(P)(d)},N=function(f){return A0(function(d){return function(at){var X=s(at);if(X)return d;if(!X)return fc("data-deku-ssr")(g(at)+" data-deku-ssr")(d);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[X.constructor.name])}})(B(f))(l.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(N(n)+("</"+(t+">")))))))}};var aI=Ue(q),iI=ma(Ya);var oI=or(q),oy=Fr(),fI=ht(qu),cI=k(),pI=Wt(Sr),lI=z(Qt),fy=z(yr),_I=O(ve),vI=ma(hs),sI=or(ve);var cy=function(t){return function(r){return function(e){return pn({doLogic:function(n){return function(u){return function(o){return u.sendToPos({id:o,pos:n})}}},ids:function(n){return function(u){return u.ids}(oy(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:fI})}},toElt:function(n){return n}})(t)(r)(cI(e))}}},mI=function(t){return function(){var e=Q_();K_(e)();var n=aI(iI(ee(0)))(qd)();X_(e)();var u=j_(),o=Gp(pI(lI(oy(n).makeRoot({id:"deku-root",root:u})))(cy({parent:new v("deku-root"),scope:new Uu("rootScope"),raiseId:function(p){return fy(void 0)},ez:!0,pos:L.value,dynFamily:L.value})(n)(t)))(function(p){return p(e)})();return J_(e)(),o}},py=function(t){return oI(mI(t))},bI=function(t){return function(r){return function(e){return _I(function(){var n=iy(t);return function(u){return function(o){return r.head+o}(function(o){return o+r.tail}(n(u)))}}())(vI(function(){var u=ee(0)(),o=ee([])(),p=Ud(u);return sI(Km(cy({parent:new v("deku-root"),scope:new Uu("rootScope"),raiseId:function(l){return fy(void 0)},ez:!0,pos:L.value,dynFamily:L.value})(p)(e))(function(l){return l(o)}))(),Xr(o)()}))}}},ly=bI("body");var DI=$c(ju),dv=Wt(Sr),Lc=z(Qt),vy=O(Tr),sy=ut(aa),kI=vt(sn),AI=Nu(me),dI=vt(Pi),No=oe(),yI=Ur({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(No(No(No(No(No(Hr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),gI=pr(sa),SI=dt(Tu),my=z(yr),$I=function(){return tt.value}(),by=function(){return Bf()(ni({reflectSymbol:function(){return"buttonClicked"}})()()(ni({reflectSymbol:function(){return"sliderMoved"}})()()(Lf)()())()())(tt.value)(function(t){return function(r){return mr([P_([m(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),$e(DI(t.buttonClicked(void 0)))([m("Click")]),mr([Ke(dv(Lc("Val: 0"))(vy(function(){var e=sy("Val: ");return function(n){return e(kI(n))}}())(AI(function(e){return function(n){return 1+e|0}})(-1)(dv(Lc(void 0))(r.buttonClicked)))))]),mr([Ma(Sc(Lc(t.sliderMoved)))([]),mr([Ke(dv(Lc("Val: 50"))(vy(function(){var e=sy("Val: ");return function(n){return e(dI(n))}}())(r.sliderMoved)))])])])}})}(),Dy=function(t){return yI($I)({code2:Or([Pr([m(zl)])]),code1:Or([Pr([m(ql)])]),code0:Or([Pr([m(Ul)])]),result:by,codegen:Or([Pr([Ke(Jm(function(r){return gI(SI(ly({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(by))(r))(my(my(void 0)))}))])])})};var hI=Pe(Le),FI=Wt(Sr),yv=z(Qt),TI=O(br),xI=wr(Ft)(_),EI=Lt(Kr),MI=pr(Ir),wI=Lt(Ub),II=Lt(Jr),LI=Lt(li),ky=function(t){return ci(function(r){return hI(function(e){return FI(yv(t.startsWith))(e)})(function(e){var n=function(o){if(o instanceof Vf)return qA;if(o instanceof _i)return HA;if(o instanceof vi)return TD;if(o instanceof si)return YA;if(o instanceof bi)return TA;if(o instanceof Di)return aA;if(o instanceof mi)return nd;if(o instanceof ki)return NA;if(o instanceof Ai)return JA;if(o instanceof di)return Dy;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 33, column 7 - line 33, column 34): "+[o.constructor.name])},u=function(o){return function(p){return n(p)({dpage:o,slug:t.slug})}};return mr([mr(TI(function(o){return lo([po(xI(yv)([EI(Ar.value)(kr(function(p){return MI(qr(p))(r(o.value0))})),wI(be.value)("cursor:pointer;"),II(Br.value)(t.slug+o.value1.value1.value0)]))([m(o.value1.value0)]),Ju(yv(LI(be.value)(function(){return o.value1.value1.value1?"":"display:none;"}())))([m(" | ")])])})([new j(Vf.value,new j("Home",new j("",!0))),new j(_i.value,new j("Hello world",new j("hello/",!0))),new j(vi.value,new j("Component",new j("simple/",!0))),new j(si.value,new j("Pursx 1",new j("pursx1/",!0))),new j(bi.value,new j("Events 1",new j("events1/",!0))),new j(Di.value,new j("Effects",new j("effects/",!0))),new j(mi.value,new j("Pursx 2",new j("pursx2/",!0))),new j(ki.value,new j("Events 2",new j("events2/",!0))),new j(Ai.value,new j("Portals",new j("portals/",!0))),new j(di.value,new j("SSR",new j("ssr/",!1)))])),Uf(u(r))(e)])})})};var OI=vt(Vv()()(Gv({reflectSymbol:function(){return"slug"}})(jv({reflectSymbol:function(){return"startsWith"}})(ze))(ze))),RI=z(ye),nVt=function(t){return function(){var e=tr(mo(gi("could not ingest options: "+OI(t))))(RI)(bD(t.startsWith))();return py(ky({slug:t.slug,startsWith:e}))()}};export{nVt as main};
