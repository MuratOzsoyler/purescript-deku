var Ev=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),o=0,p=0;p<e;p++)for(var l=t[p],s=0;s<n;s++)u[o++]=l(r[s]);return u}};var oa={compose:function(t){return function(r){return function(e){return t(r(e))}}}},fa=function(t){return t.compose},wi=function(t){var r=fa(t);return function(e){return function(n){return r(n)(e)}}};var Nt=function(t){return t.identity},Bt={identity:function(t){return t},Semigroupoid0:function(){return oa}};var Hr=!0;var Ii=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},lr=function(t){return function(r){return function(e){return t(e)(r)}}},R=function(t){return function(r){return t}};var Li=function(t){return function(r){return r(t)}};var Mv=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var tt=function(){function t(){}return t.value=new t,t}();var O=function(t){return t.map},ze=function(t){var r=O(t);return function(e){return function(n){return r(n)(e)}}},ur=function(t){return O(t)(R(void 0))},J=function(t){var r=O(t);return function(e){return function(n){return r(R(n))(e)}}};var hu={map:fa(oa)},Dr={map:Mv};var Iy=Nt(Bt);var Pi={apply:Ev,Functor0:function(){return Dr}},jt=function(t){return t.apply};var mr=function(t){var r=jt(t),e=O(t.Functor0());return function(n){return function(u){return r(e(R(Iy))(n))(u)}}},re=function(t){var r=jt(t),e=O(t.Functor0());return function(n){return function(u){return function(o){return r(e(n)(u))(o)}}}};var z=function(t){return t.pure};var ru=function(t){var r=z(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},Oi=function(t){var r=jt(t.Apply0()),e=z(t);return function(n){return function(u){return r(e(n))(u)}}};var ca={pure:function(t){return[t]},Apply0:function(){return Pi}};var Iv=function(t){return function(r){return t+r}},Lv=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Gr=function(t){return t.reflectSymbol};var un=function(t){return function(r){return r[t]}},eu=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var Ov={append:function(t){return function(r){return void 0}}},pa={append:Iv};var jr={append:Lv};var nt=function(t){return t.append};var Ht=function(t){return t.alt};var Ny=String.fromCharCode(65535),By=String.fromCharCode(0),Wy=Number.POSITIVE_INFINITY,Hy=Number.NEGATIVE_INFINITY;var Rv=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var Nv=Rv;var Bv=Rv;var Wv=function(t){return function(r){return t===r}};var Hv=Wv;var Uv=Wv;var wn={eq:Uv};var Ba={eq:Hv};var St=function(t){return t.eq};var $t=function(){function t(){}return t.value=new t,t}(),wt=function(){function t(){}return t.value=new t,t}(),It=function(){function t(){}return t.value=new t,t}();var qv=function(t){return function(r){return t-r|0}};var zv=function(t){return function(r){return t+r|0}},Vv=function(t){return function(r){return t*r|0}},Gv=function(t){return function(r){return t+r}},jv=function(t){return function(r){return t*r}};var Ri={add:Gv,zero:0,mul:jv,one:1},la={add:zv,zero:0,mul:Vv,one:1};var Ge=function(t){return t.mul};var _e=function(t){return t.add};var Hc={sub:qv,Semiring0:function(){return la}};var xe=function(){return{compare:Bv($t.value)(It.value)(wt.value),Eq0:function(){return wn}}}();var se=function(){return{compare:Nv($t.value)(It.value)(wt.value),Eq0:function(){return Ba}}}();var Tt=function(t){return t.compare};var Ln=function(t){return t.top};var Bi={top:2147483647,bottom:-2147483648,Ord0:function(){return se}};var uu=function(t){return t.bottom};var Jv=function(t){return t.toString()},Kv=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var Qv=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,o=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+o})+'"'};var je={show:Qv};var Yv=function(t){return t.showRecordFields},Zv=function(){return function(){return function(t){var r=Yv(t);return{show:function(e){return"{"+(r(tt.value)(e)+"}")}}}}};var Wi={show:Kv},mn={show:Jv};var vt=function(t){return t.show};var ts=function(t){var r=Gr(t);return function(e){var n=Yv(e);return function(u){var o=vt(u);return{showRecordFields:function(p){return function(l){var s=n(tt.value)(l),m=r(tt.value),h=un(m)(l);return" "+(m+(": "+(o(h)+(","+s))))}}}}}},rs=function(t){var r=Gr(t);return function(e){var n=vt(e);return{showRecordFields:function(u){return function(o){var p=r(tt.value),l=un(p)(o);return" "+(p+(": "+(n(l)+" ")))}}}}};var ag=Nt(Bt),L=function(){function t(){}return t.value=new t,t}(),v=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var tr=function(t){return function(r){return function(e){if(e instanceof L)return t;if(e instanceof v)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ha=tr(!1)(R(!0));var hr={map:function(t){return function(r){return r instanceof v?new v(t(r.value0)):L.value}}},ig=O(hr);var ee=function(t){return tr(t)(ag)},Oe=function(){return function(t){if(t instanceof v)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var xu=function(t){var r=St(t);return{eq:function(e){return function(n){return e instanceof L&&n instanceof L?!0:e instanceof v&&n instanceof v?r(e.value0)(n.value0):!1}}}},_a=function(t){var r=Tt(t),e=xu(t.Eq0());return{compare:function(n){return function(u){if(n instanceof L&&u instanceof L)return It.value;if(n instanceof L)return $t.value;if(u instanceof L)return wt.value;if(n instanceof v&&u instanceof v)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var va={apply:function(t){return function(r){if(t instanceof v)return ig(t.value0)(r);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return hr}};var de={bind:function(t){return function(r){if(t instanceof v)return r(t.value0);if(t instanceof L)return L.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return va}};var On=function(){return{pure:v.create,Apply0:function(){return va}}}();var og={alt:function(t){return function(r){return t instanceof L?r:t}},Functor0:function(){return hr}},us=function(){return{empty:L.value,Alt0:function(){return og}}}();var as=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=u-1;o>=0;o--)n=t(e[o])(n);return n}}},is=function(t){return function(r){return function(e){for(var n=r,u=e.length,o=0;o<u;o++)n=t(n)(e[o]);return n}}};var os=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var pg=Nt(Bt),Ua=function(t){return t.discard};var qa={bind:os,Apply0:function(){return Pi}},dt=function(t){return t.bind},au=function(t){return lr(dt(t))},jo=function(t){var r=au(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},Xo=function(t){var r=dt(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var za={discard:function(t){return dt(t)}};var Jo=function(t){var r=dt(t);return function(e){return r(e)(pg)}};var D=function(t){return t.empty};var it=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),at=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var zc=function(t){return tr(new it(t))(at.create)};var sa={map:function(t){return function(r){if(r instanceof it)return new it(r.value0);if(r instanceof at)return new at(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var ye=function(t){return function(r){return function(e){if(e instanceof it)return t(e.value0);if(e instanceof at)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},Vc=function(){return ye(R(L.value))(v.create)}();var sg=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var ps={defer:function(t){return function(r){return t(void 0)(r)}}},Va=function(t){return t.defer},Gc=function(t){var r=Va(t);return function(e){var n=sg("go","Control.Lazy",function(){return r(function(o){return e(n(25))})}),u=n(25);return u}};var ls=function(t){return function(r){return t&&r}},_s=function(t){return function(r){return t||r}},vs=function(t){return!t};var ma=function(t){return t.not};var ja=function(t){return t.ff};var Eu=function(t){return t.disj},bn={ff:!1,tt:!0,implies:function(t){return function(r){return Eu(bn)(ma(bn)(t))(r)}},conj:ls,disj:_s,not:vs};var ss=function(t){return Math.min(Math.abs(t),2147483647)},ms=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},bs=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var Ds={Ring0:function(){return Hc}};var Hi=function(t){return t.mod};var Qo={degree:ss,div:ms,mod:bs,CommutativeRing0:function(){return Ds}};var jc={mempty:void 0,Semigroup0:function(){return Ov}},qi={mempty:"",Semigroup0:function(){return pa}};var zt=function(t){return t.mempty};var j=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Ur=function(t){return t.value1};var iu={map:function(t){return function(r){return new j(r.value0,t(r.value1))}}};var Mu=function(t){return function(r){return function(e){return t(new j(r,e))}}};var ji=function(t){return t};var Fg=function(t){var r=Eu(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Qc=function(t){var r=Fg(t);return{mempty:ja(t),Semigroup0:function(){return r}}};var tf=function(t){return t};var Tg=function(t){var r=fa(t);return{append:function(e){return function(n){return r(e)(n)}}}};var Yc=function(t){var r=Tg(t.Semigroupoid0());return{mempty:Nt(t),Semigroup0:function(){return r}}};var Y=function(t){return t};var k=function(){return Y};var tp=k(),rf=function(){return tp};var Fr=function(){return tp};var Ka=function(){return function(){return function(){return function(){return function(t){return tp}}}}};var Mg=Fr(),wg=Yc(Bt);var Ig=Ka()()()(),vr=function(t){return t.foldr};var Dn=function(t){var r=vr(t);return function(e){return r(Ht(e.Alt0()))(D(e))}},wr=function(t){var r=vr(t);return function(e){var n=Ht(e.Alt0()),u=D(e);return function(o){return r(function(p){return n(o(p))})(u)}}},Qa=function(t){var r=mr(t.Apply0()),e=z(t);return function(n){var u=vr(n);return function(o){return u(function(p){return r(o(p))})(e(void 0))}}},Je=function(t){var r=Qa(t);return function(e){return lr(r(e))}};var ir=function(t){return t.foldl};var ou=function(t){var r=ir(t);return function(e){var n=nt(e.Semigroup0()),u=zt(e);return function(o){return function(p){var l=function(s){return function(m){return s.init?{init:!1,acc:m}:{init:!1,acc:n(s.acc)(n(o)(m))}}};return r(l)({init:!0,acc:u})(p).acc}}}};var Ke={foldr:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof v)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof L)return r;if(e instanceof v)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=zt(t);return function(e){return function(n){if(n instanceof L)return r;if(n instanceof v)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var ys=function(t){var r=vr(t);return function(e){var n=nt(e.Semigroup0()),u=zt(e);return function(o){return r(function(p){return function(l){return n(o(p))(l)}})(u)}}},xt={foldr:as,foldl:is,foldMap:function(t){return ys(xt)(t)}},np=function(t){var r=ir(t);return function(e){var n=nt(e.Semigroup0()),u=zt(e);return function(o){return r(function(p){return function(l){return n(p)(o(l))}})(u)}}},gr=function(t){return t.foldMap};var up=function(t){var r=gr(t)(wg);return function(e){return function(n){return function(u){return Mg(r(function(o){return tf(e(o))})(u))(n)}}}};var wu=function(t){var r=gr(t);return function(e){return Ig(ji)(r(Qc(e)))}};var Lg=Nt(Bt);var ge={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},Ya=function(t){return t.dimap},Ee=function(t){var r=Ya(t);return function(e){return r(e)(Lg)}};var ap=function(t){return function(){return t}},gs=function(t){return function(r){return function(){return r(t())()}}};var Re=function(t){var r=dt(t.Bind1()),e=z(t.Applicative0());return function(n){return function(u){return r(n)(function(o){return r(u)(function(p){return e(o(p))})})}}};var Ss=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Za={Applicative0:function(){return Se},Bind1:function(){return ka}},ka={bind:gs,Apply0:function(){return ip(0)}},Se={pure:ap,Apply0:function(){return ip(0)}},$s=Ss("functorEffect","Effect",function(){return{map:Oi(Se)}}),ip=Ss("applyEffect","Effect",function(){return{apply:Re(Za),Functor0:function(){return $s(0)}}}),q=$s(20),Ir=ip(23),Og=re(Ir),op=function(t){return{append:Og(nt(t))}},fp=function(t){var r=op(t.Semigroup0());return{mempty:ap(zt(t)),Semigroup0:function(){return r}}};var ef=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},cp=(t,r)=>{for(let e in t)r(t[e])},pp=()=>({}),lp=(t,r,e)=>{e[t]=r},_p=(t,r)=>{delete r[t]};var Cs=Y;var hs=function(t){return function(r){return function(){return t(r())}}},Fs=function(t){return function(){return t}},Ts=function(t){return function(r){return function(){return r(t())()}}};function ne(t){return function(){return{value:t}}}var Xr=function(t){return function(){return t.value}},xs=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},on=function(t){return function(r){return function(){return r.value=t}}};var An=function(t){return t};var fu={map:function(t){return function(r){return t(r)}}};var Es={apply:function(t){return function(r){return t(r)}},Functor0:function(){return fu}},Wg={bind:function(t){return function(r){return r(t)}},Apply0:function(){return Es}},Ms={pure:An,Apply0:function(){return Es}},Ne={Applicative0:function(){return Ms},Bind1:function(){return Wg}};var ws=function(t){return function(){return{value:t}}};var Qr=function(t){return function(){return t.value}},Is=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},me=function(t){return function(r){return function(){r.value=t}}};var Ug=ur(q),$e=ws,qg=Is,nf=function(t){return qg(function(r){var e=t(r);return{state:e,value:e}})},Ki=function(t){return function(r){return Ug(nf(t)(r))}};var Jg=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Kg=xs,Lr=function(t){return Kg(function(r){var e=t(r);return{state:e,value:e}})},ue={map:hs};var uf={Applicative0:function(){return yr},Bind1:function(){return Iu}},Iu={bind:Ts,Apply0:function(){return sp(0)}},yr={pure:Fs,Apply0:function(){return sp(0)}},sp=Jg("applyST","Control.Monad.ST.Internal",function(){return{apply:Re(uf),Functor0:function(){return ue}}}),ti=sp(47);var Ps={liftST:Nt(Bt),Monad0:function(){return uf}},ri={liftST:Cs,Monad0:function(){return Za}},Aa=function(t){return t.liftST};var of=function(t){return function(r){for(var e=t>r?-1:1,n=new Array(e*(r-t)+1),u=t,o=0;u!==r;)n[o++]=u,u+=e;return n[o]=u,n}},Qg=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},Yg=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},mp=typeof Array.prototype.fill=="function"?Qg:Yg,Zg=function(){function t(u,o){this.head=u,this.tail=o}var r={};function e(u){return function(o){return new t(u,o)}}function n(u){for(var o=[],p=0,l=u;l!==r;)o[p++]=l.head,l=l.tail;return o}return function(u){return function(o){return n(u(e)(r)(o))}}}(),gn=function(t){return t.length},Os=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},Rs=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},Ns=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var o=e(n[u]);if(r(o))return o}return t}}}},Bs=function(t){return function(r){return function(e){return function(n){for(var u=0,o=n.length;u<o;u++)if(e(n[u]))return t(u);return r}}}};var Ws=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var Qi=function(t){return function(r){return r.filter(t)}},ff=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var o=r[u];t(o)?e.push(o):n.push(o)}return{yes:e,no:n}}};var Hs=function(){function t(r,e,n,u,o,p){var l,s,m,h,P,B,N;for(l=o+(p-o>>1),l-o>1&&t(r,e,u,n,o,l),p-l>1&&t(r,e,u,n,l,p),s=o,m=l,h=o;s<l&&m<p;)P=u[s],B=u[m],N=e(r(P)(B)),N>0?(n[h++]=B,++m):(n[h++]=P,++s);for(;s<l;)n[h++]=u[s++];for(;m<p;)n[h++]=u[m++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var Yi=function(t){return function(r){return function(e){for(var n=r.length<e.length?r.length:e.length,u=new Array(n),o=0;o<n;o++)u[o]=t(r[o])(e[o]);return u}}};var Us=function(t){return function(r){return t[r]}};function Rn(){return[]}var bp=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var cf=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},Nn=function(t){return function(){return t}};function qs(t){return function(){return t.slice()}}var pf=qs,Dp=qs,rS=function(){function t(r,e,n,u,o,p){var l,s,m,h,P,B,N;for(l=o+(p-o>>1),l-o>1&&t(r,e,u,n,o,l),p-l>1&&t(r,e,u,n,l,p),s=o,m=l,h=o;s<l&&m<p;)P=u[s],B=u[m],N=e(r(P)(B)),N>0?(n[h++]=B,++m):(n[h++]=P,++s);for(;s<l;)n[h++]=u[s++];for(;m<p;)n[h++]=u[m++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var js=function(t){return function(r){return function(){var n=Dp(r)();return t(n)(),Nn(n)()}}};var fn=function(t){return bp([t])};var Xs=O(ue),uS=ma(bn),aS=ur(ue),iS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var oS=function(t){return function(){var e=Xr(t.value1)();return Lr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var _f=function(t){return Xs(iS.create(t))(ne(0))},vf=function(t){return function(r){return function(){for(var n=ne(!1)();Xs(uS)(Xr(n))();)(function(){var o=oS(t)();if(o instanceof v)return r(o.value0)();if(o instanceof L)return aS(on(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[o.constructor.name])})();return{}}}};var Ks=function(){function t(u){return[u]}function r(u){return function(o){return[u,o]}}function e(u){return function(o){return function(p){return[u,o,p]}}}function n(u){return function(o){return u.concat(o)}}return function(u){return function(o){return function(p){return function(l){return function(s){function m(h,P){switch(P-h){case 0:return p([]);case 1:return o(t)(l(s[h]));case 2:return u(o(r)(l(s[h])))(l(s[h+1]));case 3:return u(u(o(e)(l(s[h])))(l(s[h+1])))(l(s[h+2]));default:var B=h+Math.floor((P-h)/4)*2;return u(o(n)(m(h,B)))(m(B,P))}}return m(0,s.length)}}}}}}();var WS=Nt(Bt),We=function(t){return t.traverse};var $p=function(t){var r=We(t);return function(e){return r(e)(WS)}},da={traverse:function(t){var r=t.Apply0();return Ks(jt(r))(O(r.Functor0()))(z(t))},sequence:function(t){return $p(da)(t)},Functor0:function(){return Dr},Foldable1:function(){return xt}};var n$=O(hr);var u$=Oe();var a$=nt(jr);var Tp=function(){return Us},i$=Tp(),xp=function(){return Os(R(L.value))(function(t){return function(r){return new v({head:t,tail:r})}})}();var df=function(t){return Hs(t)(function(r){if(r instanceof wt)return 1;if(r instanceof It)return 0;if(r instanceof $t)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var yf=function(t){return function(r){return js(fn(r))(t)()}},fm=function(t){return[t]};var C=function(t){return function(r){return Yi(t)(of(0)(gn(r)-1|0))(r)}};var Lu=function(){return Rs(v.create)(L.value)}(),Ep=function(t){return Lu(t)(gn(t)-1|0)};var Mp=function(t){return Lu(t)(0)};var ro=function(){return Ns(L.value)(Ha)}();var wp=function(){return Bs(v.create)(L.value)}();var Ip=function(t){return function(r){return n$(i$(r))(wp(t)(r))}};var cm=function(){return Ws(v.create)(L.value)}(),Lp=function(t){return function(r){return function(e){return e.length===0?[]:tr(e)(function(n){return u$(cm(n)(e))})(wp(t(r))(e))}}};var eo=function(t){return function(r){return a$([t])(r)}};var o$=lr(dt(qa)),Pp=function(t){return o$(function(){var r=tr([])(fm);return function(e){return r(t(e))}}())};var pm=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var cu=function(t){return t.mapWithIndex};var Sa={mapWithIndex:pm,Functor0:function(){return Dr}};var Hn=function(t){return t.foldrWithIndex};var Un=function(t){return t.foldlWithIndex};var pu=function(t){return t.foldMapWithIndex};var qn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var Sf=function(t){var r=D(t);return function(e){return new qn(e,r)}};var rr=function(){function t(){}return t.value=new t,t}(),Dt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),$f=function(t){return t},y$=function(t){return new Dt(t.value0,t.value1)};var g$=function(t){var r=function(e){return function(n){var u=e,o=!1,p;function l(s,m){if(m instanceof Dt&&m.value1 instanceof Dt&&m.value1.value1 instanceof Dt){u=new Dt(m,s),n=m.value1.value1.value1;return}var h=function(B){return B instanceof Dt&&B.value1 instanceof Dt&&B.value1.value1 instanceof rr?new Dt(t(B.value0),new Dt(t(B.value1.value0),rr.value)):B instanceof Dt&&B.value1 instanceof rr?new Dt(t(B.value0),rr.value):rr.value},P=function(B){return function(N){var f=B,d=!1,ot;function X(Rt,Wt){if(Rt instanceof Dt&&Rt.value0 instanceof Dt&&Rt.value0.value1 instanceof Dt&&Rt.value0.value1.value1 instanceof Dt){f=Rt.value1,N=new Dt(t(Rt.value0.value0),new Dt(t(Rt.value0.value1.value0),new Dt(t(Rt.value0.value1.value1.value0),Wt)));return}return d=!0,Wt}for(;!d;)ot=X(f,N);return ot}};return o=!0,P(s)(h(m))}for(;!o;)p=l(u,n);return p}};return r(rr.value)},no={map:g$};var cn={foldr:function(t){return function(r){var e=function(){var u=function(o){return function(p){var l=o,s=!1,m;function h(P,B){if(B instanceof rr)return s=!0,P;if(B instanceof Dt){l=new Dt(B.value0,P),p=B.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[P.constructor.name,B.constructor.name])}for(;!s;)m=h(l,p);return m}};return u(rr.value)}(),n=ir(cn)(lr(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,o=!1,p;function l(s,m){if(m instanceof rr)return o=!0,s;if(m instanceof Dt){u=t(s)(m.value0),n=m.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[m.constructor.name])}for(;!o;)p=l(u,n);return p}};return r},foldMap:function(t){var r=nt(t.Semigroup0()),e=zt(t);return function(n){return ir(cn)(function(u){var o=r(u);return function(p){return o(n(p))}})(e)}}};var S$=vr(cn);var Cf={append:function(t){return function(r){return S$(Dt.create)(r)(t)}}},_m=nt(Cf);var vm={append:function(t){return function(r){return new qn(t.value0,_m(t.value1)(y$(r)))}}};var sm={alt:_m,Functor0:function(){return no}},Rp=function(){return{empty:rr.value,Alt0:function(){return sm}}}();var hf=function(){var t=function(r){return function(e){var n=r,u=!1,o;function p(l,s){if(s instanceof rr)return u=!0,l;if(s instanceof Dt){n=new Dt(s.value0,l),e=s.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,s.constructor.name])}for(;!u;)o=p(n,e);return o}};return t(rr.value)}();var dm=function(t){return t()};var ym=function(t){throw new Error(t)};var gm=function(){return ym};var q$=gm(),z$=dm,Ru=function(t){return z$(function(){return q$(t)})};var _t=function(){function t(){}return t.value=new t,t}(),Ct=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Xt=function(){function t(r,e,n,u,o,p,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p,this.value6=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return function(l){return new t(r,e,n,u,o,p,l)}}}}}}},t}(),Nu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),lu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),Bu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),zn=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Wu=function(){function t(r,e,n,u,o,p){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=o,this.value5=p}return t.create=function(r){return function(e){return function(n){return function(u){return function(o){return function(p){return new t(r,e,n,u,o,p)}}}}}},t}(),Tf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var hm=function(t){return function(r){return new Ct(_t.value,t,r,_t.value)}};var ao=function(t){var r=Tt(t);return function(e){var n=function(u){var o=!1,p;function l(s){if(s instanceof _t)return o=!0,L.value;if(s instanceof Ct){var m=r(e)(s.value1);if(m instanceof It)return o=!0,new v(s.value2);if(m instanceof $t){u=s.value0;return}u=s.value3;return}if(s instanceof Xt){var h=r(e)(s.value1);if(h instanceof It)return o=!0,new v(s.value2);var P=r(e)(s.value4);if(P instanceof It)return o=!0,new v(s.value5);if(h instanceof $t){u=s.value0;return}if(P instanceof wt){u=s.value6;return}u=s.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[s.constructor.name])}for(;!o;)p=l(u);return p};return n}};var Hu={map:function(t){return function(r){if(r instanceof _t)return _t.value;if(r instanceof Ct)return new Ct(O(Hu)(t)(r.value0),r.value1,t(r.value2),O(Hu)(t)(r.value3));if(r instanceof Xt)return new Xt(O(Hu)(t)(r.value0),r.value1,t(r.value2),O(Hu)(t)(r.value3),r.value4,t(r.value5),O(Hu)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var Fm=function(t){return function(r){return function(e){var n=t,u=r,o=!1,p;function l(s,m,h){if(m instanceof rr)return o=!0,h;if(m instanceof Dt){if(m.value0 instanceof Nu){n=s,u=m.value1,e=new Ct(h,m.value0.value0,m.value0.value1,m.value0.value2);return}if(m.value0 instanceof lu){n=s,u=m.value1,e=new Ct(m.value0.value0,m.value0.value1,m.value0.value2,h);return}if(m.value0 instanceof Bu){n=s,u=m.value1,e=new Xt(h,m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5);return}if(m.value0 instanceof zn){n=s,u=m.value1,e=new Xt(m.value0.value0,m.value0.value1,m.value0.value2,h,m.value0.value3,m.value0.value4,m.value0.value5);return}if(m.value0 instanceof Wu){n=s,u=m.value1,e=new Xt(m.value0.value0,m.value0.value1,m.value0.value2,m.value0.value3,m.value0.value4,m.value0.value5,h);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[m.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[m.constructor.name,h.constructor.name])}for(;!o;)p=l(n,u,e);return p}}},Ef=function(t){var r=Fm(t),e=Tt(t);return function(n){return function(u){var o=function(l){return function(s){var m=l,h=!1,P;function B(N,f){if(N instanceof rr)return h=!0,new Ct(f.value0,f.value1,f.value2,f.value3);if(N instanceof Dt){if(N.value0 instanceof Nu)return h=!0,r(N.value1)(new Xt(f.value0,f.value1,f.value2,f.value3,N.value0.value0,N.value0.value1,N.value0.value2));if(N.value0 instanceof lu)return h=!0,r(N.value1)(new Xt(N.value0.value0,N.value0.value1,N.value0.value2,f.value0,f.value1,f.value2,f.value3));if(N.value0 instanceof Bu){m=N.value1,s=new Tf(new Ct(f.value0,f.value1,f.value2,f.value3),N.value0.value0,N.value0.value1,new Ct(N.value0.value2,N.value0.value3,N.value0.value4,N.value0.value5));return}if(N.value0 instanceof zn){m=N.value1,s=new Tf(new Ct(N.value0.value0,N.value0.value1,N.value0.value2,f.value0),f.value1,f.value2,new Ct(f.value3,N.value0.value3,N.value0.value4,N.value0.value5));return}if(N.value0 instanceof Wu){m=N.value1,s=new Tf(new Ct(N.value0.value0,N.value0.value1,N.value0.value2,N.value0.value3),N.value0.value4,N.value0.value5,new Ct(f.value0,f.value1,f.value2,f.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[N.value0.constructor.name,f.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[N.constructor.name,f.constructor.name])}for(;!h;)P=B(m,s);return P}},p=function(l){return function(s){var m=l,h=!1,P;function B(N,f){if(f instanceof _t)return h=!0,o(N)(new Tf(_t.value,n,u,_t.value));if(f instanceof Ct){var d=e(n)(f.value1);if(d instanceof It)return h=!0,r(N)(new Ct(f.value0,n,u,f.value3));if(d instanceof $t){m=new Dt(new Nu(f.value1,f.value2,f.value3),N),s=f.value0;return}m=new Dt(new lu(f.value0,f.value1,f.value2),N),s=f.value3;return}if(f instanceof Xt){var d=e(n)(f.value1);if(d instanceof It)return h=!0,r(N)(new Xt(f.value0,n,u,f.value3,f.value4,f.value5,f.value6));var ot=e(n)(f.value4);if(ot instanceof It)return h=!0,r(N)(new Xt(f.value0,f.value1,f.value2,f.value3,n,u,f.value6));if(d instanceof $t){m=new Dt(new Bu(f.value1,f.value2,f.value3,f.value4,f.value5,f.value6),N),s=f.value0;return}if(d instanceof wt&&ot instanceof $t){m=new Dt(new zn(f.value0,f.value1,f.value2,f.value4,f.value5,f.value6),N),s=f.value3;return}m=new Dt(new Wu(f.value0,f.value1,f.value2,f.value3,f.value4,f.value5),N),s=f.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[N.constructor.name,f.constructor.name])}for(;!h;)P=B(m,s);return P}};return p(rr.value)}}},K$=function(t){var r=Fm(t),e=Tt(t);return function(n){var u=function(s){return function(m){var h=s,P=!1,B;function N(f,d){if(f instanceof rr)return P=!0,d;if(f instanceof Dt){if(f.value0 instanceof Nu&&f.value0.value2 instanceof _t&&d instanceof _t)return P=!0,r(f.value1)(new Ct(_t.value,f.value0.value0,f.value0.value1,_t.value));if(f.value0 instanceof lu&&f.value0.value0 instanceof _t&&d instanceof _t)return P=!0,r(f.value1)(new Ct(_t.value,f.value0.value1,f.value0.value2,_t.value));if(f.value0 instanceof Nu&&f.value0.value2 instanceof Ct){h=f.value1,m=new Xt(d,f.value0.value0,f.value0.value1,f.value0.value2.value0,f.value0.value2.value1,f.value0.value2.value2,f.value0.value2.value3);return}if(f.value0 instanceof lu&&f.value0.value0 instanceof Ct){h=f.value1,m=new Xt(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3,f.value0.value1,f.value0.value2,d);return}return f.value0 instanceof Nu&&f.value0.value2 instanceof Xt?(P=!0,r(f.value1)(new Ct(new Ct(d,f.value0.value0,f.value0.value1,f.value0.value2.value0),f.value0.value2.value1,f.value0.value2.value2,new Ct(f.value0.value2.value3,f.value0.value2.value4,f.value0.value2.value5,f.value0.value2.value6)))):f.value0 instanceof lu&&f.value0.value0 instanceof Xt?(P=!0,r(f.value1)(new Ct(new Ct(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3),f.value0.value0.value4,f.value0.value0.value5,new Ct(f.value0.value0.value6,f.value0.value1,f.value0.value2,d)))):f.value0 instanceof Bu&&f.value0.value2 instanceof _t&&f.value0.value5 instanceof _t&&d instanceof _t?(P=!0,r(f.value1)(new Xt(_t.value,f.value0.value0,f.value0.value1,_t.value,f.value0.value3,f.value0.value4,_t.value))):f.value0 instanceof zn&&f.value0.value0 instanceof _t&&f.value0.value5 instanceof _t&&d instanceof _t?(P=!0,r(f.value1)(new Xt(_t.value,f.value0.value1,f.value0.value2,_t.value,f.value0.value3,f.value0.value4,_t.value))):f.value0 instanceof Wu&&f.value0.value0 instanceof _t&&f.value0.value3 instanceof _t&&d instanceof _t?(P=!0,r(f.value1)(new Xt(_t.value,f.value0.value1,f.value0.value2,_t.value,f.value0.value4,f.value0.value5,_t.value))):f.value0 instanceof Bu&&f.value0.value2 instanceof Ct?(P=!0,r(f.value1)(new Ct(new Xt(d,f.value0.value0,f.value0.value1,f.value0.value2.value0,f.value0.value2.value1,f.value0.value2.value2,f.value0.value2.value3),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof zn&&f.value0.value0 instanceof Ct?(P=!0,r(f.value1)(new Ct(new Xt(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3,f.value0.value1,f.value0.value2,d),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof zn&&f.value0.value5 instanceof Ct?(P=!0,r(f.value1)(new Ct(f.value0.value0,f.value0.value1,f.value0.value2,new Xt(d,f.value0.value3,f.value0.value4,f.value0.value5.value0,f.value0.value5.value1,f.value0.value5.value2,f.value0.value5.value3)))):f.value0 instanceof Wu&&f.value0.value3 instanceof Ct?(P=!0,r(f.value1)(new Ct(f.value0.value0,f.value0.value1,f.value0.value2,new Xt(f.value0.value3.value0,f.value0.value3.value1,f.value0.value3.value2,f.value0.value3.value3,f.value0.value4,f.value0.value5,d)))):f.value0 instanceof Bu&&f.value0.value2 instanceof Xt?(P=!0,r(f.value1)(new Xt(new Ct(d,f.value0.value0,f.value0.value1,f.value0.value2.value0),f.value0.value2.value1,f.value0.value2.value2,new Ct(f.value0.value2.value3,f.value0.value2.value4,f.value0.value2.value5,f.value0.value2.value6),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof zn&&f.value0.value0 instanceof Xt?(P=!0,r(f.value1)(new Xt(new Ct(f.value0.value0.value0,f.value0.value0.value1,f.value0.value0.value2,f.value0.value0.value3),f.value0.value0.value4,f.value0.value0.value5,new Ct(f.value0.value0.value6,f.value0.value1,f.value0.value2,d),f.value0.value3,f.value0.value4,f.value0.value5))):f.value0 instanceof zn&&f.value0.value5 instanceof Xt?(P=!0,r(f.value1)(new Xt(f.value0.value0,f.value0.value1,f.value0.value2,new Ct(d,f.value0.value3,f.value0.value4,f.value0.value5.value0),f.value0.value5.value1,f.value0.value5.value2,new Ct(f.value0.value5.value3,f.value0.value5.value4,f.value0.value5.value5,f.value0.value5.value6)))):f.value0 instanceof Wu&&f.value0.value3 instanceof Xt?(P=!0,r(f.value1)(new Xt(f.value0.value0,f.value0.value1,f.value0.value2,new Ct(f.value0.value3.value0,f.value0.value3.value1,f.value0.value3.value2,f.value0.value3.value3),f.value0.value3.value4,f.value0.value3.value5,new Ct(f.value0.value3.value6,f.value0.value4,f.value0.value5,d)))):(P=!0,Ru("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[f.constructor.name])}for(;!P;)B=N(h,m);return B}},o=function(s){return function(m){var h=s,P=!1,B;function N(f,d){if(d instanceof Ct&&d.value0 instanceof _t&&d.value3 instanceof _t)return P=!0,u(f)(_t.value);if(d instanceof Ct){h=new Dt(new lu(d.value0,d.value1,d.value2),f),m=d.value3;return}if(d instanceof Xt&&d.value0 instanceof _t&&d.value3 instanceof _t&&d.value6 instanceof _t)return P=!0,u(new Dt(new lu(_t.value,d.value1,d.value2),f))(_t.value);if(d instanceof Xt){h=new Dt(new Wu(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),f),m=d.value6;return}return P=!0,Ru("The impossible happened in partial function `removeMaxNode`.")}for(;!P;)B=N(h,m);return B}},p=function(s){var m=!1,h;function P(B){if(B instanceof Ct&&B.value3 instanceof _t)return m=!0,{key:B.value1,value:B.value2};if(B instanceof Ct){s=B.value3;return}if(B instanceof Xt&&B.value6 instanceof _t)return m=!0,{key:B.value4,value:B.value5};if(B instanceof Xt){s=B.value6;return}return m=!0,Ru("The impossible happened in partial function `maxNode`.")}for(;!m;)h=P(s);return h},l=function(s){return function(m){var h=s,P=!1,B;function N(f,d){if(d instanceof _t)return P=!0,L.value;if(d instanceof Ct){var ot=e(n)(d.value1);if(d.value3 instanceof _t&&ot instanceof It)return P=!0,new v(new j(d.value2,u(f)(_t.value)));if(ot instanceof It){var X=p(d.value0);return P=!0,new v(new j(d.value2,o(new Dt(new Nu(X.key,X.value,d.value3),f))(d.value0)))}if(ot instanceof $t){h=new Dt(new Nu(d.value1,d.value2,d.value3),f),m=d.value0;return}h=new Dt(new lu(d.value0,d.value1,d.value2),f),m=d.value3;return}if(d instanceof Xt){var Rt=function(){return d.value0 instanceof _t&&d.value3 instanceof _t&&d.value6 instanceof _t}(),ot=e(n)(d.value4),Wt=e(n)(d.value1);if(Rt&&Wt instanceof It)return P=!0,new v(new j(d.value2,r(f)(new Ct(_t.value,d.value4,d.value5,_t.value))));if(Rt&&ot instanceof It)return P=!0,new v(new j(d.value5,r(f)(new Ct(_t.value,d.value1,d.value2,_t.value))));if(Wt instanceof It){var X=p(d.value0);return P=!0,new v(new j(d.value2,o(new Dt(new Bu(X.key,X.value,d.value3,d.value4,d.value5,d.value6),f))(d.value0)))}if(ot instanceof It){var X=p(d.value3);return P=!0,new v(new j(d.value5,o(new Dt(new zn(d.value0,d.value1,d.value2,X.key,X.value,d.value6),f))(d.value3)))}if(Wt instanceof $t){h=new Dt(new Bu(d.value1,d.value2,d.value3,d.value4,d.value5,d.value6),f),m=d.value0;return}if(Wt instanceof wt&&ot instanceof $t){h=new Dt(new zn(d.value0,d.value1,d.value2,d.value4,d.value5,d.value6),f),m=d.value3;return}h=new Dt(new Wu(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),f),m=d.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[d.constructor.name])}for(;!P;)B=N(h,m);return B}};return l(rr.value)}},ie={foldr:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof Ct)return vr(ie)(t)(t(e.value2)(vr(ie)(t)(r)(e.value3)))(e.value0);if(e instanceof Xt)return vr(ie)(t)(t(e.value2)(vr(ie)(t)(t(e.value5)(vr(ie)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof Ct)return ir(ie)(t)(t(ir(ie)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Xt)return ir(ie)(t)(t(ir(ie)(t)(t(ir(ie)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=zt(t),e=nt(t.Semigroup0());return function(n){return function(u){if(u instanceof _t)return r;if(u instanceof Ct)return e(gr(ie)(t)(n)(u.value0))(e(n(u.value2))(gr(ie)(t)(n)(u.value3)));if(u instanceof Xt)return e(gr(ie)(t)(n)(u.value0))(e(n(u.value2))(e(gr(ie)(t)(n)(u.value3))(e(n(u.value5))(gr(ie)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},be={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof Ct)return Hn(be)(t)(t(e.value1)(e.value2)(Hn(be)(t)(r)(e.value3)))(e.value0);if(e instanceof Xt)return Hn(be)(t)(t(e.value1)(e.value2)(Hn(be)(t)(t(e.value4)(e.value5)(Hn(be)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof _t)return r;if(e instanceof Ct)return Un(be)(t)(t(e.value1)(Un(be)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Xt)return Un(be)(t)(t(e.value4)(Un(be)(t)(t(e.value1)(Un(be)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=zt(t),e=nt(t.Semigroup0());return function(n){return function(u){if(u instanceof _t)return r;if(u instanceof Ct)return e(pu(be)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(pu(be)(t)(n)(u.value3)));if(u instanceof Xt)return e(pu(be)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(pu(be)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(pu(be)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return ie}},Q$=Hn(be),Y$=Un(be),Tm=function(){return Q$(function(t){return function(r){return function(e){return new Dt(t,e)}}})(rr.value)}();var Vn=function(){return _t.value}();var qp=function(t){var r=K$(t);return function(e){return function(n){return tr(n)(Ur)(r(e)(n))}}};var Uu=function(t){var r=ao(t),e=qp(t),n=Ef(t);return function(u){return function(o){return function(p){var l=u(r(o)(p));if(l instanceof L)return e(o)(p);if(l instanceof v)return n(o)(l.value0)(p);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[l.constructor.name])}}}};var Z$=function(t){var r=Uu(t);return function(e){return function(n){return function(u){var o=function(p){return function(l){return function(s){return r(function(){var m=tr(s)(e(s));return function(h){return v.create(m(h))}}())(p)(l)}}};return Y$(o)(u)(n)}}}};var xm=function(t){return Z$(t)(R)};var Em=ur(ue),eC=z(yr),nC=jt(ti),uC=O(ue);var Mf={compact:function(t){return function(){var e=Rn(),n=_f(function(u){return Lu(t)(u)})();return vf(n)(function(u){return Em(function(o){if(o instanceof L)return eC(0);if(o instanceof v)return fn(o.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[o.constructor.name])}(u))})(),Nn(e)()}()},separate:function(t){return function(){var e=Rn(),n=Rn(),u=_f(function(o){return Lu(t)(o)})();return vf(u)(function(o){return Em(function(p){if(p instanceof it)return fn(p.value0)(e);if(p instanceof at)return fn(p.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[p.constructor.name])}(o))})(),nC(uC(function(o){return function(p){return{left:o,right:p}}})(Nn(e)))(Nn(n))()}()}};var _u=function(t){return t.compact};var Mm=nt(jr),fC=ir(xt);var wm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof it)return{left:Mm(e.left)([u.value0]),right:e.right};if(u instanceof at)return{right:Mm(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return fC(r)({left:[],right:[]})},partition:ff,filterMap:Pp,filter:Qi,Compactable0:function(){return Mf},Functor1:function(){return Dr}};var Ye=function(t){return t.filterMap};var zp=function(t){return t.filter};var pC=gr(cn),lC=ir(cn),_C=vr(cn);var vC=function(t){var r=xm(t);return function(e){return function(n){return r(e)(n)}}};var Vp=function(t){return Tm(t)};var Lm=function(t){return hm(t)(void 0)};var Gp=function(t){return{append:vC(t)}};var Pm={foldMap:function(t){var r=pC(t);return function(e){var n=r(e);return function(u){return n(Vp(u))}}},foldl:function(t){return function(r){var e=lC(t)(r);return function(n){return e(Vp(n))}}},foldr:function(t){return function(r){var e=_C(t)(r);return function(n){return e(Vp(n))}}}};var sC=Vn;var Om=function(t){var r=Gp(t);return{mempty:sC,Semigroup0:function(){return r}}};var Rm=function(t){var r=qp(t);return function(e){return function(n){return r(e)(n)}}};function Nm(t){return function(r){return function(){return setTimeout(r,t)}}}function Bm(t){return function(){clearTimeout(t)}}var DC=Tt(se);var Wm=Nm;var kC={eq:function(t){return function(r){return t===r}}},wf={compare:function(t){return function(r){return DC(t)(r)}},Eq0:function(){return kC}};var Hm=Bm;var vu=function(r){return function(e){return r(e)()}};var ui=function(r){return function(e){return function(){return r(e)}}};var PC=function(t){var r=nt(op(t));return{append:function(e){return function(n){return vu(function(u){return r(ui(e)(u))(ui(n)(u))})}}}};var Vm=function(t){var r=zt(fp(t)),e=PC(t.Semigroup0());return{mempty:vu(function(n){return r}),Semigroup0:function(){return e}}};var OC=O(iu),RC=z(On),jm=function(t){return t.sampleOnRight};var Ta=function(t){return t.keepLatest};var Xm=function(t){return t.fix},qu=function(t){var r=Xm(t),e=jm(t),n=t.Alternative0(),u=Ht(n.Plus1().Alt0()),o=z(n.Applicative0()),p=O(t.Filterable1().Functor1());return function(l){return function(s){return function(m){return r(function(h){return e(u(h)(o(s)))(p(lr(l))(m))})}}}};var zu=function(t){var r=Ye(t.Filterable1()),e=qu(t);return function(n){return function(u){return function(o){return r(Ur)(e(function(p){return function(l){return OC(RC)(n(p.value0)(l))}})(new j(u,L.value))(o))}}}};function Xp(t){return function(r){return t===r}}var Jm=Xp;var Km=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},Qm=Je(Se),If=Qm(Ke),xa=z(Se),Ym=zt(Vm(jc)),Gu=Aa(ri),fo=ur(q),WC=nt(jr),HC=zt(Om(wf)),UC=Rm(wf),qC=nt(Gp(wf)),zC=Qm(Pm),VC=jt(Ir),GC=O(q);var jC=function(t){return function(r){return function(e,n){var u=$e(L.value)(),o=t(e,function(l){return me(new v(l))(u)()}),p=r(e,function(l){var s=Qr(u)();return If(s)(function(m){return function(){return n(l(m))}})()});return function(){return o(),p()}}}},XC=function(t){return function(r){return function(e,n){var u=$e(L.value)(),o=t(e,function(l){var s=Qr(u)();return If(s)(function(m){return function(){return n(m(l))}})()}),p=r(e,function(l){return me(new v(l))(u)()});return function(){return o(),p()}}}},JC=function(t){return function(r,e){var n=$e(xa(void 0))(),u=t(r,function(o){var p=Qr(n)();p();var l=o(r,e);return me(l)(n)()});return function(){var p=Qr(n)();return p(),u()}}},Tr={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},KC=O(Tr),co=function(t){return function(r){return function(e,n){return r(e,function(u){var o=t(u);if(o instanceof v)return n(o.value0);if(o instanceof L)return void 0;throw new Error("Failed pattern match at FRP.Event (line 201, column 31 - line 203, column 35): "+[o.constructor.name])})}}},Jp=function(t){return co(function(r){var e=t(r);if(e)return new v(r);if(!e)return L.value;throw new Error("Failed pattern match at FRP.Event (line 129, column 13 - line 131, column 25): "+[e.constructor.name])})},Zm=function(){var r=pp(),e=$e(0)();return{event:function(n,u){var o=$e(u)(),p=Qr(e)();return lp(p,o,r),Ki(function(l){return l+1|0})(e)(),function(){return me(Ym)(o)(),_p(p,r),void 0}},push:function(n){return cp(r,function(u){var o=Qr(u)();return o(n)})}}},QC=function(t){return function(r,e){var n=Zm(),u=t(n.event),o=n.event(r,e),p=u(r,n.push);return function(){return p(),o()}}},po={compact:co(Nt(Bt)),separate:function(t){return{left:co(function(r){if(r instanceof it)return new v(r.value0);if(r instanceof at)return L.value;throw new Error("Failed pattern match at FRP.Event (line 112, column 13 - line 114, column 33): "+[r.constructor.name])})(t),right:co(function(r){if(r instanceof at)return new v(r.value0);if(r instanceof it)return L.value;throw new Error("Failed pattern match at FRP.Event (line 119, column 13 - line 121, column 32): "+[r.constructor.name])})(t)}}},Gn={filter:Jp,filterMap:co,partition:function(t){return function(r){return{yes:Jp(t)(r),no:Jp(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:Ye(Gn)(function(){var e=ye(v.create)(R(L.value));return function(n){return e(t(n))}}())(r),right:Ye(Gn)(function(e){return Vc(t(e))})(r)}}},Compactable0:function(){return po},Functor1:function(){return Tr}},YC=function(t){return function(r){return function(e,n){var u=$e(L.value)(),o=Gu(Rn)(),p=$e(L.value)(),l=Gu(Rn)(),s=$e(!0)(),m=t(e,function(N){var f=Qr(s)();if(f)return fo(Gu(fn(N)(o)))();me(new v(N))(u)();var d=Qr(p)();return If(d)(function(ot){return function(){return n(ot(N))}})()}),h=r(e,function(N){var f=Qr(s)();if(f)return fo(Gu(fn(N)(l)))();me(new v(N))(p)();var d=Qr(u)();return If(d)(function(ot){return function(){return n(N(ot))}})()});me(!1)(s)();var P=Gu(pf(o))(),B=Gu(pf(l))();return function(){return P.length===0?me(Ep(B))(p)():ef(P,function(N){return me(new v(N))(u)(),ef(B,function(f){return me(new v(f))(p)(),n(f(N))})})}(),Gu(cf(0)(gn(P))([])(o))(),Gu(cf(0)(gn(B))([])(l))(),function(){return m(),h()}}}},Qp=function(t){return function(r){return r}(Yp(321).subscribe)(t)},Yp=Km("backdoor","FRP.Event",function(){var t=function(){var e=pp(),n=$e(0)();return{event:function(u,o){var p=$e(o)(),l=Qr(n)();return lp(l,p,e),Ki(function(s){return s+1|0})(n)(),function(){return me(Ym)(p)(),_p(l,e),void 0}},push:function(u){return function(){return cp(e,function(o){var p=Qr(o)();return p(u)})}}}};return{makeEvent:function(){var r=function(e){return function(n,u){return n?xa(void 0):e(function(o){return function(){return u(o)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?xa(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(o){return function(){return u(o)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var o=function(p){return function(l){return function(){return p(n,vu(l))}}};return e(o)(function(p){return function(){return u(p)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var o=function(p,l){return p(n,l)};return e(o,u)}};return r}(),create:t,createPure:t,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,vu(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,vu(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var o=Kp(722)();return u(e(o.push)(o.event)),xa(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,o){var p=Zm();return o(n(p.event)),e(u,p.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=Kp(740)(),o=Qp(e)(u.push)();return{event:u.event,unsubscribe:o}}};return r}(),mailboxed:function(){var r=function(e){var n=Uu(e),u=ao(e);return function(o){return function(p){return function(l,s){var m=$e(Vn)();s(p(function(P){return function(B,N){return fo(nf(n(function(f){if(f instanceof L)return new v([N]);if(f instanceof v)return new v(WC(f.value0)([N]));throw new Error("Failed pattern match at FRP.Event (line 753, column 21 - line 755, column 55): "+[f.constructor.name])})(P))(m))(),fo(nf(n(function(f){if(f instanceof L)return L.value;if(f instanceof v)return new v(Lp(Jm)(N)(f.value0));throw new Error("Failed pattern match at FRP.Event (line 762, column 21 - line 764, column 69): "+[f.constructor.name])})(P))(m))}}));var h=o(l,function(P){var B=Qr(m)(),N=u(P.address)(B);if(N instanceof L)return void 0;if(N instanceof v)return ef(N.value0,function(f){return f(P.payload)});throw new Error("Failed pattern match at FRP.Event (line 771, column 13 - line 773, column 99): "+[N.constructor.name])});return function(){return fo(me(Vn)(m))(),h()}}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,o){var p=$e(HC)(),l=n(u,function(s){var m=$e(L.value)(),h=Wm(e)(function(){o(s);var B=Qr(m)();return tr(xa(void 0))(function(N){return Ki(UC(N))(p)})(B)()})();return me(new v(h))(m)(),Ki(qC(Lm(h)))(p)()});return function(){var m=Qr(p)();return zC(m)(Hm)(),l()}}}};return r}()}}),Kp=Km("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(Yp(437).create)()}}),ai=Yp(583),tb=Kp(434),Zp=function(t){return function(r){return r}(ai.bus)(t)};var rb=function(t){return function(r){return r}(ai.makeLemmingEvent)(t)},pn=function(t){return function(r){return r}(ai.makeLemmingEventO)(t)},eb=function(t){return function(r){return r}(ai.makePureEvent)(t)},Lf=function(t){return function(r){return r}(ai.memoize)(t)};var nb=function(t){return function(r){return r}(ai.subscribePure)(t)};var ZC={apply:function(t){return function(r){return YC(t)(KC(Li)(r))}},Functor0:function(){return Tr}};var Yt={pure:function(t){return function(r,e){return e(t),xa(void 0)}},Apply0:function(){return ZC}};var Sr={alt:function(t){return function(r){return function(e,n){return VC(GC(function(u){return function(o){return function(){return u(),o()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Tr}};var _={empty:function(t,r){return xa(void 0)},Alt0:function(){return Sr}},th={Applicative0:function(){return Yt},Plus1:function(){return _}},De={keepLatest:JC,sampleOnRight:jC,sampleOnLeft:XC,fix:QC,Alternative0:function(){return th},Filterable1:function(){return Gn}};var rh=z(Yt);var eh=function(t){return t},lo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),_o=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),nh=function(t){return t},Pf=k(),a=nh;var c=function(){return lo.create}();var K=function(){return _o.create}(),kr=function(){var t=O(hu)(O(q)(R(!0)));return function(r){return eh(t(r))}}(),Pt=function(t){return t.attr};var su=function(t){var r=Pt(t);return function(e){return function(n){return rh(r(e)(n))}}};function ub(t){return()=>t.slice()}function ab(t){return r=>e=>()=>{e[t]=r}}function ib(t){return()=>t.slice()}var tl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var nl=function(t){var r=Gr(t);return function(){return function(){return function(e){return function(n){return function(u){return eu(r(e))(n)(u)}}}}}},Of=function(t){var r=Gr(t);return function(){return function(e){return function(n){return un(r(e))(n)}}}};var fb=z(yr);var Nf={vb:function(t){return fb(new j({},{}))}},cb=function(t){return t.vb},fh={vbus:function(){var t=function(){return function(n){var u=cb(n);return function(o){return function(p){return rb(function(l){return function(s){return function(){var h=u(tt.value)();return s(p(h.value0)(h.value1))(),fb(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},ul=function(){return function(t){return function(r){return function(e){return e()(t)}(fh.vbus)(r)}}};var ii=function(t){var r=nl(t)()();return function(){return function(){return function(e){var n=cb(e);return function(){return function(){return{vb:function(u){return function(){var p=n(tt.value)(),l=tb();return new j(r(tt.value)(l.push)(p.value0),r(tt.value)(l.event)(p.value1))}}}}}}}}};var ju=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),al=function(){function t(){}return t.value=new t,t}();var vo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),oi=function(){function t(){}return t.value=new t,t}(),Wf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),il=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ol=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ea=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),A=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Xu={eq:function(t){return function(r){return t instanceof ju&&r instanceof ju?t.value0===r.value0:t instanceof al&&r instanceof al}}};var g=function(t){return new ol(t)};var pb=function(t){return new il(t)};var lb=t=>r=>r[t];var Ma=function(t){return t.reflectType};var vb=function(t){return Ma(t)};var fi=Dr;var sb=function(){return function(t){return t}};var fl=function(){return function(){return function(){return function(){return function(){return function(t){var r=vb(t);return function(e){return lb(r(e))}}}}}}};var mb=[];var bb=function(){return function(){return function(t){return function(r){return eo(t)(r)}}}};function Db(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var Ju={};function pl(t){return t()}function kb(t){return function(r){return function(e){return function(n){var u=e;function o(l){return function(s){return r(s)(l)(n[l])}}for(var p in n)hasOwnProperty.call(n,p)&&(u=t(u)(o(p)));return u}}}}function Hf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var bh=Object.keys||Hf(function(t){return function(){return t}});function ll(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var _l=function(t){return function(r){return function(){return delete r[t],r}}};var $h=vr(xt);var Ch=Hf(function(t){return function(r){return r}});var hh=Db;var Ab=function(t){return function(r){return pl(function(){var n=hh(r)();return t(n)(),n})}};var ci=function(t){return function(r){return Ab(ll(t)(r))}};var db=kb(Li),Fh=function(t){var r=nt(t.Semigroup0()),e=zt(t);return function(n){return db(function(u){return function(o){return function(p){return r(u)(n(o)(p))}}})(e)}},yb={foldl:function(t){return db(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return $h(t)(r)(Ch(e))}}},foldMap:function(t){var r=Fh(t);return function(e){return r(R(e))}}};var vl=function(t){return Ab(_l(t))};function gb(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function Sb(t){return function(r){return function(e){return e[t]=r,e}}}function $b(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function Cb(t){return function(r){return delete r[t],r}}var hb=oa;var Fb=function(){return function(){return function(t){var r=Gr(t);return function(e){return function(n){return function(u){return $b(r(e))(n)(u)}}}}}};var Tb=function(){return function(){return function(t){var r=Gr(t);return function(e){return function(n){return function(u){return Sb(r(e))(n)(u)}}}}}};var xb=function(t){var r=Gr(t);return function(){return function(){return function(e){return function(n){return Cb(r(e))(n)}}}}};var Eb=function(t){return function(r){return t(gb(r))}};var Eh=Ta(De),Mh=O(Tr),wh=Dn(xt)(_);var Ih=dt(Iu),Lh=O(Dr),ml=sb(),Ph=cu(Sa),Oh=Gc(ps),pi=z(yr),Ib=O(ue),Rh=O(fi),Lb=Je(yr),Pb=Lb(Ke),Mb=wi(hb),Nh=Tb()()({reflectSymbol:function(){return"id"}}),Bh=Fb()()({reflectSymbol:function(){return"parent"}}),Wh=xb({reflectSymbol:function(){return"raiseId"}})()(),Cn=ur(ue),Hh=ru(yr),Ob=Lb(xt),Uh=Nt(Bt),qh=wr(xt)(_),zh=Qa(yr)(xt),Vh=nt(jr),Gh=ir(yb),jh=mr(ti),wb=function(){function t(){}return t.value=new t,t}(),bl=function(){function t(){}return t.value=new t,t}(),Xh=function(){function t(){}return t.value=new t,t}();var ln=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof ol)return qh(ln(t)(r)(e))(u.value0);if(u instanceof Ea)return Eh(Mh(ln(t)(r)(e))(u.value0));if(u instanceof A)return n(t.toElt(u.value0));if(u instanceof il)return pn(function(o,p){var l=ne(Ju)(),s=o(u.value0,function(m){var h=t.ids(e)(),P=ne(pi(void 0))(),B=t.ids(e)(),N=ne(pi(void 0))(),f=ne([])(),d=ne(pi(void 0))(),ot=Ib(ju.create)(t.ids(e))(),X=ne(wb.value)(),Rt=o(m,function(Qt){var et=Xr(X)();if(Qt instanceof Wf&&et instanceof bl){var dr=Xr(f)();return zh(function(V){return function(){return p(t.doLogic(Qt.value0)(e)(V))}})(dr)()}if(Qt instanceof oi&&et instanceof bl){Cn(on(Xh.value)(X))();var pe=function(){var H=Xr(f)();Ob(H)(function(Le){return Pb(r.parent)(function(Rr){return function(){return p(t.disconnectElement(e)({id:Le,parent:Rr,scope:ot}))}})})();var st=Xr(P)();st();var kt=Xr(N)();return kt(),Cn(Lr(vl(h))(l))(),Cn(Lr(vl(B))(l))()};return Cn(on(pe)(d))(),pe()}if(Qt instanceof vo&&et instanceof wb){Cn(on(bl.value)(X))();var ct=o(ln(t)(function(){var V={};for(var H in r)({}).hasOwnProperty.call(r,H)&&(V[H]=r[H]);return V.scope=ot,V.raiseId=function(st){return Cn(Lr(Vh([st]))(f))},V}())(e)(Qt.value0),p);return Cn(Lr(ci(B)(ct))(l))(),Cn(on(ct)(N))()}return void 0});Cn(on(Rt)(P))(),Cn(Lr(ci(h)(Rt))(l))();var Wt=Xr(d)();return Wt()});return function(){return Ih(Xr(l))(Gh(jh)(pi(void 0)))(),s()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},Jh=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(o){var p=function(l){return function(s){return pn(function(m,h){var P=ub(Lh(R(""))(ml(u)))(),B=wh(Ph(function(Wt){return Oh(function(Qt){return function(et){return et instanceof A?function(dr){return dr(function(){var pe={};for(var ct in l)({}).hasOwnProperty.call(l,ct)&&(pe[ct]=l[ct]);return pe.parent=L.value,pe.scope=r(l.scope),pe.raiseId=function(V){return ab(Wt)(V)(P)},pe}())(s)}(n.toElt(et.value0)):Qt(n.wrapElt(et))}})})(ml(u))),N=m(B,h),f=ne(pi(void 0))(),d=Ib(Y)(ib(P))(),ot=Rh(function(Wt){return function(Qt){return new A(n.fromEltO1(function(et){return function(dr){return pn(function(pe,ct){return et.raiseId(Wt)(),Pb(et.parent)(function(V){return function(){return ct(n.giveNewParent(dr)(Eb(Mb(Nh(tt.value)(Wt))(Mb(Bh(tt.value)(R(V)))(Wh(tt.value))))(et))(Qt))}})(),pi(void 0)})}}))}})(d),X=ln(e)(l)(s)(o(ot)(Y)),Rt=m(X,h);return Cn(on(Rt)(f))(),function(){N(),Hh(!t)(Ob(ml(d))(function(et){return function(){return h(n.deleteFromCache(s)({id:et}))}}))();var Qt=Xr(f)();return Qt()}})}};return new A(n.fromEltO2(p))}}}}}}}}},Kh=Jh()()();var Rb=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return Kh(!1)(Uh)(t)(r)(e)(n)}}}}}}};var jn=function(t){return t.state};var li=function(t){var r=jn(t);return function(e){return r(function(n){var u=e(n);return new j(u,u)})}};var gl=k(),cF=ul(),pF=Ee(ge),lF=O(Tr),Sl=Fr(),_F=St(Xu),vF=z(yr),yl=z(Yt),sF=D(_),mF=Dn(xt)(_);var qf=function(){return function(t){var r=cF(t);return function(e){return function(n){return new Ea(gl(r(e)(n)))}}}};var Ub=function(t){return function(r){var e=function(n){return n instanceof A?new A(pF(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof Ea?new Ea(lF(e)(n.value0)):r};return e(r)}},S=function(t){return Ub(v.create(t))};var $l=function(){return Wf.create}(),Cl=function(){return oi.value}(),bF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Sl(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:_F})}},toElt:function(t){return t}}},DF=bF(),_i=function(t){return new vo(Sl(Ub(L.value)(t)))},qb=function(t){return function(r){return new vo(Sl(S(t)(r)))}},Qu=function(t){return Zp(t)};var vi=function(t){return new Ea(gl(Qu(t)))};var kF=function(t){return function(r){return function(e){return ln(DF)(t)(r)(e)}}},AF=function(t){return function(r){var e=function(n){return function(u){return pn(function(o,p){var l=u.ids();n.raiseId(l)();var s=function(){if(n.parent instanceof L){var h=u.ids();return new j(yl(u.makeElement({id:h,parent:L.value,scope:n.scope,tag:"div",pos:L.value,dynFamily:L.value})),h)}if(n.parent instanceof v)return new j(sF,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 341, column 34 - line 355, column 36): "+[n.parent.constructor.name])}(),m=o(mF([s.value0,yl(u.makeDynBeacon({id:l,parent:new v(s.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),yl(u.attributeParent({id:l,parent:s.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),kF({parent:new v(s.value1),scope:n.scope,ez:!1,raiseId:function(h){return vF(void 0)},pos:L.value,dynFamily:new v(l)})(u)(t(r))]),p);return function(){return p(u.removeDynBeacon({id:l})),m()}})}};return new A(e)}},Yu=AF(gl(pb));var Vf=O(Tr),hl=Dn(xt)(_),si=z(Yt),Vb=D(_),dF=z(yr),yF=zu(De),gF=Ta(De),SF=zp(Gn),$F=St(Ba),mo=k(),zf=Fr(),CF=St(Xu);var hF=Ht(Sr);var FF=nt(jr);var zb=O(fi);var TF=rf(),xF=Ee(ge);var EF=Rb()()();var MF=function(t){return function(r){return function(e){return Vf(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},wF=function(t){return function(r){return function(e){return Vf(function(n){return function(u){if(u.value instanceof lo)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof _o)return t.setCb({id:r,key:u.key,value:u.value.value0});throw new Error("Failed pattern match at Deku.Control (line 68, column 26 - line 70, column 45): "+[u.value.constructor.name])}(Pf(n))})(e)}}},Ze=function(t){var r=function(e){return function(n){return pn(function(u,o){var p=n.ids();e.raiseId(p)();var l=u(hl([si(n.makeText({id:p,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),MF(n)(p)(t),tr(Vb)(function(s){return si(n.attributeParent({id:p,parent:s,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),o);return function(){return o(n.deleteFromCache({id:p})),l()}})}};return new A(r)},b=function(t){return Ze(si(t))},Gf=function(t){return function(r){var e=function(){var n=function(u){return function(o){return new j(u+1|0,new j(o,u))}};return yF(n)(0)}();return Yu(gF(Lf(e(r))(function(n){return Vf(function(u){return hl([Vf(R(oi.value))(SF(function(){var o=$F(u.value1+1|0);return function(p){return o(Ur(p))}}())(n)),si(_i(mo(t(u.value0))))])})(n)})))}};var IF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(zf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:CF})}},toElt:function(t){return t}}},Gb=IF();var LF=function(t){return function(r){return function(e){return ln(Gb)(t)(r)(e)}}};var $=function(t){return function(r){return function(e){var n=function(u){return function(o){return pn(function(p,l){var s=o.ids();u.raiseId(s)();var m=p(hF(hl(FF([si(o.makeElement({id:s,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),wF(o)(s)(r)])(tr([])(function(h){return[si(o.attributeParent({id:s,parent:h,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(LF({parent:new v(s),scope:u.scope,ez:!0,raiseId:function(h){return dF(void 0)},pos:L.value,dynFamily:L.value})(o)(e)),l);return function(){return l(o.deleteFromCache({id:s})),m()}})}};return n}}};var jb=function(){return function(t){return function(r){return EF(Gb)({fromEltO1:mo,fromEltO2:mo,toElt:mo,wrapElt:function(e){return new A($("div")(Vb)(TF(e)))},giveNewParent:function(e){return function(n){return function(u){return zf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(zf(e))}})(zb(zf)(t))(xF(zb(function(e){return e(void 0)}))(mo(Mu(r))))}}};var Wr=function(){function t(){}return t.value=new t,t}();var Jr={attr:function(t){return function(r){return a({key:"href",value:c(r)})}}};var PF=J(q),Ar=function(){function t(){}return t.value=new t,t}(),Zu={attr:function(t){return function(r){return a({key:"click",value:K(R(PF(r)(!0)))})}}};var Kr={attr:function(t){return function(r){return a({key:"click",value:K(r)})}}};var ke=function(){function t(){}return t.value=new t,t}();var mi={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Xb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Jb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Kb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Qb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Yb={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var Zb=k(),Do=function(t){return function(r){return new A($("a")(t)(Zb(g(Zb(C(S)(r))))))}};var rD=k(),jf=function(t){return function(r){return new A($("div")(t)(rD(g(rD(C(S)(r))))))}},br=jf(D(_));var eD=k(),ra=function(t){return function(r){return new A($("span")(t)(eD(g(eD(C(S)(r))))))}},ko=ra(D(_));var Fl=function(){function t(){}return t.value=new t,t}();var nD={attr:function(t){return function(r){return a({key:"cx",value:c(r)})}}};var Tl=function(){function t(){}return t.value=new t,t}();var uD={attr:function(t){return function(r){return a({key:"cy",value:c(r)})}}};var xl=function(){function t(){}return t.value=new t,t}();var aD={attr:function(t){return function(r){return a({key:"fill",value:c(r)})}}};var El=function(){function t(){}return t.value=new t,t}();var iD={attr:function(t){return function(r){return a({key:"height",value:c(r)})}}};var Ml=function(){function t(){}return t.value=new t,t}();var oD={attr:function(t){return function(r){return a({key:"r",value:c(r)})}}};var wl=function(){function t(){}return t.value=new t,t}();var fD={attr:function(t){return function(r){return a({key:"stroke",value:c(r)})}}};var Il=function(){function t(){}return t.value=new t,t}();var cD={attr:function(t){return function(r){return a({key:"stroke-width",value:c(r)})}}};var Ao=function(){function t(){}return t.value=new t,t}(),pD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var lD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var vD=k(),he=function(t){return function(r){return new A($("button")(t)(vD(g(vD(C(S)(r))))))}},Ll=he(D(_));var sD=k(),Pl=function(t){return function(r){return new A($("circle")(t)(sD(g(sD(C(S)(r))))))}};var mD=k(),bD=function(t){return function(r){return new A($("code")(t)(mD(g(mD(C(S)(r))))))}},Pr=bD(D(_));var DD=k(),kD=function(t){return function(r){return new A($("i")(t)(DD(g(DD(C(S)(r))))))}},Ol=kD(D(_));var AD=k(),dD=function(t){return function(r){return new A($("li")(t)(AD(g(AD(C(S)(r))))))}},Rl=dD(D(_));var yD=k(),gD=function(t){return function(r){return new A($("pre")(t)(yD(g(yD(C(S)(r))))))}},Or=gD(D(_));var SD=k(),Nl=function(t){return function(r){return new A($("svg")(t)(SD(g(SD(C(S)(r))))))}};var $D=k(),CD=function(t){return function(r){return new A($("ul")(t)($D(g($D(C(S)(r))))))}},Bl=CD(D(_));var Jn=z(On),XF=D(us),Jf=function(){function t(){}return t.value=new t,t}(),bi=function(){function t(){}return t.value=new t,t}(),Di=function(){function t(){}return t.value=new t,t}(),ki=function(){function t(){}return t.value=new t,t}(),Ai=function(){function t(){}return t.value=new t,t}(),di=function(){function t(){}return t.value=new t,t}(),yi=function(){function t(){}return t.value=new t,t}(),gi=function(){function t(){}return t.value=new t,t}(),Si=function(){function t(){}return t.value=new t,t}(),$i=function(){function t(){}return t.value=new t,t}(),hD=function(t){return t==="Intro"?Jn(Jf.value):t==="HelloWorld"?Jn(bi.value):t==="SimpleComponent"?Jn(Di.value):t==="PURSX1"?Jn(ki.value):t==="PURSX2"?Jn(Ai.value):t==="Events"?Jn(di.value):t==="Effects"?Jn(yi.value):t==="Events2"?Jn(gi.value):t==="Portals"?Jn(Si.value):t==="SSR"?Jn($i.value):XF};function Wl(){window.scrollTo(0,0)}var oe=Wl;var TD=D(_),xD=Ht(Sr),KF=O(Tr),QF=Ee(ge),YF=Dn(xt)(_),FD=z(Yt),ZF=z(yr),tT={reflectType:function(){return"~"}},rT=Fr(),eT=St(Xu),nT=k();var qr={pursxToElement:function(t){return function(r){return function(e){return{cache:Ju,element:function(n){return function(u){return TD}}}}}}},Hl=function(t){return t.pursxToElement},fe=function(){return function(t){var r=Hl(t);return function(e){var n=Ma(e);return function(u){var o=Of(u)();return{pursxToElement:function(p){return function(l){return function(s){var m=r(p)(tt.value)(s);return{cache:ci(n(tt.value))(!0)(m.cache),element:function(h){return function(P){return xD(KF(QF(Pf)(function(B){if(B.value instanceof lo)return P.setProp({id:n(tt.value)+("@!%"+p),key:B.key,value:B.value.value0});if(B.value instanceof _o)return P.setCb({id:n(tt.value)+("@!%"+p),key:B.key,value:B.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4578, column 38 - line 4588, column 24): "+[B.value.constructor.name])}))(o(tt.value)(s)))(m.element(h)(P))}}}}}}}}}}};var Ul=function(t){var r=Ma(t);return function(e){var n=Ma(e);return function(){return function(){return function(u){var o=Hl(u);return function(p){return function(l){return function(s){var m=function(h){return function(P){return pn(function(B,N){var f=P.ids(),d=P.ids();h.raiseId(f)();var ot=o(d)(tt.value)(s),X=B(YF([FD(P.makePursx({id:f,parent:h.parent,cache:ot.cache,dynFamily:h.dynFamily,pos:h.pos,pxScope:d,scope:h.scope,html:r(l),verb:n(p)})),ot.element(h)(P),tr(TD)(function(Rt){return FD(P.attributeParent({id:f,parent:Rt,pos:h.pos,dynFamily:h.dynFamily,ez:!1}))})(h.parent)]),N);return function(){return N(P.deleteFromCache({id:f})),X()}})}};return new A(m)}}}}}}}},zr=function(t){var r=Ul(t)(tT)()();return function(){return function(){return function(e){return r(e)(tt.value)}}}},ED=function(t){var r=zr(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},uT=function(t){return function(r){return function(e){return ln({doLogic:function(n){return function(u){return function(o){return u.sendToPos({id:o,pos:n})}}},ids:function(n){return function(u){return u.ids}(rT(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:eT})}},toElt:function(n){return n}})(t)(r)(nT(e))}}},ce=function(){return function(t){var r=Hl(t);return function(e){var n=Ma(e);return function(u){var o=Of(u)();return{pursxToElement:function(p){return function(l){return function(s){var m=o(tt.value)(s),h=r(p)(tt.value)(s);return{cache:ci(n(tt.value))(!1)(h.cache),element:function(P){return function(B){return xD(uT({parent:new v(n(tt.value)+("@!%"+p)),scope:P.scope,raiseId:function(N){return ZF(void 0)},pos:P.pos,ez:!1,dynFamily:L.value})(B)(m))(h.element(P)(B))}}}}}}}}}}};var ql=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState')
import Deku.Do as Deku
import Deku.Pursx ((~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState'
  myDom ~~
    { myli: pure (D.Style := "background-color:rgb(200,240,210);")
    , somethingNew:
        ( D.button (pure (D.OnClick := push (Just unit)))
            [ text
                $ (compact event $> "Thanks for clicking me!") <|>
                    pure "I was dynamically inserted"
            ]
        )
    }`,zl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Vl=`module Main where

import Prelude

import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState unit
  portal
    ( map
        ( \\i -> D.video
            (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
            [ D.source
                (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                []
            ]
        )
        ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
            : "https://www.w3schools.com/jsref/movie.mp4"
            : V.empty
        )
    )
    \\(v /\\ _) -> do
      let
        p0 :: Domable _ _
        p0 = index (Proxy :: _ 0) v

        p1 :: Domable _ _
        p1 = index (Proxy :: _ 1) v

        ev :: Boolean -> Event Boolean
        ev b = fold (\\a _ -> not a) b event

        flips :: Boolean -> Domable _ _
        flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
      D.div_
        [ D.button (pure $ D.OnClick := push unit)
            [ text_ "Switch videos" ]
        , D.div_ [ D.span_ [ flips true ], flips false ]
        ]
`,Gl=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,jl=`module Main where

import Prelude

import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn)
import Deku.DOM as D
import Deku.Hooks (useDyn_, useState')
import Deku.Do as Deku
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

main :: Effect Unit
main = runInBody Deku.do
  pushAction /\\ actionEvent <- useState'
  let
    accumulateTextAndEmitOnSubmit :: Event String
    accumulateTextAndEmitOnSubmit = compact
      ( mapAccum
          ( \\a b -> case b of
              AddTodo -> a /\\ Just a
              ChangeText s -> s /\\ Nothing
          )
          ""
          actionEvent
      )

    top :: Nut
    top =
      D.div_
        [ D.input
            ( oneOf
                [ textInput $ pure (pushAction <<< ChangeText)
                , keyUp $ pure \\evt -> do
                    when (code evt == "Enter") $ do
                      pushAction AddTodo
                ]
            )
            []
        , D.button
            (click $ pure $ pushAction AddTodo)
            [ text_ "Add" ]
        ]
  D.div_
    [ top
    , dyn
        $ map
            ( \\txt -> Deku.do
                { remove, sendTo } <- useDyn_
                D.div_
                  [ text_ txt
                  , D.button
                      (click $ pure (sendTo 0))
                      [ text_ "Prioritize" ]
                  , D.button
                      (click $ pure remove)
                      [ text_ "Delete" ]
                  ]
            )
            accumulateTextAndEmitOnSubmit
    ]

`,Xl=`module Main where

import Prelude

import Data.Tuple.Nested ((/\\))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)

main :: Effect Unit
main = runInBody Deku.do
  setButtonClicked /\\ buttonClicked <- useState unit
  setSliderMoved /\\ sliderMoved <- useState 50.0
  let
    countUp :: Event Int
    countUp = fold (\\a _ -> 1 + a) (-1) buttonClicked
  D.div_
    [ D.button
        (click_ (setButtonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            (("Val: " <> _) <<< show <$> countUp)
        ]
    , D.div_
        [ D.input
            (slider (pure setSliderMoved))
            []
        , D.div_
            [ text
                (("Val: " <> _) <<< show <$> sliderMoved)
            ]
        ]
    ]
`,Jl=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody Deku.do
  setUIAction /\\ uiAction <- useState Initial
  let
    split :: { left :: Event Unit, right :: Event String }
    split = separate $ compact $
      map
        ( case _ of
            Loading -> Just $ Left unit
            Result s -> Just $ Right s
            _ -> Nothing
        )
        uiAction
    { left: loading, right: result } = split
  D.div_
    [ D.div_
        [ D.button (click_ (clickCb setUIAction))
            [ text
                ( pure clickText
                    <|> (loading $> "Loading...")
                    <|> (result $> clickText)
                )
            ]
        ]
    , D.div
        ( (pure (D.Style := "display: none;")) <|>
            ( compact
                ( mapAccum
                    ( \\b _ -> (b && false) /\\
                        if b then Just unit else Nothing
                    )
                    true
                    result
                ) $> (D.Style := "display: block;")
            )
        )
        [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
    ]
`,Kl=`module Main where

import Prelude

import Data.Foldable (oneOf)
import Deku.Attribute ((!:=), (:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  ( D.div_
      [ D.button_ [ text_ "I do nothing" ]
      , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
      , D.div_
          [ D.a (pure $ D.Href := "https://example.com")
              [ text_ "foo " ]
          , D.i_ [ text_ " bar " ]
          , D.span (pure $ D.Style := "font-weight: 800;")
              [ text_ " baz" ]
          ]
      , D.svg (oneOf [ D.Height !:= "100", D.Width !:= "100" ])
          [ D.circle
              ( oneOf
                  [ D.Cx !:= "50"
                  , D.Cy !:= "50"
                  , D.R !:= "40"
                  , D.Stroke !:= "black"
                  , D.StrokeWidth !:= "3"
                  , D.Fill !:= "red"
                  ]
              )
              []
          ]

      ]
  )`,Ql=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,Yl=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( runSSR
        ( Template
            { head:
                """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>"""
            , tail: "</html>"
            }
        )
        app
    ) >>= log`,Zl=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function MD(t){return t.target}function Vr(t){return function(){return t.preventDefault()}}function wD(t,r,e){return t==null?r:e(t)}function t_(t){return t}var Ci=tr(null)(t_),Yr=function(t){return wD(t,L.value,v.create)};var Zf=function(t){return Yr(MD(t))};var LD=ce(),lT=zr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(LD(fe()(LD(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),_T=O(Dr),vT=z(ca),r_=z(Yt),PD=Pt(Jr),sT=Pt(mi),OD=Dn(xt)(_),mT=su(iD),bT=su(lD),DT=su(nD),kT=su(uD),AT=su(oD),dT=su(fD),yT=su(cD),gT=su(aD),ST=wr(xt)(_),$T=Pt(Kr),RD=mr(Ir),CT=function(){return tt.value}(),ND=function(t){return lT(CT)({code:Or([Pr([b(Kl)])]),result:br([Ll([b("I do nothing")]),Bl(_T(function(r){return Rl(vT(b(r)))})(["A","B","C"])),br([Do(r_(PD(Wr.value)("https://example.com")))([b("foo ")]),Ol([b(" bar ")]),ra(r_(sT(ke.value)("font-weight: 800;")))([b(" baz")])]),Nl(OD([mT(El.value)("100"),bT(Ao.value)("100")]))([Pl(OD([DT(Fl.value)("50"),kT(Tl.value)("50"),AT(Ml.value)("40"),dT(wl.value)("black"),yT(Il.value)("3"),gT(xl.value)("red")]))([])])]),next:ST(r_)([$T(Ar.value)(kr(function(r){return RD(RD(Vr(r))(t.dpage(ki.value)))(oe)})),PD(Wr.value)(t.slug+"pursx1/")])})};function BD(t,r,e,n,u){return function(o,p){var l=t.newXHR(),s=t.fixupUrl(u.url,l);if(l.open(u.method||"GET",s,!0,u.username,u.password),u.headers)try{for(var m=0,h;(h=u.headers[m])!=null;m++)l.setRequestHeader(h.field,h.value)}catch(B){o(B)}var P=function(B){return function(){o(new Error(B))}};return l.onerror=P(e),l.ontimeout=P(r),l.onload=function(){p({status:l.status,statusText:l.statusText,headers:l.getAllResponseHeaders().split(`\r
`).filter(function(B){return B.length>0}).map(function(B){var N=B.indexOf(":");return n(B.substring(0,N))(B.substring(N+2))}),body:l.response})},l.responseType=u.responseType,l.withCredentials=u.withCredentials,l.timeout=u.timeout,l.send(u.content),function(B,N,f){try{l.abort()}catch(d){return N(d)}return f()}}}var tc="application/json",WD="application/x-www-form-urlencoded";var UD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),zD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),VD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),GD=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),e_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),n_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),jD=function(t){return t instanceof e_?new v(WD):t instanceof n_?new v(tc):L.value};var XD=Fr();var rc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ec=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),JD=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),KD=function(t){if(t instanceof rc||t instanceof ec)return XD(t.value0);if(t instanceof JD)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var u_=function(t){if(t instanceof rc)return"Accept";if(t instanceof ec)return"Content-Type";if(t instanceof JD)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var QD=Nt(Bt),a_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),i_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),o_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),f_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),nc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),YD=function(t){if(t instanceof a_)return"arraybuffer";if(t instanceof i_)return"blob";if(t instanceof o_)return"document";if(t instanceof yo||t instanceof f_)return"text";if(t instanceof nc)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},ZD=function(t){return t instanceof yo?new v(tc):L.value};var tk=function(){return new yo(QD)}(),rk=function(){return new nc(QD)}();var nk=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function hi(t){return new Error(t)}function go(t){return t.message}function So(t){return function(){throw t}}var Tn=function(t){return t.throwError};var Au=function(t){return t.catchError};var ac=function(t){var r=Au(t),e=t.MonadThrow0().Monad0(),n=O(e.Bind1().Apply0().Functor0()),u=z(e.Applicative0());return function(o){return r(n(at.create)(o))(function(p){return u(it.create(p))})}};var xn=function(t){return t.liftEffect};var IT=O(sa);var c_=function(t){return t};var p_=function(t){return t};var pc=function(t){return function(r){return t(r)}},ak=function(t){var r=O(t);return{map:function(e){return pc(r(IT(e)))}}};var l_=function(t){return{Applicative0:function(){return xo(t)},Bind1:function(){return __(t)}}},__=function(t){var r=dt(t.Bind1()),e=z(t.Applicative0());return{bind:function(n){return function(u){return r(n)(ye(function(o){return e(it.create(o))})(function(o){var p=u(o);return p}))}},Apply0:function(){return ik(t)}}},ik=function(t){var r=ak(t.Bind1().Apply0().Functor0());return{apply:Re(l_(t)),Functor0:function(){return r}}},xo=function(t){return{pure:function(){var r=z(t.Applicative0());return function(e){return c_(r(at.create(e)))}}(),Apply0:function(){return ik(t)}}};var ok=function(t){var r=l_(t);return{throwError:function(){var e=z(t.Applicative0());return function(n){return c_(e(it.create(n)))}}(),Monad0:function(){return r}}};var fk=function(t){var r=nt(t);return function(e){var n=e.Bind1(),u=dt(n),o=z(e.Applicative0()),p=ak(n.Apply0().Functor0());return{alt:function(l){return function(s){return u(l)(function(m){if(m instanceof at)return o(new at(m.value0));if(m instanceof it)return u(s)(function(h){if(h instanceof at)return o(new at(h.value0));if(h instanceof it)return o(new it(r(m.value0)(h.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[h.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[m.constructor.name])})}},Functor0:function(){return p}}}};var PT=Fr();var ck=function(t){return PT(p_(t))};function v_(t){return JSON.stringify(t)}function s_(t){return function(r){return JSON.stringify(r,null,t)}}var pk=Ju;function _k(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var vk=function(t){return _k(it.create,at.create,t)};var _c=function(t){return function(r){return function(e){return e.replace(t,r)}}};var m_=function(t){return function(r){return r.join(t)}};function zT(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function bk(t,r,e){try{return r(zT(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var vc=function(){return tl(bk)(R(L.value))(v.create)}();var jT=jt(va),Dk=O(hr),XT=We(da)(On);var JT=function(t){return t};var kk=function(){var t=function(n){if(n.value1 instanceof L)return vc(n.value0);if(n.value1 instanceof v)return jT(Dk(function(u){return function(o){return u+("="+o)}})(vc(n.value0)))(vc(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=Dk(m_("&")),e=XT(t);return function(n){return r(e(JT(n)))}}();var QT=function(){function t(){}return t.value=new t,t}(),Mo=function(){function t(){}return t.value=new t,t}(),YT=function(){function t(){}return t.value=new t,t}(),Ak=function(){function t(){}return t.value=new t,t}(),dk=function(){function t(){}return t.value=new t,t}(),yk=function(){function t(){}return t.value=new t,t}(),ZT=function(){function t(){}return t.value=new t,t}(),tx=function(){function t(){}return t.value=new t,t}(),rx=function(){function t(){}return t.value=new t,t}(),ex=function(){function t(){}return t.value=new t,t}(),nx=function(){function t(){}return t.value=new t,t}(),ux=function(){function t(){}return t.value=new t,t}(),ax=function(){function t(){}return t.value=new t,t}(),ix=function(){function t(){}return t.value=new t,t}(),ox=function(){function t(){}return t.value=new t,t}(),gk=function(){function t(){}return t.value=new t,t}();var fx=function(t){return t},cx={show:function(t){if(t instanceof QT)return"OPTIONS";if(t instanceof Mo)return"GET";if(t instanceof YT)return"HEAD";if(t instanceof Ak)return"POST";if(t instanceof dk)return"PUT";if(t instanceof yk)return"DELETE";if(t instanceof ZT)return"TRACE";if(t instanceof tx)return"CONNECT";if(t instanceof rx)return"PROPFIND";if(t instanceof ex)return"PROPPATCH";if(t instanceof nx)return"MKCOL";if(t instanceof ux)return"COPY";if(t instanceof ax)return"MOVE";if(t instanceof ix)return"LOCK";if(t instanceof ox)return"UNLOCK";if(t instanceof gk)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Sk=ye(vt(cx))(fx);var hk=function(){var t=Sf(Rp);return function(r){return $f(t(r))}}();var Fk=function(t){return t.value0};var He=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",o="Async",p="Bind",l="Bracket",s="Fork",m="Sequential",h="Map",P="Apply",B="Alt",N="Cons",f="Resume",d="Release",ot="Finalizer",X="Finalized",Rt="Forked",Wt="Fiber",Qt="Thunk";function et(lt,or,xr,pr){this.tag=lt,this._1=or,this._2=xr,this._3=pr}function dr(lt){var or=function(xr,pr,yt){return new et(lt,xr,pr,yt)};return or.tag=lt,or}function pe(lt){return new et(r,void 0)}function ct(lt){try{lt()}catch(or){setTimeout(function(){throw or},0)}}function V(lt,or,xr){try{return or(xr())}catch(pr){return lt(pr)}}function H(lt,or,xr){try{return or(xr)()}catch(pr){return xr(lt(pr))(),pe}}var st=function(){var lt=1024,or=0,xr=0,pr=new Array(lt),yt=!1;function rt(){var cr;for(yt=!0;or!==0;)or--,cr=pr[xr],pr[xr]=void 0,xr=(xr+1)%lt,cr();yt=!1}return{isDraining:function(){return yt},enqueue:function(cr){var Gt,Cr;or===lt&&(Cr=yt,rt(),yt=Cr),pr[(xr+or)%lt]=cr,or++,yt||rt()}}}();function kt(lt){var or={},xr=0,pr=0;return{register:function(yt){var rt=xr++;yt.onComplete({rethrow:!0,handler:function(cr){return function(){pr--,delete or[rt]}}})(),or[rt]=yt,pr++},isEmpty:function(){return pr===0},killAll:function(yt,rt){return function(){if(pr===0)return rt();var cr=0,Gt={};function Cr(sr){Gt[sr]=or[sr].kill(yt,function(Nr){return function(){delete Gt[sr],cr--,lt.isLeft(Nr)&&lt.fromLeft(Nr)&&setTimeout(function(){throw lt.fromLeft(Nr)},0),cr===0&&rt()}})()}for(var te in or)or.hasOwnProperty(te)&&(cr++,Cr(te));return or={},xr=0,pr=0,function(sr){return new et(u,function(){for(var Nr in Gt)Gt.hasOwnProperty(Nr)&&Gt[Nr]()})}}}}}var Le=0,Rr=1,gu=2,Ra=3,Na=4,Te=5,Ei=6;function Bc(lt,or,xr){var pr=0,yt=Le,rt=xr,cr=null,Gt=null,Cr=null,te=null,sr=null,Nr=0,ia=0,nn=null,Su=!0;function $u(gt){for(var ht,Zt,er;;)switch(ht=null,Zt=null,er=null,yt){case gu:yt=Rr;try{rt=Cr(rt),te===null?Cr=null:(Cr=te._1,te=te._2)}catch(le){yt=Te,cr=lt.left(le),rt=null}break;case Ra:lt.isLeft(rt)?(yt=Te,cr=rt,rt=null):Cr===null?yt=Te:(yt=gu,rt=lt.fromRight(rt));break;case Rr:switch(rt.tag){case p:Cr&&(te=new et(N,Cr,te)),Cr=rt._2,yt=Rr,rt=rt._1;break;case r:Cr===null?(yt=Te,rt=lt.right(rt._1)):(yt=gu,rt=rt._1);break;case u:yt=Ra,rt=V(lt.left,lt.right,rt._1);break;case o:yt=Na,rt=H(lt.left,rt._1,function(le){return function(){pr===gt&&(pr++,st.enqueue(function(){pr===gt+1&&(yt=Ra,rt=le,$u(pr))}))}});return;case e:yt=Te,cr=lt.left(rt._1),rt=null;break;case n:Cr===null?sr=new et(N,rt,sr,Gt):sr=new et(N,rt,new et(N,new et(f,Cr,te),sr,Gt),Gt),Cr=null,te=null,yt=Rr,rt=rt._1;break;case l:Nr++,Cr===null?sr=new et(N,rt,sr,Gt):sr=new et(N,rt,new et(N,new et(f,Cr,te),sr,Gt),Gt),Cr=null,te=null,yt=Rr,rt=rt._1;break;case s:yt=Ra,ht=Bc(lt,or,rt._2),or&&or.register(ht),rt._1&&ht.run(),rt=lt.right(ht);break;case m:yt=Rr,rt=xy(lt,or,rt._1);break}break;case Te:if(Cr=null,te=null,sr===null)yt=Ei,rt=Gt||cr||rt;else switch(ht=sr._3,er=sr._1,sr=sr._2,er.tag){case n:Gt&&Gt!==ht&&Nr===0?yt=Te:cr&&(yt=Rr,rt=er._2(lt.fromLeft(cr)),cr=null);break;case f:Gt&&Gt!==ht&&Nr===0||cr?yt=Te:(Cr=er._1,te=er._2,yt=gu,rt=lt.fromRight(rt));break;case l:Nr--,cr===null&&(Zt=lt.fromRight(rt),sr=new et(N,new et(d,er._2,Zt),sr,ht),(Gt===ht||Nr>0)&&(yt=Rr,rt=er._3(Zt)));break;case d:sr=new et(N,new et(X,rt,cr),sr,Gt),yt=Rr,Gt&&Gt!==ht&&Nr===0?rt=er._1.killed(lt.fromLeft(Gt))(er._2):cr?rt=er._1.failed(lt.fromLeft(cr))(er._2):rt=er._1.completed(lt.fromRight(rt))(er._2),cr=null,Nr++;break;case ot:Nr++,sr=new et(N,new et(X,rt,cr),sr,Gt),yt=Rr,rt=er._1;break;case X:Nr--,yt=Te,rt=er._1,cr=er._2;break}break;case Ei:for(var Mr in nn)nn.hasOwnProperty(Mr)&&(Su=Su&&nn[Mr].rethrow,ct(nn[Mr].handler(rt)));nn=null,Gt&&cr?setTimeout(function(){throw lt.fromLeft(cr)},0):lt.isLeft(rt)&&Su&&setTimeout(function(){if(Su)throw lt.fromLeft(rt)},0);return;case Le:yt=Rr;break;case Na:return}}function Er(gt){return function(){if(yt===Ei)return Su=Su&&gt.rethrow,gt.handler(rt)(),function(){};var ht=ia++;return nn=nn||{},nn[ht]=gt,function(){nn!==null&&delete nn[ht]}}}function Et(gt,ht){return function(){if(yt===Ei)return ht(lt.right(void 0))(),function(){};var Zt=Er({rethrow:!1,handler:function(){return ht(lt.right(void 0))}})();switch(yt){case Le:Gt=lt.left(gt),yt=Ei,rt=Gt,$u(pr);break;case Na:Gt===null&&(Gt=lt.left(gt)),Nr===0&&(yt===Na&&(sr=new et(N,new et(ot,rt(gt)),sr,Gt)),yt=Te,rt=null,cr=null,$u(++pr));break;default:Gt===null&&(Gt=lt.left(gt)),Nr===0&&(yt=Te,rt=null,cr=null)}return Zt}}function Jt(gt){return function(){var ht=Er({rethrow:!1,handler:gt})();return yt===Le&&$u(pr),ht}}return{kill:Et,join:Jt,onComplete:Er,isSuspended:function(){return yt===Le},run:function(){yt===Le&&(st.isDraining()?$u(pr):st.enqueue(function(){$u(pr)}))}}}function Ty(lt,or,xr,pr){var yt=0,rt={},cr=0,Gt={},Cr=new Error("[ParAff] Early exit"),te=null,sr=t;function Nr(Er,Et,Jt){var gt=Et,ht=null,Zt=null,er=0,Mr={},le,Mi;t:for(;;)switch(le=null,gt.tag){case Rt:if(gt._3===t&&(le=rt[gt._1],Mr[er++]=le.kill(Er,function(Ey){return function(){er--,er===0&&Jt(Ey)()}})),ht===null)break t;gt=ht._2,Zt===null?ht=null:(ht=Zt._1,Zt=Zt._2);break;case h:gt=gt._2;break;case P:case B:ht&&(Zt=new et(N,ht,Zt)),ht=gt,gt=gt._1;break}if(er===0)Jt(lt.right(void 0))();else for(Mi=0,le=er;Mi<le;Mi++)Mr[Mi]=Mr[Mi]();return Mr}function ia(Er,Et,Jt){var gt,ht,Zt,er,Mr,le;lt.isLeft(Er)?(gt=Er,ht=null):(ht=Er,gt=null);t:for(;;){if(Zt=null,er=null,Mr=null,le=null,te!==null)return;if(Et===null){pr(gt||ht)();return}if(Et._3!==t)return;switch(Et.tag){case h:gt===null?(Et._3=lt.right(Et._1(lt.fromRight(ht))),ht=Et._3):Et._3=gt;break;case P:if(Zt=Et._1._3,er=Et._2._3,gt){if(Et._3=gt,Mr=!0,le=cr++,Gt[le]=Nr(Cr,gt===Zt?Et._2:Et._1,function(){return function(){delete Gt[le],Mr?Mr=!1:Jt===null?ia(gt,null,null):ia(gt,Jt._1,Jt._2)}}),Mr){Mr=!1;return}}else{if(Zt===t||er===t)return;ht=lt.right(lt.fromRight(Zt)(lt.fromRight(er))),Et._3=ht}break;case B:if(Zt=Et._1._3,er=Et._2._3,Zt===t&&lt.isLeft(er)||er===t&&lt.isLeft(Zt))return;if(Zt!==t&&lt.isLeft(Zt)&&er!==t&&lt.isLeft(er))gt=ht===Zt?er:Zt,ht=null,Et._3=gt;else if(Et._3=ht,Mr=!0,le=cr++,Gt[le]=Nr(Cr,ht===Zt?Et._2:Et._1,function(){return function(){delete Gt[le],Mr?Mr=!1:Jt===null?ia(ht,null,null):ia(ht,Jt._1,Jt._2)}}),Mr){Mr=!1;return}break}Jt===null?Et=null:(Et=Jt._1,Jt=Jt._2)}}function nn(Er){return function(Et){return function(){delete rt[Er._1],Er._3=Et,ia(Et,Er._2._1,Er._2._2)}}}function Su(){var Er=Rr,Et=xr,Jt=null,gt=null,ht,Zt;t:for(;;)switch(ht=null,Zt=null,Er){case Rr:switch(Et.tag){case h:Jt&&(gt=new et(N,Jt,gt)),Jt=new et(h,Et._1,t,t),Et=Et._2;break;case P:Jt&&(gt=new et(N,Jt,gt)),Jt=new et(P,t,Et._2,t),Et=Et._1;break;case B:Jt&&(gt=new et(N,Jt,gt)),Jt=new et(B,t,Et._2,t),Et=Et._1;break;default:Zt=yt++,Er=Te,ht=Et,Et=new et(Rt,Zt,new et(N,Jt,gt),t),ht=Bc(lt,or,ht),ht.onComplete({rethrow:!1,handler:nn(Et)})(),rt[Zt]=ht,or&&or.register(ht)}break;case Te:if(Jt===null)break t;Jt._1===t?(Jt._1=Et,Er=Rr,Et=Jt._2,Jt._2=t):(Jt._2=Et,Et=Jt,gt===null?Jt=null:(Jt=gt._1,gt=gt._2))}for(sr=Et,Zt=0;Zt<yt;Zt++)rt[Zt].run()}function $u(Er,Et){te=lt.left(Er);var Jt;for(var gt in Gt)if(Gt.hasOwnProperty(gt)){Jt=Gt[gt];for(gt in Jt)Jt.hasOwnProperty(gt)&&Jt[gt]()}Gt=null;var ht=Nr(Er,sr,Et);return function(Zt){return new et(o,function(er){return function(){for(var Mr in ht)ht.hasOwnProperty(Mr)&&ht[Mr]();return pe}})}}return Su(),function(Er){return new et(o,function(Et){return function(){return $u(Er,Et)}})}}function xy(lt,or,xr){return new et(o,function(pr){return function(){return Ty(lt,or,xr,pr)}})}return et.EMPTY=t,et.Pure=dr(r),et.Throw=dr(e),et.Catch=dr(n),et.Sync=dr(u),et.Async=dr(o),et.Bind=dr(p),et.Bracket=dr(l),et.Fork=dr(s),et.Seq=dr(m),et.ParMap=dr(h),et.ParApply=dr(P),et.ParAlt=dr(B),et.Fiber=Bc,et.Supervisor=kt,et.Scheduler=st,et.nonCanceler=pe,et}(),xk=He.Pure,Ek=He.Throw;function Mk(t){return function(r){return He.Catch(t,r)}}function wk(t){return function(r){return r.tag===He.Pure.tag?He.Pure(t(r._1)):He.Bind(r,function(e){return He.Pure(t(e))})}}function Ik(t){return function(r){return He.Bind(t,r)}}var Lk=He.Sync;var wo=He.Async;function Pk(t,r){return function(){return He.Fiber(t,null,r)}}var px=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return He.Async(function(u){return function(){var o=t(n,u(e()));return function(){return He.Sync(function(){return e(r(n,o))})}}})}}(),lx=He.Seq;var Sx=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}};var $x=ur(q);var k_={map:wk};var Cx=function(){var t=function(n){if(n instanceof at)return n.value0;if(n instanceof it)return Ru("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof it)return n.value0;if(n instanceof at)return Ru("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof it)return!0;if(n instanceof at)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:it.create,right:at.create}}(),hx=function(t){return Pk(Cx,t)},Fx=function(t){return function(){var e=hx(t)();return e.run(),e}},A_=function(t){return $x(Fx(t))};var d_={Applicative0:function(){return sc},Bind1:function(){return y_}},y_={bind:Ik,Apply0:function(){return Bk(0)}},sc={pure:xk,Apply0:function(){return Bk(0)}},Bk=Sx("applyAff","Effect.Aff",function(){return{apply:Re(d_),Functor0:function(){return k_}}});var Tx=z(sc);var g_={liftEffect:Lk,Monad0:function(){return d_}};var xx={throwError:Ek,Monad0:function(){return d_}},Wk={catchError:Mk,MonadThrow0:function(){return xx}};var Hk=R(Tx(void 0));var Uk=function(t){return wo(function(r){return function(){var n=t(function(u){return r(it.create(u))()},function(u){return r(at.create(u))()});return function(u){return wo(function(o){return function(){return n(u,function(l){return o(it.create(l))()},function(l){return o(at.create(l))()}),Hk}})}}})};function bc(t){return Object.prototype.toString.call(t).slice(8,-1)}var qk=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var zk=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Me=function(t){return t};var Dc=isFinite;var S_=Math.floor;var Io=function(t){return function(r){return t%r}};var Vk=Ln(Bi),Gk=uu(Bi);var kc=function(){return zk(v.create)(L.value)}(),Rx=function(t){if(!Dc(t))return 0;if(t>=Me(Vk))return Vk;if(t<=Me(Gk))return Gk;if(Hr)return ee(0)(kc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var C_=function(t){return Rx(S_(t))};var zx=vt(je),Vx=vt(mn);var h_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),rA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Gx=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),jx=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),na=Y,Xx=Y;var dc=function(t){if(t instanceof h_)return t.value0;if(t instanceof Gx)return"Error at array index "+(Vx(t.value0)+(": "+dc(t.value1)));if(t instanceof jx)return"Error at property "+(zx(t.value0)+(": "+dc(t.value1)));if(t instanceof rA)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var F_=function(t){var r=Tn(ok(t));return function(e){return r(hk(e))}};var eA=function(t){var r=z(xo(t)),e=F_(t);return function(n){return function(u){if(bc(u)===n)return r(Xx(u));if(Hr)return e(new rA(n,bc(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var T_=z(xo(Ne)),Kx=F_(Ne),Ia=eA(Ne),nA=Ht(fk(vm)(Ne)),Qx=jo(__(Ne)),yc=O(hr),Yx=wu(xt)(bn),Zx=St(wn),tE=au(de),rE=O(Dr),eE=ze(k_),nE=ac(Wk),uE=z(sc);var x_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),E_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),M_=function(){function t(){}return t.value=new t,t}(),w_=function(){function t(){}return t.value=new t,t}(),I_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),uA=function(t){return function(r){var e=function(h){return h===""?T_(pk):ye(function(P){return Kx(h_.create(P))})(T_)(vk(h))},n=function(){if(r.responseFormat instanceof a_)return Ia("ArrayBuffer");if(r.responseFormat instanceof i_)return Ia("Blob");if(r.responseFormat instanceof o_)return function(h){return nA(Ia("Document")(h))(nA(Ia("XMLDocument")(h))(Ia("HTMLDocument")(h)))};if(r.responseFormat instanceof yo)return Qx(function(h){return r.responseFormat.value0(e(h))})(Ia("String"));if(r.responseFormat instanceof f_)return Ia("String");if(r.responseFormat instanceof nc)return R(r.responseFormat.value0(T_(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(h){if(h instanceof UD)return new at(h.value0(na));if(h instanceof qD)return new at(na(h.value0));if(h instanceof zD)return new at(na(h.value0));if(h instanceof VD)return new at(na(h.value0));if(h instanceof GD)return new at(na(h.value0));if(h instanceof e_)return zc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(yc(na)(kk(h.value0)));if(h instanceof n_)return new at(na(v_(h.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[h.constructor.name])},o=function(h){return function(P){return h instanceof v&&!Yx(Ii(Zx)(u_)(h.value0))(P)?yf(P)(h.value0):P}},p=function(h){return o(yc(ec.create)(tE(jD)(h)))(o(yc(rc.create)(ZD(r.responseFormat)))(r.headers))},l=function(h){return{method:Sk(r.method),url:r.url,headers:rE(function(P){return{field:u_(P),value:KD(P)}})(p(r.content)),content:h,responseType:YD(r.responseFormat),username:Ci(r.username),password:Ci(r.password),withCredentials:r.withCredentials,timeout:ee(0)(yc(function(P){return P})(r.timeout))}},s=function(h){return eE(nE(Uk(BD(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",nk.create,l(h)))))(function(P){if(P instanceof at){var B=ck(n(P.value0.body));if(B instanceof it)return new it(new E_(Fk(B.value0),P.value0));if(B instanceof at)return new at({body:B.value0,headers:P.value0.headers,status:P.value0.status,statusText:P.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[B.constructor.name])}if(P instanceof it)return new it(function(){var N=go(P.value0),f=N==="AffjaxTimeoutErrorMessageIdent";if(f)return M_.value;var d=N==="AffjaxRequestFailedMessageIdent";return d?w_.value:new I_(P.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[P.constructor.name])})};if(r.content instanceof L)return s(Ci(L.value));if(r.content instanceof v){var m=u(r.content.value0);if(m instanceof at)return s(Ci(new v(m.value0)));if(m instanceof it)return uE(new it(new x_(m.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[m.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},L_=function(t){if(t instanceof x_)return"There was a problem with the request content: "+t.value0;if(t instanceof E_)return"There was a problem with the response body: "+dc(t.value0);if(t instanceof M_)return"There was a problem making the request: timeout";if(t instanceof w_)return"There was a problem making the request: request failed";if(t instanceof I_)return"There was a problem making the request: "+go(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},ua=function(){return{method:new it(Mo.value),url:"/",headers:[],content:L.value,username:L.value,password:L.value,withCredentials:!1,responseFormat:rk,timeout:L.value}}();var P_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var iA=uA(P_);var oE=dt(y_),oA=xn(g_),fA=ce(),fE=zr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(fA(fe()(fA(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),O_=Ye(Gn),Po=z(Yt),cA=Pt(Kr),gc=Ht(Sr),R_=J(Tr),pA=Pt(Kb),cE=_u(po),pE=zu(De),lE=wr(xt)(_),lA=mr(Ir),_E=Pt(Jr);var vA=function(){function t(){}return t.value=new t,t}(),N_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vE=function(){return tt.value}(),_A="Click to get some random user data.",sE=function(t){return kr(R(function(){return t(vA.value)(),A_(oE(iA({method:new it(Mo.value),url:"https://randomuser.me/api/",headers:ua.headers,content:ua.content,username:ua.username,password:ua.password,withCredentials:ua.withCredentials,responseFormat:tk,timeout:ua.timeout}))(function(e){if(e instanceof it)return oA(t(new N_("GET /api response failed to decode: "+L_(e.value0))));if(e instanceof at)return oA(t(new N_(s_(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},sA=function(t){return fE(vE)({code:Or([Pr([b(Jl)])]),result:vi(function(r){return function(e){var n=O_(function(p){return p instanceof vA?new v(new it(void 0)):p instanceof N_?new v(new at(p.value0)):L.value})(e),u=O_(function(p){return p instanceof at?new v(p.value0):L.value})(n),o=O_(function(p){return p instanceof it?new v(void 0):L.value})(n);return br([br([he(Po(cA(Ar.value)(sE(r))))([Ze(gc(Po(_A))(gc(R_(o)("Loading..."))(R_(u)(_A))))])]),jf(gc(Po(pA(ke.value)("display: none;")))(R_(cE(pE(function(p){return function(l){return new j(p&&!1,function(){return p?new v(void 0):L.value}())}})(!0)(u)))(pA(ke.value)("display: block;"))))([Or([Pr([Ze(gc(Po(""))(u))])])])])}}),next:lE(Po)([cA(Ar.value)(kr(function(r){return lA(lA(Vr(r))(t.dpage(Ai.value)))(oe)})),_E(Wr.value)(t.slug+"pursx2/")])})};var mA=k(),La=function(t){return function(r){return new A($("input")(t)(mA(g(mA(C(S)(r))))))}};var W_=function(){function t(){}return t.value=new t,t}(),bA={attr:function(t){return function(r){return a({key:"controls",value:c(r)})}}};var Oo=function(){function t(){}return t.value=new t,t}();var Sc={attr:function(t){return function(r){return a({key:"input",value:K(r)})}}};var $c=function(){function t(){}return t.value=new t,t}();var H_={attr:function(t){return function(r){return a({key:"keyup",value:K(r)})}}};var U_=function(){function t(){}return t.value=new t,t}();var AA={attr:function(t){return function(r){return a({key:"src",value:c(r)})}}};var Ro=function(){function t(){}return t.value=new t,t}();var dA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var yA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var SA=k(),$A=function(t){return function(r){return new A($("p")(t)(SA(g(SA(C(S)(r))))))}},q_=$A(D(_));var CA=k(),z_=function(t){return function(r){return new A($("source")(t)(CA(g(CA(C(S)(r))))))}};var hA=k(),V_=function(t){return function(r){return new A($("video")(t)(hA(g(hA(C(S)(r))))))}};function Cc(t){return function(){return t.value}}function G_(t){return function(){return t.valueAsNumber}}function TA(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var o=n;o!=null;){var p=Object.getPrototypeOf(o),l=p.constructor.name;if(l===e)return r(n);if(l==="Object")return t;o=p}return t}var ft=function(t){return function(r){return TA(L.value,v.create,t,r)}};var hc=ft("HTMLInputElement");function j_(t){return t.code}var X_=ft("KeyboardEvent");var MA=O(Tr),wE=Pt(Sc),IE=Je(Se)(Ke),LE=dt(de),PE=Xo(ka),wA=z(Yt),OE=Ht(Sr),RE=Pt(yA);var Fc=function(){var t=OE(wA(RE(Ro.value)("range"))),r=MA(function(e){return wE(Oo.value)(kr(function(n){return IE(LE(Zf(n))(hc))(PE(G_)(e))}))});return function(e){return t(r(e))}}();var J_=function(t){return MA(Pt(t)(Ar.value))},Tc=function(t){var r=J_(t);return function(e){return r(wA(e))}};var IA=ce(),NE=zr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(IA(fe()(IA(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),BE=qf()(ii({reflectSymbol:function(){return"buttonClicked"}})()()(ii({reflectSymbol:function(){return"sliderMoved"}})()()(Nf)()())()()),WE=Tc(Zu),Q_=Ht(Sr),No=z(Yt),LA=O(Tr),PA=nt(pa),HE=vt(mn),UE=qu(De),qE=vt(Wi),zE=wr(xt)(_),VE=Pt(Kr),OA=mr(Ir),GE=Pt(Jr),jE=function(){return tt.value}(),RA=function(t){return NE(jE)({code:Or([Pr([b(Xl)])]),result:BE(tt.value)(function(r){return function(e){return br([he(WE(r.buttonClicked(void 0)))([b("Click")]),br([Ze(Q_(No("Val: 0"))(LA(function(){var n=PA("Val: ");return function(u){return n(HE(u))}}())(UE(function(n){return function(u){return 1+n|0}})(-1)(Q_(No(void 0))(e.buttonClicked)))))]),br([La(Fc(No(r.sliderMoved)))([]),br([Ze(Q_(No("Val: 50.0"))(LA(function(){var n=PA("Val: ");return function(u){return n(qE(u))}}())(e.sliderMoved)))])])])}}),next:zE(No)([VE(Ar.value)(kr(function(r){return OA(OA(Vr(r))(t.dpage(yi.value)))(oe)})),GE(Wr.value)(t.slug+"effects/")])})};var xc=function(t){return function(r){return t(r)}};var JE=Ht(Sr),KE=z(Yt);var QE=Ta(De);var YE=function(t){return function(r){return QE(xc(function(e){return Qu(Mu(e))})(function(e){return JE(KE(qb(t)(r({remove:e.value0(Cl),sendTo:function(n){return e.value0($l(n))}}))))(e.value1)}))}},BA=YE(0);var WA=ce(),tM=zr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(WA(fe()(WA(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),rM=Ee(ge),Ec=Ht(Sr),Zn=z(Yt),HA=wr(xt)(_),eM=Pt(Jb),nM=Pt(Sc),UA=Je(Se)(Ke),uM=dt(de),aM=Xo(ka),iM=Pt(H_),oM=ru(Se),Y_=Pt(Qb),qA=Pt(Kr),fM=O(Tr),cM=Pt(mi),zA=J_(Zu),pM=Ye(Gn),lM=zu(De),VA=mr(Ir),_M=Pt(Jr);var vM=function(){function t(){}return t.value=new t,t}(),Z_=function(){function t(){}return t.value=new t,t}(),GA=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sM=function(){return tt.value}(),jA=function(t){return tM(sM)({code:Or([Pr([b(jl)])]),result:vi(function(r){return rM(function(e){return Ec(Zn(vM.value))(e)})(function(e){return br([br([La(HA(Zn)([eM(ke.value)("border-style:solid;border-width: 1px;border-color: black;"),nM(Oo.value)(kr(function(n){return UA(uM(Zf(n))(hc))(aM(Cc)(function(u){return r(GA.create(u))}))})),iM($c.value)(kr(function(n){return UA(X_(n))(function(u){return oM(j_(u)==="Enter")(r(Z_.value))})}))]))([]),he(Ec(Zn(Y_(ke.value)("margin: 5px;")))(Zn(qA(Ar.value)(kr(R(r(Z_.value)))))))([b("Add")])]),Yu(fM(function(n){return xc(BA)(function(u){return br([ra(Zn(cM(ke.value)("margin: 5px;")))([b(n)]),he(Ec(Zn(Y_(ke.value)("margin: 5px;")))(zA(Zn(u.sendTo(0)))))([b("Prioritize")]),he(Ec(Zn(Y_(ke.value)("margin: 5px;")))(zA(Zn(u.remove))))([b("Delete")])])})})(pM(function(n){return n.value0?new v(n.value1):L.value})(lM(function(n){return function(u){return u instanceof GA?new j(u.value0,new j(!1,u.value0)):u instanceof Z_?new j(n,new j(!0,n)):new j("",new j(!1,""))}})("")(e))))])})}),next:HA(Zn)([qA(Ar.value)(kr(function(r){return VA(VA(Vr(r))(t.dpage(Si.value)))(oe)})),_M(Wr.value)(t.slug+"portals/")])})};var XA=ce(),bM=zr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(XA(fe()(XA(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),DM=wr(xt)(_),kM=z(Yt),AM=Pt(Kr),JA=mr(Ir),dM=Pt(Jr),yM=function(){return tt.value}(),KA=function(t){return bM(yM)({code:Or([Pr([b(Gl)])]),result:br([b("Hello world")]),next:DM(kM)([AM(Ar.value)(kr(function(r){return JA(JA(Vr(r))(t.dpage(Di.value)))(oe)})),dM(Wr.value)(t.slug+"component/")])})};var SM=zr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(fe()(qr)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),$M=wr(xt)(_),CM=z(Yt),hM=Pt(Kr),QA=mr(Ir),FM=Pt(Jr),TM=function(){return tt.value}(),YA=function(t){return SM(TM)({next:$M(CM)([hM(Ar.value)(kr(function(r){return QA(QA(Vr(r))(t.dpage(bi.value)))(oe)})),FM(Wr.value)(t.slug+"hello/")])})};var ZA=ce(),EM=zr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(ZA(fe()(ZA(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),MM=Ee(ge),wM=Ht(Sr),Ti=z(Yt),IM=jb(),LM=O(fi),tv=wr(xt)(_),PM=Pt(bA),OM=Pt(pD),RM=Pt(AA),NM=Pt(dA),td=bb()(),nd=fl()()()()(),BM=nd({reflectType:function(){return 1}}),WM=nd({reflectType:function(){return 0}}),HM=qu(De),UM=z(ca),rd=Pt(Kr),ed=mr(Ir),qM=Pt(Jr);var zM=function(){return tt.value}(),ud=function(t){return EM(zM)({code:Or([Pr([b(Vl)])]),result:Yu(Qu(function(r){return MM(wM(Ti(void 0)))(function(e){return Ti(_i(IM(LM(function(n){return V_(tv(Ti)([PM(W_.value)("true"),OM(Ao.value)("250")]))([z_(tv(Ti)([RM(U_.value)(n),NM(Ro.value)("video/mp4")]))([])])})(td("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(td("https://www.w3schools.com/jsref/movie.mp4")(mb))))(function(n){var u=BM(tt.value)(n.value0),o=WM(tt.value)(n.value0),p=function(s){return HM(function(m){return function(h){return!m}})(s)(e)},l=function(){var s=Gf(function(m){return m?o:u});return function(m){return ko(UM(s(p(m))))}}();return br([he(Ti(rd(Ar.value)(kr(R(r(void 0))))))([b("Switch videos")]),br([l(!0),l(!1)])])})))})})),next:tv(Ti)([rd(Ar.value)(kr(function(r){return ed(ed(Vr(r))(t.dpage($i.value)))(oe)})),qM(Wr.value)(t.slug+"ssr/")])})};var ad=ce(),GM=zr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(ad(fe()(ad(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),jM=ED({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <svg height="100" width="100">
      <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
    </svg> 
    </div>
`}})()(qr),XM=wr(xt)(_),JM=z(Yt),KM=Pt(Kr),id=mr(Ir),QM=Pt(Jr),YM=function(){return tt.value}(),ZM=function(){return tt.value}(),od=function(t){return GM(YM)({code:Or([Pr([b(zl)])]),result:jM(ZM),next:XM(JM)([KM(Ar.value)(kr(function(r){return id(id(Vr(r))(t.dpage(di.value)))(oe)})),QM(Wr.value)(t.slug+"events1/")])})};var cd=ce(),pd=fe(),ld=cd(qr),rw=Ul({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(cd(pd(ld({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Bo=z(Yt),ew=zr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(pd(ld({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),nw=Pt(Xb),uw=Pt(Zu),aw=Ht(Sr),iw=J(Tr),ow=_u(po),fw=wr(xt)(_),cw=Pt(Kr),fd=mr(Ir),pw=Pt(Jr),lw=function(){return tt.value}(),_w=function(){return tt.value}(),_d=function(t){return rw(tt.value)(lw)({code:Or([Pr([b(ql)])]),result:Yu(Qu(function(r){return function(e){return Bo(_i(ew(_w)({myli:Bo(nw(ke.value)("background-color:rgb(200,240,210);")),somethingNew:he(Bo(uw(Ar.value)(r(new v(void 0)))))([Ze(aw(iw(ow(e))("Thanks for clicking me!"))(Bo("I was dynamically inserted")))])})))}})),next:fw(Bo)([cw(Ar.value)(kr(function(r){return fd(fd(Vr(r))(t.dpage(gi.value)))(oe)})),pw(Wr.value)(t.slug+"events2/")])})};var rv=()=>document.documentElement.querySelector("[data-deku-root]");var ev=t=>()=>{t.hydrating=!0},nv=t=>()=>{t.hydrating=!1},vd=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(o=>()=>t(r.dynFamily)(p=>()=>{for(var l=0,s=0,m;s<n.childNodes.length;){if(n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue==="%-%"+p){s+=1;break}s++}let h=B=>{e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,n.childNodes[B]),n.insertBefore(e.units[r.id].endBeacon,n.childNodes[B])):n.insertBefore(e.units[r.id].main,n.childNodes[B])};for(;s<n.childNodes.length;){var P;if((P=n.childNodes[s].$dekuId)&&t(e.units[P].dynFamily)(N=>()=>t(e.units[P].pos)(d=>()=>p===N&&o<=d?(h(s),!0):!1)())())return!0;if(l===o||n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue==="%-%"+p+"%-%")return h(s),!0;n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue.substring(0,3)==="%-%"&&!m&&(m=n.childNodes[s].nodeValue+"%-%"),m||l++,n.childNodes[s].nodeType===8&&n.childNodes[s].nodeValue===m&&(m=void 0,l++),s++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(p=>()=>(e.units[r.id].main?e.units[p].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[p].endBeacon):(e.units[p].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[p].endBeacon),e.units[p].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(p=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[p].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[p].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[p].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},uv=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),o;o=u.nextNode();)o.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[o.nodeValue.substring(3)]=o)}e(document.documentElement)},sd=t=>r=>e=>n=>()=>{var u,o,p=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(p),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(o=n.allBeacons[`${e.id}%-%`])?(n.units[p]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:o},u.$dekuId=p,o.$dekuId=p,!0):!1)()){let s=document.createComment(`%-%${e.id}`),m=document.createComment(`%-%${e.id}%-%`);n.units[p]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:s,endBeacon:m},s.$dekuId=p,m.$dekuId=p}},mw=new Set(["animate","animateMotion","animateTransform","circle","clipPath","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","title","tspan","use","view"]);var md=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),bd=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),Dd=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),kd=t=>r=>e=>n=>()=>{var u,o=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(o),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${o}"]`))?(n.units[o]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=o,!0):!1)()){let l=mw.has(e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag);n.units[o]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:l},l.$dekuId=o}},Ad=t=>r=>e=>n=>u=>()=>{var o=n.id,p;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(o),!t(n.parent)(s=>()=>{if(u.hydrating&&r&&(p=document.documentElement.querySelector(`[data-deku-ssr="${s}"]`))){for(var m=0;m<p.childNodes.length;m++){let N=o.split("@-@");if(p.childNodes[m].nodeType===8&&p.childNodes[m].nodeValue===N[0]){m=m-1;var h=m===-1,P=m>=0&&p.childNodes[m].nodeType===8;h&&p.prepend(document.createTextNode("")),P&&p.insertBefore(document.createTextNode(""),p.childNodes[m+1]);break}}let B=p.childNodes[m];return u.units[o]={main:B,pos:n.pos,parent:n.parent,scope:n.scope},B.$dekuId=o,!0}return!1})()){let s=document.createTextNode("");u.units[o]={main:s,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},s.$dekuId=o}};function av(){return{units:{},scopes:{},allBeacons:{}}}var dd=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"||e.units[n].main.tagName==="TEXTAREA"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},yd=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var o=p=>u(p)();e.units[n].main.addEventListener(r.key,o),e.units[n].listeners[r.key]=o}}},gd=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},Sd=t=>r=>e=>n=>u=>()=>{var o,p,l=n.id,s=n.html,m=n.verb,h=n.cache,P=n.parent,B=n.scope,N=n.pxScope;let f=t(n.parent)(()=>()=>u.hydrating&&r&&(o=document.documentElement.querySelector(`[data-deku-ssr="${l}"]`))?(u.units[l]={listeners:{},pos:n.pos,scope:B,parent:P,main:o},o.$dekuId=l,!0):!1)();if(!f){let ot=Object.entries(h);for(var d=0;d<ot.length;d++){let X=ot[d][0];ot[d][1]===!0?s=s.replace(m+X+m,'data-deku-attr-internal="'+X+'"'):s=s.replace(m+X+m,'<span style="display:contents;" data-deku-elt-internal="'+X+'"></span>')}p=document.createElement("div"),p.innerHTML=s.trim(),u.units[l]={listeners:{},pos:n.pos,scope:B,parent:P,main:p.firstChild},p.firstChild.$dekuId=l}u.scopes[B]||(u.scopes[B]=[]),u.scopes[B].push(l),p||(p=o),p.querySelectorAll("[data-deku-attr-internal]").forEach(function(ot){var X=ot.getAttribute("data-deku-attr-internal");let Rt=X+"@!%"+N;u.units[Rt]={listeners:{},main:ot,scope:B},u.scopes[B].push(Rt)}),p.querySelectorAll("[data-deku-elt-internal]").forEach(function(ot){var X=ot.getAttribute("data-deku-elt-internal");let Rt=X+"@!%"+N;u.units[X+"@!%"+N]={listeners:{},main:ot,scope:B},u.scopes[B].push(Rt)}),f||u.units[l].main.remove()},$d=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},iv=t=>r=>e=>n=>()=>{let u=(f,d,ot)=>{if(n.units[f].startBeacon){var X=n.units[f].startBeacon,Rt=X.nextSibling;for(n.units[d].main.insertBefore(X,ot),X=Rt;X&&X!==n.units[f].endBeacon;)Rt=X.nextSibling,n.units[d].main.insertBefore(X,ot),X=Rt}else n.units[d].main.insertBefore(n.units[f].main,ot)},o=[];o.push(e);for(var p=0;p<o.length;p++){let f=o[p],d=f.id,ot=f.parent;n.units[d].containingScope=f.scope;var l=void 0;r(f.pos)(Rt=>()=>(l=Rt,!0))(),l===void 0&&(l=Number.MAX_VALUE);let X=n.units[ot].main.childNodes;for(var s=0,m=!1,h=0;s<X.length;){var P;if(P=X[s].$dekuId){if(r(f.dynFamily)(Wt=>()=>m?!1:n.units[P].endBeacon===X[s]&&Wt===P?(n.units[d].pos=t(h),u(d,ot,X[s]),!0):!1)()){m=!0;break}if(n.units[P].dynFamily!==n.units[d].dynFamily){s++;continue}if(m){s++;continue}h===l?(u(d,ot,X[s]),h++,m=!0):n.units[P].endBeacon!==X[s]&&(n.units[P].pos=t(h),h++)}s++}if(m)return;if(n.units[d].main)n.units[ot].main.appendChild(n.units[d].main);else{var B=n.units[d].startBeacon,N=B.nextSibling;for(n.units[ot].main.appendChild(B),B=N;B&&B!==n.units[d].endBeacon;)N=B.nextSibling,n.units[ot].main.appendChild(B),B=N}}},Cd=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let o=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(o.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,o.appendChild(n),n=u;n===r.units[e].endBeacon&&o.appendChild(n)}}},ov=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},hd=ov;var dw=Hi(Qo),yw=Oe();var Fd=function(t){return t};var gw=1,fv=2147483647,Sw=function(){return fv-1|0}(),cv=function(t){var r=function(e){return function(n){return function(u){var o=n-e|0,p=dw(u)(o),l=p<e;return l?p+n|0:p}}};return r(gw)(Sw)(t)};var $w=0,Cw=48271,Td=function(t){return function(r){return yw(kc(Io(Me(Cw)*Me(r)+Me(t))(Me(fv))))}},xd=Td($w);var ww=function(){function t(p){this.fn=p}var r={},e=function(p,l){this.head=p,this.tail=l};function n(p){return new e(p,r)}function u(p){return function(l){return new e(p,l)}}function o(p){for(var l=[],s=p;s!==r;)l.push(s.head),s=s.tail;return l}return function(p){return function(l){return function(s){var m=function(P,B){return p(l(u)(s(P)))(B)},h=function(P,B,N){if(B===0)return P;var f=N[B-1];return new t(function(){var d=h(m(f,P),B-1,N);return d})};return function(P){for(var B=l(n)(s(P[P.length-1])),N=h(B,P.length-1,P);N instanceof t;)N=N.fn();return l(o)(N)}}}}}();var Wo=function(t){var r=O(t);return{map:function(e){return function(n){return function(u){return r(function(o){return new j(e(o.value0),o.value1)})(n(u))}}}}};var _v=function(t){return{Applicative0:function(){return Ic(t)},Bind1:function(){return Mc(t)}}},Mc=function(t){var r=dt(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(o){var p=n(o.value0);return p(o.value1)})}}},Apply0:function(){return wc(t)}}},wc=function(t){var r=Wo(t.Bind1().Apply0().Functor0());return{apply:Re(_v(t)),Functor0:function(){return r}}},Ic=function(t){var r=z(t.Applicative0());return{pure:function(e){return function(n){return r(new j(e,n))}},Apply0:function(){return wc(t)}}};var Lc=function(t){var r=z(t.Applicative0()),e=_v(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var Rd=function(t){return function(r){var e=t(r);return e.value1}},Nd=function(t){return function(r){var e=t(r);return e.value0}};var Xw=Lc(Ne),Jw=jn(Xw);var Kw=Wo(fu);var Qw=Ge(Ri);var Yw=_e(Ri);var Zw=function(t){return t};var t0=function(){var t=function(r){return new j(Fd(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=xd(r.newSeed),e}())};return Jw(t)}();var Hd=Kw,Pc=O(Hd);var sv=function(t){return Nd(Zw(t))};var Ud=wc(Ne),r0=jt(Ud),Wd=function(t){return function(r){var e=Me(r),n=Me(t),u=function(l){return n+Io(l)(e-n+1)},o=Pc(Me)(t0),p=r0(Pc(Yw)(o))(Pc(Qw(2))(o));return Pc(function(l){return C_(u(l))})(p)}},qd=function(t){return function(r){var e=t<=r;return e?Wd(t)(r):Wd(r)(t)}};var Vd=function(t){return t.arbitrary};var Gd=function(){return{arbitrary:qd(-1e6)(1e6)}}();var Ue=ur(ue),vn=nt(jr),Xd=vt(mn),Jd=Vd(Gd),Kd=_e(la),jd=z(yr),n0=z(Se),rn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),en=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),we=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ae=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),sn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),tu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),En=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Oc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Av=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qe=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),u0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new yu(new En(t))])})(r))}},a0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new yu(new tu(t))])})(r))}},i0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new qe(new mv(t))])})(r))}},o0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new qe(new kv(t))])})(r))}},f0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new yu(new en(t))])})(r))}},c0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new qe(new Oc(t))])})(r))}},p0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new yu(new sn(t))])})(r))}},l0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new yu(new rn(t))])})(r))}},_0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new yu(new we(t)),new yu(new Ae(t))])})(r))}},v0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new qe(new bv(t))])})(r))}},s0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new qe(new Dv(t))])})(r))}},m0=function(t){return function(r){return Ue(Lr(function(e){return vn(e)([new qe(new Av(t))])})(r))}},Qd=function(t){return{ids:function(){var e=Xr(t)(),n=Xd(sv(Jd)({newSeed:cv(e),size:5}));return Ue(Lr(Kd(1))(t))(),n},makeElement:l0,attributeParent:function(r){return function(e){return jd(void 0)}},makeRoot:c0,makeText:f0,makePursx:p0,setProp:a0,makeDynBeacon:_0,setCb:function(r){return function(e){return jd(void 0)}},setText:u0,sendToPos:i0,deleteFromCache:m0,removeDynBeacon:o0,giveNewParent:v0,disconnectElement:s0}},Pa=function(t){return function(r){return t instanceof v?r(t.value0):n0(!1)}},b0=function(t){return function(r){return function(){var n=Dd(t.id)(r)(),u=bd(t.id)(r)(),o=md(t.id)(r)(),p={scope:n,parent:u,dynFamily:o,id:t.id,pos:new v(t.pos),ez:!1};return iv(v.create)(Pa)(p)(r)()}}},Yd=function(t){return{ids:function(){var e=Xr(t)(),n=Xd(sv(Jd)({newSeed:cv(e),size:5}));return Ue(Lr(Kd(1))(t))(),n},makeElement:kd(Pa)(!0),makeDynBeacon:sd(Pa)(!0),attributeParent:vd(Pa),makeRoot:$d,makeText:Ad(Pa)(!0)(tr(void 0)),makePursx:Sd(Pa)(!0)(tr(void 0)),setProp:dd(!0),setCb:yd(!0),setText:gd,sendToPos:b0,deleteFromCache:ov,removeDynBeacon:hd,giveNewParent:iv(v.create)(Pa),disconnectElement:Cd}};var dv=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),yv=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let o=r,p=Object.entries(n);for(var l=0;l<p.length;l++){let P=p[l][0];p[l][1]===!0?o=o.replace(u+P+u,'data-deku-attr-internal="'+P+'" data-deku-ssr="'+P+"@!%"+e+'"'):o=o.replace(u+P+u,'<span style="display:contents;" data-deku-elt-internal="'+P+'" data-deku-ssr="'+P+"@!%"+e+'"></span>')}let s=o.indexOf(">"),m=o.indexOf("/>"),h=m==s-1?m:s;return o.slice(0,h)+' data-deku-ssr="'+t+'" '+o.slice(h)};var k0=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},ty=O(no),aa=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),ry=function(t){var r=!1,e;function n(u){if(u.value1 instanceof Dt)return r=!0,new v(new j(u.value1.value0,new aa(u.value0,u.value1.value1)));if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,L.value;if(u.value1 instanceof rr){t=new aa(rr.value,hf(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Uo=function(t){var r=!1,e;function n(u){if(u.value0 instanceof rr&&u.value1 instanceof rr)return r=!0,L.value;if(u.value0 instanceof rr){t=new aa(hf(u.value1),rr.value);return}if(u.value0 instanceof Dt)return r=!0,new v(new j(u.value0.value0,new aa(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},$r=function(t){return function(r){return new aa(t.value0,new Dt(r,t.value1))}};var Rc={map:function(t){return function(r){return new aa(ty(t)(r.value0),ty(t)(r.value1))}}},Ho={foldMap:function(t){return np(Ho)(t)},foldr:function(t){return up(Ho)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,o=!1,p;function l(s,m){var h=Uo(m);if(h instanceof v){u=t(s)(h.value0.value0),n=h.value0.value1;return}if(h instanceof L)return o=!0,s;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[h.constructor.name])}for(;!o;)p=l(u,n);return p}};return r}},gv=ir(Ho),Sv={append:gv($r)},Fe=function(){return new aa(rr.value,rr.value)}(),ey={mempty:Fe,Semigroup0:function(){return Sv}},ny=$r(Fe),uy=function(t){var r=gr(t)(ey);return function(e){return r(ny)(e)}},$v={traverse:function(t){var r=t.Apply0(),e=O(r.Functor0()),n=re(r),u=z(t);return function(o){var p=e(gv($r)(Fe)),l=gv(function(s){var m=n($r)(s);return function(h){return m(o(h))}})(u(Fe));return function(s){return p(l(s))}}},sequence:function(t){return $p($v)(t)},Functor0:function(){return Rc},Foldable1:function(){return Ho}};var ay=function(t){return function(r){return new aa(new Dt(t,r.value0),r.value1)}},A0={Applicative0:function(){return Cv},Bind1:function(){return d0}},d0={bind:lr(gr(Ho)(ey)),Apply0:function(){return iy(0)}},Cv={pure:ny,Apply0:function(){return iy(0)}},iy=k0("applyCatQueue","Data.CatQueue",function(){return{apply:Re(A0),Functor0:function(){return Rc}}});var g0=function(t,r,e){var n=0,u;return function(o){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+o+")",r,o);return n=1,u=e(),n=2,u}},xi=nt(jr),ly=Fr(),Fv=O(Dr),S0=Jo(qa),$0=ze(Dr),oy=ur(Wo(fu)),fy=li(Lc(Ne)),cy=Uu(xe),C0=Ua(za)(Mc(Ne)),Ie=St(xu(wn)),Oa=nt(Sv),h0=z(Cv),py=O(Rc),F0=uy(xt),T0=ze(Hu),x0=dt(de),hv=ao(xe),E0=_u(Mf),_y=Ic(Ne),M0=We($v)(_y),qo=Je(_y)(Ke),w0=ou(xt)(qi),I0=Ye(wm),L0=gr(xt)(qi),P0=ir(ie);var O0=function(t){var r=function(e){return function(n){return function(u){return function(o){if(o instanceof L)return{acc:e,rest:[]};if(o instanceof v){if(o.value0.head instanceof we){var p=r([])(new v({id:o.value0.head.value0.id,e:o.value0.head.value0}))(o.value0.tail);return r(xi(e)(p.acc))(n)(p.rest)}if(o.value0.head instanceof Ae){if(n instanceof v)return{acc:[{pos:n.value0.e.pos,elt:new at({o:n.value0.e,a:e,c:o.value0.head.value0})}],rest:o.value0.tail};if(n instanceof L)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 56, column 34 - line 64, column 41): "+[n.constructor.name])}var l=function(){if(o.value0.head instanceof rn||o.value0.head instanceof en||o.value0.head instanceof sn||o.value0.head instanceof we||o.value0.head instanceof Ae)return o.value0.head.value0.pos;if(o.value0.head instanceof tu)return L.value;if(o.value0.head instanceof En)return L.value;throw new Error("Failed pattern match at Deku.SSR (line 67, column 18 - line 74, column 33): "+[o.value0.head.constructor.name])}();return r(xi(e)([{pos:l,elt:new it(o.value0.head)}]))(n)(o.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 50, column 40 - line 76, column 15): "+[o.constructor.name])}(xp(u))}}};return r([])(L.value)(t).acc},vy=g0("sortSortableDyns","Deku.SSR",function(){var t=Fv(function(e){if(e.elt instanceof it)return e;if(e.elt instanceof at)return{pos:e.pos,elt:new at({o:e.elt.value0.o,c:e.elt.value0.c,a:vy(45)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 42, column 5 - line 45, column 81): "+[e.elt.constructor.name])}),r=df(Ii(Tt(_a(se)))(function(e){return function(n){return n.pos}(ly(e))}));return function(e){return t(r(e))}}),R0=vy(39),sy=function(t){return S0($0(t)(function(r){return function(e){if(e instanceof it)return[e.value0];if(e instanceof at)return xi([new we(e.value0.o)])(xi(sy(e.value0.a))([new Ae(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 33, column 26 - line 36, column 33): "+[e.constructor.name])}(function(e){return e.elt}(ly(r)))}))},my=function(t){return function(r){var e=function(f){return function(d){return oy(fy(function(ot){var X={};for(var Rt in ot)({}).hasOwnProperty.call(ot,Rt)&&(X[Rt]=ot[Rt]);return X.idToActions=cy(function(Wt){if(Wt instanceof v)return new v(xi(Wt.value0)([d]));if(Wt instanceof L)return new v([d]);throw new Error("Failed pattern match at Deku.SSR (line 284, column 17 - line 286, column 45): "+[Wt.constructor.name])})(f)(ot.idToActions),X}))}},n=ee("deku-root")(ro(function(f){return f instanceof qe&&f.value0 instanceof Oc?new v(f.value0.value0.id):L.value})(r)),u=function(f){return function(d){return function(ot){return C0(oy(fy(function(X){var Rt={};for(var Wt in X)({}).hasOwnProperty.call(X,Wt)&&(Rt[Wt]=X[Wt]);return Rt.parentToChild=cy(function(Qt){if(Qt instanceof v)return new v(xi(Qt.value0)([d]));if(Qt instanceof L)return new v([d]);throw new Error("Failed pattern match at Deku.SSR (line 271, column 19 - line 273, column 43): "+[Qt.constructor.name])})(f)(X.parentToChild),Rt})))(function(){return e(d)(ot)})}}},o=function(f){var d=function(ct){return function(V){return function(H){if(H instanceof rn){var st=H.value0.id===ct||Ie(H.value0.dynFamily)(new v(H.value0.id));return st?new rn({id:H.value0.id,scope:H.value0.scope,parent:H.value0.parent,tag:H.value0.tag,pos:new v(V),dynFamily:H.value0.dynFamily}):H}if(H instanceof en){var kt=H.value0.id===ct||Ie(H.value0.dynFamily)(new v(H.value0.id));return kt?new en({id:H.value0.id,pos:new v(V),scope:H.value0.scope,parent:H.value0.parent,dynFamily:H.value0.dynFamily}):H}if(H instanceof sn){var Le=H.value0.id===ct||Ie(H.value0.dynFamily)(new v(H.value0.id));return Le?new sn({id:H.value0.id,parent:H.value0.parent,html:H.value0.html,scope:H.value0.scope,pos:new v(V),pxScope:H.value0.pxScope,verb:H.value0.verb,cache:H.value0.cache,dynFamily:H.value0.dynFamily}):H}if(H instanceof we){var Rr=H.value0.id===ct||Ie(H.value0.dynFamily)(new v(H.value0.id));return Rr?new we({id:H.value0.id,parent:H.value0.parent,pos:new v(V),scope:H.value0.scope,dynFamily:H.value0.dynFamily}):H}if(H instanceof Ae){var gu=H.value0.id===ct||Ie(H.value0.dynFamily)(new v(H.value0.id));return gu?new Ae({id:H.value0.id,parent:H.value0.parent,pos:new v(V),scope:H.value0.scope,dynFamily:H.value0.dynFamily}):H}if(H instanceof En||H instanceof tu)return H;throw new Error("Failed pattern match at Deku.SSR (line 194, column 24 - line 216, column 29): "+[H.constructor.name])}}},ot=function(ct){return function(V){if(V instanceof rn){var H=V.value0.id===ct||Ie(V.value0.dynFamily)(new v(V.value0.id));return H?new rn({id:V.value0.id,scope:V.value0.scope,parent:L.value,tag:V.value0.tag,pos:V.value0.pos,dynFamily:V.value0.dynFamily}):V}if(V instanceof en){var st=V.value0.id===ct||Ie(V.value0.dynFamily)(new v(V.value0.id));return st?new en({id:V.value0.id,pos:V.value0.pos,scope:V.value0.scope,parent:L.value,dynFamily:V.value0.dynFamily}):V}if(V instanceof sn){var kt=V.value0.id===ct||Ie(V.value0.dynFamily)(new v(V.value0.id));return kt?new sn({id:V.value0.id,parent:L.value,html:V.value0.html,scope:V.value0.scope,pos:V.value0.pos,pxScope:V.value0.pxScope,verb:V.value0.verb,cache:V.value0.cache,dynFamily:V.value0.dynFamily}):V}if(V instanceof we){var Le=V.value0.id===ct||Ie(V.value0.dynFamily)(new v(V.value0.id));return Le?new we({id:V.value0.id,parent:L.value,pos:V.value0.pos,scope:V.value0.scope,dynFamily:V.value0.dynFamily}):V}if(V instanceof Ae){var Rr=V.value0.id===ct||Ie(V.value0.dynFamily)(new v(V.value0.id));return Rr?new Ae({id:V.value0.id,parent:L.value,pos:V.value0.pos,scope:V.value0.scope,dynFamily:V.value0.dynFamily}):V}if(V instanceof En||V instanceof tu)return V;throw new Error("Failed pattern match at Deku.SSR (line 217, column 24 - line 239, column 29): "+[V.constructor.name])}},X=function(ct){return function(V){return function(H){return function(st){return function(kt){if(kt instanceof v&&kt.value0.value0 instanceof we){if(Ie(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Oa(ct)(V))(kt.value0.value0))(Fe)(H)(kt.value0.value1);if(Hr)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof Ae){if(Ie(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Oa(ct)(V))(kt.value0.value0))(Fe)(H)(kt.value0.value1);if(Hr)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof en){if(Ie(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Oa(ct)(V))(kt.value0.value0))(Fe)(H)(kt.value0.value1);if(Hr)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof sn){if(Ie(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Oa(ct)(V))(kt.value0.value0))(Fe)(H)(kt.value0.value1);if(Hr)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof rn){if(Ie(kt.value0.value0.value0.dynFamily)(new v(H.id)))return X($r(Oa(ct)(V))(kt.value0.value0))(Fe)(H)(kt.value0.value1);if(Hr)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1)}if(kt instanceof v&&kt.value0.value0 instanceof tu)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1);if(kt instanceof v&&kt.value0.value0 instanceof En)return X(ct)($r(V)(kt.value0.value0))(H)(kt.value0.value1);if(kt instanceof L)return Oa(ct)(Oa(h0(new Ae({id:H.id+"%-%",parent:H.parent,pos:H.pos,scope:H.scope,dynFamily:H.dynFamily})))(V));throw new Error("Failed pattern match at Deku.SSR (line 120, column 63 - line 171, column 20): "+[kt.constructor.name])}(Uo(st))}}}},Rt=function(ct){return function(V){return function(H){if(H instanceof v&&H.value0.value0 instanceof Ae)return Rt(X(Fe)(Fe)(H.value0.value0.value0)(ct))(H.value0.value1);if(H instanceof v)return Rt(ay(H.value0.value0)(ct))(H.value0.value1);if(H instanceof L)return ct;throw new Error("Failed pattern match at Deku.SSR (line 107, column 45 - line 112, column 20): "+[H.constructor.name])}(ry(V))}},Wt=function(ct){return function(V){return function(H){return function(st){if(st instanceof v&&st.value0.value0 instanceof rn){var kt=st.value0.value0.value0.id===V;return kt?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof en){var Le=st.value0.value0.value0.id===V;return Le?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof sn){var Rr=st.value0.value0.value0.id===V;return Rr?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof we){var gu=st.value0.value0.value0.id===V;return gu?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof Ae){var Ra=st.value0.value0.value0.id===V;return Ra?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof tu){var Na=st.value0.value0.value0.id===V;return Na?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof v&&st.value0.value0 instanceof En){var Te=st.value0.value0.value0.id===V;return Te?Wt(ct)(V)(st.value0.value1):Wt($r(ct)(st.value0.value0))(V)(st.value0.value1)}if(st instanceof L)return ct;throw new Error("Failed pattern match at Deku.SSR (line 241, column 49 - line 263, column 20): "+[st.constructor.name])}(Uo(H))}}},Qt=function(ct){return function(V){return function(H){if(H instanceof v&&H.value0.value0 instanceof yu)return Qt($r(ct)(H.value0.value0.value0))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof qe&&H.value0.value0.value0 instanceof mv)return Qt(py(d(H.value0.value0.value0.value0.id)(H.value0.value0.value0.value0.pos))(ct))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof qe&&H.value0.value0.value0 instanceof Oc||H instanceof v&&H.value0.value0 instanceof qe&&H.value0.value0.value0 instanceof bv)return Qt(ct)(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof qe&&H.value0.value0.value0 instanceof Dv)return Qt(py(ot(H.value0.value0.value0.value0.id))(ct))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof qe&&H.value0.value0.value0 instanceof kv)return Qt(Wt(Fe)(H.value0.value0.value0.value0.id)(ct))(H.value0.value1);if(H instanceof v&&H.value0.value0 instanceof qe&&H.value0.value0.value0 instanceof Av)return Qt(Wt(Fe)(H.value0.value0.value0.value0.id)(ct))(H.value0.value1);if(H instanceof L)return ct;throw new Error("Failed pattern match at Deku.SSR (line 172, column 42 - line 193, column 20): "+[H.constructor.name])}(Uo(V))}},et=F0(f),dr=Qt(Fe)(et),pe=Rt(Fe)(dr);return pe},p=o(r),l=function(f){return{parentToChild:T0(f.parentToChild)(function(){var d=Fv(function(X){if(X instanceof rn||X instanceof en||X instanceof sn||X instanceof we||X instanceof Ae||X instanceof tu||X instanceof En)return X.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 303, column 23 - line 310, column 45): "+[X.constructor.name])}),ot=Fv(function(X){return x0(hv(X)(f.idToActions))(Mp)});return function(X){return d(sy(R0(O0(E0(ot(X))))))}}()),idToActions:f.idToActions}}(Rd(M0(function(f){if(f instanceof rn)return qo(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof en)return qo(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof sn)return qo(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof we)return qo(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof Ae)return qo(f.value0.parent)(function(d){return u(d)(f.value0.id)(f)});if(f instanceof tu||f instanceof En)return e(f.value0.id)(f);throw new Error("Failed pattern match at Deku.SSR (line 318, column 19 - line 329, column 45): "+[f.constructor.name])})(p))({parentToChild:Vn,idToActions:Vn})),s=function(f){return Ha(Ip(function(d){return d instanceof rn||d instanceof en||d instanceof we||d instanceof Ae})(f))},m=function(f){return ee("")(ro(function(d){return d instanceof rn?new v(d.value0.tag):L.value})(f))},h=function(f){return w0(" ")(I0(function(d){return d instanceof tu?new v(d.value0.key+('="'+(d.value0.value+'"'))):L.value})(f))},P=function(f){return tr("")(function(d){var ot=function(et){return ee("")(ro(function(dr){return dr instanceof En?new v(dv(dr.value0.text)+("<!--"+(f+"-->"))):L.value})(d))},X=function(et){return"<!--%-%"+(f+"-->")},Rt=function(et){var dr=m(d),pe=h(d);return"<"+(dr+(" "+(pe+(' data-deku-ssr="'+(f+('">'+(B(f)+("</"+(dr+">")))))))))},Wt=function(et){return"<!--%-%"+(f+"-->")},Qt=Lu(d)(0);return Qt instanceof v&&Qt.value0 instanceof En?ot(void 0):Qt instanceof v&&Qt.value0 instanceof en?ot(void 0):Qt instanceof v&&Qt.value0 instanceof we?X(void 0):Qt instanceof v&&Qt.value0 instanceof Ae?Wt(void 0):Qt instanceof v&&Qt.value0 instanceof sn?yv(Qt.value0.value0):Rt(void 0)})(hv(f)(l.idToActions))},B=function(f){var d=ee([])(hv(f)(l.parentToChild));return L0(P)(d)},N=function(f){return P0(function(d){return function(ot){var X=s(ot);if(X)return d;if(!X)return _c("data-deku-ssr")(h(ot)+" data-deku-ssr")(d);throw new Error("Failed pattern match at Deku.SSR (line 351, column 17 - line 355, column 14): "+[X.constructor.name])}})(B(f))(l.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(n+('">'+(N(n)+("</"+(t+">")))))))}};var yI=ze(q),gI=Aa(ri);var SI=ur(q),by=Fr(),$I=St(Xu),CI=k(),hI=Ht(Sr),FI=z(Yt),Dy=z(yr),TI=O(ue),xI=Aa(Ps),EI=ur(ue);var ky=function(t){return function(r){return function(e){return ln({doLogic:function(n){return function(u){return function(o){return u.sendToPos({id:o,pos:n})}}},ids:function(n){return function(u){return u.ids}(by(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:$I})}},toElt:function(n){return n}})(t)(r)(CI(e))}}},MI=function(t){return function(){var e=av();uv(e)();var n=yI(gI(ne(0)))(Yd)();ev(e)();var u=rv(),o=Qp(hI(FI(by(n).makeRoot({id:"deku-root",root:u})))(ky({parent:new v("deku-root"),scope:new ju("rootScope"),raiseId:function(p){return Dy(void 0)},ez:!0,pos:L.value,dynFamily:L.value})(n)(t)))(function(p){return p(e)})();return nv(e)(),o}},Ay=function(t){return SI(MI(t))},wI=function(t){return function(r){return function(e){return TI(function(){var n=my(t);return function(u){return function(o){return r.head+o}(function(o){return o+r.tail}(n(u)))}}())(xI(function(){var u=ne(0)(),o=ne([])(),p=Qd(u);return EI(nb(ky({parent:new v("deku-root"),scope:new ju("rootScope"),raiseId:function(l){return Dy(void 0)},ez:!0,pos:L.value,dynFamily:L.value})(p)(e))(function(l){return l(o)}))(),Xr(o)()}))}}},dy=wI("body");var II=Tc(Zu),Tv=Ht(Sr),Nc=z(Yt),gy=O(Tr),Sy=nt(pa),LI=vt(mn),PI=qu(De),OI=vt(Wi),zo=ce(),RI=zr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(zo(zo(zo(zo(zo(qr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),NI=mr(ti),BI=dt(Iu),$y=z(yr),WI=function(){return tt.value}(),Cy=function(){return qf()(ii({reflectSymbol:function(){return"buttonClicked"}})()()(ii({reflectSymbol:function(){return"sliderMoved"}})()()(Nf)()())()())(tt.value)(function(t){return function(r){return br([q_([b(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),he(II(t.buttonClicked(void 0)))([b("Click")]),br([Ze(Tv(Nc("Val: 0"))(gy(function(){var e=Sy("Val: ");return function(n){return e(LI(n))}}())(PI(function(e){return function(n){return 1+e|0}})(-1)(Tv(Nc(void 0))(r.buttonClicked)))))]),br([La(Fc(Nc(t.sliderMoved)))([]),br([Ze(Tv(Nc("Val: 50"))(gy(function(){var e=Sy("Val: ");return function(n){return e(OI(n))}}())(r.sliderMoved)))])])])}})}(),hy=function(t){return RI(WI)({code2:Or([Pr([b(Zl)])]),code1:Or([Pr([b(Yl)])]),code0:Or([Pr([b(Ql)])]),result:Cy,codegen:Or([Pr([Ze(eb(function(r){return NI(BI(dy({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Cy))(r))($y($y(void 0)))}))])])})};var UI=Ee(ge),qI=Ht(Sr),xv=z(Yt),zI=O(Dr),VI=wr(xt)(_),GI=Pt(Kr),jI=mr(Ir),XI=Pt(Yb),JI=Pt(Jr),KI=Pt(mi),Fy=function(t){return vi(function(r){return UI(function(e){return qI(xv(t.startsWith))(e)})(function(e){var n=function(o){if(o instanceof Jf)return YA;if(o instanceof bi)return KA;if(o instanceof Di)return ND;if(o instanceof ki)return od;if(o instanceof di)return RA;if(o instanceof yi)return sA;if(o instanceof Ai)return _d;if(o instanceof gi)return jA;if(o instanceof Si)return ud;if(o instanceof $i)return hy;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 33, column 7 - line 33, column 34): "+[o.constructor.name])},u=function(o){return function(p){return n(p)({dpage:o,slug:t.slug})}};return br([br(zI(function(o){return ko([Do(VI(xv)([GI(Ar.value)(kr(function(p){return jI(Vr(p))(r(o.value0))})),XI(ke.value)("cursor:pointer;"),JI(Wr.value)(t.slug+o.value1.value1.value0)]))([b(o.value1.value0)]),ra(xv(KI(ke.value)(function(){return o.value1.value1.value1?"":"display:none;"}())))([b(" | ")])])})([new j(Jf.value,new j("Home",new j("",!0))),new j(bi.value,new j("Hello world",new j("hello/",!0))),new j(Di.value,new j("Component",new j("simple/",!0))),new j(ki.value,new j("Pursx 1",new j("pursx1/",!0))),new j(di.value,new j("Events 1",new j("events1/",!0))),new j(yi.value,new j("Effects",new j("effects/",!0))),new j(Ai.value,new j("Pursx 2",new j("pursx2/",!0))),new j(gi.value,new j("Events 2",new j("events2/",!0))),new j(Si.value,new j("Portals",new j("portals/",!0))),new j($i.value,new j("SSR",new j("ssr/",!1)))])),Gf(u(r))(e)])})})};var YI=vt(Zv()()(ts({reflectSymbol:function(){return"slug"}})(rs({reflectSymbol:function(){return"startsWith"}})(je))(je))),ZI=z(Se),L5t=function(t){return function(){var e=tr(So(hi("could not ingest options: "+YI(t))))(ZI)(hD(t.startsWith))();return Ay(Fy({slug:t.slug,startsWith:e}))()}};export{L5t as main};
